(self.webpackChunkallysson_me=self.webpackChunkallysson_me||[]).push([[390],{69100:function(e,t,n){var r=n(99489),c=n(57067);function o(t,n,a){return c()?(e.exports=o=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=o=function(e,t,n){var c=[null];c.push.apply(c,t);var o=new(Function.bind.apply(e,c));return n&&r(o,n.prototype),o},e.exports.default=e.exports,e.exports.__esModule=!0),o.apply(null,arguments)}e.exports=o,e.exports.default=e.exports,e.exports.__esModule=!0},57067:function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},21274:function(e,t,n){var r=n(41048);e.exports={MDXRenderer:r}},41048:function(e,t,n){var r=n(69100),c=n(319),o=n(59713),a=n(37316),u=["scope","children"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=n(67294),p=n(63497).mdx,f=n(93191).useMDXScope;e.exports=function(e){var t=e.scope,n=e.children,o=a(e,u),s=f(t),m=l.useMemo((function(){if(!n)return null;var e=i({React:l,mdx:p},s),t=Object.keys(e),o=t.map((function(t){return e[t]}));return r(Function,["_fn"].concat(c(t),[""+n])).apply(void 0,[{}].concat(c(o)))}),[n,t]);return l.createElement(m,i({},o))}},68061:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var r=n(4942),c=n(15861),o=n(9925),a=n(87757),u=n.n(a),s=n(67294),i=n(21274),l=n(71656),p=n(92009),f=n(50245),m=n(13306),d=n(29359),y=n(47412),h=n(54633),g=n(97224),v=n(63636),b=n(56247),E=n(16531),w=o.default.h2.withConfig({displayName:"styles__Title",componentId:"sc-zjz5uc-0"})(["margin-top:40px;"]),O=o.default.form.withConfig({displayName:"styles__Form",componentId:"sc-zjz5uc-1"})(["margin-top:24px;"]),x=o.default.article.withConfig({displayName:"styles__Comment",componentId:"sc-zjz5uc-2"})(["display:flex;justify-content:space-between;& + &{margin-top:22px;}"]),j=o.default.button.withConfig({displayName:"styles__DeleteComment",componentId:"sc-zjz5uc-3"})((function(e){var t=e.theme;return(0,o.css)(["width:24px;height:24px;margin:0;padding:0;cursor:pointer;border:none;background-color:transparent;svg{stroke:",";}"],t.colors.neutral[900])})),_=(0,o.default)(b.u_).withConfig({displayName:"styles__Modal",componentId:"sc-zjz5uc-4"})(["section{min-height:unset;border:none;}button svg{stroke:",";}"],(function(e){return e.theme.colors.neutral[900]})),D=o.default.div.withConfig({displayName:"styles__Author",componentId:"sc-zjz5uc-5"})(["display:flex;align-items:center;"]),P=o.default.strong.withConfig({displayName:"styles__Name",componentId:"sc-zjz5uc-6"})(["font-size:",";"],(0,E.Z)(16)),C=o.default.time.withConfig({displayName:"styles__Datetime",componentId:"sc-zjz5uc-7"})(["margin-left:4px;&::before{display:inline-block;margin-right:4px;content:'·';}"]),k=o.default.p.withConfig({displayName:"styles__Message",componentId:"sc-zjz5uc-8"})(["margin:0;white-space:pre-line;"]);function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e){var t=e.name,n=e.date.toDate();return s.createElement(D,null,s.createElement(P,null,t)," ",s.createElement(C,null,n.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})))}function N(e,t){switch(t.type){case"IDLE":return z(z({},e),{},{status:"IDLE"});case"WRITTING":return z(z({},e),{},{status:"writting",value:t.value});case"CREATED":return z(z({},e),{},{status:"created"});case"FAILED":return z(z({},e),{},{status:"rejected",action:t.action});case"SELECTED":return z(z({},e),{},{selected:t.selected});case"RESET":return z(z({},e),{},{selected:null,value:""});default:throw new Error("Unhandled action type: "+t.type)}}function R(e){return Z.apply(this,arguments)}function Z(){return Z=(0,c.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.IO)((0,l.hJ)(g.db,"comments"),(0,l.ar)((0,l.Jm)(),"==",t)),e.next=3,(0,l.PL)(n);case 3:e.sent.forEach(function(){var e=(0,c.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.oe)(t.ref);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)}))),Z.apply(this,arguments)}function T(e,t,n){return M.apply(this,arguments)}function M(){return(M=(0,c.Z)(u().mark((function e(t,n,r){var c;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.ET)((0,l.hJ)(g.db,"comments"),{uid:t.uid,message:n,userName:t.displayName,date:new Date,timestamp:(0,l.Bt)(),slug:r});case 3:return c=e.sent,e.abrupt("return",c);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function L(e){var t=e.comments,n=e.slug,r=(0,v.aC)().currentUser,o=(0,s.useRef)(null),a=(0,y.Z)({startOnRender:!1}),i=a[0],l=i.animation,p=i.state,g=a[1],b=(0,s.useReducer)(N,{status:null,action:null,selected:null,value:""}),E=b[0],_=b[1],D=E.status,P=E.action,C=E.selected,I=E.value,z=function(){var e=(0,c.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),I){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,T(r,I,n);case 6:_({type:"CREATED"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),_({type:"FAILED",action:"criar"});case 12:_({type:"RESET"});case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),Z=function(e){return function(){g(!0),_({type:"SELECTED",selected:e})}};return s.createElement("section",null,s.createElement(w,null,"Comentários"),t.length?t.map((function(e){var t=e.id,n=e.userName,c=e.date,o=e.message,a=e.uid;return s.createElement(x,{key:t},s.createElement("div",null,s.createElement(S,{name:n,date:c}),s.createElement(k,null,o)),a===(null==r?void 0:r.uid)&&s.createElement("div",null,s.createElement(j,{title:"Deletar comentário",onClick:Z(t)},s.createElement(f.Z,{width:16,height:16}))))})):"Não há comentários nesse post.",r&&s.createElement(O,{onSubmit:z,"aria-live":"polite"},"created"===D?s.createElement(m.Z,{show:!0,type:"success"},"Seu comentário foi adicionado!"):s.createElement(h.gx,{onChange:function(e){_({type:"WRITTING",value:e.target.value}),o.current.style.height=o.current.scrollHeight+"px"},placeholder:"Deixe um comentário",value:I,ref:o})),s.createElement(m.Z,{show:"rejected"===D,closable:!0,onClose:function(){return _({type:"IDLE"})},type:"danger"},"Ocorreu algum erro inexperado ao ",P," seu comentário. Tente novamente daqui a pouco."),p&&s.createElement(F,{onClose:function(){return g(!1)},$_css:l},s.createElement("p",null,"Você tem certeza que deseja deletar esse comentário?"),s.createElement(d.Z,{onClick:function(){return g(!1)},style:{marginRight:12}},"Cancelar"),s.createElement(d.Z,{skin:"danger",onClick:(0,c.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R(C),g(!1);case 2:case"end":return e.stop()}}),e)})))},"Deletar")))}L.defaultProps={comments:[]};var A=L,F=(0,o.default)(_).withConfig({displayName:"Comments___StyledModal",componentId:"sc-wcenxy-0"})(["animation:",";"],(function(e){return e.$_css})),J=A;function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function B(e){var t=e.data.mdx,n=e.transitionStatus,r=(0,s.useState)([]),o=r[0],a=r[1];(0,s.useEffect)((function(){if(t.slug){var e=function(){var e=(0,c.Z)(u().mark((function e(){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.IO)((0,l.hJ)(g.db,"comments"),(0,l.ar)("slug","==",t.slug),(0,l.Xo)("date","desc")),r=(0,l.cf)(n,(function(e){var t=e.docs.map((function(e){return $({id:e.id},e.data())}));a(t)})),e.abrupt("return",(function(){return r()}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}}),[t.slug]);var f=(0,p.Z)(n);return s.createElement(q,{$_css:f},s.createElement(b.HJ,{title:t.frontmatter.title,description:t.excerpt}),s.createElement(h.Dx,null,t.frontmatter.title),s.createElement(h.dk,null,t.frontmatter.description),s.createElement("time",null,"Publicado em ",t.frontmatter.date),t.frontmatter.img&&s.createElement(h.Ei,{src:"/"+t.frontmatter.img}),s.createElement(b.o5,{headings:t.headings}),s.createElement(i.MDXRenderer,null,t.body),s.createElement(h.Hr,{style:{marginTop:40}}),s.createElement(J,{slug:t.slug,comments:o}))}var H=B;B.defaultProps={transitionStatus:void 0};var q=(0,o.default)("div").withConfig({displayName:"blog-post___StyledDiv",componentId:"sc-94awsv-0"})(["animation:",";"],(function(e){return e.$_css}))}}]);
//# sourceMappingURL=component---src-templates-blog-post-jsx-7a54dc2143a36031408e.js.map