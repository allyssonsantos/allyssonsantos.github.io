(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[803],{9803:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return I},default:function(){return Article}});var r=n(5893),c=n(2962),a=n(3834),i=n(5675),l=n.n(i),s=n(7294),o=n(3935),d=n(1220);let getMDXComponent=(e,t={})=>{let n={React:s,ReactDOM:o,_jsx_runtime:d.i,...t},r=Function(...Object.keys(n),e);return r(...Object.values(n)).default},useMDXComponent=(e,t={})=>s.useMemo(()=>getMDXComponent(e,t),[e,t]);var u=n(8273),_=n(3993),m=n(5774),f=n(4976),p=n.n(f),h=n(2707);let b={CREATED:"CREATED",CHANGE:"CHANGE",ERROR:"ERROR"};function commentsReducer(e,t){switch(t.type){case b.CHANGE:return{...e,status:null,value:t.value};case b.CREATED:return{...e,status:b.CREATED,value:""};case b.ERROR:return{...e,status:b.ERROR};default:throw Error("Unhandled action type: ".concat(t.type))}}function AddComment(e){let{slug:t}=e,{t:n}=(0,u.$G)("article"),{currentUser:c}=(0,h.aC)(),[a,i]=(0,s.useReducer)(commentsReducer,{status:null,value:""});async function handleSubmit(e){if(e.preventDefault(),c&&a.value)try{await (0,m.Y)(c,a.value,t),i({type:b.CREATED})}catch(e){i({type:b.ERROR,value:a.value})}}return(0,r.jsxs)("form",{onSubmit:handleSubmit,children:[(0,r.jsx)(_.gx,{placeholder:n("add-comment"),onChange:function(e){i({type:b.CHANGE,value:e.target.value})},value:a.value,rows:5,name:"comment"}),(0,r.jsx)(_.zx,{variant:"inverted",type:"submit",className:p().comment__button,children:n("comment-button")}),"ERROR"===a.status&&(0,r.jsx)(_.bZ,{className:p().comment__alert,children:n("comment-error")})]})}var v=n(6008),g=n(5697),k=n.n(g);function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var x=(0,s.forwardRef)(function(e,t){var n=e.color,r=e.size,c=void 0===r?24:r,a=function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(e,["color","size"]);return s.createElement("svg",_extends({ref:t,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),s.createElement("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"}))});function message_circle_extends(){return(message_circle_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}x.propTypes={color:k().string,size:k().oneOfType([k().string,k().number])},x.displayName="ThumbsUp";var j=(0,s.forwardRef)(function(e,t){var n=e.color,r=e.size,c=void 0===r?24:r,a=function(e,t){if(null==e)return{};var n,r,c=function(e,t){if(null==e)return{};var n,r,c={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(c[n]=e[n]);return c}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(c[n]=e[n])}return c}(e,["color","size"]);return s.createElement("svg",message_circle_extends({ref:t,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a),s.createElement("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}))});j.propTypes={color:k().string,size:k().oneOfType([k().string,k().number])},j.displayName="MessageCircle";var y=n(8268),w=n(5278),O=n(6270),E=n(6385);async function like(e,t){let n=(0,v.JU)(E.db,"likes",e.replace("/","")),r=await (0,v.QT)(n);if(r.exists()){let e=r.data().userIds,c=e.includes(t);if(c){let r=await (0,v.r7)(n,{count:(0,v.nP)(-1),userIds:e.filter(e=>e!==t)});return r}let a=await (0,v.r7)(n,{count:(0,v.nP)(1),userIds:[...e,t]});return a}let c=await (0,v.pl)((0,v.JU)(E.db,"likes",e.replace("/","")),{count:1,userIds:[t]});return c}var R=n(3957),C=n.n(R);let N=(0,w.j)(C()["like-button"],{variants:{liked:{true:C()["like-button--liked"]}}});function Feedback(e){let{slug:t}=e,{t:n,i18n:c}=(0,u.$G)("article"),a=c.resolvedLanguage,[i,l]=(0,s.useState)(void 0),[o,d]=(0,s.useState)([]),{openModal:m}=(0,_.ol)(),{currentUser:f}=(0,h.aC)(),p=null==i?void 0:i.userIds.includes(null==f?void 0:f.uid);return(0,s.useEffect)(()=>{async function getComments(){let e=(0,v.IO)((0,v.hJ)(E.db,"comments"),(0,v.ar)("slug","==",t),(0,v.Xo)("date","desc")),n=(0,v.cf)(e,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));d(t)});return()=>n()}(function(e,t){let n=(0,v.JU)(E.db,"likes",e.replace("/",""));(0,v.cf)(n,t)})(t,e=>{l(e.data())}),getComments()},[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:C().feedback__actions,children:[(0,r.jsxs)(_.zx,{className:N({liked:p}),onClick:function(){f?like(t,f.uid):m(O.xC)},children:[(0,r.jsx)(x,{"aria-hidden":!0})," ",n("like",{count:(null==i?void 0:i.count)||0})]}),(0,r.jsxs)("div",{className:C().feedback__actions__comments,children:[(0,r.jsx)(j,{})," ",n("comment",{count:o.length||0})]})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:C()["feedback__comment-title"],children:n("comments-title")}),o.length?o.map(e=>{let{id:t,userName:c,date:i,message:l,uid:s}=e;return(0,r.jsxs)("div",{className:C().feedback__comment,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:C()["feedback__comment-author"],children:c}),(0,r.jsx)("time",{className:C()["feedback__comment-date"],children:i.toDate().toLocaleDateString(a,{year:"numeric",month:"long",day:"numeric"})}),(0,r.jsx)("p",{className:C()["feedback__comment-message"],children:l})]}),s===(null==f?void 0:f.uid)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(_.zx,{className:C()["feedback__delete-comment"],variant:"icon",size:"small",title:n("delete-comment-aria-label"),onClick:()=>m("".concat(O.VI,"-").concat(t)),children:(0,r.jsx)(y.Z,{"aria-hidden":!0})}),(0,r.jsx)(_.DB,{commentId:t,message:l})]})]},t)}):(0,r.jsx)("p",{children:n("no-comments")}),f&&(0,r.jsx)(AddComment,{slug:t})]})]})}var A=n(4501),S=n.n(A);function ArticleFeature(e){let{post:t}=e,{t:n}=(0,u.$G)("article"),c=useMDXComponent(t.body.code),a=Math.ceil(t.readingTime.minutes);return(0,r.jsxs)("div",{className:S().article,children:[(0,r.jsxs)("div",{className:S().article__header,children:[(0,r.jsx)("h1",{className:S().article__title,children:t.title}),(0,r.jsx)("small",{className:S()["article__reading-time"],children:(0,r.jsxs)("abbr",{title:n("estimated-time-to-read",{count:a}),children:[a," min"]})})]}),(0,r.jsx)("div",{className:S()["article__cover-wrapper"],children:(0,r.jsx)(l(),{className:S().article__cover,src:"/articles/".concat(t.slug,"/").concat(t.cover),alt:t.altCover,fill:!0})}),(0,r.jsx)("article",{children:(0,r.jsx)(c,{components:{CodeEditor:_.pq}})}),(0,r.jsx)(Feedback,{slug:t.slug})]})}var z=n(9995),D=n.n(z);function ArticleLayout(e){let{children:t}=e;return(0,r.jsx)("div",{className:D().article,children:t})}var T=n(923),I=!0;function Article(e){let{article:t}=e,n="".concat(a.Bt,"/blog/").concat(t.slug),i="".concat(a.Bt,"/public/articles/").concat(t.cover);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.PB,{title:t.title,description:t.description,canonical:n,openGraph:{url:n,title:t.title,description:t.description,type:"article",images:[{url:i,width:800,height:600,alt:t.title,type:"image/jpeg"}],article:{publishedTime:t.publishedAt,authors:["https://twitter.com/_allyssonsantos"],tags:t.tags}}}),(0,r.jsx)(c.dX,{type:"Article",url:n,title:t.title,images:["".concat(a.Bt,"/").concat(t.cover)],datePublished:t.publishedAt,authorName:"Allysson Santos",description:t.description}),(0,r.jsx)(ArticleFeature,{post:t})]})}Article.getLayout=function(e){return(0,r.jsx)(T.I,{children:(0,r.jsx)(ArticleLayout,{children:e})})}},4501:function(e){e.exports={article:"article_article__Ijdm4",article__header:"article_article__header__cwcoR",article__title:"article_article__title__Wb_JV","article__reading-time":"article_article__reading-time__BQ7Vg","article__cover-wrapper":"article_article__cover-wrapper__JoBSy",article__cover:"article_article__cover__njZ_R"}},4976:function(e){e.exports={comment__button:"add-comment_comment__button__ERIrk",comment__alert:"add-comment_comment__alert__1SFG6"}},3957:function(e){e.exports={feedback__actions:"feedback_feedback__actions__JpM2T","feedback__comment-title":"feedback_feedback__comment-title__VNPif",feedback__actions__comments:"feedback_feedback__actions__comments__cC1Qs","like-button":"feedback_like-button__QE365","like-button--liked":"feedback_like-button--liked__ONjnV",feedback__comment:"feedback_feedback__comment__KKS4_","feedback__comment-author":"feedback_feedback__comment-author__sfdoi","feedback__comment-date":"feedback_feedback__comment-date__f0zf3","feedback__comment-message":"feedback_feedback__comment-message__zQ77o"}},9995:function(e){e.exports={article:"article_article__JtJSy"}},1220:function(e,t,n){let r=n(5893);e.exports.i=r}}]);