!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="564766f9-57f7-43e4-b276-da46866996ed",e._sentryDebugIdIdentifier="sentry-dbid-564766f9-57f7-43e4-b276-da46866996ed")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[105],{6105:function(e,t,n){"use strict";n.r(t),n.d(t,{AddComment:function(){return f},Feedback:function(){return N},PostBody:function(){return A}});var r=n(5893),a=n(7294),o=n(6973),c=n(1990),s=n(3849),i=n(8091),l=n.n(i),d=n(9457);let u={CREATED:"CREATED",CHANGE:"CHANGE",ERROR:"ERROR"};function m(e,t){switch(t.type){case u.CHANGE:return{...e,status:null,value:t.value};case u.CREATED:return{...e,status:u.CREATED,value:""};case u.ERROR:return{...e,status:u.ERROR};default:throw Error("Unhandled action type: ".concat(t.type))}}function f(e){let{slug:t}=e,{t:n}=(0,o.$G)("article"),{currentUser:i}=(0,d.aC)(),[f,_]=(0,a.useReducer)(m,{status:null,value:""});async function b(e){if(e.preventDefault(),i&&f.value)try{await (0,s.Y)(i,f.value,t),_({type:u.CREATED})}catch(e){_({type:u.ERROR,value:f.value})}}return(0,r.jsxs)("form",{className:l().comment,onSubmit:b,children:[(0,r.jsx)(c.gx,{placeholder:n("add-comment"),onChange:function(e){_({type:u.CHANGE,value:e.target.value})},value:f.value,rows:5,name:"comment"}),(0,r.jsx)(c.zx,{variant:"inverted",type:"submit",className:l().comment__button,children:n("comment-button")}),"ERROR"===f.status&&(0,r.jsx)(c.bZ,{className:l().comment__alert,children:n("comment-error")})]})}var _=n(8718),b=n(5697),p=n.n(b);function k(){return(k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var h=(0,a.forwardRef)(function(e,t){var n=e.color,r=e.size,o=void 0===r?24:r,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["color","size"]);return a.createElement("svg",k({ref:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),a.createElement("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"}))});function v(){return(v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}h.propTypes={color:p().string,size:p().oneOfType([p().string,p().number])},h.displayName="ThumbsUp";var y=(0,a.forwardRef)(function(e,t){var n=e.color,r=e.size,o=void 0===r?24:r,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["color","size"]);return a.createElement("svg",v({ref:t,xmlns:"http://www.w3.org/2000/svg",width:o,height:o,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),a.createElement("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}))});y.propTypes={color:p().string,size:p().oneOfType([p().string,p().number])},y.displayName="MessageCircle";var g=n(8268),j=n(5661),x=n(8081),w=n(1266);async function O(e,t){let n=(0,_.JU)(w.db,"likes",e.replace("/","")),r=await (0,_.QT)(n);if(r.exists()){let e=r.data().userIds;return e.includes(t)?await (0,_.r7)(n,{count:(0,_.nP)(-1),userIds:e.filter(e=>e!==t)}):await (0,_.r7)(n,{count:(0,_.nP)(1),userIds:[...e,t]})}return await (0,_.pl)((0,_.JU)(w.db,"likes",e.replace("/","")),{count:1,userIds:[t]})}var E=n(600),R=n.n(E);let C=(0,j.j)(R()["like-button"],{variants:{liked:{true:R()["like-button--liked"]}}});function N(e){let{slug:t}=e,{t:n,i18n:s}=(0,o.$G)("article"),i=s.resolvedLanguage,[l,u]=(0,a.useState)(void 0),[m,b]=(0,a.useState)([]),{openModal:p}=(0,c.ol)(),{currentUser:k}=(0,d.aC)(),v=null==l?void 0:l.userIds.includes(null==k?void 0:k.uid);return(0,a.useEffect)(()=>{async function e(){let e=(0,_.IO)((0,_.hJ)(w.db,"comments"),(0,_.ar)("slug","==",t),(0,_.Xo)("date","desc")),n=(0,_.cf)(e,e=>{b(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>n()}(function(e,t){let n=(0,_.JU)(w.db,"likes",e.replace("/",""));(0,_.cf)(n,t)})(t,e=>{u(e.data())}),e()},[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:R().feedback__actions,children:[(0,r.jsxs)(c.zx,{className:C({liked:v}),onClick:function(){k?O(t,k.uid):p(x.xC)},children:[(0,r.jsx)(h,{"aria-hidden":!0})," ",n("like",{count:(null==l?void 0:l.count)||0})]}),(0,r.jsxs)("div",{className:R().feedback__actions__comments,children:[(0,r.jsx)(y,{})," ",n("comment",{count:m.length||0})]})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:R()["feedback__comment-title"],children:n("comments-title")}),m.length?m.map(e=>{let{id:t,userName:a,date:o,message:s,uid:l}=e;return(0,r.jsxs)("div",{className:R().feedback__comment,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:R()["feedback__comment-author"],children:a}),(0,r.jsx)("time",{className:R()["feedback__comment-date"],children:o.toDate().toLocaleDateString(i,{year:"numeric",month:"long",day:"numeric"})}),(0,r.jsx)("p",{className:R()["feedback__comment-message"],children:s})]}),l===(null==k?void 0:k.uid)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.zx,{className:R()["feedback__delete-comment"],variant:"icon",size:"small",title:n("delete-comment-aria-label"),onClick:()=>p("".concat(x.VI,"-").concat(t)),children:(0,r.jsx)(g.Z,{"aria-hidden":!0})}),(0,r.jsx)(c.DB,{commentId:t,message:s})]})]},t)}):(0,r.jsx)("p",{children:n("no-comments")}),k&&(0,r.jsx)(f,{slug:t})]})]})}var I=n(3935),z=n(2942);let D=(e,t={})=>{let n={React:a,ReactDOM:I,_jsx_runtime:z.i,...t};return Function(...Object.keys(n),e)(...Object.values(n)).default},T=(e,t={})=>a.useMemo(()=>D(e,t),[e,t]);function A(e){let{code:t}=e,n=T(t);return(0,r.jsx)(n,{components:{CodeEditor:c.pq,GoToFile:c.dq}})}},8091:function(e){e.exports={comment:"add-comment_comment__QwHU7",comment__button:"add-comment_comment__button__ERIrk",comment__alert:"add-comment_comment__alert__1SFG6"}},600:function(e){e.exports={feedback__actions:"feedback_feedback__actions__JpM2T","feedback__comment-title":"feedback_feedback__comment-title__VNPif",feedback__actions__comments:"feedback_feedback__actions__comments__cC1Qs","like-button":"feedback_like-button__QE365","like-button--liked":"feedback_like-button--liked__ONjnV",feedback__comment:"feedback_feedback__comment__KKS4_","feedback__comment-author":"feedback_feedback__comment-author__sfdoi","feedback__comment-date":"feedback_feedback__comment-date__f0zf3","feedback__comment-message":"feedback_feedback__comment-message__zQ77o"}},2942:function(e,t,n){let r=n(5893);e.exports.i=r}}]);