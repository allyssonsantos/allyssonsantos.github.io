{"version":3,"file":"static/chunks/105.3804d34940884bd3.js","mappings":"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","sources":["webpack://_N_E/./src/features/article/components/AddComment/add-comment.tsx","webpack://_N_E/./src/features/article/components/AddComment/index.ts","webpack://_N_E/./node_modules/react-feather/dist/icons/thumbs-up.js","webpack://_N_E/./node_modules/react-feather/dist/icons/message-circle.js","webpack://_N_E/./src/services/likes.ts","webpack://_N_E/./src/features/article/components/Feedback/feedback.tsx","webpack://_N_E/./src/features/article/components/Feedback/index.ts","webpack://_N_E/./node_modules/next-contentlayer/dist/hooks/useMDXComponent.js","webpack://_N_E/./src/features/article/components/PostBody.tsx","webpack://_N_E/./src/features/article/components/index.ts","webpack://_N_E/./src/features/article/components/AddComment/add-comment.module.css","webpack://_N_E/./src/features/article/components/Feedback/feedback.module.css","webpack://_N_E/./node_modules/next-contentlayer/dist/hooks/jsx-runtime.cjs"],"sourcesContent":["import { useReducer } from 'react';\nimport { useTranslation } from 'next-i18next';\n\nimport { Button, Textarea, Alert } from 'src/components';\nimport { createComment } from 'src/services/comments';\n\nimport styles from './add-comment.module.css';\nimport { useAuth } from 'src/contexts/auth';\n\nconst actions = {\n  CREATED: 'CREATED',\n  CHANGE: 'CHANGE',\n  ERROR: 'ERROR',\n} as const;\n\ntype CommentState = {\n  value?: string;\n  status: null | typeof actions.CREATED | typeof actions.ERROR;\n};\n\ntype CommentAction = {\n  type: keyof typeof actions;\n  value?: string;\n};\n\nfunction commentsReducer(state: CommentState, action: CommentAction) {\n  switch (action.type) {\n    case actions.CHANGE: {\n      return {\n        ...state,\n        status: null,\n        value: action.value,\n      };\n    }\n    case actions.CREATED: {\n      return {\n        ...state,\n        status: actions.CREATED,\n        value: '',\n      };\n    }\n    case actions.ERROR: {\n      return {\n        ...state,\n        status: actions.ERROR,\n      };\n    }\n    default: {\n      throw new Error(`Unhandled action type: ${action.type}`);\n    }\n  }\n}\n\nexport function AddComment({ slug }: { slug: string }) {\n  const { t } = useTranslation('article');\n  const { currentUser } = useAuth();\n  const [state, dispatch] = useReducer(commentsReducer, {\n    status: null,\n    value: '',\n  });\n\n  function handleCommentChange(event: React.ChangeEvent<HTMLTextAreaElement>) {\n    dispatch({ type: actions.CHANGE, value: event.target.value });\n  }\n\n  async function handleSubmit(event: React.FormEvent<HTMLFormElement>) {\n    event.preventDefault();\n\n    if (!currentUser || !state.value) {\n      return;\n    }\n\n    try {\n      await createComment(currentUser, state.value!, slug);\n      dispatch({ type: actions.CREATED });\n    } catch (err) {\n      dispatch({ type: actions.ERROR, value: state.value });\n    }\n  }\n\n  return (\n    <form className={styles.comment} onSubmit={handleSubmit}>\n      <Textarea\n        placeholder={t('add-comment') as string}\n        onChange={handleCommentChange}\n        value={state.value}\n        rows={5}\n        name=\"comment\"\n      />\n      <Button\n        variant=\"inverted\"\n        type=\"submit\"\n        className={styles.comment__button}\n      >\n        {t('comment-button')}\n      </Button>\n      {state.status === 'ERROR' && (\n        <Alert className={styles.comment__alert}>{t('comment-error')}</Alert>\n      )}\n    </form>\n  );\n}\n","export { AddComment } from './add-comment';\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar ThumbsUp = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3\"\n  }));\n});\nThumbsUp.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nThumbsUp.displayName = 'ThumbsUp';\nexport default ThumbsUp;","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { forwardRef } from 'react';\nimport PropTypes from 'prop-types';\nvar MessageCircle = forwardRef(function (_ref, ref) {\n  var _ref$color = _ref.color,\n      color = _ref$color === void 0 ? 'currentColor' : _ref$color,\n      _ref$size = _ref.size,\n      size = _ref$size === void 0 ? 24 : _ref$size,\n      rest = _objectWithoutProperties(_ref, [\"color\", \"size\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    ref: ref,\n    xmlns: \"http://www.w3.org/2000/svg\",\n    width: size,\n    height: size,\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: color,\n    strokeWidth: \"2\",\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\"\n  }, rest), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z\"\n  }));\n});\nMessageCircle.propTypes = {\n  color: PropTypes.string,\n  size: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\nMessageCircle.displayName = 'MessageCircle';\nexport default MessageCircle;","import {\n  doc,\n  getDoc,\n  onSnapshot,\n  setDoc,\n  increment,\n  updateDoc,\n  type DocumentSnapshot,\n  type DocumentData,\n} from 'firebase/firestore';\n\nimport { db } from './firebase';\n\nexport function listenLikes(slug: string, callback: (doc: DocumentSnapshot<DocumentData>) => void) {\n  const docRef = doc(db, 'likes', slug.replace('/', ''));\n  const stream = onSnapshot(docRef, callback);\n\n  return stream;\n};\n\nexport async function like(slug: string, userId: string) {\n  const likesRef = doc(db, 'likes', slug.replace('/', ''));\n  const currentLikes = await getDoc(likesRef);\n\n  if (currentLikes.exists()) {\n    const currentUsers = currentLikes.data().userIds;\n    const alreadyLiked = currentUsers.includes(userId);\n\n    if (alreadyLiked) {\n      const decrementedLike = await updateDoc(likesRef, {\n        count: increment(-1),\n        userIds: currentUsers.filter((user: string) => user !== userId),\n      });\n\n      return decrementedLike;\n    }\n\n    const incrementedLike = await updateDoc(likesRef, {\n      count: increment(1),\n      userIds: [...currentUsers, userId],\n    });\n\n    return incrementedLike;\n  }\n\n  const createdLike = await setDoc(doc(db, 'likes', slug.replace('/', '')), {\n    count: 1,\n    userIds: [userId],\n  });\n\n  return createdLike;\n};\n","import {\n  query,\n  collection,\n  where,\n  orderBy,\n  onSnapshot,\n  type DocumentData,\n} from 'firebase/firestore';\nimport { useState, useEffect } from 'react';\nimport { ThumbsUp, MessageCircle, X } from 'react-feather';\nimport { cva } from 'class-variance-authority';\nimport { useTranslation } from 'next-i18next';\n\nimport { Button, DeleteCommentModal, useModals } from 'src/components';\nimport {\n  DELETE_COMMENT_MODAL_KEY,\n  SIGN_IN_MODAL_KEY,\n} from 'src/constants/modals';\nimport { listenLikes, like } from 'src/services/likes';\nimport { db } from 'src/services/firebase';\nimport { useAuth } from 'src/contexts/auth';\n\nimport styles from './feedback.module.css';\nimport { AddComment } from '../AddComment';\n\nconst likeButton = cva(styles['like-button'], {\n  variants: {\n    liked: {\n      true: styles['like-button--liked'],\n    },\n  },\n});\n\ntype FeedbackProps = {\n  slug: string;\n};\n\ntype Comments = {\n  id: string;\n  date: {\n    toDate: () => Date;\n  };\n  message: string;\n  slug: string;\n  timestamp: Date;\n  uid: string;\n  userName: string;\n};\n\nexport function Feedback({ slug }: FeedbackProps) {\n  const { t, i18n } = useTranslation('article');\n  const locale = i18n.resolvedLanguage;\n\n  const [likes, setLikes] = useState<DocumentData | undefined>(undefined);\n  const [comments, setComments] = useState<Comments[]>([]);\n\n  const { openModal } = useModals();\n  const { currentUser } = useAuth();\n  const isPostLiked = likes?.userIds.includes(currentUser?.uid);\n\n  useEffect(() => {\n    async function getComments() {\n      const q = query(\n        collection(db, 'comments'),\n        where('slug', '==', slug),\n        orderBy('date', 'desc'),\n      );\n      const unsubscribe = onSnapshot(q, (querySnapshot) => {\n        const comments = querySnapshot.docs.map((doc) => ({\n          id: doc.id,\n          ...doc.data(),\n        })) as Comments[];\n\n        setComments(comments);\n      });\n\n      return () => unsubscribe();\n    }\n\n    listenLikes(slug, (likeds) => {\n      setLikes(likeds.data());\n    });\n\n    getComments();\n  }, [slug]);\n\n  function handleLike() {\n    if (currentUser) {\n      like(slug, currentUser.uid);\n    } else {\n      openModal(SIGN_IN_MODAL_KEY);\n    }\n  }\n\n  return (\n    <>\n      <section className={styles.feedback__actions}>\n        <Button\n          className={likeButton({ liked: isPostLiked })}\n          onClick={handleLike}\n        >\n          <ThumbsUp aria-hidden /> {t('like', { count: likes?.count || 0 })}\n        </Button>\n        <div className={styles.feedback__actions__comments}>\n          <MessageCircle /> {t('comment', { count: comments.length || 0 })}\n        </div>\n      </section>\n      <section>\n        <h2 className={styles['feedback__comment-title']}>\n          {t('comments-title')}\n        </h2>\n        {comments.length ? (\n          comments.map(({ id, userName, date, message, uid }) => (\n            <div key={id} className={styles.feedback__comment}>\n              <div>\n                <strong className={styles['feedback__comment-author']}>\n                  {userName}\n                </strong>\n                <time className={styles['feedback__comment-date']}>\n                  {date.toDate().toLocaleDateString(locale, {\n                    year: 'numeric',\n                    month: 'long',\n                    day: 'numeric',\n                  })}\n                </time>\n                <p className={styles['feedback__comment-message']}>{message}</p>\n              </div>\n              {uid === currentUser?.uid && (\n                <>\n                  <Button\n                    className={styles['feedback__delete-comment']}\n                    variant=\"icon\"\n                    size=\"small\"\n                    title={t('delete-comment-aria-label') as string}\n                    onClick={() =>\n                      openModal(`${DELETE_COMMENT_MODAL_KEY}-${id}`)\n                    }\n                  >\n                    <X aria-hidden />\n                  </Button>\n                  <DeleteCommentModal commentId={id} message={message} />\n                </>\n              )}\n            </div>\n          ))\n        ) : (\n          <p>{t('no-comments')}</p>\n        )}\n        {currentUser && <AddComment slug={slug} />}\n      </section>\n    </>\n  );\n}\n","export { Feedback } from './feedback';\n","// NOTE use ESM/CommonJS compat import here until resolved: https://github.com/facebook/react/issues/11503\nimport React from 'react';\n// NOTE use ESM/CommonJS compat import here until resolved: https://github.com/facebook/react/issues/11503\nimport ReactDOM from 'react-dom';\n// @ts-expect-error React version workaround (This CJS workaround can be removed once Contentlayer is only targeting React 18+)\nimport { _jsx_runtime } from './jsx-runtime.cjs';\nexport const getMDXComponent = (code, globals = {}) => {\n    const scope = { React, ReactDOM, _jsx_runtime, ...globals };\n    const fn = new Function(...Object.keys(scope), code);\n    return fn(...Object.values(scope)).default;\n};\nexport const useMDXComponent = (code, globals = {}) => {\n    return React.useMemo(() => getMDXComponent(code, globals), [code, globals]);\n};\n//# sourceMappingURL=useMDXComponent.js.map","import { useMDXComponent } from 'next-contentlayer/hooks';\nimport { CodeEditor, GoToFile } from 'src/components';\n\nexport function PostBody({ code }: { code: string }) {\n  const Body = useMDXComponent(code);\n\n  return (\n    <Body\n      components={{\n        CodeEditor,\n        GoToFile,\n      }}\n    />\n  );\n}\n","export * from './AddComment';\nexport * from './Feedback';\nexport * from './PostBody';\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"comment\":\"add-comment_comment__QwHU7\",\"comment__button\":\"add-comment_comment__button__ERIrk\",\"comment__alert\":\"add-comment_comment__alert__1SFG6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"feedback__actions\":\"feedback_feedback__actions__JpM2T\",\"feedback__comment-title\":\"feedback_feedback__comment-title__VNPif\",\"feedback__actions__comments\":\"feedback_feedback__actions__comments__cC1Qs\",\"like-button\":\"feedback_like-button__QE365\",\"like-button--liked\":\"feedback_like-button--liked__ONjnV\",\"feedback__comment\":\"feedback_feedback__comment__KKS4_\",\"feedback__comment-author\":\"feedback_feedback__comment-author__sfdoi\",\"feedback__comment-date\":\"feedback_feedback__comment-date__f0zf3\",\"feedback__comment-message\":\"feedback_feedback__comment-message__zQ77o\"};","const _jsx_runtime = require('react/jsx-runtime')\n\nmodule.exports._jsx_runtime = _jsx_runtime\n"],"names":["actions","CREATED","CHANGE","ERROR","commentsReducer","state","action","type","status","value","concat","AddComment","param","slug","t","useTranslation","currentUser","useAuth","dispatch","useReducer","handleSubmit","event","preventDefault","createComment","err","jsx_runtime","jsxs","form","className","styles","onSubmit","jsx","Textarea","placeholder","onChange","target","rows","name","Button","variant","Alert","_extends","Object","assign","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","ThumbsUp","react","forwardRef","_ref","ref","_ref$color","color","_ref$size","size","rest","_objectWithoutProperties","excluded","_objectWithoutPropertiesLoose","sourceKeys","keys","indexOf","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","xmlns","width","height","viewBox","fill","stroke","strokeWidth","strokeLinecap","strokeLinejoin","d","message_circle_extends","propTypes","string","prop_types_default","oneOfType","number","displayName","MessageCircle","message_circle_objectWithoutProperties","message_circle_objectWithoutPropertiesLoose","like","userId","likesRef","doc","db","replace","currentLikes","getDoc","exists","currentUsers","data","userIds","includes","updateDoc","count","increment","filter","user","setDoc","likeButton","cva","variants","liked","true","Feedback","i18n","locale","resolvedLanguage","likes","setLikes","useState","undefined","comments","setComments","openModal","useModals","isPostLiked","uid","useEffect","getComments","q","query","collection","where","orderBy","unsubscribe","onSnapshot","querySnapshot","docs","map","id","listenLikes","callback","docRef","likeds","Fragment","section","onClick","SIGN_IN_MODAL_KEY","aria-hidden","div","h2","userName","date","message","strong","time","toDate","toLocaleDateString","year","month","day","p","title","DELETE_COMMENT_MODAL_KEY","X","DeleteCommentModal","commentId","getMDXComponent","code","globals","scope","React","ReactDOM","react_dom","_jsx_runtime","hooks_jsx_runtime","fn","values","default","useMDXComponent","useMemo","PostBody","Body","components","CodeEditor","GoToFile","module","exports","__webpack_require__"],"sourceRoot":""}