(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[888],{484:function(h,d,_){"use strict";function _typeof(h){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(h)}_.d(d,{Z:function(){return _typeof}})},7046:function(h,d,_){"use strict";_.d(d,{S:function(){return ee},_:function(){return __awaiter},a:function(){return __generator},b:function(){return createPackageJSON},c:function(){return createError},d:function(){return addPackageJSONIfNeeded},e:function(){return extractErrorDetails},f:function(){return normalizePath},g:function(){return __extends},h:function(){return __assign},i:function(){return __spreadArray},n:function(){return nullthrows}});var V,ee,er=_(7272),extendStatics=function(h,d){return(extendStatics=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(h,d){h.__proto__=d}||function(h,d){for(var _ in d)Object.prototype.hasOwnProperty.call(d,_)&&(h[_]=d[_])})(h,d)};function __extends(h,d){if("function"!=typeof d&&null!==d)throw TypeError("Class extends value "+String(d)+" is not a constructor or null");function __(){this.constructor=h}extendStatics(h,d),h.prototype=null===d?Object.create(d):(__.prototype=d.prototype,new __)}var __assign=function(){return(__assign=Object.assign||function(h){for(var d,_=1,V=arguments.length;_<V;_++)for(var ee in d=arguments[_])Object.prototype.hasOwnProperty.call(d,ee)&&(h[ee]=d[ee]);return h}).apply(this,arguments)};function __awaiter(h,d,_,V){return new(_||(_=Promise))(function(ee,er){function fulfilled(h){try{step(V.next(h))}catch(h){er(h)}}function rejected(h){try{step(V.throw(h))}catch(h){er(h)}}function step(h){var d;h.done?ee(h.value):((d=h.value)instanceof _?d:new _(function(h){h(d)})).then(fulfilled,rejected)}step((V=V.apply(h,d||[])).next())})}function __generator(h,d){var _,V,ee,er,eo={label:0,sent:function(){if(1&ee[0])throw ee[1];return ee[1]},trys:[],ops:[]};return er={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(er[Symbol.iterator]=function(){return this}),er;function verb(er){return function(ec){return function(er){if(_)throw TypeError("Generator is already executing.");for(;eo;)try{if(_=1,V&&(ee=2&er[0]?V.return:er[0]?V.throw||((ee=V.return)&&ee.call(V),0):V.next)&&!(ee=ee.call(V,er[1])).done)return ee;switch(V=0,ee&&(er=[2&er[0],ee.value]),er[0]){case 0:case 1:ee=er;break;case 4:return eo.label++,{value:er[1],done:!1};case 5:eo.label++,V=er[1],er=[0];continue;case 7:er=eo.ops.pop(),eo.trys.pop();continue;default:if(!(ee=(ee=eo.trys).length>0&&ee[ee.length-1])&&(6===er[0]||2===er[0])){eo=0;continue}if(3===er[0]&&(!ee||er[1]>ee[0]&&er[1]<ee[3])){eo.label=er[1];break}if(6===er[0]&&eo.label<ee[1]){eo.label=ee[1],ee=er;break}if(ee&&eo.label<ee[2]){eo.label=ee[2],eo.ops.push(er);break}ee[2]&&eo.ops.pop(),eo.trys.pop();continue}er=d.call(h,eo)}catch(h){er=[6,h],V=0}finally{_=ee=0}if(5&er[0])throw er[1];return{value:er[0]?er[1]:void 0,done:!0}}([er,ec])}}}function __spreadArray(h,d,_){if(_||2==arguments.length)for(var V,ee=0,er=d.length;ee<er;ee++)!V&&ee in d||(V||(V=Array.prototype.slice.call(d,0,ee)),V[ee]=d[ee]);return h.concat(V||Array.prototype.slice.call(d))}var createError=function(h){return"[sandpack-client]: ".concat(h)};function nullthrows(h,d){return void 0===d&&(d="Value is nullish"),(0,er.kG)(null!=h,createError(d)),h}var eo='"entry" was not specified - provide either a package.json with the "main" field or an "entry" value';function createPackageJSON(h,d,_){return void 0===h&&(h={}),void 0===d&&(d={}),void 0===_&&(_="/index.js"),JSON.stringify({name:"sandpack-project",main:_,dependencies:h,devDependencies:d},null,2)}function addPackageJSONIfNeeded(h,d,_,V){var ee,er,ec=normalizePath(h),eh=ec["/package.json"];if(!eh)return nullthrows(d,'"dependencies" was not specified - provide either a package.json or a "dependencies" value'),nullthrows(V,eo),ec["/package.json"]={code:createPackageJSON(d,_,V)},ec;if(eh){var ep=JSON.parse(eh.code);nullthrows(!(!d&&!ep.dependencies),eo),d&&(ep.dependencies=__assign(__assign({},null!==(ee=ep.dependencies)&&void 0!==ee?ee:{}),null!=d?d:{})),_&&(ep.devDependencies=__assign(__assign({},null!==(er=ep.devDependencies)&&void 0!==er?er:{}),null!=_?_:{})),V&&(ep.main=V),ec["/package.json"]={code:JSON.stringify(ep,null,2)}}return ec}function extractErrorDetails(h){if("SyntaxError"===h.title)return{title:h.title,path:h.path,message:h.message,line:h.line,column:h.column};var d,_,V,ee,er,eo=function(h){if(h)return h.find(function(h){return!!h._originalFileName})}(null===(d=h.payload)||void 0===d?void 0:d.frames);if(!eo)return{message:h.message};var ec=(V=2+(_=eo._originalScriptCode[eo._originalScriptCode.length-1].lineNumber.toString().length)+3+eo._originalColumnNumber,eo._originalScriptCode.reduce(function(h,d){var ee=d.highlight?">":" ",er=d.lineNumber.toString().length===_?"".concat(d.lineNumber):" ".concat(d.lineNumber),eo=d.highlight?"\n"+" ".repeat(V)+"^":"";return h+"\n"+ee+" "+er+" | "+d.content+eo},"")),eh=eo?" (".concat(eo._originalLineNumber,":").concat(eo._originalColumnNumber,")"):"";return{message:(ee=eo._originalFileName,er=h.message,"".concat(ee,": ").concat(er).concat(eh,"\n").concat(ec)),title:h.title,path:eo._originalFileName,line:eo._originalLineNumber,column:eo._originalColumnNumber}}var normalizePath=function(h){return"string"==typeof h?h.startsWith("/")?h:"/".concat(h):Array.isArray(h)?h.map(function(h){return h.startsWith("/")?h:"/".concat(h)}):"object"==typeof h&&null!==h?Object.entries(h).reduce(function(h,d){var _=d[0],V=d[1];return h[_.startsWith("/")?_:"/".concat(_)]=V,h},{}):null};(V=ee||(ee={}))[V.None=0]="None",V[V.Error=10]="Error",V[V.Warning=20]="Warning",V[V.Info=30]="Info",V[V.Debug=40]="Debug"},1453:function(h,d,_){"use strict";let V,ee;_.d(d,{Jn:function(){return eR},qX:function(){return _getProvider},Xd:function(){return _registerComponent},Mq:function(){return getApp},C6:function(){return getApps},ZF:function(){return initializeApp},KN:function(){return registerVersion}});var er,eo=_(2044),ec=_(6872),eh=_(4444);let instanceOfAny=(h,d)=>d.some(d=>h instanceof d),ep=new WeakMap,ef=new WeakMap,em=new WeakMap,eg=new WeakMap,eO=new WeakMap,ey={get(h,d,_){if(h instanceof IDBTransaction){if("done"===d)return ef.get(h);if("objectStoreNames"===d)return h.objectStoreNames||em.get(h);if("store"===d)return _.objectStoreNames[1]?void 0:_.objectStore(_.objectStoreNames[0])}return wrap_idb_value_wrap(h[d])},set:(h,d,_)=>(h[d]=_,!0),has:(h,d)=>h instanceof IDBTransaction&&("done"===d||"store"===d)||d in h};function wrap_idb_value_wrap(h){var d;if(h instanceof IDBRequest)return function(h){let d=new Promise((d,_)=>{let unlisten=()=>{h.removeEventListener("success",success),h.removeEventListener("error",error)},success=()=>{d(wrap_idb_value_wrap(h.result)),unlisten()},error=()=>{_(h.error),unlisten()};h.addEventListener("success",success),h.addEventListener("error",error)});return d.then(d=>{d instanceof IDBCursor&&ep.set(d,h)}).catch(()=>{}),eO.set(d,h),d}(h);if(eg.has(h))return eg.get(h);let _="function"==typeof(d=h)?d!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(d)?function(...h){return d.apply(unwrap(this),h),wrap_idb_value_wrap(ep.get(this))}:function(...h){return wrap_idb_value_wrap(d.apply(unwrap(this),h))}:function(h,..._){let V=d.call(unwrap(this),h,..._);return em.set(V,h.sort?h.sort():[h]),wrap_idb_value_wrap(V)}:(d instanceof IDBTransaction&&function(h){if(ef.has(h))return;let d=new Promise((d,_)=>{let unlisten=()=>{h.removeEventListener("complete",complete),h.removeEventListener("error",error),h.removeEventListener("abort",error)},complete=()=>{d(),unlisten()},error=()=>{_(h.error||new DOMException("AbortError","AbortError")),unlisten()};h.addEventListener("complete",complete),h.addEventListener("error",error),h.addEventListener("abort",error)});ef.set(h,d)}(d),instanceOfAny(d,V||(V=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(d,ey):d;return _!==h&&(eg.set(h,_),eO.set(_,h)),_}let unwrap=h=>eO.get(h),ev=["get","getKey","getAll","getAllKeys","count"],eS=["put","add","delete","clear"],e_=new Map;function getMethod(h,d){if(!(h instanceof IDBDatabase&&!(d in h)&&"string"==typeof d))return;if(e_.get(d))return e_.get(d);let _=d.replace(/FromIndex$/,""),V=d!==_,ee=eS.includes(_);if(!(_ in(V?IDBIndex:IDBObjectStore).prototype)||!(ee||ev.includes(_)))return;let method=async function(h,...d){let er=this.transaction(h,ee?"readwrite":"readonly"),eo=er.store;return V&&(eo=eo.index(d.shift())),(await Promise.all([eo[_](...d),ee&&er.done]))[0]};return e_.set(d,method),method}ey={...er=ey,get:(h,d,_)=>getMethod(h,d)||er.get(h,d,_),has:(h,d)=>!!getMethod(h,d)||er.has(h,d)};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PlatformLoggerServiceImpl=class PlatformLoggerServiceImpl{constructor(h){this.container=h}getPlatformInfoString(){let h=this.container.getProviders();return h.map(h=>{if(!function(h){let d=h.getComponent();return(null==d?void 0:d.type)==="VERSION"}(h))return null;{let d=h.getImmediate();return`${d.library}/${d.version}`}}).filter(h=>h).join(" ")}};let ew="@firebase/app",ex="0.9.13",ek=new ec.Yd("@firebase/app"),eT="[DEFAULT]",eE={[ew]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},eC=new Map,eP=new Map;function _registerComponent(h){let d=h.name;if(eP.has(d))return ek.debug(`There were multiple attempts to register component ${d}.`),!1;for(let _ of(eP.set(d,h),eC.values()))!function(h,d){try{h.container.addComponent(d)}catch(_){ek.debug(`Component ${d.name} failed to register with FirebaseApp ${h.name}`,_)}}(_,h);return!0}function _getProvider(h,d){let _=h.container.getProvider("heartbeat").getImmediate({optional:!0});return _&&_.triggerHeartbeat(),h.container.getProvider(d)}let eI=new eh.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FirebaseAppImpl=class FirebaseAppImpl{constructor(h,d,_){this._isDeleted=!1,this._options=Object.assign({},h),this._config=Object.assign({},d),this._name=d.name,this._automaticDataCollectionEnabled=d.automaticDataCollectionEnabled,this._container=_,this.container.addComponent(new eo.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(h){this.checkDestroyed(),this._automaticDataCollectionEnabled=h}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(h){this._isDeleted=h}checkDestroyed(){if(this.isDeleted)throw eI.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eR="9.23.0";function initializeApp(h,d={}){let _=h;if("object"!=typeof d){let h=d;d={name:h}}let V=Object.assign({name:eT,automaticDataCollectionEnabled:!1},d),ee=V.name;if("string"!=typeof ee||!ee)throw eI.create("bad-app-name",{appName:String(ee)});if(_||(_=(0,eh.aH)()),!_)throw eI.create("no-options");let er=eC.get(ee);if(er){if((0,eh.vZ)(_,er.options)&&(0,eh.vZ)(V,er.config))return er;throw eI.create("duplicate-app",{appName:ee})}let ec=new eo.H0(ee);for(let h of eP.values())ec.addComponent(h);let ep=new FirebaseAppImpl(_,V,ec);return eC.set(ee,ep),ep}function getApp(h=eT){let d=eC.get(h);if(!d&&h===eT&&(0,eh.aH)())return initializeApp();if(!d)throw eI.create("no-app",{appName:h});return d}function getApps(){return Array.from(eC.values())}function registerVersion(h,d,_){var V;let ee=null!==(V=eE[h])&&void 0!==V?V:h;_&&(ee+=`-${_}`);let er=ee.match(/\s|\//),ec=d.match(/\s|\//);if(er||ec){let h=[`Unable to register library "${ee}" with version "${d}":`];er&&h.push(`library name "${ee}" contains illegal characters (whitespace or "/")`),er&&ec&&h.push("and"),ec&&h.push(`version name "${d}" contains illegal characters (whitespace or "/")`),ek.warn(h.join(" "));return}_registerComponent(new eo.wA(`${ee}-version`,()=>({library:ee,version:d}),"VERSION"))}let eA="firebase-heartbeat-store",e$=null;function getDbPromise(){return e$||(e$=(function(h,d,{blocked:_,upgrade:V,blocking:ee,terminated:er}={}){let eo=indexedDB.open(h,1),ec=wrap_idb_value_wrap(eo);return V&&eo.addEventListener("upgradeneeded",h=>{V(wrap_idb_value_wrap(eo.result),h.oldVersion,h.newVersion,wrap_idb_value_wrap(eo.transaction),h)}),_&&eo.addEventListener("blocked",h=>_(h.oldVersion,h.newVersion,h)),ec.then(h=>{er&&h.addEventListener("close",()=>er()),ee&&h.addEventListener("versionchange",h=>ee(h.oldVersion,h.newVersion,h))}).catch(()=>{}),ec})("firebase-heartbeat-database",0,{upgrade:(h,d)=>{0===d&&h.createObjectStore(eA)}}).catch(h=>{throw eI.create("idb-open",{originalErrorMessage:h.message})})),e$}async function readHeartbeatsFromIndexedDB(h){try{let d=await getDbPromise(),_=await d.transaction(eA).objectStore(eA).get(computeKey(h));return _}catch(h){if(h instanceof eh.ZR)ek.warn(h.message);else{let d=eI.create("idb-get",{originalErrorMessage:null==h?void 0:h.message});ek.warn(d.message)}}}async function writeHeartbeatsToIndexedDB(h,d){try{let _=await getDbPromise(),V=_.transaction(eA,"readwrite"),ee=V.objectStore(eA);await ee.put(d,computeKey(h)),await V.done}catch(h){if(h instanceof eh.ZR)ek.warn(h.message);else{let d=eI.create("idb-set",{originalErrorMessage:null==h?void 0:h.message});ek.warn(d.message)}}}function computeKey(h){return`${h.name}!${h.options.appId}`}let HeartbeatServiceImpl=class HeartbeatServiceImpl{constructor(h){this.container=h,this._heartbeatsCache=null;let d=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(d),this._heartbeatsCachePromise=this._storage.read().then(h=>(this._heartbeatsCache=h,h))}async triggerHeartbeat(){let h=this.container.getProvider("platform-logger").getImmediate(),d=h.getPlatformInfoString(),_=getUTCDateString();return(null===this._heartbeatsCache&&(this._heartbeatsCache=await this._heartbeatsCachePromise),this._heartbeatsCache.lastSentHeartbeatDate===_||this._heartbeatsCache.heartbeats.some(h=>h.date===_))?void 0:(this._heartbeatsCache.heartbeats.push({date:_,agent:d}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{let d=new Date(h.date).valueOf(),_=Date.now();return _-d<=2592e6}),this._storage.overwrite(this._heartbeatsCache))}async getHeartbeatsHeader(){if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length)return"";let h=getUTCDateString(),{heartbeatsToSend:d,unsentEntries:_}=function(h,d=1024){let _=[],V=h.slice();for(let ee of h){let h=_.find(h=>h.agent===ee.agent);if(h){if(h.dates.push(ee.date),countBytes(_)>d){h.dates.pop();break}}else if(_.push({agent:ee.agent,dates:[ee.date]}),countBytes(_)>d){_.pop();break}V=V.slice(1)}return{heartbeatsToSend:_,unsentEntries:V}}(this._heartbeatsCache.heartbeats),V=(0,eh.L)(JSON.stringify({version:2,heartbeats:d}));return this._heartbeatsCache.lastSentHeartbeatDate=h,_.length>0?(this._heartbeatsCache.heartbeats=_,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),V}};function getUTCDateString(){let h=new Date;return h.toISOString().substring(0,10)}let HeartbeatStorageImpl=class HeartbeatStorageImpl{constructor(h){this.app=h,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,eh.hl)()&&(0,eh.eu)().then(()=>!0).catch(()=>!1)}async read(){let h=await this._canUseIndexedDBPromise;if(!h)return{heartbeats:[]};{let h=await readHeartbeatsFromIndexedDB(this.app);return h||{heartbeats:[]}}}async overwrite(h){var d;let _=await this._canUseIndexedDBPromise;if(_){let _=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!==(d=h.lastSentHeartbeatDate)&&void 0!==d?d:_.lastSentHeartbeatDate,heartbeats:h.heartbeats})}}async add(h){var d;let _=await this._canUseIndexedDBPromise;if(_){let _=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:null!==(d=h.lastSentHeartbeatDate)&&void 0!==d?d:_.lastSentHeartbeatDate,heartbeats:[..._.heartbeats,...h.heartbeats]})}}};function countBytes(h){return(0,eh.L)(JSON.stringify({version:2,heartbeats:h})).length}_registerComponent(new eo.wA("platform-logger",h=>new PlatformLoggerServiceImpl(h),"PRIVATE")),_registerComponent(new eo.wA("heartbeat",h=>new HeartbeatServiceImpl(h),"PRIVATE")),registerVersion(ew,ex,""),registerVersion(ew,ex,"esm2017"),registerVersion("fire-js","")},2044:function(h,d,_){"use strict";_.d(d,{H0:function(){return ComponentContainer},wA:function(){return Component}});var V=_(4444);let Component=class Component{constructor(h,d,_){this.name=h,this.instanceFactory=d,this.type=_,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(h){return this.instantiationMode=h,this}setMultipleInstances(h){return this.multipleInstances=h,this}setServiceProps(h){return this.serviceProps=h,this}setInstanceCreatedCallback(h){return this.onInstanceCreated=h,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ee="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Provider=class Provider{constructor(h,d){this.name=h,this.container=d,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(h){let d=this.normalizeInstanceIdentifier(h);if(!this.instancesDeferred.has(d)){let h=new V.BH;if(this.instancesDeferred.set(d,h),this.isInitialized(d)||this.shouldAutoInitialize())try{let _=this.getOrInitializeService({instanceIdentifier:d});_&&h.resolve(_)}catch(h){}}return this.instancesDeferred.get(d).promise}getImmediate(h){var d;let _=this.normalizeInstanceIdentifier(null==h?void 0:h.identifier),V=null!==(d=null==h?void 0:h.optional)&&void 0!==d&&d;if(this.isInitialized(_)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:_})}catch(h){if(V)return null;throw h}else{if(V)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(h){if(h.name!==this.name)throw Error(`Mismatching Component ${h.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=h,this.shouldAutoInitialize()){if("EAGER"===h.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:ee})}catch(h){}for(let[h,d]of this.instancesDeferred.entries()){let _=this.normalizeInstanceIdentifier(h);try{let h=this.getOrInitializeService({instanceIdentifier:_});d.resolve(h)}catch(h){}}}}clearInstance(h=ee){this.instancesDeferred.delete(h),this.instancesOptions.delete(h),this.instances.delete(h)}async delete(){let h=Array.from(this.instances.values());await Promise.all([...h.filter(h=>"INTERNAL"in h).map(h=>h.INTERNAL.delete()),...h.filter(h=>"_delete"in h).map(h=>h._delete())])}isComponentSet(){return null!=this.component}isInitialized(h=ee){return this.instances.has(h)}getOptions(h=ee){return this.instancesOptions.get(h)||{}}initialize(h={}){let{options:d={}}=h,_=this.normalizeInstanceIdentifier(h.instanceIdentifier);if(this.isInitialized(_))throw Error(`${this.name}(${_}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let V=this.getOrInitializeService({instanceIdentifier:_,options:d});for(let[h,d]of this.instancesDeferred.entries()){let ee=this.normalizeInstanceIdentifier(h);_===ee&&d.resolve(V)}return V}onInit(h,d){var _;let V=this.normalizeInstanceIdentifier(d),ee=null!==(_=this.onInitCallbacks.get(V))&&void 0!==_?_:new Set;ee.add(h),this.onInitCallbacks.set(V,ee);let er=this.instances.get(V);return er&&h(er,V),()=>{ee.delete(h)}}invokeOnInitCallbacks(h,d){let _=this.onInitCallbacks.get(d);if(_)for(let V of _)try{V(h,d)}catch(h){}}getOrInitializeService({instanceIdentifier:h,options:d={}}){let _=this.instances.get(h);if(!_&&this.component&&(_=this.component.instanceFactory(this.container,{instanceIdentifier:h===ee?void 0:h,options:d}),this.instances.set(h,_),this.instancesOptions.set(h,d),this.invokeOnInitCallbacks(_,h),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,h,_)}catch(h){}return _||null}normalizeInstanceIdentifier(h=ee){return this.component?this.component.multipleInstances?h:ee:h}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ComponentContainer=class ComponentContainer{constructor(h){this.name=h,this.providers=new Map}addComponent(h){let d=this.getProvider(h.name);if(d.isComponentSet())throw Error(`Component ${h.name} has already been registered with ${this.name}`);d.setComponent(h)}addOrOverwriteComponent(h){let d=this.getProvider(h.name);d.isComponentSet()&&this.providers.delete(h.name),this.addComponent(h)}getProvider(h){if(this.providers.has(h))return this.providers.get(h);let d=new Provider(h,this);return this.providers.set(h,d),d}getProviders(){return Array.from(this.providers.values())}}},6872:function(h,d,_){"use strict";var V,ee;_.d(d,{Yd:function(){return Logger},in:function(){return V}});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let er=[];(ee=V||(V={}))[ee.DEBUG=0]="DEBUG",ee[ee.VERBOSE=1]="VERBOSE",ee[ee.INFO=2]="INFO",ee[ee.WARN=3]="WARN",ee[ee.ERROR=4]="ERROR",ee[ee.SILENT=5]="SILENT";let eo={debug:V.DEBUG,verbose:V.VERBOSE,info:V.INFO,warn:V.WARN,error:V.ERROR,silent:V.SILENT},ec=V.INFO,eh={[V.DEBUG]:"log",[V.VERBOSE]:"log",[V.INFO]:"info",[V.WARN]:"warn",[V.ERROR]:"error"},defaultLogHandler=(h,d,..._)=>{if(d<h.logLevel)return;let V=new Date().toISOString(),ee=eh[d];if(ee)console[ee](`[${V}]  ${h.name}:`,..._);else throw Error(`Attempted to log a message with an invalid logType (value: ${d})`)};let Logger=class Logger{constructor(h){this.name=h,this._logLevel=ec,this._logHandler=defaultLogHandler,this._userLogHandler=null,er.push(this)}get logLevel(){return this._logLevel}set logLevel(h){if(!(h in V))throw TypeError(`Invalid value "${h}" assigned to \`logLevel\``);this._logLevel=h}setLogLevel(h){this._logLevel="string"==typeof h?eo[h]:h}get logHandler(){return this._logHandler}set logHandler(h){if("function"!=typeof h)throw TypeError("Value assigned to `logHandler` must be a function");this._logHandler=h}get userLogHandler(){return this._userLogHandler}set userLogHandler(h){this._userLogHandler=h}debug(...h){this._userLogHandler&&this._userLogHandler(this,V.DEBUG,...h),this._logHandler(this,V.DEBUG,...h)}log(...h){this._userLogHandler&&this._userLogHandler(this,V.VERBOSE,...h),this._logHandler(this,V.VERBOSE,...h)}info(...h){this._userLogHandler&&this._userLogHandler(this,V.INFO,...h),this._logHandler(this,V.INFO,...h)}warn(...h){this._userLogHandler&&this._userLogHandler(this,V.WARN,...h),this._logHandler(this,V.WARN,...h)}error(...h){this._userLogHandler&&this._userLogHandler(this,V.ERROR,...h),this._logHandler(this,V.ERROR,...h)}}},4444:function(h,d,_){"use strict";_.d(d,{BH:function(){return Deferred},L:function(){return base64urlEncodeWithoutPadding},LL:function(){return ErrorFactory},P0:function(){return getDefaultEmulatorHostnameAndPort},Pz:function(){return getExperimentalSetting},Sg:function(){return createMockUserToken},ZR:function(){return FirebaseError},aH:function(){return getDefaultAppConfig},b$:function(){return isReactNative},eu:function(){return validateIndexedDBOpenable},hl:function(){return isIndexedDBAvailable},m9:function(){return getModularInstance},ne:function(){return createSubscribe},pd:function(){return extractQuerystring},q4:function(){return getDefaultEmulatorHost},ru:function(){return isBrowserExtension},tV:function(){return base64Decode},uI:function(){return isMobileCordova},vZ:function(){return function deepEqual(h,d){if(h===d)return!0;let _=Object.keys(h),V=Object.keys(d);for(let ee of _){if(!V.includes(ee))return!1;let _=h[ee],er=d[ee];if(isObject(_)&&isObject(er)){if(!deepEqual(_,er))return!1}else if(_!==er)return!1}for(let h of V)if(!_.includes(h))return!1;return!0}},w1:function(){return isIE},xO:function(){return querystring},xb:function(){return isEmpty},z$:function(){return getUA},zd:function(){return querystringDecode}});var V=_(3454);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let stringToByteArray$1=function(h){let d=[],_=0;for(let V=0;V<h.length;V++){let ee=h.charCodeAt(V);ee<128?d[_++]=ee:(ee<2048?d[_++]=ee>>6|192:((64512&ee)==55296&&V+1<h.length&&(64512&h.charCodeAt(V+1))==56320?(ee=65536+((1023&ee)<<10)+(1023&h.charCodeAt(++V)),d[_++]=ee>>18|240,d[_++]=ee>>12&63|128):d[_++]=ee>>12|224,d[_++]=ee>>6&63|128),d[_++]=63&ee|128)}return d},byteArrayToString=function(h){let d=[],_=0,V=0;for(;_<h.length;){let ee=h[_++];if(ee<128)d[V++]=String.fromCharCode(ee);else if(ee>191&&ee<224){let er=h[_++];d[V++]=String.fromCharCode((31&ee)<<6|63&er)}else if(ee>239&&ee<365){let er=h[_++],eo=h[_++],ec=h[_++],eh=((7&ee)<<18|(63&er)<<12|(63&eo)<<6|63&ec)-65536;d[V++]=String.fromCharCode(55296+(eh>>10)),d[V++]=String.fromCharCode(56320+(1023&eh))}else{let er=h[_++],eo=h[_++];d[V++]=String.fromCharCode((15&ee)<<12|(63&er)<<6|63&eo)}}return d.join("")},ee={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(h,d){if(!Array.isArray(h))throw Error("encodeByteArray takes an array as a parameter");this.init_();let _=d?this.byteToCharMapWebSafe_:this.byteToCharMap_,V=[];for(let d=0;d<h.length;d+=3){let ee=h[d],er=d+1<h.length,eo=er?h[d+1]:0,ec=d+2<h.length,eh=ec?h[d+2]:0,ep=ee>>2,ef=(3&ee)<<4|eo>>4,em=(15&eo)<<2|eh>>6,eg=63&eh;ec||(eg=64,er||(em=64)),V.push(_[ep],_[ef],_[em],_[eg])}return V.join("")},encodeString(h,d){return this.HAS_NATIVE_SUPPORT&&!d?btoa(h):this.encodeByteArray(stringToByteArray$1(h),d)},decodeString(h,d){return this.HAS_NATIVE_SUPPORT&&!d?atob(h):byteArrayToString(this.decodeStringToByteArray(h,d))},decodeStringToByteArray(h,d){this.init_();let _=d?this.charToByteMapWebSafe_:this.charToByteMap_,V=[];for(let d=0;d<h.length;){let ee=_[h.charAt(d++)],er=d<h.length,eo=er?_[h.charAt(d)]:0;++d;let ec=d<h.length,eh=ec?_[h.charAt(d)]:64;++d;let ep=d<h.length,ef=ep?_[h.charAt(d)]:64;if(++d,null==ee||null==eo||null==eh||null==ef)throw new DecodeBase64StringError;let em=ee<<2|eo>>4;if(V.push(em),64!==eh){let h=eo<<4&240|eh>>2;if(V.push(h),64!==ef){let h=eh<<6&192|ef;V.push(h)}}}return V},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let h=0;h<this.ENCODED_VALS.length;h++)this.byteToCharMap_[h]=this.ENCODED_VALS.charAt(h),this.charToByteMap_[this.byteToCharMap_[h]]=h,this.byteToCharMapWebSafe_[h]=this.ENCODED_VALS_WEBSAFE.charAt(h),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[h]]=h,h>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(h)]=h,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(h)]=h)}}};let DecodeBase64StringError=class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};let base64Encode=function(h){let d=stringToByteArray$1(h);return ee.encodeByteArray(d,!0)},base64urlEncodeWithoutPadding=function(h){return base64Encode(h).replace(/\./g,"")},base64Decode=function(h){try{return ee.decodeString(h,!0)}catch(h){console.error("base64Decode failed: ",h)}return null},getDefaultsFromGlobal=()=>/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==_.g)return _.g;throw Error("Unable to locate global object.")})().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(void 0===V||void 0===V.env)return;let h=V.env.__FIREBASE_DEFAULTS__;if(h)return JSON.parse(h)},getDefaultsFromCookie=()=>{let h;if("undefined"==typeof document)return;try{h=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(h){return}let d=h&&base64Decode(h[1]);return d&&JSON.parse(d)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(h){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${h}`);return}},getDefaultEmulatorHost=h=>{var d,_;return null===(_=null===(d=getDefaults())||void 0===d?void 0:d.emulatorHosts)||void 0===_?void 0:_[h]},getDefaultEmulatorHostnameAndPort=h=>{let d=getDefaultEmulatorHost(h);if(!d)return;let _=d.lastIndexOf(":");if(_<=0||_+1===d.length)throw Error(`Invalid host ${d} with no separate hostname and port!`);let V=parseInt(d.substring(_+1),10);return"["===d[0]?[d.substring(1,_-1),V]:[d.substring(0,_),V]},getDefaultAppConfig=()=>{var h;return null===(h=getDefaults())||void 0===h?void 0:h.config},getExperimentalSetting=h=>{var d;return null===(d=getDefaults())||void 0===d?void 0:d[`_${h}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Deferred=class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((h,d)=>{this.resolve=h,this.reject=d})}wrapCallback(h){return(d,_)=>{d?this.reject(d):this.resolve(_),"function"==typeof h&&(this.promise.catch(()=>{}),1===h.length?h(d):h(d,_))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(h,d){if(h.uid)throw Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let _=d||"demo-project",V=h.iat||0,ee=h.sub||h.user_id;if(!ee)throw Error("mockUserToken must contain 'sub' or 'user_id' field!");let er=Object.assign({iss:`https://securetoken.google.com/${_}`,aud:_,iat:V,exp:V+3600,auth_time:V,sub:ee,user_id:ee,firebase:{sign_in_provider:"custom",identities:{}}},h);return[base64urlEncodeWithoutPadding(JSON.stringify({alg:"none",type:"JWT"})),base64urlEncodeWithoutPadding(JSON.stringify(er)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function isMobileCordova(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isBrowserExtension(){let h="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof h&&void 0!==h.id}function isReactNative(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function isIE(){let h=getUA();return h.indexOf("MSIE ")>=0||h.indexOf("Trident/")>=0}function isIndexedDBAvailable(){try{return"object"==typeof indexedDB}catch(h){return!1}}function validateIndexedDBOpenable(){return new Promise((h,d)=>{try{let _=!0,V="validate-browser-context-for-indexeddb-analytics-module",ee=self.indexedDB.open(V);ee.onsuccess=()=>{ee.result.close(),_||self.indexedDB.deleteDatabase(V),h(!0)},ee.onupgradeneeded=()=>{_=!1},ee.onerror=()=>{var h;d((null===(h=ee.error)||void 0===h?void 0:h.message)||"")}}catch(h){d(h)}})}let FirebaseError=class FirebaseError extends Error{constructor(h,d,_){super(d),this.code=h,this.customData=_,this.name="FirebaseError",Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}};let ErrorFactory=class ErrorFactory{constructor(h,d,_){this.service=h,this.serviceName=d,this.errors=_}create(h,...d){let _=d[0]||{},V=`${this.service}/${h}`,ee=this.errors[h],eo=ee?ee.replace(er,(h,d)=>{let V=_[d];return null!=V?String(V):`<${d}?>`}):"Error",ec=`${this.serviceName}: ${eo} (${V}).`,eh=new FirebaseError(V,ec,_);return eh}};let er=/\{\$([^}]+)}/g;function isEmpty(h){for(let d in h)if(Object.prototype.hasOwnProperty.call(h,d))return!1;return!0}function isObject(h){return null!==h&&"object"==typeof h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(h){let d=[];for(let[_,V]of Object.entries(h))Array.isArray(V)?V.forEach(h=>{d.push(encodeURIComponent(_)+"="+encodeURIComponent(h))}):d.push(encodeURIComponent(_)+"="+encodeURIComponent(V));return d.length?"&"+d.join("&"):""}function querystringDecode(h){let d={},_=h.replace(/^\?/,"").split("&");return _.forEach(h=>{if(h){let[_,V]=h.split("=");d[decodeURIComponent(_)]=decodeURIComponent(V)}}),d}function extractQuerystring(h){let d=h.indexOf("?");if(!d)return"";let _=h.indexOf("#",d);return h.substring(d,_>0?_:void 0)}function createSubscribe(h,d){let _=new ObserverProxy(h,d);return _.subscribe.bind(_)}let ObserverProxy=class ObserverProxy{constructor(h,d){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=d,this.task.then(()=>{h(this)}).catch(h=>{this.error(h)})}next(h){this.forEachObserver(d=>{d.next(h)})}error(h){this.forEachObserver(d=>{d.error(h)}),this.close(h)}complete(){this.forEachObserver(h=>{h.complete()}),this.close()}subscribe(h,d,_){let V;if(void 0===h&&void 0===d&&void 0===_)throw Error("Missing Observer.");void 0===(V=!function(h,d){if("object"!=typeof h||null===h)return!1;for(let _ of d)if(_ in h&&"function"==typeof h[_])return!0;return!1}(h,["next","error","complete"])?{next:h,error:d,complete:_}:h).next&&(V.next=noop),void 0===V.error&&(V.error=noop),void 0===V.complete&&(V.complete=noop);let ee=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?V.error(this.finalError):V.complete()}catch(h){}}),this.observers.push(V),ee}unsubscribeOne(h){void 0!==this.observers&&void 0!==this.observers[h]&&(delete this.observers[h],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(h){if(!this.finalized)for(let d=0;d<this.observers.length;d++)this.sendOne(d,h)}sendOne(h,d){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[h])try{d(this.observers[h])}catch(h){"undefined"!=typeof console&&console.error&&console.error(h)}})}close(h){this.finalized||(this.finalized=!0,void 0!==h&&(this.finalError=h),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function noop(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(h){return h&&h._delegate?h._delegate:h}},1458:function(h){"use strict";var d=function(){function defineProperties(h,d){for(var _=0;_<d.length;_++){var V=d[_];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(h,V.key,V)}}return function(h,d,_){return d&&defineProperties(h.prototype,d),_&&defineProperties(h,_),h}}(),_=[[{color:"0, 0, 0",class:"ansi-black"},{color:"187, 0, 0",class:"ansi-red"},{color:"0, 187, 0",class:"ansi-green"},{color:"187, 187, 0",class:"ansi-yellow"},{color:"0, 0, 187",class:"ansi-blue"},{color:"187, 0, 187",class:"ansi-magenta"},{color:"0, 187, 187",class:"ansi-cyan"},{color:"255,255,255",class:"ansi-white"}],[{color:"85, 85, 85",class:"ansi-bright-black"},{color:"255, 85, 85",class:"ansi-bright-red"},{color:"0, 255, 0",class:"ansi-bright-green"},{color:"255, 255, 85",class:"ansi-bright-yellow"},{color:"85, 85, 255",class:"ansi-bright-blue"},{color:"255, 85, 255",class:"ansi-bright-magenta"},{color:"85, 255, 255",class:"ansi-bright-cyan"},{color:"255, 255, 255",class:"ansi-bright-white"}]],V=function(){function Anser(){!function(h,d){if(!(h instanceof d))throw TypeError("Cannot call a class as a function")}(this,Anser),this.fg=this.bg=this.fg_truecolor=this.bg_truecolor=null,this.bright=0,this.decorations=[]}return d(Anser,null,[{key:"escapeForHtml",value:function(h){return new Anser().escapeForHtml(h)}},{key:"linkify",value:function(h){return new Anser().linkify(h)}},{key:"ansiToHtml",value:function(h,d){return new Anser().ansiToHtml(h,d)}},{key:"ansiToJson",value:function(h,d){return new Anser().ansiToJson(h,d)}},{key:"ansiToText",value:function(h){return new Anser().ansiToText(h)}}]),d(Anser,[{key:"setupPalette",value:function(){this.PALETTE_COLORS=[];for(var h=0;h<2;++h)for(var d=0;d<8;++d)this.PALETTE_COLORS.push(_[h][d].color);for(var V=[0,95,135,175,215,255],format=function(h,d,_){return V[h]+", "+V[d]+", "+V[_]},ee=0;ee<6;++ee)for(var er=0;er<6;++er)for(var eo=0;eo<6;++eo)this.PALETTE_COLORS.push(format(ee,er,eo));for(var ec=8,eh=0;eh<24;++eh,ec+=10)this.PALETTE_COLORS.push(format(ec,ec,ec))}},{key:"escapeForHtml",value:function(h){return h.replace(/[&<>\"]/gm,function(h){return"&"==h?"&amp;":'"'==h?"&quot;":"<"==h?"&lt;":">"==h?"&gt;":""})}},{key:"linkify",value:function(h){return h.replace(/(https?:\/\/[^\s]+)/gm,function(h){return'<a href="'+h+'">'+h+"</a>"})}},{key:"ansiToHtml",value:function(h,d){return this.process(h,d,!0)}},{key:"ansiToJson",value:function(h,d){return(d=d||{}).json=!0,d.clearLine=!1,this.process(h,d,!0)}},{key:"ansiToText",value:function(h){return this.process(h,{},!1)}},{key:"process",value:function(h,d,_){var V=this,ee=h.split(/\033\[/),er=ee.shift();null==d&&(d={}),d.clearLine=/\r/.test(h);var eo=ee.map(function(h){return V.processChunk(h,d,_)});if(d&&d.json){var ec=this.processChunkJson("");return ec.content=er,ec.clearLine=d.clearLine,eo.unshift(ec),d.remove_empty&&(eo=eo.filter(function(h){return!h.isEmpty()})),eo}return eo.unshift(er),eo.join("")}},{key:"processChunkJson",value:function(h,d,V){var ee=(d=void 0===d?{}:d).use_classes=void 0!==d.use_classes&&d.use_classes,er=d.key=ee?"class":"color",eo={content:h,fg:null,bg:null,fg_truecolor:null,bg_truecolor:null,isInverted:!1,clearLine:d.clearLine,decoration:null,decorations:[],was_processed:!1,isEmpty:function(){return!eo.content}},ec=h.match(/^([!\x3c-\x3f]*)([\d;]*)([\x20-\x2c]*[\x40-\x7e])([\s\S]*)/m);if(!ec)return eo;eo.content=ec[4];var eh=ec[2].split(";");if(""!==ec[1]||"m"!==ec[3]||!V)return eo;for(;eh.length>0;){var ep=parseInt(eh.shift());if(isNaN(ep)||0===ep)this.fg=this.bg=null,this.decorations=[];else if(1===ep)this.decorations.push("bold");else if(2===ep)this.decorations.push("dim");else if(3===ep)this.decorations.push("italic");else if(4===ep)this.decorations.push("underline");else if(5===ep)this.decorations.push("blink");else if(7===ep)this.decorations.push("reverse");else if(8===ep)this.decorations.push("hidden");else if(9===ep)this.decorations.push("strikethrough");else if(21===ep)this.removeDecoration("bold");else if(22===ep)this.removeDecoration("bold"),this.removeDecoration("dim");else if(23===ep)this.removeDecoration("italic");else if(24===ep)this.removeDecoration("underline");else if(25===ep)this.removeDecoration("blink");else if(27===ep)this.removeDecoration("reverse");else if(28===ep)this.removeDecoration("hidden");else if(29===ep)this.removeDecoration("strikethrough");else if(39===ep)this.fg=null;else if(49===ep)this.bg=null;else if(ep>=30&&ep<38)this.fg=_[0][ep%10][er];else if(ep>=90&&ep<98)this.fg=_[1][ep%10][er];else if(ep>=40&&ep<48)this.bg=_[0][ep%10][er];else if(ep>=100&&ep<108)this.bg=_[1][ep%10][er];else if(38===ep||48===ep){var ef=38===ep;if(eh.length>=1){var em=eh.shift();if("5"===em&&eh.length>=1){var eg=parseInt(eh.shift());if(eg>=0&&eg<=255){if(ee){var eO=eg>=16?"ansi-palette-"+eg:_[eg>7?1:0][eg%8].class;ef?this.fg=eO:this.bg=eO}else this.PALETTE_COLORS||this.setupPalette(),ef?this.fg=this.PALETTE_COLORS[eg]:this.bg=this.PALETTE_COLORS[eg]}}else if("2"===em&&eh.length>=3){var ey=parseInt(eh.shift()),ev=parseInt(eh.shift()),eS=parseInt(eh.shift());if(ey>=0&&ey<=255&&ev>=0&&ev<=255&&eS>=0&&eS<=255){var e_=ey+", "+ev+", "+eS;ee?ef?(this.fg="ansi-truecolor",this.fg_truecolor=e_):(this.bg="ansi-truecolor",this.bg_truecolor=e_):ef?this.fg=e_:this.bg=e_}}}}}return null===this.fg&&null===this.bg&&0===this.decorations.length||(eo.fg=this.fg,eo.bg=this.bg,eo.fg_truecolor=this.fg_truecolor,eo.bg_truecolor=this.bg_truecolor,eo.decorations=this.decorations,eo.decoration=this.decorations.slice(-1).pop()||null,eo.was_processed=!0),eo}},{key:"processChunk",value:function(h,d,V){var ee=this;d=d||{};var er=this.processChunkJson(h,d,V),eo=d.use_classes;if(er.decorations=er.decorations.filter(function(h){if("reverse"===h){er.fg||(er.fg=_[0][7][eo?"class":"color"]),er.bg||(er.bg=_[0][0][eo?"class":"color"]);var d=er.fg;er.fg=er.bg,er.bg=d;var V=er.fg_truecolor;return er.fg_truecolor=er.bg_truecolor,er.bg_truecolor=V,er.isInverted=!0,!1}return!0}),d.json)return er;if(er.isEmpty())return"";if(!er.was_processed)return er.content;var ec=[],eh=[],ep=[],ef={},render_data=function(h){var d=[],_=void 0;for(_ in h)h.hasOwnProperty(_)&&d.push("data-"+_+'="'+ee.escapeForHtml(h[_])+'"');return d.length>0?" "+d.join(" "):""};return(er.isInverted&&(ef["ansi-is-inverted"]="true"),er.fg&&(eo?(ec.push(er.fg+"-fg"),null!==er.fg_truecolor&&(ef["ansi-truecolor-fg"]=er.fg_truecolor,er.fg_truecolor=null)):ec.push("color:rgb("+er.fg+")")),er.bg&&(eo?(ec.push(er.bg+"-bg"),null!==er.bg_truecolor&&(ef["ansi-truecolor-bg"]=er.bg_truecolor,er.bg_truecolor=null)):ec.push("background-color:rgb("+er.bg+")")),er.decorations.forEach(function(h){if(eo){eh.push("ansi-"+h);return}"bold"===h?eh.push("font-weight:bold"):"dim"===h?eh.push("opacity:0.5"):"italic"===h?eh.push("font-style:italic"):"hidden"===h?eh.push("visibility:hidden"):"strikethrough"===h?ep.push("line-through"):ep.push(h)}),ep.length&&eh.push("text-decoration:"+ep.join(" ")),eo)?'<span class="'+ec.concat(eh).join(" ")+'"'+render_data(ef)+">"+er.content+"</span>":'<span style="'+ec.concat(eh).join(";")+'"'+render_data(ef)+">"+er.content+"</span>"}},{key:"removeDecoration",value:function(h){var d=this.decorations.indexOf(h);d>=0&&this.decorations.splice(d,1)}}]),Anser}();h.exports=V},5278:function(h,d,_){"use strict";_.d(d,{j:function(){return cva}});let falsyToString=h=>"boolean"==typeof h?"".concat(h):0===h?"0":h,cx=function(){for(var h,d,_=0,V="";_<arguments.length;)(h=arguments[_++])&&(d=function r(h){var d,_,V="";if("string"==typeof h||"number"==typeof h)V+=h;else if("object"==typeof h){if(Array.isArray(h))for(d=0;d<h.length;d++)h[d]&&(_=r(h[d]))&&(V&&(V+=" "),V+=_);else for(d in h)h[d]&&(V&&(V+=" "),V+=d)}return V}(h))&&(V&&(V+=" "),V+=d);return V},cva=(h,d)=>_=>{var V;if((null==d?void 0:d.variants)==null)return cx(h,null==_?void 0:_.class,null==_?void 0:_.className);let{variants:ee,defaultVariants:er}=d,eo=Object.keys(ee).map(h=>{let d=null==_?void 0:_[h],V=null==er?void 0:er[h];if(null===d)return null;let eo=falsyToString(d)||falsyToString(V);return ee[h][eo]}),ec=_&&Object.entries(_).reduce((h,d)=>{let[_,V]=d;return void 0===V||(h[_]=V),h},{}),eh=null==d?void 0:null===(V=d.compoundVariants)||void 0===V?void 0:V.reduce((h,d)=>{let{class:_,className:V,...ee}=d;return Object.entries(ee).every(h=>{let[d,_]=h;return Array.isArray(_)?_.includes({...er,...ec}[d]):({...er,...ec})[d]===_})?[...h,_,V]:h},[]);return cx(h,eo,eh,null==_?void 0:_.class,null==_?void 0:_.className)}},4184:function(h,d){var _;/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/!function(){"use strict";var V={}.hasOwnProperty;function classNames(){for(var h=[],d=0;d<arguments.length;d++){var _=arguments[d];if(_){var ee=typeof _;if("string"===ee||"number"===ee)h.push(_);else if(Array.isArray(_)){if(_.length){var er=classNames.apply(null,_);er&&h.push(er)}}else if("object"===ee){if(_.toString!==Object.prototype.toString&&!_.toString.toString().includes("[native code]")){h.push(_.toString());continue}for(var eo in _)V.call(_,eo)&&_[eo]&&h.push(eo)}}}return h.join(" ")}h.exports?(classNames.default=classNames,h.exports=classNames):void 0!==(_=(function(){return classNames}).apply(d,[]))&&(h.exports=_)}()},1116:function(h,d,_){"use strict";_.d(d,{J:function(){return dequal}});var V=Object.prototype.hasOwnProperty;function find(h,d,_){for(_ of h.keys())if(dequal(_,d))return _}function dequal(h,d){var _,ee,er;if(h===d)return!0;if(h&&d&&(_=h.constructor)===d.constructor){if(_===Date)return h.getTime()===d.getTime();if(_===RegExp)return h.toString()===d.toString();if(_===Array){if((ee=h.length)===d.length)for(;ee--&&dequal(h[ee],d[ee]););return -1===ee}if(_===Set){if(h.size!==d.size)return!1;for(ee of h)if((er=ee)&&"object"==typeof er&&!(er=find(d,er))||!d.has(er))return!1;return!0}if(_===Map){if(h.size!==d.size)return!1;for(ee of h)if((er=ee[0])&&"object"==typeof er&&!(er=find(d,er))||!dequal(ee[1],d.get(er)))return!1;return!0}if(_===ArrayBuffer)h=new Uint8Array(h),d=new Uint8Array(d);else if(_===DataView){if((ee=h.byteLength)===d.byteLength)for(;ee--&&h.getInt8(ee)===d.getInt8(ee););return -1===ee}if(ArrayBuffer.isView(h)){if((ee=h.byteLength)===d.byteLength)for(;ee--&&h[ee]===d[ee];);return -1===ee}if(!_||"object"==typeof h){for(_ in ee=0,h)if(V.call(h,_)&&++ee&&!V.call(d,_)||!(_ in d)||!dequal(h[_],d[_]))return!1;return Object.keys(d).length===ee}}return h!=h&&d!=d}},8699:function(h){function escapeCarriageReturn(h){if(!h)return"";if(!/\r/.test(h))return h;for(h=h.replace(/\r+\n/gm,"\n");/\r./.test(h);)h=h.replace(/^([^\r\n]*)\r+([^\r\n]+)/gm,function(h,d,_){return _+d.slice(_.length)});return h}function escapeSingleLineSafe(h){if(!/\r/.test(h))return h;for(var d=h.split("\r"),_=[];d.length>0;){var V=function(h){for(var d=0,_=0;_<h.length;_++)h[d].length<=h[_].length&&(d=_);return d}(d);_.push(d[V]),d=d.slice(V+1)}return _.join("\r")}h.exports=escapeCarriageReturn,h.exports.escapeCarriageReturn=escapeCarriageReturn,h.exports.escapeCarriageReturnSafe=function(h){if(!h)return"";if(!/\r/.test(h))return h;if(!/\n/.test(h))return escapeSingleLineSafe(h);var d=(h=h.replace(/\r+\n/gm,"\n")).lastIndexOf("\n");return escapeCarriageReturn(h.slice(0,d))+"\n"+escapeSingleLineSafe(h.slice(d+1))}},5629:function(h,d,_){"use strict";_.d(d,{hJ:function(){return GoogleAuthProvider},h8:function(){return deleteUser},v0:function(){return getAuth},bc:function(){return reauthenticateWithPopup},rh:function(){return signInWithPopup},w7:function(){return signOut}});var V,ee=_(4444),er=_(1453);function __rest(h,d){var _={};for(var V in h)Object.prototype.hasOwnProperty.call(h,V)&&0>d.indexOf(V)&&(_[V]=h[V]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols)for(var ee=0,V=Object.getOwnPropertySymbols(h);ee<V.length;ee++)0>d.indexOf(V[ee])&&Object.prototype.propertyIsEnumerable.call(h,V[ee])&&(_[V[ee]]=h[V[ee]]);return _}var eo=_(6872),ec=_(2044);function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}let eh=new ee.LL("auth","Firebase",_prodErrorMap()),ep=new eo.Yd("@firebase/auth");function _logError(h,...d){ep.logLevel<=eo.in.ERROR&&ep.error(`Auth (${er.Jn}): ${h}`,...d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(h,...d){throw createErrorInternal(h,...d)}function _createError(h,...d){return createErrorInternal(h,...d)}function _errorWithCustomMessage(h,d,_){let V=Object.assign(Object.assign({},_prodErrorMap()),{[d]:_}),er=new ee.LL("auth","Firebase",V);return er.create(d,{appName:h.name})}function _assertInstanceOf(h,d,_){if(!(d instanceof _))throw _.name!==d.constructor.name&&_fail(h,"argument-error"),_errorWithCustomMessage(h,"argument-error",`Type of ${d.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(h,...d){if("string"!=typeof h){let _=d[0],V=[...d.slice(1)];return V[0]&&(V[0].appName=h.name),h._errorFactory.create(_,...V)}return eh.create(h,...d)}function _assert(h,d,..._){if(!h)throw createErrorInternal(d,..._)}function debugFail(h){let d="INTERNAL ASSERTION FAILED: "+h;throw _logError(d),Error(d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var h;return"undefined"!=typeof self&&(null===(h=self.location)||void 0===h?void 0:h.href)||""}function _getCurrentScheme(){var h;return"undefined"!=typeof self&&(null===(h=self.location)||void 0===h?void 0:h.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Delay=class Delay{constructor(h,d){this.shortDelay=h,this.longDelay=d,d>h||debugFail("Short delay should be less than long delay!"),this.isMobile=(0,ee.uI)()||(0,ee.b$)()}get(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&("http:"===_getCurrentScheme()||"https:"===_getCurrentScheme()||(0,ee.ru)()||"connection"in navigator))||navigator.onLine?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(h,d){h.emulator||debugFail("Emulator should always be set here");let{url:_}=h.emulator;return d?`${_}${d.startsWith("/")?d.slice(1):d}`:_}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FetchProvider=class FetchProvider{static initialize(h,d,_){this.fetchImpl=h,d&&(this.headersImpl=d),_&&(this.responseImpl=_)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ef={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},em=new Delay(3e4,6e4);function _addTidIfNecessary(h,d){return h.tenantId&&!d.tenantId?Object.assign(Object.assign({},d),{tenantId:h.tenantId}):d}async function _performApiRequest(h,d,_,V,er={}){return _performFetchWithErrorHandling(h,er,async()=>{let er={},eo={};V&&("GET"===d?eo=V:er={body:JSON.stringify(V)});let ec=(0,ee.xO)(Object.assign({key:h.config.apiKey},eo)).slice(1),eh=await h._getAdditionalHeaders();return eh["Content-Type"]="application/json",h.languageCode&&(eh["X-Firebase-Locale"]=h.languageCode),FetchProvider.fetch()(_getFinalTarget(h,h.config.apiHost,_,ec),Object.assign({method:d,headers:eh,referrerPolicy:"no-referrer"},er))})}async function _performFetchWithErrorHandling(h,d,_){h._canInitEmulator=!1;let V=Object.assign(Object.assign({},ef),d);try{let d=new NetworkTimeout(h),ee=await Promise.race([_(),d.promise]);d.clearNetworkTimeout();let er=await ee.json();if("needConfirmation"in er)throw _makeTaggedError(h,"account-exists-with-different-credential",er);if(ee.ok&&!("errorMessage"in er))return er;{let d=ee.ok?er.errorMessage:er.error.message,[_,eo]=d.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===_)throw _makeTaggedError(h,"credential-already-in-use",er);if("EMAIL_EXISTS"===_)throw _makeTaggedError(h,"email-already-in-use",er);if("USER_DISABLED"===_)throw _makeTaggedError(h,"user-disabled",er);let ec=V[_]||_.toLowerCase().replace(/[_\s]+/g,"-");if(eo)throw _errorWithCustomMessage(h,ec,eo);_fail(h,ec)}}catch(d){if(d instanceof ee.ZR)throw d;_fail(h,"network-request-failed",{message:String(d)})}}async function _performSignInRequest(h,d,_,V,ee={}){let er=await _performApiRequest(h,d,_,V,ee);return"mfaPendingCredential"in er&&_fail(h,"multi-factor-auth-required",{_serverResponse:er}),er}function _getFinalTarget(h,d,_,V){let ee=`${d}${_}?${V}`;return h.config.emulator?_emulatorUrl(h.config,ee):`${h.config.apiScheme}://${ee}`}let NetworkTimeout=class NetworkTimeout{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((h,d)=>{this.timer=setTimeout(()=>d(_createError(this.auth,"network-request-failed")),em.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function _makeTaggedError(h,d,_){let V={appName:h.name};_.email&&(V.email=_.email),_.phoneNumber&&(V.phoneNumber=_.phoneNumber);let ee=_createError(h,d,V);return ee.customData._tokenResponse=_,ee}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(h,d){return _performApiRequest(h,"POST","/v1/accounts:delete",d)}async function getAccountInfo(h,d){return _performApiRequest(h,"POST","/v1/accounts:lookup",d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(h){if(h)try{let d=new Date(Number(h));if(!isNaN(d.getTime()))return d.toUTCString()}catch(h){}}async function getIdTokenResult(h,d=!1){let _=(0,ee.m9)(h),V=await _.getIdToken(d),er=_parseToken(V);_assert(er&&er.exp&&er.auth_time&&er.iat,_.auth,"internal-error");let eo="object"==typeof er.firebase?er.firebase:void 0,ec=null==eo?void 0:eo.sign_in_provider;return{claims:er,token:V,authTime:utcTimestampToDateString(secondsStringToMilliseconds(er.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(er.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(er.exp)),signInProvider:ec||null,signInSecondFactor:(null==eo?void 0:eo.sign_in_second_factor)||null}}function secondsStringToMilliseconds(h){return 1e3*Number(h)}function _parseToken(h){let[d,_,V]=h.split(".");if(void 0===d||void 0===_||void 0===V)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{let h=(0,ee.tV)(_);if(!h)return _logError("Failed to decode base64 JWT payload"),null;return JSON.parse(h)}catch(h){return _logError("Caught error parsing JWT payload as JSON",null==h?void 0:h.toString()),null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(h,d,_=!1){if(_)return d;try{return await d}catch(d){throw d instanceof ee.ZR&&function({code:h}){return"auth/user-disabled"===h||"auth/user-token-expired"===h}(d)&&h.auth.currentUser===h&&await h.auth.signOut(),d}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ProactiveRefresh=class ProactiveRefresh{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var d;if(h){let h=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),h}{this.errorBackoff=3e4;let h=null!==(d=this.user.stsTokenManager.expirationTime)&&void 0!==d?d:0,_=h-Date.now()-3e5;return Math.max(0,_)}}schedule(h=!1){if(!this.isRunning)return;let d=this.getInterval(h);this.timerId=setTimeout(async()=>{await this.iteration()},d)}async iteration(){try{await this.user.getIdToken(!0)}catch(h){(null==h?void 0:h.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UserMetadata=class UserMetadata{constructor(h,d){this.createdAt=h,this.lastLoginAt=d,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(h){var d;let _=h.auth,V=await h.getIdToken(),ee=await _logoutIfInvalidated(h,getAccountInfo(_,{idToken:V}));_assert(null==ee?void 0:ee.users.length,_,"internal-error");let er=ee.users[0];h._notifyReloadListener(er);let eo=(null===(d=er.providerUserInfo)||void 0===d?void 0:d.length)?er.providerUserInfo.map(h=>{var{providerId:d}=h,_=__rest(h,["providerId"]);return{providerId:d,uid:_.rawId||"",displayName:_.displayName||null,email:_.email||null,phoneNumber:_.phoneNumber||null,photoURL:_.photoUrl||null}}):[],ec=function(h,d){let _=h.filter(h=>!d.some(d=>d.providerId===h.providerId));return[..._,...d]}(h.providerData,eo),eh=h.isAnonymous,ep=!(h.email&&er.passwordHash)&&!(null==ec?void 0:ec.length),ef={uid:er.localId,displayName:er.displayName||null,photoURL:er.photoUrl||null,email:er.email||null,emailVerified:er.emailVerified||!1,phoneNumber:er.phoneNumber||null,tenantId:er.tenantId||null,providerData:ec,metadata:new UserMetadata(er.createdAt,er.lastLoginAt),isAnonymous:!!eh&&ep};Object.assign(h,ef)}async function reload(h){let d=(0,ee.m9)(h);await _reloadWithoutSaving(d),await d.auth._persistUserIfCurrent(d),d.auth._notifyListenersIfCurrent(d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(h,d){let _=await _performFetchWithErrorHandling(h,{},async()=>{let _=(0,ee.xO)({grant_type:"refresh_token",refresh_token:d}).slice(1),{tokenApiHost:V,apiKey:er}=h.config,eo=_getFinalTarget(h,V,"/v1/token",`key=${er}`),ec=await h._getAdditionalHeaders();return ec["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(eo,{method:"POST",headers:ec,body:_})});return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let StsTokenManager=class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){_assert(h.idToken,"internal-error"),_assert(void 0!==h.idToken,"internal-error"),_assert(void 0!==h.refreshToken,"internal-error");let d="expiresIn"in h&&void 0!==h.expiresIn?Number(h.expiresIn):function(h){let d=_parseToken(h);return _assert(d,"internal-error"),_assert(void 0!==d.exp,"internal-error"),_assert(void 0!==d.iat,"internal-error"),Number(d.exp)-Number(d.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,d)}async getToken(h,d=!1){return(_assert(!this.accessToken||this.refreshToken,h,"user-token-expired"),d||!this.accessToken||this.isExpired)?this.refreshToken?(await this.refresh(h,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(h,d){let{accessToken:_,refreshToken:V,expiresIn:ee}=await requestStsToken(h,d);this.updateTokensAndExpiration(_,V,Number(ee))}updateTokensAndExpiration(h,d,_){this.refreshToken=d||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*_}static fromJSON(h,d){let{refreshToken:_,accessToken:V,expirationTime:ee}=d,er=new StsTokenManager;return _&&(_assert("string"==typeof _,"internal-error",{appName:h}),er.refreshToken=_),V&&(_assert("string"==typeof V,"internal-error",{appName:h}),er.accessToken=V),ee&&(_assert("number"==typeof ee,"internal-error",{appName:h}),er.expirationTime=ee),er}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(h,d){_assert("string"==typeof h||void 0===h,"internal-error",{appName:d})}let UserImpl=class UserImpl{constructor(h){var{uid:d,auth:_,stsTokenManager:V}=h,ee=__rest(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=d,this.auth=_,this.stsTokenManager=V,this.accessToken=V.accessToken,this.displayName=ee.displayName||null,this.email=ee.email||null,this.emailVerified=ee.emailVerified||!1,this.phoneNumber=ee.phoneNumber||null,this.photoURL=ee.photoURL||null,this.isAnonymous=ee.isAnonymous||!1,this.tenantId=ee.tenantId||null,this.providerData=ee.providerData?[...ee.providerData]:[],this.metadata=new UserMetadata(ee.createdAt||void 0,ee.lastLoginAt||void 0)}async getIdToken(h){let d=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,h));return _assert(d,this.auth,"internal-error"),this.accessToken!==d&&(this.accessToken=d,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),d}getIdTokenResult(h){return getIdTokenResult(this,h)}reload(){return reload(this)}_assign(h){this!==h&&(_assert(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(h=>Object.assign({},h)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){let d=new UserImpl(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return d.metadata._copy(this.metadata),d}_onReload(h){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(h,d=!1){let _=!1;h.idToken&&h.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(h),_=!0),d&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),_&&this.auth._notifyListenersIfCurrent(this)}async delete(){let h=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:h})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,d){var _,V,ee,er,eo,ec,eh,ep;let ef=null!==(_=d.displayName)&&void 0!==_?_:void 0,em=null!==(V=d.email)&&void 0!==V?V:void 0,eg=null!==(ee=d.phoneNumber)&&void 0!==ee?ee:void 0,eO=null!==(er=d.photoURL)&&void 0!==er?er:void 0,ey=null!==(eo=d.tenantId)&&void 0!==eo?eo:void 0,ev=null!==(ec=d._redirectEventId)&&void 0!==ec?ec:void 0,eS=null!==(eh=d.createdAt)&&void 0!==eh?eh:void 0,e_=null!==(ep=d.lastLoginAt)&&void 0!==ep?ep:void 0,{uid:ew,emailVerified:ex,isAnonymous:ek,providerData:eT,stsTokenManager:eE}=d;_assert(ew&&eE,h,"internal-error");let eC=StsTokenManager.fromJSON(this.name,eE);_assert("string"==typeof ew,h,"internal-error"),assertStringOrUndefined(ef,h.name),assertStringOrUndefined(em,h.name),_assert("boolean"==typeof ex,h,"internal-error"),_assert("boolean"==typeof ek,h,"internal-error"),assertStringOrUndefined(eg,h.name),assertStringOrUndefined(eO,h.name),assertStringOrUndefined(ey,h.name),assertStringOrUndefined(ev,h.name),assertStringOrUndefined(eS,h.name),assertStringOrUndefined(e_,h.name);let eP=new UserImpl({uid:ew,auth:h,email:em,emailVerified:ex,displayName:ef,isAnonymous:ek,photoURL:eO,phoneNumber:eg,tenantId:ey,stsTokenManager:eC,createdAt:eS,lastLoginAt:e_});return eT&&Array.isArray(eT)&&(eP.providerData=eT.map(h=>Object.assign({},h))),ev&&(eP._redirectEventId=ev),eP}static async _fromIdTokenResponse(h,d,_=!1){let V=new StsTokenManager;V.updateFromServerResponse(d);let ee=new UserImpl({uid:d.localId,auth:h,stsTokenManager:V,isAnonymous:_});return await _reloadWithoutSaving(ee),ee}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eg=new Map;function _getInstance(h){h instanceof Function||debugFail("Expected a class definition");let d=eg.get(h);return d?d instanceof h||debugFail("Instance stored in cache mismatched with class"):(d=new h,eg.set(h,d)),d}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let InMemoryPersistence=class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(h,d){this.storage[h]=d}async _get(h){let d=this.storage[h];return void 0===d?null:d}async _remove(h){delete this.storage[h]}_addListener(h,d){}_removeListener(h,d){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(h,d,_){return`firebase:${h}:${d}:${_}`}InMemoryPersistence.type="NONE";let PersistenceUserManager=class PersistenceUserManager{constructor(h,d,_){this.persistence=h,this.auth=d,this.userKey=_;let{config:V,name:ee}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,V.apiKey,ee),this.fullPersistenceKey=_persistenceKeyName("persistence",V.apiKey,ee),this.boundEventHandler=d._onStorageEvent.bind(d),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}async getCurrentUser(){let h=await this.persistence._get(this.fullUserKey);return h?UserImpl._fromJSON(this.auth,h):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(h){if(this.persistence===h)return;let d=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=h,d)return this.setCurrentUser(d)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(h,d,_="authUser"){if(!d.length)return new PersistenceUserManager(_getInstance(InMemoryPersistence),h,_);let V=(await Promise.all(d.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h),ee=V[0]||_getInstance(InMemoryPersistence),er=_persistenceKeyName(_,h.config.apiKey,h.name),eo=null;for(let _ of d)try{let d=await _._get(er);if(d){let V=UserImpl._fromJSON(h,d);_!==ee&&(eo=V),ee=_;break}}catch(h){}let ec=V.filter(h=>h._shouldAllowMigration);return ee._shouldAllowMigration&&ec.length&&(ee=ec[0],eo&&await ee._set(er,eo.toJSON()),await Promise.all(d.map(async h=>{if(h!==ee)try{await h._remove(er)}catch(h){}}))),new PersistenceUserManager(ee,h,_)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(h){let d=h.toLowerCase();if(d.includes("opera/")||d.includes("opr/")||d.includes("opios/"))return"Opera";if(_isIEMobile(d))return"IEMobile";if(d.includes("msie")||d.includes("trident/"))return"IE";{if(d.includes("edge/"))return"Edge";if(_isFirefox(d))return"Firefox";if(d.includes("silk/"))return"Silk";if(_isBlackBerry(d))return"Blackberry";if(_isWebOS(d))return"Webos";if(_isSafari(d))return"Safari";if((d.includes("chrome/")||_isChromeIOS(d))&&!d.includes("edge/"))return"Chrome";if(_isAndroid(d))return"Android";let _=h.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if((null==_?void 0:_.length)===2)return _[1]}return"Other"}function _isFirefox(h=(0,ee.z$)()){return/firefox\//i.test(h)}function _isSafari(h=(0,ee.z$)()){let d=h.toLowerCase();return d.includes("safari/")&&!d.includes("chrome/")&&!d.includes("crios/")&&!d.includes("android")}function _isChromeIOS(h=(0,ee.z$)()){return/crios\//i.test(h)}function _isIEMobile(h=(0,ee.z$)()){return/iemobile/i.test(h)}function _isAndroid(h=(0,ee.z$)()){return/android/i.test(h)}function _isBlackBerry(h=(0,ee.z$)()){return/blackberry/i.test(h)}function _isWebOS(h=(0,ee.z$)()){return/webos/i.test(h)}function _isIOS(h=(0,ee.z$)()){return/iphone|ipad|ipod/i.test(h)||/macintosh/i.test(h)&&/mobile/i.test(h)}function _isMobileBrowser(h=(0,ee.z$)()){return _isIOS(h)||_isAndroid(h)||_isWebOS(h)||_isBlackBerry(h)||/windows phone/i.test(h)||_isIEMobile(h)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(h,d=[]){let _;switch(h){case"Browser":_=_getBrowserName((0,ee.z$)());break;case"Worker":_=`${_getBrowserName((0,ee.z$)())}-${h}`;break;default:_=h}let V=d.length?d.join(","):"FirebaseCore-web";return`${_}/JsCore/${er.Jn}/${V}`}async function getRecaptchaConfig(h,d){return _performApiRequest(h,"GET","/v2/recaptchaConfig",_addTidIfNecessary(h,d))}function isEnterprise(h){return void 0!==h&&void 0!==h.enterprise}let RecaptchaConfig=class RecaptchaConfig{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(h=>"EMAIL_PASSWORD_PROVIDER"===h.provider&&"OFF"!==h.enforcementState)}};function _loadJS(h){return new Promise((d,_)=>{var V,ee;let er=document.createElement("script");er.setAttribute("src",h),er.onload=d,er.onerror=h=>{let d=_createError("internal-error");d.customData=h,_(d)},er.type="text/javascript",er.charset="UTF-8",(null!==(ee=null===(V=document.getElementsByTagName("head"))||void 0===V?void 0:V[0])&&void 0!==ee?ee:document).appendChild(er)})}function _generateCallbackName(h){return`__${h}${Math.floor(1e6*Math.random())}`}let RecaptchaEnterpriseVerifier=class RecaptchaEnterpriseVerifier{constructor(h){this.type="recaptcha-enterprise",this.auth=_castAuth(h)}async verify(h="verify",d=!1){async function retrieveSiteKey(h){if(!d){if(null==h.tenantId&&null!=h._agentRecaptchaConfig)return h._agentRecaptchaConfig.siteKey;if(null!=h.tenantId&&void 0!==h._tenantRecaptchaConfigs[h.tenantId])return h._tenantRecaptchaConfigs[h.tenantId].siteKey}return new Promise(async(d,_)=>{getRecaptchaConfig(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(V=>{if(void 0===V.recaptchaKey)_(Error("recaptcha Enterprise site key undefined"));else{let _=new RecaptchaConfig(V);return null==h.tenantId?h._agentRecaptchaConfig=_:h._tenantRecaptchaConfigs[h.tenantId]=_,d(_.siteKey)}}).catch(h=>{_(h)})})}function retrieveRecaptchaToken(d,_,V){let ee=window.grecaptcha;isEnterprise(ee)?ee.enterprise.ready(()=>{ee.enterprise.execute(d,{action:h}).then(h=>{_(h)}).catch(()=>{_("NO_RECAPTCHA")})}):V(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((h,_)=>{retrieveSiteKey(this.auth).then(V=>{if(!d&&isEnterprise(window.grecaptcha))retrieveRecaptchaToken(V,h,_);else{if("undefined"==typeof window){_(Error("RecaptchaVerifier is only supported in browser"));return}_loadJS("https://www.google.com/recaptcha/enterprise.js?render="+V).then(()=>{retrieveRecaptchaToken(V,h,_)}).catch(h=>{_(h)})}}).catch(h=>{_(h)})})}};async function injectRecaptchaFields(h,d,_,V=!1){let ee;let er=new RecaptchaEnterpriseVerifier(h);try{ee=await er.verify(_)}catch(h){ee=await er.verify(_,!0)}let eo=Object.assign({},d);return V?Object.assign(eo,{captchaResp:ee}):Object.assign(eo,{captchaResponse:ee}),Object.assign(eo,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(eo,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),eo}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AuthMiddlewareQueue=class AuthMiddlewareQueue{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,d){let wrappedCallback=d=>new Promise((_,V)=>{try{let V=h(d);_(V)}catch(h){V(h)}});wrappedCallback.onAbort=d,this.queue.push(wrappedCallback);let _=this.queue.length-1;return()=>{this.queue[_]=()=>Promise.resolve()}}async runMiddleware(h){if(this.auth.currentUser===h)return;let d=[];try{for(let _ of this.queue)await _(h),_.onAbort&&d.push(_.onAbort)}catch(h){for(let h of(d.reverse(),d))try{h()}catch(h){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==h?void 0:h.message})}}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AuthImpl=class AuthImpl{constructor(h,d,_,V){this.app=h,this.heartbeatServiceProvider=d,this.appCheckServiceProvider=_,this.config=V,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eh,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=V.sdkClientVersion}_initializeWithPersistence(h,d){return d&&(this._popupRedirectResolver=_getInstance(d)),this._initializationPromise=this.queue(async()=>{var _,V;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,h),!this._deleted)){if(null===(_=this._popupRedirectResolver)||void 0===_?void 0:_._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(h){}await this.initializeCurrentUser(d),this.lastNotifiedUid=(null===(V=this.currentUser)||void 0===V?void 0:V.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;let h=await this.assertedPersistence.getCurrentUser();if(this.currentUser||h){if(this.currentUser&&h&&this.currentUser.uid===h.uid){this._currentUser._assign(h),await this.currentUser.getIdToken();return}await this._updateCurrentUser(h,!0)}}async initializeCurrentUser(h){var d;let _=await this.assertedPersistence.getCurrentUser(),V=_,ee=!1;if(h&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();let _=null===(d=this.redirectUser)||void 0===d?void 0:d._redirectEventId,er=null==V?void 0:V._redirectEventId,eo=await this.tryRedirectSignIn(h);(!_||_===er)&&(null==eo?void 0:eo.user)&&(V=eo.user,ee=!0)}if(!V)return this.directlySetCurrentUser(null);if(!V._redirectEventId){if(ee)try{await this.beforeStateQueue.runMiddleware(V)}catch(h){V=_,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(h))}return V?this.reloadAndSetCurrentUserOrClear(V):this.directlySetCurrentUser(null)}return(_assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===V._redirectEventId)?this.directlySetCurrentUser(V):this.reloadAndSetCurrentUserOrClear(V)}async tryRedirectSignIn(h){let d=null;try{d=await this._popupRedirectResolver._completeRedirectFn(this,h,!0)}catch(h){await this._setRedirectUser(null)}return d}async reloadAndSetCurrentUserOrClear(h){try{await _reloadWithoutSaving(h)}catch(h){if((null==h?void 0:h.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(h)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;let h=navigator;return h.languages&&h.languages[0]||h.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(h){let d=h?(0,ee.m9)(h):null;return d&&_assert(d.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(d&&d._clone(this))}async _updateCurrentUser(h,d=!1){if(!this._deleted)return h&&_assert(this.tenantId===h.tenantId,this,"tenant-id-mismatch"),d||await this.beforeStateQueue.runMiddleware(h),this.queue(async()=>{await this.directlySetCurrentUser(h),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(h){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(h))})}async initializeRecaptchaConfig(){let h=await getRecaptchaConfig(this,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),d=new RecaptchaConfig(h);if(null==this.tenantId?this._agentRecaptchaConfig=d:this._tenantRecaptchaConfigs[this.tenantId]=d,d.emailPasswordEnabled){let h=new RecaptchaEnterpriseVerifier(this);h.verify()}}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new ee.LL("auth","Firebase",h())}onAuthStateChanged(h,d,_){return this.registerStateListener(this.authStateSubscription,h,d,_)}beforeAuthStateChanged(h,d){return this.beforeStateQueue.pushCallback(h,d)}onIdTokenChanged(h,d,_){return this.registerStateListener(this.idTokenSubscription,h,d,_)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}async _setRedirectUser(h,d){let _=await this.getOrInitRedirectPersistenceManager(d);return null===h?_.removeCurrentUser():_.setCurrentUser(h)}async getOrInitRedirectPersistenceManager(h){if(!this.redirectPersistenceManager){let d=h&&_getInstance(h)||this._popupRedirectResolver;_assert(d,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(d._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(h){var d,_;return(this._isInitialized&&await this.queue(async()=>{}),(null===(d=this._currentUser)||void 0===d?void 0:d._redirectEventId)===h)?this._currentUser:(null===(_=this.redirectUser)||void 0===_?void 0:_._redirectEventId)===h?this.redirectUser:null}async _persistUserIfCurrent(h){if(h===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(h))}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,d;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let _=null!==(d=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==d?d:null;this.lastNotifiedUid!==_&&(this.lastNotifiedUid=_,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,d,_,V){if(this._deleted)return()=>{};let ee="function"==typeof d?d:d.next.bind(d),er=this._isInitialized?Promise.resolve():this._initializationPromise;return(_assert(er,this,"internal-error"),er.then(()=>ee(this.currentUser)),"function"==typeof d)?h.addObserver(d,_,V):h.addObserver(d)}async directlySetCurrentUser(h){this.currentUser&&this.currentUser!==h&&this._currentUser._stopProactiveRefresh(),h&&this.isProactiveRefreshEnabled&&h._startProactiveRefresh(),this.currentUser=h,h?await this.assertedPersistence.setCurrentUser(h):await this.assertedPersistence.removeCurrentUser()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var h;let d={"X-Client-Version":this.clientVersion};this.app.options.appId&&(d["X-Firebase-gmpid"]=this.app.options.appId);let _=await (null===(h=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getHeartbeatsHeader());_&&(d["X-Firebase-Client"]=_);let V=await this._getAppCheckToken();return V&&(d["X-Firebase-AppCheck"]=V),d}async _getAppCheckToken(){var h;let d=await (null===(h=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===h?void 0:h.getToken());return(null==d?void 0:d.error)&&function(h,...d){ep.logLevel<=eo.in.WARN&&ep.warn(`Auth (${er.Jn}): ${h}`,...d)}(`Error while retrieving App Check token: ${d.error}`),null==d?void 0:d.token}};function _castAuth(h){return(0,ee.m9)(h)}let Subscription=class Subscription{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,ee.ne)(h=>this.observer=h)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};function extractProtocol(h){let d=h.indexOf(":");return d<0?"":h.substr(0,d+1)}function parsePort(h){if(!h)return null;let d=Number(h);return isNaN(d)?null:d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AuthCredential=class AuthCredential{constructor(h,d){this.providerId=h,this.signInMethod=d}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(h){return debugFail("not implemented")}_linkToIdToken(h,d){return debugFail("not implemented")}_getReauthenticationResolver(h){return debugFail("not implemented")}};async function updateEmailPassword(h,d){return _performApiRequest(h,"POST","/v1/accounts:update",d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithPassword(h,d){return _performSignInRequest(h,"POST","/v1/accounts:signInWithPassword",_addTidIfNecessary(h,d))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithEmailLink$1(h,d){return _performSignInRequest(h,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(h,d))}async function signInWithEmailLinkForLinking(h,d){return _performSignInRequest(h,"POST","/v1/accounts:signInWithEmailLink",_addTidIfNecessary(h,d))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EmailAuthCredential=class EmailAuthCredential extends AuthCredential{constructor(h,d,_,V=null){super("password",_),this._email=h,this._password=d,this._tenantId=V}static _fromEmailAndPassword(h,d){return new EmailAuthCredential(h,d,"password")}static _fromEmailAndCode(h,d,_=null){return new EmailAuthCredential(h,d,"emailLink",_)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){let d="string"==typeof h?JSON.parse(h):h;if((null==d?void 0:d.email)&&(null==d?void 0:d.password)){if("password"===d.signInMethod)return this._fromEmailAndPassword(d.email,d.password);if("emailLink"===d.signInMethod)return this._fromEmailAndCode(d.email,d.password,d.tenantId)}return null}async _getIdTokenResponse(h){var d;switch(this.signInMethod){case"password":let _={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(null===(d=h._getRecaptchaConfig())||void 0===d||!d.emailPasswordEnabled)return signInWithPassword(h,_).catch(async d=>{if("auth/missing-recaptcha-token"!==d.code)return Promise.reject(d);{console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");let d=await injectRecaptchaFields(h,_,"signInWithPassword");return signInWithPassword(h,d)}});{let d=await injectRecaptchaFields(h,_,"signInWithPassword");return signInWithPassword(h,d)}case"emailLink":return signInWithEmailLink$1(h,{email:this._email,oobCode:this._password});default:_fail(h,"internal-error")}}async _linkToIdToken(h,d){switch(this.signInMethod){case"password":return updateEmailPassword(h,{idToken:d,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return signInWithEmailLinkForLinking(h,{idToken:d,email:this._email,oobCode:this._password});default:_fail(h,"internal-error")}}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(h,d){return _performSignInRequest(h,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(h,d))}let OAuthCredential=class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){let d=new OAuthCredential(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(d.idToken=h.idToken),h.accessToken&&(d.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(d.nonce=h.nonce),h.pendingToken&&(d.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(d.accessToken=h.oauthToken,d.secret=h.oauthTokenSecret):_fail("argument-error"),d}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){let d="string"==typeof h?JSON.parse(h):h,{providerId:_,signInMethod:V}=d,ee=__rest(d,["providerId","signInMethod"]);if(!_||!V)return null;let er=new OAuthCredential(_,V);return er.idToken=ee.idToken||void 0,er.accessToken=ee.accessToken||void 0,er.secret=ee.secret,er.nonce=ee.nonce,er.pendingToken=ee.pendingToken||null,er}_getIdTokenResponse(h){let d=this.buildRequest();return signInWithIdp(h,d)}_linkToIdToken(h,d){let _=this.buildRequest();return _.idToken=d,signInWithIdp(h,_)}_getReauthenticationResolver(h){let d=this.buildRequest();return d.autoCreate=!1,signInWithIdp(h,d)}buildRequest(){let h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{let d={};this.idToken&&(d.id_token=this.idToken),this.accessToken&&(d.access_token=this.accessToken),this.secret&&(d.oauth_token_secret=this.secret),d.providerId=this.providerId,this.nonce&&!this.pendingToken&&(d.nonce=this.nonce),h.postBody=(0,ee.xO)(d)}return h}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sendPhoneVerificationCode(h,d){return _performApiRequest(h,"POST","/v1/accounts:sendVerificationCode",_addTidIfNecessary(h,d))}async function signInWithPhoneNumber$1(h,d){return _performSignInRequest(h,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(h,d))}async function linkWithPhoneNumber$1(h,d){let _=await _performSignInRequest(h,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(h,d));if(_.temporaryProof)throw _makeTaggedError(h,"account-exists-with-different-credential",_);return _}let eO={USER_NOT_FOUND:"user-not-found"};async function verifyPhoneNumberForExisting(h,d){let _=Object.assign(Object.assign({},d),{operation:"REAUTH"});return _performSignInRequest(h,"POST","/v1/accounts:signInWithPhoneNumber",_addTidIfNecessary(h,_),eO)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PhoneAuthCredential=class PhoneAuthCredential extends AuthCredential{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,d){return new PhoneAuthCredential({verificationId:h,verificationCode:d})}static _fromTokenResponse(h,d){return new PhoneAuthCredential({phoneNumber:h,temporaryProof:d})}_getIdTokenResponse(h){return signInWithPhoneNumber$1(h,this._makeVerificationRequest())}_linkToIdToken(h,d){return linkWithPhoneNumber$1(h,Object.assign({idToken:d},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return verifyPhoneNumberForExisting(h,this._makeVerificationRequest())}_makeVerificationRequest(){let{temporaryProof:h,phoneNumber:d,verificationId:_,verificationCode:V}=this.params;return h&&d?{temporaryProof:h,phoneNumber:d}:{sessionInfo:_,code:V}}toJSON(){let h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));let{verificationId:d,verificationCode:_,phoneNumber:V,temporaryProof:ee}=h;return _||d||V||ee?new PhoneAuthCredential({verificationId:d,verificationCode:_,phoneNumber:V,temporaryProof:ee}):null}};let ActionCodeURL=class ActionCodeURL{constructor(h){var d,_,V,er,eo,ec;let eh=(0,ee.zd)((0,ee.pd)(h)),ep=null!==(d=eh.apiKey)&&void 0!==d?d:null,ef=null!==(_=eh.oobCode)&&void 0!==_?_:null,em=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(h){switch(h){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(V=eh.mode)&&void 0!==V?V:null);_assert(ep&&ef&&em,"argument-error"),this.apiKey=ep,this.operation=em,this.code=ef,this.continueUrl=null!==(er=eh.continueUrl)&&void 0!==er?er:null,this.languageCode=null!==(eo=eh.languageCode)&&void 0!==eo?eo:null,this.tenantId=null!==(ec=eh.tenantId)&&void 0!==ec?ec:null}static parseLink(h){let d=function(h){let d=(0,ee.zd)((0,ee.pd)(h)).link,_=d?(0,ee.zd)((0,ee.pd)(d)).deep_link_id:null,V=(0,ee.zd)((0,ee.pd)(h)).deep_link_id,er=V?(0,ee.zd)((0,ee.pd)(V)).link:null;return er||V||_||d||h}(h);try{return new ActionCodeURL(d)}catch(h){return null}}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EmailAuthProvider=class EmailAuthProvider{constructor(){this.providerId=EmailAuthProvider.PROVIDER_ID}static credential(h,d){return EmailAuthCredential._fromEmailAndPassword(h,d)}static credentialWithLink(h,d){let _=ActionCodeURL.parseLink(d);return _assert(_,"argument-error"),EmailAuthCredential._fromEmailAndCode(h,_.code,_.tenantId)}};EmailAuthProvider.PROVIDER_ID="password",EmailAuthProvider.EMAIL_PASSWORD_SIGN_IN_METHOD="password",EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FederatedAuthProvider=class FederatedAuthProvider{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BaseOAuthProvider=class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FacebookAuthProvider=class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(h){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return FacebookAuthProvider.credentialFromTaggedObject(h)}static credentialFromError(h){return FacebookAuthProvider.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(h.oauthAccessToken)}catch(h){return null}}};FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com",FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GoogleAuthProvider=class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(h,d){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:h,accessToken:d})}static credentialFromResult(h){return GoogleAuthProvider.credentialFromTaggedObject(h)}static credentialFromError(h){return GoogleAuthProvider.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;let{oauthIdToken:d,oauthAccessToken:_}=h;if(!d&&!_)return null;try{return GoogleAuthProvider.credential(d,_)}catch(h){return null}}};GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com",GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let GithubAuthProvider=class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(h){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:h})}static credentialFromResult(h){return GithubAuthProvider.credentialFromTaggedObject(h)}static credentialFromError(h){return GithubAuthProvider.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h||!("oauthAccessToken"in h)||!h.oauthAccessToken)return null;try{return GithubAuthProvider.credential(h.oauthAccessToken)}catch(h){return null}}};GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com",GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let TwitterAuthProvider=class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(h,d){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:h,oauthTokenSecret:d})}static credentialFromResult(h){return TwitterAuthProvider.credentialFromTaggedObject(h)}static credentialFromError(h){return TwitterAuthProvider.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;let{oauthAccessToken:d,oauthTokenSecret:_}=h;if(!d||!_)return null;try{return TwitterAuthProvider.credential(d,_)}catch(h){return null}}};TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com",TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UserCredentialImpl=class UserCredentialImpl{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static async _fromIdTokenResponse(h,d,_,V=!1){let ee=await UserImpl._fromIdTokenResponse(h,_,V),er=providerIdForResponse(_),eo=new UserCredentialImpl({user:ee,providerId:er,_tokenResponse:_,operationType:d});return eo}static async _forOperation(h,d,_){await h._updateTokensIfNecessary(_,!0);let V=providerIdForResponse(_);return new UserCredentialImpl({user:h,providerId:V,_tokenResponse:_,operationType:d})}};function providerIdForResponse(h){return h.providerId?h.providerId:"phoneNumber"in h?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MultiFactorError=class MultiFactorError extends ee.ZR{constructor(h,d,_,V){var ee;super(d.code,d.message),this.operationType=_,this.user=V,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:h.name,tenantId:null!==(ee=h.tenantId)&&void 0!==ee?ee:void 0,_serverResponse:d.customData._serverResponse,operationType:_}}static _fromErrorAndOperation(h,d,_,V){return new MultiFactorError(h,d,_,V)}};function _processCredentialSavingMfaContextIfNecessary(h,d,_,V){let ee="reauthenticate"===d?_._getReauthenticationResolver(h):_._getIdTokenResponse(h);return ee.catch(_=>{if("auth/multi-factor-auth-required"===_.code)throw MultiFactorError._fromErrorAndOperation(h,_,d,V);throw _})}async function _link$1(h,d,_=!1){let V=await _logoutIfInvalidated(h,d._linkToIdToken(h.auth,await h.getIdToken()),_);return UserCredentialImpl._forOperation(h,"link",V)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(h,d,_=!1){let{auth:V}=h,ee="reauthenticate";try{let er=await _logoutIfInvalidated(h,_processCredentialSavingMfaContextIfNecessary(V,ee,d,h),_);_assert(er.idToken,V,"internal-error");let eo=_parseToken(er.idToken);_assert(eo,V,"internal-error");let{sub:ec}=eo;return _assert(h.uid===ec,V,"user-mismatch"),UserCredentialImpl._forOperation(h,ee,er)}catch(h){throw(null==h?void 0:h.code)==="auth/user-not-found"&&_fail(V,"user-mismatch"),h}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(h,d,_=!1){let V="signIn",ee=await _processCredentialSavingMfaContextIfNecessary(h,V,d),er=await UserCredentialImpl._fromIdTokenResponse(h,V,ee);return _||await h._updateCurrentUser(er.user),er}function signOut(h){return(0,ee.m9)(h).signOut()}async function deleteUser(h){return(0,ee.m9)(h).delete()}new WeakMap;let ey="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BrowserPersistenceClass=class BrowserPersistenceClass{constructor(h,d){this.storageRetriever=h,this.type=d}_isAvailable(){try{if(!this.storage)return Promise.resolve(!1);return this.storage.setItem(ey,"1"),this.storage.removeItem(ey),Promise.resolve(!0)}catch(h){return Promise.resolve(!1)}}_set(h,d){return this.storage.setItem(h,JSON.stringify(d)),Promise.resolve()}_get(h){let d=this.storage.getItem(h);return Promise.resolve(d?JSON.parse(d):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}};let BrowserLocalPersistence=class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(h,d)=>this.onStorageEvent(h,d),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(){let h=(0,ee.z$)();return _isSafari(h)||_isIOS(h)}()&&function(){try{return!!(window&&window!==window.top)}catch(h){return!1}}(),this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(h){for(let d of Object.keys(this.listeners)){let _=this.storage.getItem(d),V=this.localCache[d];_!==V&&h(d,V,_)}}onStorageEvent(h,d=!1){if(!h.key){this.forAllChangedKeys((h,d,_)=>{this.notifyListeners(h,_)});return}let _=h.key;if(d?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let V=this.storage.getItem(_);if(h.newValue!==V)null!==h.newValue?this.storage.setItem(_,h.newValue):this.storage.removeItem(_);else if(this.localCache[_]===h.newValue&&!d)return}let triggerListeners=()=>{let h=this.storage.getItem(_);(d||this.localCache[_]!==h)&&this.notifyListeners(_,h)},V=this.storage.getItem(_);(0,ee.w1)()&&10===document.documentMode&&V!==h.newValue&&h.newValue!==h.oldValue?setTimeout(triggerListeners,10):triggerListeners()}notifyListeners(h,d){this.localCache[h]=d;let _=this.listeners[h];if(_)for(let h of Array.from(_))h(d?JSON.parse(d):d)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((h,d,_)=>{this.onStorageEvent(new StorageEvent("storage",{key:h,oldValue:d,newValue:_}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(h,d){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[h]||(this.listeners[h]=new Set,this.localCache[h]=this.storage.getItem(h)),this.listeners[h].add(d)}_removeListener(h,d){this.listeners[h]&&(this.listeners[h].delete(d),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(h,d){await super._set(h,d),this.localCache[h]=JSON.stringify(d)}async _get(h){let d=await super._get(h);return this.localCache[h]=JSON.stringify(d),d}async _remove(h){await super._remove(h),delete this.localCache[h]}};BrowserLocalPersistence.type="LOCAL";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BrowserSessionPersistence=class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(h,d){}_removeListener(h,d){}};BrowserSessionPersistence.type="SESSION";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Receiver=class Receiver{constructor(h){this.eventTarget=h,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(h){let d=this.receivers.find(d=>d.isListeningto(h));if(d)return d;let _=new Receiver(h);return this.receivers.push(_),_}isListeningto(h){return this.eventTarget===h}async handleEvent(h){let{eventId:d,eventType:_,data:V}=h.data,ee=this.handlersMap[_];if(!(null==ee?void 0:ee.size))return;h.ports[0].postMessage({status:"ack",eventId:d,eventType:_});let er=Array.from(ee).map(async d=>d(h.origin,V)),eo=await Promise.all(er.map(async h=>{try{let d=await h;return{fulfilled:!0,value:d}}catch(h){return{fulfilled:!1,reason:h}}}));h.ports[0].postMessage({status:"done",eventId:d,eventType:_,response:eo})}_subscribe(h,d){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[h]||(this.handlersMap[h]=new Set),this.handlersMap[h].add(d)}_unsubscribe(h,d){this.handlersMap[h]&&d&&this.handlersMap[h].delete(d),d&&0!==this.handlersMap[h].size||delete this.handlersMap[h],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(h="",d=10){let _="";for(let h=0;h<d;h++)_+=Math.floor(10*Math.random());return h+_}Receiver.receivers=[];/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sender=class Sender{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}async _send(h,d,_=50){let V,ee;let er="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!er)throw Error("connection_unavailable");return new Promise((eo,ec)=>{let eh=_generateEventId("",20);er.port1.start();let ep=setTimeout(()=>{ec(Error("unsupported_event"))},_);ee={messageChannel:er,onMessage(h){if(h.data.eventId===eh)switch(h.data.status){case"ack":clearTimeout(ep),V=setTimeout(()=>{ec(Error("timeout"))},3e3);break;case"done":clearTimeout(V),eo(h.data.response);break;default:clearTimeout(ep),clearTimeout(V),ec(Error("invalid_response"))}}},this.handlers.add(ee),er.port1.addEventListener("message",ee.onMessage),this.target.postMessage({eventType:h,eventId:eh,data:d},[er.port2])}).finally(()=>{ee&&this.removeMessageHandler(ee)})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return void 0!==_window().WorkerGlobalScope&&"function"==typeof _window().importScripts}async function _getActiveServiceWorker(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{let h=await navigator.serviceWorker.ready;return h.active}catch(h){return null}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ev="firebaseLocalStorageDb",eS="firebaseLocalStorage",e_="fbase_key";let DBPromise=class DBPromise{constructor(h){this.request=h}toPromise(){return new Promise((h,d)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{d(this.request.error)})})}};function getObjectStore(h,d){return h.transaction([eS],d?"readwrite":"readonly").objectStore(eS)}function _openDatabase(){let h=indexedDB.open(ev,1);return new Promise((d,_)=>{h.addEventListener("error",()=>{_(h.error)}),h.addEventListener("upgradeneeded",()=>{let d=h.result;try{d.createObjectStore(eS,{keyPath:e_})}catch(h){_(h)}}),h.addEventListener("success",async()=>{let _=h.result;_.objectStoreNames.contains(eS)?d(_):(_.close(),await function(){let h=indexedDB.deleteDatabase(ev);return new DBPromise(h).toPromise()}(),d(await _openDatabase()))})})}async function _putObject(h,d,_){let V=getObjectStore(h,!0).put({[e_]:d,value:_});return new DBPromise(V).toPromise()}async function getObject(h,d){let _=getObjectStore(h,!1).get(d),V=await new DBPromise(_).toPromise();return void 0===V?null:V.value}function _deleteObject(h,d){let _=getObjectStore(h,!0).delete(d);return new DBPromise(_).toPromise()}let IndexedDBLocalPersistence=class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await _openDatabase()),this.db}async _withRetries(h){let d=0;for(;;)try{let d=await this._openDb();return await h(d)}catch(h){if(d++>3)throw h;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_isWorker()?self:null),this.receiver._subscribe("keyChanged",async(h,d)=>{let _=await this._poll();return{keyProcessed:_.includes(d.key)}}),this.receiver._subscribe("ping",async(h,d)=>["keyChanged"])}async initializeSender(){var h,d;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);let _=await this.sender._send("ping",{},800);_&&(null===(h=_[0])||void 0===h?void 0:h.fulfilled)&&(null===(d=_[0])||void 0===d?void 0:d.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(h){var d;if(this.sender&&this.activeServiceWorker&&((null===(d=null==navigator?void 0:navigator.serviceWorker)||void 0===d?void 0:d.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:h},this.serviceWorkerReceiverAvailable?800:50)}catch(h){}}async _isAvailable(){try{if(!indexedDB)return!1;let h=await _openDatabase();return await _putObject(h,ey,"1"),await _deleteObject(h,ey),!0}catch(h){}return!1}async _withPendingWrite(h){this.pendingWrites++;try{await h()}finally{this.pendingWrites--}}async _set(h,d){return this._withPendingWrite(async()=>(await this._withRetries(_=>_putObject(_,h,d)),this.localCache[h]=d,this.notifyServiceWorker(h)))}async _get(h){let d=await this._withRetries(d=>getObject(d,h));return this.localCache[h]=d,d}async _remove(h){return this._withPendingWrite(async()=>(await this._withRetries(d=>_deleteObject(d,h)),delete this.localCache[h],this.notifyServiceWorker(h)))}async _poll(){let h=await this._withRetries(h=>{let d=getObjectStore(h,!1).getAll();return new DBPromise(d).toPromise()});if(!h||0!==this.pendingWrites)return[];let d=[],_=new Set;for(let{fbase_key:V,value:ee}of h)_.add(V),JSON.stringify(this.localCache[V])!==JSON.stringify(ee)&&(this.notifyListeners(V,ee),d.push(V));for(let h of Object.keys(this.localCache))this.localCache[h]&&!_.has(h)&&(this.notifyListeners(h,null),d.push(h));return d}notifyListeners(h,d){this.localCache[h]=d;let _=this.listeners[h];if(_)for(let h of Array.from(_))h(d)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(h,d){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[h]||(this.listeners[h]=new Set,this._get(h)),this.listeners[h].add(d)}_removeListener(h,d){this.listeners[h]&&(this.listeners[h].delete(d),0===this.listeners[h].size&&delete this.listeners[h]),0===Object.keys(this.listeners).length&&this.stopPolling()}};async function _verifyPhoneNumber(h,d,_){var V,ee,er;let eo=await _.verify();try{let ec;if(_assert("string"==typeof eo,h,"argument-error"),_assert("recaptcha"===_.type,h,"argument-error"),ec="string"==typeof d?{phoneNumber:d}:d,"session"in ec){let d=ec.session;if("phoneNumber"in ec){_assert("enroll"===d.type,h,"internal-error");let _=await (ee={idToken:d.credential,phoneEnrollmentInfo:{phoneNumber:ec.phoneNumber,recaptchaToken:eo}},_performApiRequest(h,"POST","/v2/accounts/mfaEnrollment:start",_addTidIfNecessary(h,ee)));return _.phoneSessionInfo.sessionInfo}{_assert("signin"===d.type,h,"internal-error");let _=(null===(V=ec.multiFactorHint)||void 0===V?void 0:V.uid)||ec.multiFactorUid;_assert(_,h,"missing-multi-factor-info");let ee=await (er={mfaPendingCredential:d.credential,mfaEnrollmentId:_,phoneSignInInfo:{recaptchaToken:eo}},_performApiRequest(h,"POST","/v2/accounts/mfaSignIn:start",_addTidIfNecessary(h,er)));return ee.phoneResponseInfo.sessionInfo}}{let{sessionInfo:d}=await sendPhoneVerificationCode(h,{phoneNumber:ec.phoneNumber,recaptchaToken:eo});return d}}finally{_._reset()}}IndexedDBLocalPersistence.type="LOCAL",_generateCallbackName("rcb"),new Delay(3e4,6e4);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let PhoneAuthProvider=class PhoneAuthProvider{constructor(h){this.providerId=PhoneAuthProvider.PROVIDER_ID,this.auth=_castAuth(h)}verifyPhoneNumber(h,d){return _verifyPhoneNumber(this.auth,h,(0,ee.m9)(d))}static credential(h,d){return PhoneAuthCredential._fromVerification(h,d)}static credentialFromResult(h){return PhoneAuthProvider.credentialFromTaggedObject(h)}static credentialFromError(h){return PhoneAuthProvider.credentialFromTaggedObject(h.customData||{})}static credentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;let{phoneNumber:d,temporaryProof:_}=h;return d&&_?PhoneAuthCredential._fromTokenResponse(d,_):null}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(h,d){return d?_getInstance(d):(_assert(h._popupRedirectResolver,h,"argument-error"),h._popupRedirectResolver)}PhoneAuthProvider.PROVIDER_ID="phone",PhoneAuthProvider.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let IdpCredential=class IdpCredential extends AuthCredential{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return signInWithIdp(h,this._buildIdpRequest())}_linkToIdToken(h,d){return signInWithIdp(h,this._buildIdpRequest(d))}_getReauthenticationResolver(h){return signInWithIdp(h,this._buildIdpRequest())}_buildIdpRequest(h){let d={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(d.idToken=h),d}};function _signIn(h){return _signInWithCredential(h.auth,new IdpCredential(h),h.bypassAuthState)}function _reauth(h){let{auth:d,user:_}=h;return _assert(_,d,"internal-error"),_reauthenticate(_,new IdpCredential(h),h.bypassAuthState)}async function _link(h){let{auth:d,user:_}=h;return _assert(_,d,"internal-error"),_link$1(_,new IdpCredential(h),h.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AbstractPopupRedirectOperation=class AbstractPopupRedirectOperation{constructor(h,d,_,V,ee=!1){this.auth=h,this.resolver=_,this.user=V,this.bypassAuthState=ee,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(d)?d:[d]}execute(){return new Promise(async(h,d)=>{this.pendingPromise={resolve:h,reject:d};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(h){this.reject(h)}})}async onAuthEvent(h){let{urlResponse:d,sessionId:_,postBody:V,tenantId:ee,error:er,type:eo}=h;if(er){this.reject(er);return}let ec={auth:this.auth,requestUri:d,sessionId:_,tenantId:ee||void 0,postBody:V||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(eo)(ec))}catch(h){this.reject(h)}}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(h){this.pendingPromise||debugFail("Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){this.pendingPromise||debugFail("Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ew=new Delay(2e3,1e4);async function signInWithPopup(h,d,_){let V=_castAuth(h);_assertInstanceOf(h,d,FederatedAuthProvider);let ee=_withDefaultResolver(V,_),er=new PopupOperation(V,"signInViaPopup",d,ee);return er.executeNotNull()}async function reauthenticateWithPopup(h,d,_){let V=(0,ee.m9)(h);_assertInstanceOf(V.auth,d,FederatedAuthProvider);let er=_withDefaultResolver(V.auth,_),eo=new PopupOperation(V.auth,"reauthViaPopup",d,er,V);return eo.executeNotNull()}let PopupOperation=class PopupOperation extends AbstractPopupRedirectOperation{constructor(h,d,_,V,ee){super(h,d,V,ee),this.provider=_,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){let h=await this.execute();return _assert(h,this.auth,"internal-error"),h}async onExecution(){1===this.filter.length||debugFail("Popup operations only handle one event");let h=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],h),this.authWindow.associatedEvent=h,this.resolver._originValidation(this.auth).catch(h=>{this.reject(h)}),this.resolver._isIframeWebStorageSupported(this.auth,h=>{h||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var h;return(null===(h=this.authWindow)||void 0===h?void 0:h.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){let poll=()=>{var h,d;if(null===(d=null===(h=this.authWindow)||void 0===h?void 0:h.window)||void 0===d?void 0:d.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(poll,ew.get())};poll()}};PopupOperation.currentPopupAction=null;let ex=new Map;let RedirectAction=class RedirectAction extends AbstractPopupRedirectOperation{constructor(h,d,_=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],d,void 0,_),this.eventId=null}async execute(){let h=ex.get(this.auth._key());if(!h){try{let d=await _getAndClearPendingRedirectStatus(this.resolver,this.auth),_=d?await super.execute():null;h=()=>Promise.resolve(_)}catch(d){h=()=>Promise.reject(d)}ex.set(this.auth._key(),h)}return this.bypassAuthState||ex.set(this.auth._key(),()=>Promise.resolve(null)),h()}async onAuthEvent(h){if("signInViaRedirect"===h.type)return super.onAuthEvent(h);if("unknown"===h.type){this.resolve(null);return}if(h.eventId){let d=await this.auth._redirectUserForId(h.eventId);if(d)return this.user=d,super.onAuthEvent(h);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function _getAndClearPendingRedirectStatus(h,d){let _=_persistenceKeyName("pendingRedirect",d.config.apiKey,d.name),V=_getInstance(h._redirectPersistence);if(!await V._isAvailable())return!1;let ee=await V._get(_)==="true";return await V._remove(_),ee}function _overrideRedirectResult(h,d){ex.set(h._key(),d)}async function _getRedirectResult(h,d,_=!1){let V=_castAuth(h),ee=_withDefaultResolver(V,d),er=new RedirectAction(V,ee,_),eo=await er.execute();return eo&&!_&&(delete eo.user._redirectEventId,await V._persistUserIfCurrent(eo.user),await V._setRedirectUser(null,d)),eo}let AuthEventManager=class AuthEventManager{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let d=!1;return this.consumers.forEach(_=>{this.isEventForConsumer(h,_)&&(d=!0,this.sendToConsumer(h,_),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function(h){switch(h.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(h);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,d||(this.queuedRedirectEvent=h,d=!0)),d}sendToConsumer(h,d){var _;if(h.error&&!isNullRedirectEvent(h)){let V=(null===(_=h.error.code)||void 0===_?void 0:_.split("auth/")[1])||"internal-error";d.onError(_createError(this.auth,V))}else d.onAuthEvent(h)}isEventForConsumer(h,d){let _=null===d.eventId||!!h.eventId&&h.eventId===d.eventId;return d.filter.includes(h.type)&&_}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(h))}saveEventToCache(h){this.cachedEventUids.add(eventUid(h)),this.lastProcessedEventTime=Date.now()}};function eventUid(h){return[h.type,h.eventId,h.sessionId,h.tenantId].filter(h=>h).join("-")}function isNullRedirectEvent({type:h,error:d}){return"unknown"===h&&(null==d?void 0:d.code)==="auth/no-auth-event"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(h,d={}){return _performApiRequest(h,"GET","/v1/projects",d)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ek=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eT=/^https?/;async function _validateOrigin(h){if(h.config.emulator)return;let{authorizedDomains:d}=await _getProjectConfig(h);for(let h of d)try{if(function(h){let d=_getCurrentUrl(),{protocol:_,hostname:V}=new URL(d);if(h.startsWith("chrome-extension://")){let ee=new URL(h);return""===ee.hostname&&""===V?"chrome-extension:"===_&&h.replace("chrome-extension://","")===d.replace("chrome-extension://",""):"chrome-extension:"===_&&ee.hostname===V}if(!eT.test(_))return!1;if(ek.test(h))return V===h;let ee=h.replace(/\./g,"\\."),er=RegExp("^(.+\\."+ee+"|"+ee+")$","i");return er.test(V)}(h))return}catch(h){}_fail(h,"unauthorized-domain")}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eE=new Delay(3e4,6e4);function resetUnloadedGapiModules(){let h=_window().___jsl;if(null==h?void 0:h.H){for(let d of Object.keys(h.H))if(h.H[d].r=h.H[d].r||[],h.H[d].L=h.H[d].L||[],h.H[d].r=[...h.H[d].L],h.CP)for(let d=0;d<h.CP.length;d++)h.CP[d]=null}}let eC=null,eP=new Delay(5e3,15e3),eI={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);async function _openIframe(h){let d=await (eC=eC||new Promise((d,_)=>{var V,ee,er;function loadGapiIframe(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{d(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),_(_createError(h,"network-request-failed"))},timeout:eE.get()})}if(null===(ee=null===(V=_window().gapi)||void 0===V?void 0:V.iframes)||void 0===ee?void 0:ee.Iframe)d(gapi.iframes.getContext());else if(null===(er=_window().gapi)||void 0===er?void 0:er.load)loadGapiIframe();else{let d=_generateCallbackName("iframefcb");return _window()[d]=()=>{gapi.load?loadGapiIframe():_(_createError(h,"network-request-failed"))},_loadJS(`https://apis.google.com/js/api.js?onload=${d}`).catch(h=>_(h))}}).catch(h=>{throw eC=null,h})),_=_window().gapi;return _assert(_,h,"internal-error"),d.open({where:document.body,url:function(h){let d=h.config;_assert(d.authDomain,h,"auth-domain-config-required");let _=d.emulator?_emulatorUrl(d,"emulator/auth/iframe"):`https://${h.config.authDomain}/__/auth/iframe`,V={apiKey:d.apiKey,appName:h.name,v:er.Jn},eo=eR.get(h.config.apiHost);eo&&(V.eid=eo);let ec=h._getFrameworks();return ec.length&&(V.fw=ec.join(",")),`${_}?${(0,ee.xO)(V).slice(1)}`}(h),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:eI,dontclear:!0},d=>new Promise(async(_,V)=>{await d.restyle({setHideOnLeave:!1});let ee=_createError(h,"network-request-failed"),er=_window().setTimeout(()=>{V(ee)},eP.get());function clearTimerAndResolve(){_window().clearTimeout(er),_(d)}d.ping(clearTimerAndResolve).then(clearTimerAndResolve,()=>{V(ee)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eA={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};let AuthPopup=class AuthPopup{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(h){}}};let e$=encodeURIComponent("fac");async function _getRedirectUrl(h,d,_,V,eo,ec){_assert(h.config.authDomain,h,"auth-domain-config-required"),_assert(h.config.apiKey,h,"invalid-api-key");let eh={apiKey:h.config.apiKey,appName:h.name,authType:_,redirectUrl:V,v:er.Jn,eventId:eo};if(d instanceof FederatedAuthProvider)for(let[_,V]of(d.setDefaultLanguage(h.languageCode),eh.providerId=d.providerId||"",(0,ee.xb)(d.getCustomParameters())||(eh.customParameters=JSON.stringify(d.getCustomParameters())),Object.entries(ec||{})))eh[_]=V;if(d instanceof BaseOAuthProvider){let h=d.getScopes().filter(h=>""!==h);h.length>0&&(eh.scopes=h.join(","))}for(let d of(h.tenantId&&(eh.tid=h.tenantId),Object.keys(eh)))void 0===eh[d]&&delete eh[d];let ep=await h._getAppCheckToken(),ef=ep?`#${e$}=${encodeURIComponent(ep)}`:"";return`${function({config:h}){return h.emulator?_emulatorUrl(h,"emulator/auth/handler"):`https://${h.authDomain}/__/auth/handler`}(h)}?${(0,ee.xO)(eh).slice(1)}${ef}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eN="webStorageSupport",eM=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=BrowserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(h,d,_,V){var er;(null===(er=this.eventManagers[h._key()])||void 0===er?void 0:er.manager)||debugFail("_initialize() not called before _openPopup()");let eo=await _getRedirectUrl(h,d,_,_getCurrentUrl(),V);return function(h,d,_,V=500,er=600){let eo=Math.max((window.screen.availHeight-er)/2,0).toString(),ec=Math.max((window.screen.availWidth-V)/2,0).toString(),eh="",ep=Object.assign(Object.assign({},eA),{width:V.toString(),height:er.toString(),top:eo,left:ec}),ef=(0,ee.z$)().toLowerCase();_&&(eh=_isChromeIOS(ef)?"_blank":_),_isFirefox(ef)&&(d=d||"http://localhost",ep.scrollbars="yes");let em=Object.entries(ep).reduce((h,[d,_])=>`${h}${d}=${_},`,"");if(function(h=(0,ee.z$)()){var d;return _isIOS(h)&&!!(null===(d=window.navigator)||void 0===d?void 0:d.standalone)}(ef)&&"_self"!==eh)return function(h,d){let _=document.createElement("a");_.href=h,_.target=d;let V=document.createEvent("MouseEvent");V.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(V)}(d||"",eh),new AuthPopup(null);let eg=window.open(d||"",eh,em);_assert(eg,h,"popup-blocked");try{eg.focus()}catch(h){}return new AuthPopup(eg)}(h,eo,_generateEventId())}async _openRedirect(h,d,_,V){await this._originValidation(h);let ee=await _getRedirectUrl(h,d,_,_getCurrentUrl(),V);return _window().location.href=ee,new Promise(()=>{})}_initialize(h){let d=h._key();if(this.eventManagers[d]){let{manager:h,promise:_}=this.eventManagers[d];return h?Promise.resolve(h):(_||debugFail("If manager is not set, promise should be"),_)}let _=this.initAndGetManager(h);return this.eventManagers[d]={promise:_},_.catch(()=>{delete this.eventManagers[d]}),_}async initAndGetManager(h){let d=await _openIframe(h),_=new AuthEventManager(h);return d.register("authEvent",d=>{_assert(null==d?void 0:d.authEvent,h,"invalid-auth-event");let V=_.onEvent(d.authEvent);return{status:V?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[h._key()]={manager:_},this.iframes[h._key()]=d,_}_isIframeWebStorageSupported(h,d){let _=this.iframes[h._key()];_.send(eN,{type:eN},_=>{var V;let ee=null===(V=null==_?void 0:_[0])||void 0===V?void 0:V[eN];void 0!==ee&&d(!!ee),_fail(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){let d=h._key();return this.originValidationPromises[d]||(this.originValidationPromises[d]=_validateOrigin(h)),this.originValidationPromises[d]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}};let MultiFactorAssertionImpl=class MultiFactorAssertionImpl{constructor(h){this.factorId=h}_process(h,d,_){switch(d.type){case"enroll":return this._finalizeEnroll(h,d.credential,_);case"signin":return this._finalizeSignIn(h,d.credential);default:return debugFail("unexpected MultiFactorSessionType")}}};let PhoneMultiFactorAssertionImpl=class PhoneMultiFactorAssertionImpl extends MultiFactorAssertionImpl{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new PhoneMultiFactorAssertionImpl(h)}_finalizeEnroll(h,d,_){return _performApiRequest(h,"POST","/v2/accounts/mfaEnrollment:finalize",_addTidIfNecessary(h,{idToken:d,displayName:_,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}_finalizeSignIn(h,d){return _performApiRequest(h,"POST","/v2/accounts/mfaSignIn:finalize",_addTidIfNecessary(h,{mfaPendingCredential:d,phoneVerificationInfo:this.credential._makeVerificationRequest()}))}};let TotpMultiFactorAssertionImpl=class TotpMultiFactorAssertionImpl extends MultiFactorAssertionImpl{constructor(h,d,_){super("totp"),this.otp=h,this.enrollmentId=d,this.secret=_}static _fromSecret(h,d){return new TotpMultiFactorAssertionImpl(d,void 0,h)}static _fromEnrollmentId(h,d){return new TotpMultiFactorAssertionImpl(d,h)}async _finalizeEnroll(h,d,_){return _assert(void 0!==this.secret,h,"argument-error"),_performApiRequest(h,"POST","/v2/accounts/mfaEnrollment:finalize",_addTidIfNecessary(h,{idToken:d,displayName:_,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)}))}async _finalizeSignIn(h,d){_assert(void 0!==this.enrollmentId&&void 0!==this.otp,h,"argument-error");let _={verificationCode:this.otp};return _performApiRequest(h,"POST","/v2/accounts/mfaSignIn:finalize",_addTidIfNecessary(h,{mfaPendingCredential:d,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:_}))}};let TotpSecret=class TotpSecret{constructor(h,d,_,V,ee,er,eo){this.sessionInfo=er,this.auth=eo,this.secretKey=h,this.hashingAlgorithm=d,this.codeLength=_,this.codeIntervalSeconds=V,this.enrollmentCompletionDeadline=ee}static _fromStartTotpMfaEnrollmentResponse(h,d){return new TotpSecret(h.totpSessionInfo.sharedSecretKey,h.totpSessionInfo.hashingAlgorithm,h.totpSessionInfo.verificationCodeLength,h.totpSessionInfo.periodSec,new Date(h.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),h.totpSessionInfo.sessionInfo,d)}_makeTotpVerificationInfo(h){return{sessionInfo:this.sessionInfo,verificationCode:h}}generateQrCodeUrl(h,d){var _;let V=!1;return(_isEmptyString(h)||_isEmptyString(d))&&(V=!0),V&&(_isEmptyString(h)&&(h=(null===(_=this.auth.currentUser)||void 0===_?void 0:_.email)||"unknownuser"),_isEmptyString(d)&&(d=this.auth.name)),`otpauth://totp/${d}:${h}?secret=${this.secretKey}&issuer=${d}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}};function _isEmptyString(h){return void 0===h||(null==h?void 0:h.length)===0}var eQ="@firebase/auth",eD="0.23.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AuthInterop=class AuthInterop{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}async getToken(h){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;let d=await this.auth.currentUser.getIdToken(h);return{accessToken:d}}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;let d=this.auth.onIdTokenChanged(d=>{h((null==d?void 0:d.stsTokenManager.accessToken)||null)});this.internalListeners.set(h,d),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();let d=this.internalListeners.get(h);d&&(this.internalListeners.delete(h),d(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};let ej=(0,ee.Pz)("authIdTokenMaxAge")||300,eL=null,mintCookieFactory=h=>async d=>{let _=d&&await d.getIdTokenResult(),V=_&&(new Date().getTime()-Date.parse(_.issuedAtTime))/1e3;if(V&&V>ej)return;let ee=null==_?void 0:_.token;eL!==ee&&(eL=ee,await fetch(h,{method:ee?"POST":"DELETE",headers:ee?{Authorization:`Bearer ${ee}`}:{}}))};function getAuth(h=(0,er.Mq)()){let d=(0,er.qX)(h,"auth");if(d.isInitialized())return d.getImmediate();let _=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(h,d){let _=(0,er.qX)(h,"auth");if(_.isInitialized()){let h=_.getImmediate(),V=_.getOptions();if((0,ee.vZ)(V,null!=d?d:{}))return h;_fail(h,"already-initialized")}let V=_.initialize({options:d});return V}(h,{popupRedirectResolver:eM,persistence:[IndexedDBLocalPersistence,BrowserLocalPersistence,BrowserSessionPersistence]}),V=(0,ee.Pz)("authTokenSyncURL");if(V){let h=mintCookieFactory(V);(0,ee.m9)(_).beforeAuthStateChanged(h,()=>h(_.currentUser)),(0,ee.m9)(_).onIdTokenChanged(d=>h(d),void 0,void 0)}let eo=(0,ee.q4)("auth");return eo&&function(h,d,_){let V=_castAuth(h);_assert(V._canInitEmulator,V,"emulator-config-failed"),_assert(/^https?:\/\//.test(d),V,"invalid-emulator-scheme");let ee=!!(null==_?void 0:_.disableWarnings),er=extractProtocol(d),{host:eo,port:ec}=function(h){let d=extractProtocol(h),_=/(\/\/)?([^?#/]+)/.exec(h.substr(d.length));if(!_)return{host:"",port:null};let V=_[2].split("@").pop()||"",ee=/^(\[[^\]]+\])(:|$)/.exec(V);if(ee){let h=ee[1];return{host:h,port:parsePort(V.substr(h.length+1))}}{let[h,d]=V.split(":");return{host:h,port:parsePort(d)}}}(d),eh=null===ec?"":`:${ec}`;V.config.emulator={url:`${er}//${eo}${eh}/`},V.settings.appVerificationDisabledForTesting=!0,V.emulatorConfig=Object.freeze({host:eo,port:ec,protocol:er.replace(":",""),options:Object.freeze({disableWarnings:ee})}),ee||function(){function attachBanner(){let h=document.createElement("p"),d=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",d.position="fixed",d.width="100%",d.backgroundColor="#ffffff",d.border=".1em solid #000000",d.color="#b50000",d.bottom="0px",d.left="0px",d.margin="0px",d.zIndex="10000",d.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",attachBanner):attachBanner())}()}(_,`http://${eo}`),_}V="Browser",(0,er.Xd)(new ec.wA("auth",(h,{options:d})=>{let _=h.getProvider("app").getImmediate(),ee=h.getProvider("heartbeat"),er=h.getProvider("app-check-internal"),{apiKey:eo,authDomain:ec}=_.options;_assert(eo&&!eo.includes(":"),"invalid-api-key",{appName:_.name});let eh={apiKey:eo,authDomain:ec,clientPlatform:V,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(V)},ep=new AuthImpl(_,ee,er,eh);return function(h,d){let _=(null==d?void 0:d.persistence)||[],V=(Array.isArray(_)?_:[_]).map(_getInstance);(null==d?void 0:d.errorMap)&&h._updateErrorMap(d.errorMap),h._initializeWithPersistence(V,null==d?void 0:d.popupRedirectResolver)}(ep,d),ep},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,d,_)=>{let V=h.getProvider("auth-internal");V.initialize()})),(0,er.Xd)(new ec.wA("auth-internal",h=>{let d=_castAuth(h.getProvider("auth").getImmediate());return new AuthInterop(d)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,er.KN)(eQ,eD,/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(h){switch(h){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(V)),(0,er.KN)(eQ,eD,"esm2017")},6008:function(h,d,_){"use strict";_.d(d,{ET:function(){return pf},hJ:function(){return _h},oe:function(){return yf},JU:function(){return gh},Jm:function(){return Gh},QT:function(){return af},PL:function(){return df},ad:function(){return Ph},nP:function(){return zf},cf:function(){return If},Xo:function(){return xl},IO:function(){return Rl},Bt:function(){return Gf},pl:function(){return mf},r7:function(){return gf},ar:function(){return bl}});var V,ee,er,eo,ec,eh,ep,ef=_(1453),em=_(2044),eg=_(6872),eO=_(4444),ey="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==_.g?_.g:"undefined"!=typeof self?self:{},ev={},eS=eS||{},e_=ey||self;function aa(h){var d=typeof h;return"array"==(d="object"!=d?d:h?Array.isArray(h)?"array":d:"null")||"object"==d&&"number"==typeof h.length}function p(h){var d=typeof h;return"object"==d&&null!=h||"function"==d}function ea(h,d,_){return h.call.apply(h.bind,arguments)}function fa(h,d,_){if(!h)throw Error();if(2<arguments.length){var V=Array.prototype.slice.call(arguments,2);return function(){var _=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(_,V),h.apply(d,_)}}return function(){return h.apply(d,arguments)}}function q(h,d,_){return(q=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ea:fa).apply(null,arguments)}function ha(h,d){var _=Array.prototype.slice.call(arguments,1);return function(){var d=_.slice();return d.push.apply(d,arguments),h.apply(this,d)}}function r(h,d){function c(){}c.prototype=d.prototype,h.$=d.prototype,h.prototype=new c,h.prototype.constructor=h,h.ac=function(h,_,V){for(var ee=Array(arguments.length-2),er=2;er<arguments.length;er++)ee[er-2]=arguments[er];return d.prototype[_].apply(h,ee)}}function v(){this.s=this.s,this.o=this.o}v.prototype.s=!1,v.prototype.sa=function(){this.s||(this.s=!0,this.N())},v.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};let ew=Array.prototype.indexOf?function(h,d){return Array.prototype.indexOf.call(h,d,void 0)}:function(h,d){if("string"==typeof h)return"string"!=typeof d||1!=d.length?-1:h.indexOf(d,0);for(let _=0;_<h.length;_++)if(_ in h&&h[_]===d)return _;return -1};function ma(h){let d=h.length;if(0<d){let _=Array(d);for(let V=0;V<d;V++)_[V]=h[V];return _}return[]}function na(h,d){for(let d=1;d<arguments.length;d++){let _=arguments[d];if(aa(_)){let d=h.length||0,V=_.length||0;h.length=d+V;for(let ee=0;ee<V;ee++)h[d+ee]=_[ee]}else h.push(_)}}function w(h,d){this.type=h,this.g=this.target=d,this.defaultPrevented=!1}w.prototype.h=function(){this.defaultPrevented=!0};var ex=function(){if(!e_.addEventListener||!Object.defineProperty)return!1;var h=!1,d=Object.defineProperty({},"passive",{get:function(){h=!0}});try{e_.addEventListener("test",()=>{},d),e_.removeEventListener("test",()=>{},d)}catch(h){}return h}();function x(h){return/^[\s\xa0]*$/.test(h)}function pa(){var h=e_.navigator;return h&&(h=h.userAgent)?h:""}function y(h){return -1!=pa().indexOf(h)}function qa(h){return qa[" "](h),h}qa[" "]=function(){};var ek=y("Opera"),eT=y("Trident")||y("MSIE"),eE=y("Edge"),eC=eE||eT,eP=y("Gecko")&&!(-1!=pa().toLowerCase().indexOf("webkit")&&!y("Edge"))&&!(y("Trident")||y("MSIE"))&&!y("Edge"),eI=-1!=pa().toLowerCase().indexOf("webkit")&&!y("Edge");function ya(){var h=e_.document;return h?h.documentMode:void 0}e:{var eR,eA="",e$=(eR=pa(),eP?/rv:([^\);]+)(\)|;)/.exec(eR):eE?/Edge\/([\d\.]+)/.exec(eR):eT?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(eR):eI?/WebKit\/(\S+)/.exec(eR):ek?/(?:Version)[ \/]?(\S+)/.exec(eR):void 0);if(e$&&(eA=e$?e$[1]:""),eT){var eN=ya();if(null!=eN&&eN>parseFloat(eA)){ee=String(eN);break e}}ee=eA}var eM=e_.document&&eT&&(ya()||parseInt(ee,10))||void 0;function A(h,d){if(w.call(this,h?h.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,h){var _=this.type=h.type,V=h.changedTouches&&h.changedTouches.length?h.changedTouches[0]:null;if(this.target=h.target||h.srcElement,this.g=d,d=h.relatedTarget){if(eP){e:{try{qa(d.nodeName);var ee=!0;break e}catch(h){}ee=!1}ee||(d=null)}}else"mouseover"==_?d=h.fromElement:"mouseout"==_&&(d=h.toElement);this.relatedTarget=d,V?(this.clientX=void 0!==V.clientX?V.clientX:V.pageX,this.clientY=void 0!==V.clientY?V.clientY:V.pageY,this.screenX=V.screenX||0,this.screenY=V.screenY||0):(this.clientX=void 0!==h.clientX?h.clientX:h.pageX,this.clientY=void 0!==h.clientY?h.clientY:h.pageY,this.screenX=h.screenX||0,this.screenY=h.screenY||0),this.button=h.button,this.key=h.key||"",this.ctrlKey=h.ctrlKey,this.altKey=h.altKey,this.shiftKey=h.shiftKey,this.metaKey=h.metaKey,this.pointerId=h.pointerId||0,this.pointerType="string"==typeof h.pointerType?h.pointerType:eQ[h.pointerType]||"",this.state=h.state,this.i=h,h.defaultPrevented&&A.$.h.call(this)}}r(A,w);var eQ={2:"touch",3:"pen",4:"mouse"};A.prototype.h=function(){A.$.h.call(this);var h=this.i;h.preventDefault?h.preventDefault():h.returnValue=!1};var eD="closure_listenable_"+(1e6*Math.random()|0),ej=0;function Ja(h,d,_,V,ee){this.listener=h,this.proxy=null,this.src=d,this.type=_,this.capture=!!V,this.la=ee,this.key=++ej,this.fa=this.ia=!1}function Ka(h){h.fa=!0,h.listener=null,h.proxy=null,h.src=null,h.la=null}function Na(h,d,_){for(let V in h)d.call(_,h[V],V,h)}function Pa(h){let d={};for(let _ in h)d[_]=h[_];return d}let eL="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ra(h,d){let _,V;for(let d=1;d<arguments.length;d++){for(_ in V=arguments[d])h[_]=V[_];for(let d=0;d<eL.length;d++)_=eL[d],Object.prototype.hasOwnProperty.call(V,_)&&(h[_]=V[_])}}function Sa(h){this.src=h,this.g={},this.h=0}function Ua(h,d){var _=d.type;if(_ in h.g){var V,ee=h.g[_],er=ew(ee,d);(V=0<=er)&&Array.prototype.splice.call(ee,er,1),V&&(Ka(d),0==h.g[_].length&&(delete h.g[_],h.h--))}}function Ta(h,d,_,V){for(var ee=0;ee<h.length;++ee){var er=h[ee];if(!er.fa&&er.listener==d&&!!_==er.capture&&er.la==V)return ee}return -1}Sa.prototype.add=function(h,d,_,V,ee){var er=h.toString();(h=this.g[er])||(h=this.g[er]=[],this.h++);var eo=Ta(h,d,V,ee);return -1<eo?(d=h[eo],_||(d.ia=!1)):((d=new Ja(d,this.src,er,!!V,ee)).ia=_,h.push(d)),d};var eF="closure_lm_"+(1e6*Math.random()|0),eZ={};function ab(h,d,_,V,ee,er){if(!d)throw Error("Invalid event type");var eo=p(ee)?!!ee.capture:!!ee,ec=bb(h);if(ec||(h[eF]=ec=new Sa(h)),(_=ec.add(d,_,V,eo,er)).proxy)return _;if(V=function a(h){return eb.call(a.src,a.listener,h)},_.proxy=V,V.src=h,V.listener=_,h.addEventListener)ex||(ee=eo),void 0===ee&&(ee=!1),h.addEventListener(d.toString(),V,ee);else if(h.attachEvent)h.attachEvent(db(d.toString()),V);else if(h.addListener&&h.removeListener)h.addListener(V);else throw Error("addEventListener and attachEvent are unavailable.");return _}function gb(h){if("number"!=typeof h&&h&&!h.fa){var d=h.src;if(d&&d[eD])Ua(d.i,h);else{var _=h.type,V=h.proxy;d.removeEventListener?d.removeEventListener(_,V,h.capture):d.detachEvent?d.detachEvent(db(_),V):d.addListener&&d.removeListener&&d.removeListener(V),(_=bb(d))?(Ua(_,h),0==_.h&&(_.src=null,d[eF]=null)):Ka(h)}}}function db(h){return h in eZ?eZ[h]:eZ[h]="on"+h}function eb(h,d){if(h.fa)h=!0;else{d=new A(d,this);var _=h.listener,V=h.la||h.src;h.ia&&gb(h),h=_.call(V,d)}return h}function bb(h){return(h=h[eF])instanceof Sa?h:null}var eV="__closure_events_fn_"+(1e9*Math.random()>>>0);function $a(h){return"function"==typeof h?h:(h[eV]||(h[eV]=function(d){return h.handleEvent(d)}),h[eV])}function B(){v.call(this),this.i=new Sa(this),this.S=this,this.J=null}function C(h,d){var _,V=h.J;if(V)for(_=[];V;V=V.J)_.push(V);if(h=h.S,V=d.type||d,"string"==typeof d)d=new w(d,h);else if(d instanceof w)d.target=d.target||h;else{var ee=d;Ra(d=new w(V,h),ee)}if(ee=!0,_)for(var er=_.length-1;0<=er;er--){var eo=d.g=_[er];ee=ib(eo,V,!0,d)&&ee}if(ee=ib(eo=d.g=h,V,!0,d)&&ee,ee=ib(eo,V,!1,d)&&ee,_)for(er=0;er<_.length;er++)ee=ib(eo=d.g=_[er],V,!1,d)&&ee}function ib(h,d,_,V){if(!(d=h.i.g[String(d)]))return!0;d=d.concat();for(var ee=!0,er=0;er<d.length;++er){var eo=d[er];if(eo&&!eo.fa&&eo.capture==_){var ec=eo.listener,eh=eo.la||eo.src;eo.ia&&Ua(h.i,eo),ee=!1!==ec.call(eh,V)&&ee}}return ee&&!V.defaultPrevented}r(B,v),B.prototype[eD]=!0,B.prototype.removeEventListener=function(h,d,_,V){!function fb(h,d,_,V,ee){if(Array.isArray(d))for(var er=0;er<d.length;er++)fb(h,d[er],_,V,ee);else(V=p(V)?!!V.capture:!!V,_=$a(_),h&&h[eD])?(h=h.i,(d=String(d).toString())in h.g&&-1<(_=Ta(er=h.g[d],_,V,ee))&&(Ka(er[_]),Array.prototype.splice.call(er,_,1),0==er.length&&(delete h.g[d],h.h--))):h&&(h=bb(h))&&(d=h.g[d.toString()],h=-1,d&&(h=Ta(d,_,V,ee)),(_=-1<h?d[h]:null)&&gb(_))}(this,h,d,_,V)},B.prototype.N=function(){if(B.$.N.call(this),this.i){var h,d=this.i;for(h in d.g){for(var _=d.g[h],V=0;V<_.length;V++)Ka(_[V]);delete d.g[h],d.h--}}this.J=null},B.prototype.O=function(h,d,_,V){return this.i.add(String(h),d,!1,_,V)},B.prototype.P=function(h,d,_,V){return this.i.add(String(h),d,!0,_,V)};var eB=e_.JSON.stringify,eW=new class{constructor(h,d){this.i=h,this.j=d,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}(()=>new pb,h=>h.reset());let pb=class pb{constructor(){this.next=this.g=this.h=null}set(h,d){this.h=h,this.g=d,this.next=null}reset(){this.next=this.g=this.h=null}};let eU,ez=!1,eq=new class{constructor(){this.h=this.g=null}add(h,d){let _=eW.get();_.set(h,d),this.h?this.h.next=_:this.g=_,this.h=_}},vb=()=>{let h=e_.Promise.resolve(void 0);eU=()=>{h.then(ub)}};var ub=()=>{let h;for(var d;h=null,eq.g&&(h=eq.g,eq.g=eq.g.next,eq.g||(eq.h=null),h.next=null),d=h;){try{d.h.call(d.g)}catch(h){!function(h){e_.setTimeout(()=>{throw h},0)}(h)}eW.j(d),100>eW.h&&(eW.h++,d.next=eW.g,eW.g=d)}ez=!1};function wb(h,d){B.call(this),this.h=h||1,this.g=d||e_,this.j=q(this.qb,this),this.l=Date.now()}function xb(h){h.ga=!1,h.T&&(h.g.clearTimeout(h.T),h.T=null)}function yb(h,d,_){if("function"==typeof h)_&&(h=q(h,_));else if(h&&"function"==typeof h.handleEvent)h=q(h.handleEvent,h);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:e_.setTimeout(h,d||0)}r(wb,B),(ep=wb.prototype).ga=!1,ep.T=null,ep.qb=function(){if(this.ga){var h=Date.now()-this.l;0<h&&h<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-h):(this.T&&(this.g.clearTimeout(this.T),this.T=null),C(this,"tick"),this.ga&&(xb(this),this.start()))}},ep.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ep.N=function(){wb.$.N.call(this),xb(this),delete this.g};let Ab=class Ab extends v{constructor(h,d){super(),this.m=h,this.j=d,this.h=null,this.i=!1,this.g=null}l(h){this.h=arguments,this.g?this.i=!0:function zb(h){h.g=yb(()=>{h.g=null,h.i&&(h.i=!1,zb(h))},h.j);let d=h.h;h.h=null,h.m.apply(null,d)}(this)}N(){super.N(),this.g&&(e_.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}};function Bb(h){v.call(this),this.h=h,this.g={}}r(Bb,v);var eX=[];function Db(h,d,_,V){Array.isArray(_)||(_&&(eX[0]=_.toString()),_=eX);for(var ee=0;ee<_.length;ee++){var er=function Ya(h,d,_,V,ee){if(V&&V.once)return function Za(h,d,_,V,ee){if(Array.isArray(d)){for(var er=0;er<d.length;er++)Za(h,d[er],_,V,ee);return null}return _=$a(_),h&&h[eD]?h.P(d,_,p(V)?!!V.capture:!!V,ee):ab(h,d,_,!0,V,ee)}(h,d,_,V,ee);if(Array.isArray(d)){for(var er=0;er<d.length;er++)Ya(h,d[er],_,V,ee);return null}return _=$a(_),h&&h[eD]?h.O(d,_,p(V)?!!V.capture:!!V,ee):ab(h,d,_,!1,V,ee)}(d,_[ee],V||h.handleEvent,!1,h.h||h);if(!er)break;h.g[er.key]=er}}function Fb(h){Na(h.g,function(h,d){this.g.hasOwnProperty(d)&&gb(h)},h),h.g={}}function Gb(){this.g=!0}function D(h,d,_,V){h.info(function(){return"XMLHTTP TEXT ("+d+"): "+function(h,d){if(!h.g)return d;if(!d)return null;try{var _=JSON.parse(d);if(_){for(h=0;h<_.length;h++)if(Array.isArray(_[h])){var V=_[h];if(!(2>V.length)){var ee=V[1];if(Array.isArray(ee)&&!(1>ee.length)){var er=ee[0];if("noop"!=er&&"stop"!=er&&"close"!=er)for(var eo=1;eo<ee.length;eo++)ee[eo]=""}}}}return eB(_)}catch(h){return d}}(h,_)+(V?" "+V:"")})}Bb.prototype.N=function(){Bb.$.N.call(this),Fb(this)},Bb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Gb.prototype.Ea=function(){this.g=!1},Gb.prototype.info=function(){};var eY={},eG=null;function Mb(){return eG=eG||new B}function Nb(h){w.call(this,eY.Ta,h)}function Ob(h){let d=Mb();C(d,new Nb(d))}function Pb(h,d){w.call(this,eY.STAT_EVENT,h),this.stat=d}function F(h){let d=Mb();C(d,new Pb(d,h))}function Qb(h,d){w.call(this,eY.Ua,h),this.size=d}function Rb(h,d){if("function"!=typeof h)throw Error("Fn must not be null and must be a function");return e_.setTimeout(function(){h()},d)}eY.Ta="serverreachability",r(Nb,w),eY.STAT_EVENT="statevent",r(Pb,w),eY.Ua="timingevent",r(Qb,w);var eH={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},eK={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ub(){}function Vb(h){return h.h||(h.h=h.i())}function Wb(){}Ub.prototype.h=null;var eJ={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Yb(){w.call(this,"d")}function Zb(){w.call(this,"c")}function ac(){}function bc(h,d,_,V){this.l=h,this.j=d,this.m=_,this.W=V||1,this.U=new Bb(this),this.P=e0,h=eC?125:void 0,this.V=new wb(h),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dc}function dc(){this.i=null,this.g="",this.h=!1}r(Yb,w),r(Zb,w),r(ac,Ub),ac.prototype.g=function(){return new XMLHttpRequest},ac.prototype.i=function(){return{}},eo=new ac;var e0=45e3,e1={},e2={};function gc(h,d,_){h.L=1,h.v=hc(G(d)),h.s=_,h.S=!0,ic(h,null)}function ic(h,d){h.G=Date.now(),jc(h),h.A=G(h.v);var _=h.A,V=h.W;Array.isArray(V)||(V=[String(V)]),kc(_.i,"t",V),h.C=0,_=h.l.J,h.h=new dc,h.g=lc(h.l,_?d:null,!h.s),0<h.O&&(h.M=new Ab(q(h.Pa,h,h.g),h.O)),Db(h.U,h.g,"readystatechange",h.nb),d=h.I?Pa(h.I):{},h.s?(h.u||(h.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",h.g.ha(h.A,h.u,h.s,d)):(h.u="GET",h.g.ha(h.A,h.u,null,d)),Ob(),function(h,d,_,V,ee,er){h.info(function(){if(h.g){if(er)for(var eo="",ec=er.split("&"),eh=0;eh<ec.length;eh++){var ep=ec[eh].split("=");if(1<ep.length){var ef=ep[0];ep=ep[1];var em=ef.split("_");eo=2<=em.length&&"type"==em[1]?eo+(ef+"=")+ep+"&":eo+(ef+"=redacted&")}}else eo=null}else eo=er;return"XMLHTTP REQ ("+V+") [attempt "+ee+"]: "+d+"\n"+_+"\n"+eo})}(h.j,h.u,h.A,h.m,h.W,h.s)}function oc(h){return!!h.g&&"GET"==h.u&&2!=h.L&&h.l.Ha}function rc(h,d,_){let V=!0,ee;for(;!h.J&&h.C<_.length;)if((ee=function(h,d){var _=h.C,V=d.indexOf("\n",_);return -1==V?e2:isNaN(_=Number(d.substring(_,V)))?e1:(V+=1)+_>d.length?e2:(d=d.slice(V,V+_),h.C=V+_,d)}(h,_))==e2){4==d&&(h.o=4,F(14),V=!1),D(h.j,h.m,null,"[Incomplete Response]");break}else if(ee==e1){h.o=4,F(15),D(h.j,h.m,_,"[Invalid Chunk]"),V=!1;break}else D(h.j,h.m,ee,null),qc(h,ee);oc(h)&&ee!=e2&&ee!=e1&&(h.h.g="",h.C=0),4!=d||0!=_.length||h.h.h||(h.o=1,F(16),V=!1),h.i=h.i&&V,V?0<_.length&&!h.ba&&(h.ba=!0,(d=h.l).g==h&&d.ca&&!d.M&&(d.l.info("Great, no buffering proxy detected. Bytes received: "+_.length),vc(d),d.M=!0,F(11))):(D(h.j,h.m,_,"[Invalid Chunked Response]"),I(h),pc(h))}function jc(h){h.Y=Date.now()+h.P,wc(h,h.P)}function wc(h,d){if(null!=h.B)throw Error("WatchDog timer not null");h.B=Rb(q(h.lb,h),d)}function nc(h){h.B&&(e_.clearTimeout(h.B),h.B=null)}function pc(h){0==h.l.H||h.J||sc(h.l,h)}function I(h){nc(h);var d=h.M;d&&"function"==typeof d.sa&&d.sa(),h.M=null,xb(h.V),Fb(h.U),h.g&&(d=h.g,h.g=null,d.abort(),d.sa())}function qc(h,d){try{var _=h.l;if(0!=_.H&&(_.g==h||xc(_.i,h))){if(!h.K&&xc(_.i,h)&&3==_.H){try{var V=_.Ja.g.parse(d)}catch(h){V=null}if(Array.isArray(V)&&3==V.length){var ee=V;if(0==ee[0]){e:if(!_.u){if(_.g){if(_.g.G+3e3<h.G)yc(_),zc(_);else break e}Ac(_),F(18)}}else _.Fa=ee[1],0<_.Fa-_.V&&37500>ee[2]&&_.G&&0==_.A&&!_.v&&(_.v=Rb(q(_.ib,_),6e3));if(1>=Bc(_.i)&&_.oa){try{_.oa()}catch(h){}_.oa=void 0}}else J(_,11)}else if((h.K||_.g==h)&&yc(_),!x(d))for(ee=_.Ja.g.parse(d),d=0;d<ee.length;d++){let ec=ee[d];if(_.V=ec[0],ec=ec[1],2==_.H){if("c"==ec[0]){_.K=ec[1],_.pa=ec[2];let d=ec[3];null!=d&&(_.ra=d,_.l.info("VER="+_.ra));let ee=ec[4];null!=ee&&(_.Ga=ee,_.l.info("SVER="+_.Ga));let eh=ec[5];null!=eh&&"number"==typeof eh&&0<eh&&(V=1.5*eh,_.L=V,_.l.info("backChannelRequestTimeoutMs_="+V)),V=_;let ep=h.g;if(ep){let h=ep.g?ep.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var er=V.i;er.g||-1==h.indexOf("spdy")&&-1==h.indexOf("quic")&&-1==h.indexOf("h2")||(er.j=er.l,er.g=new Set,er.h&&(Cc(er,er.h),er.h=null))}if(V.F){let h=ep.g?ep.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(V.Da=h,K(V.I,V.F,h))}}if(_.H=3,_.h&&_.h.Ba(),_.ca&&(_.S=Date.now()-h.G,_.l.info("Handshake RTT: "+_.S+"ms")),(V=_).wa=Dc(V,V.J?V.pa:null,V.Y),h.K){Ec(V.i,h);var eo=V.L;eo&&h.setTimeout(eo),h.B&&(nc(h),jc(h)),V.g=h}else Fc(V);0<_.j.length&&Gc(_)}else"stop"!=ec[0]&&"close"!=ec[0]||J(_,7)}else 3==_.H&&("stop"==ec[0]||"close"==ec[0]?"stop"==ec[0]?J(_,7):Hc(_):"noop"!=ec[0]&&_.h&&_.h.Aa(ec),_.A=0)}}Ob(4)}catch(h){}}function Kc(h,d){if(h.forEach&&"function"==typeof h.forEach)h.forEach(d,void 0);else if(aa(h)||"string"==typeof h)Array.prototype.forEach.call(h,d,void 0);else for(var _=function(h){if(h.ta&&"function"==typeof h.ta)return h.ta();if(!h.Z||"function"!=typeof h.Z){if("undefined"!=typeof Map&&h instanceof Map)return Array.from(h.keys());if(!("undefined"!=typeof Set&&h instanceof Set)){if(aa(h)||"string"==typeof h){var d=[];h=h.length;for(var _=0;_<h;_++)d.push(_);return d}for(let V in d=[],_=0,h)d[_++]=V;return d}}}(h),V=function(h){if(h.Z&&"function"==typeof h.Z)return h.Z();if("undefined"!=typeof Map&&h instanceof Map||"undefined"!=typeof Set&&h instanceof Set)return Array.from(h.values());if("string"==typeof h)return h.split("");if(aa(h)){for(var d=[],_=h.length,V=0;V<_;V++)d.push(h[V]);return d}for(V in d=[],_=0,h)d[_++]=h[V];return d}(h),ee=V.length,er=0;er<ee;er++)d.call(void 0,V[er],_&&_[er],h)}(ep=bc.prototype).setTimeout=function(h){this.P=h},ep.nb=function(h){h=h.target;let d=this.M;d&&3==H(h)?d.l():this.Pa(h)},ep.Pa=function(h){try{if(h==this.g)e:{let ef=H(this.g);var d=this.g.Ia();let em=this.g.da();if(!(3>ef)&&(3!=ef||eC||this.g&&(this.h.h||this.g.ja()||mc(this.g)))){this.J||4!=ef||7==d||(8==d||0>=em?Ob(3):Ob(2)),nc(this);var _=this.g.da();this.ca=_;t:if(oc(this)){var V=mc(this.g);h="";var ee=V.length,er=4==H(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){I(this),pc(this);var eo="";break t}this.h.i=new e_.TextDecoder}for(d=0;d<ee;d++)this.h.h=!0,h+=this.h.i.decode(V[d],{stream:er&&d==ee-1});V.splice(0,ee),this.h.g+=h,this.C=0,eo=this.h.g}else eo=this.g.ja();if(this.i=200==_,function(h,d,_,V,ee,er,eo){h.info(function(){return"XMLHTTP RESP ("+V+") [ attempt "+ee+"]: "+d+"\n"+_+"\n"+er+" "+eo})}(this.j,this.u,this.A,this.m,this.W,ef,_),this.i){if(this.aa&&!this.K){t:{if(this.g){var ec,eh=this.g;if((ec=eh.g?eh.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(ec)){var ep=ec;break t}}ep=null}if(_=ep)D(this.j,this.m,_,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qc(this,_);else{this.i=!1,this.o=3,F(12),I(this),pc(this);break e}}this.S?(rc(this,ef,eo),eC&&this.i&&3==ef&&(Db(this.U,this.V,"tick",this.mb),this.V.start())):(D(this.j,this.m,eo,null),qc(this,eo)),4==ef&&I(this),this.i&&!this.J&&(4==ef?sc(this.l,this):(this.i=!1,jc(this)))}else(function(h){let d={};h=(h.g&&2<=H(h)&&h.g.getAllResponseHeaders()||"").split("\r\n");for(let V=0;V<h.length;V++){if(x(h[V]))continue;var _=function(h){var d=1;h=h.split(":");let _=[];for(;0<d&&h.length;)_.push(h.shift()),d--;return h.length&&_.push(h.join(":")),_}(h[V]);let ee=_[0];if("string"!=typeof(_=_[1]))continue;_=_.trim();let er=d[ee]||[];d[ee]=er,er.push(_)}!function(h,d){for(let _ in h)d.call(void 0,h[_],_,h)}(d,function(h){return h.join(", ")})})(this.g),400==_&&0<eo.indexOf("Unknown SID")?(this.o=3,F(12)):(this.o=0,F(13)),I(this),pc(this)}}}catch(h){}finally{}},ep.mb=function(){if(this.g){var h=H(this.g),d=this.g.ja();this.C<d.length&&(nc(this),rc(this,h,d),this.i&&4!=h&&jc(this))}},ep.cancel=function(){this.J=!0,I(this)},ep.lb=function(){this.B=null;let h=Date.now();0<=h-this.Y?(function(h,d){h.info(function(){return"TIMEOUT: "+d})}(this.j,this.A),2!=this.L&&(Ob(),F(17)),I(this),this.o=2,pc(this)):wc(this,this.Y-h)};var e5=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function M(h){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,h instanceof M){this.h=h.h,Nc(this,h.j),this.s=h.s,this.g=h.g,Oc(this,h.m),this.l=h.l;var d=h.i,_=new Pc;_.i=d.i,d.g&&(_.g=new Map(d.g),_.h=d.h),Qc(this,_),this.o=h.o}else h&&(d=String(h).match(e5))?(this.h=!1,Nc(this,d[1]||"",!0),this.s=Rc(d[2]||""),this.g=Rc(d[3]||"",!0),Oc(this,d[4]),this.l=Rc(d[5]||"",!0),Qc(this,d[6]||"",!0),this.o=Rc(d[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}function G(h){return new M(h)}function Nc(h,d,_){h.j=_?Rc(d,!0):d,h.j&&(h.j=h.j.replace(/:$/,""))}function Oc(h,d){if(d){if(isNaN(d=Number(d))||0>d)throw Error("Bad port number "+d);h.m=d}else h.m=null}function Qc(h,d,_){var V,ee;d instanceof Pc?(h.i=d,V=h.i,(ee=h.h)&&!V.j&&(N(V),V.i=null,V.g.forEach(function(h,d){var _=d.toLowerCase();d!=_&&($c(this,d),kc(this,_,h))},V)),V.j=ee):(_||(d=Sc(d,e6)),h.i=new Pc(d,h.h))}function K(h,d,_){h.i.set(d,_)}function hc(h){return K(h,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),h}function Rc(h,d){return h?d?decodeURI(h.replace(/%25/g,"%2525")):decodeURIComponent(h):""}function Sc(h,d,_){return"string"==typeof h?(h=encodeURI(h).replace(d,Zc),_&&(h=h.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h):null}function Zc(h){return"%"+((h=h.charCodeAt(0))>>4&15).toString(16)+(15&h).toString(16)}M.prototype.toString=function(){var h=[],d=this.j;d&&h.push(Sc(d,e7,!0),":");var _=this.g;return(_||"file"==d)&&(h.push("//"),(d=this.s)&&h.push(Sc(d,e7,!0),"@"),h.push(encodeURIComponent(String(_)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(_=this.m)&&h.push(":",String(_))),(_=this.l)&&(this.g&&"/"!=_.charAt(0)&&h.push("/"),h.push(Sc(_,"/"==_.charAt(0)?e4:e3,!0))),(_=this.i.toString())&&h.push("?",_),(_=this.o)&&h.push("#",Sc(_,e9)),h.join("")};var e7=/[#\/\?@]/g,e3=/[#\?:]/g,e4=/[#\?]/g,e6=/[#\?@]/g,e9=/#/g;function Pc(h,d){this.h=this.g=null,this.i=h||null,this.j=!!d}function N(h){h.g||(h.g=new Map,h.h=0,h.i&&function(h,d){if(h){h=h.split("&");for(var _=0;_<h.length;_++){var V=h[_].indexOf("="),ee=null;if(0<=V){var er=h[_].substring(0,V);ee=h[_].substring(V+1)}else er=h[_];d(er,ee?decodeURIComponent(ee.replace(/\+/g," ")):"")}}}(h.i,function(d,_){h.add(decodeURIComponent(d.replace(/\+/g," ")),_)}))}function $c(h,d){N(h),d=O(h,d),h.g.has(d)&&(h.i=null,h.h-=h.g.get(d).length,h.g.delete(d))}function ad(h,d){return N(h),d=O(h,d),h.g.has(d)}function kc(h,d,_){$c(h,d),0<_.length&&(h.i=null,h.g.set(O(h,d),ma(_)),h.h+=_.length)}function O(h,d){return d=String(d),h.j&&(d=d.toLowerCase()),d}(ep=Pc.prototype).add=function(h,d){N(this),this.i=null,h=O(this,h);var _=this.g.get(h);return _||this.g.set(h,_=[]),_.push(d),this.h+=1,this},ep.forEach=function(h,d){N(this),this.g.forEach(function(_,V){_.forEach(function(_){h.call(d,_,V,this)},this)},this)},ep.ta=function(){N(this);let h=Array.from(this.g.values()),d=Array.from(this.g.keys()),_=[];for(let V=0;V<d.length;V++){let ee=h[V];for(let h=0;h<ee.length;h++)_.push(d[V])}return _},ep.Z=function(h){N(this);let d=[];if("string"==typeof h)ad(this,h)&&(d=d.concat(this.g.get(O(this,h))));else{h=Array.from(this.g.values());for(let _=0;_<h.length;_++)d=d.concat(h[_])}return d},ep.set=function(h,d){return N(this),this.i=null,ad(this,h=O(this,h))&&(this.h-=this.g.get(h).length),this.g.set(h,[d]),this.h+=1,this},ep.get=function(h,d){return h&&0<(h=this.Z(h)).length?String(h[0]):d},ep.toString=function(){if(this.i)return this.i;if(!this.g)return"";let h=[],d=Array.from(this.g.keys());for(var _=0;_<d.length;_++){var V=d[_];let er=encodeURIComponent(String(V)),eo=this.Z(V);for(V=0;V<eo.length;V++){var ee=er;""!==eo[V]&&(ee+="="+encodeURIComponent(String(eo[V]))),h.push(ee)}}return this.i=h.join("&")};var e8=class{constructor(h,d){this.g=h,this.map=d}};function cd(h){this.l=h||te,h=e_.PerformanceNavigationTiming?0<(h=e_.performance.getEntriesByType("navigation")).length&&("hq"==h[0].nextHopProtocol||"h2"==h[0].nextHopProtocol):!!(e_.g&&e_.g.Ka&&e_.g.Ka()&&e_.g.Ka().ec),this.j=h?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var te=10;function ed(h){return!!h.h||!!h.g&&h.g.size>=h.j}function Bc(h){return h.h?1:h.g?h.g.size:0}function xc(h,d){return h.h?h.h==d:!!h.g&&h.g.has(d)}function Cc(h,d){h.g?h.g.add(d):h.h=d}function Ec(h,d){h.h&&h.h==d?h.h=null:h.g&&h.g.has(d)&&h.g.delete(d)}function fd(h){if(null!=h.h)return h.i.concat(h.h.F);if(null!=h.g&&0!==h.g.size){let d=h.i;for(let _ of h.g.values())d=d.concat(_.F);return d}return ma(h.i)}cd.prototype.cancel=function(){if(this.i=fd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(let h of this.g.values())h.cancel();this.g.clear()}};var tr=class{stringify(h){return e_.JSON.stringify(h,void 0)}parse(h){return e_.JSON.parse(h,void 0)}};function hd(){this.g=new tr}function kd(h,d,_,V,ee){try{d.onload=null,d.onerror=null,d.onabort=null,d.ontimeout=null,ee(V)}catch(h){}}function ld(h){this.l=h.fc||null,this.j=h.ob||!1}function md(h,d){B.call(this),this.F=h,this.u=d,this.m=void 0,this.readyState=to,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}r(ld,Ub),ld.prototype.g=function(){return new md(this.l,this.j)},ld.prototype.i=(V={},function(){return V}),r(md,B);var to=0;function qd(h){h.j.read().then(h.Xa.bind(h)).catch(h.ka.bind(h))}function pd(h){h.readyState=4,h.l=null,h.j=null,h.A=null,od(h)}function od(h){h.onreadystatechange&&h.onreadystatechange.call(h)}(ep=md.prototype).open=function(h,d){if(this.readyState!=to)throw this.abort(),Error("Error reopening a connection");this.C=h,this.B=d,this.readyState=1,od(this)},ep.send=function(h){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.v,method:this.C,credentials:this.m,cache:void 0};h&&(d.body=h),(this.F||e_).fetch(new Request(this.B,d)).then(this.$a.bind(this),this.ka.bind(this))},ep.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,pd(this)),this.readyState=to},ep.$a=function(h){if(this.g&&(this.l=h,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=h.headers,this.readyState=2,od(this)),this.g&&(this.readyState=3,od(this),this.g))){if("arraybuffer"===this.responseType)h.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==e_.ReadableStream&&"body"in h){if(this.j=h.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qd(this)}else h.text().then(this.Za.bind(this),this.ka.bind(this))}},ep.Xa=function(h){if(this.g){if(this.u&&h.value)this.response.push(h.value);else if(!this.u){var d=h.value?h.value:new Uint8Array(0);(d=this.A.decode(d,{stream:!h.done}))&&(this.response=this.responseText+=d)}h.done?pd(this):od(this),3==this.readyState&&qd(this)}},ep.Za=function(h){this.g&&(this.response=this.responseText=h,pd(this))},ep.Ya=function(h){this.g&&(this.response=h,pd(this))},ep.ka=function(){this.g&&pd(this)},ep.setRequestHeader=function(h,d){this.v.append(h,d)},ep.getResponseHeader=function(h){return this.h&&this.h.get(h.toLowerCase())||""},ep.getAllResponseHeaders=function(){if(!this.h)return"";let h=[],d=this.h.entries();for(var _=d.next();!_.done;)h.push((_=_.value)[0]+": "+_[1]),_=d.next();return h.join("\r\n")},Object.defineProperty(md.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(h){this.m=h?"include":"same-origin"}});var ta=e_.JSON.parse;function P(h){B.call(this),this.headers=new Map,this.u=h||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=tc,this.L=this.M=!1}r(P,B);var tc="",td=/^https?$/i,tp=["POST","PUT"];function vd(h,d){h.h=!1,h.g&&(h.l=!0,h.g.abort(),h.l=!1),h.j=d,h.m=5,yd(h),zd(h)}function yd(h){h.F||(h.F=!0,C(h,"complete"),C(h,"error"))}function Ad(h){if(h.h&&void 0!==eS&&(!h.C[1]||4!=H(h)||2!=h.da())){if(h.v&&4==H(h))yb(h.La,0,h);else if(C(h,"readystatechange"),4==H(h)){h.h=!1;try{let eo=h.da();switch(eo){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d,_,V=!0;break;default:V=!1}if(!(d=V)){if(_=0===eo){var ee=String(h.I).match(e5)[1]||null;!ee&&e_.self&&e_.self.location&&(ee=e_.self.location.protocol.slice(0,-1)),_=!td.test(ee?ee.toLowerCase():"")}d=_}if(d)C(h,"complete"),C(h,"success");else{h.m=6;try{var er=2<H(h)?h.g.statusText:""}catch(h){er=""}h.j=er+" ["+h.da()+"]",yd(h)}}finally{zd(h)}}}}function zd(h,d){if(h.g){wd(h);let _=h.g,V=h.C[0]?()=>{}:null;h.g=null,h.C=null,d||C(h,"ready");try{_.onreadystatechange=V}catch(h){}}}function wd(h){h.g&&h.L&&(h.g.ontimeout=null),h.A&&(e_.clearTimeout(h.A),h.A=null)}function H(h){return h.g?h.g.readyState:0}function mc(h){try{if(!h.g)return null;if("response"in h.g)return h.g.response;switch(h.K){case tc:case"text":return h.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in h.g)return h.g.mozResponseArrayBuffer}return null}catch(h){return null}}function Bd(h){let d="";return Na(h,function(h,_){d+=_+":"+h+"\r\n"}),d}function Cd(h,d,_){e:{for(V in _){var V=!1;break e}V=!0}V||(_=Bd(_),"string"==typeof h?null!=_&&encodeURIComponent(String(_)):K(h,d,_))}function Dd(h,d,_){return _&&_.internalChannelParams&&_.internalChannelParams[h]||d}function Ed(h){this.Ga=0,this.j=[],this.l=new Gb,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Dd("failFast",!1,h),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Dd("baseRetryDelayMs",5e3,h),this.hb=Dd("retryDelaySeedMs",1e4,h),this.eb=Dd("forwardChannelMaxRetries",2,h),this.xa=Dd("forwardChannelRequestTimeoutMs",2e4,h),this.va=h&&h.xmlHttpFactory||void 0,this.Ha=h&&h.dc||!1,this.L=void 0,this.J=h&&h.supportsCrossDomainXhr||!1,this.K="",this.i=new cd(h&&h.concurrentRequestLimit),this.Ja=new hd,this.P=h&&h.fastHandshake||!1,this.O=h&&h.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=h&&h.bc||!1,h&&h.Ea&&this.l.Ea(),h&&h.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&h&&h.detectBufferingProxy||!1,this.qa=void 0,h&&h.longPollingTimeout&&0<h.longPollingTimeout&&(this.qa=h.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Hc(h){if(Fd(h),3==h.H){var d=h.W++,_=G(h.I);if(K(_,"SID",h.K),K(_,"RID",d),K(_,"TYPE","terminate"),Gd(h,_),(d=new bc(h,h.l,d)).L=2,d.v=hc(G(_)),_=!1,e_.navigator&&e_.navigator.sendBeacon)try{_=e_.navigator.sendBeacon(d.v.toString(),"")}catch(h){}!_&&e_.Image&&((new Image).src=d.v,_=!0),_||(d.g=lc(d.l,null),d.g.ha(d.v)),d.G=Date.now(),jc(d)}Hd(h)}function zc(h){h.g&&(vc(h),h.g.cancel(),h.g=null)}function Fd(h){zc(h),h.u&&(e_.clearTimeout(h.u),h.u=null),yc(h),h.i.cancel(),h.m&&("number"==typeof h.m&&e_.clearTimeout(h.m),h.m=null)}function Gc(h){if(!ed(h.i)&&!h.m){h.m=!0;var d=h.Na;eU||vb(),ez||(eU(),ez=!0),eq.add(d,h),h.C=0}}function Ld(h,d){var _;_=d?d.m:h.W++;let V=G(h.I);K(V,"SID",h.K),K(V,"RID",_),K(V,"AID",h.V),Gd(h,V),h.o&&h.s&&Cd(V,h.o,h.s),_=new bc(h,h.l,_,h.C+1),null===h.o&&(_.I=h.s),d&&(h.j=d.F.concat(h.j)),d=Kd(h,_,1e3),_.setTimeout(Math.round(.5*h.xa)+Math.round(.5*h.xa*Math.random())),Cc(h.i,_),gc(_,V,d)}function Gd(h,d){h.na&&Na(h.na,function(h,_){K(d,_,h)}),h.h&&Kc({},function(h,_){K(d,_,h)})}function Kd(h,d,_){_=Math.min(h.j.length,_);var V=h.h?q(h.h.Va,h.h,h):null;e:{var ee=h.j;let d=-1;for(;;){let h=["count="+_];-1==d?0<_?(d=ee[0].g,h.push("ofs="+d)):d=0:h.push("ofs="+d);let er=!0;for(let eo=0;eo<_;eo++){let _=ee[eo].g,ec=ee[eo].map;if(0>(_-=d))d=Math.max(0,ee[eo].g-100),er=!1;else try{!function(h,d,_){let V=_||"";try{Kc(h,function(h,_){let ee=h;p(h)&&(ee=eB(h)),d.push(V+_+"="+encodeURIComponent(ee))})}catch(h){throw d.push(V+"type="+encodeURIComponent("_badmap")),h}}(ec,h,"req"+_+"_")}catch(h){V&&V(ec)}}if(er){V=h.join("&");break e}}}return h=h.j.splice(0,_),d.F=h,V}function Fc(h){if(!h.g&&!h.u){h.ba=1;var d=h.Ma;eU||vb(),ez||(eU(),ez=!0),eq.add(d,h),h.A=0}}function Ac(h){return!h.g&&!h.u&&!(3<=h.A)&&(h.ba++,h.u=Rb(q(h.Ma,h),Jd(h,h.A)),h.A++,!0)}function vc(h){null!=h.B&&(e_.clearTimeout(h.B),h.B=null)}function Md(h){h.g=new bc(h,h.l,"rpc",h.ba),null===h.o&&(h.g.I=h.s),h.g.O=0;var d=G(h.wa);K(d,"RID","rpc"),K(d,"SID",h.K),K(d,"AID",h.V),K(d,"CI",h.G?"0":"1"),!h.G&&h.qa&&K(d,"TO",h.qa),K(d,"TYPE","xmlhttp"),Gd(h,d),h.o&&h.s&&Cd(d,h.o,h.s),h.L&&h.g.setTimeout(h.L);var _=h.g;h=h.pa,_.L=1,_.v=hc(G(d)),_.s=null,_.S=!0,ic(_,h)}function yc(h){null!=h.v&&(e_.clearTimeout(h.v),h.v=null)}function sc(h,d){var _=null;if(h.g==d){yc(h),vc(h),h.g=null;var V=2}else{if(!xc(h.i,d))return;_=d.F,Ec(h.i,d),V=1}if(0!=h.H){if(d.i){if(1==V){_=d.s?d.s.length:0,d=Date.now()-d.G;var ee,er=h.C;C(V=Mb(),new Qb(V,_)),Gc(h)}else Fc(h)}else if(3==(er=d.o)||0==er&&0<d.ca||!(1==V&&(ee=d,!(Bc(h.i)>=h.i.j-(h.m?1:0))&&(h.m?(h.j=ee.F.concat(h.j),!0):1!=h.H&&2!=h.H&&!(h.C>=(h.cb?0:h.eb))&&(h.m=Rb(q(h.Na,h,ee),Jd(h,h.C)),h.C++,!0)))||2==V&&Ac(h)))switch(_&&0<_.length&&((d=h.i).i=d.i.concat(_)),er){case 1:J(h,5);break;case 4:J(h,10);break;case 3:J(h,6);break;default:J(h,2)}}}function Jd(h,d){let _=h.ab+Math.floor(Math.random()*h.hb);return h.isActive()||(_*=2),_*d}function J(h,d){if(h.l.info("Error code "+d),2==d){var _=null;h.h&&(_=null);var V=q(h.pb,h);_||(_=new M("//www.google.com/images/cleardot.gif"),e_.location&&"http"==e_.location.protocol||Nc(_,"https"),hc(_)),function(h,d){let _=new Gb;if(e_.Image){let V=new Image;V.onload=ha(kd,_,V,"TestLoadImage: loaded",!0,d),V.onerror=ha(kd,_,V,"TestLoadImage: error",!1,d),V.onabort=ha(kd,_,V,"TestLoadImage: abort",!1,d),V.ontimeout=ha(kd,_,V,"TestLoadImage: timeout",!1,d),e_.setTimeout(function(){V.ontimeout&&V.ontimeout()},1e4),V.src=h}else d(!1)}(_.toString(),V)}else F(2);h.H=0,h.h&&h.h.za(d),Hd(h),Fd(h)}function Hd(h){if(h.H=0,h.ma=[],h.h){let d=fd(h.i);(0!=d.length||0!=h.j.length)&&(na(h.ma,d),na(h.ma,h.j),h.i.i.length=0,ma(h.j),h.j.length=0),h.h.ya()}}function Dc(h,d,_){var V=_ instanceof M?G(_):new M(_);if(""!=V.g)d&&(V.g=d+"."+V.g),Oc(V,V.m);else{var ee=e_.location;V=ee.protocol,d=d?d+"."+ee.hostname:ee.hostname,ee=+ee.port;var er=new M(null);V&&Nc(er,V),d&&(er.g=d),ee&&Oc(er,ee),_&&(er.l=_),V=er}return _=h.F,d=h.Da,_&&d&&K(V,_,d),K(V,"VER",h.ra),Gd(h,V),V}function lc(h,d,_){if(d&&!h.J)throw Error("Can't create secondary domain capable XhrIo object.");return(d=new P(_&&h.Ha&&!h.va?new ld({ob:!0}):h.va)).Oa(h.J),d}function Nd(){}function Od(){if(eT&&!(10<=Number(eM)))throw Error("Environmental error: no available transport.")}function Q(h,d){B.call(this),this.g=new Ed(d),this.l=h,this.h=d&&d.messageUrlParams||null,h=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(h?h["X-Client-Protocol"]="webchannel":h={"X-Client-Protocol":"webchannel"}),this.g.s=h,h=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(h?h["X-WebChannel-Content-Type"]=d.messageContentType:h={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.Ca&&(h?h["X-WebChannel-Client-Profile"]=d.Ca:h={"X-WebChannel-Client-Profile":d.Ca}),this.g.U=h,(h=d&&d.cc)&&!x(h)&&(this.g.o=h),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!x(d)&&(this.g.F=d,null!==(h=this.h)&&d in h&&d in(h=this.h)&&delete h[d]),this.j=new R(this)}function Pd(h){Yb.call(this),h.__headers__&&(this.headers=h.__headers__,this.statusCode=h.__status__,delete h.__headers__,delete h.__status__);var d=h.__sm__;if(d){e:{for(let _ in d){h=_;break e}h=void 0}(this.i=h)&&(h=this.i,d=null!==d&&h in d?d[h]:void 0),this.data=d}else this.data=h}function Qd(){Zb.call(this),this.status=1}function R(h){this.g=h}function S(){this.blockSize=-1,this.blockSize=64,this.g=[,,,,],this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Sd(h,d,_){_||(_=0);var V=Array(16);if("string"==typeof d)for(var ee=0;16>ee;++ee)V[ee]=d.charCodeAt(_++)|d.charCodeAt(_++)<<8|d.charCodeAt(_++)<<16|d.charCodeAt(_++)<<24;else for(ee=0;16>ee;++ee)V[ee]=d[_++]|d[_++]<<8|d[_++]<<16|d[_++]<<24;d=h.g[0],_=h.g[1],ee=h.g[2];var er=h.g[3],eo=d+(er^_&(ee^er))+V[0]+3614090360&4294967295;eo=er+(ee^(d=_+(eo<<7&4294967295|eo>>>25))&(_^ee))+V[1]+3905402710&4294967295,eo=ee+(_^(er=d+(eo<<12&4294967295|eo>>>20))&(d^_))+V[2]+606105819&4294967295,eo=_+(d^(ee=er+(eo<<17&4294967295|eo>>>15))&(er^d))+V[3]+3250441966&4294967295,eo=d+(er^(_=ee+(eo<<22&4294967295|eo>>>10))&(ee^er))+V[4]+4118548399&4294967295,eo=er+(ee^(d=_+(eo<<7&4294967295|eo>>>25))&(_^ee))+V[5]+1200080426&4294967295,eo=ee+(_^(er=d+(eo<<12&4294967295|eo>>>20))&(d^_))+V[6]+2821735955&4294967295,eo=_+(d^(ee=er+(eo<<17&4294967295|eo>>>15))&(er^d))+V[7]+4249261313&4294967295,eo=d+(er^(_=ee+(eo<<22&4294967295|eo>>>10))&(ee^er))+V[8]+1770035416&4294967295,eo=er+(ee^(d=_+(eo<<7&4294967295|eo>>>25))&(_^ee))+V[9]+2336552879&4294967295,eo=ee+(_^(er=d+(eo<<12&4294967295|eo>>>20))&(d^_))+V[10]+4294925233&4294967295,eo=_+(d^(ee=er+(eo<<17&4294967295|eo>>>15))&(er^d))+V[11]+2304563134&4294967295,eo=d+(er^(_=ee+(eo<<22&4294967295|eo>>>10))&(ee^er))+V[12]+1804603682&4294967295,eo=er+(ee^(d=_+(eo<<7&4294967295|eo>>>25))&(_^ee))+V[13]+4254626195&4294967295,eo=ee+(_^(er=d+(eo<<12&4294967295|eo>>>20))&(d^_))+V[14]+2792965006&4294967295,eo=_+(d^(ee=er+(eo<<17&4294967295|eo>>>15))&(er^d))+V[15]+1236535329&4294967295,_=ee+(eo<<22&4294967295|eo>>>10),eo=d+(ee^er&(_^ee))+V[1]+4129170786&4294967295,d=_+(eo<<5&4294967295|eo>>>27),eo=er+(_^ee&(d^_))+V[6]+3225465664&4294967295,er=d+(eo<<9&4294967295|eo>>>23),eo=ee+(d^_&(er^d))+V[11]+643717713&4294967295,ee=er+(eo<<14&4294967295|eo>>>18),eo=_+(er^d&(ee^er))+V[0]+3921069994&4294967295,_=ee+(eo<<20&4294967295|eo>>>12),eo=d+(ee^er&(_^ee))+V[5]+3593408605&4294967295,d=_+(eo<<5&4294967295|eo>>>27),eo=er+(_^ee&(d^_))+V[10]+38016083&4294967295,er=d+(eo<<9&4294967295|eo>>>23),eo=ee+(d^_&(er^d))+V[15]+3634488961&4294967295,ee=er+(eo<<14&4294967295|eo>>>18),eo=_+(er^d&(ee^er))+V[4]+3889429448&4294967295,_=ee+(eo<<20&4294967295|eo>>>12),eo=d+(ee^er&(_^ee))+V[9]+568446438&4294967295,d=_+(eo<<5&4294967295|eo>>>27),eo=er+(_^ee&(d^_))+V[14]+3275163606&4294967295,er=d+(eo<<9&4294967295|eo>>>23),eo=ee+(d^_&(er^d))+V[3]+4107603335&4294967295,ee=er+(eo<<14&4294967295|eo>>>18),eo=_+(er^d&(ee^er))+V[8]+1163531501&4294967295,_=ee+(eo<<20&4294967295|eo>>>12),eo=d+(ee^er&(_^ee))+V[13]+2850285829&4294967295,d=_+(eo<<5&4294967295|eo>>>27),eo=er+(_^ee&(d^_))+V[2]+4243563512&4294967295,er=d+(eo<<9&4294967295|eo>>>23),eo=ee+(d^_&(er^d))+V[7]+1735328473&4294967295,ee=er+(eo<<14&4294967295|eo>>>18),eo=_+(er^d&(ee^er))+V[12]+2368359562&4294967295,eo=d+((_=ee+(eo<<20&4294967295|eo>>>12))^ee^er)+V[5]+4294588738&4294967295,eo=er+((d=_+(eo<<4&4294967295|eo>>>28))^_^ee)+V[8]+2272392833&4294967295,eo=ee+((er=d+(eo<<11&4294967295|eo>>>21))^d^_)+V[11]+1839030562&4294967295,eo=_+((ee=er+(eo<<16&4294967295|eo>>>16))^er^d)+V[14]+4259657740&4294967295,eo=d+((_=ee+(eo<<23&4294967295|eo>>>9))^ee^er)+V[1]+2763975236&4294967295,eo=er+((d=_+(eo<<4&4294967295|eo>>>28))^_^ee)+V[4]+1272893353&4294967295,eo=ee+((er=d+(eo<<11&4294967295|eo>>>21))^d^_)+V[7]+4139469664&4294967295,eo=_+((ee=er+(eo<<16&4294967295|eo>>>16))^er^d)+V[10]+3200236656&4294967295,eo=d+((_=ee+(eo<<23&4294967295|eo>>>9))^ee^er)+V[13]+681279174&4294967295,eo=er+((d=_+(eo<<4&4294967295|eo>>>28))^_^ee)+V[0]+3936430074&4294967295,eo=ee+((er=d+(eo<<11&4294967295|eo>>>21))^d^_)+V[3]+3572445317&4294967295,eo=_+((ee=er+(eo<<16&4294967295|eo>>>16))^er^d)+V[6]+76029189&4294967295,eo=d+((_=ee+(eo<<23&4294967295|eo>>>9))^ee^er)+V[9]+3654602809&4294967295,eo=er+((d=_+(eo<<4&4294967295|eo>>>28))^_^ee)+V[12]+3873151461&4294967295,eo=ee+((er=d+(eo<<11&4294967295|eo>>>21))^d^_)+V[15]+530742520&4294967295,eo=_+((ee=er+(eo<<16&4294967295|eo>>>16))^er^d)+V[2]+3299628645&4294967295,_=ee+(eo<<23&4294967295|eo>>>9),eo=d+(ee^(_|~er))+V[0]+4096336452&4294967295,d=_+(eo<<6&4294967295|eo>>>26),eo=er+(_^(d|~ee))+V[7]+1126891415&4294967295,er=d+(eo<<10&4294967295|eo>>>22),eo=ee+(d^(er|~_))+V[14]+2878612391&4294967295,ee=er+(eo<<15&4294967295|eo>>>17),eo=_+(er^(ee|~d))+V[5]+4237533241&4294967295,_=ee+(eo<<21&4294967295|eo>>>11),eo=d+(ee^(_|~er))+V[12]+1700485571&4294967295,d=_+(eo<<6&4294967295|eo>>>26),eo=er+(_^(d|~ee))+V[3]+2399980690&4294967295,er=d+(eo<<10&4294967295|eo>>>22),eo=ee+(d^(er|~_))+V[10]+4293915773&4294967295,ee=er+(eo<<15&4294967295|eo>>>17),eo=_+(er^(ee|~d))+V[1]+2240044497&4294967295,_=ee+(eo<<21&4294967295|eo>>>11),eo=d+(ee^(_|~er))+V[8]+1873313359&4294967295,d=_+(eo<<6&4294967295|eo>>>26),eo=er+(_^(d|~ee))+V[15]+4264355552&4294967295,er=d+(eo<<10&4294967295|eo>>>22),eo=ee+(d^(er|~_))+V[6]+2734768916&4294967295,ee=er+(eo<<15&4294967295|eo>>>17),eo=_+(er^(ee|~d))+V[13]+1309151649&4294967295,_=ee+(eo<<21&4294967295|eo>>>11),eo=d+(ee^(_|~er))+V[4]+4149444226&4294967295,d=_+(eo<<6&4294967295|eo>>>26),eo=er+(_^(d|~ee))+V[11]+3174756917&4294967295,er=d+(eo<<10&4294967295|eo>>>22),eo=ee+(d^(er|~_))+V[2]+718787259&4294967295,ee=er+(eo<<15&4294967295|eo>>>17),eo=_+(er^(ee|~d))+V[9]+3951481745&4294967295,h.g[0]=h.g[0]+d&4294967295,h.g[1]=h.g[1]+(ee+(eo<<21&4294967295|eo>>>11))&4294967295,h.g[2]=h.g[2]+ee&4294967295,h.g[3]=h.g[3]+er&4294967295}function T(h,d){this.h=d;for(var _=[],V=!0,ee=h.length-1;0<=ee;ee--){var er=0|h[ee];V&&er==d||(_[ee]=er,V=!1)}this.g=_}(ep=P.prototype).Oa=function(h){this.M=h},ep.ha=function(h,d,_,V){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+h);d=d?d.toUpperCase():"GET",this.I=h,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():eo.g(),this.C=this.u?Vb(this.u):Vb(eo),this.g.onreadystatechange=q(this.La,this);try{this.G=!0,this.g.open(d,String(h),!0),this.G=!1}catch(h){vd(this,h);return}if(h=_||"",_=new Map(this.headers),V){if(Object.getPrototypeOf(V)===Object.prototype)for(var ee in V)_.set(ee,V[ee]);else if("function"==typeof V.keys&&"function"==typeof V.get)for(let h of V.keys())_.set(h,V.get(h));else throw Error("Unknown input type for opt_headers: "+String(V))}for(let[er,eo]of(V=Array.from(_.keys()).find(h=>"content-type"==h.toLowerCase()),ee=e_.FormData&&h instanceof e_.FormData,!(0<=ew(tp,d))||V||ee||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),_))this.g.setRequestHeader(er,eo);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{var er;wd(this),0<this.B&&((this.L=(er=this.g,eT&&"number"==typeof er.timeout&&void 0!==er.ontimeout))?(this.g.timeout=this.B,this.g.ontimeout=q(this.ua,this)):this.A=yb(this.ua,this.B,this)),this.v=!0,this.g.send(h),this.v=!1}catch(h){vd(this,h)}},ep.ua=function(){void 0!==eS&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,C(this,"timeout"),this.abort(8))},ep.abort=function(h){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=h||7,C(this,"complete"),C(this,"abort"),zd(this))},ep.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zd(this,!0)),P.$.N.call(this)},ep.La=function(){this.s||(this.G||this.v||this.l?Ad(this):this.kb())},ep.kb=function(){Ad(this)},ep.isActive=function(){return!!this.g},ep.da=function(){try{return 2<H(this)?this.g.status:-1}catch(h){return -1}},ep.ja=function(){try{return this.g?this.g.responseText:""}catch(h){return""}},ep.Wa=function(h){if(this.g){var d=this.g.responseText;return h&&0==d.indexOf(h)&&(d=d.substring(h.length)),ta(d)}},ep.Ia=function(){return this.m},ep.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ep=Ed.prototype).ra=8,ep.H=1,ep.Na=function(h){if(this.m){if(this.m=null,1==this.H){if(!h){this.W=Math.floor(1e5*Math.random()),h=this.W++;let ee=new bc(this,this.l,h),er=this.s;if(this.U&&(er?Ra(er=Pa(er),this.U):er=this.U),null!==this.o||this.O||(ee.I=er,er=null),this.P)e:{for(var d=0,_=0;_<this.j.length;_++){t:{var V=this.j[_];if("__data__"in V.map&&"string"==typeof(V=V.map.__data__)){V=V.length;break t}V=void 0}if(void 0===V)break;if(4096<(d+=V)){d=_;break e}if(4096===d||_===this.j.length-1){d=_+1;break e}}d=1e3}else d=1e3;d=Kd(this,ee,d),K(_=G(this.I),"RID",h),K(_,"CVER",22),this.F&&K(_,"X-HTTP-Session-Id",this.F),Gd(this,_),er&&(this.O?d="headers="+encodeURIComponent(String(Bd(er)))+"&"+d:this.o&&Cd(_,this.o,er)),Cc(this.i,ee),this.bb&&K(_,"TYPE","init"),this.P?(K(_,"$req",d),K(_,"SID","null"),ee.aa=!0,gc(ee,_,null)):gc(ee,_,d),this.H=2}}else 3==this.H&&(h?Ld(this,h):0==this.j.length||ed(this.i)||Ld(this))}},ep.Ma=function(){if(this.u=null,Md(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var h=2*this.S;this.l.info("BP detection timer enabled: "+h),this.B=Rb(q(this.jb,this),h)}},ep.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,F(10),zc(this),Md(this))},ep.ib=function(){null!=this.v&&(this.v=null,zc(this),Ac(this),F(19))},ep.pb=function(h){h?(this.l.info("Successfully pinged google.com"),F(2)):(this.l.info("Failed to ping google.com"),F(1))},ep.isActive=function(){return!!this.h&&this.h.isActive(this)},(ep=Nd.prototype).Ba=function(){},ep.Aa=function(){},ep.za=function(){},ep.ya=function(){},ep.isActive=function(){return!0},ep.Va=function(){},Od.prototype.g=function(h,d){return new Q(h,d)},r(Q,B),Q.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var h=this.g,d=this.l,_=this.h||void 0;F(0),h.Y=d,h.na=_||{},h.G=h.aa,h.I=Dc(h,null,h.Y),Gc(h)},Q.prototype.close=function(){Hc(this.g)},Q.prototype.u=function(h){var d=this.g;if("string"==typeof h){var _={};_.__data__=h,h=_}else this.v&&((_={}).__data__=eB(h),h=_);d.j.push(new e8(d.fb++,h)),3==d.H&&Gc(d)},Q.prototype.N=function(){this.g.h=null,delete this.j,Hc(this.g),delete this.g,Q.$.N.call(this)},r(Pd,Yb),r(Qd,Zb),r(R,Nd),R.prototype.Ba=function(){C(this.g,"a")},R.prototype.Aa=function(h){C(this.g,new Pd(h))},R.prototype.za=function(h){C(this.g,new Qd)},R.prototype.ya=function(){C(this.g,"b")},r(S,function(){this.blockSize=-1}),S.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},S.prototype.j=function(h,d){void 0===d&&(d=h.length);for(var _=d-this.blockSize,V=this.m,ee=this.h,er=0;er<d;){if(0==ee)for(;er<=_;)Sd(this,h,er),er+=this.blockSize;if("string"==typeof h){for(;er<d;)if(V[ee++]=h.charCodeAt(er++),ee==this.blockSize){Sd(this,V),ee=0;break}}else for(;er<d;)if(V[ee++]=h[er++],ee==this.blockSize){Sd(this,V),ee=0;break}}this.h=ee,this.i+=d},S.prototype.l=function(){var h=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);h[0]=128;for(var d=1;d<h.length-8;++d)h[d]=0;var _=8*this.i;for(d=h.length-8;d<h.length;++d)h[d]=255&_,_/=256;for(this.j(h),h=Array(16),d=_=0;4>d;++d)for(var V=0;32>V;V+=8)h[_++]=this.g[d]>>>V&255;return h};var tf={};function Td(h){return -128<=h&&128>h?Object.prototype.hasOwnProperty.call(tf,h)?tf[h]:tf[h]=new T([0|h],0>h?-1:0):new T([0|h],0>h?-1:0)}function U(h){if(isNaN(h)||!isFinite(h))return tg;if(0>h)return W(U(-h));for(var d=[],_=1,V=0;h>=_;V++)d[V]=h/_|0,_*=tm;return new T(d,0)}var tm=4294967296,tg=Td(0),tO=Td(1),ty=Td(16777216);function Y(h){if(0!=h.h)return!1;for(var d=0;d<h.g.length;d++)if(0!=h.g[d])return!1;return!0}function X(h){return -1==h.h}function W(h){for(var d=h.g.length,_=[],V=0;V<d;V++)_[V]=~h.g[V];return new T(_,~h.h).add(tO)}function Zd(h,d){return h.add(W(d))}function $d(h,d){for(;(65535&h[d])!=h[d];)h[d+1]+=h[d]>>>16,h[d]&=65535,d++}function ae(h,d){this.g=h,this.h=d}function Yd(h,d){if(Y(d))throw Error("division by zero");if(Y(h))return new ae(tg,tg);if(X(h))return d=Yd(W(h),d),new ae(W(d.g),W(d.h));if(X(d))return d=Yd(h,W(d)),new ae(W(d.g),d.h);if(30<h.g.length){if(X(h)||X(d))throw Error("slowDivide_ only works with positive integers.");for(var _=tO,V=d;0>=V.X(h);)_=be(_),V=be(V);var ee=Z(_,1),er=Z(V,1);for(V=Z(V,2),_=Z(_,2);!Y(V);){var eo=er.add(V);0>=eo.X(h)&&(ee=ee.add(_),er=eo),V=Z(V,1),_=Z(_,1)}return d=Zd(h,ee.R(d)),new ae(ee,d)}for(ee=tg;0<=h.X(d);){for(V=48>=(V=Math.ceil(Math.log(_=Math.max(1,Math.floor(h.ea()/d.ea())))/Math.LN2))?1:Math.pow(2,V-48),eo=(er=U(_)).R(d);X(eo)||0<eo.X(h);)_-=V,eo=(er=U(_)).R(d);Y(er)&&(er=tO),ee=ee.add(er),h=Zd(h,eo)}return new ae(ee,h)}function be(h){for(var d=h.g.length+1,_=[],V=0;V<d;V++)_[V]=h.D(V)<<1|h.D(V-1)>>>31;return new T(_,h.h)}function Z(h,d){var _=d>>5;d%=32;for(var V=h.g.length-_,ee=[],er=0;er<V;er++)ee[er]=0<d?h.D(er+_)>>>d|h.D(er+_+1)<<32-d:h.D(er+_);return new T(ee,h.h)}(ep=T.prototype).ea=function(){if(X(this))return-W(this).ea();for(var h=0,d=1,_=0;_<this.g.length;_++){var V=this.D(_);h+=(0<=V?V:tm+V)*d,d*=tm}return h},ep.toString=function(h){if(2>(h=h||10)||36<h)throw Error("radix out of range: "+h);if(Y(this))return"0";if(X(this))return"-"+W(this).toString(h);for(var d=U(Math.pow(h,6)),_=this,V="";;){var ee=Yd(_,d).g,er=((0<(_=Zd(_,ee.R(d))).g.length?_.g[0]:_.h)>>>0).toString(h);if(Y(_=ee))return er+V;for(;6>er.length;)er="0"+er;V=er+V}},ep.D=function(h){return 0>h?0:h<this.g.length?this.g[h]:this.h},ep.X=function(h){return X(h=Zd(this,h))?-1:Y(h)?0:1},ep.abs=function(){return X(this)?W(this):this},ep.add=function(h){for(var d=Math.max(this.g.length,h.g.length),_=[],V=0,ee=0;ee<=d;ee++){var er=V+(65535&this.D(ee))+(65535&h.D(ee)),eo=(er>>>16)+(this.D(ee)>>>16)+(h.D(ee)>>>16);V=eo>>>16,er&=65535,eo&=65535,_[ee]=eo<<16|er}return new T(_,-2147483648&_[_.length-1]?-1:0)},ep.R=function(h){if(Y(this)||Y(h))return tg;if(X(this))return X(h)?W(this).R(W(h)):W(W(this).R(h));if(X(h))return W(this.R(W(h)));if(0>this.X(ty)&&0>h.X(ty))return U(this.ea()*h.ea());for(var d=this.g.length+h.g.length,_=[],V=0;V<2*d;V++)_[V]=0;for(V=0;V<this.g.length;V++)for(var ee=0;ee<h.g.length;ee++){var er=this.D(V)>>>16,eo=65535&this.D(V),ec=h.D(ee)>>>16,eh=65535&h.D(ee);_[2*V+2*ee]+=eo*eh,$d(_,2*V+2*ee),_[2*V+2*ee+1]+=er*eh,$d(_,2*V+2*ee+1),_[2*V+2*ee+1]+=eo*ec,$d(_,2*V+2*ee+1),_[2*V+2*ee+2]+=er*ec,$d(_,2*V+2*ee+2)}for(V=0;V<d;V++)_[V]=_[2*V+1]<<16|_[2*V];for(V=d;V<2*d;V++)_[V]=0;return new T(_,0)},ep.gb=function(h){return Yd(this,h).h},ep.and=function(h){for(var d=Math.max(this.g.length,h.g.length),_=[],V=0;V<d;V++)_[V]=this.D(V)&h.D(V);return new T(_,this.h&h.h)},ep.or=function(h){for(var d=Math.max(this.g.length,h.g.length),_=[],V=0;V<d;V++)_[V]=this.D(V)|h.D(V);return new T(_,this.h|h.h)},ep.xor=function(h){for(var d=Math.max(this.g.length,h.g.length),_=[],V=0;V<d;V++)_[V]=this.D(V)^h.D(V);return new T(_,this.h^h.h)},Od.prototype.createWebChannel=Od.prototype.g,Q.prototype.send=Q.prototype.u,Q.prototype.open=Q.prototype.m,Q.prototype.close=Q.prototype.close,eH.NO_ERROR=0,eH.TIMEOUT=8,eH.HTTP_ERROR=6,eK.COMPLETE="complete",Wb.EventType=eJ,eJ.OPEN="a",eJ.CLOSE="b",eJ.ERROR="c",eJ.MESSAGE="d",B.prototype.listen=B.prototype.O,P.prototype.listenOnce=P.prototype.P,P.prototype.getLastError=P.prototype.Sa,P.prototype.getLastErrorCode=P.prototype.Ia,P.prototype.getStatus=P.prototype.da,P.prototype.getResponseJson=P.prototype.Wa,P.prototype.getResponseText=P.prototype.ja,P.prototype.send=P.prototype.ha,P.prototype.setWithCredentials=P.prototype.Oa,S.prototype.digest=S.prototype.l,S.prototype.reset=S.prototype.reset,S.prototype.update=S.prototype.j,T.prototype.add=T.prototype.add,T.prototype.multiply=T.prototype.R,T.prototype.modulo=T.prototype.gb,T.prototype.compare=T.prototype.X,T.prototype.toNumber=T.prototype.ea,T.prototype.toString=T.prototype.toString,T.prototype.getBits=T.prototype.D,T.fromNumber=U,T.fromString=function Vd(h,d){if(0==h.length)throw Error("number format error: empty string");if(2>(d=d||10)||36<d)throw Error("radix out of range: "+d);if("-"==h.charAt(0))return W(Vd(h.substring(1),d));if(0<=h.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=U(Math.pow(d,8)),V=tg,ee=0;ee<h.length;ee+=8){var er=Math.min(8,h.length-ee),eo=parseInt(h.substring(ee,ee+er),d);8>er?(er=U(Math.pow(d,er)),V=V.R(er).add(U(eo))):V=(V=V.R(_)).add(U(eo))}return V};var tv=ev.createWebChannelTransport=function(){return new Od},tb=ev.getStatEventTarget=function(){return Mb()},tS=ev.ErrorCode=eH,t_=ev.EventType=eK,tw=ev.Event=eY,tx=ev.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},tk=ev.FetchXmlHttpFactory=ld,tT=ev.WebChannel=Wb,tE=ev.XhrIo=P,tC=ev.Md5=S,tP=ev.Integer=T;_(3454);let tI="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let index_esm2017_V=class index_esm2017_V{constructor(h){this.uid=h}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(h){return h.uid===this.uid}};index_esm2017_V.UNAUTHENTICATED=new index_esm2017_V(null),index_esm2017_V.GOOGLE_CREDENTIALS=new index_esm2017_V("google-credentials-uid"),index_esm2017_V.FIRST_PARTY=new index_esm2017_V("first-party-uid"),index_esm2017_V.MOCK_USER=new index_esm2017_V("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tR="9.23.0",tA=new eg.Yd("@firebase/firestore");function index_esm2017_C(){return tA.logLevel}function index_esm2017_N(h,...d){if(tA.logLevel<=eg.in.DEBUG){let _=d.map($);tA.debug(`Firestore (${tR}): ${h}`,..._)}}function index_esm2017_k(h,...d){if(tA.logLevel<=eg.in.ERROR){let _=d.map($);tA.error(`Firestore (${tR}): ${h}`,..._)}}function index_esm2017_M(h,...d){if(tA.logLevel<=eg.in.WARN){let _=d.map($);tA.warn(`Firestore (${tR}): ${h}`,..._)}}function $(h){if("string"==typeof h)return h;try{return JSON.stringify(h)}catch(d){return h}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function index_esm2017_O(h="Unexpected state"){let d=`FIRESTORE (${tR}) INTERNAL ASSERTION FAILED: `+h;throw index_esm2017_k(d),Error(d)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let t$={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};let index_esm2017_U=class index_esm2017_U extends eO.ZR{constructor(h,d){super(h,d),this.code=h,this.message=d,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let index_esm2017_K=class index_esm2017_K{constructor(){this.promise=new Promise((h,d)=>{this.resolve=h,this.reject=d})}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let index_esm2017_G=class index_esm2017_G{constructor(h,d){this.user=d,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${h}`)}};let index_esm2017_Q=class index_esm2017_Q{getToken(){return Promise.resolve(null)}invalidateToken(){}start(h,d){h.enqueueRetryable(()=>d(index_esm2017_V.UNAUTHENTICATED))}shutdown(){}};let j=class j{constructor(h){this.token=h,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(h,d){this.changeListener=d,h.enqueueRetryable(()=>d(this.token.user))}shutdown(){this.changeListener=null}};let index_esm2017_z=class index_esm2017_z{constructor(h){this.t=h,this.currentUser=index_esm2017_V.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(h,d){let _=this.i,s=h=>this.i!==_?(_=this.i,d(h)):Promise.resolve(),V=new index_esm2017_K;this.o=()=>{this.i++,this.currentUser=this.u(),V.resolve(),V=new index_esm2017_K,h.enqueueRetryable(()=>s(this.currentUser))};let r=()=>{let d=V;h.enqueueRetryable(async()=>{await d.promise,await s(this.currentUser)})},o=h=>{index_esm2017_N("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=h,this.auth.addAuthTokenListener(this.o),r()};this.t.onInit(h=>o(h)),setTimeout(()=>{if(!this.auth){let h=this.t.getImmediate({optional:!0});h?o(h):(index_esm2017_N("FirebaseAuthCredentialsProvider","Auth not yet detected"),V.resolve(),V=new index_esm2017_K)}},0),r()}getToken(){let h=this.i,d=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(d).then(d=>this.i!==h?(index_esm2017_N("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):d?("string"==typeof d.accessToken||index_esm2017_O(),new index_esm2017_G(d.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let h=this.auth&&this.auth.getUid();return null===h||"string"==typeof h||index_esm2017_O(),new index_esm2017_V(h)}};let index_esm2017_W=class index_esm2017_W{constructor(h,d,_){this.h=h,this.l=d,this.m=_,this.type="FirstParty",this.user=index_esm2017_V.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);let h=this.p();return h&&this.g.set("Authorization",h),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}};let index_esm2017_H=class index_esm2017_H{constructor(h,d,_){this.h=h,this.l=d,this.m=_}getToken(){return Promise.resolve(new index_esm2017_W(this.h,this.l,this.m))}start(h,d){h.enqueueRetryable(()=>d(index_esm2017_V.FIRST_PARTY))}shutdown(){}invalidateToken(){}};let index_esm2017_J=class index_esm2017_J{constructor(h){this.value=h,this.type="AppCheck",this.headers=new Map,h&&h.length>0&&this.headers.set("x-firebase-appcheck",this.value)}};let index_esm2017_Y=class index_esm2017_Y{constructor(h){this.I=h,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(h,d){let n=h=>{null!=h.error&&index_esm2017_N("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${h.error.message}`);let _=h.token!==this.T;return this.T=h.token,index_esm2017_N("FirebaseAppCheckTokenProvider",`Received ${_?"new":"existing"} token.`),_?d(h.token):Promise.resolve()};this.o=d=>{h.enqueueRetryable(()=>n(d))};let s=h=>{index_esm2017_N("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=h,this.appCheck.addTokenListener(this.o)};this.I.onInit(h=>s(h)),setTimeout(()=>{if(!this.appCheck){let h=this.I.getImmediate({optional:!0});h?s(h):index_esm2017_N("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let h=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(h).then(h=>h?("string"==typeof h.token||index_esm2017_O(),this.T=h.token,new index_esm2017_J(h.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tt=class tt{static A(){let h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=Math.floor(256/h.length)*h.length,_="";for(;_.length<20;){let V=/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function(h){let d="undefined"!=typeof self&&(self.crypto||self.msCrypto),_=new Uint8Array(h);if(d&&"function"==typeof d.getRandomValues)d.getRandomValues(_);else for(let d=0;d<h;d++)_[d]=Math.floor(256*Math.random());return _}(40);for(let ee=0;ee<V.length;++ee)_.length<20&&V[ee]<d&&(_+=h.charAt(V[ee]%h.length))}return _}};function et(h,d){return h<d?-1:h>d?1:0}function nt(h,d,_){return h.length===d.length&&h.every((h,V)=>_(h,d[V]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let it=class it{constructor(h,d){if(this.seconds=h,this.nanoseconds=d,d<0||d>=1e9)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+d);if(h<-62135596800||h>=253402300800)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Timestamp seconds out of range: "+h)}static now(){return it.fromMillis(Date.now())}static fromDate(h){return it.fromMillis(h.getTime())}static fromMillis(h){let d=Math.floor(h/1e3),_=Math.floor(1e6*(h-1e3*d));return new it(d,_)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(h){return this.seconds===h.seconds?et(this.nanoseconds,h.nanoseconds):et(this.seconds,h.seconds)}isEqual(h){return h.seconds===this.seconds&&h.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let h=this.seconds- -62135596800;return String(h).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let rt=class rt{constructor(h){this.timestamp=h}static fromTimestamp(h){return new rt(h)}static min(){return new rt(new it(0,0))}static max(){return new rt(new it(253402300799,999999999))}compareTo(h){return this.timestamp._compareTo(h.timestamp)}isEqual(h){return this.timestamp.isEqual(h.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ot=class ot{constructor(h,d,_){void 0===d?d=0:d>h.length&&index_esm2017_O(),void 0===_?_=h.length-d:_>h.length-d&&index_esm2017_O(),this.segments=h,this.offset=d,this.len=_}get length(){return this.len}isEqual(h){return 0===ot.comparator(this,h)}child(h){let d=this.segments.slice(this.offset,this.limit());return h instanceof ot?h.forEach(h=>{d.push(h)}):d.push(h),this.construct(d)}limit(){return this.offset+this.length}popFirst(h){return h=void 0===h?1:h,this.construct(this.segments,this.offset+h,this.length-h)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(h){return this.segments[this.offset+h]}isEmpty(){return 0===this.length}isPrefixOf(h){if(h.length<this.length)return!1;for(let d=0;d<this.length;d++)if(this.get(d)!==h.get(d))return!1;return!0}isImmediateParentOf(h){if(this.length+1!==h.length)return!1;for(let d=0;d<this.length;d++)if(this.get(d)!==h.get(d))return!1;return!0}forEach(h){for(let d=this.offset,_=this.limit();d<_;d++)h(this.segments[d])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(h,d){let _=Math.min(h.length,d.length);for(let V=0;V<_;V++){let _=h.get(V),ee=d.get(V);if(_<ee)return -1;if(_>ee)return 1}return h.length<d.length?-1:h.length>d.length?1:0}};let ut=class ut extends ot{construct(h,d,_){return new ut(h,d,_)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...h){let d=[];for(let _ of h){if(_.indexOf("//")>=0)throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid segment (${_}). Paths must not contain // in them.`);d.push(..._.split("/").filter(h=>h.length>0))}return new ut(d)}static emptyPath(){return new ut([])}};let tN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;let at=class at extends ot{construct(h,d,_){return new at(h,d,_)}static isValidIdentifier(h){return tN.test(h)}canonicalString(){return this.toArray().map(h=>(h=h.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),at.isValidIdentifier(h)||(h="`"+h+"`"),h)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new at(["__name__"])}static fromServerFormat(h){let d=[],_="",V=0,i=()=>{if(0===_.length)throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid field path (${h}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);d.push(_),_=""},ee=!1;for(;V<h.length;){let d=h[V];if("\\"===d){if(V+1===h.length)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Path has trailing escape character: "+h);let d=h[V+1];if("\\"!==d&&"."!==d&&"`"!==d)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Path has invalid escape sequence: "+h);_+=d,V+=2}else"`"===d?ee=!ee:"."!==d||ee?_+=d:i(),V++}if(i(),ee)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Unterminated ` in path: "+h);return new at(d)}static emptyPath(){return new at([])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ht=class ht{constructor(h){this.path=h}static fromPath(h){return new ht(ut.fromString(h))}static fromName(h){return new ht(ut.fromString(h).popFirst(5))}static empty(){return new ht(ut.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(h){return this.path.length>=2&&this.path.get(this.path.length-2)===h}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(h){return null!==h&&0===ut.comparator(this.path,h.path)}toString(){return this.path.toString()}static comparator(h,d){return ut.comparator(h.path,d.path)}static isDocumentKey(h){return h.length%2==0}static fromSegments(h){return new ht(new ut(h.slice()))}};let It=class It{constructor(h,d,_){this.readTime=h,this.documentKey=d,this.largestBatchId=_}static min(){return new It(rt.min(),ht.empty(),-1)}static max(){return new It(rt.max(),ht.empty(),-1)}};let At=class At{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(h){this.onCommittedListeners.push(h)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(h=>h())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vt(h){if(h.code!==t$.FAILED_PRECONDITION||"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab."!==h.message)throw h;index_esm2017_N("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rt=class Rt{constructor(h){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,h(h=>{this.isDone=!0,this.result=h,this.nextCallback&&this.nextCallback(h)},h=>{this.isDone=!0,this.error=h,this.catchCallback&&this.catchCallback(h)})}catch(h){return this.next(void 0,h)}next(h,d){return this.callbackAttached&&index_esm2017_O(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(d,this.error):this.wrapSuccess(h,this.result):new Rt((_,V)=>{this.nextCallback=d=>{this.wrapSuccess(h,d).next(_,V)},this.catchCallback=h=>{this.wrapFailure(d,h).next(_,V)}})}toPromise(){return new Promise((h,d)=>{this.next(h,d)})}wrapUserFunction(h){try{let d=h();return d instanceof Rt?d:Rt.resolve(d)}catch(h){return Rt.reject(h)}}wrapSuccess(h,d){return h?this.wrapUserFunction(()=>h(d)):Rt.resolve(d)}wrapFailure(h,d){return h?this.wrapUserFunction(()=>h(d)):Rt.reject(d)}static resolve(h){return new Rt((d,_)=>{d(h)})}static reject(h){return new Rt((d,_)=>{_(h)})}static waitFor(h){return new Rt((d,_)=>{let V=0,ee=0,er=!1;h.forEach(h=>{++V,h.next(()=>{++ee,er&&ee===V&&d()},h=>_(h))}),er=!0,ee===V&&d()})}static or(h){let d=Rt.resolve(!1);for(let _ of h)d=d.next(h=>h?Rt.resolve(h):_());return d}static forEach(h,d){let _=[];return h.forEach((h,V)=>{_.push(d.call(this,h,V))}),this.waitFor(_)}static mapArray(h,d){return new Rt((_,V)=>{let ee=h.length,er=Array(ee),eo=0;for(let ec=0;ec<ee;ec++){let eh=ec;d(h[eh]).next(h=>{er[eh]=h,++eo===ee&&_(er)},h=>V(h))}})}static doWhile(h,d){return new Rt((_,V)=>{let i=()=>{!0===h()?d().next(()=>{i()},V):_()};i()})}};function Dt(h){return"IndexedDbTransactionError"===h.name}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ot=class Ot{constructor(h,d){this.previousValue=h,d&&(d.sequenceNumberHandler=h=>this.ot(h),this.ut=h=>d.writeSequenceNumber(h))}ot(h){return this.previousValue=Math.max(h,this.previousValue),this.previousValue}next(){let h=++this.previousValue;return this.ut&&this.ut(h),h}};function Bt(h){return 0===h&&1/h==-1/0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(h){let d=0;for(let _ in h)Object.prototype.hasOwnProperty.call(h,_)&&d++;return d}function ge(h,d){for(let _ in h)Object.prototype.hasOwnProperty.call(h,_)&&d(_,h[_])}function ye(h){for(let d in h)if(Object.prototype.hasOwnProperty.call(h,d))return!1;return!0}Ot.ct=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pe=class pe{constructor(h,d){this.comparator=h,this.root=d||Te.EMPTY}insert(h,d){return new pe(this.comparator,this.root.insert(h,d,this.comparator).copy(null,null,Te.BLACK,null,null))}remove(h){return new pe(this.comparator,this.root.remove(h,this.comparator).copy(null,null,Te.BLACK,null,null))}get(h){let d=this.root;for(;!d.isEmpty();){let _=this.comparator(h,d.key);if(0===_)return d.value;_<0?d=d.left:_>0&&(d=d.right)}return null}indexOf(h){let d=0,_=this.root;for(;!_.isEmpty();){let V=this.comparator(h,_.key);if(0===V)return d+_.left.size;V<0?_=_.left:(d+=_.left.size+1,_=_.right)}return -1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(h){return this.root.inorderTraversal(h)}forEach(h){this.inorderTraversal((d,_)=>(h(d,_),!1))}toString(){let h=[];return this.inorderTraversal((d,_)=>(h.push(`${d}:${_}`),!1)),`{${h.join(", ")}}`}reverseTraversal(h){return this.root.reverseTraversal(h)}getIterator(){return new Ie(this.root,null,this.comparator,!1)}getIteratorFrom(h){return new Ie(this.root,h,this.comparator,!1)}getReverseIterator(){return new Ie(this.root,null,this.comparator,!0)}getReverseIteratorFrom(h){return new Ie(this.root,h,this.comparator,!0)}};let Ie=class Ie{constructor(h,d,_,V){this.isReverse=V,this.nodeStack=[];let ee=1;for(;!h.isEmpty();)if(ee=d?_(h.key,d):1,d&&V&&(ee*=-1),ee<0)h=this.isReverse?h.left:h.right;else{if(0===ee){this.nodeStack.push(h);break}this.nodeStack.push(h),h=this.isReverse?h.right:h.left}}getNext(){let h=this.nodeStack.pop(),d={key:h.key,value:h.value};if(this.isReverse)for(h=h.left;!h.isEmpty();)this.nodeStack.push(h),h=h.right;else for(h=h.right;!h.isEmpty();)this.nodeStack.push(h),h=h.left;return d}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;let h=this.nodeStack[this.nodeStack.length-1];return{key:h.key,value:h.value}}};let Te=class Te{constructor(h,d,_,V,ee){this.key=h,this.value=d,this.color=null!=_?_:Te.RED,this.left=null!=V?V:Te.EMPTY,this.right=null!=ee?ee:Te.EMPTY,this.size=this.left.size+1+this.right.size}copy(h,d,_,V,ee){return new Te(null!=h?h:this.key,null!=d?d:this.value,null!=_?_:this.color,null!=V?V:this.left,null!=ee?ee:this.right)}isEmpty(){return!1}inorderTraversal(h){return this.left.inorderTraversal(h)||h(this.key,this.value)||this.right.inorderTraversal(h)}reverseTraversal(h){return this.right.reverseTraversal(h)||h(this.key,this.value)||this.left.reverseTraversal(h)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(h,d,_){let V=this,ee=_(h,V.key);return(V=ee<0?V.copy(null,null,null,V.left.insert(h,d,_),null):0===ee?V.copy(null,d,null,null,null):V.copy(null,null,null,null,V.right.insert(h,d,_))).fixUp()}removeMin(){if(this.left.isEmpty())return Te.EMPTY;let h=this;return h.left.isRed()||h.left.left.isRed()||(h=h.moveRedLeft()),(h=h.copy(null,null,null,h.left.removeMin(),null)).fixUp()}remove(h,d){let _,V=this;if(0>d(h,V.key))V.left.isEmpty()||V.left.isRed()||V.left.left.isRed()||(V=V.moveRedLeft()),V=V.copy(null,null,null,V.left.remove(h,d),null);else{if(V.left.isRed()&&(V=V.rotateRight()),V.right.isEmpty()||V.right.isRed()||V.right.left.isRed()||(V=V.moveRedRight()),0===d(h,V.key)){if(V.right.isEmpty())return Te.EMPTY;_=V.right.min(),V=V.copy(_.key,_.value,null,null,V.right.removeMin())}V=V.copy(null,null,null,null,V.right.remove(h,d))}return V.fixUp()}isRed(){return this.color}fixUp(){let h=this;return h.right.isRed()&&!h.left.isRed()&&(h=h.rotateLeft()),h.left.isRed()&&h.left.left.isRed()&&(h=h.rotateRight()),h.left.isRed()&&h.right.isRed()&&(h=h.colorFlip()),h}moveRedLeft(){let h=this.colorFlip();return h.right.left.isRed()&&(h=(h=(h=h.copy(null,null,null,null,h.right.rotateRight())).rotateLeft()).colorFlip()),h}moveRedRight(){let h=this.colorFlip();return h.left.left.isRed()&&(h=(h=h.rotateRight()).colorFlip()),h}rotateLeft(){let h=this.copy(null,null,Te.RED,null,this.right.left);return this.right.copy(null,null,this.color,h,null)}rotateRight(){let h=this.copy(null,null,Te.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,h)}colorFlip(){let h=this.left.copy(null,null,!this.left.color,null,null),d=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,h,d)}checkMaxDepth(){let h=this.check();return Math.pow(2,h)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw index_esm2017_O();let h=this.left.check();if(h!==this.right.check())throw index_esm2017_O();return h+(this.isRed()?0:1)}};Te.EMPTY=null,Te.RED=!0,Te.BLACK=!1,Te.EMPTY=new class{constructor(){this.size=0}get key(){throw index_esm2017_O()}get value(){throw index_esm2017_O()}get color(){throw index_esm2017_O()}get left(){throw index_esm2017_O()}get right(){throw index_esm2017_O()}copy(h,d,_,V,ee){return this}insert(h,d,_){return new Te(h,d)}remove(h,d){return this}isEmpty(){return!0}inorderTraversal(h){return!1}reverseTraversal(h){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ee=class Ee{constructor(h){this.comparator=h,this.data=new pe(this.comparator)}has(h){return null!==this.data.get(h)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(h){return this.data.indexOf(h)}forEach(h){this.data.inorderTraversal((d,_)=>(h(d),!1))}forEachInRange(h,d){let _=this.data.getIteratorFrom(h[0]);for(;_.hasNext();){let V=_.getNext();if(this.comparator(V.key,h[1])>=0)return;d(V.key)}}forEachWhile(h,d){let _;for(_=void 0!==d?this.data.getIteratorFrom(d):this.data.getIterator();_.hasNext();)if(!h(_.getNext().key))return}firstAfterOrEqual(h){let d=this.data.getIteratorFrom(h);return d.hasNext()?d.getNext().key:null}getIterator(){return new Ae(this.data.getIterator())}getIteratorFrom(h){return new Ae(this.data.getIteratorFrom(h))}add(h){return this.copy(this.data.remove(h).insert(h,!0))}delete(h){return this.has(h)?this.copy(this.data.remove(h)):this}isEmpty(){return this.data.isEmpty()}unionWith(h){let d=this;return d.size<h.size&&(d=h,h=this),h.forEach(h=>{d=d.add(h)}),d}isEqual(h){if(!(h instanceof Ee)||this.size!==h.size)return!1;let d=this.data.getIterator(),_=h.data.getIterator();for(;d.hasNext();){let h=d.getNext().key,V=_.getNext().key;if(0!==this.comparator(h,V))return!1}return!0}toArray(){let h=[];return this.forEach(d=>{h.push(d)}),h}toString(){let h=[];return this.forEach(d=>h.push(d)),"SortedSet("+h.toString()+")"}copy(h){let d=new Ee(this.comparator);return d.data=h,d}};let Ae=class Ae{constructor(h){this.iter=h}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Re=class Re{constructor(h){this.fields=h,h.sort(at.comparator)}static empty(){return new Re([])}unionWith(h){let d=new Ee(at.comparator);for(let h of this.fields)d=d.add(h);for(let _ of h)d=d.add(_);return new Re(d.toArray())}covers(h){for(let d of this.fields)if(d.isPrefixOf(h))return!0;return!1}isEqual(h){return nt(this.fields,h.fields,(h,d)=>h.isEqual(d))}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Pe=class Pe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ve=class Ve{constructor(h){this.binaryString=h}static fromBase64String(h){let d=function(h){try{return atob(h)}catch(h){throw"undefined"!=typeof DOMException&&h instanceof DOMException?new Pe("Invalid base64 string: "+h):h}}(h);return new Ve(d)}static fromUint8Array(h){let d=function(h){let d="";for(let _=0;_<h.length;++_)d+=String.fromCharCode(h[_]);return d}(h);return new Ve(d)}[Symbol.iterator](){let h=0;return{next:()=>h<this.binaryString.length?{value:this.binaryString.charCodeAt(h++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(h){let d=new Uint8Array(h.length);for(let _=0;_<h.length;_++)d[_]=h.charCodeAt(_);return d}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(h){return et(this.binaryString,h.binaryString)}isEqual(h){return this.binaryString===h.binaryString}};Ve.EMPTY_BYTE_STRING=new Ve("");let tM=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function De(h){if(h||index_esm2017_O(),"string"==typeof h){let d=0,_=tM.exec(h);if(_||index_esm2017_O(),_[1]){let h=_[1];d=Number(h=(h+"000000000").substr(0,9))}let V=new Date(h);return{seconds:Math.floor(V.getTime()/1e3),nanos:d}}return{seconds:Ce(h.seconds),nanos:Ce(h.nanos)}}function Ce(h){return"number"==typeof h?h:"string"==typeof h?Number(h):0}function xe(h){return"string"==typeof h?Ve.fromBase64String(h):Ve.fromUint8Array(h)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(h){var d,_;return"server_timestamp"===(null===(_=((null===(d=null==h?void 0:h.mapValue)||void 0===d?void 0:d.fields)||{}).__type__)||void 0===_?void 0:_.stringValue)}function ke(h){let d=h.mapValue.fields.__previous_value__;return Ne(d)?ke(d):d}function Me(h){let d=De(h.mapValue.fields.__local_write_time__.timestampValue);return new it(d.seconds,d.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $e=class $e{constructor(h,d,_,V,ee,er,eo,ec,eh){this.databaseId=h,this.appId=d,this.persistenceKey=_,this.host=V,this.ssl=ee,this.forceLongPolling=er,this.autoDetectLongPolling=eo,this.longPollingOptions=ec,this.useFetchStreams=eh}};let Oe=class Oe{constructor(h,d){this.projectId=h,this.database=d||"(default)"}static empty(){return new Oe("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(h){return h instanceof Oe&&h.projectId===this.projectId&&h.database===this.database}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tQ={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Le(h){return"nullValue"in h?0:"booleanValue"in h?1:"integerValue"in h||"doubleValue"in h?2:"timestampValue"in h?3:"stringValue"in h?5:"bytesValue"in h?6:"referenceValue"in h?7:"geoPointValue"in h?8:"arrayValue"in h?9:"mapValue"in h?Ne(h)?4:en(h)?9007199254740991:10:index_esm2017_O()}function qe(h,d){if(h===d)return!0;let _=Le(h);if(_!==Le(d))return!1;switch(_){case 0:case 9007199254740991:return!0;case 1:return h.booleanValue===d.booleanValue;case 4:return Me(h).isEqual(Me(d));case 3:return function(h,d){if("string"==typeof h.timestampValue&&"string"==typeof d.timestampValue&&h.timestampValue.length===d.timestampValue.length)return h.timestampValue===d.timestampValue;let _=De(h.timestampValue),V=De(d.timestampValue);return _.seconds===V.seconds&&_.nanos===V.nanos}(h,d);case 5:return h.stringValue===d.stringValue;case 6:return xe(h.bytesValue).isEqual(xe(d.bytesValue));case 7:return h.referenceValue===d.referenceValue;case 8:return Ce(h.geoPointValue.latitude)===Ce(d.geoPointValue.latitude)&&Ce(h.geoPointValue.longitude)===Ce(d.geoPointValue.longitude);case 2:return function(h,d){if("integerValue"in h&&"integerValue"in d)return Ce(h.integerValue)===Ce(d.integerValue);if("doubleValue"in h&&"doubleValue"in d){let _=Ce(h.doubleValue),V=Ce(d.doubleValue);return _===V?Bt(_)===Bt(V):isNaN(_)&&isNaN(V)}return!1}(h,d);case 9:return nt(h.arrayValue.values||[],d.arrayValue.values||[],qe);case 10:return function(h,d){let _=h.mapValue.fields||{},V=d.mapValue.fields||{};if(me(_)!==me(V))return!1;for(let h in _)if(_.hasOwnProperty(h)&&(void 0===V[h]||!qe(_[h],V[h])))return!1;return!0}(h,d);default:return index_esm2017_O()}}function Ue(h,d){return void 0!==(h.values||[]).find(h=>qe(h,d))}function Ke(h,d){if(h===d)return 0;let _=Le(h),V=Le(d);if(_!==V)return et(_,V);switch(_){case 0:case 9007199254740991:return 0;case 1:return et(h.booleanValue,d.booleanValue);case 2:return function(h,d){let _=Ce(h.integerValue||h.doubleValue),V=Ce(d.integerValue||d.doubleValue);return _<V?-1:_>V?1:_===V?0:isNaN(_)?isNaN(V)?0:-1:1}(h,d);case 3:return Ge(h.timestampValue,d.timestampValue);case 4:return Ge(Me(h),Me(d));case 5:return et(h.stringValue,d.stringValue);case 6:return function(h,d){let _=xe(h),V=xe(d);return _.compareTo(V)}(h.bytesValue,d.bytesValue);case 7:return function(h,d){let _=h.split("/"),V=d.split("/");for(let h=0;h<_.length&&h<V.length;h++){let d=et(_[h],V[h]);if(0!==d)return d}return et(_.length,V.length)}(h.referenceValue,d.referenceValue);case 8:return function(h,d){let _=et(Ce(h.latitude),Ce(d.latitude));return 0!==_?_:et(Ce(h.longitude),Ce(d.longitude))}(h.geoPointValue,d.geoPointValue);case 9:return function(h,d){let _=h.values||[],V=d.values||[];for(let h=0;h<_.length&&h<V.length;++h){let d=Ke(_[h],V[h]);if(d)return d}return et(_.length,V.length)}(h.arrayValue,d.arrayValue);case 10:return function(h,d){if(h===tQ.mapValue&&d===tQ.mapValue)return 0;if(h===tQ.mapValue)return 1;if(d===tQ.mapValue)return -1;let _=h.fields||{},V=Object.keys(_),ee=d.fields||{},er=Object.keys(ee);V.sort(),er.sort();for(let h=0;h<V.length&&h<er.length;++h){let d=et(V[h],er[h]);if(0!==d)return d;let eo=Ke(_[V[h]],ee[er[h]]);if(0!==eo)return eo}return et(V.length,er.length)}(h.mapValue,d.mapValue);default:throw index_esm2017_O()}}function Ge(h,d){if("string"==typeof h&&"string"==typeof d&&h.length===d.length)return et(h,d);let _=De(h),V=De(d),ee=et(_.seconds,V.seconds);return 0!==ee?ee:et(_.nanos,V.nanos)}function je(h){var d,_;return"nullValue"in h?"null":"booleanValue"in h?""+h.booleanValue:"integerValue"in h?""+h.integerValue:"doubleValue"in h?""+h.doubleValue:"timestampValue"in h?function(h){let d=De(h);return`time(${d.seconds},${d.nanos})`}(h.timestampValue):"stringValue"in h?h.stringValue:"bytesValue"in h?xe(h.bytesValue).toBase64():"referenceValue"in h?(_=h.referenceValue,ht.fromName(_).toString()):"geoPointValue"in h?`geo(${(d=h.geoPointValue).latitude},${d.longitude})`:"arrayValue"in h?function(h){let d="[",_=!0;for(let V of h.values||[])_?_=!1:d+=",",d+=je(V);return d+"]"}(h.arrayValue):"mapValue"in h?function(h){let d=Object.keys(h.fields||{}).sort(),_="{",V=!0;for(let ee of d)V?V=!1:_+=",",_+=`${ee}:${je(h.fields[ee])}`;return _+"}"}(h.mapValue):index_esm2017_O()}function We(h,d){return{referenceValue:`projects/${h.projectId}/databases/${h.database}/documents/${d.path.canonicalString()}`}}function He(h){return!!h&&"integerValue"in h}function Je(h){return!!h&&"arrayValue"in h}function Ye(h){return!!h&&"nullValue"in h}function Xe(h){return!!h&&"doubleValue"in h&&isNaN(Number(h.doubleValue))}function Ze(h){return!!h&&"mapValue"in h}function tn(h){if(h.geoPointValue)return{geoPointValue:Object.assign({},h.geoPointValue)};if(h.timestampValue&&"object"==typeof h.timestampValue)return{timestampValue:Object.assign({},h.timestampValue)};if(h.mapValue){let d={mapValue:{fields:{}}};return ge(h.mapValue.fields,(h,_)=>d.mapValue.fields[h]=tn(_)),d}if(h.arrayValue){let d={arrayValue:{values:[]}};for(let _=0;_<(h.arrayValue.values||[]).length;++_)d.arrayValue.values[_]=tn(h.arrayValue.values[_]);return d}return Object.assign({},h)}function en(h){return"__max__"===(((h.mapValue||{}).fields||{}).__type__||{}).stringValue}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let un=class un{constructor(h){this.value=h}static empty(){return new un({mapValue:{}})}field(h){if(h.isEmpty())return this.value;{let d=this.value;for(let _=0;_<h.length-1;++_)if(!Ze(d=(d.mapValue.fields||{})[h.get(_)]))return null;return(d=(d.mapValue.fields||{})[h.lastSegment()])||null}}set(h,d){this.getFieldsMap(h.popLast())[h.lastSegment()]=tn(d)}setAll(h){let d=at.emptyPath(),_={},V=[];h.forEach((h,ee)=>{if(!d.isImmediateParentOf(ee)){let h=this.getFieldsMap(d);this.applyChanges(h,_,V),_={},V=[],d=ee.popLast()}h?_[ee.lastSegment()]=tn(h):V.push(ee.lastSegment())});let ee=this.getFieldsMap(d);this.applyChanges(ee,_,V)}delete(h){let d=this.field(h.popLast());Ze(d)&&d.mapValue.fields&&delete d.mapValue.fields[h.lastSegment()]}isEqual(h){return qe(this.value,h.value)}getFieldsMap(h){let d=this.value;d.mapValue.fields||(d.mapValue={fields:{}});for(let _=0;_<h.length;++_){let V=d.mapValue.fields[h.get(_)];Ze(V)&&V.mapValue.fields||(V={mapValue:{fields:{}}},d.mapValue.fields[h.get(_)]=V),d=V}return d.mapValue.fields}applyChanges(h,d,_){for(let V of(ge(d,(d,_)=>h[d]=_),_))delete h[V]}clone(){return new un(tn(this.value))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let an=class an{constructor(h,d,_,V,ee,er,eo){this.key=h,this.documentType=d,this.version=_,this.readTime=V,this.createTime=ee,this.data=er,this.documentState=eo}static newInvalidDocument(h){return new an(h,0,rt.min(),rt.min(),rt.min(),un.empty(),0)}static newFoundDocument(h,d,_,V){return new an(h,1,d,rt.min(),_,V,0)}static newNoDocument(h,d){return new an(h,2,d,rt.min(),rt.min(),un.empty(),0)}static newUnknownDocument(h,d){return new an(h,3,d,rt.min(),rt.min(),un.empty(),2)}convertToFoundDocument(h,d){return this.createTime.isEqual(rt.min())&&(2===this.documentType||0===this.documentType)&&(this.createTime=h),this.version=h,this.documentType=1,this.data=d,this.documentState=0,this}convertToNoDocument(h){return this.version=h,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(h){return this.version=h,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=rt.min(),this}setReadTime(h){return this.readTime=h,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(h){return h instanceof an&&this.key.isEqual(h.key)&&this.version.isEqual(h.version)&&this.documentType===h.documentType&&this.documentState===h.documentState&&this.data.isEqual(h.data)}mutableCopy(){return new an(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hn=class hn{constructor(h,d){this.position=h,this.inclusive=d}};function ln(h,d,_){let V=0;for(let ee=0;ee<h.position.length;ee++){let er=d[ee],eo=h.position[ee];if(V=er.field.isKeyField()?ht.comparator(ht.fromName(eo.referenceValue),_.key):Ke(eo,_.data.field(er.field)),"desc"===er.dir&&(V*=-1),0!==V)break}return V}function fn(h,d){if(null===h)return null===d;if(null===d||h.inclusive!==d.inclusive||h.position.length!==d.position.length)return!1;for(let _=0;_<h.position.length;_++)if(!qe(h.position[_],d.position[_]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dn=class dn{constructor(h,d="asc"){this.field=h,this.dir=d}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _n=class _n{};let mn=class mn extends _n{constructor(h,d,_){super(),this.field=h,this.op=d,this.value=_}static create(h,d,_){return h.isKeyField()?"in"===d||"not-in"===d?this.createKeyFieldInFilter(h,d,_):new Pn(h,d,_):"array-contains"===d?new Dn(h,_):"in"===d?new Cn(h,_):"not-in"===d?new xn(h,_):"array-contains-any"===d?new Nn(h,_):new mn(h,d,_)}static createKeyFieldInFilter(h,d,_){return"in"===d?new bn(h,_):new Vn(h,_)}matches(h){let d=h.data.field(this.field);return"!="===this.op?null!==d&&this.matchesComparison(Ke(d,this.value)):null!==d&&Le(this.value)===Le(d)&&this.matchesComparison(Ke(d,this.value))}matchesComparison(h){switch(this.op){case"<":return h<0;case"<=":return h<=0;case"==":return 0===h;case"!=":return 0!==h;case">":return h>0;case">=":return h>=0;default:return index_esm2017_O()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}};let gn=class gn extends _n{constructor(h,d){super(),this.filters=h,this.op=d,this.lt=null}static create(h,d){return new gn(h,d)}matches(h){return yn(this)?void 0===this.filters.find(d=>!d.matches(h)):void 0!==this.filters.find(d=>d.matches(h))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((h,d)=>h.concat(d.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){let h=this.ft(h=>h.isInequality());return null!==h?h.field:null}ft(h){for(let d of this.getFlattenedFilters())if(h(d))return d;return null}};function yn(h){return"and"===h.op}function Tn(h){for(let d of h.filters)if(d instanceof gn)return!1;return!0}let Pn=class Pn extends mn{constructor(h,d,_){super(h,d,_),this.key=ht.fromName(_.referenceValue)}matches(h){let d=ht.comparator(h.key,this.key);return this.matchesComparison(d)}};let bn=class bn extends mn{constructor(h,d){super(h,"in",d),this.keys=Sn("in",d)}matches(h){return this.keys.some(d=>d.isEqual(h.key))}};let Vn=class Vn extends mn{constructor(h,d){super(h,"not-in",d),this.keys=Sn("not-in",d)}matches(h){return!this.keys.some(d=>d.isEqual(h.key))}};function Sn(h,d){var _;return((null===(_=d.arrayValue)||void 0===_?void 0:_.values)||[]).map(h=>ht.fromName(h.referenceValue))}let Dn=class Dn extends mn{constructor(h,d){super(h,"array-contains",d)}matches(h){let d=h.data.field(this.field);return Je(d)&&Ue(d.arrayValue,this.value)}};let Cn=class Cn extends mn{constructor(h,d){super(h,"in",d)}matches(h){let d=h.data.field(this.field);return null!==d&&Ue(this.value.arrayValue,d)}};let xn=class xn extends mn{constructor(h,d){super(h,"not-in",d)}matches(h){if(Ue(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let d=h.data.field(this.field);return null!==d&&!Ue(this.value.arrayValue,d)}};let Nn=class Nn extends mn{constructor(h,d){super(h,"array-contains-any",d)}matches(h){let d=h.data.field(this.field);return!(!Je(d)||!d.arrayValue.values)&&d.arrayValue.values.some(h=>Ue(this.value.arrayValue,h))}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kn=class kn{constructor(h,d=null,_=[],V=[],ee=null,er=null,eo=null){this.path=h,this.collectionGroup=d,this.orderBy=_,this.filters=V,this.limit=ee,this.startAt=er,this.endAt=eo,this.dt=null}};function Mn(h,d=null,_=[],V=[],ee=null,er=null,eo=null){return new kn(h,d,_,V,ee,er,eo)}function $n(h){if(null===h.dt){let d=h.path.canonicalString();null!==h.collectionGroup&&(d+="|cg:"+h.collectionGroup),d+="|f:"+h.filters.map(h=>(function En(h){if(h instanceof mn)return h.field.canonicalString()+h.op.toString()+je(h.value);if(Tn(h)&&yn(h))return h.filters.map(h=>En(h)).join(",");{let d=h.filters.map(h=>En(h)).join(",");return`${h.op}(${d})`}})(h)).join(",")+"|ob:"+h.orderBy.map(h=>h.field.canonicalString()+h.dir).join(","),null==h.limit||(d+="|l:"+h.limit),h.startAt&&(d+="|lb:"+(h.startAt.inclusive?"b:":"a:")+h.startAt.position.map(h=>je(h)).join(",")),h.endAt&&(d+="|ub:"+(h.endAt.inclusive?"a:":"b:")+h.endAt.position.map(h=>je(h)).join(",")),h.dt=d}return h.dt}function On(h,d){if(h.limit!==d.limit||h.orderBy.length!==d.orderBy.length)return!1;for(let ee=0;ee<h.orderBy.length;ee++){var _,V;if(_=h.orderBy[ee],V=d.orderBy[ee],!(_.dir===V.dir&&_.field.isEqual(V.field)))return!1}if(h.filters.length!==d.filters.length)return!1;for(let _=0;_<h.filters.length;_++)if(!function An(h,d){return h instanceof mn?d instanceof mn&&h.op===d.op&&h.field.isEqual(d.field)&&qe(h.value,d.value):h instanceof gn?d instanceof gn&&h.op===d.op&&h.filters.length===d.filters.length&&h.filters.reduce((h,_,V)=>h&&An(_,d.filters[V]),!0):void index_esm2017_O()}(h.filters[_],d.filters[_]))return!1;return h.collectionGroup===d.collectionGroup&&!!h.path.isEqual(d.path)&&!!fn(h.startAt,d.startAt)&&fn(h.endAt,d.endAt)}function Fn(h){return ht.isDocumentKey(h.path)&&null===h.collectionGroup&&0===h.filters.length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Un=class Un{constructor(h,d=null,_=[],V=[],ee=null,er="F",eo=null,ec=null){this.path=h,this.collectionGroup=d,this.explicitOrderBy=_,this.filters=V,this.limit=ee,this.limitType=er,this.startAt=eo,this.endAt=ec,this.wt=null,this._t=null,this.startAt,this.endAt}};function Gn(h){return new Un(h)}function Qn(h){return 0===h.filters.length&&null===h.limit&&null==h.startAt&&null==h.endAt&&(0===h.explicitOrderBy.length||1===h.explicitOrderBy.length&&h.explicitOrderBy[0].field.isKeyField())}function jn(h){return h.explicitOrderBy.length>0?h.explicitOrderBy[0].field:null}function zn(h){for(let d of h.filters){let h=d.getFirstInequalityField();if(null!==h)return h}return null}function Wn(h){return null!==h.collectionGroup}function Hn(h){if(null===h.wt){h.wt=[];let d=zn(h),_=jn(h);if(null!==d&&null===_)d.isKeyField()||h.wt.push(new dn(d)),h.wt.push(new dn(at.keyField(),"asc"));else{let d=!1;for(let _ of h.explicitOrderBy)h.wt.push(_),_.field.isKeyField()&&(d=!0);if(!d){let d=h.explicitOrderBy.length>0?h.explicitOrderBy[h.explicitOrderBy.length-1].dir:"asc";h.wt.push(new dn(at.keyField(),d))}}}return h.wt}function Jn(h){if(!h._t){if("F"===h.limitType)h._t=Mn(h.path,h.collectionGroup,Hn(h),h.filters,h.limit,h.startAt,h.endAt);else{let d=[];for(let _ of Hn(h)){let h="desc"===_.dir?"asc":"desc";d.push(new dn(_.field,h))}let _=h.endAt?new hn(h.endAt.position,h.endAt.inclusive):null,V=h.startAt?new hn(h.startAt.position,h.startAt.inclusive):null;h._t=Mn(h.path,h.collectionGroup,d,h.filters,h.limit,_,V)}}return h._t}function Yn(h,d){d.getFirstInequalityField(),zn(h);let _=h.filters.concat([d]);return new Un(h.path,h.collectionGroup,h.explicitOrderBy.slice(),_,h.limit,h.limitType,h.startAt,h.endAt)}function Xn(h,d,_){return new Un(h.path,h.collectionGroup,h.explicitOrderBy.slice(),h.filters.slice(),d,_,h.startAt,h.endAt)}function Zn(h,d){return On(Jn(h),Jn(d))&&h.limitType===d.limitType}function ts(h){return`${$n(Jn(h))}|lt:${h.limitType}`}function es(h){var d;let _;return`Query(target=${_=(d=Jn(h)).path.canonicalString(),null!==d.collectionGroup&&(_+=" collectionGroup="+d.collectionGroup),d.filters.length>0&&(_+=`, filters: [${d.filters.map(h=>(function Rn(h){return h instanceof mn?`${h.field.canonicalString()} ${h.op} ${je(h.value)}`:h instanceof gn?h.op.toString()+" {"+h.getFilters().map(Rn).join(" ,")+"}":"Filter"})(h)).join(", ")}]`),null==d.limit||(_+=", limit: "+d.limit),d.orderBy.length>0&&(_+=`, orderBy: [${d.orderBy.map(h=>`${h.field.canonicalString()} (${h.dir})`).join(", ")}]`),d.startAt&&(_+=", startAt: "+(d.startAt.inclusive?"b:":"a:")+d.startAt.position.map(h=>je(h)).join(",")),d.endAt&&(_+=", endAt: "+(d.endAt.inclusive?"a:":"b:")+d.endAt.position.map(h=>je(h)).join(",")),`Target(${_})`}; limitType=${h.limitType})`}function ns(h,d){return d.isFoundDocument()&&function(h,d){let _=d.key.path;return null!==h.collectionGroup?d.key.hasCollectionId(h.collectionGroup)&&h.path.isPrefixOf(_):ht.isDocumentKey(h.path)?h.path.isEqual(_):h.path.isImmediateParentOf(_)}(h,d)&&function(h,d){for(let _ of Hn(h))if(!_.field.isKeyField()&&null===d.data.field(_.field))return!1;return!0}(h,d)&&function(h,d){for(let _ of h.filters)if(!_.matches(d))return!1;return!0}(h,d)&&(!h.startAt||!!function(h,d,_){let V=ln(h,d,_);return h.inclusive?V<=0:V<0}(h.startAt,Hn(h),d))&&(!h.endAt||!!function(h,d,_){let V=ln(h,d,_);return h.inclusive?V>=0:V>0}(h.endAt,Hn(h),d))}function is(h){return(d,_)=>{let V=!1;for(let ee of Hn(h)){let h=function(h,d,_){let V=h.field.isKeyField()?ht.comparator(d.key,_.key):function(h,d,_){let V=d.data.field(h),ee=_.data.field(h);return null!==V&&null!==ee?Ke(V,ee):index_esm2017_O()}(h.field,d,_);switch(h.dir){case"asc":return V;case"desc":return -1*V;default:return index_esm2017_O()}}(ee,d,_);if(0!==h)return h;V=V||ee.field.isKeyField()}return 0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let os=class os{constructor(h,d){this.mapKeyFn=h,this.equalsFn=d,this.inner={},this.innerSize=0}get(h){let d=this.mapKeyFn(h),_=this.inner[d];if(void 0!==_){for(let[d,V]of _)if(this.equalsFn(d,h))return V}}has(h){return void 0!==this.get(h)}set(h,d){let _=this.mapKeyFn(h),V=this.inner[_];if(void 0===V)return this.inner[_]=[[h,d]],void this.innerSize++;for(let _=0;_<V.length;_++)if(this.equalsFn(V[_][0],h))return void(V[_]=[h,d]);V.push([h,d]),this.innerSize++}delete(h){let d=this.mapKeyFn(h),_=this.inner[d];if(void 0===_)return!1;for(let V=0;V<_.length;V++)if(this.equalsFn(_[V][0],h))return 1===_.length?delete this.inner[d]:_.splice(V,1),this.innerSize--,!0;return!1}forEach(h){ge(this.inner,(d,_)=>{for(let[d,V]of _)h(d,V)})}isEmpty(){return ye(this.inner)}size(){return this.innerSize}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tD=new pe(ht.comparator),tj=new pe(ht.comparator);function hs(...h){let d=tj;for(let _ of h)d=d.insert(_.key,_);return d}function ls(h){let d=tj;return h.forEach((h,_)=>d=d.insert(h,_.overlayedDocument)),d}function ws(){return new os(h=>h.toString(),(h,d)=>h.isEqual(d))}let tL=new pe(ht.comparator),tF=new Ee(ht.comparator);function gs(...h){let d=tF;for(let _ of h)d=d.add(_);return d}let tZ=new Ee(et);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Is(h,d){if(h.useProto3Json){if(isNaN(d))return{doubleValue:"NaN"};if(d===1/0)return{doubleValue:"Infinity"};if(d===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Bt(d)?"-0":d}}function Ts(h){return{integerValue:""+h}}function Es(h,d){return"number"==typeof d&&Number.isInteger(d)&&!Bt(d)&&d<=Number.MAX_SAFE_INTEGER&&d>=Number.MIN_SAFE_INTEGER?Ts(d):Is(h,d)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let As=class As{constructor(){this._=void 0}};function Ps(h,d){return h instanceof xs?He(d)||d&&"doubleValue"in d?d:{integerValue:0}:null}let bs=class bs extends As{};let Vs=class Vs extends As{constructor(h){super(),this.elements=h}};function Ss(h,d){let _=ks(d);for(let d of h.elements)_.some(h=>qe(h,d))||_.push(d);return{arrayValue:{values:_}}}let Ds=class Ds extends As{constructor(h){super(),this.elements=h}};function Cs(h,d){let _=ks(d);for(let d of h.elements)_=_.filter(h=>!qe(h,d));return{arrayValue:{values:_}}}let xs=class xs extends As{constructor(h,d){super(),this.serializer=h,this.gt=d}};function Ns(h){return Ce(h.integerValue||h.doubleValue)}function ks(h){return Je(h)&&h.arrayValue.values?h.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ms=class Ms{constructor(h,d){this.field=h,this.transform=d}};let Os=class Os{constructor(h,d){this.version=h,this.transformResults=d}};let Fs=class Fs{constructor(h,d){this.updateTime=h,this.exists=d}static none(){return new Fs}static exists(h){return new Fs(void 0,h)}static updateTime(h){return new Fs(h)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(h){return this.exists===h.exists&&(this.updateTime?!!h.updateTime&&this.updateTime.isEqual(h.updateTime):!h.updateTime)}};function Bs(h,d){return void 0!==h.updateTime?d.isFoundDocument()&&d.version.isEqual(h.updateTime):void 0===h.exists||h.exists===d.isFoundDocument()}let Ls=class Ls{};function qs(h,d){if(!h.hasLocalMutations||d&&0===d.fields.length)return null;if(null===d)return h.isNoDocument()?new Ys(h.key,Fs.none()):new js(h.key,h.data,Fs.none());{let _=h.data,V=un.empty(),ee=new Ee(at.comparator);for(let h of d.fields)if(!ee.has(h)){let d=_.field(h);null===d&&h.length>1&&(h=h.popLast(),d=_.field(h)),null===d?V.delete(h):V.set(h,d),ee=ee.add(h)}return new zs(h.key,V,new Re(ee.toArray()),Fs.none())}}function Ks(h,d,_,V){return h instanceof js?function(h,d,_,V){if(!Bs(h.precondition,d))return _;let ee=h.value.clone(),er=Js(h.fieldTransforms,V,d);return ee.setAll(er),d.convertToFoundDocument(d.version,ee).setHasLocalMutations(),null}(h,d,_,V):h instanceof zs?function(h,d,_,V){if(!Bs(h.precondition,d))return _;let ee=Js(h.fieldTransforms,V,d),er=d.data;return(er.setAll(Ws(h)),er.setAll(ee),d.convertToFoundDocument(d.version,er).setHasLocalMutations(),null===_)?null:_.unionWith(h.fieldMask.fields).unionWith(h.fieldTransforms.map(h=>h.field))}(h,d,_,V):Bs(h.precondition,d)?(d.convertToNoDocument(d.version).setHasLocalMutations(),null):_}function Qs(h,d){var _,V;return h.type===d.type&&!!h.key.isEqual(d.key)&&!!h.precondition.isEqual(d.precondition)&&(_=h.fieldTransforms,V=d.fieldTransforms,!!(void 0===_&&void 0===V||!(!_||!V)&&nt(_,V,(h,d)=>{var _,V;return h.field.isEqual(d.field)&&(_=h.transform,V=d.transform,_ instanceof Vs&&V instanceof Vs||_ instanceof Ds&&V instanceof Ds?nt(_.elements,V.elements,qe):_ instanceof xs&&V instanceof xs?qe(_.gt,V.gt):_ instanceof bs&&V instanceof bs)})))&&(0===h.type?h.value.isEqual(d.value):1!==h.type||h.data.isEqual(d.data)&&h.fieldMask.isEqual(d.fieldMask))}let js=class js extends Ls{constructor(h,d,_,V=[]){super(),this.key=h,this.value=d,this.precondition=_,this.fieldTransforms=V,this.type=0}getFieldMask(){return null}};let zs=class zs extends Ls{constructor(h,d,_,V,ee=[]){super(),this.key=h,this.data=d,this.fieldMask=_,this.precondition=V,this.fieldTransforms=ee,this.type=1}getFieldMask(){return this.fieldMask}};function Ws(h){let d=new Map;return h.fieldMask.fields.forEach(_=>{if(!_.isEmpty()){let V=h.data.field(_);d.set(_,V)}}),d}function Hs(h,d,_){var V;let ee=new Map;h.length===_.length||index_esm2017_O();for(let er=0;er<_.length;er++){let eo=h[er],ec=eo.transform,eh=d.data.field(eo.field);ee.set(eo.field,(V=_[er],ec instanceof Vs?Ss(ec,eh):ec instanceof Ds?Cs(ec,eh):V))}return ee}function Js(h,d,_){let V=new Map;for(let ee of h){let h=ee.transform,er=_.data.field(ee.field);V.set(ee.field,h instanceof bs?function(h,d){let _={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:h.seconds,nanos:h.nanoseconds}}}};return d&&Ne(d)&&(d=ke(d)),d&&(_.fields.__previous_value__=d),{mapValue:_}}(d,er):h instanceof Vs?Ss(h,er):h instanceof Ds?Cs(h,er):function(h,d){let _=Ps(h,d),V=Ns(_)+Ns(h.gt);return He(_)&&He(h.gt)?Ts(V):Is(h.serializer,V)}(h,er))}return V}let Ys=class Ys extends Ls{constructor(h,d){super(),this.key=h,this.precondition=d,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};let Xs=class Xs extends Ls{constructor(h,d){super(),this.key=h,this.precondition=d,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zs=class Zs{constructor(h,d,_,V){this.batchId=h,this.localWriteTime=d,this.baseMutations=_,this.mutations=V}applyToRemoteDocument(h,d){let _=d.mutationResults;for(let d=0;d<this.mutations.length;d++){let ee=this.mutations[d];if(ee.key.isEqual(h.key)){var V;V=_[d],ee instanceof js?function(h,d,_){let V=h.value.clone(),ee=Hs(h.fieldTransforms,d,_.transformResults);V.setAll(ee),d.convertToFoundDocument(_.version,V).setHasCommittedMutations()}(ee,h,V):ee instanceof zs?function(h,d,_){if(!Bs(h.precondition,d))return void d.convertToUnknownDocument(_.version);let V=Hs(h.fieldTransforms,d,_.transformResults),ee=d.data;ee.setAll(Ws(h)),ee.setAll(V),d.convertToFoundDocument(_.version,ee).setHasCommittedMutations()}(ee,h,V):function(h,d,_){d.convertToNoDocument(_.version).setHasCommittedMutations()}(0,h,V)}}}applyToLocalView(h,d){for(let _ of this.baseMutations)_.key.isEqual(h.key)&&(d=Ks(_,h,d,this.localWriteTime));for(let _ of this.mutations)_.key.isEqual(h.key)&&(d=Ks(_,h,d,this.localWriteTime));return d}applyToLocalDocumentSet(h,d){let _=ws();return this.mutations.forEach(V=>{let ee=h.get(V.key),er=ee.overlayedDocument,eo=this.applyToLocalView(er,ee.mutatedFields);eo=d.has(V.key)?null:eo;let ec=qs(er,eo);null!==ec&&_.set(V.key,ec),er.isValidDocument()||er.convertToNoDocument(rt.min())}),_}keys(){return this.mutations.reduce((h,d)=>h.add(d.key),gs())}isEqual(h){return this.batchId===h.batchId&&nt(this.mutations,h.mutations,(h,d)=>Qs(h,d))&&nt(this.baseMutations,h.baseMutations,(h,d)=>Qs(h,d))}};let ti=class ti{constructor(h,d,_,V){this.batch=h,this.commitVersion=d,this.mutationResults=_,this.docVersions=V}static from(h,d,_){h.mutations.length===_.length||index_esm2017_O();let V=tL,ee=h.mutations;for(let h=0;h<ee.length;h++)V=V.insert(ee[h].key,_[h].version);return new ti(h,d,_,V)}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ei=class ei{constructor(h,d){this.largestBatchId=h,this.mutation=d}getKey(){return this.mutation.key}isEqual(h){return null!==h&&this.mutation===h.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let si=class si{constructor(h,d){this.count=h,this.unchangedNames=d}};function ui(h){if(void 0===h)return index_esm2017_k("GRPC error has no .code"),t$.UNKNOWN;switch(h){case ec.OK:return t$.OK;case ec.CANCELLED:return t$.CANCELLED;case ec.UNKNOWN:return t$.UNKNOWN;case ec.DEADLINE_EXCEEDED:return t$.DEADLINE_EXCEEDED;case ec.RESOURCE_EXHAUSTED:return t$.RESOURCE_EXHAUSTED;case ec.INTERNAL:return t$.INTERNAL;case ec.UNAVAILABLE:return t$.UNAVAILABLE;case ec.UNAUTHENTICATED:return t$.UNAUTHENTICATED;case ec.INVALID_ARGUMENT:return t$.INVALID_ARGUMENT;case ec.NOT_FOUND:return t$.NOT_FOUND;case ec.ALREADY_EXISTS:return t$.ALREADY_EXISTS;case ec.PERMISSION_DENIED:return t$.PERMISSION_DENIED;case ec.FAILED_PRECONDITION:return t$.FAILED_PRECONDITION;case ec.ABORTED:return t$.ABORTED;case ec.OUT_OF_RANGE:return t$.OUT_OF_RANGE;case ec.UNIMPLEMENTED:return t$.UNIMPLEMENTED;case ec.DATA_LOSS:return t$.DATA_LOSS;default:return index_esm2017_O()}}(eh=ec||(ec={}))[eh.OK=0]="OK",eh[eh.CANCELLED=1]="CANCELLED",eh[eh.UNKNOWN=2]="UNKNOWN",eh[eh.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",eh[eh.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",eh[eh.NOT_FOUND=5]="NOT_FOUND",eh[eh.ALREADY_EXISTS=6]="ALREADY_EXISTS",eh[eh.PERMISSION_DENIED=7]="PERMISSION_DENIED",eh[eh.UNAUTHENTICATED=16]="UNAUTHENTICATED",eh[eh.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",eh[eh.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",eh[eh.ABORTED=10]="ABORTED",eh[eh.OUT_OF_RANGE=11]="OUT_OF_RANGE",eh[eh.UNIMPLEMENTED=12]="UNIMPLEMENTED",eh[eh.INTERNAL=13]="INTERNAL",eh[eh.UNAVAILABLE=14]="UNAVAILABLE",eh[eh.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ci=class ci{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return tV}static getOrCreateInstance(){return null===tV&&(tV=new ci),tV}onExistenceFilterMismatch(h){let d=Symbol();return this.onExistenceFilterMismatchCallbacks.set(d,h),()=>this.onExistenceFilterMismatchCallbacks.delete(d)}notifyOnExistenceFilterMismatch(h){this.onExistenceFilterMismatchCallbacks.forEach(d=>d(h))}};let tV=null,tB=new tP([4294967295,4294967295],0);function fi(h){let d=(new TextEncoder).encode(h),_=new tC;return _.update(d),new Uint8Array(_.digest())}function di(h){let d=new DataView(h.buffer),_=d.getUint32(0,!0),V=d.getUint32(4,!0),ee=d.getUint32(8,!0),er=d.getUint32(12,!0);return[new tP([_,V],0),new tP([ee,er],0)]}let wi=class wi{constructor(h,d,_){if(this.bitmap=h,this.padding=d,this.hashCount=_,d<0||d>=8)throw new _i(`Invalid padding: ${d}`);if(_<0||h.length>0&&0===this.hashCount)throw new _i(`Invalid hash count: ${_}`);if(0===h.length&&0!==d)throw new _i(`Invalid padding when bitmap length is 0: ${d}`);this.It=8*h.length-d,this.Tt=tP.fromNumber(this.It)}Et(h,d,_){let V=h.add(d.multiply(tP.fromNumber(_)));return 1===V.compare(tB)&&(V=new tP([V.getBits(0),V.getBits(1)],0)),V.modulo(this.Tt).toNumber()}At(h){return 0!=(this.bitmap[Math.floor(h/8)]&1<<h%8)}vt(h){if(0===this.It)return!1;let d=fi(h),[_,V]=di(d);for(let h=0;h<this.hashCount;h++){let d=this.Et(_,V,h);if(!this.At(d))return!1}return!0}static create(h,d,_){let V=new Uint8Array(Math.ceil(h/8)),ee=new wi(V,h%8==0?0:8-h%8,d);return _.forEach(h=>ee.insert(h)),ee}insert(h){if(0===this.It)return;let d=fi(h),[_,V]=di(d);for(let h=0;h<this.hashCount;h++){let d=this.Et(_,V,h);this.Rt(d)}}Rt(h){let d=Math.floor(h/8);this.bitmap[d]|=1<<h%8}};let _i=class _i extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mi=class mi{constructor(h,d,_,V,ee){this.snapshotVersion=h,this.targetChanges=d,this.targetMismatches=_,this.documentUpdates=V,this.resolvedLimboDocuments=ee}static createSynthesizedRemoteEventForCurrentChange(h,d,_){let V=new Map;return V.set(h,gi.createSynthesizedTargetChangeForCurrentChange(h,d,_)),new mi(rt.min(),V,new pe(et),tD,gs())}};let gi=class gi{constructor(h,d,_,V,ee){this.resumeToken=h,this.current=d,this.addedDocuments=_,this.modifiedDocuments=V,this.removedDocuments=ee}static createSynthesizedTargetChangeForCurrentChange(h,d,_){return new gi(_,d,gs(),gs(),gs())}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yi=class yi{constructor(h,d,_,V){this.Pt=h,this.removedTargetIds=d,this.key=_,this.bt=V}};let pi=class pi{constructor(h,d){this.targetId=h,this.Vt=d}};let Ii=class Ii{constructor(h,d,_=Ve.EMPTY_BYTE_STRING,V=null){this.state=h,this.targetIds=d,this.resumeToken=_,this.cause=V}};let Ti=class Ti{constructor(){this.St=0,this.Dt=vi(),this.Ct=Ve.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(h){h.approximateByteSize()>0&&(this.Nt=!0,this.Ct=h)}Ot(){let h=gs(),d=gs(),_=gs();return this.Dt.forEach((V,ee)=>{switch(ee){case 0:h=h.add(V);break;case 2:d=d.add(V);break;case 1:_=_.add(V);break;default:index_esm2017_O()}}),new gi(this.Ct,this.xt,h,d,_)}Ft(){this.Nt=!1,this.Dt=vi()}Bt(h,d){this.Nt=!0,this.Dt=this.Dt.insert(h,d)}Lt(h){this.Nt=!0,this.Dt=this.Dt.remove(h)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}};let Ei=class Ei{constructor(h){this.Gt=h,this.Qt=new Map,this.jt=tD,this.zt=Ai(),this.Wt=new pe(et)}Ht(h){for(let d of h.Pt)h.bt&&h.bt.isFoundDocument()?this.Jt(d,h.bt):this.Yt(d,h.key,h.bt);for(let d of h.removedTargetIds)this.Yt(d,h.key,h.bt)}Xt(h){this.forEachTarget(h,d=>{let _=this.Zt(d);switch(h.state){case 0:this.te(d)&&_.$t(h.resumeToken);break;case 1:_.Ut(),_.kt||_.Ft(),_.$t(h.resumeToken);break;case 2:_.Ut(),_.kt||this.removeTarget(d);break;case 3:this.te(d)&&(_.Kt(),_.$t(h.resumeToken));break;case 4:this.te(d)&&(this.ee(d),_.$t(h.resumeToken));break;default:index_esm2017_O()}})}forEachTarget(h,d){h.targetIds.length>0?h.targetIds.forEach(d):this.Qt.forEach((h,_)=>{this.te(_)&&d(_)})}ne(h){var d;let _=h.targetId,V=h.Vt.count,ee=this.se(_);if(ee){let er=ee.target;if(Fn(er)){if(0===V){let h=new ht(er.path);this.Yt(_,h,an.newNoDocument(h,rt.min()))}else 1===V||index_esm2017_O()}else{let ee=this.ie(_);if(ee!==V){let V=this.re(h,ee);if(0!==V){this.ee(_);let h=2===V?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Wt=this.Wt.insert(_,h)}null===(d=ci.instance)||void 0===d||d.notifyOnExistenceFilterMismatch(function(h,d,_){var V,ee,er,eo,ec,eh;let ep={localCacheCount:d,existenceFilterCount:_.count},ef=_.unchangedNames;return ef&&(ep.bloomFilter={applied:0===h,hashCount:null!==(V=null==ef?void 0:ef.hashCount)&&void 0!==V?V:0,bitmapLength:null!==(eo=null===(er=null===(ee=null==ef?void 0:ef.bits)||void 0===ee?void 0:ee.bitmap)||void 0===er?void 0:er.length)&&void 0!==eo?eo:0,padding:null!==(eh=null===(ec=null==ef?void 0:ef.bits)||void 0===ec?void 0:ec.padding)&&void 0!==eh?eh:0}),ep}(V,ee,h.Vt))}}}}re(h,d){let _,V;let{unchangedNames:ee,count:er}=h.Vt;if(!ee||!ee.bits)return 1;let{bits:{bitmap:eo="",padding:ec=0},hashCount:eh=0}=ee;try{_=xe(eo).toUint8Array()}catch(h){if(h instanceof Pe)return index_esm2017_M("Decoding the base64 bloom filter in existence filter failed ("+h.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw h}try{V=new wi(_,ec,eh)}catch(h){return index_esm2017_M(h instanceof _i?"BloomFilter error: ":"Applying bloom filter failed: ",h),1}return 0===V.It?1:er!==d-this.oe(h.targetId,V)?2:0}oe(h,d){let _=this.Gt.getRemoteKeysForTarget(h),V=0;return _.forEach(_=>{let ee=this.Gt.ue(),er=`projects/${ee.projectId}/databases/${ee.database}/documents/${_.path.canonicalString()}`;d.vt(er)||(this.Yt(h,_,null),V++)}),V}ce(h){let d=new Map;this.Qt.forEach((_,V)=>{let ee=this.se(V);if(ee){if(_.current&&Fn(ee.target)){let d=new ht(ee.target.path);null!==this.jt.get(d)||this.ae(V,d)||this.Yt(V,d,an.newNoDocument(d,h))}_.Mt&&(d.set(V,_.Ot()),_.Ft())}});let _=gs();this.zt.forEach((h,d)=>{let V=!0;d.forEachWhile(h=>{let d=this.se(h);return!d||"TargetPurposeLimboResolution"===d.purpose||(V=!1,!1)}),V&&(_=_.add(h))}),this.jt.forEach((d,_)=>_.setReadTime(h));let V=new mi(h,d,this.Wt,this.jt,_);return this.jt=tD,this.zt=Ai(),this.Wt=new pe(et),V}Jt(h,d){if(!this.te(h))return;let _=this.ae(h,d.key)?2:0;this.Zt(h).Bt(d.key,_),this.jt=this.jt.insert(d.key,d),this.zt=this.zt.insert(d.key,this.he(d.key).add(h))}Yt(h,d,_){if(!this.te(h))return;let V=this.Zt(h);this.ae(h,d)?V.Bt(d,1):V.Lt(d),this.zt=this.zt.insert(d,this.he(d).delete(h)),_&&(this.jt=this.jt.insert(d,_))}removeTarget(h){this.Qt.delete(h)}ie(h){let d=this.Zt(h).Ot();return this.Gt.getRemoteKeysForTarget(h).size+d.addedDocuments.size-d.removedDocuments.size}qt(h){this.Zt(h).qt()}Zt(h){let d=this.Qt.get(h);return d||(d=new Ti,this.Qt.set(h,d)),d}he(h){let d=this.zt.get(h);return d||(d=new Ee(et),this.zt=this.zt.insert(h,d)),d}te(h){let d=null!==this.se(h);return d||index_esm2017_N("WatchChangeAggregator","Detected inactive target",h),d}se(h){let d=this.Qt.get(h);return d&&d.kt?null:this.Gt.le(h)}ee(h){this.Qt.set(h,new Ti),this.Gt.getRemoteKeysForTarget(h).forEach(d=>{this.Yt(h,d,null)})}ae(h,d){return this.Gt.getRemoteKeysForTarget(h).has(d)}};function Ai(){return new pe(ht.comparator)}function vi(){return new pe(ht.comparator)}let tW={asc:"ASCENDING",desc:"DESCENDING"},tU={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},tz={and:"AND",or:"OR"};let Vi=class Vi{constructor(h,d){this.databaseId=h,this.useProto3Json=d}};function Si(h,d){return h.useProto3Json||null==d?d:{value:d}}function Di(h,d){return h.useProto3Json?`${new Date(1e3*d.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+d.nanoseconds).slice(-9)}Z`:{seconds:""+d.seconds,nanos:d.nanoseconds}}function Ci(h,d){return h.useProto3Json?d.toBase64():d.toUint8Array()}function Ni(h){return h||index_esm2017_O(),rt.fromTimestamp(function(h){let d=De(h);return new it(d.seconds,d.nanos)}(h))}function ki(h,d){return new ut(["projects",h.projectId,"databases",h.database]).child("documents").child(d).canonicalString()}function Mi(h){let d=ut.fromString(h);return ur(d)||index_esm2017_O(),d}function $i(h,d){return ki(h.databaseId,d.path)}function Oi(h,d){let _=Mi(d);if(_.get(1)!==h.databaseId.projectId)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+_.get(1)+" vs "+h.databaseId.projectId);if(_.get(3)!==h.databaseId.database)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+_.get(3)+" vs "+h.databaseId.database);return new ht(qi(_))}function Fi(h,d){return ki(h.databaseId,d)}function Li(h){return new ut(["projects",h.databaseId.projectId,"databases",h.databaseId.database]).canonicalString()}function qi(h){return h.length>4&&"documents"===h.get(4)||index_esm2017_O(),h.popFirst(5)}function Ui(h,d,_){return{name:$i(h,d),fields:_.value.mapValue.fields}}function sr(h){return{fieldPath:h.canonicalString()}}function ir(h){return at.fromServerFormat(h.fieldPath)}function ur(h){return h.length>=4&&"projects"===h.get(0)&&"databases"===h.get(2)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cr=class cr{constructor(h,d,_,V,ee=rt.min(),er=rt.min(),eo=Ve.EMPTY_BYTE_STRING,ec=null){this.target=h,this.targetId=d,this.purpose=_,this.sequenceNumber=V,this.snapshotVersion=ee,this.lastLimboFreeSnapshotVersion=er,this.resumeToken=eo,this.expectedCount=ec}withSequenceNumber(h){return new cr(this.target,this.targetId,this.purpose,h,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(h,d){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,d,this.lastLimboFreeSnapshotVersion,h,null)}withExpectedCount(h){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,h)}withLastLimboFreeSnapshotVersion(h){return new cr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,h,this.resumeToken,this.expectedCount)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ar=class ar{constructor(h){this.fe=h}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let br=class br{constructor(){}_e(h,d){this.me(h,d),d.ge()}me(h,d){if("nullValue"in h)this.ye(d,5);else if("booleanValue"in h)this.ye(d,10),d.pe(h.booleanValue?1:0);else if("integerValue"in h)this.ye(d,15),d.pe(Ce(h.integerValue));else if("doubleValue"in h){let _=Ce(h.doubleValue);isNaN(_)?this.ye(d,13):(this.ye(d,15),Bt(_)?d.pe(0):d.pe(_))}else if("timestampValue"in h){let _=h.timestampValue;this.ye(d,20),"string"==typeof _?d.Ie(_):(d.Ie(`${_.seconds||""}`),d.pe(_.nanos||0))}else if("stringValue"in h)this.Te(h.stringValue,d),this.Ee(d);else if("bytesValue"in h)this.ye(d,30),d.Ae(xe(h.bytesValue)),this.Ee(d);else if("referenceValue"in h)this.ve(h.referenceValue,d);else if("geoPointValue"in h){let _=h.geoPointValue;this.ye(d,45),d.pe(_.latitude||0),d.pe(_.longitude||0)}else"mapValue"in h?en(h)?this.ye(d,Number.MAX_SAFE_INTEGER):(this.Re(h.mapValue,d),this.Ee(d)):"arrayValue"in h?(this.Pe(h.arrayValue,d),this.Ee(d)):index_esm2017_O()}Te(h,d){this.ye(d,25),this.be(h,d)}be(h,d){d.Ie(h)}Re(h,d){let _=h.fields||{};for(let h of(this.ye(d,55),Object.keys(_)))this.Te(h,d),this.me(_[h],d)}Pe(h,d){let _=h.values||[];for(let h of(this.ye(d,50),_))this.me(h,d)}ve(h,d){this.ye(d,37),ht.fromName(h).path.forEach(h=>{this.ye(d,60),this.be(h,d)})}ye(h,d){h.pe(d)}Ee(h){h.pe(2)}};br.Ve=new br;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zr=class zr{constructor(){this.rn=new Wr}addToCollectionParentIndex(h,d){return this.rn.add(d),Rt.resolve()}getCollectionParents(h,d){return Rt.resolve(this.rn.getEntries(d))}addFieldIndex(h,d){return Rt.resolve()}deleteFieldIndex(h,d){return Rt.resolve()}getDocumentsMatchingTarget(h,d){return Rt.resolve(null)}getIndexType(h,d){return Rt.resolve(0)}getFieldIndexes(h,d){return Rt.resolve([])}getNextCollectionGroupToUpdate(h){return Rt.resolve(null)}getMinOffset(h,d){return Rt.resolve(It.min())}getMinOffsetFromCollectionGroup(h,d){return Rt.resolve(It.min())}updateCollectionGroup(h,d,_){return Rt.resolve()}updateIndexEntries(h,d){return Rt.resolve()}};let Wr=class Wr{constructor(){this.index={}}add(h){let d=h.lastSegment(),_=h.popLast(),V=this.index[d]||new Ee(ut.comparator),ee=!V.has(_);return this.index[d]=V.add(_),ee}has(h){let d=h.lastSegment(),_=h.popLast(),V=this.index[d];return V&&V.has(_)}getEntries(h){return(this.index[h]||new Ee(ut.comparator)).toArray()}};new Uint8Array(0);let so=class so{constructor(h,d,_){this.cacheSizeCollectionThreshold=h,this.percentileToCollect=d,this.maximumSequenceNumbersToCollect=_}static withCacheSize(h){return new so(h,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */so.DEFAULT_COLLECTION_PERCENTILE=10,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,so.DEFAULT=new so(41943040,so.DEFAULT_COLLECTION_PERCENTILE,so.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),so.DISABLED=new so(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo=class lo{constructor(h){this.Nn=h}next(){return this.Nn+=2,this.Nn}static kn(){return new lo(0)}static Mn(){return new lo(-1)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vo=class vo{constructor(){this.changes=new os(h=>h.toString(),(h,d)=>h.isEqual(d)),this.changesApplied=!1}addEntry(h){this.assertNotApplied(),this.changes.set(h.key,h)}removeEntry(h,d){this.assertNotApplied(),this.changes.set(h,an.newInvalidDocument(h).setReadTime(d))}getEntry(h,d){this.assertNotApplied();let _=this.changes.get(d);return void 0!==_?Rt.resolve(_):this.getFromCache(h,d)}getEntries(h,d){return this.getAllFromCache(h,d)}apply(h){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(h)}assertNotApplied(){}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let No=class No{constructor(h,d){this.overlayedDocument=h,this.mutatedFields=d}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ko=class ko{constructor(h,d,_,V){this.remoteDocumentCache=h,this.mutationQueue=d,this.documentOverlayCache=_,this.indexManager=V}getDocument(h,d){let _=null;return this.documentOverlayCache.getOverlay(h,d).next(V=>(_=V,this.remoteDocumentCache.getEntry(h,d))).next(h=>(null!==_&&Ks(_.mutation,h,Re.empty(),it.now()),h))}getDocuments(h,d){return this.remoteDocumentCache.getEntries(h,d).next(d=>this.getLocalViewOfDocuments(h,d,gs()).next(()=>d))}getLocalViewOfDocuments(h,d,_=gs()){let V=ws();return this.populateOverlays(h,V,d).next(()=>this.computeViews(h,d,V,_).next(h=>{let d=hs();return h.forEach((h,_)=>{d=d.insert(h,_.overlayedDocument)}),d}))}getOverlayedDocuments(h,d){let _=ws();return this.populateOverlays(h,_,d).next(()=>this.computeViews(h,d,_,gs()))}populateOverlays(h,d,_){let V=[];return _.forEach(h=>{d.has(h)||V.push(h)}),this.documentOverlayCache.getOverlays(h,V).next(h=>{h.forEach((h,_)=>{d.set(h,_)})})}computeViews(h,d,_,V){let ee=tD,er=ws(),eo=ws();return d.forEach((h,d)=>{let eo=_.get(d.key);V.has(d.key)&&(void 0===eo||eo.mutation instanceof zs)?ee=ee.insert(d.key,d):void 0!==eo?(er.set(d.key,eo.mutation.getFieldMask()),Ks(eo.mutation,d,eo.mutation.getFieldMask(),it.now())):er.set(d.key,Re.empty())}),this.recalculateAndSaveOverlays(h,ee).next(h=>(h.forEach((h,d)=>er.set(h,d)),d.forEach((h,d)=>{var _;return eo.set(h,new No(d,null!==(_=er.get(h))&&void 0!==_?_:null))}),eo))}recalculateAndSaveOverlays(h,d){let _=ws(),V=new pe((h,d)=>h-d),ee=gs();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(h,d).next(h=>{for(let ee of h)ee.keys().forEach(h=>{let er=d.get(h);if(null===er)return;let eo=_.get(h)||Re.empty();eo=ee.applyToLocalView(er,eo),_.set(h,eo);let ec=(V.get(ee.batchId)||gs()).add(h);V=V.insert(ee.batchId,ec)})}).next(()=>{let er=[],eo=V.getReverseIterator();for(;eo.hasNext();){let V=eo.getNext(),ec=V.key,eh=V.value,ep=ws();eh.forEach(h=>{if(!ee.has(h)){let V=qs(d.get(h),_.get(h));null!==V&&ep.set(h,V),ee=ee.add(h)}}),er.push(this.documentOverlayCache.saveOverlays(h,ec,ep))}return Rt.waitFor(er)}).next(()=>_)}recalculateAndSaveOverlaysForDocumentKeys(h,d){return this.remoteDocumentCache.getEntries(h,d).next(d=>this.recalculateAndSaveOverlays(h,d))}getDocumentsMatchingQuery(h,d,_){return ht.isDocumentKey(d.path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(h,d.path):Wn(d)?this.getDocumentsMatchingCollectionGroupQuery(h,d,_):this.getDocumentsMatchingCollectionQuery(h,d,_)}getNextDocuments(h,d,_,V){return this.remoteDocumentCache.getAllFromCollectionGroup(h,d,_,V).next(ee=>{let er=V-ee.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(h,d,_.largestBatchId,V-ee.size):Rt.resolve(ws()),eo=-1,ec=ee;return er.next(d=>Rt.forEach(d,(d,_)=>(eo<_.largestBatchId&&(eo=_.largestBatchId),ee.get(d)?Rt.resolve():this.remoteDocumentCache.getEntry(h,d).next(h=>{ec=ec.insert(d,h)}))).next(()=>this.populateOverlays(h,d,ee)).next(()=>this.computeViews(h,ec,d,gs())).next(h=>({batchId:eo,changes:ls(h)})))})}getDocumentsMatchingDocumentQuery(h,d){return this.getDocument(h,new ht(d)).next(h=>{let d=hs();return h.isFoundDocument()&&(d=d.insert(h.key,h)),d})}getDocumentsMatchingCollectionGroupQuery(h,d,_){let V=d.collectionGroup,ee=hs();return this.indexManager.getCollectionParents(h,V).next(er=>Rt.forEach(er,er=>{var eo;let ec=(eo=er.child(V),new Un(eo,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt));return this.getDocumentsMatchingCollectionQuery(h,ec,_).next(h=>{h.forEach((h,d)=>{ee=ee.insert(h,d)})})}).next(()=>ee))}getDocumentsMatchingCollectionQuery(h,d,_){let V;return this.documentOverlayCache.getOverlaysForCollection(h,d.path,_.largestBatchId).next(ee=>(V=ee,this.remoteDocumentCache.getDocumentsMatchingQuery(h,d,_,V))).next(h=>{V.forEach((d,_)=>{let V=_.getKey();null===h.get(V)&&(h=h.insert(V,an.newInvalidDocument(V)))});let _=hs();return h.forEach((h,ee)=>{let er=V.get(h);void 0!==er&&Ks(er.mutation,ee,Re.empty(),it.now()),ns(d,ee)&&(_=_.insert(h,ee))}),_})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mo=class Mo{constructor(h){this.serializer=h,this.cs=new Map,this.hs=new Map}getBundleMetadata(h,d){return Rt.resolve(this.cs.get(d))}saveBundleMetadata(h,d){return this.cs.set(d.id,{id:d.id,version:d.version,createTime:Ni(d.createTime)}),Rt.resolve()}getNamedQuery(h,d){return Rt.resolve(this.hs.get(d))}saveNamedQuery(h,d){return this.hs.set(d.name,{name:d.name,query:function(h){let d=function(h){var d,_,V,ee,er,eo,ec,eh;let ep,ef=function(h){let d=Mi(h);return 4===d.length?ut.emptyPath():qi(d)}(h.parent),em=h.structuredQuery,eg=em.from?em.from.length:0,eO=null;if(eg>0){1===eg||index_esm2017_O();let h=em.from[0];h.allDescendants?eO=h.collectionId:ef=ef.child(h.collectionId)}let ey=[];em.where&&(ey=function(h){var d;let _=function Zi(h){return void 0!==h.unaryFilter?function(h){switch(h.unaryFilter.op){case"IS_NAN":let d=ir(h.unaryFilter.field);return mn.create(d,"==",{doubleValue:NaN});case"IS_NULL":let _=ir(h.unaryFilter.field);return mn.create(_,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let V=ir(h.unaryFilter.field);return mn.create(V,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let ee=ir(h.unaryFilter.field);return mn.create(ee,"!=",{nullValue:"NULL_VALUE"});default:return index_esm2017_O()}}(h):void 0!==h.fieldFilter?mn.create(ir(h.fieldFilter.field),function(h){switch(h){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return index_esm2017_O()}}(h.fieldFilter.op),h.fieldFilter.value):void 0!==h.compositeFilter?gn.create(h.compositeFilter.filters.map(h=>Zi(h)),function(h){switch(h){case"AND":return"and";case"OR":return"or";default:return index_esm2017_O()}}(h.compositeFilter.op)):index_esm2017_O()}(h);return _ instanceof gn&&Tn(d=_)&&yn(d)?_.getFilters():[_]}(em.where));let ev=[];em.orderBy&&(ev=em.orderBy.map(h=>new dn(ir(h.field),function(h){switch(h){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(h.direction))));let eS=null;em.limit&&(eS=null==(ep="object"==typeof(d=em.limit)?d.value:d)?null:ep);let e_=null;em.startAt&&(e_=function(h){let d=!!h.before,_=h.values||[];return new hn(_,d)}(em.startAt));let ew=null;return em.endAt&&(ew=function(h){let d=!h.before,_=h.values||[];return new hn(_,d)}(em.endAt)),_=ef,V=eO,ee=ev,er=ey,eo=eS,ec=e_,eh=ew,new Un(_,V,ee,er,eo,"F",ec,eh)}({parent:h.parent,structuredQuery:h.structuredQuery});return"LAST"===h.limitType?Xn(d,d.limit,"L"):d}(d.bundledQuery),readTime:Ni(d.readTime)}),Rt.resolve()}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $o=class $o{constructor(){this.overlays=new pe(ht.comparator),this.ls=new Map}getOverlay(h,d){return Rt.resolve(this.overlays.get(d))}getOverlays(h,d){let _=ws();return Rt.forEach(d,d=>this.getOverlay(h,d).next(h=>{null!==h&&_.set(d,h)})).next(()=>_)}saveOverlays(h,d,_){return _.forEach((_,V)=>{this.we(h,d,V)}),Rt.resolve()}removeOverlaysForBatchId(h,d,_){let V=this.ls.get(_);return void 0!==V&&(V.forEach(h=>this.overlays=this.overlays.remove(h)),this.ls.delete(_)),Rt.resolve()}getOverlaysForCollection(h,d,_){let V=ws(),ee=d.length+1,er=new ht(d.child("")),eo=this.overlays.getIteratorFrom(er);for(;eo.hasNext();){let h=eo.getNext().value,er=h.getKey();if(!d.isPrefixOf(er.path))break;er.path.length===ee&&h.largestBatchId>_&&V.set(h.getKey(),h)}return Rt.resolve(V)}getOverlaysForCollectionGroup(h,d,_,V){let ee=new pe((h,d)=>h-d),er=this.overlays.getIterator();for(;er.hasNext();){let h=er.getNext().value;if(h.getKey().getCollectionGroup()===d&&h.largestBatchId>_){let d=ee.get(h.largestBatchId);null===d&&(d=ws(),ee=ee.insert(h.largestBatchId,d)),d.set(h.getKey(),h)}}let eo=ws(),ec=ee.getIterator();for(;ec.hasNext()&&(ec.getNext().value.forEach((h,d)=>eo.set(h,d)),!(eo.size()>=V)););return Rt.resolve(eo)}we(h,d,_){let V=this.overlays.get(_.key);if(null!==V){let h=this.ls.get(V.largestBatchId).delete(_.key);this.ls.set(V.largestBatchId,h)}this.overlays=this.overlays.insert(_.key,new ei(d,_));let ee=this.ls.get(d);void 0===ee&&(ee=gs(),this.ls.set(d,ee)),this.ls.set(d,ee.add(_.key))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Oo=class Oo{constructor(){this.fs=new Ee(Fo.ds),this.ws=new Ee(Fo._s)}isEmpty(){return this.fs.isEmpty()}addReference(h,d){let _=new Fo(h,d);this.fs=this.fs.add(_),this.ws=this.ws.add(_)}gs(h,d){h.forEach(h=>this.addReference(h,d))}removeReference(h,d){this.ys(new Fo(h,d))}ps(h,d){h.forEach(h=>this.removeReference(h,d))}Is(h){let d=new ht(new ut([])),_=new Fo(d,h),V=new Fo(d,h+1),ee=[];return this.ws.forEachInRange([_,V],h=>{this.ys(h),ee.push(h.key)}),ee}Ts(){this.fs.forEach(h=>this.ys(h))}ys(h){this.fs=this.fs.delete(h),this.ws=this.ws.delete(h)}Es(h){let d=new ht(new ut([])),_=new Fo(d,h),V=new Fo(d,h+1),ee=gs();return this.ws.forEachInRange([_,V],h=>{ee=ee.add(h.key)}),ee}containsKey(h){let d=new Fo(h,0),_=this.fs.firstAfterOrEqual(d);return null!==_&&h.isEqual(_.key)}};let Fo=class Fo{constructor(h,d){this.key=h,this.As=d}static ds(h,d){return ht.comparator(h.key,d.key)||et(h.As,d.As)}static _s(h,d){return et(h.As,d.As)||ht.comparator(h.key,d.key)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bo=class Bo{constructor(h,d){this.indexManager=h,this.referenceDelegate=d,this.mutationQueue=[],this.vs=1,this.Rs=new Ee(Fo.ds)}checkEmpty(h){return Rt.resolve(0===this.mutationQueue.length)}addMutationBatch(h,d,_,V){let ee=this.vs;this.vs++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let er=new Zs(ee,d,_,V);for(let d of(this.mutationQueue.push(er),V))this.Rs=this.Rs.add(new Fo(d.key,ee)),this.indexManager.addToCollectionParentIndex(h,d.key.path.popLast());return Rt.resolve(er)}lookupMutationBatch(h,d){return Rt.resolve(this.Ps(d))}getNextMutationBatchAfterBatchId(h,d){let _=this.bs(d+1),V=_<0?0:_;return Rt.resolve(this.mutationQueue.length>V?this.mutationQueue[V]:null)}getHighestUnacknowledgedBatchId(){return Rt.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(h){return Rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(h,d){let _=new Fo(d,0),V=new Fo(d,Number.POSITIVE_INFINITY),ee=[];return this.Rs.forEachInRange([_,V],h=>{let d=this.Ps(h.As);ee.push(d)}),Rt.resolve(ee)}getAllMutationBatchesAffectingDocumentKeys(h,d){let _=new Ee(et);return d.forEach(h=>{let d=new Fo(h,0),V=new Fo(h,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([d,V],h=>{_=_.add(h.As)})}),Rt.resolve(this.Vs(_))}getAllMutationBatchesAffectingQuery(h,d){let _=d.path,V=_.length+1,ee=_;ht.isDocumentKey(ee)||(ee=ee.child(""));let er=new Fo(new ht(ee),0),eo=new Ee(et);return this.Rs.forEachWhile(h=>{let d=h.key.path;return!!_.isPrefixOf(d)&&(d.length===V&&(eo=eo.add(h.As)),!0)},er),Rt.resolve(this.Vs(eo))}Vs(h){let d=[];return h.forEach(h=>{let _=this.Ps(h);null!==_&&d.push(_)}),d}removeMutationBatch(h,d){0===this.Ss(d.batchId,"removed")||index_esm2017_O(),this.mutationQueue.shift();let _=this.Rs;return Rt.forEach(d.mutations,V=>{let ee=new Fo(V.key,d.batchId);return _=_.delete(ee),this.referenceDelegate.markPotentiallyOrphaned(h,V.key)}).next(()=>{this.Rs=_})}Cn(h){}containsKey(h,d){let _=new Fo(d,0),V=this.Rs.firstAfterOrEqual(_);return Rt.resolve(d.isEqual(V&&V.key))}performConsistencyCheck(h){return this.mutationQueue.length,Rt.resolve()}Ss(h,d){return this.bs(h)}bs(h){return 0===this.mutationQueue.length?0:h-this.mutationQueue[0].batchId}Ps(h){let d=this.bs(h);return d<0||d>=this.mutationQueue.length?null:this.mutationQueue[d]}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo=class Lo{constructor(h){this.Ds=h,this.docs=new pe(ht.comparator),this.size=0}setIndexManager(h){this.indexManager=h}addEntry(h,d){let _=d.key,V=this.docs.get(_),ee=V?V.size:0,er=this.Ds(d);return this.docs=this.docs.insert(_,{document:d.mutableCopy(),size:er}),this.size+=er-ee,this.indexManager.addToCollectionParentIndex(h,_.path.popLast())}removeEntry(h){let d=this.docs.get(h);d&&(this.docs=this.docs.remove(h),this.size-=d.size)}getEntry(h,d){let _=this.docs.get(d);return Rt.resolve(_?_.document.mutableCopy():an.newInvalidDocument(d))}getEntries(h,d){let _=tD;return d.forEach(h=>{let d=this.docs.get(h);_=_.insert(h,d?d.document.mutableCopy():an.newInvalidDocument(h))}),Rt.resolve(_)}getDocumentsMatchingQuery(h,d,_,V){let ee=tD,er=d.path,eo=new ht(er.child("")),ec=this.docs.getIteratorFrom(eo);for(;ec.hasNext();){let{key:h,value:{document:eo}}=ec.getNext();if(!er.isPrefixOf(h.path))break;h.path.length>er.length+1||0>=function(h,d){let _=h.readTime.compareTo(d.readTime);return 0!==_?_:0!==(_=ht.comparator(h.documentKey,d.documentKey))?_:et(h.largestBatchId,d.largestBatchId)}(new It(eo.readTime,eo.key,-1),_)||(V.has(eo.key)||ns(d,eo))&&(ee=ee.insert(eo.key,eo.mutableCopy()))}return Rt.resolve(ee)}getAllFromCollectionGroup(h,d,_,V){index_esm2017_O()}Cs(h,d){return Rt.forEach(this.docs,h=>d(h))}newChangeBuffer(h){return new qo(this)}getSize(h){return Rt.resolve(this.size)}};let qo=class qo extends vo{constructor(h){super(),this.os=h}applyChanges(h){let d=[];return this.changes.forEach((_,V)=>{V.isValidDocument()?d.push(this.os.addEntry(h,V)):this.os.removeEntry(_)}),Rt.waitFor(d)}getFromCache(h,d){return this.os.getEntry(h,d)}getAllFromCache(h,d){return this.os.getEntries(h,d)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uo=class Uo{constructor(h){this.persistence=h,this.xs=new os(h=>$n(h),On),this.lastRemoteSnapshotVersion=rt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new Oo,this.targetCount=0,this.Ms=lo.kn()}forEachTarget(h,d){return this.xs.forEach((h,_)=>d(_)),Rt.resolve()}getLastRemoteSnapshotVersion(h){return Rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(h){return Rt.resolve(this.Ns)}allocateTargetId(h){return this.highestTargetId=this.Ms.next(),Rt.resolve(this.highestTargetId)}setTargetsMetadata(h,d,_){return _&&(this.lastRemoteSnapshotVersion=_),d>this.Ns&&(this.Ns=d),Rt.resolve()}Fn(h){this.xs.set(h.target,h);let d=h.targetId;d>this.highestTargetId&&(this.Ms=new lo(d),this.highestTargetId=d),h.sequenceNumber>this.Ns&&(this.Ns=h.sequenceNumber)}addTargetData(h,d){return this.Fn(d),this.targetCount+=1,Rt.resolve()}updateTargetData(h,d){return this.Fn(d),Rt.resolve()}removeTargetData(h,d){return this.xs.delete(d.target),this.ks.Is(d.targetId),this.targetCount-=1,Rt.resolve()}removeTargets(h,d,_){let V=0,ee=[];return this.xs.forEach((er,eo)=>{eo.sequenceNumber<=d&&null===_.get(eo.targetId)&&(this.xs.delete(er),ee.push(this.removeMatchingKeysForTargetId(h,eo.targetId)),V++)}),Rt.waitFor(ee).next(()=>V)}getTargetCount(h){return Rt.resolve(this.targetCount)}getTargetData(h,d){let _=this.xs.get(d)||null;return Rt.resolve(_)}addMatchingKeys(h,d,_){return this.ks.gs(d,_),Rt.resolve()}removeMatchingKeys(h,d,_){this.ks.ps(d,_);let V=this.persistence.referenceDelegate,ee=[];return V&&d.forEach(d=>{ee.push(V.markPotentiallyOrphaned(h,d))}),Rt.waitFor(ee)}removeMatchingKeysForTargetId(h,d){return this.ks.Is(d),Rt.resolve()}getMatchingKeysForTargetId(h,d){let _=this.ks.Es(d);return Rt.resolve(_)}containsKey(h,d){return Rt.resolve(this.ks.containsKey(d))}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ko=class Ko{constructor(h,d){this.$s={},this.overlays={},this.Os=new Ot(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=h(this),this.Bs=new Uo(this),this.indexManager=new zr,this.remoteDocumentCache=new Lo(h=>this.referenceDelegate.Ls(h)),this.serializer=new ar(d),this.qs=new Mo(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(h){return this.indexManager}getDocumentOverlayCache(h){let d=this.overlays[h.toKey()];return d||(d=new $o,this.overlays[h.toKey()]=d),d}getMutationQueue(h,d){let _=this.$s[h.toKey()];return _||(_=new Bo(d,this.referenceDelegate),this.$s[h.toKey()]=_),_}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(h,d,_){index_esm2017_N("MemoryPersistence","Starting transaction:",h);let V=new Go(this.Os.next());return this.referenceDelegate.Us(),_(V).next(h=>this.referenceDelegate.Ks(V).next(()=>h)).toPromise().then(h=>(V.raiseOnCommittedEvent(),h))}Gs(h,d){return Rt.or(Object.values(this.$s).map(_=>()=>_.containsKey(h,d)))}};let Go=class Go extends At{constructor(h){super(),this.currentSequenceNumber=h}};let Qo=class Qo{constructor(h){this.persistence=h,this.Qs=new Oo,this.js=null}static zs(h){return new Qo(h)}get Ws(){if(this.js)return this.js;throw index_esm2017_O()}addReference(h,d,_){return this.Qs.addReference(_,d),this.Ws.delete(_.toString()),Rt.resolve()}removeReference(h,d,_){return this.Qs.removeReference(_,d),this.Ws.add(_.toString()),Rt.resolve()}markPotentiallyOrphaned(h,d){return this.Ws.add(d.toString()),Rt.resolve()}removeTarget(h,d){this.Qs.Is(d.targetId).forEach(h=>this.Ws.add(h.toString()));let _=this.persistence.getTargetCache();return _.getMatchingKeysForTargetId(h,d.targetId).next(h=>{h.forEach(h=>this.Ws.add(h.toString()))}).next(()=>_.removeTargetData(h,d))}Us(){this.js=new Set}Ks(h){let d=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rt.forEach(this.Ws,_=>{let V=ht.fromPath(_);return this.Hs(h,V).next(h=>{h||d.removeEntry(V,rt.min())})}).next(()=>(this.js=null,d.apply(h)))}updateLimboDocument(h,d){return this.Hs(h,d).next(h=>{h?this.Ws.delete(d.toString()):this.Ws.add(d.toString())})}Ls(h){return 0}Hs(h,d){return Rt.or([()=>Rt.resolve(this.Qs.containsKey(d)),()=>this.persistence.getTargetCache().containsKey(h,d),()=>this.persistence.Gs(h,d)])}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tu=class tu{constructor(h,d,_,V){this.targetId=h,this.fromCache=d,this.Fi=_,this.Bi=V}static Li(h,d){let _=gs(),V=gs();for(let h of d.docChanges)switch(h.type){case 0:_=_.add(h.doc.key);break;case 1:V=V.add(h.doc.key)}return new tu(h,d.fromCache,_,V)}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eu=class eu{constructor(){this.qi=!1}initialize(h,d){this.Ui=h,this.indexManager=d,this.qi=!0}getDocumentsMatchingQuery(h,d,_,V){return this.Ki(h,d).next(ee=>ee||this.Gi(h,d,V,_)).next(_=>_||this.Qi(h,d))}Ki(h,d){if(Qn(d))return Rt.resolve(null);let _=Jn(d);return this.indexManager.getIndexType(h,_).next(V=>0===V?null:(null!==d.limit&&1===V&&(_=Jn(d=Xn(d,null,"F"))),this.indexManager.getDocumentsMatchingTarget(h,_).next(V=>{let ee=gs(...V);return this.Ui.getDocuments(h,ee).next(V=>this.indexManager.getMinOffset(h,_).next(_=>{let er=this.ji(d,V);return this.zi(d,er,ee,_.readTime)?this.Ki(h,Xn(d,null,"F")):this.Wi(h,er,d,_)}))})))}Gi(h,d,_,V){return Qn(d)||V.isEqual(rt.min())?this.Qi(h,d):this.Ui.getDocuments(h,_).next(ee=>{let er=this.ji(d,ee);return this.zi(d,er,_,V)?this.Qi(h,d):(index_esm2017_C()<=eg.in.DEBUG&&index_esm2017_N("QueryEngine","Re-using previous result from %s to execute query: %s",V.toString(),es(d)),this.Wi(h,er,d,function(h,d){let _=h.toTimestamp().seconds,V=h.toTimestamp().nanoseconds+1,ee=rt.fromTimestamp(1e9===V?new it(_+1,0):new it(_,V));return new It(ee,ht.empty(),-1)}(V,0)))})}ji(h,d){let _=new Ee(is(h));return d.forEach((d,V)=>{ns(h,V)&&(_=_.add(V))}),_}zi(h,d,_,V){if(null===h.limit)return!1;if(_.size!==d.size)return!0;let ee="F"===h.limitType?d.last():d.first();return!!ee&&(ee.hasPendingWrites||ee.version.compareTo(V)>0)}Qi(h,d){return index_esm2017_C()<=eg.in.DEBUG&&index_esm2017_N("QueryEngine","Using full collection scan to execute query:",es(d)),this.Ui.getDocumentsMatchingQuery(h,d,It.min())}Wi(h,d,_,V){return this.Ui.getDocumentsMatchingQuery(h,_,V).next(h=>(d.forEach(d=>{h=h.insert(d.key,d)}),h))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu=class nu{constructor(h,d,_,V){this.persistence=h,this.Hi=d,this.serializer=V,this.Ji=new pe(et),this.Yi=new os(h=>$n(h),On),this.Xi=new Map,this.Zi=h.getRemoteDocumentCache(),this.Bs=h.getTargetCache(),this.qs=h.getBundleCache(),this.tr(_)}tr(h){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(h),this.indexManager=this.persistence.getIndexManager(h),this.mutationQueue=this.persistence.getMutationQueue(h,this.indexManager),this.localDocuments=new ko(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(h){return this.persistence.runTransaction("Collect garbage","readwrite-primary",d=>h.collect(d,this.Ji))}};async function iu(h,d){return await h.persistence.runTransaction("Handle user change","readonly",_=>{let V;return h.mutationQueue.getAllMutationBatches(_).next(ee=>(V=ee,h.tr(d),h.mutationQueue.getAllMutationBatches(_))).next(d=>{let ee=[],er=[],eo=gs();for(let h of V)for(let d of(ee.push(h.batchId),h.mutations))eo=eo.add(d.key);for(let h of d)for(let d of(er.push(h.batchId),h.mutations))eo=eo.add(d.key);return h.localDocuments.getDocuments(_,eo).next(h=>({er:h,removedBatchIds:ee,addedBatchIds:er}))})})}function ou(h){return h.persistence.runTransaction("Get last remote snapshot version","readonly",d=>h.Bs.getLastRemoteSnapshotVersion(d))}async function lu(h,d,_){let V=h.Ji.get(d);try{_||await h.persistence.runTransaction("Release target",_?"readwrite":"readwrite-primary",d=>h.persistence.referenceDelegate.removeTarget(d,V))}catch(h){if(!Dt(h))throw h;index_esm2017_N("LocalStore",`Failed to update sequence numbers for target ${d}: ${h}`)}h.Ji=h.Ji.remove(d),h.Yi.delete(V.target)}function fu(h,d,_){let V=rt.min(),ee=gs();return h.persistence.runTransaction("Execute query","readonly",er=>(function(h,d,_){let V=h.Yi.get(_);return void 0!==V?Rt.resolve(h.Ji.get(V)):h.Bs.getTargetData(d,_)})(h,er,Jn(d)).next(d=>{if(d)return V=d.lastLimboFreeSnapshotVersion,h.Bs.getMatchingKeysForTargetId(er,d.targetId).next(h=>{ee=h})}).next(()=>h.Hi.getDocumentsMatchingQuery(er,d,_?V:rt.min(),_?ee:gs())).next(_=>{var V;let er;return V=d.collectionGroup||(d.path.length%2==1?d.path.lastSegment():d.path.get(d.path.length-2)),er=h.Xi.get(V)||rt.min(),_.forEach((h,d)=>{d.readTime.compareTo(er)>0&&(er=d.readTime)}),h.Xi.set(V,er),{documents:_,ir:ee}}))}let Ru=class Ru{constructor(){this.activeTargetIds=tZ}lr(h){this.activeTargetIds=this.activeTargetIds.add(h)}dr(h){this.activeTargetIds=this.activeTargetIds.delete(h)}hr(){let h={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(h)}};let bu=class bu{constructor(){this.Hr=new Ru,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(h){}updateMutationState(h,d,_){}addLocalQueryTarget(h){return this.Hr.lr(h),this.Jr[h]||"not-current"}updateQueryState(h,d,_){this.Jr[h]=d}removeLocalQueryTarget(h){this.Hr.dr(h)}isLocalQueryTarget(h){return this.Hr.activeTargetIds.has(h)}clearQueryState(h){delete this.Jr[h]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(h){return this.Hr.activeTargetIds.has(h)}start(){return this.Hr=new Ru,Promise.resolve()}handleUserChange(h,d,_){}setOnlineState(h){}shutdown(){}writeSequenceNumber(h){}notifyBundleLoaded(h){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vu=class Vu{Yr(h){}shutdown(){}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Su=class Su{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(h){this.so.push(h)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){for(let h of(index_esm2017_N("ConnectivityMonitor","Network connectivity changed: AVAILABLE"),this.so))h(0)}no(){for(let h of(index_esm2017_N("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE"),this.so))h(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tq=null;function Cu(){return null===tq?tq=268435456+Math.round(2147483648*Math.random()):tq++,"0x"+tq.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tX={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nu=class Nu{constructor(h){this.ro=h.ro,this.oo=h.oo}uo(h){this.co=h}ao(h){this.ho=h}onMessage(h){this.lo=h}close(){this.oo()}send(h){this.ro(h)}fo(){this.co()}wo(h){this.ho(h)}_o(h){this.lo(h)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tY="WebChannelConnection";let Mu=class Mu extends class{constructor(h){this.databaseInfo=h,this.databaseId=h.databaseId;let d=h.ssl?"https":"http";this.mo=d+"://"+h.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(h,d,_,V,ee){let er=Cu(),eo=this.To(h,d);index_esm2017_N("RestConnection",`Sending RPC '${h}' ${er}:`,eo,_);let ec={};return this.Eo(ec,V,ee),this.Ao(h,eo,ec,_).then(d=>(index_esm2017_N("RestConnection",`Received RPC '${h}' ${er}: `,d),d),d=>{throw index_esm2017_M("RestConnection",`RPC '${h}' ${er} failed with error: `,d,"url: ",eo,"request:",_),d})}vo(h,d,_,V,ee,er){return this.Io(h,d,_,V,ee)}Eo(h,d,_){h["X-Goog-Api-Client"]="gl-js/ fire/"+tR,h["Content-Type"]="text/plain",this.databaseInfo.appId&&(h["X-Firebase-GMPID"]=this.databaseInfo.appId),d&&d.headers.forEach((d,_)=>h[_]=d),_&&_.headers.forEach((d,_)=>h[_]=d)}To(h,d){let _=tX[h];return`${this.mo}/v1/${d}:${_}`}}{constructor(h){super(h),this.forceLongPolling=h.forceLongPolling,this.autoDetectLongPolling=h.autoDetectLongPolling,this.useFetchStreams=h.useFetchStreams,this.longPollingOptions=h.longPollingOptions}Ao(h,d,_,V){let ee=Cu();return new Promise((er,eo)=>{let ec=new tE;ec.setWithCredentials(!0),ec.listenOnce(t_.COMPLETE,()=>{try{switch(ec.getLastErrorCode()){case tS.NO_ERROR:let d=ec.getResponseJson();index_esm2017_N(tY,`XHR for RPC '${h}' ${ee} received:`,JSON.stringify(d)),er(d);break;case tS.TIMEOUT:index_esm2017_N(tY,`RPC '${h}' ${ee} timed out`),eo(new index_esm2017_U(t$.DEADLINE_EXCEEDED,"Request time out"));break;case tS.HTTP_ERROR:let _=ec.getStatus();if(index_esm2017_N(tY,`RPC '${h}' ${ee} failed with status:`,_,"response text:",ec.getResponseText()),_>0){let h=ec.getResponseJson();Array.isArray(h)&&(h=h[0]);let d=null==h?void 0:h.error;if(d&&d.status&&d.message){let h=function(h){let d=h.toLowerCase().replace(/_/g,"-");return Object.values(t$).indexOf(d)>=0?d:t$.UNKNOWN}(d.status);eo(new index_esm2017_U(h,d.message))}else eo(new index_esm2017_U(t$.UNKNOWN,"Server responded with status "+ec.getStatus()))}else eo(new index_esm2017_U(t$.UNAVAILABLE,"Connection failed."));break;default:index_esm2017_O()}}finally{index_esm2017_N(tY,`RPC '${h}' ${ee} completed.`)}});let eh=JSON.stringify(V);index_esm2017_N(tY,`RPC '${h}' ${ee} sending request:`,V),ec.send(d,"POST",eh,_,15)})}Ro(h,d,_){let V=Cu(),ee=[this.mo,"/","google.firestore.v1.Firestore","/",h,"/channel"],er=tv(),eo=tb(),eh={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},ep=this.longPollingOptions.timeoutSeconds;void 0!==ep&&(eh.longPollingTimeout=Math.round(1e3*ep)),this.useFetchStreams&&(eh.xmlHttpFactory=new tk({})),this.Eo(eh.initMessageHeaders,d,_),eh.encodeInitMessageHeaders=!0;let ef=ee.join("");index_esm2017_N(tY,`Creating RPC '${h}' stream ${V}: ${ef}`,eh);let em=er.createWebChannel(ef,eh),eg=!1,eO=!1,ey=new Nu({ro:d=>{eO?index_esm2017_N(tY,`Not sending because RPC '${h}' stream ${V} is closed:`,d):(eg||(index_esm2017_N(tY,`Opening RPC '${h}' stream ${V} transport.`),em.open(),eg=!0),index_esm2017_N(tY,`RPC '${h}' stream ${V} sending:`,d),em.send(d))},oo:()=>em.close()}),w=(h,d,_)=>{h.listen(d,h=>{try{_(h)}catch(h){setTimeout(()=>{throw h},0)}})};return w(em,tT.EventType.OPEN,()=>{eO||index_esm2017_N(tY,`RPC '${h}' stream ${V} transport opened.`)}),w(em,tT.EventType.CLOSE,()=>{eO||(eO=!0,index_esm2017_N(tY,`RPC '${h}' stream ${V} transport closed`),ey.wo())}),w(em,tT.EventType.ERROR,d=>{eO||(eO=!0,index_esm2017_M(tY,`RPC '${h}' stream ${V} transport errored:`,d),ey.wo(new index_esm2017_U(t$.UNAVAILABLE,"The operation could not be completed")))}),w(em,tT.EventType.MESSAGE,d=>{var _;if(!eO){let ee=d.data[0];ee||index_esm2017_O();let er=ee.error||(null===(_=ee[0])||void 0===_?void 0:_.error);if(er){index_esm2017_N(tY,`RPC '${h}' stream ${V} received error:`,er);let d=er.status,_=function(h){let d=ec[h];if(void 0!==d)return ui(d)}(d),ee=er.message;void 0===_&&(_=t$.INTERNAL,ee="Unknown error status: "+d+" with message "+er.message),eO=!0,ey.wo(new index_esm2017_U(_,ee)),em.close()}else index_esm2017_N(tY,`RPC '${h}' stream ${V} received:`,ee),ey._o(ee)}}),w(eo,tw.STAT_EVENT,d=>{d.stat===tx.PROXY?index_esm2017_N(tY,`RPC '${h}' stream ${V} detected buffering proxy`):d.stat===tx.NOPROXY&&index_esm2017_N(tY,`RPC '${h}' stream ${V} detected no buffering proxy`)}),setTimeout(()=>{ey.fo()},0),ey}};function Ou(){return"undefined"!=typeof document?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fu(h){return new Vi(h,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bu=class Bu{constructor(h,d,_=1e3,V=1.5,ee=6e4){this.ii=h,this.timerId=d,this.Po=_,this.bo=V,this.Vo=ee,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(h){this.cancel();let d=Math.floor(this.So+this.ko()),_=Math.max(0,Date.now()-this.Co),V=Math.max(0,d-_);V>0&&index_esm2017_N("ExponentialBackoff",`Backing off for ${V} ms (base delay: ${this.So} ms, delay with jitter: ${d} ms, last attempt: ${_} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,V,()=>(this.Co=Date.now(),h())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lu=class Lu{constructor(h,d,_,V,ee,er,eo,ec){this.ii=h,this.$o=_,this.Oo=V,this.connection=ee,this.authCredentialsProvider=er,this.appCheckCredentialsProvider=eo,this.listener=ec,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new Bu(h,d)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(h){this.Ho(),this.stream.send(h)}async zo(){if(this.Ko())return this.close(0)}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}async close(h,d){this.Ho(),this.Jo(),this.qo.cancel(),this.Fo++,4!==h?this.qo.reset():d&&d.code===t$.RESOURCE_EXHAUSTED?(index_esm2017_k(d.toString()),index_esm2017_k("Using maximum backoff delay to prevent overloading the backend."),this.qo.xo()):d&&d.code===t$.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.Yo(),this.stream.close(),this.stream=null),this.state=h,await this.listener.ao(d)}Yo(){}auth(){this.state=1;let h=this.Xo(this.Fo),d=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([h,_])=>{this.Fo===d&&this.Zo(h,_)},d=>{h(()=>{let h=new index_esm2017_U(t$.UNKNOWN,"Fetching auth token failed: "+d.message);return this.tu(h)})})}Zo(h,d){let _=this.Xo(this.Fo);this.stream=this.eu(h,d),this.stream.uo(()=>{_(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(h=>{_(()=>this.tu(h))}),this.stream.onMessage(h=>{_(()=>this.onMessage(h))})}Go(){this.state=5,this.qo.No(async()=>{this.state=0,this.start()})}tu(h){return index_esm2017_N("PersistentStream",`close with error: ${h}`),this.stream=null,this.close(4,h)}Xo(h){return d=>{this.ii.enqueueAndForget(()=>this.Fo===h?d():(index_esm2017_N("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};let qu=class qu extends Lu{constructor(h,d,_,V,ee,er){super(h,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",d,_,V,er),this.serializer=ee}eu(h,d){return this.connection.Ro("Listen",h,d)}onMessage(h){this.qo.reset();let d=function(h,d){let _;if("targetChange"in d){var V,ee;d.targetChange;let er="NO_CHANGE"===(V=d.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===V?1:"REMOVE"===V?2:"CURRENT"===V?3:"RESET"===V?4:index_esm2017_O(),eo=d.targetChange.targetIds||[],ec=(ee=d.targetChange.resumeToken,h.useProto3Json?(void 0===ee||"string"==typeof ee||index_esm2017_O(),Ve.fromBase64String(ee||"")):(void 0===ee||ee instanceof Uint8Array||index_esm2017_O(),Ve.fromUint8Array(ee||new Uint8Array))),eh=d.targetChange.cause,ep=eh&&function(h){let d=void 0===h.code?t$.UNKNOWN:ui(h.code);return new index_esm2017_U(d,h.message||"")}(eh);_=new Ii(er,eo,ec,ep||null)}else if("documentChange"in d){d.documentChange;let V=d.documentChange;V.document,V.document.name,V.document.updateTime;let ee=Oi(h,V.document.name),er=Ni(V.document.updateTime),eo=V.document.createTime?Ni(V.document.createTime):rt.min(),ec=new un({mapValue:{fields:V.document.fields}}),eh=an.newFoundDocument(ee,er,eo,ec),ep=V.targetIds||[],ef=V.removedTargetIds||[];_=new yi(ep,ef,eh.key,eh)}else if("documentDelete"in d){d.documentDelete;let V=d.documentDelete;V.document;let ee=Oi(h,V.document),er=V.readTime?Ni(V.readTime):rt.min(),eo=an.newNoDocument(ee,er),ec=V.removedTargetIds||[];_=new yi([],ec,eo.key,eo)}else if("documentRemove"in d){d.documentRemove;let V=d.documentRemove;V.document;let ee=Oi(h,V.document),er=V.removedTargetIds||[];_=new yi([],er,ee,null)}else{if(!("filter"in d))return index_esm2017_O();{d.filter;let h=d.filter;h.targetId;let{count:V=0,unchangedNames:ee}=h,er=new si(V,ee),eo=h.targetId;_=new pi(eo,er)}}return _}(this.serializer,h),_=function(h){if(!("targetChange"in h))return rt.min();let d=h.targetChange;return d.targetIds&&d.targetIds.length?rt.min():d.readTime?Ni(d.readTime):rt.min()}(h);return this.listener.nu(d,_)}su(h){let d={};d.database=Li(this.serializer),d.addTarget=function(h,d){let _;let V=d.target;if((_=Fn(V)?{documents:{documents:[Fi(h,V.path)]}}:{query:function(h,d){var _,V;let ee={structuredQuery:{}},er=d.path;null!==d.collectionGroup?(ee.parent=Fi(h,er),ee.structuredQuery.from=[{collectionId:d.collectionGroup,allDescendants:!0}]):(ee.parent=Fi(h,er.popLast()),ee.structuredQuery.from=[{collectionId:er.lastSegment()}]);let eo=function(h){if(0!==h.length)return function rr(h){return h instanceof mn?function(h){if("=="===h.op){if(Xe(h.value))return{unaryFilter:{field:sr(h.field),op:"IS_NAN"}};if(Ye(h.value))return{unaryFilter:{field:sr(h.field),op:"IS_NULL"}}}else if("!="===h.op){if(Xe(h.value))return{unaryFilter:{field:sr(h.field),op:"IS_NOT_NAN"}};if(Ye(h.value))return{unaryFilter:{field:sr(h.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sr(h.field),op:tU[h.op],value:h.value}}}(h):h instanceof gn?function(h){let d=h.getFilters().map(h=>rr(h));return 1===d.length?d[0]:{compositeFilter:{op:tz[h.op],filters:d}}}(h):index_esm2017_O()}(gn.create(h,"and"))}(d.filters);eo&&(ee.structuredQuery.where=eo);let ec=function(h){if(0!==h.length)return h.map(h=>({field:sr(h.field),direction:tW[h.dir]}))}(d.orderBy);ec&&(ee.structuredQuery.orderBy=ec);let eh=Si(h,d.limit);return null!==eh&&(ee.structuredQuery.limit=eh),d.startAt&&(ee.structuredQuery.startAt={before:(_=d.startAt).inclusive,values:_.position}),d.endAt&&(ee.structuredQuery.endAt={before:!(V=d.endAt).inclusive,values:V.position}),ee}(h,V)}).targetId=d.targetId,d.resumeToken.approximateByteSize()>0){_.resumeToken=Ci(h,d.resumeToken);let V=Si(h,d.expectedCount);null!==V&&(_.expectedCount=V)}else if(d.snapshotVersion.compareTo(rt.min())>0){_.readTime=Di(h,d.snapshotVersion.toTimestamp());let V=Si(h,d.expectedCount);null!==V&&(_.expectedCount=V)}return _}(this.serializer,h);let _=function(h,d){let _=function(h){switch(h){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return index_esm2017_O()}}(d.purpose);return null==_?null:{"goog-listen-tags":_}}(this.serializer,h);_&&(d.labels=_),this.Wo(d)}iu(h){let d={};d.database=Li(this.serializer),d.removeTarget=h,this.Wo(d)}};let Uu=class Uu extends Lu{constructor(h,d,_,V,ee,er){super(h,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",d,_,V,er),this.serializer=ee,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(h,d){return this.connection.Ro("Write",h,d)}onMessage(h){var d,_;if(h.streamToken||index_esm2017_O(),this.lastStreamToken=h.streamToken,this.ru){this.qo.reset();let V=(d=h.writeResults,_=h.commitTime,d&&d.length>0?(void 0!==_||index_esm2017_O(),d.map(h=>{let d;return(d=h.updateTime?Ni(h.updateTime):Ni(_)).isEqual(rt.min())&&(d=Ni(_)),new Os(d,h.transformResults||[])})):[]),ee=Ni(h.commitTime);return this.listener.cu(ee,V)}return h.writeResults&&0!==h.writeResults.length&&index_esm2017_O(),this.ru=!0,this.listener.au()}hu(){let h={};h.database=Li(this.serializer),this.Wo(h)}uu(h){let d={streamToken:this.lastStreamToken,writes:h.map(h=>(function(h,d){var _;let V;if(d instanceof js)V={update:Ui(h,d.key,d.value)};else if(d instanceof Ys)V={delete:$i(h,d.key)};else if(d instanceof zs)V={update:Ui(h,d.key,d.data),updateMask:function(h){let d=[];return h.fields.forEach(h=>d.push(h.canonicalString())),{fieldPaths:d}}(d.fieldMask)};else{if(!(d instanceof Xs))return index_esm2017_O();V={verify:$i(h,d.key)}}return d.fieldTransforms.length>0&&(V.updateTransforms=d.fieldTransforms.map(h=>(function(h,d){let _=d.transform;if(_ instanceof bs)return{fieldPath:d.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof Vs)return{fieldPath:d.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof Ds)return{fieldPath:d.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof xs)return{fieldPath:d.field.canonicalString(),increment:_.gt};throw index_esm2017_O()})(0,h))),d.precondition.isNone||(V.currentDocument=void 0!==(_=d.precondition).updateTime?{updateTime:Di(h,_.updateTime.toTimestamp())}:void 0!==_.exists?{exists:_.exists}:index_esm2017_O()),V})(this.serializer,h))};this.Wo(d)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ku=class Ku extends class{}{constructor(h,d,_,V){super(),this.authCredentials=h,this.appCheckCredentials=d,this.connection=_,this.serializer=V,this.lu=!1}fu(){if(this.lu)throw new index_esm2017_U(t$.FAILED_PRECONDITION,"The client has already been terminated.")}Io(h,d,_){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([V,ee])=>this.connection.Io(h,d,_,V,ee)).catch(h=>{throw"FirebaseError"===h.name?(h.code===t$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new index_esm2017_U(t$.UNKNOWN,h.toString())})}vo(h,d,_,V){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([ee,er])=>this.connection.vo(h,d,_,ee,er,V)).catch(h=>{throw"FirebaseError"===h.name?(h.code===t$.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new index_esm2017_U(t$.UNKNOWN,h.toString())})}terminate(){this.lu=!0}};let Qu=class Qu{constructor(h,d){this.asyncQueue=h,this.onlineStateHandler=d,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(h){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${h.toString()}`),this.yu("Offline")))}set(h){this.Tu(),this.wu=0,"Online"===h&&(this.mu=!1),this.yu(h)}yu(h){h!==this.state&&(this.state=h,this.onlineStateHandler(h))}pu(h){let d=`Could not reach Cloud Firestore backend. ${h}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(index_esm2017_k(d),this.mu=!1):index_esm2017_N("OnlineStateTracker",d)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju=class ju{constructor(h,d,_,V,ee){this.localStore=h,this.datastore=d,this.asyncQueue=_,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=ee,this.Pu.Yr(h=>{_.enqueueAndForget(async()=>{index_esm2017_ec(this)&&(index_esm2017_N("RemoteStore","Restarting streams for network reachability change."),await async function(h){h.vu.add(4),await Wu(h),h.bu.set("Unknown"),h.vu.delete(4),await zu(h)}(this))})}),this.bu=new Qu(_,V)}};async function zu(h){if(index_esm2017_ec(h))for(let d of h.Ru)await d(!0)}async function Wu(h){for(let d of h.Ru)await d(!1)}function Hu(h,d){h.Au.has(d.targetId)||(h.Au.set(d.targetId,d),index_esm2017_tc(h)?Zu(h):index_esm2017_pc(h).Ko()&&Yu(h,d))}function Ju(h,d){let _=index_esm2017_pc(h);h.Au.delete(d),_.Ko()&&Xu(h,d),0===h.Au.size&&(_.Ko()?_.jo():index_esm2017_ec(h)&&h.bu.set("Unknown"))}function Yu(h,d){if(h.Vu.qt(d.targetId),d.resumeToken.approximateByteSize()>0||d.snapshotVersion.compareTo(rt.min())>0){let _=h.remoteSyncer.getRemoteKeysForTarget(d.targetId).size;d=d.withExpectedCount(_)}index_esm2017_pc(h).su(d)}function Xu(h,d){h.Vu.qt(d),index_esm2017_pc(h).iu(d)}function Zu(h){h.Vu=new Ei({getRemoteKeysForTarget:d=>h.remoteSyncer.getRemoteKeysForTarget(d),le:d=>h.Au.get(d)||null,ue:()=>h.datastore.serializer.databaseId}),index_esm2017_pc(h).start(),h.bu.gu()}function index_esm2017_tc(h){return index_esm2017_ec(h)&&!index_esm2017_pc(h).Uo()&&h.Au.size>0}function index_esm2017_ec(h){return 0===h.vu.size}async function index_esm2017_sc(h){h.Au.forEach((d,_)=>{Yu(h,d)})}async function index_esm2017_ic(h,d){h.Vu=void 0,index_esm2017_tc(h)?(h.bu.Iu(d),Zu(h)):h.bu.set("Unknown")}async function index_esm2017_rc(h,d,_){if(h.bu.set("Online"),d instanceof Ii&&2===d.state&&d.cause)try{await async function(h,d){let _=d.cause;for(let V of d.targetIds)h.Au.has(V)&&(await h.remoteSyncer.rejectListen(V,_),h.Au.delete(V),h.Vu.removeTarget(V))}(h,d)}catch(_){index_esm2017_N("RemoteStore","Failed to remove targets %s: %s ",d.targetIds.join(","),_),await index_esm2017_oc(h,_)}else if(d instanceof yi?h.Vu.Ht(d):d instanceof pi?h.Vu.ne(d):h.Vu.Xt(d),!_.isEqual(rt.min()))try{let d=await ou(h.localStore);_.compareTo(d)>=0&&await function(h,d){let _=h.Vu.ce(d);return _.targetChanges.forEach((_,V)=>{if(_.resumeToken.approximateByteSize()>0){let ee=h.Au.get(V);ee&&h.Au.set(V,ee.withResumeToken(_.resumeToken,d))}}),_.targetMismatches.forEach((d,_)=>{let V=h.Au.get(d);if(!V)return;h.Au.set(d,V.withResumeToken(Ve.EMPTY_BYTE_STRING,V.snapshotVersion)),Xu(h,d);let ee=new cr(V.target,d,_,V.sequenceNumber);Yu(h,ee)}),h.remoteSyncer.applyRemoteEvent(_)}(h,_)}catch(d){index_esm2017_N("RemoteStore","Failed to raise snapshot:",d),await index_esm2017_oc(h,d)}}async function index_esm2017_oc(h,d,_){if(!Dt(d))throw d;h.vu.add(1),await Wu(h),h.bu.set("Offline"),_||(_=()=>ou(h.localStore)),h.asyncQueue.enqueueRetryable(async()=>{index_esm2017_N("RemoteStore","Retrying IndexedDB access"),await _(),h.vu.delete(1),await zu(h)})}function index_esm2017_uc(h,d){return d().catch(_=>index_esm2017_oc(h,_,d))}async function index_esm2017_cc(h){let d=index_esm2017_Ic(h),_=h.Eu.length>0?h.Eu[h.Eu.length-1].batchId:-1;for(;index_esm2017_ec(h)&&h.Eu.length<10;)try{let V=await function(h,d){return h.persistence.runTransaction("Get next mutation batch","readonly",_=>(void 0===d&&(d=-1),h.mutationQueue.getNextMutationBatchAfterBatchId(_,d)))}(h.localStore,_);if(null===V){0===h.Eu.length&&d.jo();break}_=V.batchId,function(h,d){h.Eu.push(d);let _=index_esm2017_Ic(h);_.Ko()&&_.ou&&_.uu(d.mutations)}(h,V)}catch(d){await index_esm2017_oc(h,d)}index_esm2017_lc(h)&&index_esm2017_fc(h)}function index_esm2017_lc(h){return index_esm2017_ec(h)&&!index_esm2017_Ic(h).Uo()&&h.Eu.length>0}function index_esm2017_fc(h){index_esm2017_Ic(h).start()}async function index_esm2017_dc(h){index_esm2017_Ic(h).hu()}async function index_esm2017_wc(h){let d=index_esm2017_Ic(h);for(let _ of h.Eu)d.uu(_.mutations)}async function _c(h,d,_){let V=h.Eu.shift(),ee=ti.from(V,d,_);await index_esm2017_uc(h,()=>h.remoteSyncer.applySuccessfulWrite(ee)),await index_esm2017_cc(h)}async function index_esm2017_mc(h,d){d&&index_esm2017_Ic(h).ou&&await async function(h,d){var _;if(function(h){switch(h){default:return index_esm2017_O();case t$.CANCELLED:case t$.UNKNOWN:case t$.DEADLINE_EXCEEDED:case t$.RESOURCE_EXHAUSTED:case t$.INTERNAL:case t$.UNAVAILABLE:case t$.UNAUTHENTICATED:return!1;case t$.INVALID_ARGUMENT:case t$.NOT_FOUND:case t$.ALREADY_EXISTS:case t$.PERMISSION_DENIED:case t$.FAILED_PRECONDITION:case t$.ABORTED:case t$.OUT_OF_RANGE:case t$.UNIMPLEMENTED:case t$.DATA_LOSS:return!0}}(_=d.code)&&_!==t$.ABORTED){let _=h.Eu.shift();index_esm2017_Ic(h).Qo(),await index_esm2017_uc(h,()=>h.remoteSyncer.rejectFailedWrite(_.batchId,d)),await index_esm2017_cc(h)}}(h,d),index_esm2017_lc(h)&&index_esm2017_fc(h)}async function index_esm2017_gc(h,d){h.asyncQueue.verifyOperationInProgress(),index_esm2017_N("RemoteStore","RemoteStore received new credentials");let _=index_esm2017_ec(h);h.vu.add(3),await Wu(h),_&&h.bu.set("Unknown"),await h.remoteSyncer.handleCredentialChange(d),h.vu.delete(3),await zu(h)}async function index_esm2017_yc(h,d){d?(h.vu.delete(2),await zu(h)):d||(h.vu.add(2),await Wu(h),h.bu.set("Unknown"))}function index_esm2017_pc(h){var d,_,V;return h.Su||(h.Su=(d=h.datastore,_=h.asyncQueue,V={uo:index_esm2017_sc.bind(null,h),ao:index_esm2017_ic.bind(null,h),nu:index_esm2017_rc.bind(null,h)},d.fu(),new qu(_,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,V)),h.Ru.push(async d=>{d?(h.Su.Qo(),index_esm2017_tc(h)?Zu(h):h.bu.set("Unknown")):(await h.Su.stop(),h.Vu=void 0)})),h.Su}function index_esm2017_Ic(h){var d,_,V;return h.Du||(h.Du=(d=h.datastore,_=h.asyncQueue,V={uo:index_esm2017_dc.bind(null,h),ao:index_esm2017_mc.bind(null,h),au:index_esm2017_wc.bind(null,h),cu:_c.bind(null,h)},d.fu(),new Uu(_,d.connection,d.authCredentials,d.appCheckCredentials,d.serializer,V)),h.Ru.push(async d=>{d?(h.Du.Qo(),await index_esm2017_cc(h)):(await h.Du.stop(),h.Eu.length>0&&(index_esm2017_N("RemoteStore",`Stopping write stream with ${h.Eu.length} pending writes`),h.Eu=[]))})),h.Du}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let index_esm2017_Tc=class index_esm2017_Tc{constructor(h,d,_,V,ee){this.asyncQueue=h,this.timerId=d,this.targetTimeMs=_,this.op=V,this.removalCallback=ee,this.deferred=new index_esm2017_K,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}static createAndSchedule(h,d,_,V,ee){let er=Date.now()+_,eo=new index_esm2017_Tc(h,d,er,V,ee);return eo.start(_),eo}start(h){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),h)}skipDelay(){return this.handleDelayElapsed()}cancel(h){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new index_esm2017_U(t$.CANCELLED,"Operation cancelled"+(h?": "+h:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(h=>this.deferred.resolve(h))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function index_esm2017_Ec(h,d){if(index_esm2017_k("AsyncQueue",`${d}: ${h}`),Dt(h))return new index_esm2017_U(t$.UNAVAILABLE,`${d}: ${h}`);throw h}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let index_esm2017_Ac=class index_esm2017_Ac{constructor(h){this.comparator=h?(d,_)=>h(d,_)||ht.comparator(d.key,_.key):(h,d)=>ht.comparator(h.key,d.key),this.keyedMap=hs(),this.sortedSet=new pe(this.comparator)}static emptySet(h){return new index_esm2017_Ac(h.comparator)}has(h){return null!=this.keyedMap.get(h)}get(h){return this.keyedMap.get(h)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(h){let d=this.keyedMap.get(h);return d?this.sortedSet.indexOf(d):-1}get size(){return this.sortedSet.size}forEach(h){this.sortedSet.inorderTraversal((d,_)=>(h(d),!1))}add(h){let d=this.delete(h.key);return d.copy(d.keyedMap.insert(h.key,h),d.sortedSet.insert(h,null))}delete(h){let d=this.get(h);return d?this.copy(this.keyedMap.remove(h),this.sortedSet.remove(d)):this}isEqual(h){if(!(h instanceof index_esm2017_Ac)||this.size!==h.size)return!1;let d=this.sortedSet.getIterator(),_=h.sortedSet.getIterator();for(;d.hasNext();){let h=d.getNext().key,V=_.getNext().key;if(!h.isEqual(V))return!1}return!0}toString(){let h=[];return this.forEach(d=>{h.push(d.toString())}),0===h.length?"DocumentSet ()":"DocumentSet (\n  "+h.join("  \n")+"\n)"}copy(h,d){let _=new index_esm2017_Ac;return _.comparator=this.comparator,_.keyedMap=h,_.sortedSet=d,_}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let index_esm2017_vc=class index_esm2017_vc{constructor(){this.Cu=new pe(ht.comparator)}track(h){let d=h.doc.key,_=this.Cu.get(d);_?0!==h.type&&3===_.type?this.Cu=this.Cu.insert(d,h):3===h.type&&1!==_.type?this.Cu=this.Cu.insert(d,{type:_.type,doc:h.doc}):2===h.type&&2===_.type?this.Cu=this.Cu.insert(d,{type:2,doc:h.doc}):2===h.type&&0===_.type?this.Cu=this.Cu.insert(d,{type:0,doc:h.doc}):1===h.type&&0===_.type?this.Cu=this.Cu.remove(d):1===h.type&&2===_.type?this.Cu=this.Cu.insert(d,{type:1,doc:_.doc}):0===h.type&&1===_.type?this.Cu=this.Cu.insert(d,{type:2,doc:h.doc}):index_esm2017_O():this.Cu=this.Cu.insert(d,h)}xu(){let h=[];return this.Cu.inorderTraversal((d,_)=>{h.push(_)}),h}};let index_esm2017_Rc=class index_esm2017_Rc{constructor(h,d,_,V,ee,er,eo,ec,eh){this.query=h,this.docs=d,this.oldDocs=_,this.docChanges=V,this.mutatedKeys=ee,this.fromCache=er,this.syncStateChanged=eo,this.excludesMetadataChanges=ec,this.hasCachedResults=eh}static fromInitialDocuments(h,d,_,V,ee){let er=[];return d.forEach(h=>{er.push({type:0,doc:h})}),new index_esm2017_Rc(h,d,index_esm2017_Ac.emptySet(d),er,_,V,!0,!1,ee)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(h){if(!(this.fromCache===h.fromCache&&this.hasCachedResults===h.hasCachedResults&&this.syncStateChanged===h.syncStateChanged&&this.mutatedKeys.isEqual(h.mutatedKeys)&&Zn(this.query,h.query)&&this.docs.isEqual(h.docs)&&this.oldDocs.isEqual(h.oldDocs)))return!1;let d=this.docChanges,_=h.docChanges;if(d.length!==_.length)return!1;for(let h=0;h<d.length;h++)if(d[h].type!==_[h].type||!d[h].doc.isEqual(_[h].doc))return!1;return!0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let index_esm2017_Pc=class index_esm2017_Pc{constructor(){this.Nu=void 0,this.listeners=[]}};let index_esm2017_bc=class index_esm2017_bc{constructor(){this.queries=new os(h=>ts(h),Zn),this.onlineState="Unknown",this.ku=new Set}};async function index_esm2017_Vc(h,d){let _=d.query,V=!1,ee=h.queries.get(_);if(ee||(V=!0,ee=new index_esm2017_Pc),V)try{ee.Nu=await h.onListen(_)}catch(_){let h=index_esm2017_Ec(_,`Initialization of query '${es(d.query)}' failed`);return void d.onError(h)}h.queries.set(_,ee),ee.listeners.push(d),d.Mu(h.onlineState),ee.Nu&&d.$u(ee.Nu)&&index_esm2017_xc(h)}async function index_esm2017_Sc(h,d){let _=d.query,V=!1,ee=h.queries.get(_);if(ee){let h=ee.listeners.indexOf(d);h>=0&&(ee.listeners.splice(h,1),V=0===ee.listeners.length)}if(V)return h.queries.delete(_),h.onUnlisten(_)}function index_esm2017_Dc(h,d){let _=!1;for(let V of d){let d=V.query,ee=h.queries.get(d);if(ee){for(let h of ee.listeners)h.$u(V)&&(_=!0);ee.Nu=V}}_&&index_esm2017_xc(h)}function index_esm2017_Cc(h,d,_){let V=h.queries.get(d);if(V)for(let h of V.listeners)h.onError(_);h.queries.delete(d)}function index_esm2017_xc(h){h.ku.forEach(h=>{h.next()})}let index_esm2017_Nc=class index_esm2017_Nc{constructor(h,d,_){this.query=h,this.Ou=d,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=_||{}}$u(h){if(!this.options.includeMetadataChanges){let d=[];for(let _ of h.docChanges)3!==_.type&&d.push(_);h=new index_esm2017_Rc(h.query,h.docs,h.oldDocs,d,h.mutatedKeys,h.fromCache,h.syncStateChanged,!0,h.hasCachedResults)}let d=!1;return this.Fu?this.Lu(h)&&(this.Ou.next(h),d=!0):this.qu(h,this.onlineState)&&(this.Uu(h),d=!0),this.Bu=h,d}onError(h){this.Ou.error(h)}Mu(h){this.onlineState=h;let d=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,h)&&(this.Uu(this.Bu),d=!0),d}qu(h,d){return!h.fromCache||(!this.options.Ku||!("Offline"!==d))&&(!h.docs.isEmpty()||h.hasCachedResults||"Offline"===d)}Lu(h){if(h.docChanges.length>0)return!0;let d=this.Bu&&this.Bu.hasPendingWrites!==h.hasPendingWrites;return!(!h.syncStateChanged&&!d)&&!0===this.options.includeMetadataChanges}Uu(h){h=index_esm2017_Rc.fromInitialDocuments(h.query,h.docs,h.mutatedKeys,h.fromCache,h.hasCachedResults),this.Fu=!0,this.Ou.next(h)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let index_esm2017_Fc=class index_esm2017_Fc{constructor(h){this.key=h}};let index_esm2017_Bc=class index_esm2017_Bc{constructor(h){this.key=h}};let index_esm2017_Lc=class index_esm2017_Lc{constructor(h,d){this.query=h,this.Yu=d,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=gs(),this.mutatedKeys=gs(),this.tc=is(h),this.ec=new index_esm2017_Ac(this.tc)}get nc(){return this.Yu}sc(h,d){let _=d?d.ic:new index_esm2017_vc,V=d?d.ec:this.ec,ee=d?d.mutatedKeys:this.mutatedKeys,er=V,eo=!1,ec="F"===this.query.limitType&&V.size===this.query.limit?V.last():null,eh="L"===this.query.limitType&&V.size===this.query.limit?V.first():null;if(h.inorderTraversal((h,d)=>{let ep=V.get(h),ef=ns(this.query,d)?d:null,em=!!ep&&this.mutatedKeys.has(ep.key),eg=!!ef&&(ef.hasLocalMutations||this.mutatedKeys.has(ef.key)&&ef.hasCommittedMutations),eO=!1;ep&&ef?ep.data.isEqual(ef.data)?em!==eg&&(_.track({type:3,doc:ef}),eO=!0):this.rc(ep,ef)||(_.track({type:2,doc:ef}),eO=!0,(ec&&this.tc(ef,ec)>0||eh&&0>this.tc(ef,eh))&&(eo=!0)):!ep&&ef?(_.track({type:0,doc:ef}),eO=!0):ep&&!ef&&(_.track({type:1,doc:ep}),eO=!0,(ec||eh)&&(eo=!0)),eO&&(ef?(er=er.add(ef),ee=eg?ee.add(h):ee.delete(h)):(er=er.delete(h),ee=ee.delete(h)))}),null!==this.query.limit)for(;er.size>this.query.limit;){let h="F"===this.query.limitType?er.last():er.first();er=er.delete(h.key),ee=ee.delete(h.key),_.track({type:1,doc:h})}return{ec:er,ic:_,zi:eo,mutatedKeys:ee}}rc(h,d){return h.hasLocalMutations&&d.hasCommittedMutations&&!d.hasLocalMutations}applyChanges(h,d,_){let V=this.ec;this.ec=h.ec,this.mutatedKeys=h.mutatedKeys;let ee=h.ic.xu();ee.sort((h,d)=>(function(h,d){let n=h=>{switch(h){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return index_esm2017_O()}};return n(h)-n(d)})(h.type,d.type)||this.tc(h.doc,d.doc)),this.oc(_);let er=d?this.uc():[],eo=0===this.Zu.size&&this.current?1:0,ec=eo!==this.Xu;return(this.Xu=eo,0!==ee.length||ec)?{snapshot:new index_esm2017_Rc(this.query,h.ec,V,ee,h.mutatedKeys,0===eo,ec,!1,!!_&&_.resumeToken.approximateByteSize()>0),cc:er}:{cc:er}}Mu(h){return this.current&&"Offline"===h?(this.current=!1,this.applyChanges({ec:this.ec,ic:new index_esm2017_vc,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(h){return!this.Yu.has(h)&&!!this.ec.has(h)&&!this.ec.get(h).hasLocalMutations}oc(h){h&&(h.addedDocuments.forEach(h=>this.Yu=this.Yu.add(h)),h.modifiedDocuments.forEach(h=>{}),h.removedDocuments.forEach(h=>this.Yu=this.Yu.delete(h)),this.current=h.current)}uc(){if(!this.current)return[];let h=this.Zu;this.Zu=gs(),this.ec.forEach(h=>{this.ac(h.key)&&(this.Zu=this.Zu.add(h.key))});let d=[];return h.forEach(h=>{this.Zu.has(h)||d.push(new index_esm2017_Bc(h))}),this.Zu.forEach(_=>{h.has(_)||d.push(new index_esm2017_Fc(_))}),d}hc(h){this.Yu=h.ir,this.Zu=gs();let d=this.sc(h.documents);return this.applyChanges(d,!0)}lc(){return index_esm2017_Rc.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}};let index_esm2017_qc=class index_esm2017_qc{constructor(h,d,_){this.query=h,this.targetId=d,this.view=_}};let index_esm2017_Uc=class index_esm2017_Uc{constructor(h){this.key=h,this.fc=!1}};let index_esm2017_Kc=class index_esm2017_Kc{constructor(h,d,_,V,ee,er){this.localStore=h,this.remoteStore=d,this.eventManager=_,this.sharedClientState=V,this.currentUser=ee,this.maxConcurrentLimboResolutions=er,this.dc={},this.wc=new os(h=>ts(h),Zn),this._c=new Map,this.mc=new Set,this.gc=new pe(ht.comparator),this.yc=new Map,this.Ic=new Oo,this.Tc={},this.Ec=new Map,this.Ac=lo.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}};async function index_esm2017_Gc(h,d){var _,V;let ee,er;let eo=(h.remoteStore.remoteSyncer.applyRemoteEvent=index_esm2017_Wc.bind(null,h),h.remoteStore.remoteSyncer.getRemoteKeysForTarget=index_esm2017_aa.bind(null,h),h.remoteStore.remoteSyncer.rejectListen=index_esm2017_Jc.bind(null,h),h.dc.nu=index_esm2017_Dc.bind(null,h.eventManager),h.dc.Pc=index_esm2017_Cc.bind(null,h.eventManager),h),ec=eo.wc.get(d);if(ec)ee=ec.targetId,eo.sharedClientState.addLocalQueryTarget(ee),er=ec.view.lc();else{let h=await (_=eo.localStore,V=Jn(d),_.persistence.runTransaction("Allocate target","readwrite",h=>{let d;return _.Bs.getTargetData(h,V).next(ee=>ee?(d=ee,Rt.resolve(d)):_.Bs.allocateTargetId(h).next(ee=>(d=new cr(V,ee,"TargetPurposeListen",h.currentSequenceNumber),_.Bs.addTargetData(h,d).next(()=>d))))}).then(h=>{let d=_.Ji.get(h.targetId);return(null===d||h.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(_.Ji=_.Ji.insert(h.targetId,h),_.Yi.set(V,h.targetId)),h})),ec=eo.sharedClientState.addLocalQueryTarget(h.targetId);ee=h.targetId,er=await index_esm2017_Qc(eo,d,ee,"current"===ec,h.resumeToken),eo.isPrimaryClient&&Hu(eo.remoteStore,h)}return er}async function index_esm2017_Qc(h,d,_,V,ee){h.Rc=(d,_,V)=>(async function(h,d,_,V){let ee=d.view.sc(_);ee.zi&&(ee=await fu(h.localStore,d.query,!1).then(({documents:h})=>d.view.sc(h,ee)));let er=V&&V.targetChanges.get(d.targetId),eo=d.view.applyChanges(ee,h.isPrimaryClient,er);return index_esm2017_ia(h,d.targetId,eo.cc),eo.snapshot})(h,d,_,V);let er=await fu(h.localStore,d,!0),eo=new index_esm2017_Lc(d,er.ir),ec=eo.sc(er.documents),eh=gi.createSynthesizedTargetChangeForCurrentChange(_,V&&"Offline"!==h.onlineState,ee),ep=eo.applyChanges(ec,h.isPrimaryClient,eh);index_esm2017_ia(h,_,ep.cc);let ef=new index_esm2017_qc(d,_,eo);return h.wc.set(d,ef),h._c.has(_)?h._c.get(_).push(d):h._c.set(_,[d]),ep.snapshot}async function index_esm2017_jc(h,d){let _=h.wc.get(d),V=h._c.get(_.targetId);if(V.length>1)return h._c.set(_.targetId,V.filter(h=>!Zn(h,d))),void h.wc.delete(d);h.isPrimaryClient?(h.sharedClientState.removeLocalQueryTarget(_.targetId),h.sharedClientState.isActiveQueryTarget(_.targetId)||await lu(h.localStore,_.targetId,!1).then(()=>{h.sharedClientState.clearQueryState(_.targetId),Ju(h.remoteStore,_.targetId),index_esm2017_na(h,_.targetId)}).catch(vt)):(index_esm2017_na(h,_.targetId),await lu(h.localStore,_.targetId,!0))}async function index_esm2017_zc(h,d,_){var V;let ee=(h.remoteStore.remoteSyncer.applySuccessfulWrite=index_esm2017_Yc.bind(null,h),h.remoteStore.remoteSyncer.rejectFailedWrite=index_esm2017_Xc.bind(null,h),h);try{let h;let er=await function(h,d){let _,V;let ee=it.now(),er=d.reduce((h,d)=>h.add(d.key),gs());return h.persistence.runTransaction("Locally write mutations","readwrite",eo=>{let ec=tD,eh=gs();return h.Zi.getEntries(eo,er).next(h=>{(ec=h).forEach((h,d)=>{d.isValidDocument()||(eh=eh.add(h))})}).next(()=>h.localDocuments.getOverlayedDocuments(eo,ec)).next(V=>{_=V;let er=[];for(let h of d){let d=function(h,d){let _=null;for(let V of h.fieldTransforms){let h=d.data.field(V.field),ee=Ps(V.transform,h||null);null!=ee&&(null===_&&(_=un.empty()),_.set(V.field,ee))}return _||null}(h,_.get(h.key).overlayedDocument);null!=d&&er.push(new zs(h.key,d,function cn(h){let d=[];return ge(h.fields,(h,_)=>{let V=new at([h]);if(Ze(_)){let h=cn(_.mapValue).fields;if(0===h.length)d.push(V);else for(let _ of h)d.push(V.child(_))}else d.push(V)}),new Re(d)}(d.value.mapValue),Fs.exists(!0)))}return h.mutationQueue.addMutationBatch(eo,ee,er,d)}).next(d=>{V=d;let ee=d.applyToLocalDocumentSet(_,eh);return h.documentOverlayCache.saveOverlays(eo,d.batchId,ee)})}).then(()=>({batchId:V.batchId,changes:ls(_)}))}(ee.localStore,d);ee.sharedClientState.addPendingMutation(er.batchId),V=er.batchId,(h=ee.Tc[ee.currentUser.toKey()])||(h=new pe(et)),h=h.insert(V,_),ee.Tc[ee.currentUser.toKey()]=h,await index_esm2017_ua(ee,er.changes),await index_esm2017_cc(ee.remoteStore)}catch(d){let h=index_esm2017_Ec(d,"Failed to persist write");_.reject(h)}}async function index_esm2017_Wc(h,d){try{let _=await function(h,d){let _=d.snapshotVersion,V=h.Ji;return h.persistence.runTransaction("Apply remote event","readwrite-primary",ee=>{var er;let eo,ec;let eh=h.Zi.newChangeBuffer({trackRemovals:!0});V=h.Ji;let ep=[];d.targetChanges.forEach((er,eo)=>{var ec;let eh=V.get(eo);if(!eh)return;ep.push(h.Bs.removeMatchingKeys(ee,er.removedDocuments,eo).next(()=>h.Bs.addMatchingKeys(ee,er.addedDocuments,eo)));let ef=eh.withSequenceNumber(ee.currentSequenceNumber);null!==d.targetMismatches.get(eo)?ef=ef.withResumeToken(Ve.EMPTY_BYTE_STRING,rt.min()).withLastLimboFreeSnapshotVersion(rt.min()):er.resumeToken.approximateByteSize()>0&&(ef=ef.withResumeToken(er.resumeToken,_)),V=V.insert(eo,ef),ec=ef,(0===eh.resumeToken.approximateByteSize()||ec.snapshotVersion.toMicroseconds()-eh.snapshotVersion.toMicroseconds()>=3e8||er.addedDocuments.size+er.modifiedDocuments.size+er.removedDocuments.size>0)&&ep.push(h.Bs.updateTargetData(ee,ef))});let ef=tD,em=gs();if(d.documentUpdates.forEach(_=>{d.resolvedLimboDocuments.has(_)&&ep.push(h.persistence.referenceDelegate.updateLimboDocument(ee,_))}),ep.push((er=d.documentUpdates,eo=gs(),ec=gs(),er.forEach(h=>eo=eo.add(h)),eh.getEntries(ee,eo).next(h=>{let d=tD;return er.forEach((_,V)=>{let ee=h.get(_);V.isFoundDocument()!==ee.isFoundDocument()&&(ec=ec.add(_)),V.isNoDocument()&&V.version.isEqual(rt.min())?(eh.removeEntry(_,V.readTime),d=d.insert(_,V)):!ee.isValidDocument()||V.version.compareTo(ee.version)>0||0===V.version.compareTo(ee.version)&&ee.hasPendingWrites?(eh.addEntry(V),d=d.insert(_,V)):index_esm2017_N("LocalStore","Ignoring outdated watch update for ",_,". Current version:",ee.version," Watch version:",V.version)}),{nr:d,sr:ec}})).next(h=>{ef=h.nr,em=h.sr})),!_.isEqual(rt.min())){let d=h.Bs.getLastRemoteSnapshotVersion(ee).next(d=>h.Bs.setTargetsMetadata(ee,ee.currentSequenceNumber,_));ep.push(d)}return Rt.waitFor(ep).next(()=>eh.apply(ee)).next(()=>h.localDocuments.getLocalViewOfDocuments(ee,ef,em)).next(()=>ef)}).then(d=>(h.Ji=V,d))}(h.localStore,d);d.targetChanges.forEach((d,_)=>{let V=h.yc.get(_);V&&(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1||index_esm2017_O(),d.addedDocuments.size>0?V.fc=!0:d.modifiedDocuments.size>0?V.fc||index_esm2017_O():d.removedDocuments.size>0&&(V.fc||index_esm2017_O(),V.fc=!1))}),await index_esm2017_ua(h,_,d)}catch(h){await vt(h)}}function index_esm2017_Hc(h,d,_){var V;if(h.isPrimaryClient&&0===_||!h.isPrimaryClient&&1===_){let _;let ee=[];h.wc.forEach((h,_)=>{let V=_.view.Mu(d);V.snapshot&&ee.push(V.snapshot)}),(V=h.eventManager).onlineState=d,_=!1,V.queries.forEach((h,V)=>{for(let h of V.listeners)h.Mu(d)&&(_=!0)}),_&&index_esm2017_xc(V),ee.length&&h.dc.nu(ee),h.onlineState=d,h.isPrimaryClient&&h.sharedClientState.setOnlineState(d)}}async function index_esm2017_Jc(h,d,_){h.sharedClientState.updateQueryState(d,"rejected",_);let V=h.yc.get(d),ee=V&&V.key;if(ee){let _=new pe(ht.comparator);_=_.insert(ee,an.newNoDocument(ee,rt.min()));let V=gs().add(ee),er=new mi(rt.min(),new Map,new pe(et),_,V);await index_esm2017_Wc(h,er),h.gc=h.gc.remove(ee),h.yc.delete(d),index_esm2017_oa(h)}else await lu(h.localStore,d,!1).then(()=>index_esm2017_na(h,d,_)).catch(vt)}async function index_esm2017_Yc(h,d){var _;let V=d.batch.batchId;try{let ee=await (_=h.localStore).persistence.runTransaction("Acknowledge batch","readwrite-primary",h=>{let V=d.batch.keys(),ee=_.Zi.newChangeBuffer({trackRemovals:!0});return(function(h,d,_,V){let ee=_.batch,er=ee.keys(),eo=Rt.resolve();return er.forEach(h=>{eo=eo.next(()=>V.getEntry(d,h)).next(d=>{let er=_.docVersions.get(h);null!==er||index_esm2017_O(),0>d.version.compareTo(er)&&(ee.applyToRemoteDocument(d,_),d.isValidDocument()&&(d.setReadTime(_.commitVersion),V.addEntry(d)))})}),eo.next(()=>h.mutationQueue.removeMutationBatch(d,ee))})(_,h,d,ee).next(()=>ee.apply(h)).next(()=>_.mutationQueue.performConsistencyCheck(h)).next(()=>_.documentOverlayCache.removeOverlaysForBatchId(h,V,d.batch.batchId)).next(()=>_.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,function(h){let d=gs();for(let _=0;_<h.mutationResults.length;++_)h.mutationResults[_].transformResults.length>0&&(d=d.add(h.batch.mutations[_].key));return d}(d))).next(()=>_.localDocuments.getDocuments(h,V))});index_esm2017_ea(h,V,null),index_esm2017_ta(h,V),h.sharedClientState.updateMutationState(V,"acknowledged"),await index_esm2017_ua(h,ee)}catch(h){await vt(h)}}async function index_esm2017_Xc(h,d,_){var V;try{let ee=await (V=h.localStore).persistence.runTransaction("Reject batch","readwrite-primary",h=>{let _;return V.mutationQueue.lookupMutationBatch(h,d).next(d=>(null!==d||index_esm2017_O(),_=d.keys(),V.mutationQueue.removeMutationBatch(h,d))).next(()=>V.mutationQueue.performConsistencyCheck(h)).next(()=>V.documentOverlayCache.removeOverlaysForBatchId(h,_,d)).next(()=>V.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,_)).next(()=>V.localDocuments.getDocuments(h,_))});index_esm2017_ea(h,d,_),index_esm2017_ta(h,d),h.sharedClientState.updateMutationState(d,"rejected",_),await index_esm2017_ua(h,ee)}catch(h){await vt(h)}}function index_esm2017_ta(h,d){(h.Ec.get(d)||[]).forEach(h=>{h.resolve()}),h.Ec.delete(d)}function index_esm2017_ea(h,d,_){let V=h.Tc[h.currentUser.toKey()];if(V){let ee=V.get(d);ee&&(_?ee.reject(_):ee.resolve(),V=V.remove(d)),h.Tc[h.currentUser.toKey()]=V}}function index_esm2017_na(h,d,_=null){for(let V of(h.sharedClientState.removeLocalQueryTarget(d),h._c.get(d)))h.wc.delete(V),_&&h.dc.Pc(V,_);h._c.delete(d),h.isPrimaryClient&&h.Ic.Is(d).forEach(d=>{h.Ic.containsKey(d)||index_esm2017_sa(h,d)})}function index_esm2017_sa(h,d){h.mc.delete(d.path.canonicalString());let _=h.gc.get(d);null!==_&&(Ju(h.remoteStore,_),h.gc=h.gc.remove(d),h.yc.delete(_),index_esm2017_oa(h))}function index_esm2017_ia(h,d,_){for(let V of _)V instanceof index_esm2017_Fc?(h.Ic.addReference(V.key,d),function(h,d){let _=d.key,V=_.path.canonicalString();h.gc.get(_)||h.mc.has(V)||(index_esm2017_N("SyncEngine","New document in limbo: "+_),h.mc.add(V),index_esm2017_oa(h))}(h,V)):V instanceof index_esm2017_Bc?(index_esm2017_N("SyncEngine","Document no longer in limbo: "+V.key),h.Ic.removeReference(V.key,d),h.Ic.containsKey(V.key)||index_esm2017_sa(h,V.key)):index_esm2017_O()}function index_esm2017_oa(h){for(;h.mc.size>0&&h.gc.size<h.maxConcurrentLimboResolutions;){let d=h.mc.values().next().value;h.mc.delete(d);let _=new ht(ut.fromString(d)),V=h.Ac.next();h.yc.set(V,new index_esm2017_Uc(_)),h.gc=h.gc.insert(_,V),Hu(h.remoteStore,new cr(Jn(Gn(_.path)),V,"TargetPurposeLimboResolution",Ot.ct))}}async function index_esm2017_ua(h,d,_){let V=[],ee=[],er=[];h.wc.isEmpty()||(h.wc.forEach((eo,ec)=>{er.push(h.Rc(ec,d,_).then(d=>{if((d||_)&&h.isPrimaryClient&&h.sharedClientState.updateQueryState(ec.targetId,(null==d?void 0:d.fromCache)?"not-current":"current"),d){V.push(d);let h=tu.Li(ec.targetId,d);ee.push(h)}}))}),await Promise.all(er),h.dc.nu(V),await async function(h,d){try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",_=>Rt.forEach(d,d=>Rt.forEach(d.Fi,V=>h.persistence.referenceDelegate.addReference(_,d.targetId,V)).next(()=>Rt.forEach(d.Bi,V=>h.persistence.referenceDelegate.removeReference(_,d.targetId,V)))))}catch(h){if(!Dt(h))throw h;index_esm2017_N("LocalStore","Failed to update sequence numbers: "+h)}for(let _ of d){let d=_.targetId;if(!_.fromCache){let _=h.Ji.get(d),V=_.snapshotVersion,ee=_.withLastLimboFreeSnapshotVersion(V);h.Ji=h.Ji.insert(d,ee)}}}(h.localStore,ee))}async function index_esm2017_ca(h,d){if(!h.currentUser.isEqual(d)){index_esm2017_N("SyncEngine","User change. New user:",d.toKey());let _=await iu(h.localStore,d);h.currentUser=d,h.Ec.forEach(h=>{h.forEach(h=>{h.reject(new index_esm2017_U(t$.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),h.Ec.clear(),h.sharedClientState.handleUserChange(d,_.removedBatchIds,_.addedBatchIds),await index_esm2017_ua(h,_.er)}}function index_esm2017_aa(h,d){let _=h.yc.get(d);if(_&&_.fc)return gs().add(_.key);{let _=gs(),V=h._c.get(d);if(!V)return _;for(let d of V){let V=h.wc.get(d);_=_.unionWith(V.view.nc)}return _}}let index_esm2017_Ea=class index_esm2017_Ea{constructor(){this.synchronizeTabs=!1}async initialize(h){this.serializer=Fu(h.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(h),this.persistence=this.createPersistence(h),await this.persistence.start(),this.localStore=this.createLocalStore(h),this.gcScheduler=this.createGarbageCollectionScheduler(h,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(h,this.localStore)}createGarbageCollectionScheduler(h,d){return null}createIndexBackfillerScheduler(h,d){return null}createLocalStore(h){var d,_,V,ee;return d=this.persistence,_=new eu,V=h.initialUser,ee=this.serializer,new nu(d,_,V,ee)}createPersistence(h){return new Ko(Qo.zs,this.serializer)}createSharedClientState(h){return new bu}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}};let index_esm2017_Pa=class index_esm2017_Pa{async initialize(h,d){this.localStore||(this.localStore=h.localStore,this.sharedClientState=h.sharedClientState,this.datastore=this.createDatastore(d),this.remoteStore=this.createRemoteStore(d),this.eventManager=this.createEventManager(d),this.syncEngine=this.createSyncEngine(d,!h.synchronizeTabs),this.sharedClientState.onlineStateHandler=h=>index_esm2017_Hc(this.syncEngine,h,1),this.remoteStore.remoteSyncer.handleCredentialChange=index_esm2017_ca.bind(null,this.syncEngine),await index_esm2017_yc(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(h){return new index_esm2017_bc}createDatastore(h){var d,_,V;let ee=Fu(h.databaseInfo.databaseId),er=(d=h.databaseInfo,new Mu(d));return _=h.authCredentials,V=h.appCheckCredentials,new Ku(_,V,er,ee)}createRemoteStore(h){var d,_,V,ee;return d=this.localStore,_=this.datastore,V=h.asyncQueue,ee=Su.D()?new Su:new Vu,new ju(d,_,V,h=>index_esm2017_Hc(this.syncEngine,h,0),ee)}createSyncEngine(h,d){return function(h,d,_,V,ee,er,eo){let ec=new index_esm2017_Kc(h,d,_,V,ee,er);return eo&&(ec.vc=!0),ec}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,h.initialUser,h.maxConcurrentLimboResolutions,d)}terminate(){return async function(h){index_esm2017_N("RemoteStore","RemoteStore shutting down."),h.vu.add(5),await Wu(h),h.Pu.shutdown(),h.bu.set("Unknown")}(this.remoteStore)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let index_esm2017_Va=class index_esm2017_Va{constructor(h){this.observer=h,this.muted=!1}next(h){this.observer.next&&this.Sc(this.observer.next,h)}error(h){this.observer.error?this.Sc(this.observer.error,h):index_esm2017_k("Uncaught Error in snapshot listener:",h.toString())}Dc(){this.muted=!0}Sc(h,d){this.muted||setTimeout(()=>{this.muted||h(d)},0)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let index_esm2017_xa=class index_esm2017_xa{constructor(h,d,_,V){this.authCredentials=h,this.appCheckCredentials=d,this.asyncQueue=_,this.databaseInfo=V,this.user=index_esm2017_V.UNAUTHENTICATED,this.clientId=tt.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(_,async h=>{index_esm2017_N("FirestoreClient","Received user=",h.uid),await this.authCredentialListener(h),this.user=h}),this.appCheckCredentials.start(_,h=>(index_esm2017_N("FirestoreClient","Received new app check token=",h),this.appCheckCredentialListener(h,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(h){this.authCredentialListener=h}setAppCheckTokenChangeListener(h){this.appCheckCredentialListener=h}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new index_esm2017_U(t$.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let h=new index_esm2017_K;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),h.resolve()}catch(_){let d=index_esm2017_Ec(_,"Failed to shutdown persistence");h.reject(d)}}),h.promise}};async function index_esm2017_Na(h,d){h.asyncQueue.verifyOperationInProgress(),index_esm2017_N("FirestoreClient","Initializing OfflineComponentProvider");let _=await h.getConfiguration();await d.initialize(_);let V=_.initialUser;h.setCredentialChangeListener(async h=>{V.isEqual(h)||(await iu(d.localStore,h),V=h)}),d.persistence.setDatabaseDeletedListener(()=>h.terminate()),h._offlineComponents=d}async function index_esm2017_ka(h,d){h.asyncQueue.verifyOperationInProgress();let _=await index_esm2017_$a(h);index_esm2017_N("FirestoreClient","Initializing OnlineComponentProvider");let V=await h.getConfiguration();await d.initialize(_,V),h.setCredentialChangeListener(h=>index_esm2017_gc(d.remoteStore,h)),h.setAppCheckTokenChangeListener((h,_)=>index_esm2017_gc(d.remoteStore,_)),h._onlineComponents=d}async function index_esm2017_$a(h){if(!h._offlineComponents){if(h._uninitializedComponentsProvider){index_esm2017_N("FirestoreClient","Using user provided OfflineComponentProvider");try{await index_esm2017_Na(h,h._uninitializedComponentsProvider._offline)}catch(d){if(!("FirebaseError"===d.name?d.code===t$.FAILED_PRECONDITION||d.code===t$.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw d;index_esm2017_M("Error using user provided cache. Falling back to memory cache: "+d),await index_esm2017_Na(h,new index_esm2017_Ea)}}else index_esm2017_N("FirestoreClient","Using default OfflineComponentProvider"),await index_esm2017_Na(h,new index_esm2017_Ea)}return h._offlineComponents}async function index_esm2017_Oa(h){return h._onlineComponents||(h._uninitializedComponentsProvider?(index_esm2017_N("FirestoreClient","Using user provided OnlineComponentProvider"),await index_esm2017_ka(h,h._uninitializedComponentsProvider._online)):(index_esm2017_N("FirestoreClient","Using default OnlineComponentProvider"),await index_esm2017_ka(h,new index_esm2017_Pa))),h._onlineComponents}async function index_esm2017_Ka(h){let d=await index_esm2017_Oa(h),_=d.eventManager;return _.onListen=index_esm2017_Gc.bind(null,d.syncEngine),_.onUnlisten=index_esm2017_jc.bind(null,d.syncEngine),_}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function th(h){let d={};return void 0!==h.timeoutSeconds&&(d.timeoutSeconds=h.timeoutSeconds),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tG=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nh(h,d,_){if(!_)throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Function ${h}() cannot be called with an empty ${d}.`)}function ih(h){if(!ht.isDocumentKey(h))throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${h} has ${h.length}.`)}function rh(h){if(ht.isDocumentKey(h))throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${h} has ${h.length}.`)}function oh(h){if(void 0===h)return"undefined";if(null===h)return"null";if("string"==typeof h)return h.length>20&&(h=`${h.substring(0,20)}...`),JSON.stringify(h);if("number"==typeof h||"boolean"==typeof h)return""+h;if("object"==typeof h){if(h instanceof Array)return"an array";{var d;let _=(d=h).constructor?d.constructor.name:null;return _?`a custom ${_} object`:"an object"}}return"function"==typeof h?"a function":index_esm2017_O()}function uh(h,d){if("_delegate"in h&&(h=h._delegate),!(h instanceof d)){if(d.name===h.constructor.name)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let _=oh(h);throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Expected type '${d.name}', but it was: ${_}`)}}return h}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ah=class ah{constructor(h){var d,_;if(void 0===h.host){if(void 0!==h.ssl)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=h.host,this.ssl=null===(d=h.ssl)||void 0===d||d;if(this.credentials=h.credentials,this.ignoreUndefinedProperties=!!h.ignoreUndefinedProperties,this.cache=h.localCache,void 0===h.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==h.cacheSizeBytes&&h.cacheSizeBytes<1048576)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=h.cacheSizeBytes}(function(h,d,_,V){if(!0===d&&!0===V)throw new index_esm2017_U(t$.INVALID_ARGUMENT,`${h} and ${_} cannot be used together.`)})("experimentalForceLongPolling",h.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",h.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!h.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===h.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!h.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=th(null!==(_=h.experimentalLongPollingOptions)&&void 0!==_?_:{}),function(h){if(void 0!==h.timeoutSeconds){if(isNaN(h.timeoutSeconds))throw new index_esm2017_U(t$.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (must not be NaN)`);if(h.timeoutSeconds<5)throw new index_esm2017_U(t$.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (minimum allowed value is 5)`);if(h.timeoutSeconds>30)throw new index_esm2017_U(t$.INVALID_ARGUMENT,`invalid long polling timeout: ${h.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!h.useFetchStreams}isEqual(h){var d,_;return this.host===h.host&&this.ssl===h.ssl&&this.credentials===h.credentials&&this.cacheSizeBytes===h.cacheSizeBytes&&this.experimentalForceLongPolling===h.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===h.experimentalAutoDetectLongPolling&&(d=this.experimentalLongPollingOptions,_=h.experimentalLongPollingOptions,d.timeoutSeconds===_.timeoutSeconds)&&this.ignoreUndefinedProperties===h.ignoreUndefinedProperties&&this.useFetchStreams===h.useFetchStreams}};let hh=class hh{constructor(h,d,_,V){this._authCredentials=h,this._appCheckCredentials=d,this._databaseId=_,this._app=V,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ah({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new index_esm2017_U(t$.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(h){if(this._settingsFrozen)throw new index_esm2017_U(t$.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ah(h),void 0!==h.credentials&&(this._authCredentials=function(h){if(!h)return new index_esm2017_Q;switch(h.type){case"firstParty":return new index_esm2017_H(h.sessionIndex||"0",h.iamToken||null,h.authTokenFactory||null);case"provider":return h.client;default:throw new index_esm2017_U(t$.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(h.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(h){let d=tG.get(h);d&&(index_esm2017_N("ComponentProvider","Removing Datastore"),tG.delete(h),d.terminate())}(this),Promise.resolve()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let fh=class fh{constructor(h,d,_){this.converter=d,this._key=_,this.type="document",this.firestore=h}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new wh(this.firestore,this.converter,this._key.path.popLast())}withConverter(h){return new fh(this.firestore,h,this._key)}};let dh=class dh{constructor(h,d,_){this.converter=d,this._query=_,this.type="query",this.firestore=h}withConverter(h){return new dh(this.firestore,h,this._query)}};let wh=class wh extends dh{constructor(h,d,_){super(h,d,Gn(_)),this._path=_,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let h=this._path.popLast();return h.isEmpty()?null:new fh(this.firestore,null,new ht(h))}withConverter(h){return new wh(this.firestore,h,this._path)}};function _h(h,d,..._){if(h=(0,eO.m9)(h),nh("collection","path",d),h instanceof hh){let V=ut.fromString(d,..._);return rh(V),new wh(h,null,V)}{if(!(h instanceof fh||h instanceof wh))throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let V=h._path.child(ut.fromString(d,..._));return rh(V),new wh(h.firestore,null,V)}}function gh(h,d,..._){if(h=(0,eO.m9)(h),1==arguments.length&&(d=tt.A()),nh("doc","path",d),h instanceof hh){let V=ut.fromString(d,..._);return ih(V),new fh(h,null,new ht(V))}{if(!(h instanceof fh||h instanceof wh))throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let V=h._path.child(ut.fromString(d,..._));return ih(V),new fh(h.firestore,h instanceof wh?h.converter:null,new ht(V))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ih=class Ih{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new Bu(this,"async_queue_retry"),this.Xc=()=>{let h=Ou();h&&index_esm2017_N("AsyncQueue","Visibility state changed to "+h.visibilityState),this.qo.Mo()};let h=Ou();h&&"function"==typeof h.addEventListener&&h.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(h){this.enqueue(h)}enqueueAndForgetEvenWhileRestricted(h){this.Zc(),this.ta(h)}enterRestrictedMode(h){if(!this.jc){this.jc=!0,this.Jc=h||!1;let d=Ou();d&&"function"==typeof d.removeEventListener&&d.removeEventListener("visibilitychange",this.Xc)}}enqueue(h){if(this.Zc(),this.jc)return new Promise(()=>{});let d=new index_esm2017_K;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(h().then(d.resolve,d.reject),d.promise)).then(()=>d.promise)}enqueueRetryable(h){this.enqueueAndForget(()=>(this.Qc.push(h),this.ea()))}async ea(){if(0!==this.Qc.length){try{await this.Qc[0](),this.Qc.shift(),this.qo.reset()}catch(h){if(!Dt(h))throw h;index_esm2017_N("AsyncQueue","Operation failed with retryable error: "+h)}this.Qc.length>0&&this.qo.No(()=>this.ea())}}ta(h){let d=this.Gc.then(()=>(this.Hc=!0,h().catch(h=>{let d;this.Wc=h,this.Hc=!1;let _=(d=h.message||"",h.stack&&(d=h.stack.includes(h.message)?h.stack:h.message+"\n"+h.stack),d);throw index_esm2017_k("INTERNAL UNHANDLED ERROR: ",_),h}).then(h=>(this.Hc=!1,h))));return this.Gc=d,d}enqueueAfterDelay(h,d,_){this.Zc(),this.Yc.indexOf(h)>-1&&(d=0);let V=index_esm2017_Tc.createAndSchedule(this,h,d,_,h=>this.na(h));return this.zc.push(V),V}Zc(){this.Wc&&index_esm2017_O()}verifyOperationInProgress(){}async sa(){let h;do h=this.Gc,await h;while(h!==this.Gc)}ia(h){for(let d of this.zc)if(d.timerId===h)return!0;return!1}ra(h){return this.sa().then(()=>{for(let d of(this.zc.sort((h,d)=>h.targetTimeMs-d.targetTimeMs),this.zc))if(d.skipDelay(),"all"!==h&&d.timerId===h)break;return this.sa()})}oa(h){this.Yc.push(h)}na(h){let d=this.zc.indexOf(h);this.zc.splice(d,1)}};function Th(h){return function(h,d){if("object"!=typeof h||null===h)return!1;for(let _ of d)if(_ in h&&"function"==typeof h[_])return!0;return!1}(h,["next","error","complete"])}let vh=class vh extends hh{constructor(h,d,_,V){super(h,d,_,V),this.type="firestore",this._queue=new Ih,this._persistenceKey=(null==V?void 0:V.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Vh(this),this._firestoreClient.terminate()}};function Ph(h,d){let _="object"==typeof h?h:(0,ef.Mq)(),V=(0,ef.qX)(_,"firestore").getImmediate({identifier:"string"==typeof h?h:d||"(default)"});if(!V._initialized){let h=(0,eO.P0)("firestore");h&&function(h,d,_,V={}){var ee;let er=(h=uh(h,hh))._getSettings(),eo=`${d}:${_}`;if("firestore.googleapis.com"!==er.host&&er.host!==eo&&index_esm2017_M("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),h._setSettings(Object.assign(Object.assign({},er),{host:eo,ssl:!1})),V.mockUserToken){let d,_;if("string"==typeof V.mockUserToken)d=V.mockUserToken,_=index_esm2017_V.MOCK_USER;else{d=(0,eO.Sg)(V.mockUserToken,null===(ee=h._app)||void 0===ee?void 0:ee.options.projectId);let er=V.mockUserToken.sub||V.mockUserToken.user_id;if(!er)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new index_esm2017_V(er)}h._authCredentials=new j(new index_esm2017_G(d,_))}}(V,...h)}return V}function bh(h){return h._firestoreClient||Vh(h),h._firestoreClient.verifyNotTerminated(),h._firestoreClient}function Vh(h){var d,_,V,ee,er,eo;let ec=h._freezeSettings(),eh=(ee=h._databaseId,er=(null===(d=h._app)||void 0===d?void 0:d.options.appId)||"",eo=h._persistenceKey,new $e(ee,er,eo,ec.host,ec.ssl,ec.experimentalForceLongPolling,ec.experimentalAutoDetectLongPolling,th(ec.experimentalLongPollingOptions),ec.useFetchStreams));h._firestoreClient=new index_esm2017_xa(h._authCredentials,h._appCheckCredentials,h._queue,eh),(null===(_=ec.cache)||void 0===_?void 0:_._offlineComponentProvider)&&(null===(V=ec.cache)||void 0===V?void 0:V._onlineComponentProvider)&&(h._firestoreClient._uninitializedComponentsProvider={_offlineKind:ec.cache.kind,_offline:ec.cache._offlineComponentProvider,_online:ec.cache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Uh=class Uh{constructor(h){this._byteString=h}static fromBase64String(h){try{return new Uh(Ve.fromBase64String(h))}catch(h){throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+h)}}static fromUint8Array(h){return new Uh(Ve.fromUint8Array(h))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(h){return this._byteString.isEqual(h._byteString)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kh=class Kh{constructor(...h){for(let d=0;d<h.length;++d)if(0===h[d].length)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new at(h)}isEqual(h){return this._internalPath.isEqual(h._internalPath)}};function Gh(){return new Kh("__name__")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh=class Qh{constructor(h){this._methodName=h}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jh=class jh{constructor(h,d){if(!isFinite(h)||h<-90||h>90)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+h);if(!isFinite(d)||d<-180||d>180)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+d);this._lat=h,this._long=d}get latitude(){return this._lat}get longitude(){return this._long}isEqual(h){return this._lat===h._lat&&this._long===h._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(h){return et(this._lat,h._lat)||et(this._long,h._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tH=/^__.*__$/;let Wh=class Wh{constructor(h,d,_){this.data=h,this.fieldMask=d,this.fieldTransforms=_}toMutation(h,d){return null!==this.fieldMask?new zs(h,this.data,this.fieldMask,d,this.fieldTransforms):new js(h,this.data,d,this.fieldTransforms)}};let Hh=class Hh{constructor(h,d,_){this.data=h,this.fieldMask=d,this.fieldTransforms=_}toMutation(h,d){return new zs(h,this.data,this.fieldMask,d,this.fieldTransforms)}};function Jh(h){switch(h){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw index_esm2017_O()}}let Yh=class Yh{constructor(h,d,_,V,ee,er){this.settings=h,this.databaseId=d,this.serializer=_,this.ignoreUndefinedProperties=V,void 0===ee&&this.ua(),this.fieldTransforms=ee||[],this.fieldMask=er||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(h){return new Yh(Object.assign(Object.assign({},this.settings),h),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(h){var d;let _=null===(d=this.path)||void 0===d?void 0:d.child(h),V=this.aa({path:_,la:!1});return V.fa(h),V}da(h){var d;let _=null===(d=this.path)||void 0===d?void 0:d.child(h),V=this.aa({path:_,la:!1});return V.ua(),V}wa(h){return this.aa({path:void 0,la:!0})}_a(h){return gl(h,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(h){return void 0!==this.fieldMask.find(d=>h.isPrefixOf(d))||void 0!==this.fieldTransforms.find(d=>h.isPrefixOf(d.field))}ua(){if(this.path)for(let h=0;h<this.path.length;h++)this.fa(this.path.get(h))}fa(h){if(0===h.length)throw this._a("Document fields must not be empty");if(Jh(this.ca)&&tH.test(h))throw this._a('Document fields cannot begin and end with "__"')}};let Xh=class Xh{constructor(h,d,_){this.databaseId=h,this.ignoreUndefinedProperties=d,this.serializer=_||Fu(h)}ya(h,d,_,V=!1){return new Yh({ca:h,methodName:d,ga:_,path:at.emptyPath(),la:!1,ma:V},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Zh(h){let d=h._freezeSettings(),_=Fu(h._databaseId);return new Xh(h._databaseId,!!d.ignoreUndefinedProperties,_)}function tl(h,d,_,V,ee,er={}){let eo,ec;let eh=h.ya(er.merge||er.mergeFields?2:0,d,_,ee);dl("Data must be an object, but it was:",eh,V);let ep=ll(V,eh);if(er.merge)eo=new Re(eh.fieldMask),ec=eh.fieldTransforms;else if(er.mergeFields){let h=[];for(let V of er.mergeFields){let ee=wl(d,V,_);if(!eh.contains(ee))throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Field '${ee}' is specified in your field mask but missing from your input data.`);yl(h,ee)||h.push(ee)}eo=new Re(h),ec=eh.fieldTransforms.filter(h=>eo.covers(h.field))}else eo=null,ec=eh.fieldTransforms;return new Wh(new un(ep),eo,ec)}let el=class el extends Qh{_toFieldTransform(h){if(2!==h.ca)throw 1===h.ca?h._a(`${this._methodName}() can only appear at the top level of your update data`):h._a(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return h.fieldMask.push(h.path),null}isEqual(h){return h instanceof el}};let sl=class sl extends Qh{_toFieldTransform(h){return new Ms(h.path,new bs)}isEqual(h){return h instanceof sl}};let ol=class ol extends Qh{constructor(h,d){super(h),this.Ia=d}_toFieldTransform(h){let d=new xs(h.serializer,Es(h.serializer,this.Ia));return new Ms(h.path,d)}isEqual(h){return this===h}};function hl(h,d){if(fl(h=(0,eO.m9)(h)))return dl("Unsupported field value:",d,h),ll(h,d);if(h instanceof Qh)return function(h,d){if(!Jh(d.ca))throw d._a(`${h._methodName}() can only be used with update() and set()`);if(!d.path)throw d._a(`${h._methodName}() is not currently supported inside arrays`);let _=h._toFieldTransform(d);_&&d.fieldTransforms.push(_)}(h,d),null;if(void 0===h&&d.ignoreUndefinedProperties)return null;if(d.path&&d.fieldMask.push(d.path),h instanceof Array){if(d.settings.la&&4!==d.ca)throw d._a("Nested arrays are not supported");return function(h,d){let _=[],V=0;for(let ee of h){let h=hl(ee,d.wa(V));null==h&&(h={nullValue:"NULL_VALUE"}),_.push(h),V++}return{arrayValue:{values:_}}}(h,d)}return function(h,d){if(null===(h=(0,eO.m9)(h)))return{nullValue:"NULL_VALUE"};if("number"==typeof h)return Es(d.serializer,h);if("boolean"==typeof h)return{booleanValue:h};if("string"==typeof h)return{stringValue:h};if(h instanceof Date){let _=it.fromDate(h);return{timestampValue:Di(d.serializer,_)}}if(h instanceof it){let _=new it(h.seconds,1e3*Math.floor(h.nanoseconds/1e3));return{timestampValue:Di(d.serializer,_)}}if(h instanceof jh)return{geoPointValue:{latitude:h.latitude,longitude:h.longitude}};if(h instanceof Uh)return{bytesValue:Ci(d.serializer,h._byteString)};if(h instanceof fh){let _=d.databaseId,V=h.firestore._databaseId;if(!V.isEqual(_))throw d._a(`Document reference is for database ${V.projectId}/${V.database} but should be for database ${_.projectId}/${_.database}`);return{referenceValue:ki(h.firestore._databaseId||d.databaseId,h._key.path)}}throw d._a(`Unsupported field value: ${oh(h)}`)}(h,d)}function ll(h,d){let _={};return ye(h)?d.path&&d.path.length>0&&d.fieldMask.push(d.path):ge(h,(h,V)=>{let ee=hl(V,d.ha(h));null!=ee&&(_[h]=ee)}),{mapValue:{fields:_}}}function fl(h){return!("object"!=typeof h||null===h||h instanceof Array||h instanceof Date||h instanceof it||h instanceof jh||h instanceof Uh||h instanceof fh||h instanceof Qh)}function dl(h,d,_){if(!fl(_)||!("object"==typeof _&&null!==_&&(Object.getPrototypeOf(_)===Object.prototype||null===Object.getPrototypeOf(_)))){let V=oh(_);throw"an object"===V?d._a(h+" a custom object"):d._a(h+" "+V)}}function wl(h,d,_){if((d=(0,eO.m9)(d))instanceof Kh)return d._internalPath;if("string"==typeof d)return ml(h,d);throw gl("Field path arguments must be of type string or ",h,!1,void 0,_)}let tK=RegExp("[~\\*/\\[\\]]");function ml(h,d,_){if(d.search(tK)>=0)throw gl(`Invalid field path (${d}). Paths must not contain '~', '*', '/', '[', or ']'`,h,!1,void 0,_);try{return new Kh(...d.split("."))._internalPath}catch(V){throw gl(`Invalid field path (${d}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,h,!1,void 0,_)}}function gl(h,d,_,V,ee){let er=V&&!V.isEmpty(),eo=void 0!==ee,ec=`Function ${d}() called with invalid data`;_&&(ec+=" (via `toFirestore()`)"),ec+=". ";let eh="";return(er||eo)&&(eh+=" (found",er&&(eh+=` in field ${V}`),eo&&(eh+=` in document ${ee}`),eh+=")"),new index_esm2017_U(t$.INVALID_ARGUMENT,ec+h+eh)}function yl(h,d){return h.some(h=>h.isEqual(d))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pl=class pl{constructor(h,d,_,V,ee){this._firestore=h,this._userDataWriter=d,this._key=_,this._document=V,this._converter=ee}get id(){return this._key.path.lastSegment()}get ref(){return new fh(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){let h=new Il(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(h)}return this._userDataWriter.convertValue(this._document.data.value)}}get(h){if(this._document){let d=this._document.data.field(Tl("DocumentSnapshot.get",h));if(null!==d)return this._userDataWriter.convertValue(d)}}};let Il=class Il extends pl{data(){return super.data()}};function Tl(h,d){return"string"==typeof d?ml(h,d):d instanceof Kh?d._internalPath:d._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(h){if("L"===h.limitType&&0===h.explicitOrderBy.length)throw new index_esm2017_U(t$.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}let Al=class Al{};let vl=class vl extends Al{};function Rl(h,d,..._){let V=[];for(let ee of(d instanceof Al&&V.push(d),function(h){let d=h.filter(h=>h instanceof Vl).length,_=h.filter(h=>h instanceof Pl).length;if(d>1||d>0&&_>0)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(V=V.concat(_)),V))h=ee._apply(h);return h}let Pl=class Pl extends vl{constructor(h,d,_){super(),this._field=h,this._op=d,this._value=_,this.type="where"}static _create(h,d,_){return new Pl(h,d,_)}_apply(h){let d=this._parse(h);return Ql(h._query,d),new dh(h.firestore,h.converter,Yn(h._query,d))}_parse(h){let d=Zh(h.firestore),_=function(h,d,_,V,ee,er,eo){let ec;if(ee.isKeyField()){if("array-contains"===er||"array-contains-any"===er)throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid Query. You can't perform '${er}' queries on documentId().`);if("in"===er||"not-in"===er){Gl(eo,er);let d=[];for(let _ of eo)d.push(Kl(V,h,_));ec={arrayValue:{values:d}}}else ec=Kl(V,h,eo)}else"in"!==er&&"not-in"!==er&&"array-contains-any"!==er||Gl(eo,er),ec=function(h,d,_,V=!1){return hl(_,h.ya(V?4:3,d))}(_,d,eo,"in"===er||"not-in"===er);return mn.create(ee,er,ec)}(h._query,"where",d,h.firestore._databaseId,this._field,this._op,this._value);return _}};function bl(h,d,_){let V=Tl("where",h);return Pl._create(V,d,_)}let Vl=class Vl extends Al{constructor(h,d){super(),this.type=h,this._queryConstraints=d}static _create(h,d){return new Vl(h,d)}_parse(h){let d=this._queryConstraints.map(d=>d._parse(h)).filter(h=>h.getFilters().length>0);return 1===d.length?d[0]:gn.create(d,this._getOperator())}_apply(h){let d=this._parse(h);return 0===d.getFilters().length?h:(function(h,d){let _=h,V=d.getFlattenedFilters();for(let h of V)Ql(_,h),_=Yn(_,h)}(h._query,d),new dh(h.firestore,h.converter,Yn(h._query,d)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}};let Cl=class Cl extends vl{constructor(h,d){super(),this._field=h,this._direction=d,this.type="orderBy"}static _create(h,d){return new Cl(h,d)}_apply(h){let d=function(h,d,_){if(null!==h.startAt)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==h.endAt)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");let V=new dn(d,_);return function(h,d){if(null===jn(h)){let _=zn(h);null!==_&&jl(h,_,d.field)}}(h,V),V}(h._query,this._field,this._direction);return new dh(h.firestore,h.converter,function(h,d){let _=h.explicitOrderBy.concat([d]);return new Un(h.path,h.collectionGroup,_,h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(h._query,d))}};function xl(h,d="asc"){let _=Tl("orderBy",h);return Cl._create(_,d)}function Kl(h,d,_){if("string"==typeof(_=(0,eO.m9)(_))){if(""===_)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Wn(d)&&-1!==_.indexOf("/"))throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${_}' contains a '/' character.`);let V=d.path.child(ut.fromString(_));if(!ht.isDocumentKey(V))throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${V}' is not because it has an odd number of segments (${V.length}).`);return We(h,new ht(V))}if(_ instanceof fh)return We(h,_._key);throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oh(_)}.`)}function Gl(h,d){if(!Array.isArray(h)||0===h.length)throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${d.toString()}' filters.`)}function Ql(h,d){if(d.isInequality()){let _=zn(h),V=d.field;if(null!==_&&!_.isEqual(V))throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${_.toString()}' and '${V.toString()}'`);let ee=jn(h);null!==ee&&jl(h,V,ee)}let _=function(h,d){for(let _ of h)for(let h of _.getFlattenedFilters())if(d.indexOf(h.op)>=0)return h.op;return null}(h.filters,function(h){switch(h){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(d.op));if(null!==_)throw _===d.op?new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${d.op.toString()}' filter.`):new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid query. You cannot use '${d.op.toString()}' filters with '${_.toString()}' filters.`)}function jl(h,d,_){if(!_.isEqual(d))throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${d.toString()}' and so you must also use '${d.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${_.toString()}' instead.`)}let Wl=class Wl{convertValue(h,d="none"){switch(Le(h)){case 0:return null;case 1:return h.booleanValue;case 2:return Ce(h.integerValue||h.doubleValue);case 3:return this.convertTimestamp(h.timestampValue);case 4:return this.convertServerTimestamp(h,d);case 5:return h.stringValue;case 6:return this.convertBytes(xe(h.bytesValue));case 7:return this.convertReference(h.referenceValue);case 8:return this.convertGeoPoint(h.geoPointValue);case 9:return this.convertArray(h.arrayValue,d);case 10:return this.convertObject(h.mapValue,d);default:throw index_esm2017_O()}}convertObject(h,d){return this.convertObjectMap(h.fields,d)}convertObjectMap(h,d="none"){let _={};return ge(h,(h,V)=>{_[h]=this.convertValue(V,d)}),_}convertGeoPoint(h){return new jh(Ce(h.latitude),Ce(h.longitude))}convertArray(h,d){return(h.values||[]).map(h=>this.convertValue(h,d))}convertServerTimestamp(h,d){switch(d){case"previous":let _=ke(h);return null==_?null:this.convertValue(_,d);case"estimate":return this.convertTimestamp(Me(h));default:return null}}convertTimestamp(h){let d=De(h);return new it(d.seconds,d.nanos)}convertDocumentKey(h,d){let _=ut.fromString(h);ur(_)||index_esm2017_O();let V=new Oe(_.get(1),_.get(3)),ee=new ht(_.popFirst(5));return V.isEqual(d)||index_esm2017_k(`Document ${ee} contains a document reference within a different database (${V.projectId}/${V.database}) which is not supported. It will be treated as a reference in the current database (${d.projectId}/${d.database}) instead.`),ee}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hl(h,d,_){return h?_&&(_.merge||_.mergeFields)?h.toFirestore(d,_):h.toFirestore(d):d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nf=class nf{constructor(h,d){this.hasPendingWrites=h,this.fromCache=d}isEqual(h){return this.hasPendingWrites===h.hasPendingWrites&&this.fromCache===h.fromCache}};let sf=class sf extends pl{constructor(h,d,_,V,ee,er){super(h,d,_,V,er),this._firestore=h,this._firestoreImpl=h,this.metadata=ee}exists(){return super.exists()}data(h={}){if(this._document){if(this._converter){let d=new rf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(d,h)}return this._userDataWriter.convertValue(this._document.data.value,h.serverTimestamps)}}get(h,d={}){if(this._document){let _=this._document.data.field(Tl("DocumentSnapshot.get",h));if(null!==_)return this._userDataWriter.convertValue(_,d.serverTimestamps)}}};let rf=class rf extends sf{data(h={}){return super.data(h)}};let of=class of{constructor(h,d,_,V){this._firestore=h,this._userDataWriter=d,this._snapshot=V,this.metadata=new nf(V.hasPendingWrites,V.fromCache),this.query=_}get docs(){let h=[];return this.forEach(d=>h.push(d)),h}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(h,d){this._snapshot.docs.forEach(_=>{h.call(d,new rf(this._firestore,this._userDataWriter,_.key,_,new nf(this._snapshot.mutatedKeys.has(_.key),this._snapshot.fromCache),this.query.converter))})}docChanges(h={}){let d=!!h.includeMetadataChanges;if(d&&this._snapshot.excludesMetadataChanges)throw new index_esm2017_U(t$.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===d||(this._cachedChanges=function(h,d){if(h._snapshot.oldDocs.isEmpty()){let d=0;return h._snapshot.docChanges.map(_=>{let V=new rf(h._firestore,h._userDataWriter,_.doc.key,_.doc,new nf(h._snapshot.mutatedKeys.has(_.doc.key),h._snapshot.fromCache),h.query.converter);return _.doc,{type:"added",doc:V,oldIndex:-1,newIndex:d++}})}{let _=h._snapshot.oldDocs;return h._snapshot.docChanges.filter(h=>d||3!==h.type).map(d=>{let V=new rf(h._firestore,h._userDataWriter,d.doc.key,d.doc,new nf(h._snapshot.mutatedKeys.has(d.doc.key),h._snapshot.fromCache),h.query.converter),ee=-1,er=-1;return 0!==d.type&&(ee=_.indexOf(d.doc.key),_=_.delete(d.doc.key)),1!==d.type&&(er=(_=_.add(d.doc)).indexOf(d.doc.key)),{type:function(h){switch(h){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return index_esm2017_O()}}(d.type),doc:V,oldIndex:ee,newIndex:er}})}}(this,d),this._cachedChangesIncludeMetadataChanges=d),this._cachedChanges}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function af(h){h=uh(h,fh);let d=uh(h.firestore,vh);return(function(h,d,_={}){let V=new index_esm2017_K;return h.asyncQueue.enqueueAndForget(async()=>(function(h,d,_,V,ee){let er=new index_esm2017_Va({next:er=>{d.enqueueAndForget(()=>index_esm2017_Sc(h,eo));let ec=er.docs.has(_);!ec&&er.fromCache?ee.reject(new index_esm2017_U(t$.UNAVAILABLE,"Failed to get document because the client is offline.")):ec&&er.fromCache&&V&&"server"===V.source?ee.reject(new index_esm2017_U(t$.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):ee.resolve(er)},error:h=>ee.reject(h)}),eo=new index_esm2017_Nc(Gn(_.path),er,{includeMetadataChanges:!0,Ku:!0});return index_esm2017_Vc(h,eo)})(await index_esm2017_Ka(h),h.asyncQueue,d,_,V)),V.promise})(bh(d),h._key).then(_=>Af(d,h,_))}let hf=class hf extends Wl{constructor(h){super(),this.firestore=h}convertBytes(h){return new Uh(h)}convertReference(h){let d=this.convertDocumentKey(h,this.firestore._databaseId);return new fh(this.firestore,null,d)}};function df(h){h=uh(h,dh);let d=uh(h.firestore,vh),_=bh(d),V=new hf(d);return El(h._query),(function(h,d,_={}){let V=new index_esm2017_K;return h.asyncQueue.enqueueAndForget(async()=>(function(h,d,_,V,ee){let er=new index_esm2017_Va({next:_=>{d.enqueueAndForget(()=>index_esm2017_Sc(h,eo)),_.fromCache&&"server"===V.source?ee.reject(new index_esm2017_U(t$.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):ee.resolve(_)},error:h=>ee.reject(h)}),eo=new index_esm2017_Nc(_,er,{includeMetadataChanges:!0,Ku:!0});return index_esm2017_Vc(h,eo)})(await index_esm2017_Ka(h),h.asyncQueue,d,_,V)),V.promise})(_,h._query).then(_=>new of(d,V,h,_))}function mf(h,d,_){h=uh(h,fh);let V=uh(h.firestore,vh),ee=Hl(h.converter,d,_);return Ef(V,[tl(Zh(V),"setDoc",h._key,ee,null!==h.converter,_).toMutation(h._key,Fs.none())])}function gf(h,d,_,...V){h=uh(h,fh);let ee=uh(h.firestore,vh),er=Zh(ee);return Ef(ee,[("string"==typeof(d=(0,eO.m9)(d))||d instanceof Kh?function(h,d,_,V,ee,er){let eo=h.ya(1,d,_),ec=[wl(d,V,_)],eh=[ee];if(er.length%2!=0)throw new index_esm2017_U(t$.INVALID_ARGUMENT,`Function ${d}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<er.length;h+=2)ec.push(wl(d,er[h])),eh.push(er[h+1]);let ep=[],ef=un.empty();for(let h=ec.length-1;h>=0;--h)if(!yl(ep,ec[h])){let d=ec[h],_=eh[h];_=(0,eO.m9)(_);let V=eo.da(d);if(_ instanceof el)ep.push(d);else{let h=hl(_,V);null!=h&&(ep.push(d),ef.set(d,h))}}let em=new Re(ep);return new Hh(ef,em,eo.fieldTransforms)}(er,"updateDoc",h._key,d,_,V):function(h,d,_,V){let ee=h.ya(1,d,_);dl("Data must be an object, but it was:",ee,V);let er=[],eo=un.empty();ge(V,(h,V)=>{let ec=ml(d,h,_);V=(0,eO.m9)(V);let eh=ee.da(ec);if(V instanceof el)er.push(ec);else{let h=hl(V,eh);null!=h&&(er.push(ec),eo.set(ec,h))}});let ec=new Re(er);return new Hh(eo,ec,ee.fieldTransforms)}(er,"updateDoc",h._key,d)).toMutation(h._key,Fs.exists(!0))])}function yf(h){return Ef(uh(h.firestore,vh),[new Ys(h._key,Fs.none())])}function pf(h,d){let _=uh(h.firestore,vh),V=gh(h),ee=Hl(h.converter,d);return Ef(_,[tl(Zh(h.firestore),"addDoc",V._key,ee,null!==h.converter,{}).toMutation(V._key,Fs.exists(!1))]).then(()=>V)}function If(h,...d){var _,V,ee;let er,eo,ec;h=(0,eO.m9)(h);let eh={includeMetadataChanges:!1},ep=0;"object"!=typeof d[0]||Th(d[ep])||(eh=d[ep],ep++);let ef={includeMetadataChanges:eh.includeMetadataChanges};if(Th(d[ep])){let h=d[ep];d[ep]=null===(_=h.next)||void 0===_?void 0:_.bind(h),d[ep+1]=null===(V=h.error)||void 0===V?void 0:V.bind(h),d[ep+2]=null===(ee=h.complete)||void 0===ee?void 0:ee.bind(h)}if(h instanceof fh)eo=uh(h.firestore,vh),ec=Gn(h._key.path),er={next:_=>{d[ep]&&d[ep](Af(eo,h,_))},error:d[ep+1],complete:d[ep+2]};else{let _=uh(h,dh);eo=uh(_.firestore,vh),ec=_._query;let V=new hf(eo);er={next:h=>{d[ep]&&d[ep](new of(eo,V,_,h))},error:d[ep+1],complete:d[ep+2]},El(h._query)}return function(h,d,_,V){let ee=new index_esm2017_Va(V),er=new index_esm2017_Nc(d,ee,_);return h.asyncQueue.enqueueAndForget(async()=>index_esm2017_Vc(await index_esm2017_Ka(h),er)),()=>{ee.Dc(),h.asyncQueue.enqueueAndForget(async()=>index_esm2017_Sc(await index_esm2017_Ka(h),er))}}(bh(eo),ec,ef,er)}function Ef(h,d){return function(h,d){let _=new index_esm2017_K;return h.asyncQueue.enqueueAndForget(async()=>index_esm2017_zc(await index_esm2017_Oa(h).then(h=>h.syncEngine),d,_)),_.promise}(bh(h),d)}function Af(h,d,_){let V=_.docs.get(d._key),ee=new hf(h);return new sf(h,ee,d._key,V,new nf(_.hasPendingWrites,_.fromCache),d.converter)}function Gf(){return new sl("serverTimestamp")}function zf(h){return new ol("increment",h)}!function(h,d=!0){tR=ef.Jn,(0,ef.Xd)(new em.wA("firestore",(h,{instanceIdentifier:_,options:V})=>{let ee=h.getProvider("app").getImmediate(),er=new vh(new index_esm2017_z(h.getProvider("auth-internal")),new index_esm2017_Y(h.getProvider("app-check-internal")),function(h,d){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new index_esm2017_U(t$.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Oe(h.options.projectId,d)}(ee,_),ee);return V=Object.assign({useFetchStreams:d},V),er._setSettings(V),er},"PUBLIC").setMultipleInstances(!0)),(0,ef.KN)(tI,"3.13.0",void 0),(0,ef.KN)(tI,"3.13.0","esm2017")}()},4483:function(h,d,_){"use strict";function _typeof(h){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(h)}function _defineProperties(h,d){for(var _=0;_<d.length;_++){var V=d[_];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(h,_toPropertyKey(V.key),V)}}function _setPrototypeOf(h,d){return(_setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(h,d){return h.__proto__=d,h})(h,d)}function _assertThisInitialized(h){if(void 0===h)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return h}function _getPrototypeOf(h){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(h){return h.__proto__||Object.getPrototypeOf(h)})(h)}function _toPropertyKey(h){var d=function(h,d){if("object"!==_typeof(h)||null===h)return h;var _=h[Symbol.toPrimitive];if(void 0!==_){var V=_.call(h,d||"default");if("object"!==_typeof(V))return V;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===d?String:Number)(h)}(h,"string");return"symbol"===_typeof(d)?d:String(d)}var V=_(7294),ee=_(5697),er=_(5303).createFocusTrap,eo=_(8388).isFocusable,ec=function(h){!function(h,d){if("function"!=typeof d&&null!==d)throw TypeError("Super expression must either be null or a function");h.prototype=Object.create(d&&d.prototype,{constructor:{value:h,writable:!0,configurable:!0}}),Object.defineProperty(h,"prototype",{writable:!1}),d&&_setPrototypeOf(h,d)}(FocusTrap,h);var d,_,ee,er=(d=function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(h){return!1}}(),function(){var h,_=_getPrototypeOf(FocusTrap);if(d){var V=_getPrototypeOf(this).constructor;h=Reflect.construct(_,arguments,V)}else h=_.apply(this,arguments);return function(h,d){if(d&&("object"===_typeof(d)||"function"==typeof d))return d;if(void 0!==d)throw TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(h)}(this,h)});function FocusTrap(h){!function(h,d){if(!(h instanceof d))throw TypeError("Cannot call a class as a function")}(this,FocusTrap),d=_assertThisInitialized(ee=er.call(this,h)),_="getNodeForOption",V=function(h){var d,_,V=null!==(d=this.internalOptions[h])&&void 0!==d?d:this.originalOptions[h];if("function"==typeof V){for(var ee=arguments.length,er=Array(ee>1?ee-1:0),eo=1;eo<ee;eo++)er[eo-1]=arguments[eo];V=V.apply(void 0,er)}if(!0===V&&(V=void 0),!V){if(void 0===V||!1===V)return V;throw Error("`".concat(h,"` was specified but was not a node, or did not return a node"))}var ec=V;if("string"==typeof V&&!(ec=null===(_=this.getDocument())||void 0===_?void 0:_.querySelector(V)))throw Error("`".concat(h,"` as selector refers to no known node"));return ec},(_=_toPropertyKey(_))in d?Object.defineProperty(d,_,{value:V,enumerable:!0,configurable:!0,writable:!0}):d[_]=V,ee.handleDeactivate=ee.handleDeactivate.bind(_assertThisInitialized(ee)),ee.handlePostDeactivate=ee.handlePostDeactivate.bind(_assertThisInitialized(ee)),ee.handleClickOutsideDeactivates=ee.handleClickOutsideDeactivates.bind(_assertThisInitialized(ee)),ee.internalOptions={returnFocusOnDeactivate:!1,checkCanReturnFocus:null,onDeactivate:ee.handleDeactivate,onPostDeactivate:ee.handlePostDeactivate,clickOutsideDeactivates:ee.handleClickOutsideDeactivates},ee.originalOptions={returnFocusOnDeactivate:!0,onDeactivate:null,onPostDeactivate:null,checkCanReturnFocus:null,clickOutsideDeactivates:!1};var d,_,V,ee,eo=h.focusTrapOptions;for(var ec in eo)if(Object.prototype.hasOwnProperty.call(eo,ec)){if("returnFocusOnDeactivate"===ec||"onDeactivate"===ec||"onPostDeactivate"===ec||"checkCanReturnFocus"===ec||"clickOutsideDeactivates"===ec){ee.originalOptions[ec]=eo[ec];continue}ee.internalOptions[ec]=eo[ec]}return ee.outsideClick=null,ee.focusTrapElements=h.containerElements||[],ee.updatePreviousElement(),ee}return _=[{key:"getDocument",value:function(){return this.props.focusTrapOptions.document||("undefined"!=typeof document?document:void 0)}},{key:"getReturnFocusNode",value:function(){var h=this.getNodeForOption("setReturnFocus",this.previouslyFocusedElement);return h||!1!==h&&this.previouslyFocusedElement}},{key:"updatePreviousElement",value:function(){var h=this.getDocument();h&&(this.previouslyFocusedElement=h.activeElement)}},{key:"deactivateTrap",value:function(){this.focusTrap&&this.focusTrap.active&&this.focusTrap.deactivate({returnFocus:!1,checkCanReturnFocus:null,onDeactivate:this.originalOptions.onDeactivate})}},{key:"handleClickOutsideDeactivates",value:function(h){var d="function"==typeof this.originalOptions.clickOutsideDeactivates?this.originalOptions.clickOutsideDeactivates.call(null,h):this.originalOptions.clickOutsideDeactivates;return d&&(this.outsideClick={target:h.target,allowDeactivation:d}),d}},{key:"handleDeactivate",value:function(){this.originalOptions.onDeactivate&&this.originalOptions.onDeactivate.call(null),this.deactivateTrap()}},{key:"handlePostDeactivate",value:function(){var h=this,finishDeactivation=function(){var d=h.getReturnFocusNode(),_=!!(h.originalOptions.returnFocusOnDeactivate&&null!=d&&d.focus&&(!h.outsideClick||h.outsideClick.allowDeactivation&&!eo(h.outsideClick.target,h.internalOptions.tabbableOptions))),V=h.internalOptions.preventScroll;_&&d.focus({preventScroll:void 0!==V&&V}),h.originalOptions.onPostDeactivate&&h.originalOptions.onPostDeactivate.call(null),h.outsideClick=null};this.originalOptions.checkCanReturnFocus?this.originalOptions.checkCanReturnFocus.call(null,this.getReturnFocusNode()).then(finishDeactivation,finishDeactivation):finishDeactivation()}},{key:"setupFocusTrap",value:function(){this.focusTrap?this.props.active&&!this.focusTrap.active&&(this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause()):this.focusTrapElements.some(Boolean)&&(this.focusTrap=this.props._createFocusTrap(this.focusTrapElements,this.internalOptions),this.props.active&&this.focusTrap.activate(),this.props.paused&&this.focusTrap.pause())}},{key:"componentDidMount",value:function(){this.props.active&&this.setupFocusTrap()}},{key:"componentDidUpdate",value:function(h){if(this.focusTrap){h.containerElements!==this.props.containerElements&&this.focusTrap.updateContainerElements(this.props.containerElements);var d=!h.active&&this.props.active,_=h.active&&!this.props.active,V=!h.paused&&this.props.paused,ee=h.paused&&!this.props.paused;if(d&&(this.updatePreviousElement(),this.focusTrap.activate()),_){this.deactivateTrap();return}V&&this.focusTrap.pause(),ee&&this.focusTrap.unpause()}else h.containerElements!==this.props.containerElements&&(this.focusTrapElements=this.props.containerElements),this.props.active&&(this.updatePreviousElement(),this.setupFocusTrap())}},{key:"componentWillUnmount",value:function(){this.deactivateTrap()}},{key:"render",value:function(){var h=this,d=this.props.children?V.Children.only(this.props.children):void 0;if(d){if(d.type&&d.type===V.Fragment)throw Error("A focus-trap cannot use a Fragment as its child container. Try replacing it with a <div> element.");return V.cloneElement(d,{ref:function(_){var V=h.props.containerElements;d&&("function"==typeof d.ref?d.ref(_):d.ref&&(d.ref.current=_)),h.focusTrapElements=V||[_]}})}return null}}],_defineProperties(FocusTrap.prototype,_),ee&&_defineProperties(FocusTrap,ee),Object.defineProperty(FocusTrap,"prototype",{writable:!1}),FocusTrap}(V.Component),eh="undefined"==typeof Element?Function:Element;ec.propTypes={active:ee.bool,paused:ee.bool,focusTrapOptions:ee.shape({document:ee.object,onActivate:ee.func,onPostActivate:ee.func,checkCanFocusTrap:ee.func,onPause:ee.func,onPostPause:ee.func,onUnpause:ee.func,onPostUnpause:ee.func,onDeactivate:ee.func,onPostDeactivate:ee.func,checkCanReturnFocus:ee.func,initialFocus:ee.oneOfType([ee.instanceOf(eh),ee.string,ee.bool,ee.func]),fallbackFocus:ee.oneOfType([ee.instanceOf(eh),ee.string,ee.func]),escapeDeactivates:ee.oneOfType([ee.bool,ee.func]),clickOutsideDeactivates:ee.oneOfType([ee.bool,ee.func]),returnFocusOnDeactivate:ee.bool,setReturnFocus:ee.oneOfType([ee.instanceOf(eh),ee.string,ee.bool,ee.func]),allowOutsideClick:ee.oneOfType([ee.bool,ee.func]),preventScroll:ee.bool,tabbableOptions:ee.shape({displayCheck:ee.oneOf(["full","legacy-full","non-zero-area","none"]),getShadowRoot:ee.oneOfType([ee.bool,ee.func])}),trapStack:ee.array,isKeyForward:ee.func,isKeyBackward:ee.func}),containerElements:ee.arrayOf(ee.instanceOf(eh)),children:ee.oneOfType([ee.element,ee.instanceOf(eh)])},ec.defaultProps={active:!0,paused:!1,focusTrapOptions:{},_createFocusTrap:er},h.exports=ec},5303:function(h,d,_){"use strict";_.r(d),_.d(d,{createFocusTrap:function(){return createFocusTrap}});var V=_(8388);/*!
* focus-trap 7.4.3
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/function ownKeys(h,d){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(h);d&&(V=V.filter(function(d){return Object.getOwnPropertyDescriptor(h,d).enumerable})),_.push.apply(_,V)}return _}function _objectSpread2(h){for(var d=1;d<arguments.length;d++){var _=null!=arguments[d]?arguments[d]:{};d%2?ownKeys(Object(_),!0).forEach(function(d){var V,ee;V=d,ee=_[d],(V=function(h){var d=function(h,d){if("object"!=typeof h||null===h)return h;var _=h[Symbol.toPrimitive];if(void 0!==_){var V=_.call(h,d||"default");if("object"!=typeof V)return V;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===d?String:Number)(h)}(h,"string");return"symbol"==typeof d?d:String(d)}(V))in h?Object.defineProperty(h,V,{value:ee,enumerable:!0,configurable:!0,writable:!0}):h[V]=ee}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(d){Object.defineProperty(h,d,Object.getOwnPropertyDescriptor(_,d))})}return h}var ee={activateTrap:function(h,d){if(h.length>0){var _=h[h.length-1];_!==d&&_.pause()}var V=h.indexOf(d);-1===V||h.splice(V,1),h.push(d)},deactivateTrap:function(h,d){var _=h.indexOf(d);-1!==_&&h.splice(_,1),h.length>0&&h[h.length-1].unpause()}},isTabEvent=function(h){return"Tab"===h.key||9===h.keyCode},isKeyForward=function(h){return isTabEvent(h)&&!h.shiftKey},isKeyBackward=function(h){return isTabEvent(h)&&h.shiftKey},delay=function(h){return setTimeout(h,0)},findIndex=function(h,d){var _=-1;return h.every(function(h,V){return!d(h)||(_=V,!1)}),_},valueOrHandler=function(h){for(var d=arguments.length,_=Array(d>1?d-1:0),V=1;V<d;V++)_[V-1]=arguments[V];return"function"==typeof h?h.apply(void 0,_):h},getActualTarget=function(h){return h.target.shadowRoot&&"function"==typeof h.composedPath?h.composedPath()[0]:h.target},er=[],createFocusTrap=function(h,d){var _,eo=(null==d?void 0:d.document)||document,ec=(null==d?void 0:d.trapStack)||er,eh=_objectSpread2({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:isKeyForward,isKeyBackward:isKeyBackward},d),ep={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0},getOption=function(h,d,_){return h&&void 0!==h[d]?h[d]:eh[_||d]},findContainerIndex=function(h,d){var _="function"==typeof(null==d?void 0:d.composedPath)?d.composedPath():void 0;return ep.containerGroups.findIndex(function(d){var V=d.container,ee=d.tabbableNodes;return V.contains(h)||(null==_?void 0:_.includes(V))||ee.find(function(d){return d===h})})},getNodeForOption=function(h){var d=eh[h];if("function"==typeof d){for(var _=arguments.length,V=Array(_>1?_-1:0),ee=1;ee<_;ee++)V[ee-1]=arguments[ee];d=d.apply(void 0,V)}if(!0===d&&(d=void 0),!d){if(void 0===d||!1===d)return d;throw Error("`".concat(h,"` was specified but was not a node, or did not return a node"))}var er=d;if("string"==typeof d&&!(er=eo.querySelector(d)))throw Error("`".concat(h,"` as selector refers to no known node"));return er},getInitialFocusNode=function(){var h=getNodeForOption("initialFocus");if(!1===h)return!1;if(void 0===h||!(0,V.isFocusable)(h,eh.tabbableOptions)){if(findContainerIndex(eo.activeElement)>=0)h=eo.activeElement;else{var d=ep.tabbableGroups[0];h=d&&d.firstTabbableNode||getNodeForOption("fallbackFocus")}}if(!h)throw Error("Your focus-trap needs to have at least one focusable element");return h},updateTabbableNodes=function(){if(ep.containerGroups=ep.containers.map(function(h){var d=(0,V.tabbable)(h,eh.tabbableOptions),_=(0,V.focusable)(h,eh.tabbableOptions);return{container:h,tabbableNodes:d,focusableNodes:_,firstTabbableNode:d.length>0?d[0]:null,lastTabbableNode:d.length>0?d[d.length-1]:null,nextTabbableNode:function(h){var d=!(arguments.length>1)||void 0===arguments[1]||arguments[1],ee=_.findIndex(function(d){return d===h});return ee<0?void 0:d?_.slice(ee+1).find(function(h){return(0,V.isTabbable)(h,eh.tabbableOptions)}):_.slice(0,ee).reverse().find(function(h){return(0,V.isTabbable)(h,eh.tabbableOptions)})}}}),ep.tabbableGroups=ep.containerGroups.filter(function(h){return h.tabbableNodes.length>0}),ep.tabbableGroups.length<=0&&!getNodeForOption("fallbackFocus"))throw Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times")},tryFocus=function tryFocus(h){if(!1!==h&&h!==eo.activeElement){if(!h||!h.focus){tryFocus(getInitialFocusNode());return}h.focus({preventScroll:!!eh.preventScroll}),ep.mostRecentlyFocusedNode=h,h.tagName&&"input"===h.tagName.toLowerCase()&&"function"==typeof h.select&&h.select()}},getReturnFocusNode=function(h){var d=getNodeForOption("setReturnFocus",h);return d||!1!==d&&h},checkPointerDown=function(h){if(!(findContainerIndex(getActualTarget(h),h)>=0)){if(valueOrHandler(eh.clickOutsideDeactivates,h)){_.deactivate({returnFocus:eh.returnFocusOnDeactivate});return}valueOrHandler(eh.allowOutsideClick,h)||h.preventDefault()}},checkFocusIn=function(h){var d=getActualTarget(h),_=findContainerIndex(d,h)>=0;_||d instanceof Document?_&&(ep.mostRecentlyFocusedNode=d):(h.stopImmediatePropagation(),tryFocus(ep.mostRecentlyFocusedNode||getInitialFocusNode()))},checkKeyNav=function(h){var d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=getActualTarget(h);updateTabbableNodes();var ee=null;if(ep.tabbableGroups.length>0){var er=findContainerIndex(_,h),eo=er>=0?ep.containerGroups[er]:void 0;if(er<0)ee=d?ep.tabbableGroups[ep.tabbableGroups.length-1].lastTabbableNode:ep.tabbableGroups[0].firstTabbableNode;else if(d){var ec=findIndex(ep.tabbableGroups,function(h){return _===h.firstTabbableNode});if(ec<0&&(eo.container===_||(0,V.isFocusable)(_,eh.tabbableOptions)&&!(0,V.isTabbable)(_,eh.tabbableOptions)&&!eo.nextTabbableNode(_,!1))&&(ec=er),ec>=0){var ef=0===ec?ep.tabbableGroups.length-1:ec-1;ee=ep.tabbableGroups[ef].lastTabbableNode}else isTabEvent(h)||(ee=eo.nextTabbableNode(_,!1))}else{var em=findIndex(ep.tabbableGroups,function(h){return _===h.lastTabbableNode});if(em<0&&(eo.container===_||(0,V.isFocusable)(_,eh.tabbableOptions)&&!(0,V.isTabbable)(_,eh.tabbableOptions)&&!eo.nextTabbableNode(_))&&(em=er),em>=0){var eg=em===ep.tabbableGroups.length-1?0:em+1;ee=ep.tabbableGroups[eg].firstTabbableNode}else isTabEvent(h)||(ee=eo.nextTabbableNode(_))}}else ee=getNodeForOption("fallbackFocus");ee&&(isTabEvent(h)&&h.preventDefault(),tryFocus(ee))},checkKey=function(h){if(("Escape"===h.key||"Esc"===h.key||27===h.keyCode)&&!1!==valueOrHandler(eh.escapeDeactivates,h)){h.preventDefault(),_.deactivate();return}(eh.isKeyForward(h)||eh.isKeyBackward(h))&&checkKeyNav(h,eh.isKeyBackward(h))},checkClick=function(h){findContainerIndex(getActualTarget(h),h)>=0||valueOrHandler(eh.clickOutsideDeactivates,h)||valueOrHandler(eh.allowOutsideClick,h)||(h.preventDefault(),h.stopImmediatePropagation())},addListeners=function(){if(ep.active)return ee.activateTrap(ec,_),ep.delayInitialFocusTimer=eh.delayInitialFocus?delay(function(){tryFocus(getInitialFocusNode())}):tryFocus(getInitialFocusNode()),eo.addEventListener("focusin",checkFocusIn,!0),eo.addEventListener("mousedown",checkPointerDown,{capture:!0,passive:!1}),eo.addEventListener("touchstart",checkPointerDown,{capture:!0,passive:!1}),eo.addEventListener("click",checkClick,{capture:!0,passive:!1}),eo.addEventListener("keydown",checkKey,{capture:!0,passive:!1}),_},removeListeners=function(){if(ep.active)return eo.removeEventListener("focusin",checkFocusIn,!0),eo.removeEventListener("mousedown",checkPointerDown,!0),eo.removeEventListener("touchstart",checkPointerDown,!0),eo.removeEventListener("click",checkClick,!0),eo.removeEventListener("keydown",checkKey,!0),_},ef="undefined"!=typeof window&&"MutationObserver"in window?new MutationObserver(function(h){h.some(function(h){return Array.from(h.removedNodes).some(function(h){return h===ep.mostRecentlyFocusedNode})})&&tryFocus(getInitialFocusNode())}):void 0,updateObservedNodes=function(){ef&&(ef.disconnect(),ep.active&&!ep.paused&&ep.containers.map(function(h){ef.observe(h,{subtree:!0,childList:!0})}))};return(_={get active(){return ep.active},get paused(){return ep.paused},activate:function(h){if(ep.active)return this;var d=getOption(h,"onActivate"),_=getOption(h,"onPostActivate"),V=getOption(h,"checkCanFocusTrap");V||updateTabbableNodes(),ep.active=!0,ep.paused=!1,ep.nodeFocusedBeforeActivation=eo.activeElement,null==d||d();var finishActivation=function(){V&&updateTabbableNodes(),addListeners(),updateObservedNodes(),null==_||_()};return V?V(ep.containers.concat()).then(finishActivation,finishActivation):finishActivation(),this},deactivate:function(h){if(!ep.active)return this;var d=_objectSpread2({onDeactivate:eh.onDeactivate,onPostDeactivate:eh.onPostDeactivate,checkCanReturnFocus:eh.checkCanReturnFocus},h);clearTimeout(ep.delayInitialFocusTimer),ep.delayInitialFocusTimer=void 0,removeListeners(),ep.active=!1,ep.paused=!1,updateObservedNodes(),ee.deactivateTrap(ec,_);var V=getOption(d,"onDeactivate"),er=getOption(d,"onPostDeactivate"),eo=getOption(d,"checkCanReturnFocus"),ef=getOption(d,"returnFocus","returnFocusOnDeactivate");null==V||V();var finishDeactivation=function(){delay(function(){ef&&tryFocus(getReturnFocusNode(ep.nodeFocusedBeforeActivation)),null==er||er()})};return ef&&eo?eo(getReturnFocusNode(ep.nodeFocusedBeforeActivation)).then(finishDeactivation,finishDeactivation):finishDeactivation(),this},pause:function(h){if(ep.paused||!ep.active)return this;var d=getOption(h,"onPause"),_=getOption(h,"onPostPause");return ep.paused=!0,null==d||d(),removeListeners(),updateObservedNodes(),null==_||_(),this},unpause:function(h){if(!ep.paused||!ep.active)return this;var d=getOption(h,"onUnpause"),_=getOption(h,"onPostUnpause");return ep.paused=!1,null==d||d(),updateTabbableNodes(),addListeners(),updateObservedNodes(),null==_||_(),this},updateContainerElements:function(h){var d=[].concat(h).filter(Boolean);return ep.containers=d.map(function(h){return"string"==typeof h?eo.querySelector(h):h}),ep.active&&updateTabbableNodes(),updateObservedNodes(),this}}).updateContainerElements(h),_}},8679:function(h,d,_){"use strict";var V=_(9864),ee={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},er={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},eo={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},ec={};function getStatics(h){return V.isMemo(h)?eo:ec[h.$$typeof]||ee}ec[V.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},ec[V.Memo]=eo;var eh=Object.defineProperty,ep=Object.getOwnPropertyNames,ef=Object.getOwnPropertySymbols,em=Object.getOwnPropertyDescriptor,eg=Object.getPrototypeOf,eO=Object.prototype;h.exports=function hoistNonReactStatics(h,d,_){if("string"!=typeof d){if(eO){var V=eg(d);V&&V!==eO&&hoistNonReactStatics(h,V,_)}var ee=ep(d);ef&&(ee=ee.concat(ef(d)));for(var eo=getStatics(h),ec=getStatics(d),ey=0;ey<ee.length;++ey){var ev=ee[ey];if(!er[ev]&&!(_&&_[ev])&&!(ec&&ec[ev])&&!(eo&&eo[ev])){var eS=em(d,ev);try{eh(h,ev,eS)}catch(h){}}}}return h}},6337:function(){!function(){"use strict";if("object"==typeof window){if("IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in window.IntersectionObserverEntry.prototype){"isIntersecting"in window.IntersectionObserverEntry.prototype||Object.defineProperty(window.IntersectionObserverEntry.prototype,"isIntersecting",{get:function(){return this.intersectionRatio>0}});return}var h=window.document,d=[],_=null,V=null;IntersectionObserver.prototype.THROTTLE_TIMEOUT=100,IntersectionObserver.prototype.POLL_INTERVAL=null,IntersectionObserver.prototype.USE_MUTATION_OBSERVER=!0,IntersectionObserver._setupCrossOriginUpdater=function(){return _||(_=function(h,_){V=h&&_?convertFromParentRect(h,_):getEmptyRect(),d.forEach(function(h){h._checkForIntersections()})}),_},IntersectionObserver._resetCrossOriginUpdater=function(){_=null,V=null},IntersectionObserver.prototype.observe=function(h){if(!this._observationTargets.some(function(d){return d.element==h})){if(!(h&&1==h.nodeType))throw Error("target must be an Element");this._registerInstance(),this._observationTargets.push({element:h,entry:null}),this._monitorIntersections(h.ownerDocument),this._checkForIntersections()}},IntersectionObserver.prototype.unobserve=function(h){this._observationTargets=this._observationTargets.filter(function(d){return d.element!=h}),this._unmonitorIntersections(h.ownerDocument),0==this._observationTargets.length&&this._unregisterInstance()},IntersectionObserver.prototype.disconnect=function(){this._observationTargets=[],this._unmonitorAllIntersections(),this._unregisterInstance()},IntersectionObserver.prototype.takeRecords=function(){var h=this._queuedEntries.slice();return this._queuedEntries=[],h},IntersectionObserver.prototype._initThresholds=function(h){var d=h||[0];return Array.isArray(d)||(d=[d]),d.sort().filter(function(h,d,_){if("number"!=typeof h||isNaN(h)||h<0||h>1)throw Error("threshold must be a number between 0 and 1 inclusively");return h!==_[d-1]})},IntersectionObserver.prototype._parseRootMargin=function(h){var d=(h||"0px").split(/\s+/).map(function(h){var d=/^(-?\d*\.?\d+)(px|%)$/.exec(h);if(!d)throw Error("rootMargin must be specified in pixels or percent");return{value:parseFloat(d[1]),unit:d[2]}});return d[1]=d[1]||d[0],d[2]=d[2]||d[0],d[3]=d[3]||d[1],d},IntersectionObserver.prototype._monitorIntersections=function(d){var _=d.defaultView;if(_&&-1==this._monitoringDocuments.indexOf(d)){var V=this._checkForIntersections,ee=null,er=null;if(this.POLL_INTERVAL?ee=_.setInterval(V,this.POLL_INTERVAL):(addEvent(_,"resize",V,!0),addEvent(d,"scroll",V,!0),this.USE_MUTATION_OBSERVER&&"MutationObserver"in _&&(er=new _.MutationObserver(V)).observe(d,{attributes:!0,childList:!0,characterData:!0,subtree:!0})),this._monitoringDocuments.push(d),this._monitoringUnsubscribes.push(function(){var h=d.defaultView;h&&(ee&&h.clearInterval(ee),removeEvent(h,"resize",V,!0)),removeEvent(d,"scroll",V,!0),er&&er.disconnect()}),d!=(this.root&&this.root.ownerDocument||h)){var eo=getFrameElement(d);eo&&this._monitorIntersections(eo.ownerDocument)}}},IntersectionObserver.prototype._unmonitorIntersections=function(d){var _=this._monitoringDocuments.indexOf(d);if(-1!=_){var V=this.root&&this.root.ownerDocument||h;if(!this._observationTargets.some(function(h){var _=h.element.ownerDocument;if(_==d)return!0;for(;_&&_!=V;){var ee=getFrameElement(_);if((_=ee&&ee.ownerDocument)==d)return!0}return!1})){var ee=this._monitoringUnsubscribes[_];if(this._monitoringDocuments.splice(_,1),this._monitoringUnsubscribes.splice(_,1),ee(),d!=V){var er=getFrameElement(d);er&&this._unmonitorIntersections(er.ownerDocument)}}}},IntersectionObserver.prototype._unmonitorAllIntersections=function(){var h=this._monitoringUnsubscribes.slice(0);this._monitoringDocuments.length=0,this._monitoringUnsubscribes.length=0;for(var d=0;d<h.length;d++)h[d]()},IntersectionObserver.prototype._checkForIntersections=function(){if(this.root||!_||V){var h=this._rootIsInDom(),d=h?this._getRootRect():getEmptyRect();this._observationTargets.forEach(function(V){var ee=V.element,er=getBoundingClientRect(ee),eo=this._rootContainsTarget(ee),ec=V.entry,eh=h&&eo&&this._computeTargetAndRootIntersection(ee,er,d),ep=V.entry=new IntersectionObserverEntry({time:window.performance&&performance.now&&performance.now(),target:ee,boundingClientRect:er,rootBounds:_&&!this.root?null:d,intersectionRect:eh});ec?h&&eo?this._hasCrossedThreshold(ec,ep)&&this._queuedEntries.push(ep):ec&&ec.isIntersecting&&this._queuedEntries.push(ep):this._queuedEntries.push(ep)},this),this._queuedEntries.length&&this._callback(this.takeRecords(),this)}},IntersectionObserver.prototype._computeTargetAndRootIntersection=function(d,ee,er){if("none"!=window.getComputedStyle(d).display){for(var eo=ee,ec=getParentNode(d),eh=!1;!eh&&ec;){var ep=null,ef=1==ec.nodeType?window.getComputedStyle(ec):{};if("none"==ef.display)return null;if(ec==this.root||9==ec.nodeType){if(eh=!0,ec==this.root||ec==h)_&&!this.root?V&&(0!=V.width||0!=V.height)?ep=V:(ec=null,ep=null,eo=null):ep=er;else{var em=getParentNode(ec),eg=em&&getBoundingClientRect(em),eO=em&&this._computeTargetAndRootIntersection(em,eg,er);eg&&eO?(ec=em,ep=convertFromParentRect(eg,eO)):(ec=null,eo=null)}}else{var ey=ec.ownerDocument;ec!=ey.body&&ec!=ey.documentElement&&"visible"!=ef.overflow&&(ep=getBoundingClientRect(ec))}if(ep&&(eo=function(h,d){var _=Math.max(h.top,d.top),V=Math.min(h.bottom,d.bottom),ee=Math.max(h.left,d.left),er=Math.min(h.right,d.right),eo=er-ee,ec=V-_;return eo>=0&&ec>=0&&{top:_,bottom:V,left:ee,right:er,width:eo,height:ec}||null}(ep,eo)),!eo)break;ec=ec&&getParentNode(ec)}return eo}},IntersectionObserver.prototype._getRootRect=function(){var d;if(this.root)d=getBoundingClientRect(this.root);else{var _=h.documentElement,V=h.body;d={top:0,left:0,right:_.clientWidth||V.clientWidth,width:_.clientWidth||V.clientWidth,bottom:_.clientHeight||V.clientHeight,height:_.clientHeight||V.clientHeight}}return this._expandRectByRootMargin(d)},IntersectionObserver.prototype._expandRectByRootMargin=function(h){var d=this._rootMarginValues.map(function(d,_){return"px"==d.unit?d.value:d.value*(_%2?h.width:h.height)/100}),_={top:h.top-d[0],right:h.right+d[1],bottom:h.bottom+d[2],left:h.left-d[3]};return _.width=_.right-_.left,_.height=_.bottom-_.top,_},IntersectionObserver.prototype._hasCrossedThreshold=function(h,d){var _=h&&h.isIntersecting?h.intersectionRatio||0:-1,V=d.isIntersecting?d.intersectionRatio||0:-1;if(_!==V)for(var ee=0;ee<this.thresholds.length;ee++){var er=this.thresholds[ee];if(er==_||er==V||er<_!=er<V)return!0}},IntersectionObserver.prototype._rootIsInDom=function(){return!this.root||containsDeep(h,this.root)},IntersectionObserver.prototype._rootContainsTarget=function(d){return containsDeep(this.root||h,d)&&(!this.root||this.root.ownerDocument==d.ownerDocument)},IntersectionObserver.prototype._registerInstance=function(){0>d.indexOf(this)&&d.push(this)},IntersectionObserver.prototype._unregisterInstance=function(){var h=d.indexOf(this);-1!=h&&d.splice(h,1)},window.IntersectionObserver=IntersectionObserver,window.IntersectionObserverEntry=IntersectionObserverEntry}function IntersectionObserverEntry(h){this.time=h.time,this.target=h.target,this.rootBounds=ensureDOMRect(h.rootBounds),this.boundingClientRect=ensureDOMRect(h.boundingClientRect),this.intersectionRect=ensureDOMRect(h.intersectionRect||getEmptyRect()),this.isIntersecting=!!h.intersectionRect;var d=this.boundingClientRect,_=d.width*d.height,V=this.intersectionRect,ee=V.width*V.height;_?this.intersectionRatio=Number((ee/_).toFixed(4)):this.intersectionRatio=this.isIntersecting?1:0}function IntersectionObserver(h,d){var _,V,ee,er=d||{};if("function"!=typeof h)throw Error("callback must be a function");if(er.root&&1!=er.root.nodeType)throw Error("root must be an Element");this._checkForIntersections=(_=this._checkForIntersections.bind(this),V=this.THROTTLE_TIMEOUT,ee=null,function(){ee||(ee=setTimeout(function(){_(),ee=null},V))}),this._callback=h,this._observationTargets=[],this._queuedEntries=[],this._rootMarginValues=this._parseRootMargin(er.rootMargin),this.thresholds=this._initThresholds(er.threshold),this.root=er.root||null,this.rootMargin=this._rootMarginValues.map(function(h){return h.value+h.unit}).join(" "),this._monitoringDocuments=[],this._monitoringUnsubscribes=[]}function addEvent(h,d,_,V){"function"==typeof h.addEventListener?h.addEventListener(d,_,V||!1):"function"==typeof h.attachEvent&&h.attachEvent("on"+d,_)}function removeEvent(h,d,_,V){"function"==typeof h.removeEventListener?h.removeEventListener(d,_,V||!1):"function"==typeof h.detatchEvent&&h.detatchEvent("on"+d,_)}function getBoundingClientRect(h){var d;try{d=h.getBoundingClientRect()}catch(h){}return d?(d.width&&d.height||(d={top:d.top,right:d.right,bottom:d.bottom,left:d.left,width:d.right-d.left,height:d.bottom-d.top}),d):getEmptyRect()}function getEmptyRect(){return{top:0,bottom:0,left:0,right:0,width:0,height:0}}function ensureDOMRect(h){return!h||"x"in h?h:{top:h.top,y:h.top,bottom:h.bottom,left:h.left,x:h.left,right:h.right,width:h.width,height:h.height}}function convertFromParentRect(h,d){var _=d.top-h.top,V=d.left-h.left;return{top:_,left:V,height:d.height,width:d.width,bottom:_+d.height,right:V+d.width}}function containsDeep(h,d){for(var _=d;_;){if(_==h)return!0;_=getParentNode(_)}return!1}function getParentNode(d){var _=d.parentNode;return 9==d.nodeType&&d!=h?getFrameElement(d):_&&11==_.nodeType&&_.host?_.host:_&&_.assignedSlot?_.assignedSlot.parentNode:_}function getFrameElement(h){try{return h.defaultView&&h.defaultView.frameElement||null}catch(h){return null}}}()},6961:function(h,d,_){var V,ee=function(){var h=String.fromCharCode,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",V={};function getBaseValue(h,d){if(!V[h]){V[h]={};for(var _=0;_<h.length;_++)V[h][h.charAt(_)]=_}return V[h][d]}var ee={compressToBase64:function(h){if(null==h)return"";var _=ee._compress(h,6,function(h){return d.charAt(h)});switch(_.length%4){default:case 0:return _;case 1:return _+"===";case 2:return _+"==";case 3:return _+"="}},decompressFromBase64:function(h){return null==h?"":""==h?null:ee._decompress(h.length,32,function(_){return getBaseValue(d,h.charAt(_))})},compressToUTF16:function(d){return null==d?"":ee._compress(d,15,function(d){return h(d+32)})+" "},decompressFromUTF16:function(h){return null==h?"":""==h?null:ee._decompress(h.length,16384,function(d){return h.charCodeAt(d)-32})},compressToUint8Array:function(h){for(var d=ee.compress(h),_=new Uint8Array(2*d.length),V=0,er=d.length;V<er;V++){var eo=d.charCodeAt(V);_[2*V]=eo>>>8,_[2*V+1]=eo%256}return _},decompressFromUint8Array:function(d){if(null==d)return ee.decompress(d);for(var _=Array(d.length/2),V=0,er=_.length;V<er;V++)_[V]=256*d[2*V]+d[2*V+1];var eo=[];return _.forEach(function(d){eo.push(h(d))}),ee.decompress(eo.join(""))},compressToEncodedURIComponent:function(h){return null==h?"":ee._compress(h,6,function(h){return _.charAt(h)})},decompressFromEncodedURIComponent:function(h){return null==h?"":""==h?null:(h=h.replace(/ /g,"+"),ee._decompress(h.length,32,function(d){return getBaseValue(_,h.charAt(d))}))},compress:function(d){return ee._compress(d,16,function(d){return h(d)})},_compress:function(h,d,_){if(null==h)return"";var V,ee,er,eo={},ec={},eh="",ep="",ef="",em=2,eg=3,eO=2,ey=[],ev=0,eS=0;for(er=0;er<h.length;er+=1)if(eh=h.charAt(er),Object.prototype.hasOwnProperty.call(eo,eh)||(eo[eh]=eg++,ec[eh]=!0),ep=ef+eh,Object.prototype.hasOwnProperty.call(eo,ep))ef=ep;else{if(Object.prototype.hasOwnProperty.call(ec,ef)){if(256>ef.charCodeAt(0)){for(V=0;V<eO;V++)ev<<=1,eS==d-1?(eS=0,ey.push(_(ev)),ev=0):eS++;for(V=0,ee=ef.charCodeAt(0);V<8;V++)ev=ev<<1|1&ee,eS==d-1?(eS=0,ey.push(_(ev)),ev=0):eS++,ee>>=1}else{for(V=0,ee=1;V<eO;V++)ev=ev<<1|ee,eS==d-1?(eS=0,ey.push(_(ev)),ev=0):eS++,ee=0;for(V=0,ee=ef.charCodeAt(0);V<16;V++)ev=ev<<1|1&ee,eS==d-1?(eS=0,ey.push(_(ev)),ev=0):eS++,ee>>=1}0==--em&&(em=Math.pow(2,eO),eO++),delete ec[ef]}else for(V=0,ee=eo[ef];V<eO;V++)ev=ev<<1|1&ee,eS==d-1?(eS=0,ey.push(_(ev)),ev=0):eS++,ee>>=1;0==--em&&(em=Math.pow(2,eO),eO++),eo[ep]=eg++,ef=String(eh)}if(""!==ef){if(Object.prototype.hasOwnProperty.call(ec,ef)){if(256>ef.charCodeAt(0)){for(V=0;V<eO;V++)ev<<=1,eS==d-1?(eS=0,ey.push(_(ev)),ev=0):eS++;for(V=0,ee=ef.charCodeAt(0);V<8;V++)ev=ev<<1|1&ee,eS==d-1?(eS=0,ey.push(_(ev)),ev=0):eS++,ee>>=1}else{for(V=0,ee=1;V<eO;V++)ev=ev<<1|ee,eS==d-1?(eS=0,ey.push(_(ev)),ev=0):eS++,ee=0;for(V=0,ee=ef.charCodeAt(0);V<16;V++)ev=ev<<1|1&ee,eS==d-1?(eS=0,ey.push(_(ev)),ev=0):eS++,ee>>=1}0==--em&&(em=Math.pow(2,eO),eO++),delete ec[ef]}else for(V=0,ee=eo[ef];V<eO;V++)ev=ev<<1|1&ee,eS==d-1?(eS=0,ey.push(_(ev)),ev=0):eS++,ee>>=1;0==--em&&(em=Math.pow(2,eO),eO++)}for(V=0,ee=2;V<eO;V++)ev=ev<<1|1&ee,eS==d-1?(eS=0,ey.push(_(ev)),ev=0):eS++,ee>>=1;for(;;){if(ev<<=1,eS==d-1){ey.push(_(ev));break}eS++}return ey.join("")},decompress:function(h){return null==h?"":""==h?null:ee._decompress(h.length,32768,function(d){return h.charCodeAt(d)})},_decompress:function(d,_,V){var ee,er,eo,ec,eh,ep,ef,em=[],eg=4,eO=4,ey=3,ev="",eS=[],e_={val:V(0),position:_,index:1};for(ee=0;ee<3;ee+=1)em[ee]=ee;for(eo=0,eh=4,ep=1;ep!=eh;)ec=e_.val&e_.position,e_.position>>=1,0==e_.position&&(e_.position=_,e_.val=V(e_.index++)),eo|=(ec>0?1:0)*ep,ep<<=1;switch(eo){case 0:for(eo=0,eh=256,ep=1;ep!=eh;)ec=e_.val&e_.position,e_.position>>=1,0==e_.position&&(e_.position=_,e_.val=V(e_.index++)),eo|=(ec>0?1:0)*ep,ep<<=1;ef=h(eo);break;case 1:for(eo=0,eh=65536,ep=1;ep!=eh;)ec=e_.val&e_.position,e_.position>>=1,0==e_.position&&(e_.position=_,e_.val=V(e_.index++)),eo|=(ec>0?1:0)*ep,ep<<=1;ef=h(eo);break;case 2:return""}for(em[3]=ef,er=ef,eS.push(ef);;){if(e_.index>d)return"";for(eo=0,eh=Math.pow(2,ey),ep=1;ep!=eh;)ec=e_.val&e_.position,e_.position>>=1,0==e_.position&&(e_.position=_,e_.val=V(e_.index++)),eo|=(ec>0?1:0)*ep,ep<<=1;switch(ef=eo){case 0:for(eo=0,eh=256,ep=1;ep!=eh;)ec=e_.val&e_.position,e_.position>>=1,0==e_.position&&(e_.position=_,e_.val=V(e_.index++)),eo|=(ec>0?1:0)*ep,ep<<=1;em[eO++]=h(eo),ef=eO-1,eg--;break;case 1:for(eo=0,eh=65536,ep=1;ep!=eh;)ec=e_.val&e_.position,e_.position>>=1,0==e_.position&&(e_.position=_,e_.val=V(e_.index++)),eo|=(ec>0?1:0)*ep,ep<<=1;em[eO++]=h(eo),ef=eO-1,eg--;break;case 2:return eS.join("")}if(0==eg&&(eg=Math.pow(2,ey),ey++),em[ef])ev=em[ef];else{if(ef!==eO)return null;ev=er+er.charAt(0)}eS.push(ev),em[eO++]=er+ev.charAt(0),eg--,er=ev,0==eg&&(eg=Math.pow(2,ey),ey++)}}};return ee}();void 0!==(V=(function(){return ee}).call(d,_,d,h))&&(h.exports=V)},8273:function(h,d,_){"use strict";let V;_.d(d,{Jc:function(){return appWithTranslation},$G:function(){return useTranslation_useTranslation}});var ee=_(7294);_(1739),Object.create(null);let er={};function utils_warnOnce(){for(var h=arguments.length,d=Array(h),_=0;_<h;_++)d[_]=arguments[_];"string"==typeof d[0]&&er[d[0]]||("string"==typeof d[0]&&(er[d[0]]=new Date),function(){if(console&&console.warn){for(var h=arguments.length,d=Array(h),_=0;_<h;_++)d[_]=arguments[_];"string"==typeof d[0]&&(d[0]=`react-i18next:: ${d[0]}`),console.warn(...d)}}(...d))}let loadedClb=(h,d)=>()=>{if(h.isInitialized)d();else{let initialized=()=>{setTimeout(()=>{h.off("initialized",initialized)},0),d()};h.on("initialized",initialized)}};function loadNamespaces(h,d,_){h.loadNamespaces(d,loadedClb(h,_))}function loadLanguages(h,d,_,V){"string"==typeof _&&(_=[_]),_.forEach(d=>{0>h.options.ns.indexOf(d)&&h.options.ns.push(d)}),h.loadLanguages(d,loadedClb(h,V))}let eo=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,ec={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},unescapeHtmlEntity=h=>ec[h],eh={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:h=>h.replace(eo,unescapeHtmlEntity)},ep=(0,ee.createContext)();let ReportNamespaces=class ReportNamespaces{constructor(){this.usedNamespaces={}}addUsedNamespaces(h){h.forEach(h=>{this.usedNamespaces[h]||(this.usedNamespaces[h]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}};let usePrevious=(h,d)=>{let _=(0,ee.useRef)();return(0,ee.useEffect)(()=>{_.current=d?_.current:h},[h,d]),_.current};function useTranslation_useTranslation(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{i18n:_}=d,{i18n:er,defaultNS:eo}=(0,ee.useContext)(ep)||{},ec=_||er||V;if(ec&&!ec.reportNamespaces&&(ec.reportNamespaces=new ReportNamespaces),!ec){utils_warnOnce("You will need to pass in an i18next instance by using initReactI18next");let notReadyT=(h,d)=>"string"==typeof d?d:d&&"object"==typeof d&&"string"==typeof d.defaultValue?d.defaultValue:Array.isArray(h)?h[h.length-1]:h,h=[notReadyT,{},!1];return h.t=notReadyT,h.i18n={},h.ready=!1,h}ec.options.react&&void 0!==ec.options.react.wait&&utils_warnOnce("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");let ef={...eh,...ec.options.react,...d},{useSuspense:em,keyPrefix:eg}=ef,eO=h||eo||ec.options&&ec.options.defaultNS;eO="string"==typeof eO?[eO]:eO||["translation"],ec.reportNamespaces.addUsedNamespaces&&ec.reportNamespaces.addUsedNamespaces(eO);let ey=(ec.isInitialized||ec.initializedStoreOnce)&&eO.every(h=>(function(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!d.languages||!d.languages.length)return utils_warnOnce("i18n.languages were undefined or empty",d.languages),!0;let V=void 0!==d.options.ignoreJSONStructure;return V?d.hasLoadedNamespace(h,{lng:_.lng,precheck:(d,V)=>{if(_.bindI18n&&_.bindI18n.indexOf("languageChanging")>-1&&d.services.backendConnector.backend&&d.isLanguageChangingTo&&!V(d.isLanguageChangingTo,h))return!1}}):function(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},V=d.languages[0],ee=!!d.options&&d.options.fallbackLng,er=d.languages[d.languages.length-1];if("cimode"===V.toLowerCase())return!0;let loadNotPending=(h,_)=>{let V=d.services.backendConnector.state[`${h}|${_}`];return -1===V||2===V};return(!(_.bindI18n&&_.bindI18n.indexOf("languageChanging")>-1)||!d.services.backendConnector.backend||!d.isLanguageChangingTo||!!loadNotPending(d.isLanguageChangingTo,h))&&!!(d.hasResourceBundle(V,h)||!d.services.backendConnector.backend||d.options.resources&&!d.options.partialBundledLanguages||loadNotPending(V,h)&&(!ee||loadNotPending(er,h)))}(h,d,_)})(h,ec,ef));function getT(){return ec.getFixedT(d.lng||null,"fallback"===ef.nsMode?eO:eO[0],eg)}let[ev,eS]=(0,ee.useState)(getT),e_=eO.join();d.lng&&(e_=`${d.lng}${e_}`);let ew=usePrevious(e_),ex=(0,ee.useRef)(!0);(0,ee.useEffect)(()=>{let{bindI18n:h,bindI18nStore:_}=ef;function boundReset(){ex.current&&eS(getT)}return ex.current=!0,ey||em||(d.lng?loadLanguages(ec,d.lng,eO,()=>{ex.current&&eS(getT)}):loadNamespaces(ec,eO,()=>{ex.current&&eS(getT)})),ey&&ew&&ew!==e_&&ex.current&&eS(getT),h&&ec&&ec.on(h,boundReset),_&&ec&&ec.store.on(_,boundReset),()=>{ex.current=!1,h&&ec&&h.split(" ").forEach(h=>ec.off(h,boundReset)),_&&ec&&_.split(" ").forEach(h=>ec.store.off(h,boundReset))}},[ec,e_]);let ek=(0,ee.useRef)(!0);(0,ee.useEffect)(()=>{ex.current&&!ek.current&&eS(getT),ek.current=!1},[ec,eg]);let eT=[ev,ec,ey];if(eT.t=ev,eT.i18n=ec,eT.ready=ey,ey||!ey&&!em)return eT;throw new Promise(h=>{d.lng?loadLanguages(ec,d.lng,eO,()=>h()):loadNamespaces(ec,eO,()=>h())})}function I18nextProvider(h){let{i18n:d,defaultNS:_,children:V}=h,er=(0,ee.useMemo)(()=>({i18n:d,defaultNS:_}),[d,_]);return(0,ee.createElement)(ep.Provider,{value:er},V)}function _extends(){return(_extends=Object.assign?Object.assign.bind():function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}var ef=_(484);function _defineProperty(h,d,_){var V;return V=function(h,d){if("object"!=(0,ef.Z)(h)||!h)return h;var _=h[Symbol.toPrimitive];if(void 0!==_){var V=_.call(h,d||"default");if("object"!=(0,ef.Z)(V))return V;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===d?String:Number)(h)}(d,"string"),(d="symbol"==(0,ef.Z)(V)?V:String(V))in h?Object.defineProperty(h,d,{value:_,enumerable:!0,configurable:!0,writable:!0}):h[d]=_,h}var em=_(8679),eg=_.n(em);function _arrayLikeToArray(h,d){(null==d||d>h.length)&&(d=h.length);for(var _=0,V=Array(d);_<d;_++)V[_]=h[_];return V}function _unsupportedIterableToArray(h,d){if(h){if("string"==typeof h)return _arrayLikeToArray(h,d);var _=Object.prototype.toString.call(h).slice(8,-1);if("Object"===_&&h.constructor&&(_=h.constructor.name),"Map"===_||"Set"===_)return Array.from(h);if("Arguments"===_||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(_))return _arrayLikeToArray(h,d)}}function _slicedToArray(h,d){return function(h){if(Array.isArray(h))return h}(h)||function(h,d){var _=null==h?null:"undefined"!=typeof Symbol&&h[Symbol.iterator]||h["@@iterator"];if(null!=_){var V,ee,er,eo,ec=[],eh=!0,ep=!1;try{if(er=(_=_.call(h)).next,0===d){if(Object(_)!==_)return;eh=!1}else for(;!(eh=(V=er.call(_)).done)&&(ec.push(V.value),ec.length!==d);eh=!0);}catch(h){ep=!0,ee=h}finally{try{if(!eh&&null!=_.return&&(eo=_.return(),Object(eo)!==eo))return}finally{if(ep)throw ee}}return ec}}(h,d)||_unsupportedIterableToArray(h,d)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _objectWithoutProperties(h,d){if(null==h)return{};var _,V,ee=function(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}(h,d);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(h);for(V=0;V<er.length;V++)_=er[V],!(d.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(h,_)&&(ee[_]=h[_])}return ee}var eO={defaultNS:"common",errorStackTraceLimit:0,i18n:{defaultLocale:"en",locales:["en"]},get initImmediate(){return"undefined"!=typeof window},interpolation:{escapeValue:!1},load:"currentOnly",localeExtension:"json",localePath:"./public/locales",localeStructure:"{{lng}}/{{ns}}",react:{useSuspense:!1},reloadOnPrerender:!1,serializeConfig:!0,use:[]},ey=["i18n"],ev=["i18n"];function ownKeys(h,d){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(h);d&&(V=V.filter(function(d){return Object.getOwnPropertyDescriptor(h,d).enumerable})),_.push.apply(_,V)}return _}function _objectSpread(h){for(var d=1;d<arguments.length;d++){var _=null!=arguments[d]?arguments[d]:{};d%2?ownKeys(Object(_),!0).forEach(function(d){_defineProperty(h,d,_[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):ownKeys(Object(_)).forEach(function(d){Object.defineProperty(h,d,Object.getOwnPropertyDescriptor(_,d))})}return h}var eS=["backend","detection"],createConfig=function(h){if("string"!=typeof(null==h?void 0:h.lng))throw Error("config.lng was not passed into createConfig");var d,_,V,ee=h.i18n,er=_objectWithoutProperties(h,ey),eo=eO.i18n,ec=_objectSpread(_objectSpread(_objectSpread(_objectSpread({},_objectWithoutProperties(eO,ev)),er),eo),ee),eh=ec.defaultNS,ep=ec.lng,em=ec.localeExtension,eg=ec.localePath,e_=ec.nonExplicitSupportedLngs,ew=ec.locales.filter(function(h){return"default"!==h});if("cimode"===ep)return ec;if(void 0===ec.fallbackLng&&(ec.fallbackLng=ec.defaultLocale,"default"===ec.fallbackLng)){var ex=_slicedToArray(ew,1);ec.fallbackLng=ex[0]}var ek=null==h?void 0:null===(d=h.interpolation)||void 0===d?void 0:d.prefix,eT=null==h?void 0:null===(_=h.interpolation)||void 0===_?void 0:_.suffix,eE=null!=ek?ek:"{{",eC=null!=eT?eT:"}}";"string"!=typeof(null==h?void 0:h.localeStructure)&&(ek||eT)&&(ec.localeStructure="".concat(eE,"lng").concat(eC,"/").concat(eE,"ns").concat(eC));var eP=ec.fallbackLng,eI=ec.localeStructure;if(e_){var createFallbackObject=function(h,d){var _=_slicedToArray(d.split("-"),1)[0];return h[d]=[_],h};if("string"==typeof eP)ec.fallbackLng=ec.locales.filter(function(h){return h.includes("-")}).reduce(createFallbackObject,{default:[eP]});else if(Array.isArray(eP))ec.fallbackLng=ec.locales.filter(function(h){return h.includes("-")}).reduce(createFallbackObject,{default:eP});else if("object"===(0,ef.Z)(eP))ec.fallbackLng=Object.entries(ec.fallbackLng).reduce(function(h,d){var _,V=_slicedToArray(d,2),ee=V[0],er=V[1];return h[ee]=ee.includes("-")?(_=[ee.split("-")[0]].concat(function(h){if(Array.isArray(h))return _arrayLikeToArray(h)}(er)||function(h){if("undefined"!=typeof Symbol&&null!=h[Symbol.iterator]||null!=h["@@iterator"])return Array.from(h)}(er)||_unsupportedIterableToArray(er)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),Array.from(new Set(_))):er,h},eP);else if("function"==typeof eP)throw Error("If nonExplicitSupportedLngs is true, no functions are allowed for fallbackLng")}return(null==h?void 0:null===(V=h.use)||void 0===V?void 0:V.some(function(h){return"backend"===h.type}))||("string"==typeof eg?ec.backend={addPath:"".concat(eg,"/").concat(eI,".missing.").concat(em),loadPath:"".concat(eg,"/").concat(eI,".").concat(em)}:"function"!=typeof eg||(ec.backend={addPath:function(h,d){return eg(h,d,!0)},loadPath:function(h,d){return eg(h,d,!1)}})),"string"==typeof ec.ns||Array.isArray(ec.ns)||(ec.ns=[eh]),eS.forEach(function(d){h[d]&&(ec[d]=_objectSpread(_objectSpread({},ec[d]),h[d]))}),ec};let e_={type:"logger",log(h){this.output("log",h)},warn(h){this.output("warn",h)},error(h){this.output("error",h)},output(h,d){console&&console[h]&&console[h].apply(console,d)}};let Logger=class Logger{constructor(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(h,d)}init(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=d.prefix||"i18next:",this.logger=h||e_,this.options=d,this.debug=d.debug}log(){for(var h=arguments.length,d=Array(h),_=0;_<h;_++)d[_]=arguments[_];return this.forward(d,"log","",!0)}warn(){for(var h=arguments.length,d=Array(h),_=0;_<h;_++)d[_]=arguments[_];return this.forward(d,"warn","",!0)}error(){for(var h=arguments.length,d=Array(h),_=0;_<h;_++)d[_]=arguments[_];return this.forward(d,"error","")}deprecate(){for(var h=arguments.length,d=Array(h),_=0;_<h;_++)d[_]=arguments[_];return this.forward(d,"warn","WARNING DEPRECATED: ",!0)}forward(h,d,_,V){return V&&!this.debug?null:("string"==typeof h[0]&&(h[0]=`${_}${this.prefix} ${h[0]}`),this.logger[d](h))}create(h){return new Logger(this.logger,{prefix:`${this.prefix}:${h}:`,...this.options})}clone(h){return(h=h||this.options).prefix=h.prefix||this.prefix,new Logger(this.logger,h)}};var ew=new Logger;let EventEmitter=class EventEmitter{constructor(){this.observers={}}on(h,d){return h.split(" ").forEach(h=>{this.observers[h]=this.observers[h]||[],this.observers[h].push(d)}),this}off(h,d){if(this.observers[h]){if(!d){delete this.observers[h];return}this.observers[h]=this.observers[h].filter(h=>h!==d)}}emit(h){for(var d=arguments.length,_=Array(d>1?d-1:0),V=1;V<d;V++)_[V-1]=arguments[V];if(this.observers[h]){let d=[].concat(this.observers[h]);d.forEach(h=>{h(..._)})}if(this.observers["*"]){let d=[].concat(this.observers["*"]);d.forEach(d=>{d.apply(d,[h,..._])})}}};function defer(){let h,d;let _=new Promise((_,V)=>{h=_,d=V});return _.resolve=h,_.reject=d,_}function makeString(h){return null==h?"":""+h}function getLastOfPath(h,d,_){function cleanKey(h){return h&&h.indexOf("###")>-1?h.replace(/###/g,"."):h}function canNotTraverseDeeper(){return!h||"string"==typeof h}let V="string"!=typeof d?[].concat(d):d.split(".");for(;V.length>1;){if(canNotTraverseDeeper())return{};let d=cleanKey(V.shift());!h[d]&&_&&(h[d]=new _),h=Object.prototype.hasOwnProperty.call(h,d)?h[d]:{}}return canNotTraverseDeeper()?{}:{obj:h,k:cleanKey(V.shift())}}function setPath(h,d,_){let{obj:V,k:ee}=getLastOfPath(h,d,Object);V[ee]=_}function getPath(h,d){let{obj:_,k:V}=getLastOfPath(h,d);if(_)return _[V]}function regexEscape(h){return h.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}var ex={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};function i18next_escape(h){return"string"==typeof h?h.replace(/[&<>"'\/]/g,h=>ex[h]):h}let ek=[" ",",","?","!",";"];function deepFind(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!h)return;if(h[d])return h[d];let V=d.split(_),ee=h;for(let h=0;h<V.length;++h){if(!ee||"string"==typeof ee[V[h]]&&h+1<V.length)return;if(void 0===ee[V[h]]){let er=2,eo=V.slice(h,h+er).join(_),ec=ee[eo];for(;void 0===ec&&V.length>h+er;)er++,ec=ee[eo=V.slice(h,h+er).join(_)];if(void 0===ec)return;if(null===ec)return null;if(d.endsWith(eo)){if("string"==typeof ec)return ec;if(eo&&"string"==typeof ec[eo])return ec[eo]}let eh=V.slice(h+er).join(_);if(eh)return deepFind(ec,eh,_);return}ee=ee[V[h]]}return ee}function getCleanedCode(h){return h&&h.indexOf("_")>0?h.replace("_","-"):h}let ResourceStore=class ResourceStore extends EventEmitter{constructor(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=h||{},this.options=d,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(h){0>this.options.ns.indexOf(h)&&this.options.ns.push(h)}removeNamespaces(h){let d=this.options.ns.indexOf(h);d>-1&&this.options.ns.splice(d,1)}getResource(h,d,_){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},ee=void 0!==V.keySeparator?V.keySeparator:this.options.keySeparator,er=void 0!==V.ignoreJSONStructure?V.ignoreJSONStructure:this.options.ignoreJSONStructure,eo=[h,d];_&&"string"!=typeof _&&(eo=eo.concat(_)),_&&"string"==typeof _&&(eo=eo.concat(ee?_.split(ee):_)),h.indexOf(".")>-1&&(eo=h.split("."));let ec=getPath(this.data,eo);return ec||!er||"string"!=typeof _?ec:deepFind(this.data&&this.data[h]&&this.data[h][d],_,ee)}addResource(h,d,_,V){let ee=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1},er=void 0!==ee.keySeparator?ee.keySeparator:this.options.keySeparator,eo=[h,d];_&&(eo=eo.concat(er?_.split(er):_)),h.indexOf(".")>-1&&(eo=h.split("."),V=d,d=eo[1]),this.addNamespaces(d),setPath(this.data,eo,V),ee.silent||this.emit("added",h,d,_,V)}addResources(h,d,_){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(let V in _)("string"==typeof _[V]||"[object Array]"===Object.prototype.toString.apply(_[V]))&&this.addResource(h,d,V,_[V],{silent:!0});V.silent||this.emit("added",h,d,_)}addResourceBundle(h,d,_,V,ee){let er=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1},eo=[h,d];h.indexOf(".")>-1&&(eo=h.split("."),V=_,_=d,d=eo[1]),this.addNamespaces(d);let ec=getPath(this.data,eo)||{};V?function deepExtend(h,d,_){for(let V in d)"__proto__"!==V&&"constructor"!==V&&(V in h?"string"==typeof h[V]||h[V]instanceof String||"string"==typeof d[V]||d[V]instanceof String?_&&(h[V]=d[V]):deepExtend(h[V],d[V],_):h[V]=d[V]);return h}(ec,_,ee):ec={...ec,..._},setPath(this.data,eo,ec),er.silent||this.emit("added",h,d,_)}removeResourceBundle(h,d){this.hasResourceBundle(h,d)&&delete this.data[h][d],this.removeNamespaces(d),this.emit("removed",h,d)}hasResourceBundle(h,d){return void 0!==this.getResource(h,d)}getResourceBundle(h,d){return(d||(d=this.options.defaultNS),"v1"===this.options.compatibilityAPI)?{...this.getResource(h,d)}:this.getResource(h,d)}getDataByLanguage(h){return this.data[h]}hasLanguageSomeTranslations(h){let d=this.getDataByLanguage(h),_=d&&Object.keys(d)||[];return!!_.find(h=>d[h]&&Object.keys(d[h]).length>0)}toJSON(){return this.data}};var eT={processors:{},addPostProcessor(h){this.processors[h.name]=h},handle(h,d,_,V,ee){return h.forEach(h=>{this.processors[h]&&(d=this.processors[h].process(d,_,V,ee))}),d}};let eE={};let Translator=class Translator extends EventEmitter{constructor(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),function(h,d,_){h.forEach(h=>{d[h]&&(_[h]=d[h])})}(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],h,this),this.options=d,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=ew.create("translator")}changeLanguage(h){h&&(this.language=h)}exists(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(null==h)return!1;let _=this.resolve(h,d);return _&&void 0!==_.res}extractFromKey(h,d){let _=void 0!==d.nsSeparator?d.nsSeparator:this.options.nsSeparator;void 0===_&&(_=":");let V=void 0!==d.keySeparator?d.keySeparator:this.options.keySeparator,ee=d.ns||this.options.defaultNS||[],er=_&&h.indexOf(_)>-1,eo=!this.options.userDefinedKeySeparator&&!d.keySeparator&&!this.options.userDefinedNsSeparator&&!d.nsSeparator&&!function(h,d,_){d=d||"",_=_||"";let V=ek.filter(h=>0>d.indexOf(h)&&0>_.indexOf(h));if(0===V.length)return!0;let ee=RegExp(`(${V.map(h=>"?"===h?"\\?":h).join("|")})`),er=!ee.test(h);if(!er){let d=h.indexOf(_);d>0&&!ee.test(h.substring(0,d))&&(er=!0)}return er}(h,_,V);if(er&&!eo){let d=h.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:h,namespaces:ee};let er=h.split(_);(_!==V||_===V&&this.options.ns.indexOf(er[0])>-1)&&(ee=er.shift()),h=er.join(V)}return"string"==typeof ee&&(ee=[ee]),{key:h,namespaces:ee}}translate(h,d,_){if("object"!=typeof d&&this.options.overloadTranslationOptionHandler&&(d=this.options.overloadTranslationOptionHandler(arguments)),"object"==typeof d&&(d={...d}),d||(d={}),null==h)return"";Array.isArray(h)||(h=[String(h)]);let V=void 0!==d.returnDetails?d.returnDetails:this.options.returnDetails,ee=void 0!==d.keySeparator?d.keySeparator:this.options.keySeparator,{key:er,namespaces:eo}=this.extractFromKey(h[h.length-1],d),ec=eo[eo.length-1],eh=d.lng||this.language,ep=d.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(eh&&"cimode"===eh.toLowerCase()){if(ep){let h=d.nsSeparator||this.options.nsSeparator;return V?{res:`${ec}${h}${er}`,usedKey:er,exactUsedKey:er,usedLng:eh,usedNS:ec}:`${ec}${h}${er}`}return V?{res:er,usedKey:er,exactUsedKey:er,usedLng:eh,usedNS:ec}:er}let ef=this.resolve(h,d),em=ef&&ef.res,eg=ef&&ef.usedKey||er,eO=ef&&ef.exactUsedKey||er,ey=Object.prototype.toString.apply(em),ev=void 0!==d.joinArrays?d.joinArrays:this.options.joinArrays,eS=!this.i18nFormat||this.i18nFormat.handleAsObject,e_="string"!=typeof em&&"boolean"!=typeof em&&"number"!=typeof em;if(eS&&em&&e_&&0>["[object Number]","[object Function]","[object RegExp]"].indexOf(ey)&&!("string"==typeof ev&&"[object Array]"===ey)){if(!d.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");let h=this.options.returnedObjectHandler?this.options.returnedObjectHandler(eg,em,{...d,ns:eo}):`key '${er} (${this.language})' returned an object instead of string.`;return V?(ef.res=h,ef):h}if(ee){let h="[object Array]"===ey,_=h?[]:{},V=h?eO:eg;for(let h in em)if(Object.prototype.hasOwnProperty.call(em,h)){let er=`${V}${ee}${h}`;_[h]=this.translate(er,{...d,joinArrays:!1,ns:eo}),_[h]===er&&(_[h]=em[h])}em=_}}else if(eS&&"string"==typeof ev&&"[object Array]"===ey)(em=em.join(ev))&&(em=this.extendTranslation(em,h,d,_));else{let V=!1,eo=!1,ep=void 0!==d.count&&"string"!=typeof d.count,eg=Translator.hasDefaultValue(d),eO=ep?this.pluralResolver.getSuffix(eh,d.count,d):"",ey=d.ordinal&&ep?this.pluralResolver.getSuffix(eh,d.count,{ordinal:!1}):"",ev=d[`defaultValue${eO}`]||d[`defaultValue${ey}`]||d.defaultValue;!this.isValidLookup(em)&&eg&&(V=!0,em=ev),this.isValidLookup(em)||(eo=!0,em=er);let eS=d.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey,e_=eS&&eo?void 0:em,ew=eg&&ev!==em&&this.options.updateMissing;if(eo||V||ew){if(this.logger.log(ew?"updateKey":"missingKey",eh,ec,er,ew?ev:em),ee){let h=this.resolve(er,{...d,keySeparator:!1});h&&h.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let h=[],_=this.languageUtils.getFallbackCodes(this.options.fallbackLng,d.lng||this.language);if("fallback"===this.options.saveMissingTo&&_&&_[0])for(let d=0;d<_.length;d++)h.push(_[d]);else"all"===this.options.saveMissingTo?h=this.languageUtils.toResolveHierarchy(d.lng||this.language):h.push(d.lng||this.language);let send=(h,_,V)=>{let ee=eg&&V!==em?V:e_;this.options.missingKeyHandler?this.options.missingKeyHandler(h,ec,_,ee,ew,d):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(h,ec,_,ee,ew,d),this.emit("missingKey",h,ec,_,em)};this.options.saveMissing&&(this.options.saveMissingPlurals&&ep?h.forEach(h=>{this.pluralResolver.getSuffixes(h,d).forEach(_=>{send([h],er+_,d[`defaultValue${_}`]||ev)})}):send(h,er,ev))}em=this.extendTranslation(em,h,d,ef,_),eo&&em===er&&this.options.appendNamespaceToMissingKey&&(em=`${ec}:${er}`),(eo||V)&&this.options.parseMissingKeyHandler&&(em="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${ec}:${er}`:er,V?em:void 0):this.options.parseMissingKeyHandler(em))}return V?(ef.res=em,ef):em}extendTranslation(h,d,_,V,ee){var er=this;if(this.i18nFormat&&this.i18nFormat.parse)h=this.i18nFormat.parse(h,{...this.options.interpolation.defaultVariables,..._},V.usedLng,V.usedNS,V.usedKey,{resolved:V});else if(!_.skipInterpolation){let eo;_.interpolation&&this.interpolator.init({..._,interpolation:{...this.options.interpolation,..._.interpolation}});let ec="string"==typeof h&&(_&&_.interpolation&&void 0!==_.interpolation.skipOnVariables?_.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);if(ec){let d=h.match(this.interpolator.nestingRegexp);eo=d&&d.length}let eh=_.replace&&"string"!=typeof _.replace?_.replace:_;if(this.options.interpolation.defaultVariables&&(eh={...this.options.interpolation.defaultVariables,...eh}),h=this.interpolator.interpolate(h,eh,_.lng||this.language,_),ec){let d=h.match(this.interpolator.nestingRegexp),V=d&&d.length;eo<V&&(_.nest=!1)}!_.lng&&"v1"!==this.options.compatibilityAPI&&V&&V.res&&(_.lng=V.usedLng),!1!==_.nest&&(h=this.interpolator.nest(h,function(){for(var h=arguments.length,V=Array(h),eo=0;eo<h;eo++)V[eo]=arguments[eo];return ee&&ee[0]===V[0]&&!_.context?(er.logger.warn(`It seems you are nesting recursively key: ${V[0]} in key: ${d[0]}`),null):er.translate(...V,d)},_)),_.interpolation&&this.interpolator.reset()}let eo=_.postProcess||this.options.postProcess,ec="string"==typeof eo?[eo]:eo;return null!=h&&ec&&ec.length&&!1!==_.applyPostProcessor&&(h=eT.handle(ec,h,d,this.options&&this.options.postProcessPassResolved?{i18nResolved:V,..._}:_,this)),h}resolve(h){let d,_,V,ee,er,eo=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof h&&(h=[h]),h.forEach(h=>{if(this.isValidLookup(d))return;let ec=this.extractFromKey(h,eo),eh=ec.key;_=eh;let ep=ec.namespaces;this.options.fallbackNS&&(ep=ep.concat(this.options.fallbackNS));let ef=void 0!==eo.count&&"string"!=typeof eo.count,em=ef&&!eo.ordinal&&0===eo.count&&this.pluralResolver.shouldUseIntlApi(),eg=void 0!==eo.context&&("string"==typeof eo.context||"number"==typeof eo.context)&&""!==eo.context,eO=eo.lngs?eo.lngs:this.languageUtils.toResolveHierarchy(eo.lng||this.language,eo.fallbackLng);ep.forEach(h=>{this.isValidLookup(d)||(er=h,!eE[`${eO[0]}-${h}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(er)&&(eE[`${eO[0]}-${h}`]=!0,this.logger.warn(`key "${_}" for languages "${eO.join(", ")}" won't get resolved as namespace "${er}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),eO.forEach(_=>{let er;if(this.isValidLookup(d))return;ee=_;let ec=[eh];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(ec,eh,_,h,eo);else{let h;ef&&(h=this.pluralResolver.getSuffix(_,eo.count,eo));let d=`${this.options.pluralSeparator}zero`,V=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(ef&&(ec.push(eh+h),eo.ordinal&&0===h.indexOf(V)&&ec.push(eh+h.replace(V,this.options.pluralSeparator)),em&&ec.push(eh+d)),eg){let _=`${eh}${this.options.contextSeparator}${eo.context}`;ec.push(_),ef&&(ec.push(_+h),eo.ordinal&&0===h.indexOf(V)&&ec.push(_+h.replace(V,this.options.pluralSeparator)),em&&ec.push(_+d))}}for(;er=ec.pop();)this.isValidLookup(d)||(V=er,d=this.getResource(_,h,er,eo))}))})}),{res:d,usedKey:_,exactUsedKey:V,usedLng:ee,usedNS:er}}isValidLookup(h){return void 0!==h&&!(!this.options.returnNull&&null===h)&&!(!this.options.returnEmptyString&&""===h)}getResource(h,d,_){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(h,d,_,V):this.resourceStore.getResource(h,d,_,V)}static hasDefaultValue(h){let d="defaultValue";for(let _ in h)if(Object.prototype.hasOwnProperty.call(h,_)&&d===_.substring(0,d.length)&&void 0!==h[_])return!0;return!1}};function capitalize(h){return h.charAt(0).toUpperCase()+h.slice(1)}let LanguageUtil=class LanguageUtil{constructor(h){this.options=h,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ew.create("languageUtils")}getScriptPartFromCode(h){if(!(h=getCleanedCode(h))||0>h.indexOf("-"))return null;let d=h.split("-");return 2===d.length?null:(d.pop(),"x"===d[d.length-1].toLowerCase())?null:this.formatLanguageCode(d.join("-"))}getLanguagePartFromCode(h){if(!(h=getCleanedCode(h))||0>h.indexOf("-"))return h;let d=h.split("-");return this.formatLanguageCode(d[0])}formatLanguageCode(h){if("string"==typeof h&&h.indexOf("-")>-1){let d=["hans","hant","latn","cyrl","cans","mong","arab"],_=h.split("-");return this.options.lowerCaseLng?_=_.map(h=>h.toLowerCase()):2===_.length?(_[0]=_[0].toLowerCase(),_[1]=_[1].toUpperCase(),d.indexOf(_[1].toLowerCase())>-1&&(_[1]=capitalize(_[1].toLowerCase()))):3===_.length&&(_[0]=_[0].toLowerCase(),2===_[1].length&&(_[1]=_[1].toUpperCase()),"sgn"!==_[0]&&2===_[2].length&&(_[2]=_[2].toUpperCase()),d.indexOf(_[1].toLowerCase())>-1&&(_[1]=capitalize(_[1].toLowerCase())),d.indexOf(_[2].toLowerCase())>-1&&(_[2]=capitalize(_[2].toLowerCase()))),_.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?h.toLowerCase():h}isSupportedCode(h){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(h=this.getLanguagePartFromCode(h)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(h)>-1}getBestMatchFromCodes(h){let d;return h?(h.forEach(h=>{if(d)return;let _=this.formatLanguageCode(h);(!this.options.supportedLngs||this.isSupportedCode(_))&&(d=_)}),!d&&this.options.supportedLngs&&h.forEach(h=>{if(d)return;let _=this.getLanguagePartFromCode(h);if(this.isSupportedCode(_))return d=_;d=this.options.supportedLngs.find(h=>{if(h===_||!(0>h.indexOf("-")&&0>_.indexOf("-"))&&0===h.indexOf(_))return h})}),d||(d=this.getFallbackCodes(this.options.fallbackLng)[0]),d):null}getFallbackCodes(h,d){if(!h)return[];if("function"==typeof h&&(h=h(d)),"string"==typeof h&&(h=[h]),"[object Array]"===Object.prototype.toString.apply(h))return h;if(!d)return h.default||[];let _=h[d];return _||(_=h[this.getScriptPartFromCode(d)]),_||(_=h[this.formatLanguageCode(d)]),_||(_=h[this.getLanguagePartFromCode(d)]),_||(_=h.default),_||[]}toResolveHierarchy(h,d){let _=this.getFallbackCodes(d||this.options.fallbackLng||[],h),V=[],addCode=h=>{h&&(this.isSupportedCode(h)?V.push(h):this.logger.warn(`rejecting language code not found in supportedLngs: ${h}`))};return"string"==typeof h&&(h.indexOf("-")>-1||h.indexOf("_")>-1)?("languageOnly"!==this.options.load&&addCode(this.formatLanguageCode(h)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&addCode(this.getScriptPartFromCode(h)),"currentOnly"!==this.options.load&&addCode(this.getLanguagePartFromCode(h))):"string"==typeof h&&addCode(this.formatLanguageCode(h)),_.forEach(h=>{0>V.indexOf(h)&&addCode(this.formatLanguageCode(h))}),V}};let eC=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],eP={1:function(h){return Number(h>1)},2:function(h){return Number(1!=h)},3:function(h){return 0},4:function(h){return Number(h%10==1&&h%100!=11?0:h%10>=2&&h%10<=4&&(h%100<10||h%100>=20)?1:2)},5:function(h){return Number(0==h?0:1==h?1:2==h?2:h%100>=3&&h%100<=10?3:h%100>=11?4:5)},6:function(h){return Number(1==h?0:h>=2&&h<=4?1:2)},7:function(h){return Number(1==h?0:h%10>=2&&h%10<=4&&(h%100<10||h%100>=20)?1:2)},8:function(h){return Number(1==h?0:2==h?1:8!=h&&11!=h?2:3)},9:function(h){return Number(h>=2)},10:function(h){return Number(1==h?0:2==h?1:h<7?2:h<11?3:4)},11:function(h){return Number(1==h||11==h?0:2==h||12==h?1:h>2&&h<20?2:3)},12:function(h){return Number(h%10!=1||h%100==11)},13:function(h){return Number(0!==h)},14:function(h){return Number(1==h?0:2==h?1:3==h?2:3)},15:function(h){return Number(h%10==1&&h%100!=11?0:h%10>=2&&(h%100<10||h%100>=20)?1:2)},16:function(h){return Number(h%10==1&&h%100!=11?0:0!==h?1:2)},17:function(h){return Number(1==h||h%10==1&&h%100!=11?0:1)},18:function(h){return Number(0==h?0:1==h?1:2)},19:function(h){return Number(1==h?0:0==h||h%100>1&&h%100<11?1:h%100>10&&h%100<20?2:3)},20:function(h){return Number(1==h?0:0==h||h%100>0&&h%100<20?1:2)},21:function(h){return Number(h%100==1?1:h%100==2?2:h%100==3||h%100==4?3:0)},22:function(h){return Number(1==h?0:2==h?1:(h<0||h>10)&&h%10==0?2:3)}},eI=["v1","v2","v3"],eR=["v4"],eA={zero:0,one:1,two:2,few:3,many:4,other:5};let PluralResolver=class PluralResolver{constructor(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=h,this.options=d,this.logger=ew.create("pluralResolver"),(!this.options.compatibilityJSON||eR.includes(this.options.compatibilityJSON))&&("undefined"==typeof Intl||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=function(){let h={};return eC.forEach(d=>{d.lngs.forEach(_=>{h[_]={numbers:d.nr,plurals:eP[d.fc]}})}),h}()}addRule(h,d){this.rules[h]=d}getRule(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi())try{return new Intl.PluralRules(getCleanedCode(h),{type:d.ordinal?"ordinal":"cardinal"})}catch{return}return this.rules[h]||this.rules[this.languageUtils.getLanguagePartFromCode(h)]}needsPlural(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=this.getRule(h,d);return this.shouldUseIntlApi()?_&&_.resolvedOptions().pluralCategories.length>1:_&&_.numbers.length>1}getPluralFormsOfKey(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(h,_).map(h=>`${d}${h}`)}getSuffixes(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=this.getRule(h,d);return _?this.shouldUseIntlApi()?_.resolvedOptions().pluralCategories.sort((h,d)=>eA[h]-eA[d]).map(h=>`${this.options.prepend}${d.ordinal?`ordinal${this.options.prepend}`:""}${h}`):_.numbers.map(_=>this.getSuffix(h,_,d)):[]}getSuffix(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},V=this.getRule(h,_);return V?this.shouldUseIntlApi()?`${this.options.prepend}${_.ordinal?`ordinal${this.options.prepend}`:""}${V.select(d)}`:this.getSuffixRetroCompatible(V,d):(this.logger.warn(`no plural rule found for: ${h}`),"")}getSuffixRetroCompatible(h,d){let _=h.noAbs?h.plurals(d):h.plurals(Math.abs(d)),V=h.numbers[_];this.options.simplifyPluralSuffix&&2===h.numbers.length&&1===h.numbers[0]&&(2===V?V="plural":1===V&&(V=""));let returnSuffix=()=>this.options.prepend&&V.toString()?this.options.prepend+V.toString():V.toString();return"v1"===this.options.compatibilityJSON?1===V?"":"number"==typeof V?`_plural_${V.toString()}`:returnSuffix():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===h.numbers.length&&1===h.numbers[0]?returnSuffix():this.options.prepend&&_.toString()?this.options.prepend+_.toString():_.toString()}shouldUseIntlApi(){return!eI.includes(this.options.compatibilityJSON)}};function deepFindWithDefaults(h,d,_){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",ee=!(arguments.length>4)||void 0===arguments[4]||arguments[4],er=function(h,d,_){let V=getPath(h,_);return void 0!==V?V:getPath(d,_)}(h,d,_);return!er&&ee&&"string"==typeof _&&void 0===(er=deepFind(h,_,V))&&(er=deepFind(d,_,V)),er}let Interpolator=class Interpolator{constructor(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=ew.create("interpolator"),this.options=h,this.format=h.interpolation&&h.interpolation.format||(h=>h),this.init(h)}init(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.interpolation||(h.interpolation={escapeValue:!0});let d=h.interpolation;this.escape=void 0!==d.escape?d.escape:i18next_escape,this.escapeValue=void 0===d.escapeValue||d.escapeValue,this.useRawValueToEscape=void 0!==d.useRawValueToEscape&&d.useRawValueToEscape,this.prefix=d.prefix?regexEscape(d.prefix):d.prefixEscaped||"{{",this.suffix=d.suffix?regexEscape(d.suffix):d.suffixEscaped||"}}",this.formatSeparator=d.formatSeparator?d.formatSeparator:d.formatSeparator||",",this.unescapePrefix=d.unescapeSuffix?"":d.unescapePrefix||"-",this.unescapeSuffix=this.unescapePrefix?"":d.unescapeSuffix||"",this.nestingPrefix=d.nestingPrefix?regexEscape(d.nestingPrefix):d.nestingPrefixEscaped||regexEscape("$t("),this.nestingSuffix=d.nestingSuffix?regexEscape(d.nestingSuffix):d.nestingSuffixEscaped||regexEscape(")"),this.nestingOptionsSeparator=d.nestingOptionsSeparator?d.nestingOptionsSeparator:d.nestingOptionsSeparator||",",this.maxReplaces=d.maxReplaces?d.maxReplaces:1e3,this.alwaysFormat=void 0!==d.alwaysFormat&&d.alwaysFormat,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){let h=`${this.prefix}(.+?)${this.suffix}`;this.regexp=RegExp(h,"g");let d=`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`;this.regexpUnescape=RegExp(d,"g");let _=`${this.nestingPrefix}(.+?)${this.nestingSuffix}`;this.nestingRegexp=RegExp(_,"g")}interpolate(h,d,_,V){let ee,er,eo;let ec=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{};function regexSafe(h){return h.replace(/\$/g,"$$$$")}let handleFormat=h=>{if(0>h.indexOf(this.formatSeparator)){let ee=deepFindWithDefaults(d,ec,h,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(ee,void 0,_,{...V,...d,interpolationkey:h}):ee}let ee=h.split(this.formatSeparator),er=ee.shift().trim(),eo=ee.join(this.formatSeparator).trim();return this.format(deepFindWithDefaults(d,ec,er,this.options.keySeparator,this.options.ignoreJSONStructure),eo,_,{...V,...d,interpolationkey:er})};this.resetRegExp();let eh=V&&V.missingInterpolationHandler||this.options.missingInterpolationHandler,ep=V&&V.interpolation&&void 0!==V.interpolation.skipOnVariables?V.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables,ef=[{regex:this.regexpUnescape,safeValue:h=>regexSafe(h)},{regex:this.regexp,safeValue:h=>this.escapeValue?regexSafe(this.escape(h)):regexSafe(h)}];return ef.forEach(d=>{for(eo=0;ee=d.regex.exec(h);){let _=ee[1].trim();if(void 0===(er=handleFormat(_))){if("function"==typeof eh){let d=eh(h,ee,V);er="string"==typeof d?d:""}else if(V&&Object.prototype.hasOwnProperty.call(V,_))er="";else if(ep){er=ee[0];continue}else this.logger.warn(`missed to pass in variable ${_} for interpolating ${h}`),er=""}else"string"==typeof er||this.useRawValueToEscape||(er=makeString(er));let ec=d.safeValue(er);if(h=h.replace(ee[0],ec),ep?(d.regex.lastIndex+=er.length,d.regex.lastIndex-=ee[0].length):d.regex.lastIndex=0,++eo>=this.maxReplaces)break}}),h}nest(h,d){let _,V,ee,er=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};function handleHasOptions(h,d){let _=this.nestingOptionsSeparator;if(0>h.indexOf(_))return h;let V=h.split(RegExp(`${_}[ ]*{`)),er=`{${V[1]}`;h=V[0],er=this.interpolate(er,ee);let eo=er.match(/'/g),ec=er.match(/"/g);(eo&&eo.length%2==0&&!ec||ec.length%2!=0)&&(er=er.replace(/'/g,'"'));try{ee=JSON.parse(er),d&&(ee={...d,...ee})}catch(d){return this.logger.warn(`failed parsing options string in nesting for key ${h}`,d),`${h}${_}${er}`}return delete ee.defaultValue,h}for(;_=this.nestingRegexp.exec(h);){let eo=[];(ee=(ee={...er}).replace&&"string"!=typeof ee.replace?ee.replace:ee).applyPostProcessor=!1,delete ee.defaultValue;let ec=!1;if(-1!==_[0].indexOf(this.formatSeparator)&&!/{.*}/.test(_[1])){let h=_[1].split(this.formatSeparator).map(h=>h.trim());_[1]=h.shift(),eo=h,ec=!0}if((V=d(handleHasOptions.call(this,_[1].trim(),ee),ee))&&_[0]===h&&"string"!=typeof V)return V;"string"!=typeof V&&(V=makeString(V)),V||(this.logger.warn(`missed to resolve ${_[1]} for nesting ${h}`),V=""),ec&&(V=eo.reduce((h,d)=>this.format(h,d,er.lng,{...er,interpolationkey:_[1].trim()}),V.trim())),h=h.replace(_[0],V),this.regexp.lastIndex=0}return h}};function createCachedFormatter(h){let d={};return function(_,V,ee){let er=V+JSON.stringify(ee),eo=d[er];return eo||(eo=h(V,ee),d[er]=eo),eo(_)}}let Formatter=class Formatter{constructor(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=ew.create("formatter"),this.options=h,this.formats={number:createCachedFormatter((h,d)=>{let _=new Intl.NumberFormat(h,{...d});return h=>_.format(h)}),currency:createCachedFormatter((h,d)=>{let _=new Intl.NumberFormat(h,{...d,style:"currency"});return h=>_.format(h)}),datetime:createCachedFormatter((h,d)=>{let _=new Intl.DateTimeFormat(h,{...d});return h=>_.format(h)}),relativetime:createCachedFormatter((h,d)=>{let _=new Intl.RelativeTimeFormat(h,{...d});return h=>_.format(h,d.range||"day")}),list:createCachedFormatter((h,d)=>{let _=new Intl.ListFormat(h,{...d});return h=>_.format(h)})},this.init(h)}init(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}},_=d.interpolation;this.formatSeparator=_.formatSeparator?_.formatSeparator:_.formatSeparator||","}add(h,d){this.formats[h.toLowerCase().trim()]=d}addCached(h,d){this.formats[h.toLowerCase().trim()]=createCachedFormatter(d)}format(h,d,_){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},ee=d.split(this.formatSeparator),er=ee.reduce((h,d)=>{let{formatName:ee,formatOptions:er}=function(h){let d=h.toLowerCase().trim(),_={};if(h.indexOf("(")>-1){let V=h.split("(");d=V[0].toLowerCase().trim();let ee=V[1].substring(0,V[1].length-1);if("currency"===d&&0>ee.indexOf(":"))_.currency||(_.currency=ee.trim());else if("relativetime"===d&&0>ee.indexOf(":"))_.range||(_.range=ee.trim());else{let h=ee.split(";");h.forEach(h=>{if(!h)return;let[d,...V]=h.split(":"),ee=V.join(":").trim().replace(/^'+|'+$/g,"");_[d.trim()]||(_[d.trim()]=ee),"false"===ee&&(_[d.trim()]=!1),"true"===ee&&(_[d.trim()]=!0),isNaN(ee)||(_[d.trim()]=parseInt(ee,10))})}}return{formatName:d,formatOptions:_}}(d);if(this.formats[ee]){let d=h;try{let eo=V&&V.formatParams&&V.formatParams[V.interpolationkey]||{},ec=eo.locale||eo.lng||V.locale||V.lng||_;d=this.formats[ee](h,ec,{...er,...V,...eo})}catch(h){this.logger.warn(h)}return d}return this.logger.warn(`there was no format function for ${ee}`),h},h);return er}};let Connector=class Connector extends EventEmitter{constructor(h,d,_){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=h,this.store=d,this.services=_,this.languageUtils=_.languageUtils,this.options=V,this.logger=ew.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=V.maxParallelReads||10,this.readingCalls=0,this.maxRetries=V.maxRetries>=0?V.maxRetries:5,this.retryTimeout=V.retryTimeout>=1?V.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(_,V.backend,V)}queueLoad(h,d,_,V){let ee={},er={},eo={},ec={};return h.forEach(h=>{let V=!0;d.forEach(d=>{let eo=`${h}|${d}`;!_.reload&&this.store.hasResourceBundle(h,d)?this.state[eo]=2:this.state[eo]<0||(1===this.state[eo]?void 0===er[eo]&&(er[eo]=!0):(this.state[eo]=1,V=!1,void 0===er[eo]&&(er[eo]=!0),void 0===ee[eo]&&(ee[eo]=!0),void 0===ec[d]&&(ec[d]=!0)))}),V||(eo[h]=!0)}),(Object.keys(ee).length||Object.keys(er).length)&&this.queue.push({pending:er,pendingCount:Object.keys(er).length,loaded:{},errors:[],callback:V}),{toLoad:Object.keys(ee),pending:Object.keys(er),toLoadLanguages:Object.keys(eo),toLoadNamespaces:Object.keys(ec)}}loaded(h,d,_){let V=h.split("|"),ee=V[0],er=V[1];d&&this.emit("failedLoading",ee,er,d),_&&this.store.addResourceBundle(ee,er,_),this.state[h]=d?-1:2;let eo={};this.queue.forEach(_=>{(function(h,d,_,V){let{obj:ee,k:er}=getLastOfPath(h,d,Object);ee[er]=ee[er]||[],V&&(ee[er]=ee[er].concat(_)),V||ee[er].push(_)})(_.loaded,[ee],er),void 0!==_.pending[h]&&(delete _.pending[h],_.pendingCount--),d&&_.errors.push(d),0!==_.pendingCount||_.done||(Object.keys(_.loaded).forEach(h=>{eo[h]||(eo[h]={});let d=_.loaded[h];d.length&&d.forEach(d=>{void 0===eo[h][d]&&(eo[h][d]=!0)})}),_.done=!0,_.errors.length?_.callback(_.errors):_.callback())}),this.emit("loaded",eo),this.queue=this.queue.filter(h=>!h.done)}read(h,d,_){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,ee=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,er=arguments.length>5?arguments[5]:void 0;if(!h.length)return er(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:h,ns:d,fcName:_,tried:V,wait:ee,callback:er});return}this.readingCalls++;let resolver=(eo,ec)=>{if(this.readingCalls--,this.waitingReads.length>0){let h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(eo&&ec&&V<this.maxRetries){setTimeout(()=>{this.read.call(this,h,d,_,V+1,2*ee,er)},ee);return}er(eo,ec)},eo=this.backend[_].bind(this.backend);if(2===eo.length){try{let _=eo(h,d);_&&"function"==typeof _.then?_.then(h=>resolver(null,h)).catch(resolver):resolver(null,_)}catch(h){resolver(h)}return}return eo(h,d,resolver)}prepareLoading(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},V=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),V&&V();"string"==typeof h&&(h=this.languageUtils.toResolveHierarchy(h)),"string"==typeof d&&(d=[d]);let ee=this.queueLoad(h,d,_,V);if(!ee.toLoad.length)return ee.pending.length||V(),null;ee.toLoad.forEach(h=>{this.loadOne(h)})}load(h,d,_){this.prepareLoading(h,d,{},_)}reload(h,d,_){this.prepareLoading(h,d,{reload:!0},_)}loadOne(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",_=h.split("|"),V=_[0],ee=_[1];this.read(V,ee,"read",void 0,void 0,(_,er)=>{_&&this.logger.warn(`${d}loading namespace ${ee} for language ${V} failed`,_),!_&&er&&this.logger.log(`${d}loaded namespace ${ee} for language ${V}`,er),this.loaded(h,_,er)})}saveMissing(h,d,_,V,ee){let er=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},eo=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(d)){this.logger.warn(`did not save key "${_}" as the namespace "${d}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(null!=_&&""!==_){if(this.backend&&this.backend.create){let ec={...er,isUpdate:ee},eh=this.backend.create.bind(this.backend);if(eh.length<6)try{let ee;(ee=5===eh.length?eh(h,d,_,V,ec):eh(h,d,_,V))&&"function"==typeof ee.then?ee.then(h=>eo(null,h)).catch(eo):eo(null,ee)}catch(h){eo(h)}else eh(h,d,_,V,eo,ec)}h&&h[0]&&this.store.addResource(h[0],d,_,V)}}};function get(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(h){let d={};if("object"==typeof h[1]&&(d=h[1]),"string"==typeof h[1]&&(d.defaultValue=h[1]),"string"==typeof h[2]&&(d.tDescription=h[2]),"object"==typeof h[2]||"object"==typeof h[3]){let _=h[3]||h[2];Object.keys(_).forEach(h=>{d[h]=_[h]})}return d},interpolation:{escapeValue:!0,format:(h,d,_,V)=>h,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}}function transformOptions(h){return"string"==typeof h.ns&&(h.ns=[h.ns]),"string"==typeof h.fallbackLng&&(h.fallbackLng=[h.fallbackLng]),"string"==typeof h.fallbackNS&&(h.fallbackNS=[h.fallbackNS]),h.supportedLngs&&0>h.supportedLngs.indexOf("cimode")&&(h.supportedLngs=h.supportedLngs.concat(["cimode"])),h}function noop(){}let I18n=class I18n extends EventEmitter{constructor(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;if(super(),this.options=transformOptions(h),this.services={},this.logger=ew,this.modules={external:[]},!function(h){let d=Object.getOwnPropertyNames(Object.getPrototypeOf(h));d.forEach(d=>{"function"==typeof h[d]&&(h[d]=h[d].bind(h))})}(this),d&&!this.isInitialized&&!h.isClone){if(!this.options.initImmediate)return this.init(h,d),this;setTimeout(()=>{this.init(h,d)},0)}}init(){var h=this;let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_=arguments.length>1?arguments[1]:void 0;"function"==typeof d&&(_=d,d={}),!d.defaultNS&&!1!==d.defaultNS&&d.ns&&("string"==typeof d.ns?d.defaultNS=d.ns:0>d.ns.indexOf("translation")&&(d.defaultNS=d.ns[0]));let V=get();function createClassOnDemand(h){return h?"function"==typeof h?new h:h:null}if(this.options={...V,...this.options,...transformOptions(d)},"v1"!==this.options.compatibilityAPI&&(this.options.interpolation={...V.interpolation,...this.options.interpolation}),void 0!==d.keySeparator&&(this.options.userDefinedKeySeparator=d.keySeparator),void 0!==d.nsSeparator&&(this.options.userDefinedNsSeparator=d.nsSeparator),!this.options.isClone){let d;this.modules.logger?ew.init(createClassOnDemand(this.modules.logger),this.options):ew.init(null,this.options),this.modules.formatter?d=this.modules.formatter:"undefined"!=typeof Intl&&(d=Formatter);let _=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);let ee=this.services;ee.logger=ew,ee.resourceStore=this.store,ee.languageUtils=_,ee.pluralResolver=new PluralResolver(_,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),d&&(!this.options.interpolation.format||this.options.interpolation.format===V.interpolation.format)&&(ee.formatter=createClassOnDemand(d),ee.formatter.init(ee,this.options),this.options.interpolation.format=ee.formatter.format.bind(ee.formatter)),ee.interpolator=new Interpolator(this.options),ee.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},ee.backendConnector=new Connector(createClassOnDemand(this.modules.backend),ee.resourceStore,ee,this.options),ee.backendConnector.on("*",function(d){for(var _=arguments.length,V=Array(_>1?_-1:0),ee=1;ee<_;ee++)V[ee-1]=arguments[ee];h.emit(d,...V)}),this.modules.languageDetector&&(ee.languageDetector=createClassOnDemand(this.modules.languageDetector),ee.languageDetector.init&&ee.languageDetector.init(ee,this.options.detection,this.options)),this.modules.i18nFormat&&(ee.i18nFormat=createClassOnDemand(this.modules.i18nFormat),ee.i18nFormat.init&&ee.i18nFormat.init(this)),this.translator=new Translator(this.services,this.options),this.translator.on("*",function(d){for(var _=arguments.length,V=Array(_>1?_-1:0),ee=1;ee<_;ee++)V[ee-1]=arguments[ee];h.emit(d,...V)}),this.modules.external.forEach(h=>{h.init&&h.init(this)})}if(this.format=this.options.interpolation.format,_||(_=noop),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){let h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.length>0&&"dev"!==h[0]&&(this.options.lng=h[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(d=>{this[d]=function(){return h.store[d](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(d=>{this[d]=function(){return h.store[d](...arguments),h}});let ee=defer(),load=()=>{let finish=(h,d)=>{this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),ee.resolve(d),_(h,d)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return finish(null,this.t.bind(this));this.changeLanguage(this.options.lng,finish)};return this.options.resources||!this.options.initImmediate?load():setTimeout(load,0),ee}loadResources(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:noop,_=d,V="string"==typeof h?h:this.language;if("function"==typeof h&&(_=h),!this.options.resources||this.options.partialBundledLanguages){if(V&&"cimode"===V.toLowerCase())return _();let h=[],append=d=>{if(!d)return;let _=this.services.languageUtils.toResolveHierarchy(d);_.forEach(d=>{0>h.indexOf(d)&&h.push(d)})};if(V)append(V);else{let h=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);h.forEach(h=>append(h))}this.options.preload&&this.options.preload.forEach(h=>append(h)),this.services.backendConnector.load(h,this.options.ns,h=>{h||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),_(h)})}else _(null)}reloadResources(h,d,_){let V=defer();return h||(h=this.languages),d||(d=this.options.ns),_||(_=noop),this.services.backendConnector.reload(h,d,h=>{V.resolve(),_(h)}),V}use(h){if(!h)throw Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!h.type)throw Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===h.type&&(this.modules.backend=h),("logger"===h.type||h.log&&h.warn&&h.error)&&(this.modules.logger=h),"languageDetector"===h.type&&(this.modules.languageDetector=h),"i18nFormat"===h.type&&(this.modules.i18nFormat=h),"postProcessor"===h.type&&eT.addPostProcessor(h),"formatter"===h.type&&(this.modules.formatter=h),"3rdParty"===h.type&&this.modules.external.push(h),this}setResolvedLanguage(h){if(h&&this.languages&&!(["cimode","dev"].indexOf(h)>-1))for(let h=0;h<this.languages.length;h++){let d=this.languages[h];if(!(["cimode","dev"].indexOf(d)>-1)&&this.store.hasLanguageSomeTranslations(d)){this.resolvedLanguage=d;break}}}changeLanguage(h,d){var _=this;this.isLanguageChangingTo=h;let V=defer();this.emit("languageChanging",h);let setLngProps=h=>{this.language=h,this.languages=this.services.languageUtils.toResolveHierarchy(h),this.resolvedLanguage=void 0,this.setResolvedLanguage(h)},done=(h,ee)=>{ee?(setLngProps(ee),this.translator.changeLanguage(ee),this.isLanguageChangingTo=void 0,this.emit("languageChanged",ee),this.logger.log("languageChanged",ee)):this.isLanguageChangingTo=void 0,V.resolve(function(){return _.t(...arguments)}),d&&d(h,function(){return _.t(...arguments)})},setLng=d=>{h||d||!this.services.languageDetector||(d=[]);let _="string"==typeof d?d:this.services.languageUtils.getBestMatchFromCodes(d);_&&(this.language||setLngProps(_),this.translator.language||this.translator.changeLanguage(_),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(_)),this.loadResources(_,h=>{done(h,_)})};return h||!this.services.languageDetector||this.services.languageDetector.async?!h&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(setLng):this.services.languageDetector.detect(setLng):setLng(h):setLng(this.services.languageDetector.detect()),V}getFixedT(h,d,_){var V=this;let fixedT=function(h,d){let ee,er;if("object"!=typeof d){for(var eo=arguments.length,ec=Array(eo>2?eo-2:0),eh=2;eh<eo;eh++)ec[eh-2]=arguments[eh];ee=V.options.overloadTranslationOptionHandler([h,d].concat(ec))}else ee={...d};ee.lng=ee.lng||fixedT.lng,ee.lngs=ee.lngs||fixedT.lngs,ee.ns=ee.ns||fixedT.ns,ee.keyPrefix=ee.keyPrefix||_||fixedT.keyPrefix;let ep=V.options.keySeparator||".";return er=ee.keyPrefix&&Array.isArray(h)?h.map(h=>`${ee.keyPrefix}${ep}${h}`):ee.keyPrefix?`${ee.keyPrefix}${ep}${h}`:h,V.t(er,ee)};return"string"==typeof h?fixedT.lng=h:fixedT.lngs=h,fixedT.ns=d,fixedT.keyPrefix=_,fixedT}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(h){this.options.defaultNS=h}hasLoadedNamespace(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;let _=d.lng||this.resolvedLanguage||this.languages[0],V=!!this.options&&this.options.fallbackLng,ee=this.languages[this.languages.length-1];if("cimode"===_.toLowerCase())return!0;let loadNotPending=(h,d)=>{let _=this.services.backendConnector.state[`${h}|${d}`];return -1===_||2===_};if(d.precheck){let h=d.precheck(this,loadNotPending);if(void 0!==h)return h}return!!(this.hasResourceBundle(_,h)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||loadNotPending(_,h)&&(!V||loadNotPending(ee,h)))}loadNamespaces(h,d){let _=defer();return this.options.ns?("string"==typeof h&&(h=[h]),h.forEach(h=>{0>this.options.ns.indexOf(h)&&this.options.ns.push(h)}),this.loadResources(h=>{_.resolve(),d&&d(h)}),_):(d&&d(),Promise.resolve())}loadLanguages(h,d){let _=defer();"string"==typeof h&&(h=[h]);let V=this.options.preload||[],ee=h.filter(h=>0>V.indexOf(h));return ee.length?(this.options.preload=V.concat(ee),this.loadResources(h=>{_.resolve(),d&&d(h)}),_):(d&&d(),Promise.resolve())}dir(h){if(h||(h=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!h)return"rtl";let d=this.services&&this.services.languageUtils||new LanguageUtil(get());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(d.getLanguagePartFromCode(h))>-1||h.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1?arguments[1]:void 0;return new I18n(h,d)}cloneInstance(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:noop,_=h.forkResourceStore;_&&delete h.forkResourceStore;let V={...this.options,...h,isClone:!0},ee=new I18n(V);return(void 0!==h.debug||void 0!==h.prefix)&&(ee.logger=ee.logger.clone(h)),["store","services","language"].forEach(h=>{ee[h]=this[h]}),ee.services={...this.services},ee.services.utils={hasLoadedNamespace:ee.hasLoadedNamespace.bind(ee)},_&&(ee.store=new ResourceStore(this.store.data,V),ee.services.resourceStore=ee.store),ee.translator=new Translator(ee.services,V),ee.translator.on("*",function(h){for(var d=arguments.length,_=Array(d>1?d-1:0),V=1;V<d;V++)_[V-1]=arguments[V];ee.emit(h,..._)}),ee.init(V,d),ee.translator.options=V,ee.translator.backendConnector.services.utils={hasLoadedNamespace:ee.hasLoadedNamespace.bind(ee)},ee}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}};let e$=I18n.createInstance();e$.createInstance=I18n.createInstance,e$.createInstance,e$.dir,e$.init,e$.loadResources,e$.reloadResources,e$.use,e$.changeLanguage,e$.getFixedT,e$.t,e$.exists,e$.setDefaultNamespace,e$.hasLoadedNamespace,e$.loadNamespaces,e$.loadLanguages;var browser=function(h){void 0===h.ns&&(h.ns=[]);var d,_,V=e$.createInstance(h);return V.isInitialized?d=Promise.resolve(e$.t):(null==h||null===(_=h.use)||void 0===_||_.forEach(function(h){return V.use(h)}),"function"==typeof h.onPreInitI18next&&h.onPreInitI18next(V),d=V.init(h)),{i18n:V,initPromise:d}},eN=ee.createElement;function appWithTranslation_ownKeys(h,d){var _=Object.keys(h);if(Object.getOwnPropertySymbols){var V=Object.getOwnPropertySymbols(h);d&&(V=V.filter(function(d){return Object.getOwnPropertyDescriptor(h,d).enumerable})),_.push.apply(_,V)}return _}function appWithTranslation_objectSpread(h){for(var d=1;d<arguments.length;d++){var _=null!=arguments[d]?arguments[d]:{};d%2?appWithTranslation_ownKeys(Object(_),!0).forEach(function(d){_defineProperty(h,d,_[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(h,Object.getOwnPropertyDescriptors(_)):appWithTranslation_ownKeys(Object(_)).forEach(function(d){Object.defineProperty(h,d,Object.getOwnPropertyDescriptor(_,d))})}return h}var appWithTranslation=function(h){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return eg()(function(_){var V,er,eo=(_.pageProps||{})._nextI18Next,ec=null!==(V=null==eo?void 0:eo.initialLocale)&&void 0!==V?V:null==_?void 0:null===(er=_.router)||void 0===er?void 0:er.locale,eh=null==eo?void 0:eo.ns,ep=(0,ee.useMemo)(function(){if(!eo&&!d)return null;var h,_=null!=d?d:null==eo?void 0:eo.userConfig;if(!_)throw Error("appWithTranslation was called without a next-i18next config");if(!(null!=_&&_.i18n))throw Error("appWithTranslation was called without config.i18n");if(!(null!=_&&null!==(h=_.i18n)&&void 0!==h&&h.defaultLocale))throw Error("config.i18n does not include a defaultLocale property");var V=(eo||{}).initialI18nStore,ee=null!=d&&d.resources?d.resources:V;return ec||(ec=_.i18n.defaultLocale),browser(appWithTranslation_objectSpread(appWithTranslation_objectSpread({},createConfig(appWithTranslation_objectSpread(appWithTranslation_objectSpread({},_),{},{lng:ec}))),{},{lng:ec,ns:eh,resources:ee})).i18n},[eo,ec,d,eh]);return null!==ep?eN(I18nextProvider,{i18n:ep},eN(h,_)):eN(h,_extends({key:ec},_))},h)}},2962:function(h,d,_){"use strict";_.d(d,{PB:function(){return NextSeo},dX:function(){return ArticleJsonLd},lX:function(){return DefaultSeo}});var V=_(7294),ee=_(9008),er=_.n(ee);function _extends(){return(_extends=Object.assign?Object.assign.bind():function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}function _objectWithoutPropertiesLoose(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}var eo=["keyOverride"],ec=["crossOrigin"],eh={templateTitle:"",noindex:!1,nofollow:!1,defaultOpenGraphImageWidth:0,defaultOpenGraphImageHeight:0,defaultOpenGraphVideoWidth:0,defaultOpenGraphVideoHeight:0},buildOpenGraphMediaTags=function(h,d,_){void 0===d&&(d=[]);var ee=void 0===_?{}:_,er=ee.defaultWidth,eo=ee.defaultHeight;return d.reduce(function(d,_,ee){return d.push(V.createElement("meta",{key:"og:"+h+":0"+ee,property:"og:"+h,content:_.url})),_.alt&&d.push(V.createElement("meta",{key:"og:"+h+":alt0"+ee,property:"og:"+h+":alt",content:_.alt})),_.secureUrl&&d.push(V.createElement("meta",{key:"og:"+h+":secure_url0"+ee,property:"og:"+h+":secure_url",content:_.secureUrl.toString()})),_.type&&d.push(V.createElement("meta",{key:"og:"+h+":type0"+ee,property:"og:"+h+":type",content:_.type.toString()})),_.width?d.push(V.createElement("meta",{key:"og:"+h+":width0"+ee,property:"og:"+h+":width",content:_.width.toString()})):er&&d.push(V.createElement("meta",{key:"og:"+h+":width0"+ee,property:"og:"+h+":width",content:er.toString()})),_.height?d.push(V.createElement("meta",{key:"og:"+h+":height"+ee,property:"og:"+h+":height",content:_.height.toString()})):eo&&d.push(V.createElement("meta",{key:"og:"+h+":height"+ee,property:"og:"+h+":height",content:eo.toString()})),d},[])},buildTags=function(h){var d,_,ee,er,ep,ef=[];h.titleTemplate&&(eh.templateTitle=h.titleTemplate);var em="";h.title?(em=h.title,eh.templateTitle&&(em=eh.templateTitle.replace(/%s/g,function(){return em}))):h.defaultTitle&&(em=h.defaultTitle),em&&ef.push(V.createElement("title",{key:"title"},em));var eg=void 0===h.noindex?eh.noindex||h.dangerouslySetAllPagesToNoIndex:h.noindex,eO=void 0===h.nofollow?eh.nofollow||h.dangerouslySetAllPagesToNoFollow:h.nofollow,ey="";if(h.robotsProps){var ev=h.robotsProps,eS=ev.nosnippet,e_=ev.maxSnippet,ew=ev.maxImagePreview,ex=ev.maxVideoPreview,ek=ev.noarchive,eT=ev.noimageindex,eE=ev.notranslate,eC=ev.unavailableAfter;ey=(eS?",nosnippet":"")+(e_?",max-snippet:"+e_:"")+(ew?",max-image-preview:"+ew:"")+(ek?",noarchive":"")+(eC?",unavailable_after:"+eC:"")+(eT?",noimageindex":"")+(ex?",max-video-preview:"+ex:"")+(eE?",notranslate":"")}if(eg||eO?(h.dangerouslySetAllPagesToNoIndex&&(eh.noindex=!0),h.dangerouslySetAllPagesToNoFollow&&(eh.nofollow=!0),ef.push(V.createElement("meta",{key:"robots",name:"robots",content:(eg?"noindex":"index")+","+(eO?"nofollow":"follow")+ey}))):ef.push(V.createElement("meta",{key:"robots",name:"robots",content:"index,follow"+ey})),h.description&&ef.push(V.createElement("meta",{key:"description",name:"description",content:h.description})),h.themeColor&&ef.push(V.createElement("meta",{key:"theme-color",name:"theme-color",content:h.themeColor})),h.mobileAlternate&&ef.push(V.createElement("link",{rel:"alternate",key:"mobileAlternate",media:h.mobileAlternate.media,href:h.mobileAlternate.href})),h.languageAlternates&&h.languageAlternates.length>0&&h.languageAlternates.forEach(function(h){ef.push(V.createElement("link",{rel:"alternate",key:"languageAlternate-"+h.hrefLang,hrefLang:h.hrefLang,href:h.href}))}),h.twitter&&(h.twitter.cardType&&ef.push(V.createElement("meta",{key:"twitter:card",name:"twitter:card",content:h.twitter.cardType})),h.twitter.site&&ef.push(V.createElement("meta",{key:"twitter:site",name:"twitter:site",content:h.twitter.site})),h.twitter.handle&&ef.push(V.createElement("meta",{key:"twitter:creator",name:"twitter:creator",content:h.twitter.handle}))),h.facebook&&h.facebook.appId&&ef.push(V.createElement("meta",{key:"fb:app_id",property:"fb:app_id",content:h.facebook.appId})),(null!=(d=h.openGraph)&&d.title||em)&&ef.push(V.createElement("meta",{key:"og:title",property:"og:title",content:(null==(er=h.openGraph)?void 0:er.title)||em})),(null!=(_=h.openGraph)&&_.description||h.description)&&ef.push(V.createElement("meta",{key:"og:description",property:"og:description",content:(null==(ep=h.openGraph)?void 0:ep.description)||h.description})),h.openGraph){if((h.openGraph.url||h.canonical)&&ef.push(V.createElement("meta",{key:"og:url",property:"og:url",content:h.openGraph.url||h.canonical})),h.openGraph.type){var eP=h.openGraph.type.toLowerCase();ef.push(V.createElement("meta",{key:"og:type",property:"og:type",content:eP})),"profile"===eP&&h.openGraph.profile?(h.openGraph.profile.firstName&&ef.push(V.createElement("meta",{key:"profile:first_name",property:"profile:first_name",content:h.openGraph.profile.firstName})),h.openGraph.profile.lastName&&ef.push(V.createElement("meta",{key:"profile:last_name",property:"profile:last_name",content:h.openGraph.profile.lastName})),h.openGraph.profile.username&&ef.push(V.createElement("meta",{key:"profile:username",property:"profile:username",content:h.openGraph.profile.username})),h.openGraph.profile.gender&&ef.push(V.createElement("meta",{key:"profile:gender",property:"profile:gender",content:h.openGraph.profile.gender}))):"book"===eP&&h.openGraph.book?(h.openGraph.book.authors&&h.openGraph.book.authors.length&&h.openGraph.book.authors.forEach(function(h,d){ef.push(V.createElement("meta",{key:"book:author:0"+d,property:"book:author",content:h}))}),h.openGraph.book.isbn&&ef.push(V.createElement("meta",{key:"book:isbn",property:"book:isbn",content:h.openGraph.book.isbn})),h.openGraph.book.releaseDate&&ef.push(V.createElement("meta",{key:"book:release_date",property:"book:release_date",content:h.openGraph.book.releaseDate})),h.openGraph.book.tags&&h.openGraph.book.tags.length&&h.openGraph.book.tags.forEach(function(h,d){ef.push(V.createElement("meta",{key:"book:tag:0"+d,property:"book:tag",content:h}))})):"article"===eP&&h.openGraph.article?(h.openGraph.article.publishedTime&&ef.push(V.createElement("meta",{key:"article:published_time",property:"article:published_time",content:h.openGraph.article.publishedTime})),h.openGraph.article.modifiedTime&&ef.push(V.createElement("meta",{key:"article:modified_time",property:"article:modified_time",content:h.openGraph.article.modifiedTime})),h.openGraph.article.expirationTime&&ef.push(V.createElement("meta",{key:"article:expiration_time",property:"article:expiration_time",content:h.openGraph.article.expirationTime})),h.openGraph.article.authors&&h.openGraph.article.authors.length&&h.openGraph.article.authors.forEach(function(h,d){ef.push(V.createElement("meta",{key:"article:author:0"+d,property:"article:author",content:h}))}),h.openGraph.article.section&&ef.push(V.createElement("meta",{key:"article:section",property:"article:section",content:h.openGraph.article.section})),h.openGraph.article.tags&&h.openGraph.article.tags.length&&h.openGraph.article.tags.forEach(function(h,d){ef.push(V.createElement("meta",{key:"article:tag:0"+d,property:"article:tag",content:h}))})):("video.movie"===eP||"video.episode"===eP||"video.tv_show"===eP||"video.other"===eP)&&h.openGraph.video&&(h.openGraph.video.actors&&h.openGraph.video.actors.length&&h.openGraph.video.actors.forEach(function(h,d){h.profile&&ef.push(V.createElement("meta",{key:"video:actor:0"+d,property:"video:actor",content:h.profile})),h.role&&ef.push(V.createElement("meta",{key:"video:actor:role:0"+d,property:"video:actor:role",content:h.role}))}),h.openGraph.video.directors&&h.openGraph.video.directors.length&&h.openGraph.video.directors.forEach(function(h,d){ef.push(V.createElement("meta",{key:"video:director:0"+d,property:"video:director",content:h}))}),h.openGraph.video.writers&&h.openGraph.video.writers.length&&h.openGraph.video.writers.forEach(function(h,d){ef.push(V.createElement("meta",{key:"video:writer:0"+d,property:"video:writer",content:h}))}),h.openGraph.video.duration&&ef.push(V.createElement("meta",{key:"video:duration",property:"video:duration",content:h.openGraph.video.duration.toString()})),h.openGraph.video.releaseDate&&ef.push(V.createElement("meta",{key:"video:release_date",property:"video:release_date",content:h.openGraph.video.releaseDate})),h.openGraph.video.tags&&h.openGraph.video.tags.length&&h.openGraph.video.tags.forEach(function(h,d){ef.push(V.createElement("meta",{key:"video:tag:0"+d,property:"video:tag",content:h}))}),h.openGraph.video.series&&ef.push(V.createElement("meta",{key:"video:series",property:"video:series",content:h.openGraph.video.series})))}h.defaultOpenGraphImageWidth&&(eh.defaultOpenGraphImageWidth=h.defaultOpenGraphImageWidth),h.defaultOpenGraphImageHeight&&(eh.defaultOpenGraphImageHeight=h.defaultOpenGraphImageHeight),h.openGraph.images&&h.openGraph.images.length&&ef.push.apply(ef,buildOpenGraphMediaTags("image",h.openGraph.images,{defaultWidth:eh.defaultOpenGraphImageWidth,defaultHeight:eh.defaultOpenGraphImageHeight})),h.defaultOpenGraphVideoWidth&&(eh.defaultOpenGraphVideoWidth=h.defaultOpenGraphVideoWidth),h.defaultOpenGraphVideoHeight&&(eh.defaultOpenGraphVideoHeight=h.defaultOpenGraphVideoHeight),h.openGraph.videos&&h.openGraph.videos.length&&ef.push.apply(ef,buildOpenGraphMediaTags("video",h.openGraph.videos,{defaultWidth:eh.defaultOpenGraphVideoWidth,defaultHeight:eh.defaultOpenGraphVideoHeight})),h.openGraph.audio&&ef.push.apply(ef,buildOpenGraphMediaTags("audio",h.openGraph.audio)),h.openGraph.locale&&ef.push(V.createElement("meta",{key:"og:locale",property:"og:locale",content:h.openGraph.locale})),(h.openGraph.siteName||h.openGraph.site_name)&&ef.push(V.createElement("meta",{key:"og:site_name",property:"og:site_name",content:h.openGraph.siteName||h.openGraph.site_name}))}return h.canonical&&ef.push(V.createElement("link",{rel:"canonical",href:h.canonical,key:"canonical"})),h.additionalMetaTags&&h.additionalMetaTags.length>0&&h.additionalMetaTags.forEach(function(h){var d,_,ee=h.keyOverride,er=_objectWithoutPropertiesLoose(h,eo);ef.push(V.createElement("meta",_extends({key:"meta:"+(null!=(d=null!=(_=null!=ee?ee:er.name)?_:er.property)?d:er.httpEquiv)},er)))}),null!=(ee=h.additionalLinkTags)&&ee.length&&h.additionalLinkTags.forEach(function(h){var d,_=h.crossOrigin,ee=_objectWithoutPropertiesLoose(h,ec);ef.push(V.createElement("link",_extends({key:"link"+(null!=(d=ee.keyOverride)?d:ee.href)+ee.rel},ee,{crossOrigin:"anonymous"===_||"use-credentials"===_||""===_?_:void 0})))}),ef},WithHead=function(h){return V.createElement(er(),null,buildTags(h))},DefaultSeo=function(h){var d=h.title,_=h.titleTemplate,ee=h.defaultTitle,er=h.themeColor,eo=h.dangerouslySetAllPagesToNoIndex,ec=h.dangerouslySetAllPagesToNoFollow,eh=h.description,ep=h.canonical,ef=h.facebook,em=h.openGraph,eg=h.additionalMetaTags,eO=h.twitter,ey=h.defaultOpenGraphImageWidth,ev=h.defaultOpenGraphImageHeight,eS=h.defaultOpenGraphVideoWidth,e_=h.defaultOpenGraphVideoHeight,ew=h.mobileAlternate,ex=h.languageAlternates,ek=h.additionalLinkTags,eT=h.robotsProps;return V.createElement(WithHead,{title:d,titleTemplate:_,defaultTitle:ee,themeColor:er,dangerouslySetAllPagesToNoIndex:void 0!==eo&&eo,dangerouslySetAllPagesToNoFollow:void 0!==ec&&ec,description:eh,canonical:ep,facebook:ef,openGraph:em,additionalMetaTags:eg,twitter:eO,defaultOpenGraphImageWidth:ey,defaultOpenGraphImageHeight:ev,defaultOpenGraphVideoWidth:eS,defaultOpenGraphVideoHeight:e_,mobileAlternate:ew,languageAlternates:ex,additionalLinkTags:ek,robotsProps:eT})},NextSeo=function(h){var d=h.title,_=h.themeColor,ee=h.noindex,er=h.nofollow,eo=h.robotsProps,ec=h.description,eh=h.canonical,ep=h.openGraph,ef=h.facebook,em=h.twitter,eg=h.additionalMetaTags,eO=h.titleTemplate,ey=h.defaultTitle,ev=h.mobileAlternate,eS=h.languageAlternates,e_=h.additionalLinkTags;return V.createElement(V.Fragment,null,V.createElement(WithHead,{title:d,themeColor:_,noindex:ee,nofollow:er,robotsProps:eo,description:ec,canonical:eh,facebook:ef,openGraph:ep,additionalMetaTags:eg,twitter:em,titleTemplate:eO,defaultTitle:ey,mobileAlternate:ev,languageAlternates:eS,additionalLinkTags:e_}))},toJson=function(h,d){var _=d;return Array.isArray(_)&&1===_.length&&(_=_extends({},d[0])),{__html:JSON.stringify(Array.isArray(_)?_.map(function(d){return formatObjectForSchema(h,d)}):formatObjectForSchema(h,_),safeJsonLdReplacer)}},formatObjectForSchema=function(h,d){var _=d.id,V=_extends({},(void 0===_?void 0:_)?{"@id":d.id}:{},d);return delete V.id,_extends({"@context":"https://schema.org","@type":h},V)},ep=Object.freeze({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&apos;"}),ef=RegExp("["+Object.keys(ep).join("")+"]","g"),ESCAPE_REPLACER=function(h){return ep[h]},safeJsonLdReplacer=function(h,d){switch(typeof d){case"object":if(null===d)return;return d;case"number":case"boolean":case"bigint":return d;case"string":return d.replace(ef,ESCAPE_REPLACER);default:return}},em=["type","keyOverride","scriptKey","scriptId","dataArray","useAppDir"];function JsonLd(h){var d=h.type,_=void 0===d?"Thing":d,ee=h.keyOverride,eo=h.scriptKey,ec=h.scriptId,eh=void 0===ec?void 0:ec,ep=h.dataArray,ef=h.useAppDir,eg=_objectWithoutPropertiesLoose(h,em),JsonLdScript=function(){return V.createElement("script",{type:"application/ld+json",id:eh,"data-testid":eh,dangerouslySetInnerHTML:toJson(_,void 0===ep?_extends({},eg):ep),key:"jsonld-"+eo+(ee?"-"+ee:"")})};return void 0!==ef&&ef?V.createElement(JsonLdScript,null):V.createElement(er(),null,JsonLdScript())}function generateAuthorInfo(h){if("string"==typeof h)return{"@type":"Person",name:h};if(h.name){var d;return{"@type":null!=(d=null==h?void 0:h.type)?d:"Person",name:h.name,url:null==h?void 0:h.url}}}var eg=["type","keyOverride","url","title","images","datePublished","dateModified","authorName","publisherName","publisherLogo","description","isAccessibleForFree"];function ArticleJsonLd(h){var d=h.type,_=h.keyOverride,ee=h.url,er=h.title,eo=h.images,ec=h.datePublished,eh=h.dateModified,ep=h.authorName,ef=h.publisherName,em=h.publisherLogo,eO=h.description,ey=h.isAccessibleForFree,ev=_objectWithoutPropertiesLoose(h,eg),eS=_extends({datePublished:ec,description:eO,mainEntityOfPage:{"@type":"WebPage","@id":ee},headline:er,image:eo,dateModified:eh||ec,author:Array.isArray(ep)?ep.map(function(h){return generateAuthorInfo(h)}).filter(function(h){return!!h}):ep?generateAuthorInfo(ep):void 0,publisher:function(h,d){if(h)return{"@type":"Organization",name:h,logo:function(h){if(h)return{"@type":"ImageObject",url:h}}(d)}}(void 0===ef?void 0:ef,void 0===em?void 0:em),isAccessibleForFree:ey},ev);return V.createElement(JsonLd,_extends({type:void 0===d?"Article":d,keyOverride:_},eS,{scriptKey:"article"}))}},2010:function(h,d,_){"use strict";_.d(d,{F:function(){return y},f:function(){return $}});var V=_(7294);let ee=["light","dark"],er="(prefers-color-scheme: dark)",eo="undefined"==typeof window,ec=(0,V.createContext)(void 0),eh={setTheme:h=>{},themes:[]},y=()=>{var h;return null!==(h=(0,V.useContext)(ec))&&void 0!==h?h:eh},$=h=>(0,V.useContext)(ec)?V.createElement(V.Fragment,null,h.children):V.createElement(f,h),ep=["light","dark"],f=({forcedTheme:h,disableTransitionOnChange:d=!1,enableSystem:_=!0,enableColorScheme:eo=!0,storageKey:eh="theme",themes:em=ep,defaultTheme:eg=_?"system":"light",attribute:eO="data-theme",value:ey,children:ev,nonce:eS})=>{let[e_,ew]=(0,V.useState)(()=>S(eh,eg)),[ex,ek]=(0,V.useState)(()=>S(eh)),eT=ey?Object.values(ey):em,eE=(0,V.useCallback)(h=>{let V=h;if(!V)return;"system"===h&&_&&(V=p());let er=ey?ey[V]:V,ec=d?b():null,eh=document.documentElement;if("class"===eO?(eh.classList.remove(...eT),er&&eh.classList.add(er)):er?eh.setAttribute(eO,er):eh.removeAttribute(eO),eo){let h=ee.includes(eg)?eg:null,d=ee.includes(V)?V:h;eh.style.colorScheme=d}null==ec||ec()},[]),eC=(0,V.useCallback)(h=>{ew(h);try{localStorage.setItem(eh,h)}catch(h){}},[h]),eP=(0,V.useCallback)(d=>{let V=p(d);ek(V),"system"===e_&&_&&!h&&eE("system")},[e_,h]);(0,V.useEffect)(()=>{let h=window.matchMedia(er);return h.addListener(eP),eP(h),()=>h.removeListener(eP)},[eP]),(0,V.useEffect)(()=>{let e=h=>{h.key===eh&&eC(h.newValue||eg)};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[eC]),(0,V.useEffect)(()=>{eE(null!=h?h:e_)},[h,e_]);let eI=(0,V.useMemo)(()=>({theme:e_,setTheme:eC,forcedTheme:h,resolvedTheme:"system"===e_?ex:e_,themes:_?[...em,"system"]:em,systemTheme:_?ex:void 0}),[e_,eC,h,ex,_,em]);return V.createElement(ec.Provider,{value:eI},V.createElement(ef,{forcedTheme:h,disableTransitionOnChange:d,enableSystem:_,enableColorScheme:eo,storageKey:eh,themes:em,defaultTheme:eg,attribute:eO,value:ey,children:ev,attrs:eT,nonce:eS}),ev)},ef=(0,V.memo)(({forcedTheme:h,storageKey:d,attribute:_,enableSystem:eo,enableColorScheme:ec,defaultTheme:eh,value:ep,attrs:ef,nonce:em})=>{let eg="system"===eh,eO="class"===_?`var d=document.documentElement,c=d.classList;c.remove(${ef.map(h=>`'${h}'`).join(",")});`:`var d=document.documentElement,n='${_}',s='setAttribute';`,ey=ec?ee.includes(eh)&&eh?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${eh}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",$=(h,d=!1,V=!0)=>{let er=ep?ep[h]:h,eo=d?h+"|| ''":`'${er}'`,eh="";return ec&&V&&!d&&ee.includes(h)&&(eh+=`d.style.colorScheme = '${h}';`),"class"===_?eh+=d||er?`c.add(${eo})`:"null":er&&(eh+=`d[s](n,${eo})`),eh},ev=h?`!function(){${eO}${$(h)}}()`:eo?`!function(){try{${eO}var e=localStorage.getItem('${d}');if('system'===e||(!e&&${eg})){var t='${er}',m=window.matchMedia(t);if(m.media!==t||m.matches){${$("dark")}}else{${$("light")}}}else if(e){${ep?`var x=${JSON.stringify(ep)};`:""}${$(ep?"x[e]":"e",!0)}}${eg?"":"else{"+$(eh,!1,!1)+"}"}${ey}}catch(e){}}()`:`!function(){try{${eO}var e=localStorage.getItem('${d}');if(e){${ep?`var x=${JSON.stringify(ep)};`:""}${$(ep?"x[e]":"e",!0)}}else{${$(eh,!1,!1)};}${ey}}catch(t){}}();`;return V.createElement("script",{nonce:em,dangerouslySetInnerHTML:{__html:ev}})},()=>!0),S=(h,d)=>{let _;if(!eo){try{_=localStorage.getItem(h)||void 0}catch(h){}return _||d}},b=()=>{let h=document.createElement("style");return h.appendChild(document.createTextNode("*{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}")),document.head.appendChild(h),()=>{window.getComputedStyle(document.body),setTimeout(()=>{document.head.removeChild(h)},1)}},p=h=>(h||(h=window.matchMedia(er)),h.matches?"dark":"light")},3454:function(h,d,_){"use strict";var V,ee;h.exports=(null==(V=_.g.process)?void 0:V.env)&&"object"==typeof(null==(ee=_.g.process)?void 0:ee.env)?_.g.process:_(7663)},6840:function(h,d,_){(window.__NEXT_P=window.__NEXT_P||[]).push(["/_app",function(){return _(4807)}])},1175:function(h){"use strict";h.exports={debug:!1,i18n:{defaultLocale:"pt",locales:["en","pt"]},reloadOnPrerender:!1}},1861:function(h,d,_){"use strict";let V,ee,er,eo,ec,eh,ep,ef,em,eg,eO,ey,ev,eS,e_,ew,ex,ek,eT,eE;function _optionalChain(h){let d;let _=h[0],V=1;for(;V<h.length;){let ee=h[V],er=h[V+1];if(V+=2,("optionalAccess"===ee||"optionalCall"===ee)&&null==_)return;"access"===ee||"optionalAccess"===ee?(d=_,_=er(_)):("call"===ee||"optionalCall"===ee)&&(_=er(function(){for(var h=arguments.length,V=Array(h),ee=0;ee<h;ee++)V[ee]=arguments[ee];return _.call(d,...V)}),d=void 0)}return _}function isGlobalObj(h){return h&&h.Math==Math?h:void 0}let eC="object"==typeof globalThis&&isGlobalObj(globalThis)||isGlobalObj(window)||"object"==typeof self&&isGlobalObj(self)||"object"==typeof _.g&&isGlobalObj(_.g)||function(){return this}()||{};function getGlobalSingleton(h,d,_){let V=_||eC,ee=V.__SENTRY__=V.__SENTRY__||{},er=ee[h]||(ee[h]=d());return er}let eP="production",eI=Object.prototype.toString;function isError(h){switch(eI.call(h)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return isInstanceOf(h,Error)}}function isBuiltin(h,d){return eI.call(h)==="[object ".concat(d,"]")}function isErrorEvent(h){return isBuiltin(h,"ErrorEvent")}function isDOMError(h){return isBuiltin(h,"DOMError")}function isString(h){return isBuiltin(h,"String")}function isParameterizedString(h){return"object"==typeof h&&null!==h&&"__sentry_template_string__"in h&&"__sentry_template_values__"in h}function is_isPrimitive(h){return null===h||isParameterizedString(h)||"object"!=typeof h&&"function"!=typeof h}function isPlainObject(h){return isBuiltin(h,"Object")}function isEvent(h){return"undefined"!=typeof Event&&isInstanceOf(h,Event)}function is_isThenable(h){return!!(h&&h.then&&"function"==typeof h.then)}function is_isNaN(h){return"number"==typeof h&&h!=h}function isInstanceOf(h,d){try{return h instanceof d}catch(h){return!1}}function isVueViewModel(h){return!!("object"==typeof h&&null!==h&&(h.__isVue||h._isVue))}function htmlTreeAsString(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!h)return"<unknown>";try{let _,V=h,ee=[],er=0,eo=0,ec=Array.isArray(d)?d:d.keyAttrs,eh=!Array.isArray(d)&&d.maxStringLength||80;for(;V&&er++<5&&(_=function(h,d){let _,V,ee,er,eo;let ec=[];if(!h||!h.tagName)return"";if(eC.HTMLElement&&h instanceof HTMLElement&&h.dataset&&h.dataset.sentryComponent)return h.dataset.sentryComponent;ec.push(h.tagName.toLowerCase());let eh=d&&d.length?d.filter(d=>h.getAttribute(d)).map(d=>[d,h.getAttribute(d)]):null;if(eh&&eh.length)eh.forEach(h=>{ec.push("[".concat(h[0],'="').concat(h[1],'"]'))});else if(h.id&&ec.push("#".concat(h.id)),(_=h.className)&&isString(_))for(eo=0,V=_.split(/\s+/);eo<V.length;eo++)ec.push(".".concat(V[eo]));let ep=["aria-label","type","name","title","alt"];for(eo=0;eo<ep.length;eo++)ee=ep[eo],(er=h.getAttribute(ee))&&ec.push("[".concat(ee,'="').concat(er,'"]'));return ec.join("")}(V,ec),"html"!==_&&(!(er>1)||!(eo+3*ee.length+_.length>=eh)));)ee.push(_),eo+=_.length,V=V.parentNode;return ee.reverse().join(" > ")}catch(h){return"<unknown>"}}function getComponentName(h){if(!eC.HTMLElement)return null;let d=h;for(let h=0;h<5&&d;h++){if(d instanceof HTMLElement&&d.dataset.sentryComponent)return d.dataset.sentryComponent;d=d.parentNode}return null}let eR=["debug","info","warn","error","log","assert","trace"],eA={};function consoleSandbox(h){if(!("console"in eC))return h();let d=eC.console,_={},V=Object.keys(eA);V.forEach(h=>{let V=eA[h];_[h]=d[h],d[h]=V});try{return h()}finally{V.forEach(h=>{d[h]=_[h]})}}let e$=function(){let h=!1,d={enable:()=>{h=!0},disable:()=>{h=!1},isEnabled:()=>h};return eR.forEach(h=>{d[h]=()=>void 0}),d}();function truncate(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"string"!=typeof h||0===d?h:h.length<=d?h:"".concat(h.slice(0,d),"...")}function safeJoin(h,d){if(!Array.isArray(h))return"";let _=[];for(let d=0;d<h.length;d++){let V=h[d];try{isVueViewModel(V)?_.push("[VueViewModel]"):_.push(String(V))}catch(h){_.push("[value cannot be serialized]")}}return _.join(d)}function stringMatchesSomePattern(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],_=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return d.some(d=>(function(h,d){let _=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return!!isString(h)&&(isBuiltin(d,"RegExp")?d.test(h):!!isString(d)&&(_?h===d:h.includes(d)))})(h,d,_))}function fill(h,d,_){if(!(d in h))return;let V=h[d],ee=_(V);"function"==typeof ee&&markFunctionWrapped(ee,V),h[d]=ee}function addNonEnumerableProperty(h,d,_){try{Object.defineProperty(h,d,{value:_,writable:!0,configurable:!0})}catch(h){}}function markFunctionWrapped(h,d){try{let _=d.prototype||{};h.prototype=d.prototype=_,addNonEnumerableProperty(h,"__sentry_original__",d)}catch(h){}}function getOriginalFunction(h){return h.__sentry_original__}function convertToPlainObject(h){if(isError(h))return{message:h.message,name:h.name,stack:h.stack,...getOwnProperties(h)};if(!isEvent(h))return h;{let d={type:h.type,target:serializeEventTarget(h.target),currentTarget:serializeEventTarget(h.currentTarget),...getOwnProperties(h)};return"undefined"!=typeof CustomEvent&&isInstanceOf(h,CustomEvent)&&(d.detail=h.detail),d}}function serializeEventTarget(h){try{return"undefined"!=typeof Element&&isInstanceOf(h,Element)?htmlTreeAsString(h):Object.prototype.toString.call(h)}catch(h){return"<unknown>"}}function getOwnProperties(h){if("object"!=typeof h||null===h)return{};{let d={};for(let _ in h)Object.prototype.hasOwnProperty.call(h,_)&&(d[_]=h[_]);return d}}function object_dropUndefinedKeys(h){let d=new Map;return function _dropUndefinedKeys(h,d){if(function(h){if(!isPlainObject(h))return!1;try{let d=Object.getPrototypeOf(h).constructor.name;return!d||"Object"===d}catch(h){return!0}}(h)){let _=d.get(h);if(void 0!==_)return _;let V={};for(let _ of(d.set(h,V),Object.keys(h)))void 0!==h[_]&&(V[_]=_dropUndefinedKeys(h[_],d));return V}if(Array.isArray(h)){let _=d.get(h);if(void 0!==_)return _;let V=[];return d.set(h,V),h.forEach(h=>{V.push(_dropUndefinedKeys(h,d))}),V}return h}(h,d)}function misc_uuid4(){let h=eC.crypto||eC.msCrypto,getRandomByte=()=>16*Math.random();try{if(h&&h.randomUUID)return h.randomUUID().replace(/-/g,"");h&&h.getRandomValues&&(getRandomByte=()=>{let d=new Uint8Array(1);return h.getRandomValues(d),d[0]})}catch(h){}return"10000000100040008000100000000000".replace(/[018]/g,h=>(h^(15&getRandomByte())>>h/4).toString(16))}function getFirstException(h){return h.exception&&h.exception.values?h.exception.values[0]:void 0}function addExceptionTypeValue(h,d,_){let V=h.exception=h.exception||{},ee=V.values=V.values||[],er=ee[0]=ee[0]||{};er.value||(er.value=d||""),er.type||(er.type=_||"Error")}function addExceptionMechanism(h,d){let _=getFirstException(h);if(!_)return;let V=_.mechanism;if(_.mechanism={type:"generic",handled:!0,...V,...d},d&&"data"in d){let h={...V&&V.data,...d.data};_.mechanism.data=h}}function checkOrSetAlreadyCaught(h){if(h&&h.__sentry_captured__)return!0;try{addNonEnumerableProperty(h,"__sentry_captured__",!0)}catch(h){}return!1}function arrayify(h){return Array.isArray(h)?h:[h]}function dateTimestampInSeconds(){return Date.now()/1e3}let eN=function(){let{performance:h}=eC;if(!h||!h.now)return dateTimestampInSeconds;let d=Date.now()-h.now(),_=void 0==h.timeOrigin?d:h.timeOrigin;return()=>(_+h.now())/1e3}(),eM=(()=>{let{performance:h}=eC;if(!h||!h.now)return;let d=h.now(),_=Date.now(),V=h.timeOrigin?Math.abs(h.timeOrigin+d-_):36e5,ee=h.timing&&h.timing.navigationStart,er="number"==typeof ee?Math.abs(ee+d-_):36e5;return V<36e5||er<36e5?V<=er?h.timeOrigin:ee:_})();function resolvedSyncPromise(h){return new SyncPromise(d=>{d(h)})}function rejectedSyncPromise(h){return new SyncPromise((d,_)=>{_(h)})}(ta=tc||(tc={}))[ta.PENDING=0]="PENDING",ta[ta.RESOLVED=1]="RESOLVED",ta[ta.REJECTED=2]="REJECTED";let SyncPromise=class SyncPromise{then(h,d){return new SyncPromise((_,V)=>{this._handlers.push([!1,d=>{if(h)try{_(h(d))}catch(h){V(h)}else _(d)},h=>{if(d)try{_(d(h))}catch(h){V(h)}else V(h)}]),this._executeHandlers()})}catch(h){return this.then(h=>h,h)}finally(h){return new SyncPromise((d,_)=>{let V,ee;return this.then(d=>{ee=!1,V=d,h&&h()},d=>{ee=!0,V=d,h&&h()}).then(()=>{if(ee){_(V);return}d(V)})})}__init(){this._resolve=h=>{this._setResult(tc.RESOLVED,h)}}__init2(){this._reject=h=>{this._setResult(tc.REJECTED,h)}}__init3(){this._setResult=(h,d)=>{if(this._state===tc.PENDING){if(is_isThenable(d)){d.then(this._resolve,this._reject);return}this._state=h,this._value=d,this._executeHandlers()}}}__init4(){this._executeHandlers=()=>{if(this._state===tc.PENDING)return;let h=this._handlers.slice();this._handlers=[],h.forEach(h=>{h[0]||(this._state===tc.RESOLVED&&h[1](this._value),this._state===tc.REJECTED&&h[2](this._value),h[0]=!0)})}}constructor(h){SyncPromise.prototype.__init.call(this),SyncPromise.prototype.__init2.call(this),SyncPromise.prototype.__init3.call(this),SyncPromise.prototype.__init4.call(this),this._state=tc.PENDING,this._handlers=[];try{h(this._resolve,this._reject)}catch(h){this._reject(h)}}};function getGlobalEventProcessors(){return getGlobalSingleton("globalEventProcessors",()=>[])}function addGlobalEventProcessor(h){getGlobalEventProcessors().push(h)}function notifyEventProcessors(h,d,_){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return new SyncPromise((ee,er)=>{let eo=h[V];if(null===d||"function"!=typeof eo)ee(d);else{let ec=eo({...d},_);is_isThenable(ec)?ec.then(d=>notifyEventProcessors(h,d,_,V+1).then(ee)).then(null,er):notifyEventProcessors(h,ec,_,V+1).then(ee).then(null,er)}})}function makeSession(h){let d=eN(),_={sid:misc_uuid4(),init:!0,timestamp:d,started:d,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>object_dropUndefinedKeys({sid:"".concat(_.sid),init:_.init,started:new Date(1e3*_.started).toISOString(),timestamp:new Date(1e3*_.timestamp).toISOString(),status:_.status,errors:_.errors,did:"number"==typeof _.did||"string"==typeof _.did?"".concat(_.did):void 0,duration:_.duration,abnormal_mechanism:_.abnormal_mechanism,attrs:{release:_.release,environment:_.environment,ip_address:_.ipAddress,user_agent:_.userAgent}})};return h&&updateSession(_,h),_}function updateSession(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!d.user||(!h.ipAddress&&d.user.ip_address&&(h.ipAddress=d.user.ip_address),h.did||d.did||(h.did=d.user.id||d.user.email||d.user.username)),h.timestamp=d.timestamp||eN(),d.abnormal_mechanism&&(h.abnormal_mechanism=d.abnormal_mechanism),d.ignoreDuration&&(h.ignoreDuration=d.ignoreDuration),d.sid&&(h.sid=32===d.sid.length?d.sid:misc_uuid4()),void 0!==d.init&&(h.init=d.init),!h.did&&d.did&&(h.did="".concat(d.did)),"number"==typeof d.started&&(h.started=d.started),h.ignoreDuration)h.duration=void 0;else if("number"==typeof d.duration)h.duration=d.duration;else{let d=h.timestamp-h.started;h.duration=d>=0?d:0}d.release&&(h.release=d.release),d.environment&&(h.environment=d.environment),!h.ipAddress&&d.ipAddress&&(h.ipAddress=d.ipAddress),!h.userAgent&&d.userAgent&&(h.userAgent=d.userAgent),"number"==typeof d.errors&&(h.errors=d.errors),d.status&&(h.status=d.status)}function closeSession(h,d){let _={};d?_={status:d}:"ok"===h.status&&(_={status:"exited"}),updateSession(h,_)}function getRootSpan(h){return h.transaction}let eQ="baggage",eD="sentry-",ej=/^sentry-/;function dynamicSamplingContextToSentryBaggageHeader(h){if(!h)return;let d=Object.entries(h).reduce((h,d)=>{let[_,V]=d;return V&&(h["".concat(eD).concat(_)]=V),h},{});return function(h){if(0!==Object.keys(h).length)return Object.entries(h).reduce((h,d,_)=>{let[V,ee]=d,er="".concat(encodeURIComponent(V),"=").concat(encodeURIComponent(ee)),eo=0===_?er:"".concat(h,",").concat(er);return eo.length>8192?h:eo},"")}(d)}function baggageHeaderToObject(h){return h.split(",").map(h=>h.split("=").map(h=>decodeURIComponent(h.trim()))).reduce((h,d)=>{let[_,V]=d;return h[_]=V,h},{})}let eL=RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function tracing_tracingContextFromHeaders(h,d){let _=function(h){let d;if(!h)return;let _=h.match(eL);if(_)return"1"===_[3]?d=!0:"0"===_[3]&&(d=!1),{traceId:_[1],parentSampled:d,parentSpanId:_[2]}}(h),V=function(h){if(!isString(h)&&!Array.isArray(h))return;let d={};if(Array.isArray(h))d=h.reduce((h,d)=>{let _=baggageHeaderToObject(d);for(let d of Object.keys(_))h[d]=_[d];return h},{});else{if(!h)return;d=baggageHeaderToObject(h)}let _=Object.entries(d).reduce((h,d)=>{let[_,V]=d;if(_.match(ej)){let d=_.slice(eD.length);h[d]=V}return h},{});return Object.keys(_).length>0?_:void 0}(d),{traceId:ee,parentSpanId:er,parentSampled:eo}=_||{},ec={traceId:ee||misc_uuid4(),spanId:misc_uuid4().substring(16),sampled:eo};return er&&(ec.parentSpanId=er),V&&(ec.dsc=V),{traceparentData:_,dynamicSamplingContext:V,propagationContext:ec}}function generateSentryTraceHeader(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:misc_uuid4(),d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:misc_uuid4().substring(16),_=arguments.length>2?arguments[2]:void 0,V="";return void 0!==_&&(V=_?"-1":"-0"),"".concat(h,"-").concat(d).concat(V)}function spanToTraceContext(h){let{spanId:d,traceId:_}=h.spanContext(),{data:V,op:ee,parent_span_id:er,status:eo,tags:ec,origin:eh}=spanUtils_spanToJSON(h);return object_dropUndefinedKeys({data:V,op:ee,parent_span_id:er,span_id:d,status:eo,tags:ec,trace_id:_,origin:eh})}function spanToTraceHeader(h){let{traceId:d,spanId:_}=h.spanContext(),V=spanIsSampled(h);return generateSentryTraceHeader(d,_,V)}function spanUtils_spanTimeInputToSeconds(h){return"number"==typeof h?ensureTimestampInSeconds(h):Array.isArray(h)?h[0]+h[1]/1e9:h instanceof Date?ensureTimestampInSeconds(h.getTime()):eN()}function ensureTimestampInSeconds(h){return h>9999999999?h/1e3:h}function spanUtils_spanToJSON(h){return"function"==typeof h.getSpanJSON?h.getSpanJSON():"function"==typeof h.toJSON?h.toJSON():{}}function spanIsSampled(h){let{traceFlags:d}=h.spanContext();return!!(1&d)}function getDynamicSamplingContextFromClient(h,d,_){let V=d.getOptions(),{publicKey:ee}=d.getDsn()||{},{segment:er}=_&&_.getUser()||{},eo=object_dropUndefinedKeys({environment:V.environment||eP,release:V.release,user_segment:er,public_key:ee,trace_id:h});return d.emit&&d.emit("createDsc",eo),eo}function getDynamicSamplingContextFromSpan(h){let d=exports_getClient();if(!d)return{};let _=getDynamicSamplingContextFromClient(spanUtils_spanToJSON(h).trace_id||"",d,exports_getCurrentScope()),V=getRootSpan(h);if(!V)return _;let ee=V&&V._frozenDynamicSamplingContext;if(ee)return ee;let{sampleRate:er,source:eo}=V.metadata;null!=er&&(_.sample_rate="".concat(er));let ec=spanUtils_spanToJSON(V);return eo&&"url"!==eo&&(_.transaction=ec.description),_.sampled=String(spanIsSampled(V)),d.emit&&d.emit("createDsc",_),_}function applyScopeDataToEvent(h,d){let{fingerprint:_,span:V,breadcrumbs:ee,sdkProcessingMetadata:er,propagationContext:eo}=d;(function(h,d){let{extra:_,tags:V,user:ee,contexts:er,level:eo,transactionName:ec}=d,eh=object_dropUndefinedKeys(_);eh&&Object.keys(eh).length&&(h.extra={...eh,...h.extra});let ep=object_dropUndefinedKeys(V);ep&&Object.keys(ep).length&&(h.tags={...ep,...h.tags});let ef=object_dropUndefinedKeys(ee);ef&&Object.keys(ef).length&&(h.user={...ef,...h.user});let em=object_dropUndefinedKeys(er);em&&Object.keys(em).length&&(h.contexts={...em,...h.contexts}),eo&&(h.level=eo),ec&&(h.transaction=ec)})(h,d),V&&function(h,d){h.contexts={trace:spanToTraceContext(d),...h.contexts};let _=getRootSpan(d);if(_){h.sdkProcessingMetadata={dynamicSamplingContext:getDynamicSamplingContextFromSpan(d),...h.sdkProcessingMetadata};let V=spanUtils_spanToJSON(_).description;V&&(h.tags={transaction:V,...h.tags})}}(h,V),h.fingerprint=h.fingerprint?arrayify(h.fingerprint):[],_&&(h.fingerprint=h.fingerprint.concat(_)),h.fingerprint&&!h.fingerprint.length&&delete h.fingerprint,function(h,d){let _=[...h.breadcrumbs||[],...d];h.breadcrumbs=_.length?_:void 0}(h,ee),h.sdkProcessingMetadata={...h.sdkProcessingMetadata,...er,propagationContext:eo}}function mergeScopeData(h,d){let{extra:_,tags:V,user:ee,contexts:er,level:eo,sdkProcessingMetadata:ec,breadcrumbs:eh,fingerprint:ep,eventProcessors:ef,attachments:em,propagationContext:eg,transactionName:eO,span:ey}=d;mergeAndOverwriteScopeData(h,"extra",_),mergeAndOverwriteScopeData(h,"tags",V),mergeAndOverwriteScopeData(h,"user",ee),mergeAndOverwriteScopeData(h,"contexts",er),mergeAndOverwriteScopeData(h,"sdkProcessingMetadata",ec),eo&&(h.level=eo),eO&&(h.transactionName=eO),ey&&(h.span=ey),eh.length&&(h.breadcrumbs=[...h.breadcrumbs,...eh]),ep.length&&(h.fingerprint=[...h.fingerprint,...ep]),ef.length&&(h.eventProcessors=[...h.eventProcessors,...ef]),em.length&&(h.attachments=[...h.attachments,...em]),h.propagationContext={...h.propagationContext,...eg}}function mergeAndOverwriteScopeData(h,d,_){if(_&&Object.keys(_).length)for(let V in h[d]={...h[d]},_)Object.prototype.hasOwnProperty.call(_,V)&&(h[d][V]=_[V])}let Scope=class Scope{static clone(h){return h?h.clone():new Scope}clone(){let h=new Scope;return h._breadcrumbs=[...this._breadcrumbs],h._tags={...this._tags},h._extra={...this._extra},h._contexts={...this._contexts},h._user=this._user,h._level=this._level,h._span=this._span,h._session=this._session,h._transactionName=this._transactionName,h._fingerprint=this._fingerprint,h._eventProcessors=[...this._eventProcessors],h._requestSession=this._requestSession,h._attachments=[...this._attachments],h._sdkProcessingMetadata={...this._sdkProcessingMetadata},h._propagationContext={...this._propagationContext},h._client=this._client,h}setClient(h){this._client=h}getClient(){return this._client}addScopeListener(h){this._scopeListeners.push(h)}addEventProcessor(h){return this._eventProcessors.push(h),this}setUser(h){return this._user=h||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&updateSession(this._session,{user:h}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(h){return this._requestSession=h,this}setTags(h){return this._tags={...this._tags,...h},this._notifyScopeListeners(),this}setTag(h,d){return this._tags={...this._tags,[h]:d},this._notifyScopeListeners(),this}setExtras(h){return this._extra={...this._extra,...h},this._notifyScopeListeners(),this}setExtra(h,d){return this._extra={...this._extra,[h]:d},this._notifyScopeListeners(),this}setFingerprint(h){return this._fingerprint=h,this._notifyScopeListeners(),this}setLevel(h){return this._level=h,this._notifyScopeListeners(),this}setTransactionName(h){return this._transactionName=h,this._notifyScopeListeners(),this}setContext(h,d){return null===d?delete this._contexts[h]:this._contexts[h]=d,this._notifyScopeListeners(),this}setSpan(h){return this._span=h,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){let h=this._span;return h&&h.transaction}setSession(h){return h?this._session=h:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(h){if(!h)return this;if("function"==typeof h){let d=h(this);return d instanceof Scope?d:this}return h instanceof Scope?(this._tags={...this._tags,...h._tags},this._extra={...this._extra,...h._extra},this._contexts={...this._contexts,...h._contexts},h._user&&Object.keys(h._user).length&&(this._user=h._user),h._level&&(this._level=h._level),h._fingerprint&&(this._fingerprint=h._fingerprint),h._requestSession&&(this._requestSession=h._requestSession),h._propagationContext&&(this._propagationContext=h._propagationContext)):isPlainObject(h)&&(this._tags={...this._tags,...h.tags},this._extra={...this._extra,...h.extra},this._contexts={...this._contexts,...h.contexts},h.user&&(this._user=h.user),h.level&&(this._level=h.level),h.fingerprint&&(this._fingerprint=h.fingerprint),h.requestSession&&(this._requestSession=h.requestSession),h.propagationContext&&(this._propagationContext=h.propagationContext)),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=generatePropagationContext(),this}addBreadcrumb(h,d){let _="number"==typeof d?d:100;if(_<=0)return this;let V={timestamp:dateTimestampInSeconds(),...h},ee=this._breadcrumbs;return ee.push(V),this._breadcrumbs=ee.length>_?ee.slice(-_):ee,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(h){return this._attachments.push(h),this}getAttachments(){let h=this.getScopeData();return h.attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){let{_breadcrumbs:h,_attachments:d,_contexts:_,_tags:V,_extra:ee,_user:er,_level:eo,_fingerprint:ec,_eventProcessors:eh,_propagationContext:ep,_sdkProcessingMetadata:ef,_transactionName:em,_span:eg}=this;return{breadcrumbs:h,attachments:d,contexts:_,tags:V,extra:ee,user:er,level:eo,fingerprint:ec||[],eventProcessors:eh,propagationContext:ep,sdkProcessingMetadata:ef,transactionName:em,span:eg}}applyToEvent(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];applyScopeDataToEvent(h,this.getScopeData());let V=[..._,...getGlobalEventProcessors(),...this._eventProcessors];return notifyEventProcessors(V,h,d)}setSDKProcessingMetadata(h){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...h},this}setPropagationContext(h){return this._propagationContext=h,this}getPropagationContext(){return this._propagationContext}captureException(h,d){let _=d&&d.event_id?d.event_id:misc_uuid4();if(!this._client)return e$.warn("No client configured on scope - will not capture exception!"),_;let V=Error("Sentry syntheticException");return this._client.captureException(h,{originalException:h,syntheticException:V,...d,event_id:_},this),_}captureMessage(h,d,_){let V=_&&_.event_id?_.event_id:misc_uuid4();if(!this._client)return e$.warn("No client configured on scope - will not capture message!"),V;let ee=Error(h);return this._client.captureMessage(h,d,{originalException:h,syntheticException:ee,..._,event_id:V},this),V}captureEvent(h,d){let _=d&&d.event_id?d.event_id:misc_uuid4();return this._client?this._client.captureEvent(h,{...d,event_id:_},this):e$.warn("No client configured on scope - will not capture event!"),_}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(h=>{h(this)}),this._notifyingListeners=!1)}constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=generatePropagationContext()}};function generatePropagationContext(){return{traceId:misc_uuid4(),spanId:misc_uuid4().substring(16)}}let eF="7.94.1",eZ=parseFloat(eF);let Hub=class Hub{isOlderThan(h){return this._version<h}bindClient(h){let d=this.getStackTop();d.client=h,d.scope.setClient(h),h&&h.setupIntegrations&&h.setupIntegrations()}pushScope(){let h=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:h}),h}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(h){let d;let _=this.pushScope();try{d=h(_)}catch(h){throw this.popScope(),h}return is_isThenable(d)?d.then(h=>(this.popScope(),h),h=>{throw this.popScope(),h}):(this.popScope(),d)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(h,d){let _=this._lastEventId=d&&d.event_id?d.event_id:misc_uuid4(),V=Error("Sentry syntheticException");return this.getScope().captureException(h,{originalException:h,syntheticException:V,...d,event_id:_}),_}captureMessage(h,d,_){let V=this._lastEventId=_&&_.event_id?_.event_id:misc_uuid4(),ee=Error(h);return this.getScope().captureMessage(h,d,{originalException:h,syntheticException:ee,..._,event_id:V}),V}captureEvent(h,d){let _=d&&d.event_id?d.event_id:misc_uuid4();return h.type||(this._lastEventId=_),this.getScope().captureEvent(h,{...d,event_id:_}),_}lastEventId(){return this._lastEventId}addBreadcrumb(h,d){let{scope:_,client:V}=this.getStackTop();if(!V)return;let{beforeBreadcrumb:ee=null,maxBreadcrumbs:er=100}=V.getOptions&&V.getOptions()||{};if(er<=0)return;let eo=dateTimestampInSeconds(),ec={timestamp:eo,...h},eh=ee?consoleSandbox(()=>ee(ec,d)):ec;null!==eh&&(V.emit&&V.emit("beforeAddBreadcrumb",eh,d),_.addBreadcrumb(eh,er))}setUser(h){this.getScope().setUser(h),this.getIsolationScope().setUser(h)}setTags(h){this.getScope().setTags(h),this.getIsolationScope().setTags(h)}setExtras(h){this.getScope().setExtras(h),this.getIsolationScope().setExtras(h)}setTag(h,d){this.getScope().setTag(h,d),this.getIsolationScope().setTag(h,d)}setExtra(h,d){this.getScope().setExtra(h,d),this.getIsolationScope().setExtra(h,d)}setContext(h,d){this.getScope().setContext(h,d),this.getIsolationScope().setContext(h,d)}configureScope(h){let{scope:d,client:_}=this.getStackTop();_&&h(d)}run(h){let d=makeMain(this);try{h(this)}finally{makeMain(d)}}getIntegration(h){let d=this.getClient();if(!d)return null;try{return d.getIntegration(h)}catch(h){return null}}startTransaction(h,d){let _=this._callExtensionMethod("startTransaction",h,d);return _}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(){let h=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(h)return this.endSession();this._sendSessionUpdate()}endSession(){let h=this.getStackTop(),d=h.scope,_=d.getSession();_&&closeSession(_),this._sendSessionUpdate(),d.setSession()}startSession(h){let{scope:d,client:_}=this.getStackTop(),{release:V,environment:ee=eP}=_&&_.getOptions()||{},{userAgent:er}=eC.navigator||{},eo=makeSession({release:V,environment:ee,user:d.getUser(),...er&&{userAgent:er},...h}),ec=d.getSession&&d.getSession();return ec&&"ok"===ec.status&&updateSession(ec,{status:"exited"}),this.endSession(),d.setSession(eo),eo}shouldSendDefaultPii(){let h=this.getClient(),d=h&&h.getOptions();return!!(d&&d.sendDefaultPii)}_sendSessionUpdate(){let{scope:h,client:d}=this.getStackTop(),_=h.getSession();_&&d&&d.captureSession&&d.captureSession(_)}_callExtensionMethod(h){for(var d=arguments.length,_=Array(d>1?d-1:0),V=1;V<d;V++)_[V-1]=arguments[V];let ee=getMainCarrier(),er=ee.__SENTRY__;if(er&&er.extensions&&"function"==typeof er.extensions[h])return er.extensions[h].apply(this,_)}constructor(h,d,_,V=eZ){let ee,er;this._version=V,d?ee=d:(ee=new Scope).setClient(h),_?er=_:(er=new Scope).setClient(h),this._stack=[{scope:ee}],h&&this.bindClient(h),this._isolationScope=er}};function getMainCarrier(){return eC.__SENTRY__=eC.__SENTRY__||{extensions:{},hub:void 0},eC}function makeMain(h){let d=getMainCarrier(),_=getHubFromCarrier(d);return setHubOnCarrier(d,h),_}function hub_getCurrentHub(){let h=getMainCarrier();if(h.__SENTRY__&&h.__SENTRY__.acs){let d=h.__SENTRY__.acs.getCurrentHub();if(d)return d}return function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:getMainCarrier();return(!(h&&h.__SENTRY__&&h.__SENTRY__.hub)||getHubFromCarrier(h).isOlderThan(eZ))&&setHubOnCarrier(h,new Hub),getHubFromCarrier(h)}(h)}function hub_getIsolationScope(){return hub_getCurrentHub().getIsolationScope()}function getHubFromCarrier(h){return getGlobalSingleton("hub",()=>new Hub,h)}function setHubOnCarrier(h,d){if(!h)return!1;let _=h.__SENTRY__=h.__SENTRY__||{};return _.hub=d,!0}let eV=/\(error: (.*)\)/,eB=/captureMessage|captureException/;function createStackParser(){for(var h=arguments.length,d=Array(h),_=0;_<h;_++)d[_]=arguments[_];let V=d.sort((h,d)=>h[0]-d[0]).map(h=>h[1]);return function(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,_=[],ee=h.split("\n");for(let h=d;h<ee.length;h++){let d=ee[h];if(d.length>1024)continue;let er=eV.test(d)?d.replace(eV,"$1"):d;if(!er.match(/\S*Error: /)){for(let h of V){let d=h(er);if(d){_.push(d);break}}if(_.length>=50)break}}return function(h){if(!h.length)return[];let d=Array.from(h);return/sentryWrapped/.test(d[d.length-1].function||"")&&d.pop(),d.reverse(),eB.test(d[d.length-1].function||"")&&(d.pop(),eB.test(d[d.length-1].function||"")&&d.pop()),d.slice(0,50).map(h=>({...h,filename:h.filename||d[d.length-1].filename,function:h.function||"?"}))}(_)}}let eW="<anonymous>";function getFunctionName(h){try{if(!h||"function"!=typeof h)return eW;return h.name||eW}catch(h){return eW}}function normalize(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Infinity;try{return function visit(h,d){let V=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Infinity,ee=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Infinity,er=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){let h="function"==typeof WeakSet,d=h?new WeakSet:[];return[function(_){if(h)return!!d.has(_)||(d.add(_),!1);for(let h=0;h<d.length;h++){let V=d[h];if(V===_)return!0}return d.push(_),!1},function(_){if(h)d.delete(_);else for(let h=0;h<d.length;h++)if(d[h]===_){d.splice(h,1);break}}]}(),[eo,ec]=er;if(null==d||["number","boolean","string"].includes(typeof d)&&!is_isNaN(d))return d;let eh=function(h,d){try{if("domain"===h&&d&&"object"==typeof d&&d._events)return"[Domain]";if("domainEmitter"===h)return"[DomainEmitter]";if(void 0!==_.g&&d===_.g)return"[Global]";if(d===window)return"[Window]";if("undefined"!=typeof document&&d===document)return"[Document]";if(isVueViewModel(d))return"[VueViewModel]";if(isPlainObject(d)&&"nativeEvent"in d&&"preventDefault"in d&&"stopPropagation"in d)return"[SyntheticEvent]";if("number"==typeof d&&d!=d)return"[NaN]";if("function"==typeof d)return"[Function: ".concat(getFunctionName(d),"]");if("symbol"==typeof d)return"[".concat(String(d),"]");if("bigint"==typeof d)return"[BigInt: ".concat(String(d),"]");let V=function(h){let d=Object.getPrototypeOf(h);return d?d.constructor.name:"null prototype"}(d);if(/^HTML(\w*)Element$/.test(V))return"[HTMLElement: ".concat(V,"]");return"[object ".concat(V,"]")}catch(h){return"**non-serializable** (".concat(h,")")}}(h,d);if(!eh.startsWith("[object "))return eh;if(d.__sentry_skip_normalization__)return d;let ep="number"==typeof d.__sentry_override_normalization_depth__?d.__sentry_override_normalization_depth__:V;if(0===ep)return eh.replace("object ","");if(eo(d))return"[Circular ~]";if(d&&"function"==typeof d.toJSON)try{let h=d.toJSON();return visit("",h,ep-1,ee,er)}catch(h){}let ef=Array.isArray(d)?[]:{},em=0,eg=convertToPlainObject(d);for(let h in eg){if(!Object.prototype.hasOwnProperty.call(eg,h))continue;if(em>=ee){ef[h]="[MaxProperties ~]";break}let d=eg[h];ef[h]=visit(h,d,ep-1,ee,er),em++}return ec(d),ef}("",h,d,V)}catch(h){return{ERROR:"**non-serializable** (".concat(h,")")}}}function prepareEvent(h,d,_,ee,er,eo){let{normalizeDepth:ec=3,normalizeMaxBreadth:eh=1e3}=h,ep={...d,event_id:d.event_id||_.event_id||misc_uuid4(),timestamp:d.timestamp||dateTimestampInSeconds()},ef=_.integrations||h.integrations.map(h=>h.name);(function(h,d){let{environment:_,release:V,dist:ee,maxValueLength:er=250}=d;"environment"in h||(h.environment="environment"in d?_:eP),void 0===h.release&&void 0!==V&&(h.release=V),void 0===h.dist&&void 0!==ee&&(h.dist=ee),h.message&&(h.message=truncate(h.message,er));let eo=h.exception&&h.exception.values&&h.exception.values[0];eo&&eo.value&&(eo.value=truncate(eo.value,er));let ec=h.request;ec&&ec.url&&(ec.url=truncate(ec.url,er))})(ep,h),ef.length>0&&(ep.sdk=ep.sdk||{},ep.sdk.integrations=[...ep.sdk.integrations||[],...ef]),void 0===d.type&&function(h,d){let _;let V=eC._sentryDebugIds;if(!V)return;let ee=eU.get(d);ee?_=ee:(_=new Map,eU.set(d,_));let er=Object.keys(V).reduce((h,ee)=>{let er;let eo=_.get(ee);eo?er=eo:(er=d(ee),_.set(ee,er));for(let d=er.length-1;d>=0;d--){let _=er[d];if(_.filename){h[_.filename]=V[ee];break}}return h},{});try{h.exception.values.forEach(h=>{h.stacktrace.frames.forEach(h=>{h.filename&&(h.debug_id=er[h.filename])})})}catch(h){}}(ep,h.stackParser);let em=function(h,d){if(!d)return h;let _=h?h.clone():new Scope;return _.update(d),_}(ee,_.captureContext);_.mechanism&&addExceptionMechanism(ep,_.mechanism);let eg=er&&er.getEventProcessors?er.getEventProcessors():[],eO=(V||(V=new Scope),V).getScopeData();if(eo){let h=eo.getScopeData();mergeScopeData(eO,h)}if(em){let h=em.getScopeData();mergeScopeData(eO,h)}let ey=[..._.attachments||[],...eO.attachments];ey.length&&(_.attachments=ey),applyScopeDataToEvent(ep,eO);let ev=[...eg,...getGlobalEventProcessors(),...eO.eventProcessors],eS=notifyEventProcessors(ev,ep,_);return eS.then(h=>(h&&function(h){let d={};try{h.exception.values.forEach(h=>{h.stacktrace.frames.forEach(h=>{h.debug_id&&(h.abs_path?d[h.abs_path]=h.debug_id:h.filename&&(d[h.filename]=h.debug_id),delete h.debug_id)})})}catch(h){}if(0===Object.keys(d).length)return;h.debug_meta=h.debug_meta||{},h.debug_meta.images=h.debug_meta.images||[];let _=h.debug_meta.images;Object.keys(d).forEach(h=>{_.push({type:"sourcemap",code_file:h,debug_id:d[h]})})}(h),"number"==typeof ec&&ec>0)?function(h,d,_){if(!h)return null;let V={...h,...h.breadcrumbs&&{breadcrumbs:h.breadcrumbs.map(h=>({...h,...h.data&&{data:normalize(h.data,d,_)}}))},...h.user&&{user:normalize(h.user,d,_)},...h.contexts&&{contexts:normalize(h.contexts,d,_)},...h.extra&&{extra:normalize(h.extra,d,_)}};return h.contexts&&h.contexts.trace&&V.contexts&&(V.contexts.trace=h.contexts.trace,h.contexts.trace.data&&(V.contexts.trace.data=normalize(h.contexts.trace.data,d,_))),h.spans&&(V.spans=h.spans.map(h=>{let V=spanUtils_spanToJSON(h).data;return V&&(h.data=normalize(V,d,_)),h})),V}(h,ec,eh):h)}let eU=new WeakMap,ez=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function captureEvent(h,d){return hub_getCurrentHub().captureEvent(h,d)}function addBreadcrumb(h,d){hub_getCurrentHub().addBreadcrumb(h,d)}function exports_getClient(){return hub_getCurrentHub().getClient()}function exports_getCurrentScope(){return hub_getCurrentHub().getScope()}function startSession(h){let d=exports_getClient(),_=hub_getIsolationScope(),V=exports_getCurrentScope(),{release:ee,environment:er=eP}=d&&d.getOptions()||{},{userAgent:eo}=eC.navigator||{},ec=makeSession({release:ee,environment:er,user:V.getUser()||_.getUser(),...eo&&{userAgent:eo},...h}),eh=_.getSession();return eh&&"ok"===eh.status&&updateSession(eh,{status:"exited"}),endSession(),_.setSession(ec),V.setSession(ec),ec}function endSession(){let h=hub_getIsolationScope(),d=exports_getCurrentScope(),_=d.getSession()||h.getSession();_&&closeSession(_),_sendSessionUpdate(),h.setSession(),d.setSession()}function _sendSessionUpdate(){let h=hub_getIsolationScope(),d=exports_getCurrentScope(),_=exports_getClient(),V=d.getSession()||h.getSession();V&&_&&_.captureSession&&_.captureSession(V)}function captureSession(){let h=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(h){endSession();return}_sendSessionUpdate()}function hasTracingEnabled_hasTracingEnabled(h){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;let d=exports_getClient(),_=h||d&&d.getOptions();return!!_&&(_.enableTracing||"tracesSampleRate"in _||"tracesSampler"in _)}let eq=[];function setupIntegration(h,d,_){if(!_[d.name]){if(_[d.name]=d,-1===eq.indexOf(d.name)&&(d.setupOnce(addGlobalEventProcessor,hub_getCurrentHub),eq.push(d.name)),d.setup&&"function"==typeof d.setup&&d.setup(h),h.on&&"function"==typeof d.preprocessEvent){let _=d.preprocessEvent.bind(d);h.on("preprocessEvent",(d,V)=>_(d,V,h))}if(h.addEventProcessor&&"function"==typeof d.processEvent){let _=d.processEvent.bind(d),V=Object.assign((d,V)=>_(d,V,h),{id:d.name});h.addEventProcessor(V)}}}function convertIntegrationFnToClass(h,d){return Object.assign(function(){for(var h=arguments.length,_=Array(h),V=0;V<h;V++)_[V]=arguments[V];return d(..._)},{id:h})}let eX=/^(\S+:\\|\/?)([\s\S]*?)((?:\.{1,2}|[^/\\]+?|)(\.[^./\\]*|))(?:[/\\]*)$/;function resolve(){for(var h=arguments.length,d=Array(h),_=0;_<h;_++)d[_]=arguments[_];let V="",ee=!1;for(let h=d.length-1;h>=-1&&!ee;h--){let _=h>=0?d[h]:"/";_&&(V="".concat(_,"/").concat(V),ee="/"===_.charAt(0))}return V=(function(h,d){let _=0;for(let d=h.length-1;d>=0;d--){let V=h[d];"."===V?h.splice(d,1):".."===V?(h.splice(d,1),_++):_&&(h.splice(d,1),_--)}if(d)for(;_--;_)h.unshift("..");return h})(V.split("/").filter(h=>!!h),!ee).join("/"),(ee?"/":"")+V||"."}function trim(h){let d=0;for(;d<h.length&&""===h[d];d++);let _=h.length-1;for(;_>=0&&""===h[_];_--);return d>_?[]:h.slice(d,_-d+1)}let eY="RewriteFrames",eG=convertIntegrationFnToClass(eY,function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=h.root,_=h.prefix||"app:///",V=h.iteratee||(h=>{if(!h.filename)return h;let V=/^[a-zA-Z]:\\/.test(h.filename)||h.filename.includes("\\")&&!h.filename.includes("/"),ee=/^\//.test(h.filename);if(V||ee){var er;let ee;let eo=V?h.filename.replace(/^[a-zA-Z]:/,"").replace(/\\/g,"/"):h.filename,ec=d?function(h,d){h=resolve(h).slice(1),d=resolve(d).slice(1);let _=trim(h.split("/")),V=trim(d.split("/")),ee=Math.min(_.length,V.length),er=ee;for(let h=0;h<ee;h++)if(_[h]!==V[h]){er=h;break}let eo=[];for(let h=er;h<_.length;h++)eo.push("..");return(eo=eo.concat(V.slice(er))).join("/")}(d,eo):(ee=function(h){let d=h.length>1024?"<truncated>".concat(h.slice(-1024)):h,_=eX.exec(d);return _?_.slice(1):[]}(eo)[2],er&&ee.slice(-1*er.length)===er&&(ee=ee.slice(0,ee.length-er.length)),ee);h.filename="".concat(_).concat(ec)}return h});return{name:eY,setupOnce(){},processEvent(h){let d=h;return h.exception&&Array.isArray(h.exception.values)&&(d=function(h){try{return{...h,exception:{...h.exception,values:h.exception.values.map(h=>{var d;return{...h,...h.stacktrace&&{stacktrace:{...d=h.stacktrace,frames:d&&d.frames&&d.frames.map(h=>V(h))}}}})}}}catch(d){return h}}(d)),d}}}),eH=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/],eK=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],eJ="InboundFilters",e0=convertIntegrationFnToClass(eJ,function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{name:eJ,setupOnce(){},processEvent(d,_,V){var ee;let er=V.getOptions(),eo=function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{allowUrls:[...h.allowUrls||[],...d.allowUrls||[]],denyUrls:[...h.denyUrls||[],...d.denyUrls||[]],ignoreErrors:[...h.ignoreErrors||[],...d.ignoreErrors||[],...h.disableErrorDefaults?[]:eH],ignoreTransactions:[...h.ignoreTransactions||[],...d.ignoreTransactions||[],...h.disableTransactionDefaults?[]:eK],ignoreInternal:void 0===h.ignoreInternal||h.ignoreInternal}}(h,er);return eo.ignoreInternal&&function(h){try{return"SentryError"===h.exception.values[0].type}catch(h){}return!1}(d)||(ee=eo.ignoreErrors,!d.type&&ee&&ee.length&&(function(h){let d;let _=[];h.message&&_.push(h.message);try{d=h.exception.values[h.exception.values.length-1]}catch(h){}return d&&d.value&&(_.push(d.value),d.type&&_.push("".concat(d.type,": ").concat(d.value))),_})(d).some(h=>stringMatchesSomePattern(h,ee))||function(h,d){if("transaction"!==h.type||!d||!d.length)return!1;let _=h.transaction;return!!_&&stringMatchesSomePattern(_,d)}(d,eo.ignoreTransactions)||function(h,d){if(!d||!d.length)return!1;let _=_getEventFilterUrl(h);return!!_&&stringMatchesSomePattern(_,d)}(d,eo.denyUrls))||!function(h,d){if(!d||!d.length)return!0;let _=_getEventFilterUrl(h);return!_||stringMatchesSomePattern(_,d)}(d,eo.allowUrls)?null:d}}});function _getEventFilterUrl(h){try{let d;try{d=h.exception.values[0].stacktrace.frames}catch(h){}return d?function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let d=h.length-1;d>=0;d--){let _=h[d];if(_&&"<anonymous>"!==_.filename&&"[native code]"!==_.filename)return _.filename||null}return null}(d):null}catch(h){return null}}let e1="FunctionToString",e2=convertIntegrationFnToClass(e1,()=>({name:e1,setupOnce(){ee=Function.prototype.toString;try{Function.prototype.toString=function(){for(var h=arguments.length,d=Array(h),_=0;_<h;_++)d[_]=arguments[_];let V=getOriginalFunction(this)||this;return ee.apply(V,d)}}catch(h){}}}));function supportsFetch(){if(!("fetch"in eC))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(h){return!1}}function isNativeFetch(h){return h&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(h.toString())}let e5={},e7={};function addHandler(h,d){e5[h]=e5[h]||[],e5[h].push(d)}function maybeInstrument(h,d){e7[h]||(d(),e7[h]=!0)}function triggerHandlers(h,d){let _=h&&e5[h];if(_)for(let h of _)try{h(d)}catch(h){}}function addHistoryInstrumentationHandler(h){let d="history";addHandler(d,h),maybeInstrument(d,instrumentHistory)}function instrumentHistory(){if(!function(){let h=eC.chrome,d=h&&h.app&&h.app.runtime,_="history"in eC&&!!eC.history.pushState&&!!eC.history.replaceState;return!d&&_}())return;let h=eC.onpopstate;function historyReplacementFunction(h){return function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];let ee=_.length>2?_[2]:void 0;if(ee){let h=er,d=String(ee);er=d,triggerHandlers("history",{from:h,to:d})}return h.apply(this,_)}}eC.onpopstate=function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];let ee=eC.location.href,eo=er;if(er=ee,triggerHandlers("history",{from:eo,to:ee}),h)try{return h.apply(this,_)}catch(h){}},fill(eC.history,"pushState",historyReplacementFunction),fill(eC.history,"replaceState",historyReplacementFunction)}let e3=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function dsn_dsnToString(h){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{host:_,path:V,pass:ee,port:er,projectId:eo,protocol:ec,publicKey:eh}=h;return"".concat(ec,"://").concat(eh).concat(d&&ee?":".concat(ee):"")+"@".concat(_).concat(er?":".concat(er):"","/").concat(V?"".concat(V,"/"):V).concat(eo)}function dsnFromString(h){let d=e3.exec(h);if(!d){consoleSandbox(()=>{console.error("Invalid Sentry Dsn: ".concat(h))});return}let[_,V,ee="",er,eo="",ec]=d.slice(1),eh="",ep=ec,ef=ep.split("/");if(ef.length>1&&(eh=ef.slice(0,-1).join("/"),ep=ef.pop()),ep){let h=ep.match(/^\d+/);h&&(ep=h[0])}return dsnFromComponents({host:er,pass:ee,path:eh,projectId:ep,port:eo,protocol:_,publicKey:V})}function dsnFromComponents(h){return{protocol:h.protocol,publicKey:h.publicKey||"",pass:h.pass||"",host:h.host,port:h.port||"",path:h.path||"",projectId:h.projectId}}function createEnvelope(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return[h,d]}function forEachEnvelopeItem(h,d){let _=h[1];for(let h of _){let _=h[0].type,V=d(h,_);if(V)return!0}return!1}function encodeUTF8(h,d){let _=d||new TextEncoder;return _.encode(h)}let e4={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",statsd:"unknown"};function getSdkMetadataForEnvelopeHeader(h){if(!h||!h.sdk)return;let{name:d,version:_}=h.sdk;return{name:d,version:_}}function createEventEnvelopeHeaders(h,d,_,V){let ee=h.sdkProcessingMetadata&&h.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:h.event_id,sent_at:new Date().toISOString(),...d&&{sdk:d},...!!_&&V&&{dsn:dsn_dsnToString(V)},...ee&&{trace:object_dropUndefinedKeys({...ee})}}}let SentryError=class SentryError extends Error{constructor(h,d="warn"){super(h),this.message=h,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=d}};let BaseClient=class BaseClient{captureException(h,d,_){if(checkOrSetAlreadyCaught(h))return;let V=d&&d.event_id;return this._process(this.eventFromException(h,d).then(h=>this._captureEvent(h,d,_)).then(h=>{V=h})),V}captureMessage(h,d,_,V){let ee=_&&_.event_id,er=isParameterizedString(h)?h:String(h),eo=is_isPrimitive(h)?this.eventFromMessage(er,d,_):this.eventFromException(h,_);return this._process(eo.then(h=>this._captureEvent(h,_,V)).then(h=>{ee=h})),ee}captureEvent(h,d,_){if(d&&d.originalException&&checkOrSetAlreadyCaught(d.originalException))return;let V=d&&d.event_id;return this._process(this._captureEvent(h,d,_).then(h=>{V=h})),V}captureSession(h){"string"!=typeof h.release||(this.sendSession(h),updateSession(h,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(h){let d=this._transport;return d?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(h).then(_=>d.flush(h).then(h=>_&&h))):resolvedSyncPromise(!0)}close(h){return this.flush(h).then(h=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),h))}getEventProcessors(){return this._eventProcessors}addEventProcessor(h){this._eventProcessors.push(h)}setupIntegrations(h){(h&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(h){return this.getIntegrationByName(h)}getIntegrationByName(h){return this._integrations[h]}getIntegration(h){try{return this._integrations[h.id]||null}catch(h){return null}}addIntegration(h){setupIntegration(this,h,this._integrations)}sendEvent(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.emit("beforeSendEvent",h,d);let _=function(h,d,_,V){var ee;let er=getSdkMetadataForEnvelopeHeader(_),eo=h.type&&"replay_event"!==h.type?h.type:"event";(ee=_&&_.sdk)&&(h.sdk=h.sdk||{},h.sdk.name=h.sdk.name||ee.name,h.sdk.version=h.sdk.version||ee.version,h.sdk.integrations=[...h.sdk.integrations||[],...ee.integrations||[]],h.sdk.packages=[...h.sdk.packages||[],...ee.packages||[]]);let ec=createEventEnvelopeHeaders(h,er,V,d);delete h.sdkProcessingMetadata;let eh=[{type:eo},h];return createEnvelope(ec,[eh])}(h,this._dsn,this._options._metadata,this._options.tunnel);for(let h of d.attachments||[])_=function(h,d){let[_,V]=h;return[_,[...V,d]]}(_,function(h,d){let _="string"==typeof h.data?encodeUTF8(h.data,d):h.data;return[object_dropUndefinedKeys({type:"attachment",length:_.length,filename:h.filename,content_type:h.contentType,attachment_type:h.attachmentType}),_]}(h,this._options.transportOptions&&this._options.transportOptions.textEncoder));let V=this._sendEnvelope(_);V&&V.then(d=>this.emit("afterSendEvent",h,d),null)}sendSession(h){let d=function(h,d,_,V){let ee=getSdkMetadataForEnvelopeHeader(_),er={sent_at:new Date().toISOString(),...ee&&{sdk:ee},...!!V&&d&&{dsn:dsn_dsnToString(d)}},eo="aggregates"in h?[{type:"sessions"},h]:[{type:"session"},h.toJSON()];return createEnvelope(er,[eo])}(h,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(d)}recordDroppedEvent(h,d,_){if(this._options.sendClientReports){let _="".concat(h,":").concat(d);this._outcomes[_]=this._outcomes[_]+1||1}}captureAggregateMetrics(h){let d=function(h,d,_,V){let ee={sent_at:new Date().toISOString()};_&&_.sdk&&(ee.sdk={name:_.sdk.name,version:_.sdk.version}),V&&d&&(ee.dsn=dsn_dsnToString(d));let er=function(h){let d=function(h){let d="";for(let _ of h){let h=Object.entries(_.tags),V=h.length>0?"|#".concat(h.map(h=>{let[d,_]=h;return"".concat(d,":").concat(_)}).join(",")):"";d+="".concat(_.name,"@").concat(_.unit,":").concat(_.metric,"|").concat(_.metricType).concat(V,"|T").concat(_.timestamp,"\n")}return d}(h),_={type:"statsd",length:d.length};return[_,d]}(h);return createEnvelope(ee,[er])}(h,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(d)}on(h,d){this._hooks[h]||(this._hooks[h]=[]),this._hooks[h].push(d)}emit(h){for(var d=arguments.length,_=Array(d>1?d-1:0),V=1;V<d;V++)_[V-1]=arguments[V];this._hooks[h]&&this._hooks[h].forEach(h=>h(..._))}_setupIntegrations(){this._integrations=function(h,d){let _={};return d.forEach(d=>{d&&setupIntegration(h,d,_)}),_}(this,this._options.integrations),this._integrationsInitialized=!0}_updateSessionFromEvent(h,d){let _=!1,V=!1,ee=d.exception&&d.exception.values;if(ee)for(let h of(V=!0,ee)){let d=h.mechanism;if(d&&!1===d.handled){_=!0;break}}let er="ok"===h.status,eo=er&&0===h.errors||er&&_;eo&&(updateSession(h,{..._&&{status:"crashed"},errors:h.errors||Number(V||_)}),this.captureSession(h))}_isClientDoneProcessing(h){return new SyncPromise(d=>{let _=0,V=setInterval(()=>{0==this._numProcessing?(clearInterval(V),d(!0)):(_+=1,h&&_>=h&&(clearInterval(V),d(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(h,d,_){let V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:hub_getIsolationScope(),ee=this.getOptions(),er=Object.keys(this._integrations);return!d.integrations&&er.length>0&&(d.integrations=er),this.emit("preprocessEvent",h,d),prepareEvent(ee,h,d,_,this,V).then(h=>{if(null===h)return h;let{propagationContext:d}=h.sdkProcessingMetadata||{},V=h.contexts&&h.contexts.trace;if(!V&&d){let{traceId:V,spanId:ee,parentSpanId:er,dsc:eo}=d;h.contexts={trace:{trace_id:V,span_id:ee,parent_span_id:er},...h.contexts};let ec=eo||getDynamicSamplingContextFromClient(V,this,_);h.sdkProcessingMetadata={dynamicSamplingContext:ec,...h.sdkProcessingMetadata}}return h})}_captureEvent(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2?arguments[2]:void 0;return this._processEvent(h,d,_).then(h=>h.event_id,h=>{})}_processEvent(h,d,_){let V=this.getOptions(),{sampleRate:ee}=V,er=isTransactionEvent(h),eo=baseclient_isErrorEvent(h),ec=h.type||"error",eh="before send for type `".concat(ec,"`");if(eo&&"number"==typeof ee&&Math.random()>ee)return this.recordDroppedEvent("sample_rate","error",h),rejectedSyncPromise(new SentryError("Discarding event because it's not included in the random sample (sampling rate = ".concat(ee,")"),"log"));let ep="replay_event"===ec?"replay":ec;return this._prepareEvent(h,d,_).then(_=>{if(null===_)throw this.recordDroppedEvent("event_processor",ep,h),new SentryError("An event processor returned `null`, will not send event.","log");let ee=d.data&&!0===d.data.__sentry__;if(ee)return _;let er=function(h,d,_){let{beforeSend:V,beforeSendTransaction:ee}=h;return baseclient_isErrorEvent(d)&&V?V(d,_):isTransactionEvent(d)&&ee?ee(d,_):d}(V,_,d);return function(h,d){let _="".concat(d," must return `null` or a valid event.");if(is_isThenable(h))return h.then(h=>{if(!isPlainObject(h)&&null!==h)throw new SentryError(_);return h},h=>{throw new SentryError("".concat(d," rejected with ").concat(h))});if(!isPlainObject(h)&&null!==h)throw new SentryError(_);return h}(er,eh)}).then(V=>{if(null===V)throw this.recordDroppedEvent("before_send",ep,h),new SentryError("".concat(eh," returned `null`, will not send event."),"log");let ee=_&&_.getSession();!er&&ee&&this._updateSessionFromEvent(ee,V);let eo=V.transaction_info;return er&&eo&&V.transaction!==h.transaction&&(V.transaction_info={...eo,source:"custom"}),this.sendEvent(V,d),V}).then(null,h=>{if(h instanceof SentryError)throw h;throw this.captureException(h,{data:{__sentry__:!0},originalException:h}),new SentryError("Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ".concat(h))})}_process(h){this._numProcessing++,h.then(h=>(this._numProcessing--,h),h=>(this._numProcessing--,h))}_sendEnvelope(h){if(this.emit("beforeEnvelope",h),this._isEnabled()&&this._transport)return this._transport.send(h).then(null,h=>{})}_clearOutcomes(){let h=this._outcomes;return this._outcomes={},Object.keys(h).map(d=>{let[_,V]=d.split(":");return{reason:_,category:V,quantity:h[d]}})}constructor(h){if(this._options=h,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],h.dsn&&(this._dsn=function(h){let d="string"==typeof h?dsnFromString(h):dsnFromComponents(h);if(d)return d}(h.dsn)),this._dsn){let d=function(h){var d;let _=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},V="string"==typeof _?_:_.tunnel,ee="string"!=typeof _&&_._metadata?_._metadata.sdk:void 0;return V||"".concat("".concat(function(h){let d=h.protocol?"".concat(h.protocol,":"):"",_=h.port?":".concat(h.port):"";return"".concat(d,"//").concat(h.host).concat(_).concat(h.path?"/".concat(h.path):"","/api/")}(h)).concat(h.projectId,"/envelope/"),"?").concat(Object.keys(d={sentry_key:h.publicKey,sentry_version:"7",...ee&&{sentry_client:"".concat(ee.name,"/").concat(ee.version)}}).map(h=>"".concat(encodeURIComponent(h),"=").concat(encodeURIComponent(d[h]))).join("&"))}(this._dsn,h);this._transport=h.transport({recordDroppedEvent:this.recordDroppedEvent.bind(this),...h.transportOptions,url:d})}}};function baseclient_isErrorEvent(h){return void 0===h.type}function isTransactionEvent(h){return"transaction"===h.type}var e6,e9,e8,te,tr,to,ta,tc,td,tp,tf=_(9260);function exceptionFromError(h,d){let _=parseStackFrames(h,d),V={type:d&&d.name,value:function(h){let d=h&&h.message;return d?d.error&&"string"==typeof d.error.message?d.error.message:d:"No error message"}(d)};return _.length&&(V.stacktrace={frames:_}),void 0===V.type&&""===V.value&&(V.value="Unrecoverable error caught"),V}function eventFromError(h,d){return{exception:{values:[exceptionFromError(h,d)]}}}function parseStackFrames(h,d){let _=d.stacktrace||d.stack||"",V=function(h){if(h){if("number"==typeof h.framesToPop)return h.framesToPop;if(tm.test(h.message))return 1}return 0}(d);try{return h(_,V)}catch(h){}return[]}let tm=/Minified React error #\d+;/i;function eventFromUnknownInput(h,d,_,V,ee){let er;if(isErrorEvent(d)&&d.error)return eventFromError(h,d.error);if(isDOMError(d)||isBuiltin(d,"DOMException")){if("stack"in d)er=eventFromError(h,d);else{let ee=d.name||(isDOMError(d)?"DOMError":"DOMException"),eo=d.message?"".concat(ee,": ").concat(d.message):ee;addExceptionTypeValue(er=eventFromString(h,eo,_,V),eo)}return"code"in d&&(er.tags={...er.tags,"DOMException.code":"".concat(d.code)}),er}return isError(d)?eventFromError(h,d):(isPlainObject(d)||isEvent(d)?addExceptionMechanism(er=function(h,d,_,V){let ee=exports_getClient(),er=ee&&ee.getOptions().normalizeDepth,eo={exception:{values:[{type:isEvent(d)?d.constructor.name:V?"UnhandledRejection":"Error",value:function(h,d){let{isUnhandledRejection:_}=d,V=function(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40,_=Object.keys(convertToPlainObject(h));if(_.sort(),!_.length)return"[object has no keys]";if(_[0].length>=d)return truncate(_[0],d);for(let h=_.length;h>0;h--){let V=_.slice(0,h).join(", ");if(!(V.length>d)){if(h===_.length)return V;return truncate(V,d)}}return""}(h),ee=_?"promise rejection":"exception";if(isErrorEvent(h))return"Event `ErrorEvent` captured as ".concat(ee," with message `").concat(h.message,"`");if(isEvent(h)){let d=function(h){try{let d=Object.getPrototypeOf(h);return d?d.constructor.name:void 0}catch(h){}}(h);return"Event `".concat(d,"` (type=").concat(h.type,") captured as ").concat(ee)}return"Object captured as ".concat(ee," with keys: ").concat(V)}(d,{isUnhandledRejection:V})}]},extra:{__serialized__:function normalizeToSize(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,_=arguments.length>2&&void 0!==arguments[2]?arguments[2]:102400,V=normalize(h,d);return~-encodeURI(JSON.stringify(V)).split(/%..|./).length>_?normalizeToSize(h,d-1,_):V}(d,er)}};if(_){let d=parseStackFrames(h,_);d.length&&(eo.exception.values[0].stacktrace={frames:d})}return eo}(h,d,_,ee),{synthetic:!0}):(addExceptionTypeValue(er=eventFromString(h,d,_,V),"".concat(d),void 0),addExceptionMechanism(er,{synthetic:!0})),er)}function eventFromString(h,d,_,V){let ee={};if(V&&_){let V=parseStackFrames(h,_);V.length&&(ee.exception={values:[{value:d,stacktrace:{frames:V}}]})}if(isParameterizedString(d)){let{__sentry_template_string__:h,__sentry_template_values__:_}=d;return ee.logentry={message:h,params:_},ee}return ee.message=d,ee}let tg=0;function wrap(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},_=arguments.length>2?arguments[2]:void 0;if("function"!=typeof h)return h;try{let d=h.__sentry_wrapped__;if(d)return d;if(getOriginalFunction(h))return h}catch(d){return h}let sentryWrapped=function(){let V=Array.prototype.slice.call(arguments);try{_&&"function"==typeof _&&_.apply(this,arguments);let ee=V.map(h=>wrap(h,d));return h.apply(this,ee)}catch(h){throw tg++,setTimeout(()=>{tg--}),!function(){for(var h=arguments.length,d=Array(h),_=0;_<h;_++)d[_]=arguments[_];let V=hub_getCurrentHub();if(2===d.length){let[h,_]=d;return h?V.withScope(()=>(V.getStackTop().scope=h,_(h))):V.withScope(_)}V.withScope(d[0])}(_=>{_.addEventProcessor(h=>(d.mechanism&&(addExceptionTypeValue(h,void 0,void 0),addExceptionMechanism(h,d.mechanism)),h.extra={...h.extra,arguments:V},h)),function(h,d){hub_getCurrentHub().captureException(h,d?d instanceof Scope||"function"==typeof d||Object.keys(d).some(h=>ez.includes(h))?{captureContext:d}:d:void 0)}(h)}),h}};try{for(let d in h)Object.prototype.hasOwnProperty.call(h,d)&&(sentryWrapped[d]=h[d])}catch(h){}markFunctionWrapped(sentryWrapped,h),addNonEnumerableProperty(h,"__sentry_wrapped__",sentryWrapped);try{let d=Object.getOwnPropertyDescriptor(sentryWrapped,"name");d.configurable&&Object.defineProperty(sentryWrapped,"name",{get:()=>h.name})}catch(h){}return sentryWrapped}let BrowserClient=class BrowserClient extends BaseClient{eventFromException(h,d){return function(h,d,_,V){let ee=_&&_.syntheticException||void 0,er=eventFromUnknownInput(h,d,ee,V);return addExceptionMechanism(er),er.level="error",_&&_.event_id&&(er.event_id=_.event_id),resolvedSyncPromise(er)}(this._options.stackParser,h,d,this._options.attachStacktrace)}eventFromMessage(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",_=arguments.length>2?arguments[2]:void 0;return function(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",V=arguments.length>3?arguments[3]:void 0,ee=arguments.length>4?arguments[4]:void 0,er=V&&V.syntheticException||void 0,eo=eventFromString(h,d,er,ee);return eo.level=_,V&&V.event_id&&(eo.event_id=V.event_id),resolvedSyncPromise(eo)}(this._options.stackParser,h,d,_,this._options.attachStacktrace)}captureUserFeedback(h){if(!this._isEnabled())return;let d=function(h,d){let{metadata:_,tunnel:V,dsn:ee}=d,er={event_id:h.event_id,sent_at:new Date().toISOString(),..._&&_.sdk&&{sdk:{name:_.sdk.name,version:_.sdk.version}},...!!V&&!!ee&&{dsn:dsn_dsnToString(ee)}},eo=[{type:"user_report"},h];return createEnvelope(er,[eo])}(h,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(d)}_prepareEvent(h,d,_){return h.platform=h.platform||"javascript",super._prepareEvent(h,d,_)}_flushOutcomes(){let h=this._clearOutcomes();if(0===h.length||!this._dsn)return;let d=function(h,d,_){let V=[{type:"client_report"},{timestamp:dateTimestampInSeconds(),discarded_events:h}];return createEnvelope(d?{dsn:d}:{},[V])}(h,this._options.tunnel&&dsn_dsnToString(this._dsn));this._sendEnvelope(d)}constructor(h){let d=eC.SENTRY_SDK_SOURCE||(0,tf.S)();h._metadata=h._metadata||{},h._metadata.sdk=h._metadata.sdk||{name:"sentry.javascript.browser",packages:[{name:"".concat(d,":@sentry/browser"),version:eF}],version:eF},super(h),h.sendClientReports&&eC.document&&eC.document.addEventListener("visibilitychange",()=>{"hidden"===eC.document.visibilityState&&this._flushOutcomes()})}};let tO=null;function addGlobalErrorInstrumentationHandler(h){let d="error";addHandler(d,h),maybeInstrument(d,instrumentError)}function instrumentError(){tO=eC.onerror,eC.onerror=function(h,d,_,V,ee){return triggerHandlers("error",{column:V,error:ee,line:_,msg:h,url:d}),!!tO&&!tO.__SENTRY_LOADER__&&tO.apply(this,arguments)},eC.onerror.__SENTRY_INSTRUMENTED__=!0}let ty=null;function addGlobalUnhandledRejectionInstrumentationHandler(h){let d="unhandledrejection";addHandler(d,h),maybeInstrument(d,instrumentUnhandledRejection)}function instrumentUnhandledRejection(){ty=eC.onunhandledrejection,eC.onunhandledrejection=function(h){return triggerHandlers("unhandledrejection",h),!ty||!!ty.__SENTRY_LOADER__||ty.apply(this,arguments)},eC.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}let tv="GlobalHandlers",tb=convertIntegrationFnToClass(tv,function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d={onerror:!0,onunhandledrejection:!0,...h};return{name:tv,setupOnce(){Error.stackTraceLimit=50},setup(h){d.onerror&&addGlobalErrorInstrumentationHandler(d=>{let{stackParser:_,attachStacktrace:V}=getOptions();if(exports_getClient()!==h||tg>0)return;let{msg:ee,url:er,line:eo,column:ec,error:eh}=d,ep=void 0===eh&&isString(ee)?function(h,d,_,V){let ee=isErrorEvent(h)?h.message:h,er="Error",eo=ee.match(/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i);eo&&(er=eo[1],ee=eo[2]);let ec={exception:{values:[{type:er,value:ee}]}};return _enhanceEventWithInitialFrame(ec,d,_,V)}(ee,er,eo,ec):_enhanceEventWithInitialFrame(eventFromUnknownInput(_,eh||ee,void 0,V,!1),er,eo,ec);ep.level="error",captureEvent(ep,{originalException:eh,mechanism:{handled:!1,type:"onerror"}})}),d.onunhandledrejection&&addGlobalUnhandledRejectionInstrumentationHandler(d=>{let{stackParser:_,attachStacktrace:V}=getOptions();if(exports_getClient()!==h||tg>0)return;let ee=function(h){if(is_isPrimitive(h))return h;try{if("reason"in h)return h.reason;if("detail"in h&&"reason"in h.detail)return h.detail.reason}catch(h){}return h}(d),er=is_isPrimitive(ee)?{exception:{values:[{type:"UnhandledRejection",value:"Non-Error promise rejection captured with value: ".concat(String(ee))}]}}:eventFromUnknownInput(_,ee,void 0,V,!0);er.level="error",captureEvent(er,{originalException:ee,mechanism:{handled:!1,type:"onunhandledrejection"}})})}}});function _enhanceEventWithInitialFrame(h,d,_,V){let ee=h.exception=h.exception||{},er=ee.values=ee.values||[],eo=er[0]=er[0]||{},ec=eo.stacktrace=eo.stacktrace||{},eh=ec.frames=ec.frames||[],ep=isNaN(parseInt(V,10))?void 0:V,ef=isNaN(parseInt(_,10))?void 0:_,em=isString(d)&&d.length>0?d:function(){try{return eC.document.location.href}catch(h){return""}}();return 0===eh.length&&eh.push({colno:ep,filename:em,function:"?",in_app:!0,lineno:ef}),h}function getOptions(){let h=exports_getClient(),d=h&&h.getOptions()||{stackParser:()=>[],attachStacktrace:!1};return d}let tS=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],t_="TryCatch",tw=convertIntegrationFnToClass(t_,function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...h};return{name:t_,setupOnce(){d.setTimeout&&fill(eC,"setTimeout",_wrapTimeFunction),d.setInterval&&fill(eC,"setInterval",_wrapTimeFunction),d.requestAnimationFrame&&fill(eC,"requestAnimationFrame",_wrapRAF),d.XMLHttpRequest&&"XMLHttpRequest"in eC&&fill(XMLHttpRequest.prototype,"send",_wrapXHR);let h=d.eventTarget;if(h){let d=Array.isArray(h)?h:tS;d.forEach(_wrapEventTarget)}}}});function _wrapTimeFunction(h){return function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];let ee=_[0];return _[0]=wrap(ee,{mechanism:{data:{function:getFunctionName(h)},handled:!1,type:"instrument"}}),h.apply(this,_)}}function _wrapRAF(h){return function(d){return h.apply(this,[wrap(d,{mechanism:{data:{function:"requestAnimationFrame",handler:getFunctionName(h)},handled:!1,type:"instrument"}})])}}function _wrapXHR(h){return function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];let ee=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(h=>{h in ee&&"function"==typeof ee[h]&&fill(ee,h,function(d){let _={mechanism:{data:{function:h,handler:getFunctionName(d)},handled:!1,type:"instrument"}},V=getOriginalFunction(d);return V&&(_.mechanism.data.handler=getFunctionName(V)),wrap(d,_)})}),h.apply(this,_)}}function _wrapEventTarget(h){let d=eC[h]&&eC[h].prototype;d&&d.hasOwnProperty&&d.hasOwnProperty("addEventListener")&&(fill(d,"addEventListener",function(d){return function(_,V,ee){try{"function"==typeof V.handleEvent&&(V.handleEvent=wrap(V.handleEvent,{mechanism:{data:{function:"handleEvent",handler:getFunctionName(V),target:h},handled:!1,type:"instrument"}}))}catch(h){}return d.apply(this,[_,wrap(V,{mechanism:{data:{function:"addEventListener",handler:getFunctionName(V),target:h},handled:!1,type:"instrument"}}),ee])}}),fill(d,"removeEventListener",function(h){return function(d,_,V){try{let ee=_&&_.__sentry_wrapped__;ee&&h.call(this,d,ee,V)}catch(h){}return h.call(this,d,_,V)}}))}function instrumentConsole(){"console"in eC&&eR.forEach(function(h){h in eC.console&&fill(eC.console,h,function(d){return eA[h]=d,function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];triggerHandlers("console",{args:_,level:h});let ee=eA[h];ee&&ee.apply(eC.console,_)}})})}function addClickKeypressInstrumentationHandler(h){addHandler("dom",h),maybeInstrument("dom",instrumentDOM)}function instrumentDOM(){if(!eC.document)return;let h=triggerHandlers.bind(null,"dom"),d=makeDOMEventHandler(h,!0);eC.document.addEventListener("click",d,!1),eC.document.addEventListener("keypress",d,!1),["EventTarget","Node"].forEach(d=>{let _=eC[d]&&eC[d].prototype;_&&_.hasOwnProperty&&_.hasOwnProperty("addEventListener")&&(fill(_,"addEventListener",function(d){return function(_,V,ee){if("click"===_||"keypress"==_)try{let V=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},er=V[_]=V[_]||{refCount:0};if(!er.handler){let V=makeDOMEventHandler(h);er.handler=V,d.call(this,_,V,ee)}er.refCount++}catch(h){}return d.call(this,_,V,ee)}}),fill(_,"removeEventListener",function(h){return function(d,_,V){if("click"===d||"keypress"==d)try{let _=this.__sentry_instrumentation_handlers__||{},ee=_[d];ee&&(ee.refCount--,ee.refCount<=0&&(h.call(this,d,ee.handler,V),ee.handler=void 0,delete _[d]),0===Object.keys(_).length&&delete this.__sentry_instrumentation_handlers__)}catch(h){}return h.call(this,d,_,V)}}))})}function makeDOMEventHandler(h){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return _=>{if(!_||_._sentryCaptured)return;let V=function(h){try{return h.target}catch(h){return null}}(_);if("keypress"===_.type&&(!V||!V.tagName||"INPUT"!==V.tagName&&"TEXTAREA"!==V.tagName&&!V.isContentEditable))return;addNonEnumerableProperty(_,"_sentryCaptured",!0),V&&!V._sentryId&&addNonEnumerableProperty(V,"_sentryId",misc_uuid4());let ee="keypress"===_.type?"input":_.type;!function(h){if(h.type!==ec)return!1;try{if(!h.target||h.target._sentryId!==eh)return!1}catch(h){}return!0}(_)&&(h({event:_,name:ee,global:d}),ec=_.type,eh=V?V._sentryId:void 0),clearTimeout(eo),eo=eC.setTimeout(()=>{eh=void 0,ec=void 0},1e3)}}let tx="__sentry_xhr_v3__";function addXhrInstrumentationHandler(h){addHandler("xhr",h),maybeInstrument("xhr",instrumentXHR)}function instrumentXHR(){if(!eC.XMLHttpRequest)return;let h=XMLHttpRequest.prototype;fill(h,"open",function(h){return function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];let ee=Date.now(),er=isString(_[0])?_[0].toUpperCase():void 0,eo=function(h){if(isString(h))return h;try{return h.toString()}catch(h){}}(_[1]);if(!er||!eo)return h.apply(this,_);this[tx]={method:er,url:eo,request_headers:{}},"POST"===er&&eo.match(/sentry_key/)&&(this.__sentry_own_request__=!0);let onreadystatechangeHandler=()=>{let h=this[tx];if(h&&4===this.readyState){try{h.status_code=this.status}catch(h){}let d={args:[er,eo],endTimestamp:Date.now(),startTimestamp:ee,xhr:this};triggerHandlers("xhr",d)}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?fill(this,"onreadystatechange",function(h){return function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];return onreadystatechangeHandler(),h.apply(this,_)}}):this.addEventListener("readystatechange",onreadystatechangeHandler),fill(this,"setRequestHeader",function(h){return function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];let[ee,er]=_,eo=this[tx];return eo&&isString(ee)&&isString(er)&&(eo.request_headers[ee.toLowerCase()]=er),h.apply(this,_)}}),h.apply(this,_)}}),fill(h,"send",function(h){return function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];let ee=this[tx];if(!ee)return h.apply(this,_);void 0!==_[0]&&(ee.body=_[0]);let er={args:[ee.method,ee.url],startTimestamp:Date.now(),xhr:this};return triggerHandlers("xhr",er),h.apply(this,_)}})}function addFetchInstrumentationHandler(h){let d="fetch";addHandler(d,h),maybeInstrument(d,instrumentFetch)}function instrumentFetch(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!supportsFetch())return!1;if(isNativeFetch(eC.fetch))return!0;let h=!1,d=eC.document;if(d&&"function"==typeof d.createElement)try{let _=d.createElement("iframe");_.hidden=!0,d.head.appendChild(_),_.contentWindow&&_.contentWindow.fetch&&(h=isNativeFetch(_.contentWindow.fetch)),d.head.removeChild(_)}catch(h){}return h})()&&fill(eC,"fetch",function(h){return function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];let{method:ee,url:er}=function(h){if(0===h.length)return{method:"GET",url:""};if(2===h.length){let[d,_]=h;return{url:getUrlFromResource(d),method:hasProp(_,"method")?String(_.method).toUpperCase():"GET"}}let d=h[0];return{url:getUrlFromResource(d),method:hasProp(d,"method")?String(d.method).toUpperCase():"GET"}}(_),eo={args:_,fetchData:{method:ee,url:er},startTimestamp:Date.now()};return triggerHandlers("fetch",{...eo}),h.apply(eC,_).then(h=>{let d={...eo,endTimestamp:Date.now(),response:h};return triggerHandlers("fetch",d),h},h=>{let d={...eo,endTimestamp:Date.now(),error:h};throw triggerHandlers("fetch",d),h})}})}function hasProp(h,d){return!!h&&"object"==typeof h&&!!h[d]}function getUrlFromResource(h){return"string"==typeof h?h:h?hasProp(h,"url")?h.url:h.toString?h.toString():"":""}let tk=["fatal","error","warning","log","info","debug"];function url_parseUrl(h){if(!h)return{};let d=h.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!d)return{};let _=d[6]||"",V=d[8]||"";return{host:d[4],path:d[5],protocol:d[2],search:_,hash:V,relative:d[5]+_+V}}let tT="Breadcrumbs",tE=convertIntegrationFnToClass(tT,function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...h};return{name:tT,setupOnce(){},setup(h){var _;d.console&&function(h){let d="console";addHandler(d,h),maybeInstrument(d,instrumentConsole)}(function(d){var _;if(exports_getClient()!==h)return;let V={category:"console",data:{arguments:d.args,logger:"console"},level:"warn"===(_=d.level)?"warning":tk.includes(_)?_:"log",message:safeJoin(d.args," ")};if("assert"===d.level){if(!1!==d.args[0])return;V.message="Assertion failed: ".concat(safeJoin(d.args.slice(1)," ")||"console.assert"),V.data.arguments=d.args.slice(1)}addBreadcrumb(V,{input:d.args,level:d.level})}),d.dom&&addClickKeypressInstrumentationHandler((_=d.dom,function(d){let V,ee;if(exports_getClient()!==h)return;let er="object"==typeof _?_.serializeAttribute:void 0,eo="object"==typeof _&&"number"==typeof _.maxStringLength?_.maxStringLength:void 0;eo&&eo>1024&&(eo=1024),"string"==typeof er&&(er=[er]);try{let h=d.event,_=h&&h.target?h.target:h;V=htmlTreeAsString(_,{keyAttrs:er,maxStringLength:eo}),ee=getComponentName(_)}catch(h){V="<unknown>"}if(0===V.length)return;let ec={category:"ui.".concat(d.name),message:V};ee&&(ec.data={"ui.component_name":ee}),addBreadcrumb(ec,{event:d.event,name:d.name,global:d.global})})),d.xhr&&addXhrInstrumentationHandler(function(d){if(exports_getClient()!==h)return;let{startTimestamp:_,endTimestamp:V}=d,ee=d.xhr[tx];if(!_||!V||!ee)return;let{method:er,url:eo,status_code:ec,body:eh}=ee,ep={xhr:d.xhr,input:eh,startTimestamp:_,endTimestamp:V};addBreadcrumb({category:"xhr",data:{method:er,url:eo,status_code:ec},type:"http"},ep)}),d.fetch&&addFetchInstrumentationHandler(function(d){if(exports_getClient()!==h)return;let{startTimestamp:_,endTimestamp:V}=d;if(!(!V||d.fetchData.url.match(/sentry_key/)&&"POST"===d.fetchData.method)){if(d.error){let h=d.fetchData,ee={data:d.error,input:d.args,startTimestamp:_,endTimestamp:V};addBreadcrumb({category:"fetch",data:h,level:"error",type:"http"},ee)}else{let h=d.response,ee={...d.fetchData,status_code:h&&h.status},er={input:d.args,response:h,startTimestamp:_,endTimestamp:V};addBreadcrumb({category:"fetch",data:ee,type:"http"},er)}}}),d.history&&addHistoryInstrumentationHandler(function(d){if(exports_getClient()!==h)return;let _=d.from,V=d.to,ee=url_parseUrl(eC.location.href),er=_?url_parseUrl(_):void 0,eo=url_parseUrl(V);er&&er.path||(er=ee),ee.protocol===eo.protocol&&ee.host===eo.host&&(V=eo.relative),ee.protocol===er.protocol&&ee.host===er.host&&(_=er.relative),addBreadcrumb({category:"navigation",data:{from:_,to:V}})}),d.sentry&&h.on&&h.on("beforeSendEvent",function(d){exports_getClient()===h&&addBreadcrumb({category:"sentry.".concat("transaction"===d.type?"transaction":"event"),event_id:d.event_id,level:d.level,message:function(h){let{message:d,event_id:_}=h;if(d)return d;let V=getFirstException(h);return V?V.type&&V.value?"".concat(V.type,": ").concat(V.value):V.type||V.value||_||"<unknown>":_||"<unknown>"}(d)},{event:d})})}}});function applyExceptionGroupFieldsForParentException(h,d){h.mechanism=h.mechanism||{type:"generic",handled:!0},h.mechanism={...h.mechanism,is_exception_group:!0,exception_id:d}}function applyExceptionGroupFieldsForChildException(h,d,_,V){h.mechanism=h.mechanism||{type:"generic",handled:!0},h.mechanism={...h.mechanism,type:"chained",source:d,exception_id:_,parent_id:V}}let tC="LinkedErrors",tP=convertIntegrationFnToClass(tC,function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=h.limit||5,_=h.key||"cause";return{name:tC,setupOnce(){},preprocessEvent(h,V,ee){let er=ee.getOptions();!function(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:250,V=arguments.length>3?arguments[3]:void 0,ee=arguments.length>4?arguments[4]:void 0,er=arguments.length>5?arguments[5]:void 0,eo=arguments.length>6?arguments[6]:void 0;if(!er.exception||!er.exception.values||!eo||!isInstanceOf(eo.originalException,Error))return;let ec=er.exception.values.length>0?er.exception.values[er.exception.values.length-1]:void 0;ec&&(er.exception.values=(function aggregateExceptionsFromError(h,d,_,V,ee,er,eo,ec){if(er.length>=_+1)return er;let eh=[...er];if(isInstanceOf(V[ee],Error)){applyExceptionGroupFieldsForParentException(eo,ec);let er=h(d,V[ee]),ep=eh.length;applyExceptionGroupFieldsForChildException(er,ee,ep,ec),eh=aggregateExceptionsFromError(h,d,_,V[ee],ee,[er,...eh],er,ep)}return Array.isArray(V.errors)&&V.errors.forEach((V,er)=>{if(isInstanceOf(V,Error)){applyExceptionGroupFieldsForParentException(eo,ec);let ep=h(d,V),ef=eh.length;applyExceptionGroupFieldsForChildException(ep,"errors[".concat(er,"]"),ef,ec),eh=aggregateExceptionsFromError(h,d,_,V,ee,[ep,...eh],ep,ef)}}),eh})(h,d,ee,eo.originalException,V,er.exception.values,ec,0).map(h=>(h.value&&(h.value=truncate(h.value,_)),h)))}(exceptionFromError,er.stackParser,er.maxValueLength,_,d,h,V)}}}),tI="HttpContext",tR=convertIntegrationFnToClass(tI,()=>({name:tI,setupOnce(){},preprocessEvent(h){if(!eC.navigator&&!eC.location&&!eC.document)return;let d=h.request&&h.request.url||eC.location&&eC.location.href,{referrer:_}=eC.document||{},{userAgent:V}=eC.navigator||{},ee={...h.request&&h.request.headers,..._&&{Referer:_},...V&&{"User-Agent":V}},er={...h.request,...d&&{url:d},headers:ee};h.request=er}})),tA="Dedupe",t$=convertIntegrationFnToClass(tA,()=>{let h;return{name:tA,setupOnce(){},processEvent(d){if(d.type)return d;try{var _;if((_=h)&&(function(h,d){let _=h.message,V=d.message;return!!((_||V)&&(!_||V)&&(_||!V)&&_===V&&_isSameFingerprint(h,d)&&_isSameStacktrace(h,d))}(d,_)||function(h,d){let _=_getExceptionFromEvent(d),V=_getExceptionFromEvent(h);return!!(_&&V&&_.type===V.type&&_.value===V.value&&_isSameFingerprint(h,d)&&_isSameStacktrace(h,d))}(d,_)))return null}catch(h){}return h=d}}});function _isSameStacktrace(h,d){let _=_getFramesFromEvent(h),V=_getFramesFromEvent(d);if(!_&&!V)return!0;if(_&&!V||!_&&V||V.length!==_.length)return!1;for(let h=0;h<V.length;h++){let d=V[h],ee=_[h];if(d.filename!==ee.filename||d.lineno!==ee.lineno||d.colno!==ee.colno||d.function!==ee.function)return!1}return!0}function _isSameFingerprint(h,d){let _=h.fingerprint,V=d.fingerprint;if(!_&&!V)return!0;if(_&&!V||!_&&V)return!1;try{return!(_.join("")!==V.join(""))}catch(h){return!1}}function _getExceptionFromEvent(h){return h.exception&&h.exception.values&&h.exception.values[0]}function _getFramesFromEvent(h){let d=h.exception;if(d)try{return d.values[0].stacktrace.frames}catch(h){}}function createFrame(h,d,_,V){let ee={filename:h,function:d,in_app:!0};return void 0!==_&&(ee.lineno=_),void 0!==V&&(ee.colno=V),ee}let tN=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,tM=/\((\S*)(?::(\d+))(?::(\d+))\)/,tQ=[30,h=>{let d=tN.exec(h);if(d){let h=d[2]&&0===d[2].indexOf("eval");if(h){let h=tM.exec(d[2]);h&&(d[2]=h[1],d[3]=h[2],d[4]=h[3])}let[_,V]=extractSafariExtensionDetails(d[1]||"?",d[2]);return createFrame(V,_,d[3]?+d[3]:void 0,d[4]?+d[4]:void 0)}}],tD=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,tj=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,tL=[50,h=>{let d=tD.exec(h);if(d){let h=d[3]&&d[3].indexOf(" > eval")>-1;if(h){let h=tj.exec(d[3]);h&&(d[1]=d[1]||"eval",d[3]=h[1],d[4]=h[2],d[5]="")}let _=d[3],V=d[1]||"?";return[V,_]=extractSafariExtensionDetails(V,_),createFrame(_,V,d[4]?+d[4]:void 0,d[5]?+d[5]:void 0)}}],tF=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,tZ=[40,h=>{let d=tF.exec(h);return d?createFrame(d[2],d[1]||"?",+d[3],d[4]?+d[4]:void 0):void 0}],tV=createStackParser(...[tQ,tL,tZ]),extractSafariExtensionDetails=(h,d)=>{let _=-1!==h.indexOf("safari-extension"),V=-1!==h.indexOf("safari-web-extension");return _||V?[-1!==h.indexOf("@")?h.split("@")[0]:"?",_?"safari-extension:".concat(d):"safari-web-extension:".concat(d)]:[h,d]};function isRateLimited(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now();return(h[d]||h.all||0)>_}function updateRateLimits(h,d){let{statusCode:_,headers:V}=d,ee=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),er={...h},eo=V&&V["x-sentry-rate-limits"],ec=V&&V["retry-after"];if(eo)for(let h of eo.trim().split(",")){let[d,_]=h.split(":",2),V=parseInt(d,10),eo=(isNaN(V)?60:V)*1e3;if(_)for(let h of _.split(";"))er[h]=ee+eo;else er.all=ee+eo}else ec?er.all=ee+function(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now(),_=parseInt("".concat(h),10);if(!isNaN(_))return 1e3*_;let V=Date.parse("".concat(h));return isNaN(V)?6e4:V-d}(ec,ee):429===_&&(er.all=ee+6e4);return er}function createTransport(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(h){let d=[];function remove(h){return d.splice(d.indexOf(h),1)[0]}return{$:d,add:function(_){if(!(void 0===h||d.length<h))return rejectedSyncPromise(new SentryError("Not adding Promise because buffer limit was reached."));let V=_();return -1===d.indexOf(V)&&d.push(V),V.then(()=>remove(V)).then(null,()=>remove(V).then(null,()=>{})),V},drain:function(h){return new SyncPromise((_,V)=>{let ee=d.length;if(!ee)return _(!0);let er=setTimeout(()=>{h&&h>0&&_(!1)},h);d.forEach(h=>{resolvedSyncPromise(h).then(()=>{--ee||(clearTimeout(er),_(!0))},V)})})}}}(h.bufferSize||30),V={};function send(ee){let er=[];if(forEachEnvelopeItem(ee,(d,_)=>{let ee=e4[_];if(isRateLimited(V,ee)){let V=getEventForEnvelopeItem(d,_);h.recordDroppedEvent("ratelimit_backoff",ee,V)}else er.push(d)}),0===er.length)return resolvedSyncPromise();let eo=createEnvelope(ee[0],er),recordEnvelopeLoss=d=>{forEachEnvelopeItem(eo,(_,V)=>{let ee=getEventForEnvelopeItem(_,V);h.recordDroppedEvent(d,e4[V],ee)})};return _.add(()=>d({body:function(h,d){let[_,V]=h,ee=JSON.stringify(_);function append(h){"string"==typeof ee?ee="string"==typeof h?ee+h:[encodeUTF8(ee,d),h]:ee.push("string"==typeof h?encodeUTF8(h,d):h)}for(let h of V){let[d,_]=h;if(append("\n".concat(JSON.stringify(d),"\n")),"string"==typeof _||_ instanceof Uint8Array)append(_);else{let h;try{h=JSON.stringify(_)}catch(d){h=JSON.stringify(normalize(_))}append(h)}}return"string"==typeof ee?ee:function(h){let d=h.reduce((h,d)=>h+d.length,0),_=new Uint8Array(d),V=0;for(let d of h)_.set(d,V),V+=d.length;return _}(ee)}(eo,h.textEncoder)}).then(h=>(void 0!==h.statusCode&&(h.statusCode<200||h.statusCode),V=updateRateLimits(V,h),h),h=>{throw recordEnvelopeLoss("network_error"),h})).then(h=>h,h=>{if(h instanceof SentryError)return recordEnvelopeLoss("queue_overflow"),resolvedSyncPromise();throw h})}return send.__sentry__baseTransport__=!0,{send,flush:h=>_.drain(h)}}function getEventForEnvelopeItem(h,d){if("event"===d||"transaction"===d)return Array.isArray(h)?h[1]:void 0}function makeFetchTransport(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){if(ek)return ek;if(isNativeFetch(eC.fetch))return ek=eC.fetch.bind(eC);let h=eC.document,d=eC.fetch;if(h&&"function"==typeof h.createElement)try{let _=h.createElement("iframe");_.hidden=!0,h.head.appendChild(_);let V=_.contentWindow;V&&V.fetch&&(d=V.fetch),h.head.removeChild(_)}catch(h){}return ek=d.bind(eC)}(),_=0,V=0;return createTransport(h,function(ee){let er=ee.body.length;_+=er,V++;let eo={body:ee.body,method:"POST",referrerPolicy:"origin",headers:h.headers,keepalive:_<=6e4&&V<15,...h.fetchOptions};try{return d(h.url,eo).then(h=>(_-=er,V--,{statusCode:h.status,headers:{"x-sentry-rate-limits":h.headers.get("X-Sentry-Rate-Limits"),"retry-after":h.headers.get("Retry-After")}}))}catch(h){return ek=void 0,_-=er,V--,rejectedSyncPromise(h)}})}function makeXHRTransport(h){return createTransport(h,function(d){return new SyncPromise((_,V)=>{let ee=new XMLHttpRequest;for(let d in ee.onerror=V,ee.onreadystatechange=()=>{4===ee.readyState&&_({statusCode:ee.status,headers:{"x-sentry-rate-limits":ee.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":ee.getResponseHeader("Retry-After")}})},ee.open("POST",h.url),h.headers)Object.prototype.hasOwnProperty.call(h.headers,d)&&ee.setRequestHeader(d,h.headers[d]);ee.send(d.body)})})}let tB=[new e0,new e2,new tw,new tE,new tb,new tP,new t$,new tR],tW="sentry.source",tU="sentry.sample_rate",tz="sentry.op";let SpanRecorder=class SpanRecorder{add(h){this.spans.length>this._maxlen?h.spanRecorder=void 0:this.spans.push(h)}constructor(h=1e3){this._maxlen=h,this.spans=[]}};let Span=class Span{get name(){return this._name||""}set name(h){this.updateName(h)}get description(){return this._name}set description(h){this._name=h}get traceId(){return this._traceId}set traceId(h){this._traceId=h}get spanId(){return this._spanId}set spanId(h){this._spanId=h}get sampled(){return this._sampled}set sampled(h){this._sampled=h}get attributes(){return this._attributes}set attributes(h){this._attributes=h}get startTimestamp(){return this._startTime}set startTimestamp(h){this._startTime=h}get endTimestamp(){return this._endTime}set endTimestamp(h){this._endTime=h}get status(){return this._status}set status(h){this._status=h}get op(){return this._attributes[tz]}set op(h){this.setAttribute(tz,h)}spanContext(){let{_spanId:h,_traceId:d,_sampled:_}=this;return{spanId:h,traceId:d,traceFlags:_?1:0}}startChild(h){let d=new Span({...h,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});d.spanRecorder=this.spanRecorder,d.spanRecorder&&d.spanRecorder.add(d);let _=getRootSpan(this);return d.transaction=_,d}setTag(h,d){return this.tags={...this.tags,[h]:d},this}setData(h,d){return this.data={...this.data,[h]:d},this}setAttribute(h,d){void 0===d?delete this._attributes[h]:this._attributes[h]=d}setAttributes(h){Object.keys(h).forEach(d=>this.setAttribute(d,h[d]))}setStatus(h){return this._status=h,this}setHttpStatus(h){this.setTag("http.status_code",String(h)),this.setData("http.response.status_code",h);let d=function(h){if(h<400&&h>=100)return"ok";if(h>=400&&h<500)switch(h){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(h>=500&&h<600)switch(h){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(h);return"unknown_error"!==d&&this.setStatus(d),this}setName(h){this.updateName(h)}updateName(h){return this._name=h,this}isSuccess(){return"ok"===this._status}finish(h){return this.end(h)}end(h){!this._endTime&&(getRootSpan(this),this._endTime=spanUtils_spanTimeInputToSeconds(h))}toTraceparent(){return spanToTraceHeader(this)}toContext(){return object_dropUndefinedKeys({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this.parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(h){return this.data=h.data||{},this._name=h.name||h.description,this._endTime=h.endTimestamp,this.op=h.op,this.parentSpanId=h.parentSpanId,this._sampled=h.sampled,this._spanId=h.spanId||this._spanId,this._startTime=h.startTimestamp||this._startTime,this._status=h.status,this.tags=h.tags||{},this._traceId=h.traceId||this._traceId,this}getTraceContext(){return spanToTraceContext(this)}getSpanJSON(){return object_dropUndefinedKeys({data:this._getData(),description:this._name,op:this._attributes[tz],parent_span_id:this.parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this.origin})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){let{data:h,_attributes:d}=this,_=Object.keys(h).length>0,V=Object.keys(d).length>0;return _||V?_&&V?{...h,...d}:_?h:d:void 0}constructor(h={}){this._traceId=h.traceId||misc_uuid4(),this._spanId=h.spanId||misc_uuid4().substring(16),this._startTime=h.startTimestamp||eN(),this.tags=h.tags?{...h.tags}:{},this.data=h.data?{...h.data}:{},this._attributes=h.attributes?{...h.attributes}:{},this.instrumenter=h.instrumenter||"sentry",this.origin=h.origin||"manual",this._name=h.name||h.description,h.parentSpanId&&(this.parentSpanId=h.parentSpanId),"sampled"in h&&(this._sampled=h.sampled),h.op&&this.setAttribute(tz,h.op),h.status&&(this._status=h.status),h.endTimestamp&&(this._endTime=h.endTimestamp)}};let Transaction=class Transaction extends Span{get name(){return this._name}set name(h){this.setName(h)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[tW]&&{source:this._attributes[tW]},...this._attributes[tU]&&{sampleRate:this._attributes[tU]}}}set metadata(h){this._metadata=h}setName(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"custom";this._name=h,this.setAttribute(tW,d)}updateName(h){return this._name=h,this}initSpanRecorder(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1e3;this.spanRecorder||(this.spanRecorder=new SpanRecorder(h)),this.spanRecorder.add(this)}setContext(h,d){null===d?delete this._contexts[h]:this._contexts[h]=d}setMeasurement(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";this._measurements[h]={value:d,unit:_}}setMetadata(h){this._metadata={...this._metadata,...h}}end(h){let d=spanUtils_spanTimeInputToSeconds(h),_=this._finishTransaction(d);if(_)return this._hub.captureEvent(_)}toContext(){let h=super.toContext();return object_dropUndefinedKeys({...h,name:this._name,trimEnd:this._trimEnd})}updateWithContext(h){return super.updateWithContext(h),this._name=h.name||"",this._trimEnd=h.trimEnd,this}getDynamicSamplingContext(){return getDynamicSamplingContextFromSpan(this)}setHub(h){this._hub=h}_finishTransaction(h){if(void 0!==this._endTime)return;this._name||(this._name="<unlabeled transaction>"),super.end(h);let d=this._hub.getClient();if(d&&d.emit&&d.emit("finishTransaction",this),!0!==this._sampled){d&&d.recordDroppedEvent("sample_rate","transaction");return}let _=this.spanRecorder?this.spanRecorder.spans.filter(h=>h!==this&&spanUtils_spanToJSON(h).timestamp):[];if(this._trimEnd&&_.length>0){let h=_.map(h=>spanUtils_spanToJSON(h).timestamp).filter(Boolean);this._endTime=h.reduce((h,d)=>h>d?h:d)}let{metadata:V}=this,{source:ee}=V,er={contexts:{...this._contexts,trace:spanToTraceContext(this)},spans:_,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...V,dynamicSamplingContext:getDynamicSamplingContextFromSpan(this)},...ee&&{transaction_info:{source:ee}}},eo=Object.keys(this._measurements).length>0;return eo&&(er.measurements=this._measurements),er}constructor(h,d){super(h),this._measurements={},this._contexts={},this._hub=d||hub_getCurrentHub(),this._name=h.name||"",this._metadata={...h.metadata},this._trimEnd=h.trimEnd,this.transaction=this;let _=this._metadata.dynamicSamplingContext;_&&(this._frozenDynamicSamplingContext={..._})}};let tq={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3};let IdleTransactionSpanRecorder=class IdleTransactionSpanRecorder extends SpanRecorder{add(h){if(h.spanContext().spanId!==this.transactionSpanId){var d=this;let _=h.end;h.end=function(){for(var V=arguments.length,ee=Array(V),er=0;er<V;er++)ee[er]=arguments[er];return d._popActivity(h.spanContext().spanId),_.apply(h,ee)},void 0===spanUtils_spanToJSON(h).timestamp&&this._pushActivity(h.spanContext().spanId)}super.add(h)}constructor(h,d,_,V){super(V),this._pushActivity=h,this._popActivity=d,this.transactionSpanId=_}};let IdleTransaction=class IdleTransaction extends Transaction{end(h){let d=spanUtils_spanTimeInputToSeconds(h);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){for(let h of this._beforeFinishCallbacks)h(this,d);this.spanRecorder.spans=this.spanRecorder.spans.filter(h=>{if(h.spanContext().spanId===this.spanContext().spanId)return!0;spanUtils_spanToJSON(h).timestamp||(h.setStatus("cancelled"),h.end(d));let{start_timestamp:_,timestamp:V}=spanUtils_spanToJSON(h),ee=_&&_<d,er=(this._finalTimeout+this._idleTimeout)/1e3;return ee&&V&&_&&V-_<er})}if(this._onScope){let h=this._idleHub.getScope();h.getTransaction()===this&&h.setSpan(void 0)}return super.end(h)}registerBeforeFinishCallback(h){this._beforeFinishCallbacks.push(h)}initSpanRecorder(h){this.spanRecorder||(this.spanRecorder=new IdleTransactionSpanRecorder(h=>{this._finished||this._pushActivity(h)},h=>{this._finished||this._popActivity(h)},this.spanContext().spanId,h),this._pingHeartbeat()),this.spanRecorder.add(this)}cancelIdleTimeout(h){let{restartOnChildSpanChange:d}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{restartOnChildSpanChange:!0};this._idleTimeoutCanceledPermanently=!1===d,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason="cancelled",this.end(h)))}setFinishReason(h){this._finishReason=h}sendAutoFinishSignal(){this._autoFinishAllowed||(this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(h){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason="idleTimeout",this.end(h))},this._idleTimeout)}_pushActivity(h){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),this.activities[h]=!0}_popActivity(h){if(this.activities[h]&&delete this.activities[h],0===Object.keys(this.activities).length){let h=eN();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason="cancelled",this.end(h)):this._restartIdleTimeout(h+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;let h=Object.keys(this.activities).join("");h===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=h,this._heartbeatCounter>=3?this._autoFinishAllowed&&(this.setStatus("deadline_exceeded"),this._finishReason="heartbeatFailed",this.end()):this._pingHeartbeat()}_pingHeartbeat(){setTimeout(()=>{this._beat()},this._heartbeatInterval)}constructor(h,d,_=tq.idleTimeout,V=tq.finalTimeout,ee=tq.heartbeatInterval,er=!1,eo=!1){super(h,d),this._idleHub=d,this._idleTimeout=_,this._finalTimeout=V,this._heartbeatInterval=ee,this._onScope=er,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason="externalFinish",this._autoFinishAllowed=!eo,er&&d.getScope().setSpan(this),eo||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason="finalTimeout",this.end())},this._finalTimeout)}};function getActiveTransaction(h){let d=h||hub_getCurrentHub(),_=d.getScope();return _.getTransaction()}let tX=!1;function errorCallback(){let h=getActiveTransaction();h&&h.setStatus("internal_error")}function sampleTransaction(h,d,_){var V;let ee;return hasTracingEnabled_hasTracingEnabled(d)?void 0!==h.sampled?h.setAttribute(tU,Number(h.sampled)):("function"==typeof d.tracesSampler?(ee=d.tracesSampler(_),h.setAttribute(tU,Number(ee))):void 0!==_.parentSampled?ee=_.parentSampled:void 0!==d.tracesSampleRate?(ee=d.tracesSampleRate,h.setAttribute(tU,Number(ee))):(ee=1,h.setAttribute(tU,ee)),is_isNaN(V=ee)||"number"!=typeof V&&"boolean"!=typeof V||V<0||V>1||!ee)?h.sampled=!1:(h.sampled=Math.random()<ee,h.sampled):h.sampled=!1,h}function traceHeaders(){let h=this.getScope(),d=h.getSpan();return d?{"sentry-trace":spanToTraceHeader(d)}:{}}function _startTransaction(h,d){let _=this.getClient(),V=_&&_.getOptions()||{},ee=V.instrumenter||"sentry",er=h.instrumenter||"sentry";ee!==er&&(h.sampled=!1);let eo=new Transaction(h,this);return(eo=sampleTransaction(eo,V,{parentSampled:h.parentSampled,transactionContext:h,...d})).isRecording()&&eo.initSpanRecorder(V._experiments&&V._experiments.maxSpans),_&&_.emit&&_.emit("startTransaction",eo),eo}function startIdleTransaction(h,d,_,V,ee,er,eo){let ec=arguments.length>7&&void 0!==arguments[7]&&arguments[7],eh=h.getClient(),ep=eh&&eh.getOptions()||{},ef=new IdleTransaction(d,h,_,V,eo,ee,ec);return(ef=sampleTransaction(ef,ep,{parentSampled:d.parentSampled,transactionContext:d,...er})).isRecording()&&ef.initSpanRecorder(ep._experiments&&ep._experiments.maxSpans),eh&&eh.emit&&eh.emit("startTransaction",ef),ef}errorCallback.tag="sentry_tracingErrorCallback";let bindReporter=(h,d,_)=>{let V,ee;return er=>{d.value>=0&&(er||_)&&((ee=d.value-(V||0))||void 0===V)&&(V=d.value,d.delta=ee,h(d))}},generateUniqueID=()=>"v3-".concat(Date.now(),"-").concat(Math.floor(Math.random()*(9e12-1))+1e12),getNavigationEntryFromPerformanceTiming=()=>{let h=eC.performance.timing,d=eC.performance.navigation.type,_={entryType:"navigation",startTime:0,type:2==d?"back_forward":1===d?"reload":"navigate"};for(let d in h)"navigationStart"!==d&&"toJSON"!==d&&(_[d]=Math.max(h[d]-h.navigationStart,0));return _},getNavigationEntry=()=>eC.__WEB_VITALS_POLYFILL__?eC.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||getNavigationEntryFromPerformanceTiming()):eC.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],getActivationStart=()=>{let h=getNavigationEntry();return h&&h.activationStart||0},initMetric=(h,d)=>{let _=getNavigationEntry(),V="navigate";return _&&(V=eC.document.prerendering||getActivationStart()>0?"prerender":_.type.replace(/_/g,"-")),{name:h,value:void 0===d?-1:d,rating:"good",delta:0,entries:[],id:generateUniqueID(),navigationType:V}},observe=(h,d,_)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(h)){let V=new PerformanceObserver(h=>{d(h.getEntries())});return V.observe(Object.assign({type:h,buffered:!0},_||{})),V}}catch(h){}},onHidden=(h,d)=>{let onHiddenOrPageHide=_=>{("pagehide"===_.type||"hidden"===eC.document.visibilityState)&&(h(_),d&&(removeEventListener("visibilitychange",onHiddenOrPageHide,!0),removeEventListener("pagehide",onHiddenOrPageHide,!0)))};addEventListener("visibilitychange",onHiddenOrPageHide,!0),addEventListener("pagehide",onHiddenOrPageHide,!0)},onCLS=h=>{let d;let _=initMetric("CLS",0),V=0,ee=[],handleEntries=h=>{h.forEach(h=>{if(!h.hadRecentInput){let er=ee[0],eo=ee[ee.length-1];V&&0!==ee.length&&h.startTime-eo.startTime<1e3&&h.startTime-er.startTime<5e3?(V+=h.value,ee.push(h)):(V=h.value,ee=[h]),V>_.value&&(_.value=V,_.entries=ee,d&&d())}})},er=observe("layout-shift",handleEntries);if(er){d=bindReporter(h,_);let stopListening=()=>{handleEntries(er.takeRecords()),d(!0)};return onHidden(stopListening),stopListening}},tY=-1,initHiddenTime=()=>"hidden"!==eC.document.visibilityState||eC.document.prerendering?1/0:0,trackChanges=()=>{onHidden(h=>{let{timeStamp:d}=h;tY=d},!0)},getVisibilityWatcher=()=>(tY<0&&(tY=initHiddenTime(),trackChanges()),{get firstHiddenTime(){return tY}}),onFID=h=>{let d;let _=getVisibilityWatcher(),V=initMetric("FID"),handleEntry=h=>{h.startTime<_.firstHiddenTime&&(V.value=h.processingStart-h.startTime,V.entries.push(h),d(!0))},handleEntries=h=>{h.forEach(handleEntry)},ee=observe("first-input",handleEntries);d=bindReporter(h,V),ee&&onHidden(()=>{handleEntries(ee.takeRecords()),ee.disconnect()},!0)},tG={},onLCP=h=>{let d;let _=getVisibilityWatcher(),V=initMetric("LCP"),handleEntries=h=>{let ee=h[h.length-1];if(ee){let h=Math.max(ee.startTime-getActivationStart(),0);h<_.firstHiddenTime&&(V.value=h,V.entries=[ee],d())}},ee=observe("largest-contentful-paint",handleEntries);if(ee){d=bindReporter(h,V);let stopListening=()=>{tG[V.id]||(handleEntries(ee.takeRecords()),ee.disconnect(),tG[V.id]=!0,d(!0))};return["keydown","click"].forEach(h=>{addEventListener(h,stopListening,{once:!0,capture:!0})}),onHidden(stopListening,!0),stopListening}},tH={},tK={};function addLcpInstrumentationHandler(h){return addMetricObserver("lcp",h,instrumentLcp,em)}function addPerformanceInstrumentationHandler(h,d){return instrument_addHandler(h,d),tK[h]||(function(h){let d={};"event"===h&&(d.durationThreshold=0),observe(h,d=>{instrument_triggerHandlers(h,{entries:d})},d)}(h),tK[h]=!0),getCleanupCallback(h,d)}function instrument_triggerHandlers(h,d){let _=tH[h];if(_&&_.length)for(let h of _)try{h(d)}catch(h){}}function instrumentCls(){onCLS(h=>{instrument_triggerHandlers("cls",{metric:h}),ep=h})}function instrumentFid(){onFID(h=>{instrument_triggerHandlers("fid",{metric:h}),ef=h})}function instrumentLcp(){onLCP(h=>{instrument_triggerHandlers("lcp",{metric:h}),em=h})}function addMetricObserver(h,d,_,V){return instrument_addHandler(h,d),tK[h]||(_(),tK[h]=!0),V&&d({metric:V}),getCleanupCallback(h,d)}function instrument_addHandler(h,d){tH[h]=tH[h]||[],tH[h].push(d)}function getCleanupCallback(h,d){return()=>{let _=tH[h];if(!_)return;let V=_.indexOf(d);-1!==V&&_.splice(V,1)}}function isMeasurementValue(h){return"number"==typeof h&&isFinite(h)}function _startChild(h,d){let{startTimestamp:_,...V}=d;return _&&h.startTimestamp>_&&(h.startTimestamp=_),h.startChild({startTimestamp:_,...V})}function msToSec(h){return h/1e3}function getBrowserPerformanceAPI(){return eC&&eC.addEventListener&&eC.performance}let tJ=0,t0={};function _addPerformanceNavigationTiming(h,d,_,V,ee,er){let eo=er?d[er]:d["".concat(_,"End")],ec=d["".concat(_,"Start")];ec&&eo&&_startChild(h,{op:"browser",origin:"auto.browser.browser.metrics",description:ee||_,startTimestamp:V+msToSec(ec),endTimestamp:V+msToSec(eo)})}function setResourceEntrySizeData(h,d,_,V){let ee=d[_];null!=ee&&ee<2147483647&&(h[V]=ee)}function getActiveSpan(){return exports_getCurrentScope().getSpan()}let t1=["localhost",/^\/(?!\/)/],t2={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:t1,tracePropagationTargets:t1};function addHTTPTimings(h){let{url:d}=spanUtils_spanToJSON(h).data||{};if(!d||"string"!=typeof d)return;let _=addPerformanceInstrumentationHandler("resource",V=>{let{entries:ee}=V;ee.forEach(V=>{if("resource"===V.entryType&&"initiatorType"in V&&"string"==typeof V.nextHopProtocol&&("fetch"===V.initiatorType||"xmlhttprequest"===V.initiatorType)&&V.name.endsWith(d)){let d=function(h){let{name:d,version:_}=function(h){let d="unknown",_="unknown",V="";for(let ee of h){if("/"===ee){[d,_]=h.split("/");break}if(!isNaN(Number(ee))){d="h"===V?"http":V,_=h.split(V)[1];break}V+=ee}return V===h&&(d=V),{name:d,version:_}}(h.nextHopProtocol),V=[];return(V.push(["network.protocol.version",_],["network.protocol.name",d]),eM)?[...V,["http.request.redirect_start",getAbsoluteTime(h.redirectStart)],["http.request.fetch_start",getAbsoluteTime(h.fetchStart)],["http.request.domain_lookup_start",getAbsoluteTime(h.domainLookupStart)],["http.request.domain_lookup_end",getAbsoluteTime(h.domainLookupEnd)],["http.request.connect_start",getAbsoluteTime(h.connectStart)],["http.request.secure_connection_start",getAbsoluteTime(h.secureConnectionStart)],["http.request.connection_end",getAbsoluteTime(h.connectEnd)],["http.request.request_start",getAbsoluteTime(h.requestStart)],["http.request.response_start",getAbsoluteTime(h.responseStart)],["http.request.response_end",getAbsoluteTime(h.responseEnd)]]:V}(V);d.forEach(d=>h.setAttribute(...d)),setTimeout(_)}})})}function getAbsoluteTime(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return((eM||performance.timeOrigin)+h)/1e3}function setHeaderOnXhr(h,d,_){try{h.setRequestHeader("sentry-trace",d),_&&h.setRequestHeader(eQ,_)}catch(h){}}let t5={...tq,markBackgroundTransactions:!0,routingInstrumentation:function(h){let d,_=!(arguments.length>1)||void 0===arguments[1]||arguments[1],V=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!eC||!eC.location)return;let ee=eC.location.href;_&&(d=h({name:eC.location.pathname,startTimestamp:eM?eM/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),V&&addHistoryInstrumentationHandler(_=>{let{to:V,from:er}=_;if(void 0===er&&ee&&-1!==ee.indexOf(V)){ee=void 0;return}er!==V&&(ee=void 0,d&&d.end(),d=h({name:eC.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,_experiments:{},...t2};let BrowserTracing=class BrowserTracing{setupOnce(h,d){this._getCurrentHub=d;let _=d(),V=_.getClient(),ee=V&&V.getOptions(),{routingInstrumentation:er,startTransactionOnLocationChange:eo,startTransactionOnPageLoad:ec,markBackgroundTransactions:eh,traceFetch:ep,traceXHR:ef,shouldCreateSpanForRequest:em,enableHTTPTimings:eg,_experiments:eO}=this.options,ey=ee&&ee.tracePropagationTargets,ev=ey||this.options.tracePropagationTargets;er(h=>{let _=this._createRouteTransaction(h);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(_,h,d),_},ec,eo),eh&&eC&&eC.document&&eC.document.addEventListener("visibilitychange",()=>{let h=getActiveTransaction();if(eC.document.hidden&&h){let{op:d,status:_}=spanUtils_spanToJSON(h);_||h.setStatus("cancelled"),h.setTag("visibilitychange","document.hidden"),h.end()}}),eO.enableInteractions&&this._registerInteractionListener(),function(h){let{traceFetch:d,traceXHR:_,tracePropagationTargets:V,tracingOrigins:ee,shouldCreateSpanForRequest:er,enableHTTPTimings:eo}={traceFetch:t2.traceFetch,traceXHR:t2.traceXHR,...h},ec="function"==typeof er?er:h=>!0,shouldAttachHeadersWithTargets=h=>stringMatchesSomePattern(h,V||ee||t1),eh={};d&&addFetchInstrumentationHandler(h=>{let d=function(h,d,_,V){let ee=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"auto.http.browser";if(!hasTracingEnabled_hasTracingEnabled()||!h.fetchData)return;let er=d(h.fetchData.url);if(h.endTimestamp&&er){let d=h.fetchData.__span;if(!d)return;let _=V[d];if(_){if(h.response){_.setHttpStatus(h.response.status);let d=h.response&&h.response.headers&&h.response.headers.get("content-length");if(d){let h=parseInt(d);h>0&&_.setAttribute("http.response_content_length",h)}}else h.error&&_.setStatus("internal_error");_.end(),delete V[d]}return}let eo=exports_getCurrentScope(),ec=exports_getClient(),eh=getActiveSpan(),{method:ep,url:ef}=h.fetchData,em=er&&eh?eh.startChild({data:{url:ef,type:"fetch","http.method":ep},description:"".concat(ep," ").concat(ef),op:"http.client",origin:ee}):void 0;if(em&&(h.fetchData.__span=em.spanContext().spanId,V[em.spanContext().spanId]=em),_(h.fetchData.url)&&ec){let d=h.args[0];h.args[1]=h.args[1]||{};let _=h.args[1];_.headers=function(h,d,_,V,ee){let er=ee||_.getSpan(),eo=er&&getRootSpan(er),{traceId:ec,sampled:eh,dsc:ep}=_.getPropagationContext(),ef=er?spanToTraceHeader(er):generateSentryTraceHeader(ec,void 0,eh),em=eo?getDynamicSamplingContextFromSpan(eo):ep||getDynamicSamplingContextFromClient(ec,d,_),eg=dynamicSamplingContextToSentryBaggageHeader(em),eO=V.headers||("undefined"!=typeof Request&&isInstanceOf(h,Request)?h.headers:void 0);if(!eO)return{"sentry-trace":ef,baggage:eg};if("undefined"!=typeof Headers&&isInstanceOf(eO,Headers)){let h=new Headers(eO);return h.append("sentry-trace",ef),eg&&h.append(eQ,eg),h}if(Array.isArray(eO)){let h=[...eO,["sentry-trace",ef]];return eg&&h.push([eQ,eg]),h}{let h="baggage"in eO?eO.baggage:void 0,d=[];return Array.isArray(h)?d.push(...h):h&&d.push(h),eg&&d.push(eg),{...eO,"sentry-trace":ef,baggage:d.length>0?d.join(","):void 0}}}(d,ec,eo,_,em)}return em}(h,ec,shouldAttachHeadersWithTargets,eh);eo&&d&&addHTTPTimings(d)}),_&&addXhrInstrumentationHandler(h=>{let d=function(h,d,_,V){let ee=h.xhr,er=ee&&ee[tx];if(!hasTracingEnabled_hasTracingEnabled()||!ee||ee.__sentry_own_request__||!er)return;let eo=d(er.url);if(h.endTimestamp&&eo){let h=ee.__sentry_xhr_span_id__;if(!h)return;let d=V[h];d&&void 0!==er.status_code&&(d.setHttpStatus(er.status_code),d.end(),delete V[h]);return}let ec=exports_getCurrentScope(),eh=getActiveSpan(),ep=eo&&eh?eh.startChild({data:{type:"xhr","http.method":er.method,url:er.url},description:"".concat(er.method," ").concat(er.url),op:"http.client",origin:"auto.http.browser"}):void 0;if(ep&&(ee.__sentry_xhr_span_id__=ep.spanContext().spanId,V[ee.__sentry_xhr_span_id__]=ep),ee.setRequestHeader&&_(er.url)){if(ep){let h=ep&&getRootSpan(ep),d=h&&getDynamicSamplingContextFromSpan(h),_=dynamicSamplingContextToSentryBaggageHeader(d);setHeaderOnXhr(ee,spanToTraceHeader(ep),_)}else{let h=exports_getClient(),{traceId:d,sampled:_,dsc:V}=ec.getPropagationContext(),er=generateSentryTraceHeader(d,void 0,_),eo=V||(h?getDynamicSamplingContextFromClient(d,h,ec):void 0),eh=dynamicSamplingContextToSentryBaggageHeader(eo);setHeaderOnXhr(ee,er,eh)}}return ep}(h,ec,shouldAttachHeadersWithTargets,eh);eo&&d&&addHTTPTimings(d)})}({traceFetch:ep,traceXHR:ef,tracePropagationTargets:ev,shouldCreateSpanForRequest:em,enableHTTPTimings:eg})}_createRouteTransaction(h){if(!this._getCurrentHub)return;let d=this._getCurrentHub(),{beforeNavigate:_,idleTimeout:V,finalTimeout:ee,heartbeatInterval:er}=this.options,eo="pageload"===h.op,ec=eo?getMetaContent("sentry-trace"):"",eh=eo?getMetaContent("baggage"):"",{traceparentData:ep,dynamicSamplingContext:ef,propagationContext:em}=tracing_tracingContextFromHeaders(ec,eh),ey={...h,...ep,metadata:{...h.metadata,dynamicSamplingContext:ep&&!ef?{}:ef},trimEnd:!0},ev="function"==typeof _?_(ey):ey,eS=void 0===ev?{...ey,sampled:!1}:ev;eS.metadata=eS.name!==ey.name?{...eS.metadata,source:"custom"}:eS.metadata,this._latestRouteName=eS.name;let e_=h.data&&h.data[tW],ew=eS.metadata&&eS.metadata.source;this._latestRouteSource=e_||ew,eS.sampled;let{location:ex}=eC,ek=startIdleTransaction(d,eS,V,ee,!0,{location:ex},er,eo);eo&&(eC.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(eC.document.readyState)&&ek.sendAutoFinishSignal()}),["interactive","complete"].includes(eC.document.readyState)&&ek.sendAutoFinishSignal());let eT=d.getScope();return eo&&ep?eT.setPropagationContext(em):eT.setPropagationContext({traceId:ek.spanContext().traceId,spanId:ek.spanContext().spanId,parentSpanId:ek.parentSpanId,sampled:spanIsSampled(ek)}),ek.registerBeforeFinishCallback(h=>{this._collectWebVitals(),function(h){let d,_;let V=getBrowserPerformanceAPI();if(!V||!eC.performance.getEntries||!eM)return;let ee=msToSec(eM),er=V.getEntries(),{op:eo,start_timestamp:ec}=spanUtils_spanToJSON(h);if(er.slice(tJ).forEach(V=>{let er=msToSec(V.startTime),eo=msToSec(V.duration);if("navigation"!==h.op||!ec||!(ee+er<ec))switch(V.entryType){case"navigation":["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(d=>{_addPerformanceNavigationTiming(h,V,d,ee)}),_addPerformanceNavigationTiming(h,V,"secureConnection",ee,"TLS/SSL","connectEnd"),_addPerformanceNavigationTiming(h,V,"fetch",ee,"cache","domainLookupStart"),_addPerformanceNavigationTiming(h,V,"domainLookup",ee,"DNS"),V.responseEnd&&(_startChild(h,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:ee+msToSec(V.requestStart),endTimestamp:ee+msToSec(V.responseEnd)}),_startChild(h,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:ee+msToSec(V.responseStart),endTimestamp:ee+msToSec(V.responseEnd)})),d=ee+msToSec(V.responseStart),_=ee+msToSec(V.requestStart);break;case"mark":case"paint":case"measure":{(function(h,d,_,V,ee){let er=ee+_;_startChild(h,{description:d.name,endTimestamp:er+V,op:d.entryType,origin:"auto.resource.browser.metrics",startTimestamp:er})})(h,V,er,eo,ee);let d=getVisibilityWatcher(),_=V.startTime<d.firstHiddenTime;"first-paint"===V.name&&_&&(t0.fp={value:V.startTime,unit:"millisecond"}),"first-contentful-paint"===V.name&&_&&(t0.fcp={value:V.startTime,unit:"millisecond"});break}case"resource":(function(h,d,_,V,ee,er){if("xmlhttprequest"===d.initiatorType||"fetch"===d.initiatorType)return;let eo=url_parseUrl(_),ec={};setResourceEntrySizeData(ec,d,"transferSize","http.response_transfer_size"),setResourceEntrySizeData(ec,d,"encodedBodySize","http.response_content_length"),setResourceEntrySizeData(ec,d,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in d&&(ec["resource.render_blocking_status"]=d.renderBlockingStatus),eo.protocol&&(ec["url.scheme"]=eo.protocol.split(":").pop()),eo.host&&(ec["server.address"]=eo.host),ec["url.same_origin"]=_.includes(eC.location.origin);let eh=er+V,ep=eh+ee;_startChild(h,{description:_.replace(eC.location.origin,""),endTimestamp:ep,op:d.initiatorType?"resource.".concat(d.initiatorType):"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:eh,data:ec})})(h,V,V.name,er,eo,ee)}}),tJ=Math.max(er.length-1,0),function(h){let d=eC.navigator;if(!d)return;let _=d.connection;_&&(_.effectiveType&&h.setTag("effectiveConnectionType",_.effectiveType),_.type&&h.setTag("connectionType",_.type),isMeasurementValue(_.rtt)&&(t0["connection.rtt"]={value:_.rtt,unit:"millisecond"})),isMeasurementValue(d.deviceMemory)&&h.setTag("deviceMemory","".concat(d.deviceMemory," GB")),isMeasurementValue(d.hardwareConcurrency)&&h.setTag("hardwareConcurrency",String(d.hardwareConcurrency))}(h),"pageload"===eo){"number"==typeof d&&ec&&(t0.ttfb={value:(d-ec)*1e3,unit:"millisecond"},"number"==typeof _&&_<=d&&(t0["ttfb.requestTime"]={value:(d-_)*1e3,unit:"millisecond"})),["fcp","fp","lcp"].forEach(h=>{if(!t0[h]||!ec||ee>=ec)return;let d=t0[h].value,_=ee+msToSec(d),V=Math.abs((_-ec)*1e3);t0[h].value=V});let V=t0["mark.fid"];V&&t0.fid&&(_startChild(h,{description:"first input delay",endTimestamp:V.value+msToSec(t0.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:V.value}),delete t0["mark.fid"]),"fcp"in t0||delete t0.cls,Object.keys(t0).forEach(h=>{!function(h,d,_){let V=getActiveTransaction();V&&V.setMeasurement(h,d,_)}(h,t0[h].value,t0[h].unit)}),eg&&(eg.element&&h.setTag("lcp.element",htmlTreeAsString(eg.element)),eg.id&&h.setTag("lcp.id",eg.id),eg.url&&h.setTag("lcp.url",eg.url.trim().slice(0,200)),h.setTag("lcp.size",eg.size)),eO&&eO.sources&&eO.sources.forEach((d,_)=>h.setTag("cls.source.".concat(_+1),htmlTreeAsString(d.node)))}eg=void 0,eO=void 0,t0={}}(h)}),ek}_registerInteractionListener(){let h;let registerInteractionTransaction=()=>{let{idleTimeout:d,finalTimeout:_,heartbeatInterval:V}=this.options,ee=getActiveTransaction();if(ee&&ee.op&&["navigation","pageload"].includes(ee.op)||(h&&(h.setFinishReason("interactionInterrupted"),h.end(),h=void 0),!this._getCurrentHub)||!this._latestRouteName)return;let er=this._getCurrentHub(),{location:eo}=eC,ec={name:this._latestRouteName,op:"ui.action.click",trimEnd:!0,data:{[tW]:this._latestRouteSource||"url"}};h=startIdleTransaction(er,ec,d,_,!0,{location:eo},V)};["click"].forEach(h=>{addEventListener(h,registerInteractionTransaction,{once:!1,capture:!0})})}constructor(h){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,function(){let h=getMainCarrier();h.__SENTRY__&&(h.__SENTRY__.extensions=h.__SENTRY__.extensions||{},h.__SENTRY__.extensions.startTransaction||(h.__SENTRY__.extensions.startTransaction=_startTransaction),h.__SENTRY__.extensions.traceHeaders||(h.__SENTRY__.extensions.traceHeaders=traceHeaders),tX||(tX=!0,addGlobalErrorInstrumentationHandler(errorCallback),addGlobalUnhandledRejectionInstrumentationHandler(errorCallback)))}(),this.options={...t5,...h},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),h&&!h.tracePropagationTargets&&h.tracingOrigins&&(this.options.tracePropagationTargets=h.tracingOrigins),this._collectWebVitals=function(){let h=getBrowserPerformanceAPI();if(h&&eM){h.mark&&eC.performance.mark("sentry-tracing-init");let d=addMetricObserver("fid",h=>{let{metric:d}=h,_=d.entries.pop();if(!_)return;let V=msToSec(eM),ee=msToSec(_.startTime);t0.fid={value:d.value,unit:"millisecond"},t0["mark.fid"]={value:V+ee,unit:"second"}},instrumentFid,ef),_=addMetricObserver("cls",h=>{let{metric:d}=h,_=d.entries.pop();_&&(t0.cls={value:d.value,unit:""},eO=_)},instrumentCls,ep),V=addLcpInstrumentationHandler(h=>{let{metric:d}=h,_=d.entries.pop();_&&(t0.lcp={value:d.value,unit:"millisecond"},eg=_)});return()=>{d(),_(),V()}}return()=>void 0}(),this.options.enableLongTask&&addPerformanceInstrumentationHandler("longtask",h=>{let{entries:d}=h;for(let h of d){let d=getActiveTransaction();if(!d)return;let _=msToSec(eM+h.startTime),V=msToSec(h.duration);d.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:_,endTimestamp:_+V})}}),this.options._experiments.enableInteractions&&addPerformanceInstrumentationHandler("event",h=>{let{entries:d}=h;for(let h of d){let d=getActiveTransaction();if(!d)return;if("click"===h.name){let _=msToSec(eM+h.startTime),V=msToSec(h.duration),ee={description:htmlTreeAsString(h.target),op:"ui.interaction.".concat(h.name),origin:"auto.ui.browser.metrics",startTimestamp:_,endTimestamp:_+V},er=getComponentName(h.target);er&&(ee.attributes={"ui.component_name":er}),d.startChild(ee)}}})}};function getMetaContent(h){var d;let _=(d="meta[name=".concat(h,"]"),eC.document&&eC.document.querySelector?eC.document.querySelector(d):null);return _?_.getAttribute("content"):void 0}function addOrUpdateIntegration(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Array.isArray(d)?addOrUpdateIntegrationInArray(h,d,_):V=>{let ee=d(V);if(h.allowExclusionByUser){let d=ee.find(d=>d.name===h.name);if(!d)return ee}return addOrUpdateIntegrationInArray(h,ee,_)}}function addOrUpdateIntegrationInArray(h,d,_){let V=d.find(d=>d.name===h.name);if(V){for(let[h,d]of Object.entries(_))!function setNestedKey(h,d,_){let V=d.match(/([a-z_]+)\.(.*)/i);if(null===V)h[d]=_;else{let d=h[V[1]];setNestedKey(d,V[2],_)}}(V,h,d);return d}return[...d,h]}var t7=_(3454);let t3={"routing.instrumentation":"next-app-router"};var t4=_(1163),t6=_.n(t4);let t9={"routing.instrumentation":"next-pages-router"},t8=exports_getClient();function nextRouterInstrumentation(h){let d=!(arguments.length>1)||void 0===arguments[1]||arguments[1],_=!(arguments.length>2)||void 0===arguments[2]||arguments[2],V=!eC.document.getElementById("__NEXT_DATA__");V?function(h){let d,_=!(arguments.length>1)||void 0===arguments[1]||arguments[1],V=!(arguments.length>2)||void 0===arguments[2]||arguments[2],ee=eC.location.pathname;_&&(d=h({name:ee,op:"pageload",origin:"auto.pageload.nextjs.app_router_instrumentation",tags:t3,startTimestamp:eM?eM/1e3:void 0,metadata:{source:"url"}})),V&&addFetchInstrumentationHandler(_=>{if(void 0!==_.endTimestamp||"GET"!==_.fetchData.method)return;let V=function(h){if(!h[0]||"object"!=typeof h[0]||void 0===h[0].searchParams||!h[1]||"object"!=typeof h[1]||!("headers"in h[1]))return null;try{let d=h[0],_=h[1].headers;if("1"!==_.RSC||"1"===_["Next-Router-Prefetch"])return null;return{targetPathname:d.pathname}}catch(h){return null}}(_.args);if(null===V)return;let er=V.targetPathname,eo={...t3,from:ee};ee=er,d&&d.end(),h({name:er,op:"navigation",origin:"auto.navigation.nextjs.app_router_instrumentation",tags:eo,metadata:{source:"url"}})})}(h,d,_):function(h){let d=!(arguments.length>1)||void 0===arguments[1]||arguments[1],_=!(arguments.length>2)||void 0===arguments[2]||arguments[2],{route:V,params:ee,sentryTrace:er,baggage:eo}=function(){let h;let d=eC.document.getElementById("__NEXT_DATA__");if(d&&d.innerHTML)try{h=JSON.parse(d.innerHTML)}catch(h){}if(!h)return{};let _={},{page:V,query:ee,props:er}=h;return _.route=V,_.params=ee,er&&er.pageProps&&(_.sentryTrace=er.pageProps._sentryTraceData,_.baggage=er.pageProps._sentryBaggage),_}(),{traceparentData:ec,dynamicSamplingContext:eh,propagationContext:ep}=tracing_tracingContextFromHeaders(er,eo);exports_getCurrentScope().setPropagationContext(ep),eE=V||eC.location.pathname,d&&(eT=h({name:eE,op:"pageload",origin:"auto.pageload.nextjs.pages_router_instrumentation",tags:t9,startTimestamp:eM?eM/1e3:void 0,...ee&&t8&&t8.getOptions().sendDefaultPii&&{data:ee},...ec,metadata:{source:V?"route":"url",dynamicSamplingContext:ec&&!eh?{}:eh}})),_&&t6().events.on("routeChangeStart",d=>{let _,V;let ee=d.split(/[\?#]/,1)[0],er=function(h){let d=(eC.__BUILD_MANIFEST||{}).sortedPages;if(d)return d.find(d=>{let _=function(h){let d=h.split("/"),_="";d[d.length-1].match(/^\[\[\.\.\..+\]\]$/)&&(d.pop(),_="(?:/(.+?))?");let V=d.map(h=>h.replace(/^\[\.\.\..+\]$/,"(.+?)").replace(/^\[.*\]$/,"([^/]+?)")).join("/");return new RegExp("^".concat(V).concat(_,"(?:/)?$"))}(d);return h.match(_)})}(ee);er?(_=er,V="route"):(_=ee,V="url");let eo={...t9,from:eE};eE=_,eT&&eT.end();let ec=h({name:_,op:"navigation",origin:"auto.navigation.nextjs.pages_router_instrumentation",tags:eo,metadata:{source:V}});if(ec){let h=ec.startChild({op:"ui.nextjs.route-change",origin:"auto.ui.nextjs.pages_router_instrumentation",description:"Next.js Route Change"}),finishRouteChangeSpan=()=>{h.end(),t6().events.off("routeChangeComplete",finishRouteChangeSpan)};t6().events.on("routeChangeComplete",finishRouteChangeSpan)}})}(h,d,_)}let ne=_.g,nn=_.g;function removeTrailingSlash(h){return"/"===h[h.length-1]?h.slice(0,-1):h}var nr=_(2166);function isBrowser(){return!(0,nr.KV)()||void 0!==eC.process&&"renderer"===eC.process.type}let ni="sentryReplaySession",no="Unable to send Replay";function _optionalChain$5(h){let d;let _=h[0],V=1;for(;V<h.length;){let ee=h[V],er=h[V+1];if(V+=2,("optionalAccess"===ee||"optionalCall"===ee)&&null==_)return;"access"===ee||"optionalAccess"===ee?(d=_,_=er(_)):("call"===ee||"optionalCall"===ee)&&(_=er(function(){for(var h=arguments.length,V=Array(h),ee=0;ee<h;ee++)V[ee]=arguments[ee];return _.call(d,...V)}),d=void 0)}return _}function isShadowRoot(h){let d=_optionalChain$5([h,"optionalAccess",h=>h.host]);return _optionalChain$5([d,"optionalAccess",h=>h.shadowRoot])===h}function isNativeShadowDom(h){return"[object ShadowRoot]"===Object.prototype.toString.call(h)}function stringifyStylesheet(h){try{var d;let _=h.rules||h.cssRules;return _?((d=Array.from(_,stringifyRule).join("")).includes(" background-clip: text;")&&!d.includes(" -webkit-background-clip: text;")&&(d=d.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),d):null}catch(h){return null}}function stringifyRule(h){let d;if("styleSheet"in h)try{d=stringifyStylesheet(h.styleSheet)||function(h){let{cssText:d}=h;if(d.split('"').length<3)return d;let _=["@import","url(".concat(JSON.stringify(h.href),")")];return""===h.layerName?_.push("layer"):h.layerName&&_.push("layer(".concat(h.layerName,")")),h.supportsText&&_.push("supports(".concat(h.supportsText,")")),h.media.length&&_.push(h.media.mediaText),_.join(" ")+";"}(h)}catch(h){}else if("selectorText"in h&&h.selectorText.includes(":"))return h.cssText.replace(/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm,"$1\\$2");return d||h.cssText}(e6=td||(td={}))[e6.Document=0]="Document",e6[e6.DocumentType=1]="DocumentType",e6[e6.Element=2]="Element",e6[e6.Text=3]="Text",e6[e6.CDATA=4]="CDATA",e6[e6.Comment=5]="Comment";let Mirror=class Mirror{getId(h){if(!h)return -1;let d=_optionalChain$5([this,"access",h=>h.getMeta,"call",d=>d(h),"optionalAccess",h=>h.id]);return()=>-1,null!=d?d:-1}getNode(h){return this.idNodeMap.get(h)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(h){return this.nodeMetaMap.get(h)||null}removeNodeFromMap(h){let d=this.getId(h);this.idNodeMap.delete(d),h.childNodes&&h.childNodes.forEach(h=>this.removeNodeFromMap(h))}has(h){return this.idNodeMap.has(h)}hasNode(h){return this.nodeMetaMap.has(h)}add(h,d){let _=d.id;this.idNodeMap.set(_,h),this.nodeMetaMap.set(h,d)}replace(h,d){let _=this.getNode(h);if(_){let h=this.nodeMetaMap.get(_);h&&this.nodeMetaMap.set(d,h)}this.idNodeMap.set(h,d)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function shouldMaskInput(h){let{maskInputOptions:d,tagName:_,type:V}=h;return"OPTION"===_&&(_="SELECT"),!!(d[_.toLowerCase()]||V&&d[V]||"password"===V||"INPUT"===_&&!V&&d.text)}function maskInputValue(h){let{isMasked:d,element:_,value:V,maskInputFn:ee}=h,er=V||"";return d?(ee&&(er=ee(er,_)),"*".repeat(er.length)):er}function toLowerCase(h){return h.toLowerCase()}function toUpperCase(h){return h.toUpperCase()}let nl="__rrweb_original__";function getInputType(h){let d=h.type;return h.hasAttribute("data-rr-is-password")?"password":d?toLowerCase(d):null}function getInputValue(h,d,_){return"INPUT"===d&&("radio"===_||"checkbox"===_)?h.getAttribute("value")||"":h.value}let nd=1,np=RegExp("[^a-z0-9-_:]");function genId(){return nd++}let nm=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,ng=/^(?:[a-z+]+:)?\/\//i,nO=/^www\..*/i,ny=/^(data:)([^,]*),(.*)/i;function absoluteToStylesheet(h,d){return(h||"").replace(nm,(h,_,V,ee,er,eo)=>{let ec=V||er||eo,eh=_||ee||"";if(!ec)return h;if(ng.test(ec)||nO.test(ec)||ny.test(ec))return"url(".concat(eh).concat(ec).concat(eh,")");if("/"===ec[0])return"url(".concat(eh).concat((d.indexOf("//")>-1?d.split("/").slice(0,3).join("/"):d.split("/")[0]).split("?")[0]+ec).concat(eh,")");let ep=d.split("/"),ef=ec.split("/");for(let h of(ep.pop(),ef))"."!==h&&(".."===h?ep.pop():ep.push(h));return"url(".concat(eh).concat(ep.join("/")).concat(eh,")")})}let nv=/^[^ \t\n\r\u000c]+/,nb=/^[, \t\n\r\u000c]+/;function absoluteToDoc(h,d){if(!d||""===d.trim())return d;let _=h.createElement("a");return _.href=d,_.href}function getHref(){let h=document.createElement("a");return h.href="",h.href}function transformAttribute(h,d,_,V,ee,er){return V?"src"!==_&&("href"!==_||"use"===d&&"#"===V[0])&&("xlink:href"!==_||"#"===V[0])&&("background"!==_||"table"!==d&&"td"!==d&&"th"!==d)?"srcset"===_?function(h,d){if(""===d.trim())return d;let _=0;function collectCharacters(h){let V;let ee=h.exec(d.substring(_));return ee?(V=ee[0],_+=V.length,V):""}let V=[];for(;collectCharacters(nb),!(_>=d.length);){let ee=collectCharacters(nv);if(","===ee.slice(-1))ee=absoluteToDoc(h,ee.substring(0,ee.length-1)),V.push(ee);else{let er="";ee=absoluteToDoc(h,ee);let eo=!1;for(;;){let h=d.charAt(_);if(""===h){V.push((ee+er).trim());break}if(eo)")"===h&&(eo=!1);else{if(","===h){_+=1,V.push((ee+er).trim());break}"("===h&&(eo=!0)}er+=h,_+=1}}}return V.join(", ")}(h,V):"style"===_?absoluteToStylesheet(V,getHref()):"object"===d&&"data"===_?absoluteToDoc(h,V):"function"==typeof er?er(_,V,ee):V:absoluteToDoc(h,V):V}function ignoreAttribute(h,d,_){return("video"===h||"audio"===h)&&"autoplay"===d}function distanceToMatch(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,V=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return!h||h.nodeType!==h.ELEMENT_NODE||V>_?-1:d(h)?V:distanceToMatch(h.parentNode,d,_,V+1)}function createMatchPredicate(h,d){return _=>{if(null===_)return!1;try{if(h){if("string"==typeof h){if(_.matches(".".concat(h)))return!0}else if(function(h,d){for(let _=h.classList.length;_--;){let V=h.classList[_];if(d.test(V))return!0}return!1}(_,h))return!0}if(d&&_.matches(d))return!0;return!1}catch(h){return!1}}}function needMaskingText(h,d,_,V,ee,er){try{let eo=h.nodeType===h.ELEMENT_NODE?h:h.parentElement;if(null===eo)return!1;let ec=-1,eh=-1;if(er){if((eh=distanceToMatch(eo,createMatchPredicate(V,ee)))<0)return!0;ec=distanceToMatch(eo,createMatchPredicate(d,_),eh>=0?eh:1/0)}else{if((ec=distanceToMatch(eo,createMatchPredicate(d,_)))<0)return!1;eh=distanceToMatch(eo,createMatchPredicate(V,ee),ec>=0?ec:1/0)}return ec>=0?!(eh>=0)||ec<=eh:!(eh>=0)&&!!er}catch(h){}return!!er}function lowerIfExists(h){return null==h?"":h.toLowerCase()}function serializeNodeWithId(h,d){let _;let{doc:V,mirror:ee,blockClass:er,blockSelector:eo,unblockSelector:ec,maskAllText:eh,maskTextClass:ep,unmaskTextClass:ef,maskTextSelector:em,unmaskTextSelector:eg,skipChild:eO=!1,inlineStylesheet:eS=!0,maskInputOptions:e_={},maskAttributeFn:ew,maskTextFn:ex,maskInputFn:ek,slimDOMOptions:eT,dataURLOptions:eE={},inlineImages:eC=!1,recordCanvas:eP=!1,onSerialize:eI,onIframeLoad:eR,iframeLoadTimeout:eA=5e3,onStylesheetLoad:e$,stylesheetLoadTimeout:eN=5e3,keepIframeSrcFn:eM=()=>!1,newlyAddedElement:eQ=!1}=d,{preserveWhiteSpace:eD=!0}=d,ej=function(h,d){let{doc:_,mirror:V,blockClass:ee,blockSelector:er,unblockSelector:eo,maskAllText:ec,maskAttributeFn:eh,maskTextClass:ep,unmaskTextClass:ef,maskTextSelector:em,unmaskTextSelector:eg,inlineStylesheet:eO,maskInputOptions:eS={},maskTextFn:e_,maskInputFn:ew,dataURLOptions:ex={},inlineImages:ek,recordCanvas:eT,keepIframeSrcFn:eE,newlyAddedElement:eC=!1}=d,eP=function(h,d){if(!d.hasNode(h))return;let _=d.getId(h);return 1===_?void 0:_}(_,V);switch(h.nodeType){case h.DOCUMENT_NODE:if("CSS1Compat"!==h.compatMode)return{type:td.Document,childNodes:[],compatMode:h.compatMode};return{type:td.Document,childNodes:[]};case h.DOCUMENT_TYPE_NODE:return{type:td.DocumentType,name:h.name,publicId:h.publicId,systemId:h.systemId,rootId:eP};case h.ELEMENT_NODE:return function(h,d){let _;let{doc:V,blockClass:ee,blockSelector:er,unblockSelector:eo,inlineStylesheet:ec,maskInputOptions:eh={},maskAttributeFn:ep,maskInputFn:ef,dataURLOptions:em={},inlineImages:eg,recordCanvas:eO,keepIframeSrcFn:eS,newlyAddedElement:e_=!1,rootId:ew,maskAllText:ex,maskTextClass:ek,unmaskTextClass:eT,maskTextSelector:eE,unmaskTextSelector:eC}=d,eP=function(h,d,_,V){try{if(V&&h.matches(V))return!1;if("string"==typeof d){if(h.classList.contains(d))return!0}else for(let _=h.classList.length;_--;){let V=h.classList[_];if(d.test(V))return!0}if(_)return h.matches(_)}catch(h){}return!1}(h,ee,er,eo),eI=function(h){if(h instanceof HTMLFormElement)return"form";let d=toLowerCase(h.tagName);return np.test(d)?"div":d}(h),eR={},eA=h.attributes.length;for(let d=0;d<eA;d++){let _=h.attributes[d];ignoreAttribute(eI,_.name,_.value)||(eR[_.name]=transformAttribute(V,eI,toLowerCase(_.name),_.value,h,ep))}if("link"===eI&&ec){let d=Array.from(V.styleSheets).find(d=>d.href===h.href),_=null;d&&(_=stringifyStylesheet(d)),_&&(delete eR.rel,delete eR.href,eR._cssText=absoluteToStylesheet(_,d.href))}if("style"===eI&&h.sheet&&!(h.innerText||h.textContent||"").trim().length){let d=stringifyStylesheet(h.sheet);d&&(eR._cssText=absoluteToStylesheet(d,getHref()))}if("input"===eI||"textarea"===eI||"select"===eI||"option"===eI){let d=getInputType(h),_=getInputValue(h,toUpperCase(eI),d),V=h.checked;if("submit"!==d&&"button"!==d&&_){let V=needMaskingText(h,ek,eE,eT,eC,shouldMaskInput({type:d,tagName:toUpperCase(eI),maskInputOptions:eh}));eR.value=maskInputValue({isMasked:V,element:h,value:_,maskInputFn:ef})}V&&(eR.checked=V)}if("option"===eI&&(h.selected&&!eh.select?eR.selected=!0:delete eR.selected),"canvas"===eI&&eO){if("2d"===h.__context)!function(h){let d=h.getContext("2d");if(!d)return!0;for(let _=0;_<h.width;_+=50)for(let V=0;V<h.height;V+=50){let ee=d.getImageData,er=nl in ee?ee[nl]:ee,eo=new Uint32Array(er.call(d,_,V,Math.min(50,h.width-_),Math.min(50,h.height-V)).data.buffer);if(eo.some(h=>0!==h))return!1}return!0}(h)&&(eR.rr_dataURL=h.toDataURL(em.type,em.quality));else if(!("__context"in h)){let d=h.toDataURL(em.type,em.quality),_=document.createElement("canvas");_.width=h.width,_.height=h.height;let V=_.toDataURL(em.type,em.quality);d!==V&&(eR.rr_dataURL=d)}}if("img"===eI&&eg){ey||(ev=(ey=V.createElement("canvas")).getContext("2d"));let d=h.crossOrigin;h.crossOrigin="anonymous";let recordInlineImage=()=>{h.removeEventListener("load",recordInlineImage);try{ey.width=h.naturalWidth,ey.height=h.naturalHeight,ev.drawImage(h,0,0),eR.rr_dataURL=ey.toDataURL(em.type,em.quality)}catch(d){console.warn("Cannot inline img src=".concat(h.currentSrc,"! Error: ").concat(d))}d?eR.crossOrigin=d:h.removeAttribute("crossorigin")};h.complete&&0!==h.naturalWidth?recordInlineImage():h.addEventListener("load",recordInlineImage)}if(("audio"===eI||"video"===eI)&&(eR.rr_mediaState=h.paused?"paused":"played",eR.rr_mediaCurrentTime=h.currentTime),!e_&&(h.scrollLeft&&(eR.rr_scrollLeft=h.scrollLeft),h.scrollTop&&(eR.rr_scrollTop=h.scrollTop)),eP){let{width:d,height:_}=h.getBoundingClientRect();eR={class:eR.class,rr_width:"".concat(d,"px"),rr_height:"".concat(_,"px")}}"iframe"!==eI||eS(eR.src)||(h.contentDocument||(eR.rr_src=eR.src),delete eR.src);try{customElements.get(eI)&&(_=!0)}catch(h){}return{type:td.Element,tagName:eI,attributes:eR,childNodes:[],isSVG:!!("svg"===h.tagName||h.ownerSVGElement)||void 0,needBlock:eP,rootId:ew,isCustom:_}}(h,{doc:_,blockClass:ee,blockSelector:er,unblockSelector:eo,inlineStylesheet:eO,maskAttributeFn:eh,maskInputOptions:eS,maskInputFn:ew,dataURLOptions:ex,inlineImages:ek,recordCanvas:eT,keepIframeSrcFn:eE,newlyAddedElement:eC,rootId:eP,maskAllText:ec,maskTextClass:ep,unmaskTextClass:ef,maskTextSelector:em,unmaskTextSelector:eg});case h.TEXT_NODE:return function(h,d){let{maskAllText:_,maskTextClass:V,unmaskTextClass:ee,maskTextSelector:er,unmaskTextSelector:eo,maskTextFn:ec,maskInputOptions:eh,maskInputFn:ep,rootId:ef}=d,em=h.parentNode&&h.parentNode.tagName,eg=h.textContent,eO="STYLE"===em||void 0,ey="SCRIPT"===em||void 0,ev="TEXTAREA"===em||void 0;if(eO&&eg){try{h.nextSibling||h.previousSibling||_optionalChain$5([h,"access",h=>h.parentNode,"access",h=>h.sheet,"optionalAccess",h=>h.cssRules])&&(eg=stringifyStylesheet(h.parentNode.sheet))}catch(d){console.warn("Cannot get CSS styles from text's parentNode. Error: ".concat(d),h)}eg=absoluteToStylesheet(eg,getHref())}ey&&(eg="SCRIPT_PLACEHOLDER");let eS=needMaskingText(h,V,er,ee,eo,_);if(eO||ey||ev||!eg||!eS||(eg=ec?ec(eg):eg.replace(/[\S]/g,"*")),ev&&eg&&(eh.textarea||eS)&&(eg=ep?ep(eg,h.parentNode):eg.replace(/[\S]/g,"*")),"OPTION"===em&&eg){let d=shouldMaskInput({type:null,tagName:em,maskInputOptions:eh});eg=maskInputValue({isMasked:needMaskingText(h,V,er,ee,eo,d),element:h,value:eg,maskInputFn:ep})}return{type:td.Text,textContent:eg||"",isStyle:eO,rootId:ef}}(h,{maskAllText:ec,maskTextClass:ep,unmaskTextClass:ef,maskTextSelector:em,unmaskTextSelector:eg,maskTextFn:e_,maskInputOptions:eS,maskInputFn:ew,rootId:eP});case h.CDATA_SECTION_NODE:return{type:td.CDATA,textContent:"",rootId:eP};case h.COMMENT_NODE:return{type:td.Comment,textContent:h.textContent||"",rootId:eP};default:return!1}}(h,{doc:V,mirror:ee,blockClass:er,blockSelector:eo,maskAllText:eh,unblockSelector:ec,maskTextClass:ep,unmaskTextClass:ef,maskTextSelector:em,unmaskTextSelector:eg,inlineStylesheet:eS,maskInputOptions:e_,maskAttributeFn:ew,maskTextFn:ex,maskInputFn:ek,dataURLOptions:eE,inlineImages:eC,recordCanvas:eP,keepIframeSrcFn:eM,newlyAddedElement:eQ});if(!ej)return console.warn(h,"not serialized"),null;_=ee.hasNode(h)?ee.getId(h):!function(h,d){if(d.comment&&h.type===td.Comment)return!0;if(h.type===td.Element){if(d.script&&("script"===h.tagName||"link"===h.tagName&&("preload"===h.attributes.rel||"modulepreload"===h.attributes.rel)&&"script"===h.attributes.as||"link"===h.tagName&&"prefetch"===h.attributes.rel&&"string"==typeof h.attributes.href&&h.attributes.href.endsWith(".js"))||d.headFavicon&&("link"===h.tagName&&"shortcut icon"===h.attributes.rel||"meta"===h.tagName&&(lowerIfExists(h.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===lowerIfExists(h.attributes.name)||"icon"===lowerIfExists(h.attributes.rel)||"apple-touch-icon"===lowerIfExists(h.attributes.rel)||"shortcut icon"===lowerIfExists(h.attributes.rel))))return!0;if("meta"===h.tagName){if(d.headMetaDescKeywords&&lowerIfExists(h.attributes.name).match(/^description|keywords$/)||d.headMetaSocial&&(lowerIfExists(h.attributes.property).match(/^(og|twitter|fb):/)||lowerIfExists(h.attributes.name).match(/^(og|twitter):/)||"pinterest"===lowerIfExists(h.attributes.name)))return!0;if(d.headMetaRobots&&("robots"===lowerIfExists(h.attributes.name)||"googlebot"===lowerIfExists(h.attributes.name)||"bingbot"===lowerIfExists(h.attributes.name)))return!0;if(d.headMetaHttpEquiv&&void 0!==h.attributes["http-equiv"])return!0;else if(d.headMetaAuthorship&&("author"===lowerIfExists(h.attributes.name)||"generator"===lowerIfExists(h.attributes.name)||"framework"===lowerIfExists(h.attributes.name)||"publisher"===lowerIfExists(h.attributes.name)||"progid"===lowerIfExists(h.attributes.name)||lowerIfExists(h.attributes.property).match(/^article:/)||lowerIfExists(h.attributes.property).match(/^product:/)))return!0;else if(d.headMetaVerification&&("google-site-verification"===lowerIfExists(h.attributes.name)||"yandex-verification"===lowerIfExists(h.attributes.name)||"csrf-token"===lowerIfExists(h.attributes.name)||"p:domain_verify"===lowerIfExists(h.attributes.name)||"verify-v1"===lowerIfExists(h.attributes.name)||"verification"===lowerIfExists(h.attributes.name)||"shopify-checkout-api-token"===lowerIfExists(h.attributes.name)))return!0}}return!1}(ej,eT)&&(eD||ej.type!==td.Text||ej.isStyle||ej.textContent.replace(/^\s+|\s+$/gm,"").length)?genId():-2;let eL=Object.assign(ej,{id:_});if(ee.add(h,eL),-2===_)return null;eI&&eI(h);let eF=!eO;if(eL.type===td.Element){eF=eF&&!eL.needBlock,delete eL.needBlock;let d=h.shadowRoot;d&&isNativeShadowDom(d)&&(eL.isShadowHost=!0)}if((eL.type===td.Document||eL.type===td.Element)&&eF){eT.headWhitespace&&eL.type===td.Element&&"head"===eL.tagName&&(eD=!1);let d={doc:V,mirror:ee,blockClass:er,blockSelector:eo,maskAllText:eh,unblockSelector:ec,maskTextClass:ep,unmaskTextClass:ef,maskTextSelector:em,unmaskTextSelector:eg,skipChild:eO,inlineStylesheet:eS,maskInputOptions:e_,maskAttributeFn:ew,maskTextFn:ex,maskInputFn:ek,slimDOMOptions:eT,dataURLOptions:eE,inlineImages:eC,recordCanvas:eP,preserveWhiteSpace:eD,onSerialize:eI,onIframeLoad:eR,iframeLoadTimeout:eA,onStylesheetLoad:e$,stylesheetLoadTimeout:eN,keepIframeSrcFn:eM};for(let _ of Array.from(h.childNodes)){let h=serializeNodeWithId(_,d);h&&eL.childNodes.push(h)}if(h.nodeType===h.ELEMENT_NODE&&h.shadowRoot)for(let _ of Array.from(h.shadowRoot.childNodes)){let V=serializeNodeWithId(_,d);V&&(isNativeShadowDom(h.shadowRoot)&&(V.isShadow=!0),eL.childNodes.push(V))}}return h.parentNode&&isShadowRoot(h.parentNode)&&isNativeShadowDom(h.parentNode)&&(eL.isShadow=!0),eL.type===td.Element&&"iframe"===eL.tagName&&function(h,d,_){let V;let ee=h.contentWindow;if(!ee)return;let er=!1;try{V=ee.document.readyState}catch(h){return}if("complete"!==V){let V=setTimeout(()=>{er||(d(),er=!0)},_);h.addEventListener("load",()=>{clearTimeout(V),er=!0,d()});return}let eo="about:blank";if(ee.location.href!==eo||h.src===eo||""===h.src)return setTimeout(d,0),h.addEventListener("load",d);h.addEventListener("load",d)}(h,()=>{let d=h.contentDocument;if(d&&eR){let _=serializeNodeWithId(d,{doc:d,mirror:ee,blockClass:er,blockSelector:eo,unblockSelector:ec,maskAllText:eh,maskTextClass:ep,unmaskTextClass:ef,maskTextSelector:em,unmaskTextSelector:eg,skipChild:!1,inlineStylesheet:eS,maskInputOptions:e_,maskAttributeFn:ew,maskTextFn:ex,maskInputFn:ek,slimDOMOptions:eT,dataURLOptions:eE,inlineImages:eC,recordCanvas:eP,preserveWhiteSpace:eD,onSerialize:eI,onIframeLoad:eR,iframeLoadTimeout:eA,onStylesheetLoad:e$,stylesheetLoadTimeout:eN,keepIframeSrcFn:eM});_&&eR(h,_)}},eA),eL.type===td.Element&&"link"===eL.tagName&&"stylesheet"===eL.attributes.rel&&function(h,d,_){let V,ee=!1;try{V=h.sheet}catch(h){return}if(V)return;let er=setTimeout(()=>{ee||(d(),ee=!0)},_);h.addEventListener("load",()=>{clearTimeout(er),ee=!0,d()})}(h,()=>{if(e$){let d=serializeNodeWithId(h,{doc:V,mirror:ee,blockClass:er,blockSelector:eo,unblockSelector:ec,maskAllText:eh,maskTextClass:ep,unmaskTextClass:ef,maskTextSelector:em,unmaskTextSelector:eg,skipChild:!1,inlineStylesheet:eS,maskInputOptions:e_,maskAttributeFn:ew,maskTextFn:ex,maskInputFn:ek,slimDOMOptions:eT,dataURLOptions:eE,inlineImages:eC,recordCanvas:eP,preserveWhiteSpace:eD,onSerialize:eI,onIframeLoad:eR,iframeLoadTimeout:eA,onStylesheetLoad:e$,stylesheetLoadTimeout:eN,keepIframeSrcFn:eM});d&&e$(h,d)}},eN),eL}function _optionalChain$4(h){let d;let _=h[0],V=1;for(;V<h.length;){let ee=h[V],er=h[V+1];if(V+=2,("optionalAccess"===ee||"optionalCall"===ee)&&null==_)return;"access"===ee||"optionalAccess"===ee?(d=_,_=er(_)):("call"===ee||"optionalCall"===ee)&&(_=er(function(){for(var h=arguments.length,V=Array(h),ee=0;ee<h;ee++)V[ee]=arguments[ee];return _.call(d,...V)}),d=void 0)}return _}function on(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:document,V={capture:!0,passive:!0};return _.addEventListener(h,d,V),()=>_.removeEventListener(h,d,V)}let nS="Please stop import mirror directly. Instead of that,\r\nnow you can use replayer.getMirror() to access the mirror instance of a replayer,\r\nor you can use record.mirror to access the mirror instance during recording.",n_={map:{},getId:()=>(console.error(nS),-1),getNode:()=>(console.error(nS),null),removeNodeFromMap(){console.error(nS)},has:()=>(console.error(nS),!1),reset(){console.error(nS)}};function throttle$1(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},V=null,ee=0;return function(){for(var er=arguments.length,eo=Array(er),ec=0;ec<er;ec++)eo[ec]=arguments[ec];let eh=Date.now();ee||!1!==_.leading||(ee=eh);let ep=d-(eh-ee),ef=this;ep<=0||ep>d?(V&&(clearTimeout(V),V=null),ee=eh,h.apply(ef,eo)):V||!1===_.trailing||(V=setTimeout(()=>{ee=!1===_.leading?0:Date.now(),V=null,h.apply(ef,eo)},ep))}}function patch(h,d,_){try{if(!(d in h))return()=>{};let V=h[d],ee=_(V);return"function"==typeof ee&&(ee.prototype=ee.prototype||{},Object.defineProperties(ee,{__rrweb_original__:{enumerable:!1,value:V}})),h[d]=ee,()=>{h[d]=V}}catch(h){return()=>{}}}window.Proxy&&window.Reflect&&(n_=new Proxy(n_,{get:(h,d,_)=>("map"===d&&console.error(nS),Reflect.get(h,d,_))}));let nw=Date.now;function getWindowScroll(h){let d=h.document;return{left:d.scrollingElement?d.scrollingElement.scrollLeft:void 0!==h.pageXOffset?h.pageXOffset:_optionalChain$4([d,"optionalAccess",h=>h.documentElement,"access",h=>h.scrollLeft])||_optionalChain$4([d,"optionalAccess",h=>h.body,"optionalAccess",h=>h.parentElement,"optionalAccess",h=>h.scrollLeft])||_optionalChain$4([d,"optionalAccess",h=>h.body,"optionalAccess",h=>h.scrollLeft])||0,top:d.scrollingElement?d.scrollingElement.scrollTop:void 0!==h.pageYOffset?h.pageYOffset:_optionalChain$4([d,"optionalAccess",h=>h.documentElement,"access",h=>h.scrollTop])||_optionalChain$4([d,"optionalAccess",h=>h.body,"optionalAccess",h=>h.parentElement,"optionalAccess",h=>h.scrollTop])||_optionalChain$4([d,"optionalAccess",h=>h.body,"optionalAccess",h=>h.scrollTop])||0}}function getWindowHeight(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function getWindowWidth(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function isBlocked(h,d,_,V,ee){if(!h)return!1;let er=h.nodeType===h.ELEMENT_NODE?h:h.parentElement;if(!er)return!1;let eo=createMatchPredicate(d,_);if(!ee){let h=V&&er.matches(V);return eo(er)&&!h}let ec=distanceToMatch(er,eo),eh=-1;return!(ec<0)&&(V&&(eh=distanceToMatch(er,createMatchPredicate(null,V))),ec>-1&&eh<0||ec<eh)}function isIgnored(h,d){return -2===d.getId(h)}function legacy_isTouchEvent(h){return!!h.changedTouches}function isSerializedIframe(h,d){return!!("IFRAME"===h.nodeName&&d.getMeta(h))}function isSerializedStylesheet(h,d){return!!("LINK"===h.nodeName&&h.nodeType===h.ELEMENT_NODE&&h.getAttribute&&"stylesheet"===h.getAttribute("rel")&&d.getMeta(h))}function hasShadowRoot(h){return!!_optionalChain$4([h,"optionalAccess",h=>h.shadowRoot])}/[1-9][0-9]{12}/.test(Date.now().toString())||(nw=()=>new Date().getTime());let StyleSheetMirror=class StyleSheetMirror{getId(h){var d;return d=this.styleIDMap.get(h),null!=d?d:-1}has(h){return this.styleIDMap.has(h)}add(h,d){let _;return this.has(h)?this.getId(h):(_=void 0===d?this.id++:d,this.styleIDMap.set(h,_),this.idStyleMap.set(_,h),_)}getStyle(h){return this.idStyleMap.get(h)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}};function getShadowHost(h){let d=null;return _optionalChain$4([h,"access",h=>h.getRootNode,"optionalCall",h=>h(),"optionalAccess",h=>h.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&h.getRootNode().host&&(d=h.getRootNode().host),d}function inDom(h){let d=h.ownerDocument;return!!d&&(d.contains(h)||function(h){let d=h.ownerDocument;if(!d)return!1;let _=function(h){let d,_=h;for(;d=getShadowHost(_);)_=d;return _}(h);return d.contains(_)}(h))}var nx=((e9=nx||{})[e9.DomContentLoaded=0]="DomContentLoaded",e9[e9.Load=1]="Load",e9[e9.FullSnapshot=2]="FullSnapshot",e9[e9.IncrementalSnapshot=3]="IncrementalSnapshot",e9[e9.Meta=4]="Meta",e9[e9.Custom=5]="Custom",e9[e9.Plugin=6]="Plugin",e9),nk=((e8=nk||{})[e8.Mutation=0]="Mutation",e8[e8.MouseMove=1]="MouseMove",e8[e8.MouseInteraction=2]="MouseInteraction",e8[e8.Scroll=3]="Scroll",e8[e8.ViewportResize=4]="ViewportResize",e8[e8.Input=5]="Input",e8[e8.TouchMove=6]="TouchMove",e8[e8.MediaInteraction=7]="MediaInteraction",e8[e8.StyleSheetRule=8]="StyleSheetRule",e8[e8.CanvasMutation=9]="CanvasMutation",e8[e8.Font=10]="Font",e8[e8.Log=11]="Log",e8[e8.Drag=12]="Drag",e8[e8.StyleDeclaration=13]="StyleDeclaration",e8[e8.Selection=14]="Selection",e8[e8.AdoptedStyleSheet=15]="AdoptedStyleSheet",e8[e8.CustomElement=16]="CustomElement",e8),nT=((te=nT||{})[te.MouseUp=0]="MouseUp",te[te.MouseDown=1]="MouseDown",te[te.Click=2]="Click",te[te.ContextMenu=3]="ContextMenu",te[te.DblClick=4]="DblClick",te[te.Focus=5]="Focus",te[te.Blur=6]="Blur",te[te.TouchStart=7]="TouchStart",te[te.TouchMove_Departed=8]="TouchMove_Departed",te[te.TouchEnd=9]="TouchEnd",te[te.TouchCancel=10]="TouchCancel",te),nE=((tr=nE||{})[tr.Mouse=0]="Mouse",tr[tr.Pen=1]="Pen",tr[tr.Touch=2]="Touch",tr);let DoubleLinkedList=class DoubleLinkedList{get(h){if(h>=this.length)throw Error("Position outside of list range");let d=this.head;for(let _=0;_<h;_++)d=function(h){let d;let _=h[0],V=1;for(;V<h.length;){let ee=h[V],er=h[V+1];if(V+=2,("optionalAccess"===ee||"optionalCall"===ee)&&null==_)return;"access"===ee||"optionalAccess"===ee?(d=_,_=er(_)):("call"===ee||"optionalCall"===ee)&&(_=er(function(){for(var h=arguments.length,V=Array(h),ee=0;ee<h;ee++)V[ee]=arguments[ee];return _.call(d,...V)}),d=void 0)}return _}([d,"optionalAccess",h=>h.next])||null;return d}addNode(h){let d={value:h,previous:null,next:null};if(h.__ln=d,h.previousSibling&&"__ln"in h.previousSibling){let _=h.previousSibling.__ln.next;d.next=_,d.previous=h.previousSibling.__ln,h.previousSibling.__ln.next=d,_&&(_.previous=d)}else if(h.nextSibling&&"__ln"in h.nextSibling&&h.nextSibling.__ln.previous){let _=h.nextSibling.__ln.previous;d.previous=_,d.next=h.nextSibling.__ln,h.nextSibling.__ln.previous=d,_&&(_.next=d)}else this.head&&(this.head.previous=d),d.next=this.head,this.head=d;null===d.next&&(this.tail=d),this.length++}removeNode(h){let d=h.__ln;this.head&&(d.previous?(d.previous.next=d.next,d.next?d.next.previous=d.previous:this.tail=d.previous):(this.head=d.next,this.head?this.head.previous=null:this.tail=null),h.__ln&&delete h.__ln,this.length--)}constructor(){this.length=0,this.head=null,this.tail=null}};let moveKey=(h,d)=>"".concat(h,"@").concat(d);let MutationBuffer=class MutationBuffer{init(h){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(d=>{this[d]=h[d]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=h=>{h.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let h=[],d=new Set,_=new DoubleLinkedList,getNextId=h=>{let d=h,_=-2;for(;-2===_;)_=(d=d&&d.nextSibling)&&this.mirror.getId(d);return _},pushAdd=V=>{if(!V.parentNode||!inDom(V))return;let ee=isShadowRoot(V.parentNode)?this.mirror.getId(getShadowHost(V)):this.mirror.getId(V.parentNode),er=getNextId(V);if(-1===ee||-1===er)return _.addNode(V);let eo=serializeNodeWithId(V,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:h=>{isSerializedIframe(h,this.mirror)&&this.iframeManager.addIframe(h),isSerializedStylesheet(h,this.mirror)&&this.stylesheetManager.trackLinkElement(h),hasShadowRoot(V)&&this.shadowDomManager.addShadowRoot(V.shadowRoot,this.doc)},onIframeLoad:(h,d)=>{this.iframeManager.attachIframe(h,d),this.shadowDomManager.observeAttachShadow(h)},onStylesheetLoad:(h,d)=>{this.stylesheetManager.attachLinkElement(h,d)}});eo&&(h.push({parentId:ee,nextId:er,node:eo}),d.add(eo.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let h of this.movedSet)(!isParentRemoved(this.removes,h,this.mirror)||this.movedSet.has(h.parentNode))&&pushAdd(h);for(let h of this.addedSet)isAncestorInSet(this.droppedSet,h)||isParentRemoved(this.removes,h,this.mirror)?isAncestorInSet(this.movedSet,h)?pushAdd(h):this.droppedSet.add(h):pushAdd(h);let V=null;for(;_.length;){let h=null;if(V){let d=this.mirror.getId(V.value.parentNode),_=getNextId(V.value);-1!==d&&-1!==_&&(h=V)}if(!h){let d=_.tail;for(;d;){let _=d;if(d=d.previous,_){let d=this.mirror.getId(_.value.parentNode),V=getNextId(_.value);if(-1===V)continue;if(-1!==d){h=_;break}{let d=_.value;if(d.parentNode&&d.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let V=d.parentNode.host,ee=this.mirror.getId(V);if(-1!==ee){h=_;break}}}}}}if(!h){for(;_.head;)_.removeNode(_.head.value);break}V=h.previous,_.removeNode(h.value),pushAdd(h.value)}let ee={texts:this.texts.map(h=>({id:this.mirror.getId(h.node),value:h.value})).filter(h=>!d.has(h.id)).filter(h=>this.mirror.has(h.id)),attributes:this.attributes.map(h=>{let{attributes:d}=h;if("string"==typeof d.style){let _=JSON.stringify(h.styleDiff),V=JSON.stringify(h._unchangedStyles);_.length<d.style.length&&(_+V).split("var(").length===d.style.split("var(").length&&(d.style=h.styleDiff)}return{id:this.mirror.getId(h.node),attributes:d}}).filter(h=>!d.has(h.id)).filter(h=>this.mirror.has(h.id)),removes:this.removes,adds:h};(ee.texts.length||ee.attributes.length||ee.removes.length||ee.adds.length)&&(this.texts=[],this.attributes=[],this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(ee))},this.processMutation=h=>{let d;if(!isIgnored(h.target,this.mirror)){try{d=document.implementation.createHTMLDocument()}catch(h){d=this.doc}switch(h.type){case"characterData":{let d=h.target.textContent;isBlocked(h.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||d===h.oldValue||this.texts.push({value:needMaskingText(h.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&d?this.maskTextFn?this.maskTextFn(d):d.replace(/[\S]/g,"*"):d,node:h.target});break}case"attributes":{let _=h.target,V=h.attributeName,ee=h.target.getAttribute(V);if("value"===V){let d=getInputType(_),V=_.tagName;ee=getInputValue(_,V,d);let er=shouldMaskInput({maskInputOptions:this.maskInputOptions,tagName:V,type:d}),eo=needMaskingText(h.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,er);ee=maskInputValue({isMasked:eo,element:_,value:ee,maskInputFn:this.maskInputFn})}if(isBlocked(h.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||ee===h.oldValue)return;let er=this.attributes.find(d=>d.node===h.target);if("IFRAME"===_.tagName&&"src"===V&&!this.keepIframeSrcFn(ee)){if(_.contentDocument)return;V="rr_src"}if(er||(er={node:h.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(er)),"type"===V&&"INPUT"===_.tagName&&"password"===(h.oldValue||"").toLowerCase()&&_.setAttribute("data-rr-is-password","true"),!ignoreAttribute(_.tagName,V)&&(er.attributes[V]=transformAttribute(this.doc,toLowerCase(_.tagName),toLowerCase(V),ee,_,this.maskAttributeFn),"style"===V)){let V=d.createElement("span");for(let d of(h.oldValue&&V.setAttribute("style",h.oldValue),Array.from(_.style))){let h=_.style.getPropertyValue(d),ee=_.style.getPropertyPriority(d);h!==V.style.getPropertyValue(d)||ee!==V.style.getPropertyPriority(d)?""===ee?er.styleDiff[d]=h:er.styleDiff[d]=[h,ee]:er._unchangedStyles[d]=[h,ee]}for(let h of Array.from(V.style))""===_.style.getPropertyValue(h)&&(er.styleDiff[h]=!1)}break}case"childList":if(isBlocked(h.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;h.addedNodes.forEach(d=>this.genAdds(d,h.target)),h.removedNodes.forEach(d=>{let _=this.mirror.getId(d),V=isShadowRoot(h.target)?this.mirror.getId(h.target.host):this.mirror.getId(h.target);isBlocked(h.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||isIgnored(d,this.mirror)||-1===this.mirror.getId(d)||(this.addedSet.has(d)?(deepDelete(this.addedSet,d),this.droppedSet.add(d)):this.addedSet.has(h.target)&&-1===_||function isAncestorRemoved(h,d){if(isShadowRoot(h))return!1;let _=d.getId(h);return!d.has(_)||(!h.parentNode||h.parentNode.nodeType!==h.DOCUMENT_NODE)&&(!h.parentNode||isAncestorRemoved(h.parentNode,d))}(h.target,this.mirror)||(this.movedSet.has(d)&&this.movedMap[moveKey(_,V)]?deepDelete(this.movedSet,d):this.removes.push({parentId:V,id:_,isShadow:!!(isShadowRoot(h.target)&&isNativeShadowDom(h.target))||void 0})),this.mapRemoves.push(d))})}}},this.genAdds=(h,d)=>{if(!this.processedNodeManager.inOtherBuffer(h,this)&&!(this.addedSet.has(h)||this.movedSet.has(h))){if(this.mirror.hasNode(h)){if(isIgnored(h,this.mirror))return;this.movedSet.add(h);let _=null;d&&this.mirror.hasNode(d)&&(_=this.mirror.getId(d)),_&&-1!==_&&(this.movedMap[moveKey(this.mirror.getId(h),_)]=!0)}else this.addedSet.add(h),this.droppedSet.delete(h);!isBlocked(h,this.blockClass,this.blockSelector,this.unblockSelector,!1)&&(h.childNodes.forEach(h=>this.genAdds(h)),hasShadowRoot(h)&&h.shadowRoot.childNodes.forEach(d=>{this.processedNodeManager.add(d,this),this.genAdds(d,h)}))}}}};function deepDelete(h,d){h.delete(d),d.childNodes.forEach(d=>deepDelete(h,d))}function isParentRemoved(h,d,_){return 0!==h.length&&function _isParentRemoved(h,d,_){let{parentNode:V}=d;if(!V)return!1;let ee=_.getId(V);return!!h.some(h=>h.id===ee)||_isParentRemoved(h,V,_)}(h,d,_)}function isAncestorInSet(h,d){return 0!==h.size&&function _isAncestorInSet(h,d){let{parentNode:_}=d;return!!_&&(!!h.has(_)||_isAncestorInSet(h,_))}(h,d)}let callbackWrapper=h=>e_?function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];try{return h(..._)}catch(h){if(e_&&!0===e_(h))return()=>{};throw h}}:h;function _optionalChain$2(h){let d;let _=h[0],V=1;for(;V<h.length;){let ee=h[V],er=h[V+1];if(V+=2,("optionalAccess"===ee||"optionalCall"===ee)&&null==_)return;"access"===ee||"optionalAccess"===ee?(d=_,_=er(_)):("call"===ee||"optionalCall"===ee)&&(_=er(function(){for(var h=arguments.length,V=Array(h),ee=0;ee<h;ee++)V[ee]=arguments[ee];return _.call(d,...V)}),d=void 0)}return _}let nC=[];function esm_getEventTarget(h){try{if("composedPath"in h){let d=h.composedPath();if(d.length)return d[0]}else if("path"in h&&h.path.length)return h.path[0]}catch(h){}return h&&h.target}function initMutationObserver(h,d){let _=new MutationBuffer;nC.push(_),_.init(h);let V=window.MutationObserver||window.__rrMutationObserver,ee=_optionalChain$2([window,"optionalAccess",h=>h.Zone,"optionalAccess",h=>h.__symbol__,"optionalCall",h=>h("MutationObserver")]);ee&&window[ee]&&(V=window[ee]);let er=new V(callbackWrapper(d=>{h.onMutation&&!1===h.onMutation(d)||_.processMutations.bind(_)(d)}));return er.observe(d,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),er}function initScrollObserver(h){let{scrollCb:d,doc:_,mirror:V,blockClass:ee,blockSelector:er,unblockSelector:eo,sampling:ec}=h,eh=callbackWrapper(throttle$1(callbackWrapper(h=>{let ec=esm_getEventTarget(h);if(!ec||isBlocked(ec,ee,er,eo,!0))return;let eh=V.getId(ec);if(ec===_&&_.defaultView){let h=getWindowScroll(_.defaultView);d({id:eh,x:h.left,y:h.top})}else d({id:eh,x:ec.scrollLeft,y:ec.scrollTop})}),ec.scroll||100));return on("scroll",eh,_)}let nP=["INPUT","TEXTAREA","SELECT"],nI=new WeakMap;function getNestedCSSRulePositions(h){return function(h,d){if(hasNestedCSSRule("CSSGroupingRule")&&h.parentRule instanceof CSSGroupingRule||hasNestedCSSRule("CSSMediaRule")&&h.parentRule instanceof CSSMediaRule||hasNestedCSSRule("CSSSupportsRule")&&h.parentRule instanceof CSSSupportsRule||hasNestedCSSRule("CSSConditionRule")&&h.parentRule instanceof CSSConditionRule){let _=Array.from(h.parentRule.cssRules),V=_.indexOf(h);d.unshift(V)}else if(h.parentStyleSheet){let _=Array.from(h.parentStyleSheet.cssRules),V=_.indexOf(h);d.unshift(V)}return d}(h,[])}function getIdAndStyleId(h,d,_){let V,ee;return h?(h.ownerNode?V=d.getId(h.ownerNode):ee=_.getId(h),{styleId:ee,id:V}):{}}function initAdoptedStyleSheetObserver(h,d){let{mirror:_,stylesheetManager:V}=h,ee=null;ee="#document"===d.nodeName?_.getId(d):_.getId(d.host);let er="#document"===d.nodeName?_optionalChain$2([d,"access",h=>h.defaultView,"optionalAccess",h=>h.Document]):_optionalChain$2([d,"access",h=>h.ownerDocument,"optionalAccess",h=>h.defaultView,"optionalAccess",h=>h.ShadowRoot]),eo=_optionalChain$2([er,"optionalAccess",h=>h.prototype])?Object.getOwnPropertyDescriptor(_optionalChain$2([er,"optionalAccess",h=>h.prototype]),"adoptedStyleSheets"):void 0;return null!==ee&&-1!==ee&&er&&eo?(Object.defineProperty(d,"adoptedStyleSheets",{configurable:eo.configurable,enumerable:eo.enumerable,get(){return _optionalChain$2([eo,"access",h=>h.get,"optionalAccess",h=>h.call,"call",h=>h(this)])},set(h){let d=_optionalChain$2([eo,"access",h=>h.set,"optionalAccess",h=>h.call,"call",d=>d(this,h)]);if(null!==ee&&-1!==ee)try{V.adoptStyleSheets(h,ee)}catch(h){}return d}}),callbackWrapper(()=>{Object.defineProperty(d,"adoptedStyleSheets",{configurable:eo.configurable,enumerable:eo.enumerable,get:eo.get,set:eo.set})})):()=>{}}function initObservers(h){arguments.length>1&&void 0!==arguments[1]&&arguments[1];let d=h.doc.defaultView;if(!d)return()=>{};let _=initMutationObserver(h,h.doc),V=function(h){let d,{mousemoveCb:_,sampling:V,doc:ee,mirror:er}=h;if(!1===V.mousemove)return()=>{};let eo="number"==typeof V.mousemove?V.mousemove:50,ec="number"==typeof V.mousemoveCallback?V.mousemoveCallback:500,eh=[],ep=throttle$1(callbackWrapper(h=>{let V=Date.now()-d;_(eh.map(h=>(h.timeOffset-=V,h)),h),eh=[],d=null}),ec),ef=callbackWrapper(throttle$1(callbackWrapper(h=>{let _=esm_getEventTarget(h),{clientX:V,clientY:ee}=legacy_isTouchEvent(h)?h.changedTouches[0]:h;d||(d=nw()),eh.push({x:V,y:ee,id:er.getId(_),timeOffset:nw()-d}),ep("undefined"!=typeof DragEvent&&h instanceof DragEvent?nk.Drag:h instanceof MouseEvent?nk.MouseMove:nk.TouchMove)}),eo,{trailing:!1})),em=[on("mousemove",ef,ee),on("touchmove",ef,ee),on("drag",ef,ee)];return callbackWrapper(()=>{em.forEach(h=>h())})}(h),ee=function(h){let{mouseInteractionCb:d,doc:_,mirror:V,blockClass:ee,blockSelector:er,unblockSelector:eo,sampling:ec}=h;if(!1===ec.mouseInteraction)return()=>{};let eh=!0===ec.mouseInteraction||void 0===ec.mouseInteraction?{}:ec.mouseInteraction,ep=[],ef=null,getHandler=h=>_=>{let ec=esm_getEventTarget(_);if(isBlocked(ec,ee,er,eo,!0))return;let eh=null,ep=h;if("pointerType"in _){switch(_.pointerType){case"mouse":eh=nE.Mouse;break;case"touch":eh=nE.Touch;break;case"pen":eh=nE.Pen}eh===nE.Touch?nT[h]===nT.MouseDown?ep="TouchStart":nT[h]===nT.MouseUp&&(ep="TouchEnd"):nE.Pen}else legacy_isTouchEvent(_)&&(eh=nE.Touch);null!==eh?(ef=eh,(ep.startsWith("Touch")&&eh===nE.Touch||ep.startsWith("Mouse")&&eh===nE.Mouse)&&(eh=null)):nT[h]===nT.Click&&(eh=ef,ef=null);let em=legacy_isTouchEvent(_)?_.changedTouches[0]:_;if(!em)return;let eg=V.getId(ec),{clientX:eO,clientY:ey}=em;callbackWrapper(d)({type:nT[ep],id:eg,x:eO,y:ey,...null!==eh&&{pointerType:eh}})};return Object.keys(nT).filter(h=>Number.isNaN(Number(h))&&!h.endsWith("_Departed")&&!1!==eh[h]).forEach(h=>{let d=toLowerCase(h),V=getHandler(h);if(window.PointerEvent)switch(nT[h]){case nT.MouseDown:case nT.MouseUp:d=d.replace("mouse","pointer");break;case nT.TouchStart:case nT.TouchEnd:return}ep.push(on(d,V,_))}),callbackWrapper(()=>{ep.forEach(h=>h())})}(h),er=initScrollObserver(h),eo=function(h,d){let{viewportResizeCb:_}=h,{win:V}=d,ee=-1,er=-1,eo=callbackWrapper(throttle$1(callbackWrapper(()=>{let h=getWindowHeight(),d=getWindowWidth();(ee!==h||er!==d)&&(_({width:Number(d),height:Number(h)}),ee=h,er=d)}),200));return on("resize",eo,V)}(h,{win:d}),ec=function(h){let{inputCb:d,doc:_,mirror:V,blockClass:ee,blockSelector:er,unblockSelector:eo,ignoreClass:ec,ignoreSelector:eh,maskInputOptions:ep,maskInputFn:ef,sampling:em,userTriggeredOnInput:eg,maskTextClass:eO,unmaskTextClass:ey,maskTextSelector:ev,unmaskTextSelector:eS}=h;function eventHandler(h){let d=esm_getEventTarget(h),V=h.isTrusted,em=d&&toUpperCase(d.tagName);if("OPTION"===em&&(d=d.parentElement),!d||!em||0>nP.indexOf(em)||isBlocked(d,ee,er,eo,!0))return;let e_=d;if(e_.classList.contains(ec)||eh&&e_.matches(eh))return;let ew=getInputType(d),ex=getInputValue(e_,em,ew),ek=!1,eT=shouldMaskInput({maskInputOptions:ep,tagName:em,type:ew}),eE=needMaskingText(d,eO,ev,ey,eS,eT);("radio"===ew||"checkbox"===ew)&&(ek=d.checked),ex=maskInputValue({isMasked:eE,element:d,value:ex,maskInputFn:ef}),cbWithDedup(d,eg?{text:ex,isChecked:ek,userTriggered:V}:{text:ex,isChecked:ek});let eC=d.name;"radio"===ew&&eC&&ek&&_.querySelectorAll('input[type="radio"][name="'.concat(eC,'"]')).forEach(h=>{if(h!==d){let d=maskInputValue({isMasked:eE,element:h,value:getInputValue(h,em,ew),maskInputFn:ef});cbWithDedup(h,eg?{text:d,isChecked:!ek,userTriggered:!1}:{text:d,isChecked:!ek})}})}function cbWithDedup(h,_){let ee=nI.get(h);if(!ee||ee.text!==_.text||ee.isChecked!==_.isChecked){nI.set(h,_);let ee=V.getId(h);callbackWrapper(d)({..._,id:ee})}}let e_="last"===em.input?["change"]:["input","change"],ew=e_.map(h=>on(h,callbackWrapper(eventHandler),_)),ex=_.defaultView;if(!ex)return()=>{ew.forEach(h=>h())};let ek=ex.Object.getOwnPropertyDescriptor(ex.HTMLInputElement.prototype,"value"),eT=[[ex.HTMLInputElement.prototype,"value"],[ex.HTMLInputElement.prototype,"checked"],[ex.HTMLSelectElement.prototype,"value"],[ex.HTMLTextAreaElement.prototype,"value"],[ex.HTMLSelectElement.prototype,"selectedIndex"],[ex.HTMLOptionElement.prototype,"selected"]];return ek&&ek.set&&ew.push(...eT.map(h=>(function hookSetter(h,d,_,V){let ee=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window,er=ee.Object.getOwnPropertyDescriptor(h,d);return ee.Object.defineProperty(h,d,V?_:{set(h){setTimeout(()=>{_.set.call(this,h)},0),er&&er.set&&er.set.call(this,h)}}),()=>hookSetter(h,d,er||{},!0)})(h[0],h[1],{set(){callbackWrapper(eventHandler)({target:this,isTrusted:!1})}},!1,ex))),callbackWrapper(()=>{ew.forEach(h=>h())})}(h),eh=function(h){let{mediaInteractionCb:d,blockClass:_,blockSelector:V,unblockSelector:ee,mirror:er,sampling:eo,doc:ec}=h,eh=callbackWrapper(h=>throttle$1(callbackWrapper(eo=>{let ec=esm_getEventTarget(eo);if(!ec||isBlocked(ec,_,V,ee,!0))return;let{currentTime:eh,volume:ep,muted:ef,playbackRate:em}=ec;d({type:h,id:er.getId(ec),currentTime:eh,volume:ep,muted:ef,playbackRate:em})}),eo.media||500)),ep=[on("play",eh(0),ec),on("pause",eh(1),ec),on("seeked",eh(2),ec),on("volumechange",eh(3),ec),on("ratechange",eh(4),ec)];return callbackWrapper(()=>{ep.forEach(h=>h())})}(h),ep=function(h,d){let _,V,{styleSheetRuleCb:ee,mirror:er,stylesheetManager:eo}=h,{win:ec}=d;if(!ec.CSSStyleSheet||!ec.CSSStyleSheet.prototype)return()=>{};let eh=ec.CSSStyleSheet.prototype.insertRule;ec.CSSStyleSheet.prototype.insertRule=new Proxy(eh,{apply:callbackWrapper((h,d,_)=>{let[V,ec]=_,{id:eh,styleId:ep}=getIdAndStyleId(d,er,eo.styleMirror);return(eh&&-1!==eh||ep&&-1!==ep)&&ee({id:eh,styleId:ep,adds:[{rule:V,index:ec}]}),h.apply(d,_)})});let ep=ec.CSSStyleSheet.prototype.deleteRule;ec.CSSStyleSheet.prototype.deleteRule=new Proxy(ep,{apply:callbackWrapper((h,d,_)=>{let[V]=_,{id:ec,styleId:eh}=getIdAndStyleId(d,er,eo.styleMirror);return(ec&&-1!==ec||eh&&-1!==eh)&&ee({id:ec,styleId:eh,removes:[{index:V}]}),h.apply(d,_)})}),ec.CSSStyleSheet.prototype.replace&&(_=ec.CSSStyleSheet.prototype.replace,ec.CSSStyleSheet.prototype.replace=new Proxy(_,{apply:callbackWrapper((h,d,_)=>{let[V]=_,{id:ec,styleId:eh}=getIdAndStyleId(d,er,eo.styleMirror);return(ec&&-1!==ec||eh&&-1!==eh)&&ee({id:ec,styleId:eh,replace:V}),h.apply(d,_)})})),ec.CSSStyleSheet.prototype.replaceSync&&(V=ec.CSSStyleSheet.prototype.replaceSync,ec.CSSStyleSheet.prototype.replaceSync=new Proxy(V,{apply:callbackWrapper((h,d,_)=>{let[V]=_,{id:ec,styleId:eh}=getIdAndStyleId(d,er,eo.styleMirror);return(ec&&-1!==ec||eh&&-1!==eh)&&ee({id:ec,styleId:eh,replaceSync:V}),h.apply(d,_)})}));let ef={};canMonkeyPatchNestedCSSRule("CSSGroupingRule")?ef.CSSGroupingRule=ec.CSSGroupingRule:(canMonkeyPatchNestedCSSRule("CSSMediaRule")&&(ef.CSSMediaRule=ec.CSSMediaRule),canMonkeyPatchNestedCSSRule("CSSConditionRule")&&(ef.CSSConditionRule=ec.CSSConditionRule),canMonkeyPatchNestedCSSRule("CSSSupportsRule")&&(ef.CSSSupportsRule=ec.CSSSupportsRule));let em={};return Object.entries(ef).forEach(h=>{let[d,_]=h;em[d]={insertRule:_.prototype.insertRule,deleteRule:_.prototype.deleteRule},_.prototype.insertRule=new Proxy(em[d].insertRule,{apply:callbackWrapper((h,d,_)=>{let[V,ec]=_,{id:eh,styleId:ep}=getIdAndStyleId(d.parentStyleSheet,er,eo.styleMirror);return(eh&&-1!==eh||ep&&-1!==ep)&&ee({id:eh,styleId:ep,adds:[{rule:V,index:[...getNestedCSSRulePositions(d),ec||0]}]}),h.apply(d,_)})}),_.prototype.deleteRule=new Proxy(em[d].deleteRule,{apply:callbackWrapper((h,d,_)=>{let[V]=_,{id:ec,styleId:eh}=getIdAndStyleId(d.parentStyleSheet,er,eo.styleMirror);return(ec&&-1!==ec||eh&&-1!==eh)&&ee({id:ec,styleId:eh,removes:[{index:[...getNestedCSSRulePositions(d),V]}]}),h.apply(d,_)})})}),callbackWrapper(()=>{ec.CSSStyleSheet.prototype.insertRule=eh,ec.CSSStyleSheet.prototype.deleteRule=ep,_&&(ec.CSSStyleSheet.prototype.replace=_),V&&(ec.CSSStyleSheet.prototype.replaceSync=V),Object.entries(ef).forEach(h=>{let[d,_]=h;_.prototype.insertRule=em[d].insertRule,_.prototype.deleteRule=em[d].deleteRule})})}(h,{win:d}),ef=initAdoptedStyleSheetObserver(h,h.doc),em=function(h,d){let{styleDeclarationCb:_,mirror:V,ignoreCSSAttributes:ee,stylesheetManager:er}=h,{win:eo}=d,ec=eo.CSSStyleDeclaration.prototype.setProperty;eo.CSSStyleDeclaration.prototype.setProperty=new Proxy(ec,{apply:callbackWrapper((h,d,eo)=>{let[eh,ep,ef]=eo;if(ee.has(eh))return ec.apply(d,[eh,ep,ef]);let{id:em,styleId:eg}=getIdAndStyleId(_optionalChain$2([d,"access",h=>h.parentRule,"optionalAccess",h=>h.parentStyleSheet]),V,er.styleMirror);return(em&&-1!==em||eg&&-1!==eg)&&_({id:em,styleId:eg,set:{property:eh,value:ep,priority:ef},index:getNestedCSSRulePositions(d.parentRule)}),h.apply(d,eo)})});let eh=eo.CSSStyleDeclaration.prototype.removeProperty;return eo.CSSStyleDeclaration.prototype.removeProperty=new Proxy(eh,{apply:callbackWrapper((h,d,eo)=>{let[ec]=eo;if(ee.has(ec))return eh.apply(d,[ec]);let{id:ep,styleId:ef}=getIdAndStyleId(_optionalChain$2([d,"access",h=>h.parentRule,"optionalAccess",h=>h.parentStyleSheet]),V,er.styleMirror);return(ep&&-1!==ep||ef&&-1!==ef)&&_({id:ep,styleId:ef,remove:{property:ec},index:getNestedCSSRulePositions(d.parentRule)}),h.apply(d,eo)})}),callbackWrapper(()=>{eo.CSSStyleDeclaration.prototype.setProperty=ec,eo.CSSStyleDeclaration.prototype.removeProperty=eh})}(h,{win:d}),eg=h.collectFonts?function(h){let{fontCb:d,doc:_}=h,V=_.defaultView;if(!V)return()=>{};let ee=[],er=new WeakMap,eo=V.FontFace;V.FontFace=function(h,d,_){let V=new eo(h,d,_);return er.set(V,{family:h,buffer:"string"!=typeof d,descriptors:_,fontSource:"string"==typeof d?d:JSON.stringify(Array.from(new Uint8Array(d)))}),V};let ec=patch(_.fonts,"add",function(h){return function(_){return setTimeout(callbackWrapper(()=>{let h=er.get(_);h&&(d(h),er.delete(_))}),0),h.apply(this,[_])}});return ee.push(()=>{V.FontFace=eo}),ee.push(ec),callbackWrapper(()=>{ee.forEach(h=>h())})}(h):()=>{},eO=function(h){let{doc:d,mirror:_,blockClass:V,blockSelector:ee,unblockSelector:er,selectionCb:eo}=h,ec=!0,eh=callbackWrapper(()=>{let h=d.getSelection();if(!h||ec&&_optionalChain$2([h,"optionalAccess",h=>h.isCollapsed]))return;ec=h.isCollapsed||!1;let eh=[],ep=h.rangeCount||0;for(let d=0;d<ep;d++){let eo=h.getRangeAt(d),{startContainer:ec,startOffset:ep,endContainer:ef,endOffset:em}=eo,eg=isBlocked(ec,V,ee,er,!0)||isBlocked(ef,V,ee,er,!0);eg||eh.push({start:_.getId(ec),startOffset:ep,end:_.getId(ef),endOffset:em})}eo({ranges:eh})});return eh(),on("selectionchange",eh)}(h),ey=function(h){let{doc:d,customElementCb:_}=h,V=d.defaultView;if(!V||!V.customElements)return()=>{};let ee=patch(V.customElements,"define",function(h){return function(d,V,ee){try{_({define:{name:d}})}catch(h){}return h.apply(this,[d,V,ee])}});return ee}(h),ev=[];for(let _ of h.plugins)ev.push(_.observer(_.callback,d,_.options));return callbackWrapper(()=>{nC.forEach(h=>h.reset()),_.disconnect(),V(),ee(),er(),eo(),ec(),eh(),ep(),ef(),em(),eg(),eO(),ey(),ev.forEach(h=>h())})}function hasNestedCSSRule(h){return void 0!==window[h]}function canMonkeyPatchNestedCSSRule(h){return!!(void 0!==window[h]&&window[h].prototype&&"insertRule"in window[h].prototype&&"deleteRule"in window[h].prototype)}let CrossOriginIframeMirror=class CrossOriginIframeMirror{getId(h,d,_,V){let ee=_||this.getIdToRemoteIdMap(h),er=V||this.getRemoteIdToIdMap(h),eo=ee.get(d);return eo||(eo=this.generateIdFn(),ee.set(d,eo),er.set(eo,d)),eo}getIds(h,d){let _=this.getIdToRemoteIdMap(h),V=this.getRemoteIdToIdMap(h);return d.map(d=>this.getId(h,d,_,V))}getRemoteId(h,d,_){let V=_||this.getRemoteIdToIdMap(h);if("number"!=typeof d)return d;let ee=V.get(d);return ee||-1}getRemoteIds(h,d){let _=this.getRemoteIdToIdMap(h);return d.map(d=>this.getRemoteId(h,d,_))}reset(h){if(!h){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(h),this.iframeRemoteIdToIdMap.delete(h)}getIdToRemoteIdMap(h){let d=this.iframeIdToRemoteIdMap.get(h);return d||(d=new Map,this.iframeIdToRemoteIdMap.set(h,d)),d}getRemoteIdToIdMap(h){let d=this.iframeRemoteIdToIdMap.get(h);return d||(d=new Map,this.iframeRemoteIdToIdMap.set(h,d)),d}constructor(h){this.generateIdFn=h,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}};function _optionalChain$1(h){let d;let _=h[0],V=1;for(;V<h.length;){let ee=h[V],er=h[V+1];if(V+=2,("optionalAccess"===ee||"optionalCall"===ee)&&null==_)return;"access"===ee||"optionalAccess"===ee?(d=_,_=er(_)):("call"===ee||"optionalCall"===ee)&&(_=er(function(){for(var h=arguments.length,V=Array(h),ee=0;ee<h;ee++)V[ee]=arguments[ee];return _.call(d,...V)}),d=void 0)}return _}let IframeManagerNoop=class IframeManagerNoop{addIframe(){}addLoadListener(){}attachIframe(){}constructor(){this.crossOriginIframeMirror=new CrossOriginIframeMirror(genId),this.crossOriginIframeRootIdMap=new WeakMap}};let IframeManager=class IframeManager{addIframe(h){this.iframes.set(h,!0),h.contentWindow&&this.crossOriginIframeMap.set(h.contentWindow,h)}addLoadListener(h){this.loadListener=h}attachIframe(h,d){this.mutationCb({adds:[{parentId:this.mirror.getId(h),nextId:null,node:d}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),_optionalChain$1([this,"access",h=>h.loadListener,"optionalCall",d=>d(h)]),h.contentDocument&&h.contentDocument.adoptedStyleSheets&&h.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(h.contentDocument.adoptedStyleSheets,this.mirror.getId(h.contentDocument))}handleMessage(h){if("rrweb"!==h.data.type||h.origin!==h.data.origin)return;let d=h.source;if(!d)return;let _=this.crossOriginIframeMap.get(h.source);if(!_)return;let V=this.transformCrossOriginEvent(_,h.data.event);V&&this.wrappedEmit(V,h.data.isCheckout)}transformCrossOriginEvent(h,d){switch(d.type){case nx.FullSnapshot:{this.crossOriginIframeMirror.reset(h),this.crossOriginIframeStyleMirror.reset(h),this.replaceIdOnNode(d.data.node,h);let _=d.data.node.id;return this.crossOriginIframeRootIdMap.set(h,_),this.patchRootIdOnNode(d.data.node,_),{timestamp:d.timestamp,type:nx.IncrementalSnapshot,data:{source:nk.Mutation,adds:[{parentId:this.mirror.getId(h),nextId:null,node:d.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case nx.Meta:case nx.Load:case nx.DomContentLoaded:break;case nx.Plugin:return d;case nx.Custom:return this.replaceIds(d.data.payload,h,["id","parentId","previousId","nextId"]),d;case nx.IncrementalSnapshot:switch(d.data.source){case nk.Mutation:return d.data.adds.forEach(d=>{this.replaceIds(d,h,["parentId","nextId","previousId"]),this.replaceIdOnNode(d.node,h);let _=this.crossOriginIframeRootIdMap.get(h);_&&this.patchRootIdOnNode(d.node,_)}),d.data.removes.forEach(d=>{this.replaceIds(d,h,["parentId","id"])}),d.data.attributes.forEach(d=>{this.replaceIds(d,h,["id"])}),d.data.texts.forEach(d=>{this.replaceIds(d,h,["id"])}),d;case nk.Drag:case nk.TouchMove:case nk.MouseMove:return d.data.positions.forEach(d=>{this.replaceIds(d,h,["id"])}),d;case nk.ViewportResize:return!1;case nk.MediaInteraction:case nk.MouseInteraction:case nk.Scroll:case nk.CanvasMutation:case nk.Input:return this.replaceIds(d.data,h,["id"]),d;case nk.StyleSheetRule:case nk.StyleDeclaration:return this.replaceIds(d.data,h,["id"]),this.replaceStyleIds(d.data,h,["styleId"]),d;case nk.Font:return d;case nk.Selection:return d.data.ranges.forEach(d=>{this.replaceIds(d,h,["start","end"])}),d;case nk.AdoptedStyleSheet:return this.replaceIds(d.data,h,["id"]),this.replaceStyleIds(d.data,h,["styleIds"]),_optionalChain$1([d,"access",h=>h.data,"access",h=>h.styles,"optionalAccess",h=>h.forEach,"call",d=>d(d=>{this.replaceStyleIds(d,h,["styleId"])})]),d}}return!1}replace(h,d,_,V){for(let ee of V)(Array.isArray(d[ee])||"number"==typeof d[ee])&&(Array.isArray(d[ee])?d[ee]=h.getIds(_,d[ee]):d[ee]=h.getId(_,d[ee]));return d}replaceIds(h,d,_){return this.replace(this.crossOriginIframeMirror,h,d,_)}replaceStyleIds(h,d,_){return this.replace(this.crossOriginIframeStyleMirror,h,d,_)}replaceIdOnNode(h,d){this.replaceIds(h,d,["id","rootId"]),"childNodes"in h&&h.childNodes.forEach(h=>{this.replaceIdOnNode(h,d)})}patchRootIdOnNode(h,d){h.type===td.Document||h.rootId||(h.rootId=d),"childNodes"in h&&h.childNodes.forEach(h=>{this.patchRootIdOnNode(h,d)})}constructor(h){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new CrossOriginIframeMirror(genId),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=h.mutationCb,this.wrappedEmit=h.wrappedEmit,this.stylesheetManager=h.stylesheetManager,this.recordCrossOriginIframes=h.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new CrossOriginIframeMirror(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=h.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}};let ShadowDomManagerNoop=class ShadowDomManagerNoop{init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}};let ShadowDomManager=class ShadowDomManager{init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(h,d){if(!isNativeShadowDom(h)||this.shadowDoms.has(h))return;this.shadowDoms.add(h);let _=initMutationObserver({...this.bypassOptions,doc:d,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},h);this.restoreHandlers.push(()=>_.disconnect()),this.restoreHandlers.push(initScrollObserver({...this.bypassOptions,scrollCb:this.scrollCb,doc:h,mirror:this.mirror})),setTimeout(()=>{h.adoptedStyleSheets&&h.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(h.adoptedStyleSheets,this.mirror.getId(h.host)),this.restoreHandlers.push(initAdoptedStyleSheetObserver({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},h))},0)}observeAttachShadow(h){h.contentWindow&&h.contentDocument&&this.patchAttachShadow(h.contentWindow.Element,h.contentDocument)}patchAttachShadow(h,d){let _=this;this.restoreHandlers.push(patch(h.prototype,"attachShadow",function(h){return function(V){let ee=h.call(this,V);return this.shadowRoot&&inDom(this)&&_.addShadowRoot(this.shadowRoot,d),ee}}))}reset(){this.restoreHandlers.forEach(h=>{try{h()}catch(h){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}constructor(h){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=h.mutationCb,this.scrollCb=h.scrollCb,this.bypassOptions=h.bypassOptions,this.mirror=h.mirror,this.init()}};let CanvasManagerNoop=class CanvasManagerNoop{reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}};let StylesheetManager=class StylesheetManager{attachLinkElement(h,d){"_cssText"in d.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:d.id,attributes:d.attributes}]}),this.trackLinkElement(h)}trackLinkElement(h){this.trackedLinkElements.has(h)||(this.trackedLinkElements.add(h),this.trackStylesheetInLinkElement(h))}adoptStyleSheets(h,d){if(0===h.length)return;let _={id:d,styleIds:[]},V=[];for(let d of h){let h;this.styleMirror.has(d)?h=this.styleMirror.getId(d):(h=this.styleMirror.add(d),V.push({styleId:h,rules:Array.from(d.rules||CSSRule,(h,d)=>({rule:stringifyRule(h),index:d}))})),_.styleIds.push(h)}V.length>0&&(_.styles=V),this.adoptedStyleSheetCb(_)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(h){}constructor(h){this.trackedLinkElements=new WeakSet,this.styleMirror=new StyleSheetMirror,this.mutationCb=h.mutationCb,this.adoptedStyleSheetCb=h.adoptedStyleSheetCb}};let ProcessedNodeManager=class ProcessedNodeManager{periodicallyClear(){!function(){for(var h=arguments.length,d=Array(h),_=0;_<h;_++)d[_]=arguments[_];(function(){if(eS)return eS;let h=window.document,d=window.requestAnimationFrame;if(h&&"function"==typeof h.createElement)try{let _=h.createElement("iframe");_.hidden=!0,h.head.appendChild(_);let V=_.contentWindow;V&&V.requestAnimationFrame&&(d=V.requestAnimationFrame),h.head.removeChild(_)}catch(h){}return eS=d.bind(window)})()(...d)}(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(h,d){let _=this.nodeMap.get(h);return _&&Array.from(_).some(h=>h!==d)}add(h,d){this.nodeMap.set(h,(this.nodeMap.get(h)||new Set).add(d))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}};function wrapEvent(h){return h.timestamp=nw(),h}let nR=new Mirror;function record(){let h,d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{emit:_,checkoutEveryNms:V,checkoutEveryNth:ee,blockClass:er="rr-block",blockSelector:eo=null,unblockSelector:ec=null,ignoreClass:eh="rr-ignore",ignoreSelector:ep=null,maskAllText:ef=!1,maskTextClass:em="rr-mask",unmaskTextClass:eg=null,maskTextSelector:eO=null,unmaskTextSelector:ey=null,inlineStylesheet:ev=!0,maskAllInputs:eS,maskInputOptions:ex,slimDOMOptions:ek,maskAttributeFn:eT,maskInputFn:eE,maskTextFn:eC,packFn:eP,sampling:eI={},dataURLOptions:eR={},mousemoveWait:eA,recordCanvas:e$=!1,recordCrossOriginIframes:eN=!1,recordAfter:eM="DOMContentLoaded"===d.recordAfter?d.recordAfter:"load",userTriggeredOnInput:eQ=!1,collectFonts:eD=!1,inlineImages:ej=!1,plugins:eL,keepIframeSrcFn:eF=()=>!1,ignoreCSSAttributes:eZ=new Set([]),errorHandler:eV,onMutation:eB,getCanvasManager:eW}=d;e_=eV;let eU=!eN||window.parent===window,ez=!1;if(!eU)try{window.parent.document&&(ez=!1)}catch(h){ez=!0}if(eU&&!_)throw Error("emit function is required");void 0!==eA&&void 0===eI.mousemove&&(eI.mousemove=eA),nR.reset();let eq=!0===eS?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==ex?ex:{},eX=!0===ek||"all"===ek?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===ek,headMetaDescKeywords:"all"===ek}:ek||{};!function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:window;if("NodeList"in h&&!h.NodeList.prototype.forEach&&(h.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in h&&!h.DOMTokenList.prototype.forEach&&(h.DOMTokenList.prototype.forEach=Array.prototype.forEach),!Node.prototype.contains){var d=this;Node.prototype.contains=function(){for(var h=arguments.length,_=Array(h),V=0;V<h;V++)_[V]=arguments[V];let ee=_[0];if(!(0 in _))throw TypeError("1 argument is required");do if(d===ee)return!0;while(ee=ee&&ee.parentNode);return!1}}}();let eY=0,eventProcessor=h=>{for(let d of eL||[])d.eventProcessor&&(h=d.eventProcessor(h));return eP&&!ez&&(h=eP(h)),h},wrappedEmit=(d,er)=>{if(_optionalChain([nC,"access",h=>h[0],"optionalAccess",h=>h.isFrozen,"call",h=>h()])&&d.type!==nx.FullSnapshot&&!(d.type===nx.IncrementalSnapshot&&d.data.source===nk.Mutation)&&nC.forEach(h=>h.unfreeze()),eU)_optionalChain([_,"optionalCall",h=>h(eventProcessor(d),er)]);else if(ez){let h={type:"rrweb",event:eventProcessor(d),origin:window.location.origin,isCheckout:er};window.parent.postMessage(h,"*")}if(d.type===nx.FullSnapshot)h=d,eY=0;else if(d.type===nx.IncrementalSnapshot){if(d.data.source===nk.Mutation&&d.data.isAttachIframe)return;eY++;let _=ee&&eY>=ee,er=V&&d.timestamp-h.timestamp>V;(_||er)&&takeFullSnapshot(!0)}},wrappedMutationEmit=h=>{wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.Mutation,...h}}))},wrappedScrollEmit=h=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.Scroll,...h}})),wrappedCanvasMutationEmit=h=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.CanvasMutation,...h}})),eG=new StylesheetManager({mutationCb:wrappedMutationEmit,adoptedStyleSheetCb:h=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.AdoptedStyleSheet,...h}}))}),eH="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new IframeManagerNoop:new IframeManager({mirror:nR,mutationCb:wrappedMutationEmit,stylesheetManager:eG,recordCrossOriginIframes:eN,wrappedEmit});for(let h of eL||[])h.getMirror&&h.getMirror({nodeMirror:nR,crossOriginIframeMirror:eH.crossOriginIframeMirror,crossOriginIframeStyleMirror:eH.crossOriginIframeStyleMirror});let eK=new ProcessedNodeManager,eJ=function(h,d){try{return h?h(d):new CanvasManagerNoop}catch(h){return console.warn("Unable to initialize CanvasManager"),new CanvasManagerNoop}}(eW,{mirror:nR,win:window,mutationCb:h=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.CanvasMutation,...h}})),recordCanvas:e$,blockClass:er,blockSelector:eo,unblockSelector:ec,sampling:eI.canvas,dataURLOptions:eR}),e0="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new ShadowDomManagerNoop:new ShadowDomManager({mutationCb:wrappedMutationEmit,scrollCb:wrappedScrollEmit,bypassOptions:{onMutation:eB,blockClass:er,blockSelector:eo,unblockSelector:ec,maskAllText:ef,maskTextClass:em,unmaskTextClass:eg,maskTextSelector:eO,unmaskTextSelector:ey,inlineStylesheet:ev,maskInputOptions:eq,dataURLOptions:eR,maskAttributeFn:eT,maskTextFn:eC,maskInputFn:eE,recordCanvas:e$,inlineImages:ej,sampling:eI,slimDOMOptions:eX,iframeManager:eH,stylesheetManager:eG,canvasManager:eJ,keepIframeSrcFn:eF,processedNodeManager:eK},mirror:nR}),takeFullSnapshot=function(){let h=arguments.length>0&&void 0!==arguments[0]&&arguments[0];wrappedEmit(wrapEvent({type:nx.Meta,data:{href:window.location.href,width:getWindowWidth(),height:getWindowHeight()}}),h),eG.reset(),e0.init(),nC.forEach(h=>h.lock());let d=function(h,d){let{mirror:_=new Mirror,blockClass:V="rr-block",blockSelector:ee=null,unblockSelector:er=null,maskAllText:eo=!1,maskTextClass:ec="rr-mask",unmaskTextClass:eh=null,maskTextSelector:ep=null,unmaskTextSelector:ef=null,inlineStylesheet:em=!0,inlineImages:eg=!1,recordCanvas:eO=!1,maskAllInputs:ey=!1,maskAttributeFn:ev,maskTextFn:eS,maskInputFn:e_,slimDOM:ew=!1,dataURLOptions:ex,preserveWhiteSpace:ek,onSerialize:eT,onIframeLoad:eE,iframeLoadTimeout:eC,onStylesheetLoad:eP,stylesheetLoadTimeout:eI,keepIframeSrcFn:eR=()=>!1}=d||{},eA=!0===ey?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===ey?{}:ey,e$=!0===ew||"all"===ew?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===ew,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===ew?{}:ew;return serializeNodeWithId(h,{doc:h,mirror:_,blockClass:V,blockSelector:ee,unblockSelector:er,maskAllText:eo,maskTextClass:ec,unmaskTextClass:eh,maskTextSelector:ep,unmaskTextSelector:ef,skipChild:!1,inlineStylesheet:em,maskInputOptions:eA,maskAttributeFn:ev,maskTextFn:eS,maskInputFn:e_,slimDOMOptions:e$,dataURLOptions:ex,inlineImages:eg,recordCanvas:eO,preserveWhiteSpace:ek,onSerialize:eT,onIframeLoad:eE,iframeLoadTimeout:eC,onStylesheetLoad:eP,stylesheetLoadTimeout:eI,keepIframeSrcFn:eR,newlyAddedElement:!1})}(document,{mirror:nR,blockClass:er,blockSelector:eo,unblockSelector:ec,maskAllText:ef,maskTextClass:em,unmaskTextClass:eg,maskTextSelector:eO,unmaskTextSelector:ey,inlineStylesheet:ev,maskAllInputs:eq,maskAttributeFn:eT,maskInputFn:eE,maskTextFn:eC,slimDOM:eX,dataURLOptions:eR,recordCanvas:e$,inlineImages:ej,onSerialize:h=>{isSerializedIframe(h,nR)&&eH.addIframe(h),isSerializedStylesheet(h,nR)&&eG.trackLinkElement(h),hasShadowRoot(h)&&e0.addShadowRoot(h.shadowRoot,document)},onIframeLoad:(h,d)=>{eH.attachIframe(h,d),e0.observeAttachShadow(h)},onStylesheetLoad:(h,d)=>{eG.attachLinkElement(h,d)},keepIframeSrcFn:eF});if(!d)return console.warn("Failed to snapshot the document");wrappedEmit(wrapEvent({type:nx.FullSnapshot,data:{node:d,initialOffset:getWindowScroll(window)}})),nC.forEach(h=>h.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&eG.adoptStyleSheets(document.adoptedStyleSheets,nR.getId(document))};ew=takeFullSnapshot;try{let h=[],observe=h=>callbackWrapper(initObservers)({onMutation:eB,mutationCb:wrappedMutationEmit,mousemoveCb:(h,d)=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:d,positions:h}})),mouseInteractionCb:h=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.MouseInteraction,...h}})),scrollCb:wrappedScrollEmit,viewportResizeCb:h=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.ViewportResize,...h}})),inputCb:h=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.Input,...h}})),mediaInteractionCb:h=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.MediaInteraction,...h}})),styleSheetRuleCb:h=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.StyleSheetRule,...h}})),styleDeclarationCb:h=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.StyleDeclaration,...h}})),canvasMutationCb:wrappedCanvasMutationEmit,fontCb:h=>wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.Font,...h}})),selectionCb:h=>{wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.Selection,...h}}))},customElementCb:h=>{wrappedEmit(wrapEvent({type:nx.IncrementalSnapshot,data:{source:nk.CustomElement,...h}}))},blockClass:er,ignoreClass:eh,ignoreSelector:ep,maskAllText:ef,maskTextClass:em,unmaskTextClass:eg,maskTextSelector:eO,unmaskTextSelector:ey,maskInputOptions:eq,inlineStylesheet:ev,sampling:eI,recordCanvas:e$,inlineImages:ej,userTriggeredOnInput:eQ,collectFonts:eD,doc:h,maskAttributeFn:eT,maskInputFn:eE,maskTextFn:eC,keepIframeSrcFn:eF,blockSelector:eo,unblockSelector:ec,slimDOMOptions:eX,dataURLOptions:eR,mirror:nR,iframeManager:eH,stylesheetManager:eG,shadowDomManager:e0,processedNodeManager:eK,canvasManager:eJ,ignoreCSSAttributes:eZ,plugins:_optionalChain([eL,"optionalAccess",h=>h.filter,"call",h=>h(h=>h.observer),"optionalAccess",h=>h.map,"call",h=>h(h=>({observer:h.observer,options:h.options,callback:d=>wrappedEmit(wrapEvent({type:nx.Plugin,data:{plugin:h.name,payload:d}}))}))])||[]},{});eH.addLoadListener(d=>{try{h.push(observe(d.contentDocument))}catch(h){console.warn(h)}});let init=()=>{takeFullSnapshot(),h.push(observe(document))};return"interactive"===document.readyState||"complete"===document.readyState?init():(h.push(on("DOMContentLoaded",()=>{wrappedEmit(wrapEvent({type:nx.DomContentLoaded,data:{}})),"DOMContentLoaded"===eM&&init()})),h.push(on("load",()=>{wrappedEmit(wrapEvent({type:nx.Load,data:{}})),"load"===eM&&init()},window))),()=>{h.forEach(h=>h()),eK.destroy(),ew=void 0,e_=void 0}}catch(h){console.warn(h)}}function timestampToMs(h){return h>9999999999?h:1e3*h}function timestampToS(h){return h>9999999999?h/1e3:h}function addBreadcrumbEvent(h,d){"sentry.transaction"!==d.category&&(["ui.click","ui.input"].includes(d.category)?h.triggerUserActivity():h.checkAndHandleExpiredSession(),h.addUpdate(()=>(h.throttledAddEvent({type:nx.Custom,timestamp:1e3*(d.timestamp||0),data:{tag:"breadcrumb",payload:normalize(d,10,1e3)}}),"console"===d.category)))}function getClosestInteractive(h){let d=h.closest("button,a");return d||h}function getClickTargetNode(h){let d=getTargetNode(h);return d&&d instanceof Element?getClosestInteractive(d):d}function getTargetNode(h){return"object"==typeof h&&h&&"target"in h?h.target:h}record.mirror=nR,record.takeFullSnapshot=function(h){if(!ew)throw Error("please take full snapshot after start recording");ew(h)};let ClickDetector=class ClickDetector{addListeners(){var h;let d=(h=()=>{this._lastMutation=nowInSeconds()},ex||(ex=[],fill(eC,"open",function(h){return function(){for(var d=arguments.length,_=Array(d),V=0;V<d;V++)_[V]=arguments[V];if(ex)try{ex.forEach(h=>h())}catch(h){}return h.apply(eC,_)}})),ex.push(h),()=>{let d=ex?ex.indexOf(h):-1;d>-1&&ex.splice(d,1)});this._teardown=()=>{d(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(h,d){var _;if(_=this._ignoreSelector,!nA.includes(d.tagName)||"INPUT"===d.tagName&&!["submit","button"].includes(d.getAttribute("type")||"")||"A"===d.tagName&&(d.hasAttribute("download")||d.hasAttribute("target")&&"_self"!==d.getAttribute("target"))||_&&d.matches(_)||!(h.data&&"number"==typeof h.data.nodeId&&h.timestamp))return;let V={timestamp:timestampToS(h.timestamp),clickBreadcrumb:h,clickCount:0,node:d};this._clicks.some(h=>h.node===V.node&&1>Math.abs(h.timestamp-V.timestamp))||(this._clicks.push(V),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastMutation=timestampToS(h)}registerScroll(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastScroll=timestampToS(h)}registerClick(h){let d=getClosestInteractive(h);this._handleMultiClick(d)}_handleMultiClick(h){this._getClicks(h).forEach(h=>{h.clickCount++})}_getClicks(h){return this._clicks.filter(d=>d.node===h)}_checkClicks(){let h=[],d=nowInSeconds();for(let _ of(this._clicks.forEach(_=>{!_.mutationAfter&&this._lastMutation&&(_.mutationAfter=_.timestamp<=this._lastMutation?this._lastMutation-_.timestamp:void 0),!_.scrollAfter&&this._lastScroll&&(_.scrollAfter=_.timestamp<=this._lastScroll?this._lastScroll-_.timestamp:void 0),_.timestamp+this._timeout<=d&&h.push(_)}),h)){let h=this._clicks.indexOf(_);h>-1&&(this._generateBreadcrumbs(_),this._clicks.splice(h,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(h){let d=this._replay,_=h.scrollAfter&&h.scrollAfter<=this._scollTimeout,V=h.mutationAfter&&h.mutationAfter<=this._threshold,{clickCount:ee,clickBreadcrumb:er}=h;if(!_&&!V){let _=1e3*Math.min(h.mutationAfter||this._timeout,this._timeout),V=_<1e3*this._timeout?"mutation":"timeout",eo={type:"default",message:er.message,timestamp:er.timestamp,category:"ui.slowClickDetected",data:{...er.data,url:eC.location.href,route:d.getCurrentRoute(),timeAfterClickMs:_,endReason:V,clickCount:ee||1}};this._addBreadcrumbEvent(d,eo);return}if(ee>1){let h={type:"default",message:er.message,timestamp:er.timestamp,category:"ui.multiClick",data:{...er.data,url:eC.location.href,route:d.getCurrentRoute(),clickCount:ee,metric:!0}};this._addBreadcrumbEvent(d,h)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}constructor(h,d,_=addBreadcrumbEvent){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=d.timeout/1e3,this._threshold=d.threshold/1e3,this._scollTimeout=d.scrollTimeout/1e3,this._replay=h,this._ignoreSelector=d.ignoreSelector,this._addBreadcrumbEvent=_}};let nA=["A","BUTTON","INPUT"];function nowInSeconds(){return Date.now()/1e3}function createBreadcrumb(h){return{timestamp:Date.now()/1e3,type:"default",...h}}(to=tp||(tp={}))[to.Document=0]="Document",to[to.DocumentType=1]="DocumentType",to[to.Element=2]="Element",to[to.Text=3]="Text",to[to.CDATA=4]="CDATA",to[to.Comment=5]="Comment";let n$=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]),handleDomListener=h=>d=>{if(!h.isEnabled())return;let _=function(h){let{target:d,message:_}=function(h){let d;let _="click"===h.name,V=null;try{V=_?getClickTargetNode(h.event):getTargetNode(h.event),d=htmlTreeAsString(V,{maxStringLength:200})||"<unknown>"}catch(h){d="<unknown>"}return{target:V,message:d}}(h);return createBreadcrumb({category:"ui.".concat(h.name),...getBaseDomBreadcrumb(d,_)})}(d);if(!_)return;let V="click"===d.name,ee=V?d.event:void 0;V&&h.clickDetector&&ee&&ee.target&&!ee.altKey&&!ee.metaKey&&!ee.ctrlKey&&!ee.shiftKey&&function(h,d,_){h.handleClick(d,_)}(h.clickDetector,_,getClickTargetNode(d.event)),addBreadcrumbEvent(h,_)};function getBaseDomBreadcrumb(h,d){let _=record.mirror.getId(h),V=_&&record.mirror.getNode(_),ee=V&&record.mirror.getMeta(V),er=ee&&ee.type===tp.Element?ee:null;return{message:d,data:er?{nodeId:_,node:{id:_,tagName:er.tagName,textContent:Array.from(er.childNodes).map(h=>h.type===tp.Text&&h.textContent).filter(Boolean).map(h=>h.trim()).join(""),attributes:function(h){let d={};for(let _ in h)if(n$.has(_)){let V=_;("data-testid"===_||"data-test-id"===_)&&(V="testId"),d[V]=h[_]}return d}(er.attributes)}}:{}}}let nN={resource:function(h){let{entryType:d,initiatorType:_,name:V,responseEnd:ee,startTime:er,decodedBodySize:eo,encodedBodySize:ec,responseStatus:eh,transferSize:ep}=h;return["fetch","xmlhttprequest"].includes(_)?null:{type:"".concat(d,".").concat(_),start:esm_getAbsoluteTime(er),end:esm_getAbsoluteTime(ee),name:V,data:{size:ep,statusCode:eh,decodedBodySize:eo,encodedBodySize:ec}}},paint:function(h){let{duration:d,entryType:_,name:V,startTime:ee}=h,er=esm_getAbsoluteTime(ee);return{type:_,name:V,start:er,end:er+d,data:void 0}},navigation:function(h){let{entryType:d,name:_,decodedBodySize:V,duration:ee,domComplete:er,encodedBodySize:eo,domContentLoadedEventStart:ec,domContentLoadedEventEnd:eh,domInteractive:ep,loadEventStart:ef,loadEventEnd:em,redirectCount:eg,startTime:eO,transferSize:ey,type:ev}=h;return 0===ee?null:{type:"".concat(d,".").concat(ev),start:esm_getAbsoluteTime(eO),end:esm_getAbsoluteTime(er),name:_,data:{size:ey,decodedBodySize:V,encodedBodySize:eo,duration:ee,domInteractive:ep,domContentLoadedEventStart:ec,domContentLoadedEventEnd:eh,loadEventStart:ef,loadEventEnd:em,domComplete:er,redirectCount:eg}}}};function createPerformanceEntry(h){return nN[h.entryType]?nN[h.entryType](h):null}function esm_getAbsoluteTime(h){return((eM||eC.performance.timeOrigin)+h)/1e3}let EventBufferSizeExceededError=class EventBufferSizeExceededError extends Error{constructor(){super("Event buffer exceeded maximum size of ".concat(2e7,"."))}};let EventBufferArray=class EventBufferArray{get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(h){let d=JSON.stringify(h).length;if(this._totalSize+=d,this._totalSize>2e7)throw new EventBufferSizeExceededError;this.events.push(h)}finish(){return new Promise(h=>{let d=this.events;this.clear(),h(JSON.stringify(d))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){let h=this.events.map(h=>h.timestamp).sort()[0];return h?timestampToMs(h):null}constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}};let WorkerHandler=class WorkerHandler{ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise((h,d)=>{this._worker.addEventListener("message",_=>{let{data:V}=_;V.success?h():d()},{once:!0}),this._worker.addEventListener("error",h=>{d(h)},{once:!0})})),this._ensureReadyPromise}destroy(){this._worker.terminate()}postMessage(h,d){let _=this._getAndIncrementId();return new Promise((V,ee)=>{let listener=d=>{let{data:er}=d;if(er.method===h&&er.id===_){if(this._worker.removeEventListener("message",listener),!er.success){ee(Error("Error in compression worker"));return}V(er.response)}};this._worker.addEventListener("message",listener),this._worker.postMessage({id:_,method:h,arg:d})})}_getAndIncrementId(){return this._id++}constructor(h){this._worker=h,this._id=0}};let EventBufferCompressionWorker=class EventBufferCompressionWorker{get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(h){let d=timestampToMs(h.timestamp);(!this._earliestTimestamp||d<this._earliestTimestamp)&&(this._earliestTimestamp=d);let _=JSON.stringify(h);return(this._totalSize+=_.length,this._totalSize>2e7)?Promise.reject(new EventBufferSizeExceededError):this._sendEventToWorker(_)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,h=>{})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(h){return this._worker.postMessage("addEvent",h)}async _finishRequest(){let h=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,h}constructor(h){this._worker=new WorkerHandler(h),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}};let EventBufferProxy=class EventBufferProxy{get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(h){this._used.hasCheckout=h}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(h){return this._used.addEvent(h)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(h){return}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){let{events:h,hasCheckout:d}=this._fallback,_=[];for(let d of h)_.push(this._compression.addEvent(d));this._compression.hasCheckout=d,this._used=this._compression;try{await Promise.all(_)}catch(h){}}constructor(h){this._fallback=new EventBufferArray,this._compression=new EventBufferCompressionWorker(h),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}};function hasSessionStorage(){try{return"sessionStorage"in eC&&!!eC.sessionStorage}catch(h){return!1}}function isSampled(h){return void 0!==h&&Math.random()<h}function esm_makeSession(h){let d=Date.now(),_=h.id||misc_uuid4(),V=h.started||d,ee=h.lastActivity||d,er=h.segmentId||0,eo=h.sampled,ec=h.previousSessionId;return{id:_,started:V,lastActivity:ee,segmentId:er,sampled:eo,previousSessionId:ec}}function saveSession(h){if(hasSessionStorage())try{eC.sessionStorage.setItem(ni,JSON.stringify(h))}catch(h){}}function createSession(h){let{sessionSampleRate:d,allowBuffering:_,stickySession:V=!1}=h,{previousSessionId:ee}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},er=isSampled(d)?"session":!!_&&"buffer",eo=esm_makeSession({sampled:er,previousSessionId:ee});return V&&saveSession(eo),eo}function isExpired(h,d){let _=arguments.length>2&&void 0!==arguments[2]?arguments[2]:+new Date;return null===h||void 0===d||d<0||0!==d&&h+d<=_}function isSessionExpired(h,d){let{maxReplayDuration:_,sessionIdleExpire:V,targetTime:ee=Date.now()}=d;return isExpired(h.started,_,ee)||isExpired(h.lastActivity,V,ee)}function shouldRefreshSession(h,d){let{sessionIdleExpire:_,maxReplayDuration:V}=d;return!!isSessionExpired(h,{sessionIdleExpire:_,maxReplayDuration:V})&&("buffer"!==h.sampled||0!==h.segmentId)}function loadOrCreateSession(h,d){let{traceInternals:_,sessionIdleExpire:V,maxReplayDuration:ee,previousSessionId:er}=h,eo=d.stickySession&&function(h){if(!hasSessionStorage())return null;try{let h=eC.sessionStorage.getItem(ni);if(!h)return null;let d=JSON.parse(h);return esm_makeSession(d)}catch(h){return null}}(0);return eo?shouldRefreshSession(eo,{sessionIdleExpire:V,maxReplayDuration:ee})?createSession(d,{previousSessionId:eo.id}):eo:createSession(d,{previousSessionId:er})}function addEventSync(h,d,_){return!!shouldAddEvent(h,d)&&(_addEvent(h,d,_),!0)}async function _addEvent(h,d,_){if(!h.eventBuffer)return null;try{_&&"buffer"===h.recordingMode&&h.eventBuffer.clear(),_&&(h.eventBuffer.hasCheckout=!0);let V=h.getOptions(),ee=function(h,d){try{if("function"==typeof d&&h.type===nx.Custom)return d(h)}catch(h){return null}return h}(d,V.beforeAddRecordingEvent);if(!ee)return;return await h.eventBuffer.addEvent(ee)}catch(V){let d=V&&V instanceof EventBufferSizeExceededError?"addEventSizeExceeded":"addEvent";await h.stop({reason:d});let _=exports_getClient();_&&_.recordDroppedEvent("internal_sdk_error","replay")}}function shouldAddEvent(h,d){if(!h.eventBuffer||h.isPaused()||!h.isEnabled())return!1;let _=timestampToMs(d.timestamp);return!(_+h.timeouts.sessionIdlePause<Date.now())&&(!(_>h.getContext().initialTimestamp+h.getOptions().maxReplayDuration)||(h.getOptions()._experiments.traceInternals,!1))}function esm_isTransactionEvent(h){return"transaction"===h.type}function isFeedbackEvent(h){return"feedback"===h.type}function handleAfterSendEvent(h){let d=function(){let h=exports_getClient();if(!h)return!1;let d=h.getTransport();return!!d&&(d.send.__sentry__baseTransport__||!1)}();return(_,V)=>{if(!h.isEnabled()||_.type&&!esm_isTransactionEvent(_))return;let ee=V&&V.statusCode;if(!d||ee&&!(ee<200)&&!(ee>=300)){if(esm_isTransactionEvent(_)){!function(h,d){let _=h.getContext();d.contexts&&d.contexts.trace&&d.contexts.trace.trace_id&&_.traceIds.size<100&&_.traceIds.add(d.contexts.trace.trace_id)}(h,_);return}!function(h,d){let _=h.getContext();if(d.event_id&&_.errorIds.size<100&&_.errorIds.add(d.event_id),"buffer"!==h.recordingMode||!d.tags||!d.tags.replayId)return;let{beforeErrorSampling:V}=h.getOptions();("function"!=typeof V||V(d))&&setTimeout(()=>{h.sendBufferedReplayOrFlush()})}(h,_)}}}function createPerformanceSpans(h,d){return d.map(d=>{let{type:_,start:V,end:ee,name:er,data:eo}=d,ec=h.throttledAddEvent({type:nx.Custom,timestamp:V,data:{tag:"performanceSpan",payload:{op:_,description:er,startTimestamp:V,endTimestamp:ee,data:eo}}});return"string"==typeof ec?Promise.resolve(null):ec})}function addNetworkBreadcrumb(h,d){h.isEnabled()&&null!==d&&!function(h,d){let _=d&&void 0!==d.getClient?d.getClient():d,V=_&&_.getDsn(),ee=_&&_.getOptions().tunnel;return!!V&&h.includes(V.host)||!!ee&&removeTrailingSlash(h)===removeTrailingSlash(ee)}(d.name,exports_getClient())&&h.addUpdate(()=>(createPerformanceSpans(h,[d]),!0))}function getBodySize(h,d){if(h)try{if("string"==typeof h)return d.encode(h).length;if(h instanceof URLSearchParams)return d.encode(h.toString()).length;if(h instanceof FormData){let _=_serializeFormData(h);return d.encode(_).length}if(h instanceof Blob)return h.size;if(h instanceof ArrayBuffer)return h.byteLength}catch(h){}}function parseContentLengthHeader(h){if(!h)return;let d=parseInt(h,10);return isNaN(d)?void 0:d}function getBodyString(h){try{if("string"==typeof h)return[h];if(h instanceof URLSearchParams)return[h.toString()];if(h instanceof FormData)return[_serializeFormData(h)];if(!h)return[void 0]}catch(h){return[void 0,"BODY_PARSE_ERROR"]}return[void 0,"UNPARSEABLE_BODY_TYPE"]}function mergeWarning(h,d){if(!h)return{headers:{},size:void 0,_meta:{warnings:[d]}};let _={...h._meta},V=_.warnings||[];return _.warnings=[...V,d],h._meta=_,h}function makeNetworkReplayBreadcrumb(h,d){if(!d)return null;let{startTimestamp:_,endTimestamp:V,url:ee,method:er,statusCode:eo,request:ec,response:eh}=d,ep={type:h,start:_/1e3,end:V/1e3,name:ee,data:object_dropUndefinedKeys({method:er,statusCode:eo,request:ec,response:eh})};return ep}function buildSkippedNetworkRequestOrResponse(h){return{headers:{},size:h,_meta:{warnings:["URL_SKIPPED"]}}}function buildNetworkRequestOrResponse(h,d,_){if(!d&&0===Object.keys(h).length)return;if(!d)return{headers:h};if(!_)return{headers:h,size:d};let V={headers:h,size:d},{body:ee,warnings:er}=function(h){if(!h||"string"!=typeof h)return{body:h};let d=h.length>15e4,_=function(h){let d=h[0],_=h[h.length-1];return"["===d&&"]"===_||"{"===d&&"}"===_}(h);if(d){let d=h.slice(0,15e4);return _?{body:d,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:"".concat(d,"…"),warnings:["TEXT_TRUNCATED"]}}if(_)try{let d=JSON.parse(h);return{body:d}}catch(h){}return{body:h}}(_);return V.body=ee,er&&er.length>0&&(V._meta={warnings:er}),V}function getAllowedHeaders(h,d){return Object.keys(h).reduce((_,V)=>{let ee=V.toLowerCase();return d.includes(ee)&&h[V]&&(_[ee]=h[V]),_},{})}function _serializeFormData(h){return new URLSearchParams(h).toString()}function urlMatches(h,d){let _=function(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:eC.document.baseURI;if(h.startsWith("http://")||h.startsWith("https://")||h.startsWith(eC.location.origin))return h;let _=new URL(h,d);if(_.origin!==new URL(d).origin)return h;let V=_.href;return!h.endsWith("/")&&V.endsWith("/")?V.slice(0,-1):V}(h);return stringMatchesSomePattern(_,d)}async function captureFetchBreadcrumbToReplay(h,d,_){try{let V=await _prepareFetchData(h,d,_),ee=makeNetworkReplayBreadcrumb("resource.fetch",V);addNetworkBreadcrumb(_.replay,ee)}catch(h){}}async function _prepareFetchData(h,d,_){let V=Date.now(),{startTimestamp:ee=V,endTimestamp:er=V}=d,{url:eo,method:ec,status_code:eh=0,request_body_size:ep,response_body_size:ef}=h.data,em=urlMatches(eo,_.networkDetailAllowUrls)&&!urlMatches(eo,_.networkDetailDenyUrls),eg=em?function(h,d,_){let{networkCaptureBodies:V,networkRequestHeaders:ee}=h,er=d?1===d.length&&"string"!=typeof d[0]?getHeadersFromOptions(d[0],ee):2===d.length?getHeadersFromOptions(d[1],ee):{}:{};if(!V)return buildNetworkRequestOrResponse(er,_,void 0);let eo=_getFetchRequestArgBody(d),[ec,eh]=getBodyString(eo),ep=buildNetworkRequestOrResponse(er,_,ec);return eh?mergeWarning(ep,eh):ep}(_,d.input,ep):buildSkippedNetworkRequestOrResponse(ep),eO=await _getResponseInfo(em,_,d.response,ef);return{startTimestamp:ee,endTimestamp:er,url:eo,method:ec,statusCode:eh,request:eg,response:eO}}async function _getResponseInfo(h,d,_,V){let{networkCaptureBodies:ee,textEncoder:er,networkResponseHeaders:eo}=d;if(!h&&void 0!==V)return buildSkippedNetworkRequestOrResponse(V);let ec=_?getAllHeaders(_.headers,eo):{};if(!_||!ee&&void 0!==V)return buildNetworkRequestOrResponse(ec,V,void 0);let[eh,ep]=await _parseFetchResponseBody(_),ef=function(h,d){let{networkCaptureBodies:_,textEncoder:V,responseBodySize:ee,captureDetails:er,headers:eo}=d;try{let d=h&&h.length&&void 0===ee?getBodySize(h,V):ee;if(!er)return buildSkippedNetworkRequestOrResponse(d);if(_)return buildNetworkRequestOrResponse(eo,d,h);return buildNetworkRequestOrResponse(eo,d,void 0)}catch(h){return buildNetworkRequestOrResponse(eo,ee,void 0)}}(eh,{networkCaptureBodies:ee,textEncoder:er,responseBodySize:V,captureDetails:h,headers:ec});return ep?mergeWarning(ef,ep):ef}async function _parseFetchResponseBody(h){let d=function(h){try{return h.clone()}catch(h){}}(h);if(!d)return[void 0,"BODY_PARSE_ERROR"];try{let h=await new Promise((h,_)=>{let V=setTimeout(()=>_(Error("Timeout while trying to read response body")),500);_getResponseText(d).then(d=>h(d),h=>_(h)).finally(()=>clearTimeout(V))});return[h]}catch(h){return[void 0,"BODY_PARSE_ERROR"]}}function _getFetchRequestArgBody(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(2===h.length&&"object"==typeof h[1])return h[1].body}function getAllHeaders(h,d){let _={};return d.forEach(d=>{h.get(d)&&(_[d]=h.get(d))}),_}function getHeadersFromOptions(h,d){if(!h)return{};let _=h.headers;return _?_ instanceof Headers?getAllHeaders(_,d):Array.isArray(_)?{}:getAllowedHeaders(_,d):{}}async function _getResponseText(h){return await h.text()}async function captureXhrBreadcrumbToReplay(h,d,_){try{let V=function(h,d,_){let V=Date.now(),{startTimestamp:ee=V,endTimestamp:er=V,input:eo,xhr:ec}=d,{url:eh,method:ep,status_code:ef=0,request_body_size:em,response_body_size:eg}=h.data;if(!eh)return null;if(!ec||!urlMatches(eh,_.networkDetailAllowUrls)||urlMatches(eh,_.networkDetailDenyUrls)){let h=buildSkippedNetworkRequestOrResponse(em),d=buildSkippedNetworkRequestOrResponse(eg);return{startTimestamp:ee,endTimestamp:er,url:eh,method:ep,statusCode:ef,request:h,response:d}}let eO=ec[tx],ey=eO?getAllowedHeaders(eO.request_headers,_.networkRequestHeaders):{},ev=getAllowedHeaders(function(h){let d=h.getAllResponseHeaders();return d?d.split("\r\n").reduce((h,d)=>{let[_,V]=d.split(": ");return h[_.toLowerCase()]=V,h},{}):{}}(ec),_.networkResponseHeaders),[eS,e_]=_.networkCaptureBodies?getBodyString(eo):[void 0],[ew,ex]=_.networkCaptureBodies?function(h){let d=[];try{return[h.responseText]}catch(h){d.push(h)}try{return function(h,d){try{if("string"==typeof h)return[h];if(h instanceof Document)return[h.body.outerHTML];if("json"===d&&h&&"object"==typeof h)return[JSON.stringify(h)];if(!h)return[void 0]}catch(h){return[void 0,"BODY_PARSE_ERROR"]}return[void 0,"UNPARSEABLE_BODY_TYPE"]}(h.response,h.responseType)}catch(h){d.push(h)}return[void 0]}(ec):[void 0],ek=buildNetworkRequestOrResponse(ey,em,eS),eT=buildNetworkRequestOrResponse(ev,eg,ew);return{startTimestamp:ee,endTimestamp:er,url:eh,method:ep,statusCode:ef,request:e_?mergeWarning(ek,e_):ek,response:ex?mergeWarning(eT,ex):eT}}(h,d,_),ee=makeNetworkReplayBreadcrumb("resource.xhr",V);addNetworkBreadcrumb(_.replay,ee)}catch(h){}}let nM=null,handleScopeListener=h=>d=>{if(!h.isEnabled())return;let _=function(h){let d=h.getLastBreadcrumb&&h.getLastBreadcrumb();return nM!==d&&d?(nM=d,!d.category||["fetch","xhr","sentry.event","sentry.transaction"].includes(d.category)||d.category.startsWith("ui."))?null:"console"===d.category?function(h){let d=h.data&&h.data.arguments;if(!Array.isArray(d)||0===d.length)return createBreadcrumb(h);let _=!1,V=d.map(h=>{if(!h)return h;if("string"==typeof h)return h.length>5e3?(_=!0,"".concat(h.slice(0,5e3),"…")):h;if("object"==typeof h)try{let d=normalize(h,7),V=JSON.stringify(d);if(V.length>5e3)return _=!0,"".concat(JSON.stringify(d,null,2).slice(0,5e3),"…");return d}catch(h){}return h});return createBreadcrumb({...h,data:{...h.data,arguments:V,..._?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(d):createBreadcrumb(d):null}(d);_&&addBreadcrumbEvent(h,_)};async function addMemoryEntry(h){try{return Promise.all(createPerformanceSpans(h,[function(h){let{jsHeapSizeLimit:d,totalJSHeapSize:_,usedJSHeapSize:V}=h,ee=Date.now()/1e3;return{type:"memory",name:"memory",start:ee,end:ee,data:{memory:{jsHeapSizeLimit:d,totalJSHeapSize:_,usedJSHeapSize:V}}}}(eC.performance.memory)]))}catch(h){return[]}}async function prepareReplayEvent(h){let{client:d,scope:_,replayId:V,event:ee}=h,er="object"!=typeof d._integrations||null===d._integrations||Array.isArray(d._integrations)?void 0:Object.keys(d._integrations),eo={event_id:V,integrations:er};d.emit&&d.emit("preprocessEvent",ee,eo);let ec=await prepareEvent(d.getOptions(),ee,eo,_,d,hub_getIsolationScope());if(!ec)return null;ec.platform=ec.platform||"javascript";let eh=d.getSdkMetadata&&d.getSdkMetadata(),{name:ep,version:ef}=eh&&eh.sdk||{};return ec.sdk={...ec.sdk,name:ep||"sentry.javascript.unknown",version:ef||"0.0.0"},ec}async function sendReplayRequest(h){var d;let _,{recordingData:V,replayId:ee,segmentId:er,eventContext:eo,timestamp:ec,session:eh}=h,ep=function(h){let d,{recordingData:_,headers:V}=h,ee="".concat(JSON.stringify(V),"\n");if("string"==typeof _)d="".concat(ee).concat(_);else{let h=new TextEncoder,V=h.encode(ee);(d=new Uint8Array(V.length+_.length)).set(V),d.set(_,V.length)}return d}({recordingData:V,headers:{segment_id:er}}),{urls:ef,errorIds:em,traceIds:eg,initialTimestamp:eO}=eo,ey=exports_getClient(),ev=exports_getCurrentScope(),eS=ey&&ey.getTransport(),e_=ey&&ey.getDsn();if(!ey||!eS||!e_||!eh.sampled)return;let ew={type:"replay_event",replay_start_timestamp:eO/1e3,timestamp:ec/1e3,error_ids:em,trace_ids:eg,urls:ef,replay_id:ee,segment_id:er,replay_type:eh.sampled},ex=await prepareReplayEvent({scope:ev,client:ey,replayId:ee,event:ew});if(!ex){ey.recordDroppedEvent("event_processor","replay",ew);return}delete ex.sdkProcessingMetadata;let ek=(d=ey.getOptions().tunnel,createEnvelope(createEventEnvelopeHeaders(ex,getSdkMetadataForEnvelopeHeader(ex),d,e_),[[{type:"replay_event"},ex],[{type:"replay_recording",length:"string"==typeof ep?new TextEncoder().encode(ep).length:ep.length},ep]]));try{_=await eS.send(ek)}catch(d){let h=Error(no);try{h.cause=d}catch(h){}throw h}if(!_)return _;if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new TransportStatusCodeError(_.statusCode);let eT=updateRateLimits({},_);if(isRateLimited(eT,"replay"))throw new RateLimitError(eT);return _}let TransportStatusCodeError=class TransportStatusCodeError extends Error{constructor(h){super("Transport returned status code ".concat(h))}};let RateLimitError=class RateLimitError extends Error{constructor(h){super("Rate limit hit"),this.rateLimits=h}};async function sendReplay(h){let d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{count:0,interval:5e3},{recordingData:_,options:V}=h;if(_.length)try{return await sendReplayRequest(h),!0}catch(_){var ee;if(_ instanceof TransportStatusCodeError||_ instanceof RateLimitError)throw _;if(ee={_retryCount:d.count},hub_getCurrentHub().setContext("Replays",ee),d.count>=3){let h=Error("".concat(no," - max retries exceeded"));try{h.cause=_}catch(h){}throw h}return d.interval*=++d.count,new Promise((_,V)=>{setTimeout(async()=>{try{await sendReplay(h,d),_(!0)}catch(h){V(h)}},d.interval)})}}let nQ="__THROTTLED";let ReplayContainer=class ReplayContainer{getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return!!this._canvas}getOptions(){return this._options}initializeSampling(h){let{errorSampleRate:d,sessionSampleRate:_}=this._options;if(!(d<=0)||!(_<=0)){if(this._initializeSessionForSampling(h),!this.session){this._handleException(Error("Unable to initialize and create session"));return}!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",this.recordingMode,this._options._experiments.traceInternals,this._initializeRecording())}}start(){if(this._isEnabled&&"session"===this.recordingMode)throw Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw Error("Replay buffering is in progress, call `flush()` to save the replay");this._options._experiments.traceInternals;let h=loadOrCreateSession({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=h,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw Error("Replay recording is already in progress");this._options._experiments.traceInternals;let h=loadOrCreateSession({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=h,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{var h;let d;let _=this._canvas;this._stopRecording=record({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:(h=this,d=!1,(_,V)=>{if(!h.checkAndHandleExpiredSession())return;let ee=V||!d;d=!0,h.clickDetector&&function(h,d){try{if(3!==d.type)return;let{source:_}=d.data;if(_===nk.Mutation&&h.registerMutation(d.timestamp),_===nk.Scroll&&h.registerScroll(d.timestamp),d.data.source===nk.MouseInteraction){let{type:_,id:V}=d.data,ee=record.mirror.getNode(V);ee instanceof HTMLElement&&_===nT.Click&&h.registerClick(ee)}}catch(h){}}(h.clickDetector,_),h.addUpdate(()=>{if("buffer"===h.recordingMode&&ee&&h.setInitialState(),!addEventSync(h,_,ee))return!0;if(!ee)return!1;if(ee&&h.session&&0===h.session.segmentId&&addEventSync(h,function(h){let d=h.getOptions();return{type:nx.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:h.isRecordingCanvas(),sessionSampleRate:d.sessionSampleRate,errorSampleRate:d.errorSampleRate,useCompressionOption:d.useCompression,blockAllMedia:d.blockAllMedia,maskAllText:d.maskAllText,maskAllInputs:d.maskAllInputs,useCompression:!!h.eventBuffer&&"worker"===h.eventBuffer.type,networkDetailHasUrls:d.networkDetailAllowUrls.length>0,networkCaptureBodies:d.networkCaptureBodies,networkRequestHasHeaders:d.networkRequestHeaders.length>0,networkResponseHasHeaders:d.networkResponseHeaders.length>0}}}}(h),!1),h.session&&h.session.previousSessionId)return!0;if("buffer"===h.recordingMode&&h.session&&h.eventBuffer){let d=h.eventBuffer.getEarliestTimestamp();d&&(h.getOptions()._experiments.traceInternals,h.session.started=d,h.getOptions().stickySession&&saveSession(h.session))}return"session"===h.recordingMode&&h.flush(),!0})}),onMutation:this._onMutationHandler,..._?{recordCanvas:_.recordCanvas,getCanvasManager:_.getCanvasManager,sampling:_.sampling,dataURLOptions:_.dataURLOptions}:{}})}catch(h){this._handleException(h)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(h){return this._handleException(h),!1}}async stop(){let{forceFlush:h=!1,reason:d}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._isEnabled){this._isEnabled=!1;try{this._options._experiments.traceInternals,this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),h&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,function(){if(hasSessionStorage())try{eC.sessionStorage.removeItem(ni)}catch(h){}}(),this.session=void 0}catch(h){this._handleException(h)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),this._options._experiments.traceInternals)}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),this._options._experiments.traceInternals)}async sendBufferedReplayOrFlush(){let{continueRecording:h=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("session"===this.recordingMode)return this.flushImmediate();let d=Date.now();this._options._experiments.traceInternals,await this.flushImmediate();let _=this.stopRecording();h&&_&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(d),this._updateSessionActivity(d),this._maybeSaveSession()),this.startRecording())}addUpdate(h){let d=h();"buffer"!==this.recordingMode&&!0!==d&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),!this._stopRecording){if(!this._checkSession())return;this.resume();return}this.checkAndHandleExpiredSession(),this._updateSessionActivity()}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(this._lastActivity&&isExpired(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled){this.pause();return}return!!this._checkSession()}setInitialState(){let h="".concat(eC.location.pathname).concat(eC.location.hash).concat(eC.location.search),d="".concat(eC.location.origin).concat(h);this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=d,this._context.initialTimestamp=Date.now(),this._context.urls.push(d)}throttledAddEvent(h,d){let _=this._throttledAddEvent(h,d);if(_===nQ){let h=createBreadcrumb({category:"replay.throttled"});this.addUpdate(()=>!addEventSync(this,{type:5,timestamp:h.timestamp||0,data:{tag:"breadcrumb",payload:h,metric:!0}}))}return _}getCurrentRoute(){let h=this.lastTransaction||exports_getCurrentScope().getTransaction(),d=h&&spanUtils_spanToJSON(h).data||{},_=d[tW];if(h&&_&&["route","custom"].includes(_))return spanUtils_spanToJSON(h).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=function(h){let{useCompression:d,workerUrl:_}=h;if(d&&window.Worker){let h=function(h){try{let d=h||("undefined"!=typeof __SENTRY_EXCLUDE_REPLAY_WORKER__&&__SENTRY_EXCLUDE_REPLAY_WORKER__?"":function(){let h=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(h)}());if(!d)return;let _=new Worker(d);return new EventBufferProxy(_)}catch(h){}}(_);if(h)return h}return new EventBufferArray}({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(h){}_initializeSessionForSampling(h){let d=this._options.errorSampleRate>0,_=loadOrCreateSession({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:h},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:d});this.session=_}_checkSession(){if(!this.session)return!1;let h=this.session;return!shouldRefreshSession(h,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(h),!1)}async _refreshSession(h){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(h.id))}_addListeners(){try{eC.document.addEventListener("visibilitychange",this._handleVisibilityChange),eC.addEventListener("blur",this._handleWindowBlur),eC.addEventListener("focus",this._handleWindowFocus),eC.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(function(h){let d=exports_getCurrentScope(),_=exports_getClient();d.addScopeListener(handleScopeListener(h)),addClickKeypressInstrumentationHandler(handleDomListener(h)),addHistoryInstrumentationHandler(d=>{if(!h.isEnabled())return;let _=function(h){let{from:d,to:_}=h,V=Date.now()/1e3;return{type:"navigation.push",start:V,end:V,name:_,data:{previous:d}}}(d);null!==_&&(h.getContext().urls.push(_.name),h.triggerUserActivity(),h.addUpdate(()=>(createPerformanceSpans(h,[_]),!1)))}),function(h){let d=exports_getClient();try{let _=new TextEncoder,{networkDetailAllowUrls:V,networkDetailDenyUrls:ee,networkCaptureBodies:er,networkRequestHeaders:eo,networkResponseHeaders:ec}=h.getOptions(),eh={replay:h,textEncoder:_,networkDetailAllowUrls:V,networkDetailDenyUrls:ee,networkCaptureBodies:er,networkRequestHeaders:eo,networkResponseHeaders:ec};d&&d.on?d.on("beforeAddBreadcrumb",(h,d)=>(function(h,d,_){if(d.data)try{var V,ee;"xhr"===d.category&&(V=_)&&V.xhr&&(function(h,d,_){let{xhr:V,input:ee}=d;if(!V)return;let er=getBodySize(ee,_.textEncoder),eo=V.getResponseHeader("content-length")?parseContentLengthHeader(V.getResponseHeader("content-length")):function(h,d,_){try{let V="json"===d&&h&&"object"==typeof h?JSON.stringify(h):h;return getBodySize(V,_)}catch(h){return}}(V.response,V.responseType,_.textEncoder);void 0!==er&&(h.data.request_body_size=er),void 0!==eo&&(h.data.response_body_size=eo)}(d,_,h),captureXhrBreadcrumbToReplay(d,_,h)),"fetch"===d.category&&(ee=_)&&ee.response&&(function(h,d,_){let{input:V,response:ee}=d,er=V?_getFetchRequestArgBody(V):void 0,eo=getBodySize(er,_.textEncoder),ec=ee?parseContentLengthHeader(ee.headers.get("content-length")):void 0;void 0!==eo&&(h.data.request_body_size=eo),void 0!==ec&&(h.data.response_body_size=ec)}(d,_,h),captureFetchBreadcrumbToReplay(d,_,h))}catch(h){}})(eh,h,d)):(addFetchInstrumentationHandler(d=>{if(!h.isEnabled())return;let _=function(h){let{startTimestamp:d,endTimestamp:_,fetchData:V,response:ee}=h;if(!_)return null;let{method:er,url:eo}=V;return{type:"resource.fetch",start:d/1e3,end:_/1e3,name:eo,data:{method:er,statusCode:ee?ee.status:void 0}}}(d);addNetworkBreadcrumb(h,_)}),addXhrInstrumentationHandler(d=>{if(!h.isEnabled())return;let _=function(h){let{startTimestamp:d,endTimestamp:_,xhr:V}=h,ee=V[tx];if(!d||!_||!ee)return null;let{method:er,url:eo,status_code:ec}=ee;return void 0===eo?null:{type:"resource.xhr",name:eo,start:d/1e3,end:_/1e3,data:{method:er,statusCode:ec}}}(d);addNetworkBreadcrumb(h,_)}))}catch(h){}}(h);let V=function(h){let d=arguments.length>1&&void 0!==arguments[1]&&arguments[1],_=d?handleAfterSendEvent(h):void 0;return Object.assign((d,V)=>{if(!h.isEnabled())return d;if("replay_event"===d.type)return delete d.breadcrumbs,d;if(d.type&&!esm_isTransactionEvent(d)&&!isFeedbackEvent(d))return d;let ee=h.checkAndHandleExpiredSession();if(!ee)return d;if(isFeedbackEvent(d))return h.flush(),d.contexts.feedback.replay_id=h.getSessionId(),h.triggerUserActivity(),h.addUpdate(()=>!d.timestamp||(h.throttledAddEvent({type:nx.Custom,timestamp:1e3*d.timestamp,data:{timestamp:d.timestamp,tag:"breadcrumb",payload:{category:"sentry.feedback",data:{feedbackId:d.event_id}}}}),!1)),d;if(!d.type&&d.exception&&d.exception.values&&d.exception.values.length&&V.originalException&&V.originalException.__rrweb__&&!h.getOptions()._experiments.captureExceptions)return null;let er="buffer"===h.recordingMode&&d.message!==no&&!!d.exception&&!d.type&&isSampled(h.getOptions().errorSampleRate),eo=er||"session"===h.recordingMode;return eo&&(d.tags={...d.tags,replayId:h.getSessionId()}),_&&_(d,{statusCode:200}),d},{id:"Replay"})}(h,!(_&&_.on));_&&_.addEventProcessor?_.addEventProcessor(V):function(h){let d=exports_getClient();d&&d.addEventProcessor&&d.addEventProcessor(h)}(V),_&&_.on&&(_.on("beforeSendEvent",d=>{h.isEnabled()&&!d.type&&function(h,d){let _=d.exception&&d.exception.values&&d.exception.values[0].value;if("string"==typeof _&&(_.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||_.match(/(does not match server-rendered HTML|Hydration failed because)/i))){let d=createBreadcrumb({category:"replay.hydrate-error"});addBreadcrumbEvent(h,d)}}(h,d)}),_.on("afterSendEvent",handleAfterSendEvent(h)),_.on("createDsc",d=>{let _=h.getSessionId();if(_&&h.isEnabled()&&"session"===h.recordingMode){let V=h.checkAndHandleExpiredSession();V&&(d.replay_id=_)}}),_.on("startTransaction",d=>{h.lastTransaction=d}),_.on("finishTransaction",d=>{h.lastTransaction=d}),_.on("beforeSendFeedback",(d,_)=>{let V=h.getSessionId();_&&_.includeReplay&&h.isEnabled()&&V&&(h.flush(),d.contexts&&d.contexts.feedback&&(d.contexts.feedback.replay_id=V))}))}(this),this._hasInitializedCoreListeners=!0)}catch(h){this._handleException(h)}this._performanceCleanupCallback=function(h){function addPerformanceEntry(d){h.performanceEntries.includes(d)||h.performanceEntries.push(d)}function onEntries(h){let{entries:d}=h;d.forEach(addPerformanceEntry)}let d=[];return["navigation","paint","resource"].forEach(h=>{d.push(addPerformanceInstrumentationHandler(h,onEntries))}),d.push(addLcpInstrumentationHandler(d=>{let{metric:_}=d;h.replayPerformanceEntries.push(function(h){let d=h.entries,_=d[d.length-1],V=_?_.element:void 0,ee=h.value,er=esm_getAbsoluteTime(ee),eo={type:"largest-contentful-paint",name:"largest-contentful-paint",start:er,end:er,data:{value:ee,size:ee,nodeId:V?record.mirror.getId(V):void 0}};return eo}(_))})),()=>{d.forEach(h=>h())}}(this)}_removeListeners(){try{eC.document.removeEventListener("visibilitychange",this._handleVisibilityChange),eC.removeEventListener("blur",this._handleWindowBlur),eC.removeEventListener("focus",this._handleWindowFocus),eC.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(h){this._handleException(h)}}__init(){this._handleVisibilityChange=()=>{"visible"===eC.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{let h=createBreadcrumb({category:"ui.blur"});this._doChangeToBackgroundTasks(h)}}__init3(){this._handleWindowFocus=()=>{let h=createBreadcrumb({category:"ui.focus"});this._doChangeToForegroundTasks(h)}}__init4(){this._handleKeyboardEvent=h=>{!function(h,d){if(!h.isEnabled())return;h.updateUserActivity();let _=function(h){var d;let{metaKey:_,shiftKey:V,ctrlKey:ee,altKey:er,key:eo,target:ec}=h;if(!ec||"INPUT"===(d=ec).tagName||"TEXTAREA"===d.tagName||d.isContentEditable||!eo)return null;let eh=1===eo.length;if(!(_||ee||er)&&eh)return null;let ep=htmlTreeAsString(ec,{maxStringLength:200})||"<unknown>",ef=getBaseDomBreadcrumb(ec,ep);return createBreadcrumb({category:"ui.keyDown",message:ep,data:{...ef.data,metaKey:_,shiftKey:V,ctrlKey:ee,altKey:er,key:eo}})}(d);_&&addBreadcrumbEvent(h,_)}(this,h)}}_doChangeToBackgroundTasks(h){if(!this.session)return;let d=isSessionExpired(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire});d||(h&&this._createCustomBreadcrumb(h),this.conditionalFlush())}_doChangeToForegroundTasks(h){if(!this.session)return;let d=this.checkAndHandleExpiredSession();d&&h&&this._createCustomBreadcrumb(h)}_updateUserActivity(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this._lastActivity=h}_updateSessionActivity(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now();this.session&&(this.session.lastActivity=h,this._maybeSaveSession())}_createCustomBreadcrumb(h){this.addUpdate(()=>{this.throttledAddEvent({type:nx.Custom,timestamp:h.timestamp||0,data:{tag:"breadcrumb",payload:h}})})}_addPerformanceEntries(){let h=this.performanceEntries.map(createPerformanceEntry).filter(Boolean).concat(this.replayPerformanceEntries);return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(createPerformanceSpans(this,h))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){let{session:h,eventBuffer:d}=this;if(!h||!d||h.segmentId)return;let _=d.getEarliestTimestamp();_&&_<this._context.initialTimestamp&&(this._context.initialTimestamp=_)}_popEventContext(){let h={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),h}async _runFlush(){let h=this.getSessionId();if(this.session&&this.eventBuffer&&h&&(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents)&&(await addMemoryEntry(this),this.eventBuffer&&h===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();let d=Date.now();if(d-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw Error("Session is too long, not sending replay");let _=this._popEventContext(),V=this.session.segmentId++;this._maybeSaveSession();let ee=await this.eventBuffer.finish();await sendReplay({replayId:h,recordingData:ee,segmentId:V,eventContext:_,session:this.session,options:this.getOptions(),timestamp:d})}catch(d){this._handleException(d),this.stop({reason:"sendReplay"});let h=exports_getClient();h&&h.recordDroppedEvent("send_error","replay")}}__init5(){var h=this;this._flush=async function(){let{force:d=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!h._isEnabled&&!d||!h.checkAndHandleExpiredSession()||!h.session)return;let _=h.session.started,V=Date.now(),ee=V-_;h._debouncedFlush.cancel();let er=ee<h._options.minReplayDuration,eo=ee>h._options.maxReplayDuration+5e3;if(er||eo){"[Replay] Session duration (".concat(Math.floor(ee/1e3),"s) is too ").concat(er?"short":"long",", not sending replay."),h._options._experiments.traceInternals,er&&h._debouncedFlush();return}let ec=h.eventBuffer;if(ec&&0===h.session.segmentId&&!ec.hasCheckout&&h._options._experiments.traceInternals,!h._flushLock){h._flushLock=h._runFlush(),await h._flushLock,h._flushLock=void 0;return}try{await h._flushLock}catch(h){}finally{h._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&saveSession(this.session)}__init6(){this._onMutationHandler=h=>{let d=h.length,_=this._options.mutationLimit,V=this._options.mutationBreadcrumbLimit,ee=_&&d>_;if(d>V||ee){let h=createBreadcrumb({category:"replay.mutations",data:{count:d,limit:ee}});this._createCustomBreadcrumb(h)}return!ee||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}constructor({options:h,recordingOptions:d}){ReplayContainer.prototype.__init.call(this),ReplayContainer.prototype.__init2.call(this),ReplayContainer.prototype.__init3.call(this),ReplayContainer.prototype.__init4.call(this),ReplayContainer.prototype.__init5.call(this),ReplayContainer.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=d,this._options=h,this._debouncedFlush=function(h,d,_){let V,ee,er;let eo=_&&_.maxWait?Math.max(_.maxWait,d):0;function invokeFunc(){return cancelTimers(),V=h()}function cancelTimers(){void 0!==ee&&clearTimeout(ee),void 0!==er&&clearTimeout(er),ee=er=void 0}function debounced(){return ee&&clearTimeout(ee),ee=setTimeout(invokeFunc,d),eo&&void 0===er&&(er=setTimeout(invokeFunc,eo)),V}return debounced.cancel=cancelTimers,debounced.flush=function(){return void 0!==ee||void 0!==er?invokeFunc():V},debounced}(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=function(h,d,_){let V=new Map,_cleanup=h=>{let d=h-5;V.forEach((h,_)=>{_<d&&V.delete(_)})},_getTotalCount=()=>[...V.values()].reduce((h,d)=>h+d,0),ee=!1;return function(){for(var d=arguments.length,_=Array(d),er=0;er<d;er++)_[er]=arguments[er];let eo=Math.floor(Date.now()/1e3);if(_cleanup(eo),_getTotalCount()>=300){let h=ee;return ee=!0,h?"__SKIPPED":nQ}ee=!1;let ec=V.get(eo)||0;return V.set(eo,ec+1),h(..._)}}((h,d)=>shouldAddEvent(this,h)?_addEvent(this,h,d):Promise.resolve(null),0,0);let{slowClickTimeout:_,slowClickIgnoreSelectors:V}=this.getOptions(),ee=_?{threshold:Math.min(3e3,_),timeout:_,scrollTimeout:300,ignoreSelector:V?V.join(","):""}:void 0;ee&&(this.clickDetector=new ClickDetector(this,ee))}};function getOption(h,d,_,V){let ee="string"==typeof V?V.split(","):[],er=[...h,...ee,...d];return void 0!==_&&("string"==typeof _&&er.push(".".concat(_)),consoleSandbox(()=>{console.warn("[Replay] You are using a deprecated configuration item for privacy. Read the documentation on how to use the new privacy configuration.")})),er.join(",")}let nD='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',nj=["content-length","content-type","accept"],nL=!1;let Replay=class Replay{static __initStatic(){this.id="Replay"}get _isInitialized(){return nL}set _isInitialized(h){nL=h}setupOnce(){isBrowser()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(h){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(h):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){let h=function(h){let d=exports_getClient(),_=d&&d.getOptions(),V={sessionSampleRate:0,errorSampleRate:0,...object_dropUndefinedKeys(h)};return _?(null==h.sessionSampleRate&&null==h.errorSampleRate&&null==_.replaysSessionSampleRate&&null==_.replaysOnErrorSampleRate&&consoleSandbox(()=>{console.warn("Replay is disabled because neither `replaysSessionSampleRate` nor `replaysOnErrorSampleRate` are set.")}),"number"==typeof _.replaysSessionSampleRate&&(V.sessionSampleRate=_.replaysSessionSampleRate),"number"==typeof _.replaysOnErrorSampleRate&&(V.errorSampleRate=_.replaysOnErrorSampleRate)):consoleSandbox(()=>{console.warn("SDK client is not available.")}),V}(this._initialOptions);this._replay=new ReplayContainer({options:h,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{let h=exports_getClient(),d=h.getIntegrationByName("ReplayCanvas");if(!d)return;this._replay._canvas=d.getOptions()}catch(h){}}constructor({flushMinDelay:h=5e3,flushMaxDelay:d=5500,minReplayDuration:_=4999,maxReplayDuration:V=36e5,stickySession:ee=!0,useCompression:er=!0,workerUrl:eo,_experiments:ec={},sessionSampleRate:eh,errorSampleRate:ep,maskAllText:ef=!0,maskAllInputs:em=!0,blockAllMedia:eg=!0,mutationBreadcrumbLimit:eO=750,mutationLimit:ey=1e4,slowClickTimeout:ev=7e3,slowClickIgnoreSelectors:eS=[],networkDetailAllowUrls:e_=[],networkDetailDenyUrls:ew=[],networkCaptureBodies:ex=!0,networkRequestHeaders:ek=[],networkResponseHeaders:eT=[],mask:eE=[],maskAttributes:eC=["title","placeholder"],unmask:eP=[],block:eI=[],unblock:eR=[],ignore:eA=[],maskFn:e$,beforeAddRecordingEvent:eN,beforeErrorSampling:eM,blockClass:eQ,blockSelector:eD,maskInputOptions:ej,maskTextClass:eL,maskTextSelector:eF,ignoreClass:eZ}={}){this.name=Replay.id;let eV=function(h){let{mask:d,unmask:_,block:V,unblock:ee,ignore:er,blockClass:eo,blockSelector:ec,maskTextClass:eh,maskTextSelector:ep,ignoreClass:ef}=h,em=getOption(d,[".sentry-mask","[data-sentry-mask]"],eh,ep),eg=getOption(_,[".sentry-unmask","[data-sentry-unmask]"]),eO={maskTextSelector:em,unmaskTextSelector:eg,blockSelector:getOption(V,[".sentry-block","[data-sentry-block]",'base[href="/"]'],eo,ec),unblockSelector:getOption(ee,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:getOption(er,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],ef)};return eo instanceof RegExp&&(eO.blockClass=eo),eh instanceof RegExp&&(eO.maskTextClass=eh),eO}({mask:eE,unmask:eP,block:eI,unblock:eR,ignore:eA,blockClass:eQ,blockSelector:eD,maskTextClass:eL,maskTextSelector:eF,ignoreClass:eZ});if(this._recordingOptions={maskAllInputs:em,maskAllText:ef,maskInputOptions:{...ej||{},password:!0},maskTextFn:e$,maskInputFn:e$,maskAttributeFn:(h,d,_)=>(function(h){let{el:d,key:_,maskAttributes:V,maskAllText:ee,privacyOptions:er,value:eo}=h;return!ee||er.unmaskTextSelector&&d.matches(er.unmaskTextSelector)?eo:V.includes(_)||"value"===_&&"INPUT"===d.tagName&&["submit","button"].includes(d.getAttribute("type")||"")?eo.replace(/[\S]/g,"*"):eo})({maskAttributes:eC,maskAllText:ef,privacyOptions:eV,key:h,value:d,el:_}),...eV,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:h=>{try{h.__rrweb__=!0}catch(h){}}},this._initialOptions={flushMinDelay:h,flushMaxDelay:d,minReplayDuration:Math.min(_,15e3),maxReplayDuration:Math.min(V,36e5),stickySession:ee,sessionSampleRate:eh,errorSampleRate:ep,useCompression:er,workerUrl:eo,blockAllMedia:eg,maskAllInputs:em,maskAllText:ef,mutationBreadcrumbLimit:eO,mutationLimit:ey,slowClickTimeout:ev,slowClickIgnoreSelectors:eS,networkDetailAllowUrls:e_,networkDetailDenyUrls:ew,networkCaptureBodies:ex,networkRequestHeaders:_getMergedNetworkHeaders(ek),networkResponseHeaders:_getMergedNetworkHeaders(eT),beforeAddRecordingEvent:eN,beforeErrorSampling:eM,_experiments:ec},"number"==typeof eh&&(console.warn("[Replay] You are passing `sessionSampleRate` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure `replaysSessionSampleRate` directly in the SDK init options, e.g.:\nSentry.init({ replaysSessionSampleRate: ".concat(eh," })")),this._initialOptions.sessionSampleRate=eh),"number"==typeof ep&&(console.warn("[Replay] You are passing `errorSampleRate` to the Replay integration.\nThis option is deprecated and will be removed soon.\nInstead, configure `replaysOnErrorSampleRate` directly in the SDK init options, e.g.:\nSentry.init({ replaysOnErrorSampleRate: ".concat(ep," })")),this._initialOptions.errorSampleRate=ep),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?"".concat(this._recordingOptions.blockSelector,",").concat(nD):nD),this._isInitialized&&isBrowser())throw Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}};function _getMergedNetworkHeaders(h){return[...nj,...h.map(h=>h.toLowerCase())]}Replay.__initStatic();var nF=_(3454),nZ=window;nZ.__sentryRewritesTunnelPath__=void 0,nZ.SENTRY_RELEASE={id:"98d8d1bf22cba2ca2a24db037fa2984f9a9d86cb"},nZ.__sentryBasePath=void 0,nZ.__rewriteFramesAssetPrefixPath__="",function(h){let d={environment:function(h){let d=h?t7.env.NEXT_PUBLIC_VERCEL_ENV:t7.env.VERCEL_ENV;return d?"vercel-".concat(d):void 0}(!0)||"production",...h};(function(h){let d=ne.__sentryRewritesTunnelPath__;if(d&&h.dsn){let _=dsnFromString(h.dsn);if(!_)return;let V=_.host.match(/^o(\d+)\.ingest\.sentry\.io$/);if(V){let ee=V[1],er="".concat(d,"?o=").concat(ee,"&p=").concat(_.projectId);h.tunnel=er}}})(d),d._metadata=d._metadata||{},d._metadata.sdk=d._metadata.sdk||{name:"sentry.javascript.nextjs",packages:["nextjs","react"].map(h=>({name:"".concat("npm:@sentry/").concat(h),version:eF})),version:eF},function(h){let d=h.integrations||[],_=nn.__rewriteFramesAssetPrefixPath__||"",V=new eG({iteratee:h=>{try{let{origin:d}=new URL(h.filename);h.filename=_optionalChain([h,"access",h=>h.filename,"optionalAccess",h=>h.replace,"call",h=>h(d,"app://"),"access",h=>h.replace,"call",h=>h(_,"")])}catch(h){}return h.filename&&h.filename.startsWith("app:///_next")&&(h.filename=decodeURI(h.filename)),h.filename&&h.filename.match(/^app:\/\/\/_next\/static\/chunks\/(main-|main-app-|polyfills-|webpack-|framework-|framework\.)[0-9a-f]+\.js$/)&&(h.in_app=!1),h}});if(d=addOrUpdateIntegration(V,d),("undefined"==typeof __SENTRY_TRACING__||__SENTRY_TRACING__)&&hasTracingEnabled_hasTracingEnabled(h)){let h=new BrowserTracing({tracingOrigins:[...t2.tracingOrigins,/^(api\/)/],routingInstrumentation:nextRouterInstrumentation});d=addOrUpdateIntegration(h,d,{"options.routingInstrumentation":nextRouterInstrumentation})}h.integrations=d}(d),function(h){let d={_metadata:{},...h};d._metadata.sdk=d._metadata.sdk||{name:"sentry.javascript.react",packages:[{name:"npm:@sentry/react",version:eF}],version:eF},function(){var h;let d=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};void 0===d.defaultIntegrations&&(d.defaultIntegrations=tB),void 0===d.release&&("string"==typeof __SENTRY_RELEASE__&&(d.release=__SENTRY_RELEASE__),eC.SENTRY_RELEASE&&eC.SENTRY_RELEASE.id&&(d.release=eC.SENTRY_RELEASE.id)),void 0===d.autoSessionTracking&&(d.autoSessionTracking=!0),void 0===d.sendClientReports&&(d.sendClientReports=!0);let _={...d,stackParser:Array.isArray(h=d.stackParser||tV)?createStackParser(...h):h,integrations:function(h){let d;let _=h.defaultIntegrations||[],V=h.integrations;_.forEach(h=>{h.isDefaultInstance=!0}),d=Array.isArray(V)?[..._,...V]:"function"==typeof V?arrayify(V(_)):_;let ee=function(h){let d={};return h.forEach(h=>{let{name:_}=h,V=d[_];V&&!V.isDefaultInstance&&h.isDefaultInstance||(d[_]=h)}),Object.keys(d).map(h=>d[h])}(d),er=function(h,d){for(let _=0;_<h.length;_++)if(!0===d(h[_]))return _;return -1}(ee,h=>"Debug"===h.name);if(-1!==er){let[h]=ee.splice(er,1);ee.push(h)}return ee}(d),transport:d.transport||(supportsFetch()?makeFetchTransport:makeXHRTransport)};(function(h,d){!0===d.debug&&consoleSandbox(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")});let _=exports_getCurrentScope();_.update(d.initialScope);let V=new h(d);(function(h){let d=hub_getCurrentHub(),_=d.getStackTop();_.client=h,_.scope.setClient(h)})(V),V.init?V.init():V.setupIntegrations&&V.setupIntegrations()})(BrowserClient,_),d.autoSessionTracking&&void 0!==eC.document&&(startSession({ignoreDuration:!0}),captureSession(),addHistoryInstrumentationHandler(h=>{let{from:d,to:_}=h;void 0!==d&&d!==_&&(startSession({ignoreDuration:!0}),captureSession())}))}(d)}(d);let _=exports_getCurrentScope();_.setTag("runtime","browser");let filterTransactions=h=>"transaction"===h.type&&"/404"===h.transaction?null:h;filterTransactions.id="NextClient404Filter",_.addEventProcessor(filterTransactions)}({dsn:nF.env.SENTRY_DSN||"https://9e6f45d1f5444285832f0c2e08703deb@o1358105.ingest.sentry.io/6645075",tracesSampleRate:1,debug:!1,replaysOnErrorSampleRate:1,replaysSessionSampleRate:.1,integrations:[new Replay({maskAllText:!0,blockAllMedia:!0})]})},9260:function(h,d,_){"use strict";function isBrowserBundle(){return"undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&!!__SENTRY_BROWSER_BUNDLE__}function getSDKSource(){return"npm"}_.d(d,{S:function(){return getSDKSource},n:function(){return isBrowserBundle}})},2166:function(h,d,_){"use strict";_.d(d,{KV:function(){return isNodeEnv}});var V=_(9260);h=_.hmd(h);var ee=_(3454);function isNodeEnv(){return!(0,V.n)()&&"[object process]"===Object.prototype.toString.call(void 0!==ee?ee:0)}},7498:function(h,d){"use strict";var _,V;Object.defineProperty(d,"__esModule",{value:!0}),function(h,d){for(var _ in d)Object.defineProperty(h,_,{enumerable:!0,get:d[_]})}(d,{PrefetchKind:function(){return _},ACTION_REFRESH:function(){return ee},ACTION_NAVIGATE:function(){return er},ACTION_RESTORE:function(){return eo},ACTION_SERVER_PATCH:function(){return ec},ACTION_PREFETCH:function(){return eh},ACTION_FAST_REFRESH:function(){return ep},ACTION_SERVER_ACTION:function(){return ef}});let ee="refresh",er="navigate",eo="restore",ec="server-patch",eh="prefetch",ep="fast-refresh",ef="server-action";(V=_||(_={})).AUTO="auto",V.FULL="full",V.TEMPORARY="temporary",("function"==typeof d.default||"object"==typeof d.default&&null!==d.default)&&void 0===d.default.__esModule&&(Object.defineProperty(d.default,"__esModule",{value:!0}),Object.assign(d.default,d),h.exports=d.default)},30:function(h,d,_){"use strict";function getDomainLocale(h,d,_,V){return!1}Object.defineProperty(d,"__esModule",{value:!0}),Object.defineProperty(d,"getDomainLocale",{enumerable:!0,get:function(){return getDomainLocale}}),_(2866),("function"==typeof d.default||"object"==typeof d.default&&null!==d.default)&&void 0===d.default.__esModule&&(Object.defineProperty(d.default,"__esModule",{value:!0}),Object.assign(d.default,d),h.exports=d.default)},3271:function(h,d,_){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),Object.defineProperty(d,"Image",{enumerable:!0,get:function(){return ev}});let V=_(2575),ee=_(821),er=ee._(_(7294)),eo=V._(_(3935)),ec=V._(_(9201)),eh=_(3914),ep=_(5494),ef=_(869);_(1905);let em=_(1823),eg=V._(_(4545)),eO={deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0};function handleLoading(h,d,_,V,ee,er){let eo=null==h?void 0:h.src;if(!h||h["data-loaded-src"]===eo)return;h["data-loaded-src"]=eo;let ec="decode"in h?h.decode():Promise.resolve();ec.catch(()=>{}).then(()=>{if(h.parentElement&&h.isConnected){if("empty"!==d&&ee(!0),null==_?void 0:_.current){let d=new Event("load");Object.defineProperty(d,"target",{writable:!1,value:h});let V=!1,ee=!1;_.current({...d,nativeEvent:d,currentTarget:h,target:h,isDefaultPrevented:()=>V,isPropagationStopped:()=>ee,persist:()=>{},preventDefault:()=>{V=!0,d.preventDefault()},stopPropagation:()=>{ee=!0,d.stopPropagation()}})}(null==V?void 0:V.current)&&V.current(h)}})}function getDynamicProps(h){let[d,_]=er.version.split("."),V=parseInt(d,10),ee=parseInt(_,10);return V>18||18===V&&ee>=3?{fetchPriority:h}:{fetchpriority:h}}let ey=(0,er.forwardRef)((h,d)=>{let{src:_,srcSet:V,sizes:ee,height:eo,width:ec,decoding:eh,className:ep,style:ef,fetchPriority:em,placeholder:eg,loading:eO,unoptimized:ey,fill:ev,onLoadRef:eS,onLoadingCompleteRef:e_,setBlurComplete:ew,setShowAltText:ex,onLoad:ek,onError:eT,...eE}=h;return er.default.createElement("img",{...eE,...getDynamicProps(em),loading:eO,width:ec,height:eo,decoding:eh,"data-nimg":ev?"fill":"1",className:ep,style:ef,sizes:ee,srcSet:V,src:_,ref:(0,er.useCallback)(h=>{d&&("function"==typeof d?d(h):"object"==typeof d&&(d.current=h)),h&&(eT&&(h.src=h.src),h.complete&&handleLoading(h,eg,eS,e_,ew,ey))},[_,eg,eS,e_,ew,eT,ey,d]),onLoad:h=>{let d=h.currentTarget;handleLoading(d,eg,eS,e_,ew,ey)},onError:h=>{ex(!0),"empty"!==eg&&ew(!0),eT&&eT(h)}})});function ImagePreload(h){let{isAppRouter:d,imgAttributes:_}=h,V={as:"image",imageSrcSet:_.srcSet,imageSizes:_.sizes,crossOrigin:_.crossOrigin,referrerPolicy:_.referrerPolicy,...getDynamicProps(_.fetchPriority)};return d&&eo.default.preload?(eo.default.preload(_.src,V),null):er.default.createElement(ec.default,null,er.default.createElement("link",{key:"__nimg-"+_.src+_.srcSet+_.sizes,rel:"preload",href:_.srcSet?void 0:_.src,...V}))}let ev=(0,er.forwardRef)((h,d)=>{let _=(0,er.useContext)(em.RouterContext),V=(0,er.useContext)(ef.ImageConfigContext),ee=(0,er.useMemo)(()=>{let h=eO||V||ep.imageConfigDefault,d=[...h.deviceSizes,...h.imageSizes].sort((h,d)=>h-d),_=h.deviceSizes.sort((h,d)=>h-d);return{...h,allSizes:d,deviceSizes:_}},[V]),{onLoad:eo,onLoadingComplete:ec}=h,ev=(0,er.useRef)(eo);(0,er.useEffect)(()=>{ev.current=eo},[eo]);let eS=(0,er.useRef)(ec);(0,er.useEffect)(()=>{eS.current=ec},[ec]);let[e_,ew]=(0,er.useState)(!1),[ex,ek]=(0,er.useState)(!1),{props:eT,meta:eE}=(0,eh.getImgProps)(h,{defaultLoader:eg.default,imgConf:ee,blurComplete:e_,showAltText:ex});return er.default.createElement(er.default.Fragment,null,er.default.createElement(ey,{...eT,unoptimized:eE.unoptimized,placeholder:eE.placeholder,fill:eE.fill,onLoadRef:ev,onLoadingCompleteRef:eS,setBlurComplete:ew,setShowAltText:ek,ref:d}),eE.priority?er.default.createElement(ImagePreload,{isAppRouter:!_,imgAttributes:eT}):null)});("function"==typeof d.default||"object"==typeof d.default&&null!==d.default)&&void 0===d.default.__esModule&&(Object.defineProperty(d.default,"__esModule",{value:!0}),Object.assign(d.default,d),h.exports=d.default)},5170:function(h,d,_){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),Object.defineProperty(d,"default",{enumerable:!0,get:function(){return ew}});let V=_(2575),ee=V._(_(7294)),er=_(4450),eo=_(2227),ec=_(4364),eh=_(109),ep=_(3607),ef=_(1823),em=_(9031),eg=_(920),eO=_(30),ey=_(7192),ev=_(7498),eS=new Set;function prefetch(h,d,_,V,ee,er){if(!er&&!(0,eo.isLocalURL)(d))return;if(!V.bypassPrefetchedCheck){let ee=void 0!==V.locale?V.locale:"locale"in h?h.locale:void 0,er=d+"%"+_+"%"+ee;if(eS.has(er))return;eS.add(er)}let ec=er?h.prefetch(d,ee):h.prefetch(d,_,V);Promise.resolve(ec).catch(h=>{})}function formatStringOrUrl(h){return"string"==typeof h?h:(0,ec.formatUrl)(h)}let e_=ee.default.forwardRef(function(h,d){let _,V;let{href:ec,as:eS,children:e_,prefetch:ew=null,passHref:ex,replace:ek,shallow:eT,scroll:eE,locale:eC,onClick:eP,onMouseEnter:eI,onTouchStart:eR,legacyBehavior:eA=!1,...e$}=h;_=e_,eA&&("string"==typeof _||"number"==typeof _)&&(_=ee.default.createElement("a",null,_));let eN=ee.default.useContext(ef.RouterContext),eM=ee.default.useContext(em.AppRouterContext),eQ=null!=eN?eN:eM,eD=!eN,ej=!1!==ew,eL=null===ew?ev.PrefetchKind.AUTO:ev.PrefetchKind.FULL,{href:eF,as:eZ}=ee.default.useMemo(()=>{if(!eN){let h=formatStringOrUrl(ec);return{href:h,as:eS?formatStringOrUrl(eS):h}}let[h,d]=(0,er.resolveHref)(eN,ec,!0);return{href:h,as:eS?(0,er.resolveHref)(eN,eS):d||h}},[eN,ec,eS]),eV=ee.default.useRef(eF),eB=ee.default.useRef(eZ);eA&&(V=ee.default.Children.only(_));let eW=eA?V&&"object"==typeof V&&V.ref:d,[eU,ez,eq]=(0,eg.useIntersection)({rootMargin:"200px"}),eX=ee.default.useCallback(h=>{(eB.current!==eZ||eV.current!==eF)&&(eq(),eB.current=eZ,eV.current=eF),eU(h),eW&&("function"==typeof eW?eW(h):"object"==typeof eW&&(eW.current=h))},[eZ,eW,eF,eq,eU]);ee.default.useEffect(()=>{eQ&&ez&&ej&&prefetch(eQ,eF,eZ,{locale:eC},{kind:eL},eD)},[eZ,eF,ez,eC,ej,null==eN?void 0:eN.locale,eQ,eD,eL]);let eY={ref:eX,onClick(h){eA||"function"!=typeof eP||eP(h),eA&&V.props&&"function"==typeof V.props.onClick&&V.props.onClick(h),eQ&&!h.defaultPrevented&&function(h,d,_,V,er,ec,eh,ep,ef,em){let{nodeName:eg}=h.currentTarget,eO="A"===eg.toUpperCase();if(eO&&(function(h){let d=h.currentTarget,_=d.getAttribute("target");return _&&"_self"!==_||h.metaKey||h.ctrlKey||h.shiftKey||h.altKey||h.nativeEvent&&2===h.nativeEvent.which}(h)||!ef&&!(0,eo.isLocalURL)(_)))return;h.preventDefault();let navigate=()=>{let h=null==eh||eh;"beforePopState"in d?d[er?"replace":"push"](_,V,{shallow:ec,locale:ep,scroll:h}):d[er?"replace":"push"](V||_,{forceOptimisticNavigation:!em,scroll:h})};ef?ee.default.startTransition(navigate):navigate()}(h,eQ,eF,eZ,ek,eT,eE,eC,eD,ej)},onMouseEnter(h){eA||"function"!=typeof eI||eI(h),eA&&V.props&&"function"==typeof V.props.onMouseEnter&&V.props.onMouseEnter(h),eQ&&(ej||!eD)&&prefetch(eQ,eF,eZ,{locale:eC,priority:!0,bypassPrefetchedCheck:!0},{kind:eL},eD)},onTouchStart(h){eA||"function"!=typeof eR||eR(h),eA&&V.props&&"function"==typeof V.props.onTouchStart&&V.props.onTouchStart(h),eQ&&(ej||!eD)&&prefetch(eQ,eF,eZ,{locale:eC,priority:!0,bypassPrefetchedCheck:!0},{kind:eL},eD)}};if((0,eh.isAbsoluteUrl)(eZ))eY.href=eZ;else if(!eA||ex||"a"===V.type&&!("href"in V.props)){let h=void 0!==eC?eC:null==eN?void 0:eN.locale,d=(null==eN?void 0:eN.isLocaleDomain)&&(0,eO.getDomainLocale)(eZ,h,null==eN?void 0:eN.locales,null==eN?void 0:eN.domainLocales);eY.href=d||(0,ey.addBasePath)((0,ep.addLocale)(eZ,h,null==eN?void 0:eN.defaultLocale))}return eA?ee.default.cloneElement(V,eY):ee.default.createElement("a",{...e$,...eY},_)}),ew=e_;("function"==typeof d.default||"object"==typeof d.default&&null!==d.default)&&void 0===d.default.__esModule&&(Object.defineProperty(d.default,"__esModule",{value:!0}),Object.assign(d.default,d),h.exports=d.default)},920:function(h,d,_){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),Object.defineProperty(d,"useIntersection",{enumerable:!0,get:function(){return useIntersection}});let V=_(7294),ee=_(3436),er="function"==typeof IntersectionObserver,eo=new Map,ec=[];function useIntersection(h){let{rootRef:d,rootMargin:_,disabled:eh}=h,ep=eh||!er,[ef,em]=(0,V.useState)(!1),eg=(0,V.useRef)(null),eO=(0,V.useCallback)(h=>{eg.current=h},[]);(0,V.useEffect)(()=>{if(er){if(ep||ef)return;let h=eg.current;if(h&&h.tagName){let V=function(h,d,_){let{id:V,observer:ee,elements:er}=function(h){let d;let _={root:h.root||null,margin:h.rootMargin||""},V=ec.find(h=>h.root===_.root&&h.margin===_.margin);if(V&&(d=eo.get(V)))return d;let ee=new Map,er=new IntersectionObserver(h=>{h.forEach(h=>{let d=ee.get(h.target),_=h.isIntersecting||h.intersectionRatio>0;d&&_&&d(_)})},h);return d={id:_,observer:er,elements:ee},ec.push(_),eo.set(_,d),d}(_);return er.set(h,d),ee.observe(h),function(){if(er.delete(h),ee.unobserve(h),0===er.size){ee.disconnect(),eo.delete(V);let h=ec.findIndex(h=>h.root===V.root&&h.margin===V.margin);h>-1&&ec.splice(h,1)}}}(h,h=>h&&em(h),{root:null==d?void 0:d.current,rootMargin:_});return V}}else if(!ef){let h=(0,ee.requestIdleCallback)(()=>em(!0));return()=>(0,ee.cancelIdleCallback)(h)}},[ep,_,d,ef,eg.current]);let ey=(0,V.useCallback)(()=>{em(!1)},[]);return[eO,ef,ey]}("function"==typeof d.default||"object"==typeof d.default&&null!==d.default)&&void 0===d.default.__esModule&&(Object.defineProperty(d.default,"__esModule",{value:!0}),Object.assign(d.default,d),h.exports=d.default)},3914:function(h,d,_){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),Object.defineProperty(d,"getImgProps",{enumerable:!0,get:function(){return getImgProps}}),_(1905);let V=_(2393),ee=_(5494);function isStaticRequire(h){return void 0!==h.default}function getInt(h){return void 0===h?h:"number"==typeof h?Number.isFinite(h)?h:NaN:"string"==typeof h&&/^[0-9]+$/.test(h)?parseInt(h,10):NaN}function getImgProps(h,d){var _;let er,eo,ec,{src:eh,sizes:ep,unoptimized:ef=!1,priority:em=!1,loading:eg,className:eO,quality:ey,width:ev,height:eS,fill:e_=!1,style:ew,onLoad:ex,onLoadingComplete:ek,placeholder:eT="empty",blurDataURL:eE,fetchPriority:eC,layout:eP,objectFit:eI,objectPosition:eR,lazyBoundary:eA,lazyRoot:e$,...eN}=h,{imgConf:eM,showAltText:eQ,blurComplete:eD,defaultLoader:ej}=d,eL=eM||ee.imageConfigDefault;if("allSizes"in eL)er=eL;else{let h=[...eL.deviceSizes,...eL.imageSizes].sort((h,d)=>h-d),d=eL.deviceSizes.sort((h,d)=>h-d);er={...eL,allSizes:h,deviceSizes:d}}let eF=eN.loader||ej;delete eN.loader,delete eN.srcSet;let eZ="__next_img_default"in eF;if(eZ){if("custom"===er.loader)throw Error('Image with src "'+eh+'" is missing "loader" prop.\nRead more: https://nextjs.org/docs/messages/next-image-missing-loader')}else{let h=eF;eF=d=>{let{config:_,...V}=d;return h(V)}}if(eP){"fill"===eP&&(e_=!0);let h={intrinsic:{maxWidth:"100%",height:"auto"},responsive:{width:"100%",height:"auto"}}[eP];h&&(ew={...ew,...h});let d={responsive:"100vw",fill:"100vw"}[eP];d&&!ep&&(ep=d)}let eV="",eB=getInt(ev),eW=getInt(eS);if("object"==typeof(_=eh)&&(isStaticRequire(_)||void 0!==_.src)){let h=isStaticRequire(eh)?eh.default:eh;if(!h.src)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include src. Received "+JSON.stringify(h));if(!h.height||!h.width)throw Error("An object should only be passed to the image component src parameter if it comes from a static image import. It must include height and width. Received "+JSON.stringify(h));if(eo=h.blurWidth,ec=h.blurHeight,eE=eE||h.blurDataURL,eV=h.src,!e_){if(eB||eW){if(eB&&!eW){let d=eB/h.width;eW=Math.round(h.height*d)}else if(!eB&&eW){let d=eW/h.height;eB=Math.round(h.width*d)}}else eB=h.width,eW=h.height}}let eU=!em&&("lazy"===eg||void 0===eg);(!(eh="string"==typeof eh?eh:eV)||eh.startsWith("data:")||eh.startsWith("blob:"))&&(ef=!0,eU=!1),er.unoptimized&&(ef=!0),eZ&&eh.endsWith(".svg")&&!er.dangerouslyAllowSVG&&(ef=!0),em&&(eC="high");let ez=getInt(ey),eq=Object.assign(e_?{position:"absolute",height:"100%",width:"100%",left:0,top:0,right:0,bottom:0,objectFit:eI,objectPosition:eR}:{},eQ?{}:{color:"transparent"},ew),eX=eD||"empty"===eT?null:"blur"===eT?'url("data:image/svg+xml;charset=utf-8,'+(0,V.getImageBlurSvg)({widthInt:eB,heightInt:eW,blurWidth:eo,blurHeight:ec,blurDataURL:eE||"",objectFit:eq.objectFit})+'")':'url("'+eT+'")',eY=eX?{backgroundSize:eq.objectFit||"cover",backgroundPosition:eq.objectPosition||"50% 50%",backgroundRepeat:"no-repeat",backgroundImage:eX}:{},eG=function(h){let{config:d,src:_,unoptimized:V,width:ee,quality:er,sizes:eo,loader:ec}=h;if(V)return{src:_,srcSet:void 0,sizes:void 0};let{widths:eh,kind:ep}=function(h,d,_){let{deviceSizes:V,allSizes:ee}=h;if(_){let h=/(^|\s)(1?\d?\d)vw/g,d=[];for(let V;V=h.exec(_);V)d.push(parseInt(V[2]));if(d.length){let h=.01*Math.min(...d);return{widths:ee.filter(d=>d>=V[0]*h),kind:"w"}}return{widths:ee,kind:"w"}}if("number"!=typeof d)return{widths:V,kind:"w"};let er=[...new Set([d,2*d].map(h=>ee.find(d=>d>=h)||ee[ee.length-1]))];return{widths:er,kind:"x"}}(d,ee,eo),ef=eh.length-1;return{sizes:eo||"w"!==ep?eo:"100vw",srcSet:eh.map((h,V)=>ec({config:d,src:_,quality:er,width:h})+" "+("w"===ep?h:V+1)+ep).join(", "),src:ec({config:d,src:_,quality:er,width:eh[ef]})}}({config:er,src:eh,unoptimized:ef,width:eB,quality:ez,sizes:ep,loader:eF}),eH={...eN,loading:eU?"lazy":eg,fetchPriority:eC,width:eB,height:eW,decoding:"async",className:eO,style:{...eq,...eY},sizes:eG.sizes,srcSet:eG.srcSet,src:eG.src},eK={unoptimized:ef,priority:em,placeholder:eT,fill:e_};return{props:eH,meta:eK}}},2393:function(h,d){"use strict";function getImageBlurSvg(h){let{widthInt:d,heightInt:_,blurWidth:V,blurHeight:ee,blurDataURL:er,objectFit:eo}=h,ec=V?40*V:d,eh=ee?40*ee:_,ep=ec&&eh?"viewBox='0 0 "+ec+" "+eh+"'":"";return"%3Csvg xmlns='http://www.w3.org/2000/svg' "+ep+"%3E%3Cfilter id='b' color-interpolation-filters='sRGB'%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3CfeColorMatrix values='1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 100 -1' result='s'/%3E%3CfeFlood x='0' y='0' width='100%25' height='100%25'/%3E%3CfeComposite operator='out' in='s'/%3E%3CfeComposite in2='SourceGraphic'/%3E%3CfeGaussianBlur stdDeviation='20'/%3E%3C/filter%3E%3Cimage width='100%25' height='100%25' x='0' y='0' preserveAspectRatio='"+(ep?"none":"contain"===eo?"xMidYMid":"cover"===eo?"xMidYMid slice":"none")+"' style='filter: url(%23b);' href='"+er+"'/%3E%3C/svg%3E"}Object.defineProperty(d,"__esModule",{value:!0}),Object.defineProperty(d,"getImageBlurSvg",{enumerable:!0,get:function(){return getImageBlurSvg}})},645:function(h,d,_){"use strict";Object.defineProperty(d,"__esModule",{value:!0}),function(h,d){for(var _ in d)Object.defineProperty(h,_,{enumerable:!0,get:d[_]})}(d,{unstable_getImgProps:function(){return unstable_getImgProps},default:function(){return eh}});let V=_(2575),ee=_(3914),er=_(1905),eo=_(3271),ec=V._(_(4545)),unstable_getImgProps=h=>{(0,er.warnOnce)("Warning: unstable_getImgProps() is experimental and may change or be removed at any time. Use at your own risk.");let{props:d}=(0,ee.getImgProps)(h,{defaultLoader:ec.default,imgConf:{deviceSizes:[640,750,828,1080,1200,1920,2048,3840],imageSizes:[16,32,48,64,96,128,256,384],path:"/_next/image",loader:"default",dangerouslyAllowSVG:!1,unoptimized:!0}});for(let[h,_]of Object.entries(d))void 0===_&&delete d[h];return{props:d}},eh=eo.Image},4545:function(h,d){"use strict";function defaultLoader(h){let{config:d,src:_,width:V,quality:ee}=h;return d.path+"?url="+encodeURIComponent(_)+"&w="+V+"&q="+(ee||75)}Object.defineProperty(d,"__esModule",{value:!0}),Object.defineProperty(d,"default",{enumerable:!0,get:function(){return _}}),defaultLoader.__next_img_default=!0;let _=defaultLoader},3993:function(h,d,_){"use strict";let V,ee;_.d(d,{O$:function(){return ActiveLink},bZ:function(){return Alert},qE:function(){return Avatar},zx:function(){return Button},pq:function(){return CodeEditor},DB:function(){return DeleteCommentModal},VL:function(){return GoogleButton},Ww:function(){return LanguageSwitcher},rU:function(){return LinkComponent},v2:function(){return tj},u_:function(){return tS},DY:function(){return ModalProvider},G_:function(){return PostPreview},Ke:function(){return SideBar},fA:function(){return SignInModal},gx:function(){return Textarea},ol:function(){return useModals}});var er,eo,ec,eh,ep,ef,em,eg,eO,ey,ev,eS,e_,ew,ex,ek,eT,eE,eC,eP,eI,eR,eA,e$,eN,eM,eQ,eD,ej=_(5893),eL=_(1163),eF=_(7294),eZ=_(1664),eV=_.n(eZ);function LinkComponent(h){let{children:d,skipLocaleHandling:_,...V}=h,ee=(0,eL.useRouter)(),er=V.locale||ee.query.locale||"",eo=V.href||ee.asPath;return 0===eo.indexOf("http")&&(_=!0),er&&!_&&(eo=eo?"/".concat(er).concat(eo):ee.pathname.replace("[locale]",er)),(0,ej.jsx)(ej.Fragment,{children:(0,ej.jsx)(eV(),{...V,href:eo,children:d})})}let ActiveLink=h=>{let{children:d,activeClassName:_,className:V,...ee}=h,{asPath:er,isReady:eo}=(0,eL.useRouter)(),[ec,eh]=(0,eF.useState)(V);return(0,eF.useEffect)(()=>{if(eo){let h=new URL(ee.as||ee.href,location.href).pathname,d=new URL(er,location.href).pathname,eo=h===d?"".concat(V," ").concat(_).trim():V;eo!==ec&&eh(eo)}},[er,eo,ee.as,ee.href,_,V,ec]),(0,ej.jsx)(LinkComponent,{className:ec,...ee,children:d})};var eB=_(5278),eW=_(3164),eU=_.n(eW);let ez=(0,eB.j)(eU().button,{variants:{variant:{icon:eU()["button-icon"],inverted:eU()["button-inverted"],ghost:eU()["button-ghost"]},size:{small:eU()["button--small"]}}});function Button(h){let{children:d,variant:_,size:V,className:ee,...er}=h;return(0,ej.jsx)("button",{type:"button",className:ez({variant:_,size:V,className:ee}),...er,children:d})}var eq=_(7754),eX=_.n(eq);function PostPreview(h){let{title:d,slug:_,readingTime:V,description:ee,publishedAt:er}=h;return(0,ej.jsxs)(LinkComponent,{href:"/blog/".concat(_),className:eX().post,children:[(0,ej.jsxs)("h3",{className:eX().post__title,children:[d," - ",(0,ej.jsx)("small",{children:V})]}),(0,ej.jsx)("p",{className:eX().post__description,children:ee}),(0,ej.jsx)("time",{children:er})]})}var eY=_(2010),eG=_(8273),eH=_(4483),eK=_.n(eH),eJ=_(4184),e0=_.n(eJ),e1=_(5697),e2=_.n(e1);function _extends(){return(_extends=Object.assign||function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}var e5=(0,eF.forwardRef)(function(h,d){var _=h.color,V=h.size,ee=void 0===V?24:V,er=function(h,d){if(null==h)return{};var _,V,ee=function(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}(h,d);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(h);for(V=0;V<er.length;V++)_=er[V],!(d.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(h,_)&&(ee[_]=h[_])}return ee}(h,["color","size"]);return eF.createElement("svg",_extends({ref:d,xmlns:"http://www.w3.org/2000/svg",width:ee,height:ee,viewBox:"0 0 24 24",fill:"none",stroke:void 0===_?"currentColor":_,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},er),eF.createElement("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}),eF.createElement("polyline",{points:"9 22 9 12 15 12 15 22"}))});function book_extends(){return(book_extends=Object.assign||function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}e5.propTypes={color:e2().string,size:e2().oneOfType([e2().string,e2().number])},e5.displayName="Home";var e7=(0,eF.forwardRef)(function(h,d){var _=h.color,V=h.size,ee=void 0===V?24:V,er=function(h,d){if(null==h)return{};var _,V,ee=function(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}(h,d);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(h);for(V=0;V<er.length;V++)_=er[V],!(d.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(h,_)&&(ee[_]=h[_])}return ee}(h,["color","size"]);return eF.createElement("svg",book_extends({ref:d,xmlns:"http://www.w3.org/2000/svg",width:ee,height:ee,viewBox:"0 0 24 24",fill:"none",stroke:void 0===_?"currentColor":_,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},er),eF.createElement("path",{d:"M4 19.5A2.5 2.5 0 0 1 6.5 17H20"}),eF.createElement("path",{d:"M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"}))});function info_extends(){return(info_extends=Object.assign||function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}e7.propTypes={color:e2().string,size:e2().oneOfType([e2().string,e2().number])},e7.displayName="Book";var e3=(0,eF.forwardRef)(function(h,d){var _=h.color,V=h.size,ee=void 0===V?24:V,er=function(h,d){if(null==h)return{};var _,V,ee=function(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}(h,d);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(h);for(V=0;V<er.length;V++)_=er[V],!(d.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(h,_)&&(ee[_]=h[_])}return ee}(h,["color","size"]);return eF.createElement("svg",info_extends({ref:d,xmlns:"http://www.w3.org/2000/svg",width:ee,height:ee,viewBox:"0 0 24 24",fill:"none",stroke:void 0===_?"currentColor":_,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},er),eF.createElement("circle",{cx:"12",cy:"12",r:"10"}),eF.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),eF.createElement("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}))});function github_extends(){return(github_extends=Object.assign||function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}e3.propTypes={color:e2().string,size:e2().oneOfType([e2().string,e2().number])},e3.displayName="Info";var e4=(0,eF.forwardRef)(function(h,d){var _=h.color,V=h.size,ee=void 0===V?24:V,er=function(h,d){if(null==h)return{};var _,V,ee=function(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}(h,d);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(h);for(V=0;V<er.length;V++)_=er[V],!(d.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(h,_)&&(ee[_]=h[_])}return ee}(h,["color","size"]);return eF.createElement("svg",github_extends({ref:d,xmlns:"http://www.w3.org/2000/svg",width:ee,height:ee,viewBox:"0 0 24 24",fill:"none",stroke:void 0===_?"currentColor":_,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},er),eF.createElement("path",{d:"M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"}))});function linkedin_extends(){return(linkedin_extends=Object.assign||function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}e4.propTypes={color:e2().string,size:e2().oneOfType([e2().string,e2().number])},e4.displayName="GitHub";var e6=(0,eF.forwardRef)(function(h,d){var _=h.color,V=h.size,ee=void 0===V?24:V,er=function(h,d){if(null==h)return{};var _,V,ee=function(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}(h,d);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(h);for(V=0;V<er.length;V++)_=er[V],!(d.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(h,_)&&(ee[_]=h[_])}return ee}(h,["color","size"]);return eF.createElement("svg",linkedin_extends({ref:d,xmlns:"http://www.w3.org/2000/svg",width:ee,height:ee,viewBox:"0 0 24 24",fill:"none",stroke:void 0===_?"currentColor":_,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},er),eF.createElement("path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"}),eF.createElement("rect",{x:"2",y:"9",width:"4",height:"12"}),eF.createElement("circle",{cx:"4",cy:"4",r:"2"}))});function external_link_extends(){return(external_link_extends=Object.assign||function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}e6.propTypes={color:e2().string,size:e2().oneOfType([e2().string,e2().number])},e6.displayName="Linkedin";var e9=(0,eF.forwardRef)(function(h,d){var _=h.color,V=h.size,ee=void 0===V?24:V,er=function(h,d){if(null==h)return{};var _,V,ee=function(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}(h,d);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(h);for(V=0;V<er.length;V++)_=er[V],!(d.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(h,_)&&(ee[_]=h[_])}return ee}(h,["color","size"]);return eF.createElement("svg",external_link_extends({ref:d,xmlns:"http://www.w3.org/2000/svg",width:ee,height:ee,viewBox:"0 0 24 24",fill:"none",stroke:void 0===_?"currentColor":_,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},er),eF.createElement("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),eF.createElement("polyline",{points:"15 3 21 3 21 9"}),eF.createElement("line",{x1:"10",y1:"14",x2:"21",y2:"3"}))});e9.propTypes={color:e2().string,size:e2().oneOfType([e2().string,e2().number])},e9.displayName="ExternalLink";var e8=_(8268);function sun_extends(){return(sun_extends=Object.assign||function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}var te=(0,eF.forwardRef)(function(h,d){var _=h.color,V=h.size,ee=void 0===V?24:V,er=function(h,d){if(null==h)return{};var _,V,ee=function(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}(h,d);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(h);for(V=0;V<er.length;V++)_=er[V],!(d.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(h,_)&&(ee[_]=h[_])}return ee}(h,["color","size"]);return eF.createElement("svg",sun_extends({ref:d,xmlns:"http://www.w3.org/2000/svg",width:ee,height:ee,viewBox:"0 0 24 24",fill:"none",stroke:void 0===_?"currentColor":_,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},er),eF.createElement("circle",{cx:"12",cy:"12",r:"5"}),eF.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),eF.createElement("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),eF.createElement("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),eF.createElement("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),eF.createElement("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),eF.createElement("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),eF.createElement("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),eF.createElement("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}))});function moon_extends(){return(moon_extends=Object.assign||function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}te.propTypes={color:e2().string,size:e2().oneOfType([e2().string,e2().number])},te.displayName="Sun";var tr=(0,eF.forwardRef)(function(h,d){var _=h.color,V=h.size,ee=void 0===V?24:V,er=function(h,d){if(null==h)return{};var _,V,ee=function(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}(h,d);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(h);for(V=0;V<er.length;V++)_=er[V],!(d.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(h,_)&&(ee[_]=h[_])}return ee}(h,["color","size"]);return eF.createElement("svg",moon_extends({ref:d,xmlns:"http://www.w3.org/2000/svg",width:ee,height:ee,viewBox:"0 0 24 24",fill:"none",stroke:void 0===_?"currentColor":_,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},er),eF.createElement("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}))});function x_logo_extends(){return(x_logo_extends=Object.assign?Object.assign.bind():function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}tr.propTypes={color:e2().string,size:e2().oneOfType([e2().string,e2().number])},tr.displayName="Moon";var to=_(3834),ta=_(2707),tc=_(6270),td=_(3746),tp=_.n(td),tf=_(9071),tm=_.n(tf);function DeleteAccountModal(){let{t:h}=(0,eG.$G)(["delete-account-modal","common"]),{openedModals:d,closeModal:_}=useModals(),V=d.includes(tc.od);function handleCancel(){_(tc.od)}return(0,ej.jsxs)(tS,{isOpen:V,title:h("delete-account-modal:title"),onClose:handleCancel,onClickOutside:handleCancel,id:"delete-account-modal",children:[(0,ej.jsx)("p",{children:h("delete-account-modal:description")}),(0,ej.jsxs)("div",{className:tm().modal__footer,children:[(0,ej.jsx)(Button,{variant:"inverted",onClick:handleCancel,children:h("common:cancel")}),(0,ej.jsx)(Button,{variant:"ghost",onClick:function(){(0,ta.tm)(),_(tc.od)},children:h("delete-account-modal:button")})]})]})}let tg=[{title:"home",href:"/",external:!1,icon:e5},{title:"blog",href:"/blog",external:!1,icon:e7},{title:"about",href:"/about",external:!1,icon:e3}],tO=[{title:"GitHub",href:"https://github.com/allyssonsantos",external:!0,icon:e4},{title:"X (Twitter)",href:"https://twitter.com/_allyssonsantos",external:!0,icon:function(h){return eF.createElement("svg",x_logo_extends({"aria-label":"X",viewBox:"0 0 24 24"},h),eO||(eO=eF.createElement("path",{d:"M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"})))}},{title:"LinkedIn",href:"https://www.linkedin.com/in/allyssonsantos/",external:!0,icon:e6}];function SideBarLink(h){let{title:d,href:_,external:V,icon:ee}=h;return(0,ej.jsxs)(ActiveLink,{href:_,target:V?"_blank":"_self",rel:"noopener nofollow noreferrer",className:tp().sidebar__link,activeClassName:tp()["sidebar__link--active"],children:[(0,ej.jsx)(ee,{}),d,V&&(0,ej.jsx)(e9,{})]})}function SideBar(h){let{isOpen:d,onSideBarClose:_}=h,{t:V}=(0,eG.$G)(["common","sidebar"]),[ee,er]=(0,eF.useState)(!1),[eo,ec]=(0,eF.useState)(!1),{openModal:eh}=useModals(),{theme:ep,setTheme:ef}=(0,eY.F)(),em="dark"===ep,{currentUser:eg}=(0,ta.aC)(),eO=function(){let h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:to.w4,d=(0,eF.useMemo)(()=>window.matchMedia("(min-width: ".concat(h,"px)")),[h]),[_,V]=(0,eF.useState)(!d||!d.matches),ee=(0,eF.useCallback)(h=>{V(!h.matches)},[]);return(0,eF.useEffect)(()=>{if(d)return d.addEventListener("change",ee),()=>d.removeEventListener("change",ee)},[d,ee]),_}();return(0,eF.useEffect)(()=>{er(!0)},[]),(0,ej.jsx)(eK(),{active:eO&&d,focusTrapOptions:{allowOutsideClick:!0},children:(0,ej.jsxs)("aside",{className:e0()(tp().sidebar,{[tp()["sidebar--opened"]]:d}),children:[(0,ej.jsx)(Button,{"aria-label":V("sidebar:close-menu"),onClick:_,variant:"icon",className:tp()["sidebar__close-button"],children:(0,ej.jsx)(e8.Z,{})}),(0,ej.jsxs)("header",{className:tp().sidebar__header,children:[(0,ej.jsx)(LinkComponent,{href:"/",className:tp().sidebar__logo,children:"allysson.me"}),eg?(0,ej.jsxs)(ej.Fragment,{children:[(0,ej.jsx)(Avatar,{src:eg.photoURL,name:eg.displayName,onClick:function(){ec(!eo)}}),(0,ej.jsx)(tj,{isOpen:eo,onClose:()=>ec(!1),items:[{text:V("sidebar:sign-out"),onClick:ta.kS},{text:V("sidebar:delete-account"),onClick:function(){eh(tc.od)}}]})]}):(0,ej.jsx)(Button,{className:tp().sidebar__login,onClick:function(){eh(tc.xC)},children:V("sidebar:sign-in")}),(0,ej.jsx)(SignInModal,{}),(0,ej.jsx)(DeleteAccountModal,{})]}),(0,ej.jsxs)("nav",{className:tp().sidebar__navigation,children:[(0,ej.jsx)("ul",{className:tp().sidebar__list,children:tg.map(h=>{let{title:d,..._}=h,ee=V("sidebar:".concat(d));return(0,ej.jsx)("li",{children:(0,ej.jsx)(SideBarLink,{title:ee,..._})},d)})}),(0,ej.jsxs)("div",{children:[(0,ej.jsx)("small",{className:tp().sidebar__category,children:V("sidebar:socials")}),(0,ej.jsx)("ul",{className:tp().sidebar__list,children:tO.map(h=>(0,ej.jsx)("li",{children:(0,ej.jsx)(SideBarLink,{...h},h.title)},h.title))})]}),(0,ej.jsx)("div",{children:(0,ej.jsxs)("label",{children:[(0,ej.jsx)("small",{className:tp().sidebar__category,children:V("sidebar:language")}),(0,ej.jsx)(LanguageSwitcher,{})]})})]}),ee&&(0,ej.jsxs)("button",{className:e0()(tp()["sidebar__theme-button"],{[tp()["sidebar__theme-button--active"]]:!em}),type:"button","aria-label":V("sidebar:change-theme"),onClick:function(){ef(em?"light":"dark")},children:[(0,ej.jsx)(te,{}),(0,ej.jsx)(tr,{})]})]})})}var ty=_(4512),tv=_.n(ty);let tb=(0,eB.j)(tv().modal,{variants:{fadeIn:{true:"fade-in slide-in-mobile"},fadeOut:{true:"fade-out slide-out-mobile"}}}),tS=(0,eF.forwardRef)((h,d)=>{let{title:_,children:V,onClickOutside:ee,isOpen:er,onClose:eo,className:ec,id:eh="modal-title",...ep}=h,ef=(0,eF.useRef)(null),[em,eg]=(0,eF.useState)(!1),{t:eO}=(0,eG.$G)("common");return(0,eF.useImperativeHandle)(d,()=>ef.current),(0,eF.useEffect)(()=>{var h,d;!er||(null===(h=ef.current)||void 0===h?void 0:h.open)||null===(d=ef.current)||void 0===d||d.showModal()},[er]),(0,ej.jsx)("dialog",{...ep,onClose:eo,ref:ef,"aria-labelledby":eh,onClick:function(h){"DIALOG"===h.target.nodeName&&ee&&ee()},onAnimationEnd:()=>{if(!er||em){var h;null===(h=ef.current)||void 0===h||h.close(),eg(!1)}},className:tb({className:ec,fadeIn:er&&!em,fadeOut:!er||em}),children:(0,ej.jsxs)("div",{className:tv().modal__wrapper,children:[(0,ej.jsxs)("div",{className:tv().modal__header,children:[(0,ej.jsx)("h2",{id:eh,className:tv().modal__title,children:_}),(0,ej.jsx)(Button,{onClick:function(){eg(!0)},"aria-label":eO("close-modal"),variant:"icon",size:"small",children:(0,ej.jsx)(e8.Z,{"aria-hidden":!0})})]}),V]})})});tS.displayName="Modal";let t_=(0,eF.createContext)({});function useModals(){let h=(0,eF.useContext)(t_);if(!h)throw Error("useModals must be used within a ModalProvider");return h}function ModalProvider(h){let{children:d}=h,[_,V]=(0,eF.useState)([]),ee=(0,eF.useCallback)(h=>{V(d=>[...d,h])},[]),er=(0,eF.useCallback)(h=>{V(d=>d.filter(d=>d!==h))},[]),eo=(0,eF.useMemo)(()=>({openedModals:_,openModal:ee,closeModal:er}),[_,ee,er]);return(0,ej.jsx)(t_.Provider,{value:eo,children:d})}function google_logo_extends(){return(google_logo_extends=Object.assign?Object.assign.bind():function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}var google_logo=function(h){return eF.createElement("svg",google_logo_extends({width:25,height:25,className:"google-logo_svg__nc google-logo_svg__gz google-logo_svg__y"},h),ey||(ey=eF.createElement("g",{fill:"none",fillRule:"evenodd"},eF.createElement("path",{fill:"#4285F4",d:"M20.66 12.7c0-.61-.05-1.19-.15-1.74H12.5v3.28h4.58a3.91 3.91 0 0 1-1.7 2.57v2.13h2.74a8.27 8.27 0 0 0 2.54-6.24z"}),eF.createElement("path",{fill:"#34A853",d:"M12.5 21a8.1 8.1 0 0 0 5.63-2.06l-2.75-2.13a5.1 5.1 0 0 1-2.88.8 5.06 5.06 0 0 1-4.76-3.5H4.9v2.2A8.5 8.5 0 0 0 12.5 21z"}),eF.createElement("path",{fill:"#FBBC05",d:"M7.74 14.12a5.11 5.11 0 0 1 0-3.23v-2.2H4.9A8.49 8.49 0 0 0 4 12.5c0 1.37.33 2.67.9 3.82l2.84-2.2z"}),eF.createElement("path",{fill:"#EA4335",d:"M12.5 7.38a4.6 4.6 0 0 1 3.25 1.27l2.44-2.44A8.17 8.17 0 0 0 12.5 4a8.5 8.5 0 0 0-7.6 4.68l2.84 2.2a5.06 5.06 0 0 1 4.76-3.5z"}))))},tw=_(5507),tx=_.n(tw);let tk=(0,eB.j)(tx()["google-button"]);function GoogleButton(h){let{t:d}=(0,eG.$G)("sign-in-modal");return(0,ej.jsxs)("button",{...h,"aria-label":d("sign-in-with-google-label"),className:tk({className:h.className}),children:[(0,ej.jsx)("div",{className:tx()["google-button__logo"],children:(0,ej.jsx)(google_logo,{})}),(0,ej.jsx)("span",{className:tx()["google-button__label"],children:d("sign-in-with-google")})]})}var tT=_(507),tE=_.n(tT);function Textarea(h){return(0,ej.jsx)("textarea",{className:tE().textarea,...h})}var tC=_(2823),tP=_.n(tC);let tI=(0,eB.j)(tP().alert);function Alert(h){let{children:d,className:_}=h;return(0,ej.jsx)("div",{role:"alert",className:tI({className:_}),children:d})}var tR=_(5675),tA=_.n(tR),t$=_(408),tN=_(5799),tM=_.n(tN);function Avatar(h){let{src:d="",name:_,onClick:V}=h;return(0,ej.jsxs)("button",{className:tM().avatar,onClick:V,children:[(0,ej.jsx)(t$.Z,{size:18}),(0,ej.jsx)(tA(),{width:32,height:32,src:d||"",alt:_||""})]})}var tQ=_(3008),tD=_.n(tQ);let tj=(0,eF.forwardRef)((h,d)=>{let{isOpen:_,items:V,onClose:ee}=h,er=(0,eF.useRef)(null);return(0,eF.useImperativeHandle)(d,()=>er.current),(0,eF.useEffect)(()=>{var h,d;_&&!er.current.open&&(null===(h=er.current)||void 0===h||h.show()),!_&&er.current.open&&(null===(d=er.current)||void 0===d||d.close())},[_]),(0,ej.jsx)("dialog",{className:tD().menu,onClose:ee,ref:er,children:(0,ej.jsx)("ul",{className:tD().menu__list,children:V.map(h=>{let{text:d,onClick:_}=h;return(0,ej.jsx)("li",{children:(0,ej.jsx)("button",{className:tD().menu__item,onClick:()=>{_(),er.current.close()},children:d})},d)})})})});tj.displayName="Menu";var tL=_(8175),tF=_.n(tL);function SignInModal(){let[h,d]=(0,eF.useState)(!1),{openedModals:_,closeModal:V}=useModals(),{t:ee}=(0,eG.$G)("sign-in-modal"),er=_.includes(tc.xC);function closeSignInModal(){V(tc.xC)}async function doLogin(){try{await (0,ta.x4)(),d(!1),V(tc.xC)}catch(h){if("auth/popup-closed-by-user"===h.code)return;d(!0)}}return(0,ej.jsx)(tS,{isOpen:er,title:ee("title"),onClose:closeSignInModal,onClickOutside:closeSignInModal,id:"sign-in-modal",children:(0,ej.jsxs)("div",{className:tF()["sign-in-modal"],children:[(0,ej.jsx)(GoogleButton,{className:tF()["sign-in-modal__button"],onClick:doLogin}),h&&(0,ej.jsx)("div",{children:"something went wrong"}),(0,ej.jsxs)("div",{className:tF()["sign-in-modal__disclaimer"],children:[(0,ej.jsx)("small",{children:ee("disclaimer-1")}),(0,ej.jsx)("small",{children:ee("disclaimer-2")})]})]})})}var tZ=_(5774),tV=_(4230),tB=_.n(tV);function DeleteCommentModal(h){let{commentId:d,message:_}=h,{t:V,i18n:ee}=(0,eG.$G)(["delete-comment-modal","common"]),{openedModals:er,closeModal:eo}=useModals(),ec="".concat(tc.VI,"-").concat(d),eh=er.includes(ec);function handleCancel(){eo(ec)}return(0,ej.jsxs)(tS,{isOpen:eh,title:V("delete-comment-modal:title"),onClose:handleCancel,onClickOutside:handleCancel,id:"delete-comment-modal",children:[(0,ej.jsx)("p",{children:V("delete-comment-modal:description")}),(0,ej.jsx)("blockquote",{className:tB().modal__message,children:_}),(0,ej.jsxs)("div",{className:tB().modal__footer,children:[(0,ej.jsx)(Button,{variant:"inverted",onClick:handleCancel,children:V("common:cancel")}),(0,ej.jsx)(Button,{variant:"ghost",onClick:function(){(0,tZ.Q)(d),eo(ec)},children:V("common:delete")})]})]})}var tW=_(1175),tU=_.n(tW),tz=_(4276),tq=_.n(tz);let tX={en:{name:"English",flag:"\uD83C\uDDFA\uD83C\uDDF8"},pt:{name:"Portugu\xeas",flag:"\uD83C\uDDE7\uD83C\uDDF7"}};function LanguageSwitcher(){let h=(0,eL.useRouter)(),d=h.query.locale,[_,V]=(0,eF.useState)(d||"pt");return(0,ej.jsx)("select",{className:tq()["language-switcher"],onChange:function(_){let ee=_.target.value;if(V(ee),"pt"===ee){let _=new RegExp("".concat(d,"/?"));console.log(h.asPath.replace(_,"")),h.push("".concat(h.asPath.replace(_,"")));return}if(!d){h.push("/".concat(ee).concat(h.asPath));return}},value:_,children:tU().i18n.locales.map(h=>(0,ej.jsxs)("option",{value:h,children:[tX[h].flag," ",tX[h].name]},h))})}var tY="colors",tG="sizes",tH="space",tK={gap:tH,gridGap:tH,columnGap:tH,gridColumnGap:tH,rowGap:tH,gridRowGap:tH,inset:tH,insetBlock:tH,insetBlockEnd:tH,insetBlockStart:tH,insetInline:tH,insetInlineEnd:tH,insetInlineStart:tH,margin:tH,marginTop:tH,marginRight:tH,marginBottom:tH,marginLeft:tH,marginBlock:tH,marginBlockEnd:tH,marginBlockStart:tH,marginInline:tH,marginInlineEnd:tH,marginInlineStart:tH,padding:tH,paddingTop:tH,paddingRight:tH,paddingBottom:tH,paddingLeft:tH,paddingBlock:tH,paddingBlockEnd:tH,paddingBlockStart:tH,paddingInline:tH,paddingInlineEnd:tH,paddingInlineStart:tH,top:tH,right:tH,bottom:tH,left:tH,scrollMargin:tH,scrollMarginTop:tH,scrollMarginRight:tH,scrollMarginBottom:tH,scrollMarginLeft:tH,scrollMarginX:tH,scrollMarginY:tH,scrollMarginBlock:tH,scrollMarginBlockEnd:tH,scrollMarginBlockStart:tH,scrollMarginInline:tH,scrollMarginInlineEnd:tH,scrollMarginInlineStart:tH,scrollPadding:tH,scrollPaddingTop:tH,scrollPaddingRight:tH,scrollPaddingBottom:tH,scrollPaddingLeft:tH,scrollPaddingX:tH,scrollPaddingY:tH,scrollPaddingBlock:tH,scrollPaddingBlockEnd:tH,scrollPaddingBlockStart:tH,scrollPaddingInline:tH,scrollPaddingInlineEnd:tH,scrollPaddingInlineStart:tH,fontSize:"fontSizes",background:tY,backgroundColor:tY,backgroundImage:tY,borderImage:tY,border:tY,borderBlock:tY,borderBlockEnd:tY,borderBlockStart:tY,borderBottom:tY,borderBottomColor:tY,borderColor:tY,borderInline:tY,borderInlineEnd:tY,borderInlineStart:tY,borderLeft:tY,borderLeftColor:tY,borderRight:tY,borderRightColor:tY,borderTop:tY,borderTopColor:tY,caretColor:tY,color:tY,columnRuleColor:tY,fill:tY,outline:tY,outlineColor:tY,stroke:tY,textDecorationColor:tY,fontFamily:"fonts",fontWeight:"fontWeights",lineHeight:"lineHeights",letterSpacing:"letterSpacings",blockSize:tG,minBlockSize:tG,maxBlockSize:tG,inlineSize:tG,minInlineSize:tG,maxInlineSize:tG,width:tG,minWidth:tG,maxWidth:tG,height:tG,minHeight:tG,maxHeight:tG,flexBasis:tG,gridTemplateColumns:tG,gridTemplateRows:tG,borderWidth:"borderWidths",borderTopWidth:"borderWidths",borderRightWidth:"borderWidths",borderBottomWidth:"borderWidths",borderLeftWidth:"borderWidths",borderStyle:"borderStyles",borderTopStyle:"borderStyles",borderRightStyle:"borderStyles",borderBottomStyle:"borderStyles",borderLeftStyle:"borderStyles",borderRadius:"radii",borderTopLeftRadius:"radii",borderTopRightRadius:"radii",borderBottomRightRadius:"radii",borderBottomLeftRadius:"radii",boxShadow:"shadows",textShadow:"shadows",transition:"transitions",zIndex:"zIndices"},o=(h,d)=>"function"==typeof d?{"()":Function.prototype.toString.call(d)}:d,l=()=>{let h=Object.create(null);return(d,_,...V)=>{let ee=JSON.stringify(d,o);return ee in h?h[ee]:h[ee]=_(d,...V)}},tJ=Symbol.for("sxs.internal"),a=(h,d)=>Object.defineProperties(h,Object.getOwnPropertyDescriptors(d)),c=h=>{for(let d in h)return!0;return!1},{hasOwnProperty:t0}=Object.prototype,g=h=>h.includes("-")?h:h.replace(/[A-Z]/g,h=>"-"+h.toLowerCase()),t1=/\s+(?![^()]*\))/,u=h=>d=>h(..."string"==typeof d?String(d).split(t1):[d]),t2={appearance:h=>({WebkitAppearance:h,appearance:h}),backfaceVisibility:h=>({WebkitBackfaceVisibility:h,backfaceVisibility:h}),backdropFilter:h=>({WebkitBackdropFilter:h,backdropFilter:h}),backgroundClip:h=>({WebkitBackgroundClip:h,backgroundClip:h}),boxDecorationBreak:h=>({WebkitBoxDecorationBreak:h,boxDecorationBreak:h}),clipPath:h=>({WebkitClipPath:h,clipPath:h}),content:h=>({content:h.includes('"')||h.includes("'")||/^([A-Za-z]+\([^]*|[^]*-quote|inherit|initial|none|normal|revert|unset)$/.test(h)?h:`"${h}"`}),hyphens:h=>({WebkitHyphens:h,hyphens:h}),maskImage:h=>({WebkitMaskImage:h,maskImage:h}),maskSize:h=>({WebkitMaskSize:h,maskSize:h}),tabSize:h=>({MozTabSize:h,tabSize:h}),textSizeAdjust:h=>({WebkitTextSizeAdjust:h,textSizeAdjust:h}),userSelect:h=>({WebkitUserSelect:h,userSelect:h}),marginBlock:u((h,d)=>({marginBlockStart:h,marginBlockEnd:d||h})),marginInline:u((h,d)=>({marginInlineStart:h,marginInlineEnd:d||h})),maxSize:u((h,d)=>({maxBlockSize:h,maxInlineSize:d||h})),minSize:u((h,d)=>({minBlockSize:h,minInlineSize:d||h})),paddingBlock:u((h,d)=>({paddingBlockStart:h,paddingBlockEnd:d||h})),paddingInline:u((h,d)=>({paddingInlineStart:h,paddingInlineEnd:d||h}))},t5=/([\d.]+)([^]*)/,m=(h,d)=>h.length?h.reduce((h,_)=>(h.push(...d.map(h=>h.includes("&")?h.replace(/&/g,/[ +>|~]/.test(_)&&/&.*&/.test(h)?`:is(${_})`:_):_+" "+h)),h),[]):d,b=(h,d)=>h in t7&&"string"==typeof d?d.replace(/^((?:[^]*[^\w-])?)(fit-content|stretch)((?:[^\w-][^]*)?)$/,(d,_,V,ee)=>_+("stretch"===V?`-moz-available${ee};${g(h)}:${_}-webkit-fill-available`:`-moz-fit-content${ee};${g(h)}:${_}fit-content`)+ee):String(d),t7={blockSize:1,height:1,inlineSize:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,width:1},k=h=>h?h+"-":"",y=(h,d,_)=>h.replace(/([+-])?((?:\d+(?:\.\d*)?|\.\d+)(?:[Ee][+-]?\d+)?)?(\$|--)([$\w-]+)/g,(h,V,ee,er,eo)=>"$"==er==!!ee?h:(V||"--"==er?"calc(":"")+"var(--"+("$"===er?k(d)+(eo.includes("$")?"":k(_))+eo.replace(/\$/g,"-"):eo)+")"+(V||"--"==er?"*"+(V||"")+(ee||"1")+")":"")),t3=/\s*,\s*(?![^()]*\))/,t4=Object.prototype.toString,dist_x=(h,d,_,V,ee)=>{let er,eo,ec;let a=(h,d,_)=>{let eh,ep;let p=h=>{var ef;for(eh in h){let em=64===eh.charCodeAt(0),eg=em&&Array.isArray(h[eh])?h[eh]:[h[eh]];for(ep of eg){let h=/[A-Z]/.test(ef=eh)?ef:ef.replace(/-[^]/g,h=>h[1].toUpperCase()),eg="object"==typeof ep&&ep&&ep.toString===t4&&(!V.utils[h]||!d.length);if(h in V.utils&&!eg){let d=V.utils[h];if(d!==eo){eo=d,p(d(ep)),eo=null;continue}}else if(h in t2){let d=t2[h];if(d!==ec){ec=d,p(d(ep)),ec=null;continue}}if(em&&(eh=(eh.slice(1) in V.media?"@media "+V.media[eh.slice(1)]:eh).replace(/\(\s*([\w-]+)\s*(=|<|<=|>|>=)\s*([\w-]+)\s*(?:(<|<=|>|>=)\s*([\w-]+)\s*)?\)/g,(h,d,_,V,ee,er)=>{let eo=t5.test(d),ec=.0625*(eo?-1:1),[eh,ep]=eo?[V,d]:[d,V];return"("+("="===_[0]?"":">"===_[0]===eo?"max-":"min-")+eh+":"+("="!==_[0]&&1===_.length?ep.replace(t5,(h,d,V)=>Number(d)+ec*(">"===_?1:-1)+V):ep)+(ee?") and ("+(">"===ee[0]?"min-":"max-")+eh+":"+(1===ee.length?er.replace(t5,(h,d,_)=>Number(d)+ec*(">"===ee?-1:1)+_):er):"")+")"})),eg){let h=em?_.concat(eh):[..._],V=em?[...d]:m(d,eh.split(t3));void 0!==er&&ee(I(...er)),er=void 0,a(ep,V,h)}else void 0===er&&(er=[[],d,_]),eh=em||36!==eh.charCodeAt(0)?eh:`--${k(V.prefix)}${eh.slice(1).replace(/\$/g,"-")}`,ep=eg?ep:"number"==typeof ep?ep&&h in t6?String(ep)+"px":String(ep):y(b(h,null==ep?"":ep),V.prefix,V.themeMap[h]),er[0].push(`${em?`${eh} `:`${g(eh)}:`}${ep}`)}}};p(h),void 0!==er&&ee(I(...er)),er=void 0};a(h,d,_)},I=(h,d,_)=>`${_.map(h=>`${h}{`).join("")}${d.length?`${d.join(",")}{`:""}${h.join(";")}${d.length?"}":""}${Array(_.length?_.length+1:0).join("}")}`,t6={animationDelay:1,animationDuration:1,backgroundSize:1,blockSize:1,border:1,borderBlock:1,borderBlockEnd:1,borderBlockEndWidth:1,borderBlockStart:1,borderBlockStartWidth:1,borderBlockWidth:1,borderBottom:1,borderBottomLeftRadius:1,borderBottomRightRadius:1,borderBottomWidth:1,borderEndEndRadius:1,borderEndStartRadius:1,borderInlineEnd:1,borderInlineEndWidth:1,borderInlineStart:1,borderInlineStartWidth:1,borderInlineWidth:1,borderLeft:1,borderLeftWidth:1,borderRadius:1,borderRight:1,borderRightWidth:1,borderSpacing:1,borderStartEndRadius:1,borderStartStartRadius:1,borderTop:1,borderTopLeftRadius:1,borderTopRightRadius:1,borderTopWidth:1,borderWidth:1,bottom:1,columnGap:1,columnRule:1,columnRuleWidth:1,columnWidth:1,containIntrinsicSize:1,flexBasis:1,fontSize:1,gap:1,gridAutoColumns:1,gridAutoRows:1,gridTemplateColumns:1,gridTemplateRows:1,height:1,inlineSize:1,inset:1,insetBlock:1,insetBlockEnd:1,insetBlockStart:1,insetInline:1,insetInlineEnd:1,insetInlineStart:1,left:1,letterSpacing:1,margin:1,marginBlock:1,marginBlockEnd:1,marginBlockStart:1,marginBottom:1,marginInline:1,marginInlineEnd:1,marginInlineStart:1,marginLeft:1,marginRight:1,marginTop:1,maxBlockSize:1,maxHeight:1,maxInlineSize:1,maxWidth:1,minBlockSize:1,minHeight:1,minInlineSize:1,minWidth:1,offsetDistance:1,offsetRotate:1,outline:1,outlineOffset:1,outlineWidth:1,overflowClipMargin:1,padding:1,paddingBlock:1,paddingBlockEnd:1,paddingBlockStart:1,paddingBottom:1,paddingInline:1,paddingInlineEnd:1,paddingInlineStart:1,paddingLeft:1,paddingRight:1,paddingTop:1,perspective:1,right:1,rowGap:1,scrollMargin:1,scrollMarginBlock:1,scrollMarginBlockEnd:1,scrollMarginBlockStart:1,scrollMarginBottom:1,scrollMarginInline:1,scrollMarginInlineEnd:1,scrollMarginInlineStart:1,scrollMarginLeft:1,scrollMarginRight:1,scrollMarginTop:1,scrollPadding:1,scrollPaddingBlock:1,scrollPaddingBlockEnd:1,scrollPaddingBlockStart:1,scrollPaddingBottom:1,scrollPaddingInline:1,scrollPaddingInlineEnd:1,scrollPaddingInlineStart:1,scrollPaddingLeft:1,scrollPaddingRight:1,scrollPaddingTop:1,shapeMargin:1,textDecoration:1,textDecorationThickness:1,textIndent:1,textUnderlineOffset:1,top:1,transitionDelay:1,transitionDuration:1,verticalAlign:1,width:1,wordSpacing:1},z=h=>String.fromCharCode(h+(h>25?39:97)),W=h=>(h=>{let d,_="";for(d=Math.abs(h);d>52;d=d/52|0)_=z(d%52)+_;return z(d%52)+_})(((h,d)=>{let _=d.length;for(;_;)h=33*h^d.charCodeAt(--_);return h})(5381,JSON.stringify(h))>>>0),t9=["themed","global","styled","onevar","resonevar","allvar","inline"],E=h=>{if(h.href&&!h.href.startsWith(location.origin))return!1;try{return!!h.cssRules}catch(h){return!1}},T=h=>{let d;let n=()=>{let{cssRules:h}=d.sheet;return[].map.call(h,(_,V)=>{let{cssText:ee}=_,er="";if(ee.startsWith("--sxs"))return"";if(h[V-1]&&(er=h[V-1].cssText).startsWith("--sxs")){if(!_.cssRules.length)return"";for(let h in d.rules)if(d.rules[h].group===_)return`--sxs{--sxs:${[...d.rules[h].cache].join(" ")}}${ee}`;return _.cssRules.length?`${er}${ee}`:""}return ee}).join("")},r=()=>{if(d){let{rules:h,sheet:_}=d;if(!_.deleteRule){for(;3===Object(Object(_.cssRules)[0]).type;)_.cssRules.splice(0,1);_.cssRules=[]}for(let d in h)delete h[d]}let _=Object(h).styleSheets||[];for(let h of _)if(E(h)){for(let _=0,V=h.cssRules;V[_];++_){let ee=Object(V[_]);if(1!==ee.type)continue;let er=Object(V[_+1]);if(4!==er.type)continue;++_;let{cssText:eo}=ee;if(!eo.startsWith("--sxs"))continue;let ec=eo.slice(14,-3).trim().split(/\s+/),eh=t9[ec[0]];eh&&(d||(d={sheet:h,reset:r,rules:{},toString:n}),d.rules[eh]={group:er,index:_,cache:new Set(ec)})}if(d)break}if(!d){let i=(h,d)=>({type:d,cssRules:[],insertRule(h,d){this.cssRules.splice(d,0,i(h,{import:3,undefined:1}[(h.toLowerCase().match(/^@([a-z]+)/)||[])[1]]||4))},get cssText(){return"@media{}"===h?`@media{${[].map.call(this.cssRules,h=>h.cssText).join("")}}`:h}});d={sheet:h?(h.head||h).appendChild(document.createElement("style")).sheet:i("","text/css"),rules:{},reset:r,toString:n}}let{sheet:V,rules:ee}=d;for(let h=t9.length-1;h>=0;--h){let d=t9[h];if(!ee[d]){let _=t9[h+1],er=ee[_]?ee[_].index:V.cssRules.length;V.insertRule("@media{}",er),V.insertRule(`--sxs{--sxs:${h}}`,er),ee[d]={group:V.cssRules[er+1],index:er,cache:new Set([h])}}v(ee[d])}};return r(),d},v=h=>{let d=h.group,_=d.cssRules.length;h.apply=h=>{try{d.insertRule(h,_),++_}catch(h){}}},t8=Symbol(),ne=l(),C=(h,d)=>ne(h,()=>(..._)=>{let V={type:null,composers:new Set};for(let d of _)if(null!=d){if(d[tJ])for(let h of(null==V.type&&(V.type=d[tJ].type),d[tJ].composers))V.composers.add(h);else d.constructor!==Object||d.$$typeof?null==V.type&&(V.type=d):V.composers.add(P(d,h))}return null==V.type&&(V.type="span"),V.composers.size||V.composers.add(["PJLV",{},[],[],{},[]]),L(h,V,d)}),P=({variants:h,compoundVariants:d,defaultVariants:_,...V},ee)=>{let er=`${k(ee.prefix)}c-${W(V)}`,eo=[],ec=[],eh=Object.create(null),ep=[];for(let h in _)eh[h]=String(_[h]);if("object"==typeof h&&h)for(let d in h){t0.call(eh,d)||(eh[d]="undefined");let _=h[d];for(let h in _){let V={[d]:String(h)};"undefined"===String(h)&&ep.push(d);let ee=_[h],er=[V,ee,!c(ee)];eo.push(er)}}if("object"==typeof d&&d)for(let h of d){let{css:d,..._}=h;for(let h in d="object"==typeof d&&d||{},_)_[h]=String(_[h]);let V=[_,d,!c(d)];ec.push(V)}return[er,V,eo,ec,eh,ep]},L=(h,d,_)=>{let[V,ee,er,eo]=O(d.composers),ec="function"==typeof d.type||d.type.$$typeof?(h=>{function t(){for(let d=0;d<t[t8].length;d++){let[_,V]=t[t8][d];h.rules[_].apply(V)}return t[t8]=[],null}return t[t8]=[],t.rules={},t9.forEach(h=>t.rules[h]={apply:d=>t[t8].push([h,d])}),t})(_):null,eh=(ec||_).rules,ep=`.${V}${ee.length>1?`:where(.${ee.slice(1).join(".")})`:""}`,p=ef=>{ef="object"==typeof ef&&ef||nn;let{css:em,...eg}=ef,eO={};for(let h in er)if(delete eg[h],h in ef){let d=ef[h];"object"==typeof d&&d?eO[h]={"@initial":er[h],...d}:(d=String(d),eO[h]="undefined"!==d||eo.has(h)?d:er[h])}else eO[h]=er[h];let ey=new Set([...ee]);for(let[V,ee,er,eo]of d.composers){_.rules.styled.cache.has(V)||(_.rules.styled.cache.add(V),dist_x(ee,[`.${V}`],[],h,h=>{eh.styled.apply(h)}));let d=A(er,eO,h.media),ec=A(eo,eO,h.media,!0);for(let ee of d)if(void 0!==ee)for(let[d,er,eo]of ee){let ee=`${V}-${W(er)}-${d}`;ey.add(ee);let ec=(eo?_.rules.resonevar:_.rules.onevar).cache,ep=eo?eh.resonevar:eh.onevar;ec.has(ee)||(ec.add(ee),dist_x(er,[`.${ee}`],[],h,h=>{ep.apply(h)}))}for(let d of ec)if(void 0!==d)for(let[ee,er]of d){let d=`${V}-${W(er)}-${ee}`;ey.add(d),_.rules.allvar.cache.has(d)||(_.rules.allvar.cache.add(d),dist_x(er,[`.${d}`],[],h,h=>{eh.allvar.apply(h)}))}}if("object"==typeof em&&em){let d=`${V}-i${W(em)}-css`;ey.add(d),_.rules.inline.cache.has(d)||(_.rules.inline.cache.add(d),dist_x(em,[`.${d}`],[],h,h=>{eh.inline.apply(h)}))}for(let h of String(ef.className||"").trim().split(/\s+/))h&&ey.add(h);let ev=eg.className=[...ey].join(" ");return{type:d.type,className:ev,selector:ep,props:eg,toString:()=>ev,deferredInjector:ec}};return a(p,{className:V,selector:ep,[tJ]:d,toString:()=>(_.rules.styled.cache.has(V)||p(),V)})},O=h=>{let d="",_=[],V={},ee=[];for(let[er,,,,eo,ec]of h)for(let h in""===d&&(d=er),_.push(er),ee.push(...ec),eo){let d=eo[h];(void 0===V[h]||"undefined"!==d||ec.includes(d))&&(V[h]=d)}return[d,_,V,new Set(ee)]},A=(h,d,_,V)=>{let ee=[];n:for(let[er,eo,ec]of h){if(ec)continue;let h,eh=0,ep=!1;for(h in er){let V=er[h],ee=d[h];if(ee!==V){if("object"!=typeof ee||!ee)continue n;{let h,d,er=0;for(let eo in ee){if(V===String(ee[eo])){if("@initial"!==eo){let h=eo.slice(1);(d=d||[]).push(h in _?_[h]:eo.replace(/^@media ?/,"")),ep=!0}eh+=er,h=!0}++er}if(d&&d.length&&(eo={["@media "+d.join(", ")]:eo}),!h)continue n}}}(ee[eh]=ee[eh]||[]).push([V?"cv":`${h}-${er[h]}`,eo,ep])}return ee},nn={},nr=l(),N=(h,d)=>nr(h,()=>(..._)=>{let r=()=>{for(let V of _){let _=W(V="object"==typeof V&&V||{});if(!d.rules.global.cache.has(_)){if(d.rules.global.cache.add(_),"@import"in V){let h=[].indexOf.call(d.sheet.cssRules,d.rules.themed.group)-1;for(let _ of[].concat(V["@import"]))_=_.includes('"')||_.includes("'")?_:`"${_}"`,d.sheet.insertRule(`@import ${_};`,h++);delete V["@import"]}dist_x(V,[],[],h,h=>{d.rules.global.apply(h)})}}return""};return a(r,{toString:r})}),ni=l(),G=(h,d)=>ni(h,()=>_=>{let V=`${k(h.prefix)}k-${W(_)}`,i=()=>{if(!d.rules.global.cache.has(V)){d.rules.global.cache.add(V);let ee=[];dist_x(_,[],[],h,h=>ee.push(h));let er=`@keyframes ${V}{${ee.join("")}}`;d.rules.global.apply(er)}return V};return a(i,{get name(){return i()},toString:i})}),no=class{constructor(h,d,_,V){this.token=null==h?"":String(h),this.value=null==d?"":String(d),this.scale=null==_?"":String(_),this.prefix=null==V?"":String(V)}get computedValue(){return"var("+this.variable+")"}get variable(){return"--"+k(this.prefix)+k(this.scale)+this.token}toString(){return this.computedValue}},nl=l(),U=(h,d)=>nl(h,()=>(_,V)=>{V="object"==typeof _&&_||Object(V);let ee=`.${_=(_="string"==typeof _?_:"")||`${k(h.prefix)}t-${W(V)}`}`,er={},eo=[];for(let d in V)for(let _ in er[d]={},V[d]){let ee=`--${k(h.prefix)}${d}-${_}`,ec=y(String(V[d][_]),h.prefix,d);er[d][_]=new no(_,ec,d,h.prefix),eo.push(`${ee}:${ec}`)}let s=()=>{if(eo.length&&!d.rules.themed.cache.has(_)){d.rules.themed.cache.add(_);let ee=`${V===h.theme?":root,":""}.${_}{${eo.join(";")}}`;d.rules.themed.apply(ee)}return _};return{...er,get className(){return s()},selector:ee,toString:s}}),nd=l(),np=_(1116),nm=_(7046);_(7272);let Text=class Text{lineAt(h){if(h<0||h>this.length)throw RangeError(`Invalid position ${h} in document of length ${this.length}`);return this.lineInner(h,!1,1,0)}line(h){if(h<1||h>this.lines)throw RangeError(`Invalid line number ${h} in ${this.lines}-line document`);return this.lineInner(h,!0,1,0)}replace(h,d,_){[h,d]=clip(this,h,d);let V=[];return this.decompose(0,h,V,2),_.length&&_.decompose(0,_.length,V,3),this.decompose(d,this.length,V,1),TextNode.from(V,this.length-(d-h)+_.length)}append(h){return this.replace(this.length,this.length,h)}slice(h,d=this.length){[h,d]=clip(this,h,d);let _=[];return this.decompose(h,d,_,0),TextNode.from(_,d-h)}eq(h){if(h==this)return!0;if(h.length!=this.length||h.lines!=this.lines)return!1;let d=this.scanIdentical(h,1),_=this.length-this.scanIdentical(h,-1),V=new RawTextCursor(this),ee=new RawTextCursor(h);for(let h=d,er=d;;){if(V.next(h),ee.next(h),h=0,V.lineBreak!=ee.lineBreak||V.done!=ee.done||V.value!=ee.value)return!1;if(er+=V.value.length,V.done||er>=_)return!0}}iter(h=1){return new RawTextCursor(this,h)}iterRange(h,d=this.length){return new PartialTextCursor(this,h,d)}iterLines(h,d){let _;if(null==h)_=this.iter();else{null==d&&(d=this.lines+1);let V=this.line(h).from;_=this.iterRange(V,Math.max(V,d==this.lines+1?this.length:d<=1?0:this.line(d-1).to))}return new LineCursor(_)}toString(){return this.sliceString(0)}toJSON(){let h=[];return this.flatten(h),h}constructor(){}static of(h){if(0==h.length)throw RangeError("A document must have at least one line");return 1!=h.length||h[0]?h.length<=32?new TextLeaf(h):TextNode.from(TextLeaf.split(h,[])):Text.empty}};let TextLeaf=class TextLeaf extends Text{constructor(h,d=function(h){let d=-1;for(let _ of h)d+=_.length+1;return d}(h)){super(),this.text=h,this.length=d}get lines(){return this.text.length}get children(){return null}lineInner(h,d,_,V){for(let ee=0;;ee++){let er=this.text[ee],eo=V+er.length;if((d?_:eo)>=h)return new Line(V,eo,_,er);V=eo+1,_++}}decompose(h,d,_,V){let ee=h<=0&&d>=this.length?this:new TextLeaf(appendText(this.text,[""],h,d),Math.min(d,this.length)-Math.max(0,h));if(1&V){let h=_.pop(),d=appendText(ee.text,h.text.slice(),0,ee.length);if(d.length<=32)_.push(new TextLeaf(d,h.length+ee.length));else{let h=d.length>>1;_.push(new TextLeaf(d.slice(0,h)),new TextLeaf(d.slice(h)))}}else _.push(ee)}replace(h,d,_){var V;if(!(_ instanceof TextLeaf))return super.replace(h,d,_);[h,d]=clip(this,h,d);let ee=appendText(this.text,appendText(_.text,appendText(this.text,[""],0,h)),d),er=this.length+_.length-(d-h);return ee.length<=32?new TextLeaf(ee,er):TextNode.from(TextLeaf.split(ee,[]),er)}sliceString(h,d=this.length,_="\n"){[h,d]=clip(this,h,d);let V="";for(let ee=0,er=0;ee<=d&&er<this.text.length;er++){let eo=this.text[er],ec=ee+eo.length;ee>h&&er&&(V+=_),h<ec&&d>ee&&(V+=eo.slice(Math.max(0,h-ee),d-ee)),ee=ec+1}return V}flatten(h){for(let d of this.text)h.push(d)}scanIdentical(){return 0}static split(h,d){let _=[],V=-1;for(let ee of h)_.push(ee),V+=ee.length+1,32==_.length&&(d.push(new TextLeaf(_,V)),_=[],V=-1);return V>-1&&d.push(new TextLeaf(_,V)),d}};let TextNode=class TextNode extends Text{constructor(h,d){for(let _ of(super(),this.children=h,this.length=d,this.lines=0,h))this.lines+=_.lines}lineInner(h,d,_,V){for(let ee=0;;ee++){let er=this.children[ee],eo=V+er.length,ec=_+er.lines-1;if((d?ec:eo)>=h)return er.lineInner(h,d,_,V);V=eo+1,_=ec+1}}decompose(h,d,_,V){for(let ee=0,er=0;er<=d&&ee<this.children.length;ee++){let eo=this.children[ee],ec=er+eo.length;if(h<=ec&&d>=er){let ee=V&((er<=h?1:0)|(ec>=d?2:0));er>=h&&ec<=d&&!ee?_.push(eo):eo.decompose(h-er,d-er,_,ee)}er=ec+1}}replace(h,d,_){if([h,d]=clip(this,h,d),_.lines<this.lines)for(let V=0,ee=0;V<this.children.length;V++){let er=this.children[V],eo=ee+er.length;if(h>=ee&&d<=eo){let ec=er.replace(h-ee,d-ee,_),eh=this.lines-er.lines+ec.lines;if(ec.lines<eh>>4&&ec.lines>eh>>6){let ee=this.children.slice();return ee[V]=ec,new TextNode(ee,this.length-(d-h)+_.length)}return super.replace(ee,eo,ec)}ee=eo+1}return super.replace(h,d,_)}sliceString(h,d=this.length,_="\n"){[h,d]=clip(this,h,d);let V="";for(let ee=0,er=0;ee<this.children.length&&er<=d;ee++){let eo=this.children[ee],ec=er+eo.length;er>h&&ee&&(V+=_),h<ec&&d>er&&(V+=eo.sliceString(h-er,d-er,_)),er=ec+1}return V}flatten(h){for(let d of this.children)d.flatten(h)}scanIdentical(h,d){if(!(h instanceof TextNode))return 0;let _=0,[V,ee,er,eo]=d>0?[0,0,this.children.length,h.children.length]:[this.children.length-1,h.children.length-1,-1,-1];for(;;V+=d,ee+=d){if(V==er||ee==eo)return _;let ec=this.children[V],eh=h.children[ee];if(ec!=eh)return _+ec.scanIdentical(eh,d);_+=ec.length+1}}static from(h,d=h.reduce((h,d)=>h+d.length+1,-1)){let _=0;for(let d of h)_+=d.lines;if(_<32){let _=[];for(let d of h)d.flatten(_);return new TextLeaf(_,d)}let V=Math.max(32,_>>5),ee=V<<1,er=V>>1,eo=[],ec=0,eh=-1,ep=[];function flush(){0!=ec&&(eo.push(1==ep.length?ep[0]:TextNode.from(ep,eh)),eh=-1,ec=ep.length=0)}for(let d of h)!function add(h){let d;if(h.lines>ee&&h instanceof TextNode)for(let d of h.children)add(d);else h.lines>er&&(ec>er||!ec)?(flush(),eo.push(h)):h instanceof TextLeaf&&ec&&(d=ep[ep.length-1])instanceof TextLeaf&&h.lines+d.lines<=32?(ec+=h.lines,eh+=h.length+1,ep[ep.length-1]=new TextLeaf(d.text.concat(h.text),d.length+1+h.length)):(ec+h.lines>V&&flush(),ec+=h.lines,eh+=h.length+1,ep.push(h))}(d);return flush(),1==eo.length?eo[0]:new TextNode(eo,d)}};function appendText(h,d,_=0,V=1e9){for(let ee=0,er=0,eo=!0;er<h.length&&ee<=V;er++){let ec=h[er],eh=ee+ec.length;eh>=_&&(eh>V&&(ec=ec.slice(0,V-ee)),ee<_&&(ec=ec.slice(_-ee)),eo?(d[d.length-1]+=ec,eo=!1):d.push(ec)),ee=eh+1}return d}Text.empty=new TextLeaf([""],0);let RawTextCursor=class RawTextCursor{constructor(h,d=1){this.dir=d,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[h],this.offsets=[d>0?1:(h instanceof TextLeaf?h.text.length:h.children.length)<<1]}nextInner(h,d){for(this.done=this.lineBreak=!1;;){let _=this.nodes.length-1,V=this.nodes[_],ee=this.offsets[_],er=ee>>1,eo=V instanceof TextLeaf?V.text.length:V.children.length;if(er==(d>0?eo:0)){if(0==_)return this.done=!0,this.value="",this;d>0&&this.offsets[_-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&ee)==(d>0?0:1)){if(this.offsets[_]+=d,0==h)return this.lineBreak=!0,this.value="\n",this;h--}else if(V instanceof TextLeaf){let ee=V.text[er+(d<0?-1:0)];if(this.offsets[_]+=d,ee.length>Math.max(0,h))return this.value=0==h?ee:d>0?ee.slice(h):ee.slice(0,ee.length-h),this;h-=ee.length}else{let ee=V.children[er+(d<0?-1:0)];h>ee.length?(h-=ee.length,this.offsets[_]+=d):(d<0&&this.offsets[_]--,this.nodes.push(ee),this.offsets.push(d>0?1:(ee instanceof TextLeaf?ee.text.length:ee.children.length)<<1))}}}next(h=0){return h<0&&(this.nextInner(-h,-this.dir),h=this.value.length),this.nextInner(h,this.dir)}};let PartialTextCursor=class PartialTextCursor{constructor(h,d,_){this.value="",this.done=!1,this.cursor=new RawTextCursor(h,d>_?-1:1),this.pos=d>_?h.length:0,this.from=Math.min(d,_),this.to=Math.max(d,_)}nextInner(h,d){if(d<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;h+=Math.max(0,d<0?this.pos-this.to:this.from-this.pos);let _=d<0?this.pos-this.from:this.to-this.pos;h>_&&(h=_),_-=h;let{value:V}=this.cursor.next(h);return this.pos+=(V.length+h)*d,this.value=V.length<=_?V:d<0?V.slice(V.length-_):V.slice(0,_),this.done=!this.value,this}next(h=0){return h<0?h=Math.max(h,this.from-this.pos):h>0&&(h=Math.min(h,this.to-this.pos)),this.nextInner(h,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}};let LineCursor=class LineCursor{constructor(h){this.inner=h,this.afterBreak=!0,this.value="",this.done=!1}next(h=0){let{done:d,lineBreak:_,value:V}=this.inner.next(h);return d&&this.afterBreak?(this.value="",this.afterBreak=!1):d?(this.done=!0,this.value=""):_?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=V,this.afterBreak=!1),this}get lineBreak(){return!1}};"undefined"!=typeof Symbol&&(Text.prototype[Symbol.iterator]=function(){return this.iter()},RawTextCursor.prototype[Symbol.iterator]=PartialTextCursor.prototype[Symbol.iterator]=LineCursor.prototype[Symbol.iterator]=function(){return this});let Line=class Line{constructor(h,d,_,V){this.from=h,this.to=d,this.number=_,this.text=V}get length(){return this.to-this.from}};function clip(h,d,_){return[d=Math.max(0,Math.min(h.length,d)),Math.max(d,Math.min(h.length,_))]}let ng="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(h=>h?parseInt(h,36):1);for(let h=1;h<ng.length;h++)ng[h]+=ng[h-1];function isRegionalIndicator(h){return h>=127462&&h<=127487}function findClusterBreak(h,d,_=!0,V=!0){return(_?nextClusterBreak:function(h,d,_){for(;d>0;){let V=nextClusterBreak(h,d-2,_);if(V<d)return V;d--}return 0})(h,d,V)}function nextClusterBreak(h,d,_){if(d==h.length)return d;d&&surrogateLow(h.charCodeAt(d))&&surrogateHigh(h.charCodeAt(d-1))&&d--;let V=codePointAt(h,d);for(d+=codePointSize(V);d<h.length;){let ee=codePointAt(h,d);if(8205==V||8205==ee||_&&function(h){for(let d=1;d<ng.length;d+=2)if(ng[d]>h)return ng[d-1]<=h;return!1}(ee))d+=codePointSize(ee),V=ee;else if(isRegionalIndicator(ee)){let _=0,V=d-2;for(;V>=0&&isRegionalIndicator(codePointAt(h,V));)_++,V-=2;if(_%2==0)break;d+=2}else break}return d}function surrogateLow(h){return h>=56320&&h<57344}function surrogateHigh(h){return h>=55296&&h<56320}function codePointAt(h,d){let _=h.charCodeAt(d);if(!surrogateHigh(_)||d+1==h.length)return _;let V=h.charCodeAt(d+1);return surrogateLow(V)?(_-55296<<10)+(V-56320)+65536:_}function fromCodePoint(h){return h<=65535?String.fromCharCode(h):String.fromCharCode(((h-=65536)>>10)+55296,(1023&h)+56320)}function codePointSize(h){return h<65536?1:2}let nO=/\r\n?|\n/;var ny=((er=ny||(ny={}))[er.Simple=0]="Simple",er[er.TrackDel=1]="TrackDel",er[er.TrackBefore=2]="TrackBefore",er[er.TrackAfter=3]="TrackAfter",er);let ChangeDesc=class ChangeDesc{constructor(h){this.sections=h}get length(){let h=0;for(let d=0;d<this.sections.length;d+=2)h+=this.sections[d];return h}get newLength(){let h=0;for(let d=0;d<this.sections.length;d+=2){let _=this.sections[d+1];h+=_<0?this.sections[d]:_}return h}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(h){for(let d=0,_=0,V=0;d<this.sections.length;){let ee=this.sections[d++],er=this.sections[d++];er<0?(h(_,V,ee),V+=ee):V+=er,_+=ee}}iterChangedRanges(h,d=!1){iterChanges(this,h,d)}get invertedDesc(){let h=[];for(let d=0;d<this.sections.length;){let _=this.sections[d++],V=this.sections[d++];V<0?h.push(_,V):h.push(V,_)}return new ChangeDesc(h)}composeDesc(h){return this.empty?h:h.empty?this:composeSets(this,h)}mapDesc(h,d=!1){return h.empty?this:mapSet(this,h,d)}mapPos(h,d=-1,_=ny.Simple){let V=0,ee=0;for(let er=0;er<this.sections.length;){let eo=this.sections[er++],ec=this.sections[er++],eh=V+eo;if(ec<0){if(eh>h)return ee+(h-V);ee+=eo}else{if(_!=ny.Simple&&eh>=h&&(_==ny.TrackDel&&V<h&&eh>h||_==ny.TrackBefore&&V<h||_==ny.TrackAfter&&eh>h))return null;if(eh>h||eh==h&&d<0&&!eo)return h==V||d<0?ee:ee+ec;ee+=ec}V=eh}if(h>V)throw RangeError(`Position ${h} is out of range for changeset of length ${V}`);return ee}touchesRange(h,d=h){for(let _=0,V=0;_<this.sections.length&&V<=d;){let ee=this.sections[_++],er=this.sections[_++],eo=V+ee;if(er>=0&&V<=d&&eo>=h)return!(V<h)||!(eo>d)||"cover";V=eo}return!1}toString(){let h="";for(let d=0;d<this.sections.length;){let _=this.sections[d++],V=this.sections[d++];h+=(h?" ":"")+_+(V>=0?":"+V:"")}return h}toJSON(){return this.sections}static fromJSON(h){if(!Array.isArray(h)||h.length%2||h.some(h=>"number"!=typeof h))throw RangeError("Invalid JSON representation of ChangeDesc");return new ChangeDesc(h)}static create(h){return new ChangeDesc(h)}};let ChangeSet=class ChangeSet extends ChangeDesc{constructor(h,d){super(h),this.inserted=d}apply(h){if(this.length!=h.length)throw RangeError("Applying change set to a document with the wrong length");return iterChanges(this,(d,_,V,ee,er)=>h=h.replace(V,V+(_-d),er),!1),h}mapDesc(h,d=!1){return mapSet(this,h,d,!0)}invert(h){let d=this.sections.slice(),_=[];for(let V=0,ee=0;V<d.length;V+=2){let er=d[V],eo=d[V+1];if(eo>=0){d[V]=eo,d[V+1]=er;let ec=V>>1;for(;_.length<ec;)_.push(Text.empty);_.push(er?h.slice(ee,ee+er):Text.empty)}ee+=er}return new ChangeSet(d,_)}compose(h){return this.empty?h:h.empty?this:composeSets(this,h,!0)}map(h,d=!1){return h.empty?this:mapSet(this,h,d,!0)}iterChanges(h,d=!1){iterChanges(this,h,d)}get desc(){return ChangeDesc.create(this.sections)}filter(h){let d=[],_=[],V=[],ee=new SectionIter(this);r:for(let er=0,eo=0;;){let ec=er==h.length?1e9:h[er++];for(;eo<ec||eo==ec&&0==ee.len;){if(ee.done)break r;let h=Math.min(ee.len,ec-eo);addSection(V,h,-1);let er=-1==ee.ins?-1:0==ee.off?ee.ins:0;addSection(d,h,er),er>0&&addInsert(_,d,ee.text),ee.forward(h),eo+=h}let eh=h[er++];for(;eo<eh;){if(ee.done)break r;let h=Math.min(ee.len,eh-eo);addSection(d,h,-1),addSection(V,h,-1==ee.ins?-1:0==ee.off?ee.ins:0),ee.forward(h),eo+=h}}return{changes:new ChangeSet(d,_),filtered:ChangeDesc.create(V)}}toJSON(){let h=[];for(let d=0;d<this.sections.length;d+=2){let _=this.sections[d],V=this.sections[d+1];V<0?h.push(_):0==V?h.push([_]):h.push([_].concat(this.inserted[d>>1].toJSON()))}return h}static of(h,d,_){let V=[],ee=[],er=0,eo=null;function flush(h=!1){if(!h&&!V.length)return;er<d&&addSection(V,d-er,-1);let _=new ChangeSet(V,ee);eo=eo?eo.compose(_.map(eo)):_,V=[],ee=[],er=0}return!function process(h){if(Array.isArray(h))for(let d of h)process(d);else if(h instanceof ChangeSet){if(h.length!=d)throw RangeError(`Mismatched change set length (got ${h.length}, expected ${d})`);flush(),eo=eo?eo.compose(h.map(eo)):h}else{let{from:eo,to:ec=eo,insert:eh}=h;if(eo>ec||eo<0||ec>d)throw RangeError(`Invalid change range ${eo} to ${ec} (in doc of length ${d})`);let ep=eh?"string"==typeof eh?Text.of(eh.split(_||nO)):eh:Text.empty,ef=ep.length;if(eo==ec&&0==ef)return;eo<er&&flush(),eo>er&&addSection(V,eo-er,-1),addSection(V,ec-eo,ef),addInsert(ee,V,ep),er=ec}}(h),flush(!eo),eo}static empty(h){return new ChangeSet(h?[h,-1]:[],[])}static fromJSON(h){if(!Array.isArray(h))throw RangeError("Invalid JSON representation of ChangeSet");let d=[],_=[];for(let V=0;V<h.length;V++){let ee=h[V];if("number"==typeof ee)d.push(ee,-1);else if(!Array.isArray(ee)||"number"!=typeof ee[0]||ee.some((h,d)=>d&&"string"!=typeof h))throw RangeError("Invalid JSON representation of ChangeSet");else if(1==ee.length)d.push(ee[0],0);else{for(;_.length<V;)_.push(Text.empty);_[V]=Text.of(ee.slice(1)),d.push(ee[0],_[V].length)}}return new ChangeSet(d,_)}static createSet(h,d){return new ChangeSet(h,d)}};function addSection(h,d,_,V=!1){if(0==d&&_<=0)return;let ee=h.length-2;ee>=0&&_<=0&&_==h[ee+1]?h[ee]+=d:0==d&&0==h[ee]?h[ee+1]+=_:V?(h[ee]+=d,h[ee+1]+=_):h.push(d,_)}function addInsert(h,d,_){if(0==_.length)return;let V=d.length-2>>1;if(V<h.length)h[h.length-1]=h[h.length-1].append(_);else{for(;h.length<V;)h.push(Text.empty);h.push(_)}}function iterChanges(h,d,_){let V=h.inserted;for(let ee=0,er=0,eo=0;eo<h.sections.length;){let ec=h.sections[eo++],eh=h.sections[eo++];if(eh<0)ee+=ec,er+=ec;else{let ep=ee,ef=er,em=Text.empty;for(;ep+=ec,ef+=eh,eh&&V&&(em=em.append(V[eo-2>>1])),!_&&eo!=h.sections.length&&!(h.sections[eo+1]<0);)ec=h.sections[eo++],eh=h.sections[eo++];d(ee,ep,er,ef,em),ee=ep,er=ef}}}function mapSet(h,d,_,V=!1){let ee=[],er=V?[]:null,eo=new SectionIter(h),ec=new SectionIter(d);for(let h=-1;;)if(-1==eo.ins&&-1==ec.ins){let h=Math.min(eo.len,ec.len);addSection(ee,h,-1),eo.forward(h),ec.forward(h)}else if(ec.ins>=0&&(eo.ins<0||h==eo.i||0==eo.off&&(ec.len<eo.len||ec.len==eo.len&&!_))){let d=ec.len;for(addSection(ee,ec.ins,-1);d;){let _=Math.min(eo.len,d);eo.ins>=0&&h<eo.i&&eo.len<=_&&(addSection(ee,0,eo.ins),er&&addInsert(er,ee,eo.text),h=eo.i),eo.forward(_),d-=_}ec.next()}else if(eo.ins>=0){let d=0,_=eo.len;for(;_;)if(-1==ec.ins){let h=Math.min(_,ec.len);d+=h,_-=h,ec.forward(h)}else if(0==ec.ins&&ec.len<_)_-=ec.len,ec.next();else break;addSection(ee,d,h<eo.i?eo.ins:0),er&&h<eo.i&&addInsert(er,ee,eo.text),h=eo.i,eo.forward(eo.len-_)}else if(eo.done&&ec.done)return er?ChangeSet.createSet(ee,er):ChangeDesc.create(ee);else throw Error("Mismatched change set lengths")}function composeSets(h,d,_=!1){let V=[],ee=_?[]:null,er=new SectionIter(h),eo=new SectionIter(d);for(let h=!1;;){if(er.done&&eo.done)return ee?ChangeSet.createSet(V,ee):ChangeDesc.create(V);if(0==er.ins)addSection(V,er.len,0,h),er.next();else if(0!=eo.len||eo.done){if(er.done||eo.done)throw Error("Mismatched change set lengths");{let d=Math.min(er.len2,eo.len),_=V.length;if(-1==er.ins){let _=-1==eo.ins?-1:eo.off?0:eo.ins;addSection(V,d,_,h),ee&&_&&addInsert(ee,V,eo.text)}else -1==eo.ins?(addSection(V,er.off?0:er.len,d,h),ee&&addInsert(ee,V,er.textBit(d))):(addSection(V,er.off?0:er.len,eo.off?0:eo.ins,h),ee&&!eo.off&&addInsert(ee,V,eo.text));h=(er.ins>d||eo.ins>=0&&eo.len>d)&&(h||V.length>_),er.forward2(d),eo.forward(d)}}else addSection(V,0,eo.ins,h),ee&&addInsert(ee,V,eo.text),eo.next()}}let SectionIter=class SectionIter{constructor(h){this.set=h,this.i=0,this.next()}next(){let{sections:h}=this.set;this.i<h.length?(this.len=h[this.i++],this.ins=h[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return -2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:h}=this.set,d=this.i-2>>1;return d>=h.length?Text.empty:h[d]}textBit(h){let{inserted:d}=this.set,_=this.i-2>>1;return _>=d.length&&!h?Text.empty:d[_].slice(this.off,null==h?void 0:this.off+h)}forward(h){h==this.len?this.next():(this.len-=h,this.off+=h)}forward2(h){-1==this.ins?this.forward(h):h==this.ins?this.next():(this.ins-=h,this.off+=h)}};let SelectionRange=class SelectionRange{constructor(h,d,_){this.from=h,this.to=d,this.flags=_}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let h=7&this.flags;return 7==h?null:h}get goalColumn(){let h=this.flags>>6;return 16777215==h?void 0:h}map(h,d=-1){let _,V;return this.empty?_=V=h.mapPos(this.from,d):(_=h.mapPos(this.from,1),V=h.mapPos(this.to,-1)),_==this.from&&V==this.to?this:new SelectionRange(_,V,this.flags)}extend(h,d=h){if(h<=this.anchor&&d>=this.anchor)return dist_EditorSelection.range(h,d);let _=Math.abs(h-this.anchor)>Math.abs(d-this.anchor)?h:d;return dist_EditorSelection.range(this.anchor,_)}eq(h,d=!1){return this.anchor==h.anchor&&this.head==h.head&&(!d||!this.empty||this.assoc==h.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(h){if(!h||"number"!=typeof h.anchor||"number"!=typeof h.head)throw RangeError("Invalid JSON representation for SelectionRange");return dist_EditorSelection.range(h.anchor,h.head)}static create(h,d,_){return new SelectionRange(h,d,_)}};let dist_EditorSelection=class dist_EditorSelection{constructor(h,d){this.ranges=h,this.mainIndex=d}map(h,d=-1){return h.empty?this:dist_EditorSelection.create(this.ranges.map(_=>_.map(h,d)),this.mainIndex)}eq(h,d=!1){if(this.ranges.length!=h.ranges.length||this.mainIndex!=h.mainIndex)return!1;for(let _=0;_<this.ranges.length;_++)if(!this.ranges[_].eq(h.ranges[_],d))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new dist_EditorSelection([this.main],0)}addRange(h,d=!0){return dist_EditorSelection.create([h].concat(this.ranges),d?0:this.mainIndex+1)}replaceRange(h,d=this.mainIndex){let _=this.ranges.slice();return _[d]=h,dist_EditorSelection.create(_,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(h=>h.toJSON()),main:this.mainIndex}}static fromJSON(h){if(!h||!Array.isArray(h.ranges)||"number"!=typeof h.main||h.main>=h.ranges.length)throw RangeError("Invalid JSON representation for EditorSelection");return new dist_EditorSelection(h.ranges.map(h=>SelectionRange.fromJSON(h)),h.main)}static single(h,d=h){return new dist_EditorSelection([dist_EditorSelection.range(h,d)],0)}static create(h,d=0){if(0==h.length)throw RangeError("A selection needs at least one range");for(let _=0,V=0;V<h.length;V++){let ee=h[V];if(ee.empty?ee.from<=_:ee.from<_)return dist_EditorSelection.normalized(h.slice(),d);_=ee.to}return new dist_EditorSelection(h,d)}static cursor(h,d=0,_,V){return SelectionRange.create(h,h,(0==d?0:d<0?8:16)|(null==_?7:Math.min(6,_))|(null!=V?V:16777215)<<6)}static range(h,d,_,V){let ee=(null!=_?_:16777215)<<6|(null==V?7:Math.min(6,V));return d<h?SelectionRange.create(d,h,48|ee):SelectionRange.create(h,d,(d>h?8:0)|ee)}static normalized(h,d=0){let _=h[d];h.sort((h,d)=>h.from-d.from),d=h.indexOf(_);for(let _=1;_<h.length;_++){let V=h[_],ee=h[_-1];if(V.empty?V.from<=ee.to:V.from<ee.to){let er=ee.from,eo=Math.max(V.to,ee.to);_<=d&&d--,h.splice(--_,2,V.anchor>V.head?dist_EditorSelection.range(eo,er):dist_EditorSelection.range(er,eo))}}return new dist_EditorSelection(h,d)}};function checkSelection(h,d){for(let _ of h.ranges)if(_.to>d)throw RangeError("Selection points outside of document")}let nv=0;let Facet=class Facet{constructor(h,d,_,V,ee){this.combine=h,this.compareInput=d,this.compare=_,this.isStatic=V,this.id=nv++,this.default=h([]),this.extensions="function"==typeof ee?ee(this):ee}get reader(){return this}static define(h={}){return new Facet(h.combine||(h=>h),h.compareInput||((h,d)=>h===d),h.compare||(h.combine?(h,d)=>h===d:sameArray),!!h.static,h.enables)}of(h){return new FacetProvider([],this,0,h)}compute(h,d){if(this.isStatic)throw Error("Can't compute a static facet");return new FacetProvider(h,this,1,d)}computeN(h,d){if(this.isStatic)throw Error("Can't compute a static facet");return new FacetProvider(h,this,2,d)}from(h,d){return d||(d=h=>h),this.compute([h],_=>d(_.field(h)))}};function sameArray(h,d){return h==d||h.length==d.length&&h.every((h,_)=>h===d[_])}let FacetProvider=class FacetProvider{constructor(h,d,_,V){this.dependencies=h,this.facet=d,this.type=_,this.value=V,this.id=nv++}dynamicSlot(h){var d;let _=this.value,V=this.facet.compareInput,ee=this.id,er=h[ee]>>1,eo=2==this.type,ec=!1,eh=!1,ep=[];for(let _ of this.dependencies)"doc"==_?ec=!0:"selection"==_?eh=!0:((null!==(d=h[_.id])&&void 0!==d?d:1)&1)==0&&ep.push(h[_.id]);return{create:h=>(h.values[er]=_(h),1),update(h,d){if(ec&&d.docChanged||eh&&(d.docChanged||d.selection)||ensureAll(h,ep)){let d=_(h);if(eo?!compareArray(d,h.values[er],V):!V(d,h.values[er]))return h.values[er]=d,1}return 0},reconfigure:(h,d)=>{let ec,eh=d.config.address[ee];if(null!=eh){let ee=getAddr(d,eh);if(this.dependencies.every(_=>_ instanceof Facet?d.facet(_)===h.facet(_):!(_ instanceof dist_StateField)||d.field(_,!1)==h.field(_,!1))||(eo?compareArray(ec=_(h),ee,V):V(ec=_(h),ee)))return h.values[er]=ee,0}else ec=_(h);return h.values[er]=ec,1}}}};function compareArray(h,d,_){if(h.length!=d.length)return!1;for(let V=0;V<h.length;V++)if(!_(h[V],d[V]))return!1;return!0}function ensureAll(h,d){let _=!1;for(let V of d)1&ensureAddr(h,V)&&(_=!0);return _}let nb=Facet.define({static:!0});let dist_StateField=class dist_StateField{constructor(h,d,_,V,ee){this.id=h,this.createF=d,this.updateF=_,this.compareF=V,this.spec=ee,this.provides=void 0}static define(h){let d=new dist_StateField(nv++,h.create,h.update,h.compare||((h,d)=>h===d),h);return h.provide&&(d.provides=h.provide(d)),d}create(h){let d=h.facet(nb).find(h=>h.field==this);return((null==d?void 0:d.create)||this.createF)(h)}slot(h){let d=h[this.id]>>1;return{create:h=>(h.values[d]=this.create(h),1),update:(h,_)=>{let V=h.values[d],ee=this.updateF(V,_);return this.compareF(V,ee)?0:(h.values[d]=ee,1)},reconfigure:(h,_)=>null!=_.config.address[this.id]?(h.values[d]=_.field(this),0):(h.values[d]=this.create(h),1)}}init(h){return[this,nb.of({field:this,create:h})]}get extension(){return this}};let nS={lowest:4,low:3,default:2,high:1,highest:0};function prec(h){return d=>new PrecExtension(d,h)}let n_={highest:prec(nS.highest),high:prec(nS.high),default:prec(nS.default),low:prec(nS.low),lowest:prec(nS.lowest)};let PrecExtension=class PrecExtension{constructor(h,d){this.inner=h,this.prec=d}};let Compartment=class Compartment{of(h){return new CompartmentInstance(this,h)}reconfigure(h){return Compartment.reconfigure.of({compartment:this,extension:h})}get(h){return h.config.compartments.get(this)}};let CompartmentInstance=class CompartmentInstance{constructor(h,d){this.compartment=h,this.inner=d}};let Configuration=class Configuration{constructor(h,d,_,V,ee,er){for(this.base=h,this.compartments=d,this.dynamicSlots=_,this.address=V,this.staticValues=ee,this.facets=er,this.statusTemplate=[];this.statusTemplate.length<_.length;)this.statusTemplate.push(0)}staticFacet(h){let d=this.address[h.id];return null==d?h.default:this.staticValues[d>>1]}static resolve(h,d,_){let V,ee,er=[],eo=Object.create(null),ec=new Map;for(let _ of(V=[[],[],[],[],[]],ee=new Map,!function inner(h,_){let er=ee.get(h);if(null!=er){if(er<=_)return;let d=V[er].indexOf(h);d>-1&&V[er].splice(d,1),h instanceof CompartmentInstance&&ec.delete(h.compartment)}if(ee.set(h,_),Array.isArray(h))for(let d of h)inner(d,_);else if(h instanceof CompartmentInstance){if(ec.has(h.compartment))throw RangeError("Duplicate use of compartment in extensions");let V=d.get(h.compartment)||h.inner;ec.set(h.compartment,V),inner(V,_)}else if(h instanceof PrecExtension)inner(h.inner,h.prec);else if(h instanceof dist_StateField)V[_].push(h),h.provides&&inner(h.provides,_);else if(h instanceof FacetProvider)V[_].push(h),h.facet.extensions&&inner(h.facet.extensions,nS.default);else{let d=h.extension;if(!d)throw Error(`Unrecognized extension value in extension set (${h}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);inner(d,_)}}(h,nS.default),V.reduce((h,d)=>h.concat(d))))_ instanceof dist_StateField?er.push(_):(eo[_.facet.id]||(eo[_.facet.id]=[])).push(_);let eh=Object.create(null),ep=[],ef=[];for(let h of er)eh[h.id]=ef.length<<1,ef.push(d=>h.slot(d));let em=null==_?void 0:_.config.facets;for(let h in eo){let d=eo[h],V=d[0].facet,ee=em&&em[h]||[];if(d.every(h=>0==h.type)){if(eh[V.id]=ep.length<<1|1,sameArray(ee,d))ep.push(_.facet(V));else{let h=V.combine(d.map(h=>h.value));ep.push(_&&V.compare(h,_.facet(V))?_.facet(V):h)}}else{for(let h of d)0==h.type?(eh[h.id]=ep.length<<1|1,ep.push(h.value)):(eh[h.id]=ef.length<<1,ef.push(d=>h.dynamicSlot(d)));eh[V.id]=ef.length<<1,ef.push(h=>(function(h,d,_){let V=_.map(d=>h[d.id]),ee=_.map(h=>h.type),er=V.filter(h=>!(1&h)),eo=h[d.id]>>1;function get(h){let _=[];for(let d=0;d<V.length;d++){let er=getAddr(h,V[d]);if(2==ee[d])for(let h of er)_.push(h);else _.push(er)}return d.combine(_)}return{create(h){for(let d of V)ensureAddr(h,d);return h.values[eo]=get(h),1},update(h,_){if(!ensureAll(h,er))return 0;let V=get(h);return d.compare(V,h.values[eo])?0:(h.values[eo]=V,1)},reconfigure(h,ee){let er=ensureAll(h,V),ec=ee.config.facets[d.id],eh=ee.facet(d);if(ec&&!er&&sameArray(_,ec))return h.values[eo]=eh,0;let ep=get(h);return d.compare(ep,eh)?(h.values[eo]=eh,0):(h.values[eo]=ep,1)}}})(h,V,d))}}let eg=ef.map(h=>h(eh));return new Configuration(h,ec,eg,eh,ep,eo)}};function ensureAddr(h,d){if(1&d)return 2;let _=d>>1,V=h.status[_];if(4==V)throw Error("Cyclic dependency between fields and/or facets");if(2&V)return V;h.status[_]=4;let ee=h.computeSlot(h,h.config.dynamicSlots[_]);return h.status[_]=2|ee}function getAddr(h,d){return 1&d?h.config.staticValues[d>>1]:h.values[d>>1]}let nw=Facet.define(),nx=Facet.define({combine:h=>h.some(h=>h),static:!0}),nk=Facet.define({combine:h=>h.length?h[0]:void 0,static:!0}),nT=Facet.define(),nE=Facet.define(),nC=Facet.define(),nP=Facet.define({combine:h=>!!h.length&&h[0]});let Annotation=class Annotation{constructor(h,d){this.type=h,this.value=d}static define(){return new AnnotationType}};let AnnotationType=class AnnotationType{of(h){return new Annotation(this,h)}};let StateEffectType=class StateEffectType{constructor(h){this.map=h}of(h){return new dist_StateEffect(this,h)}};let dist_StateEffect=class dist_StateEffect{constructor(h,d){this.type=h,this.value=d}map(h){let d=this.type.map(this.value,h);return void 0===d?void 0:d==this.value?this:new dist_StateEffect(this.type,d)}is(h){return this.type==h}static define(h={}){return new StateEffectType(h.map||(h=>h))}static mapEffects(h,d){if(!h.length)return h;let _=[];for(let V of h){let h=V.map(d);h&&_.push(h)}return _}};dist_StateEffect.reconfigure=dist_StateEffect.define(),dist_StateEffect.appendConfig=dist_StateEffect.define();let Transaction=class Transaction{constructor(h,d,_,V,ee,er){this.startState=h,this.changes=d,this.selection=_,this.effects=V,this.annotations=ee,this.scrollIntoView=er,this._doc=null,this._state=null,_&&checkSelection(_,d.newLength),ee.some(h=>h.type==Transaction.time)||(this.annotations=ee.concat(Transaction.time.of(Date.now())))}static create(h,d,_,V,ee,er){return new Transaction(h,d,_,V,ee,er)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(h){for(let d of this.annotations)if(d.type==h)return d.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(h){let d=this.annotation(Transaction.userEvent);return!!(d&&(d==h||d.length>h.length&&d.slice(0,h.length)==h&&"."==d[h.length]))}};function mergeTransaction(h,d,_){var V;let ee,er,eo;return _?(ee=d.changes,er=ChangeSet.empty(d.changes.length),eo=h.changes.compose(d.changes)):(ee=d.changes.map(h.changes),er=h.changes.mapDesc(d.changes,!0),eo=h.changes.compose(ee)),{changes:eo,selection:d.selection?d.selection.map(er):null===(V=h.selection)||void 0===V?void 0:V.map(ee),effects:dist_StateEffect.mapEffects(h.effects,ee).concat(dist_StateEffect.mapEffects(d.effects,er)),annotations:h.annotations.length?h.annotations.concat(d.annotations):d.annotations,scrollIntoView:h.scrollIntoView||d.scrollIntoView}}function resolveTransactionInner(h,d,_){let V=d.selection,ee=asArray(d.annotations);return d.userEvent&&(ee=ee.concat(Transaction.userEvent.of(d.userEvent))),{changes:d.changes instanceof ChangeSet?d.changes:ChangeSet.of(d.changes||[],_,h.facet(nk)),selection:V&&(V instanceof dist_EditorSelection?V:dist_EditorSelection.single(V.anchor,V.head)),effects:asArray(d.effects),annotations:ee,scrollIntoView:!!d.scrollIntoView}}Transaction.time=Annotation.define(),Transaction.userEvent=Annotation.define(),Transaction.addToHistory=Annotation.define(),Transaction.remote=Annotation.define();let nI=[];function asArray(h){return null==h?nI:Array.isArray(h)?h:[h]}var nR=((eo=nR||(nR={}))[eo.Word=0]="Word",eo[eo.Space=1]="Space",eo[eo.Other=2]="Other",eo);let nA=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;try{V=RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(h){}let dist_EditorState=class dist_EditorState{constructor(h,d,_,V,ee,er){this.config=h,this.doc=d,this.selection=_,this.values=V,this.status=h.statusTemplate.slice(),this.computeSlot=ee,er&&(er._state=this);for(let h=0;h<this.config.dynamicSlots.length;h++)ensureAddr(this,h<<1);this.computeSlot=null}field(h,d=!0){let _=this.config.address[h.id];if(null==_){if(d)throw RangeError("Field is not present in this state");return}return ensureAddr(this,_),getAddr(this,_)}update(...h){return function resolveTransaction(h,d,_){let V=resolveTransactionInner(h,d.length?d[0]:{},h.doc.length);d.length&&!1===d[0].filter&&(_=!1);for(let ee=1;ee<d.length;ee++){!1===d[ee].filter&&(_=!1);let er=!!d[ee].sequential;V=mergeTransaction(V,resolveTransactionInner(h,d[ee],er?V.changes.newLength:h.doc.length),er)}let ee=Transaction.create(h,V.changes,V.selection,V.effects,V.annotations,V.scrollIntoView);return function(h){let d=h.startState,_=d.facet(nC),V=h;for(let ee=_.length-1;ee>=0;ee--){let er=_[ee](h);er&&Object.keys(er).length&&(V=mergeTransaction(V,resolveTransactionInner(d,er,h.changes.newLength),!0))}return V==h?h:Transaction.create(d,h.changes,h.selection,V.effects,V.annotations,V.scrollIntoView)}(_?function(h){let d=h.startState,_=!0;for(let V of d.facet(nT)){let d=V(h);if(!1===d){_=!1;break}Array.isArray(d)&&(_=!0===_?d:function(h,d){let _=[];for(let V=0,ee=0;;){let er,eo;if(V<h.length&&(ee==d.length||d[ee]>=h[V]))er=h[V++],eo=h[V++];else{if(!(ee<d.length))return _;er=d[ee++],eo=d[ee++]}!_.length||_[_.length-1]<er?_.push(er,eo):_[_.length-1]<eo&&(_[_.length-1]=eo)}}(_,d))}if(!0!==_){let V,ee;if(!1===_)ee=h.changes.invertedDesc,V=ChangeSet.empty(d.doc.length);else{let d=h.changes.filter(_);V=d.changes,ee=d.filtered.mapDesc(d.changes).invertedDesc}h=Transaction.create(d,V,h.selection&&h.selection.map(ee),dist_StateEffect.mapEffects(h.effects,ee),h.annotations,h.scrollIntoView)}let V=d.facet(nE);for(let _=V.length-1;_>=0;_--){let ee=V[_](h);h=ee instanceof Transaction?ee:Array.isArray(ee)&&1==ee.length&&ee[0]instanceof Transaction?ee[0]:resolveTransaction(d,asArray(ee),!1)}return h}(ee):ee)}(this,h,!0)}applyTransaction(h){let d,_=this.config,{base:V,compartments:ee}=_;for(let d of h.effects)d.is(Compartment.reconfigure)?(_&&(ee=new Map,_.compartments.forEach((h,d)=>ee.set(d,h)),_=null),ee.set(d.value.compartment,d.value.extension)):d.is(dist_StateEffect.reconfigure)?(_=null,V=d.value):d.is(dist_StateEffect.appendConfig)&&(_=null,V=asArray(V).concat(d.value));_?d=h.startState.values.slice():(_=Configuration.resolve(V,ee,this),d=new dist_EditorState(_,this.doc,this.selection,_.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let er=h.startState.facet(nx)?h.newSelection:h.newSelection.asSingle();new dist_EditorState(_,h.newDoc,er,d,(d,_)=>_.update(d,h),h)}replaceSelection(h){return"string"==typeof h&&(h=this.toText(h)),this.changeByRange(d=>({changes:{from:d.from,to:d.to,insert:h},range:dist_EditorSelection.cursor(d.from+h.length)}))}changeByRange(h){let d=this.selection,_=h(d.ranges[0]),V=this.changes(_.changes),ee=[_.range],er=asArray(_.effects);for(let _=1;_<d.ranges.length;_++){let eo=h(d.ranges[_]),ec=this.changes(eo.changes),eh=ec.map(V);for(let h=0;h<_;h++)ee[h]=ee[h].map(eh);let ep=V.mapDesc(ec,!0);ee.push(eo.range.map(ep)),V=V.compose(eh),er=dist_StateEffect.mapEffects(er,eh).concat(dist_StateEffect.mapEffects(asArray(eo.effects),ep))}return{changes:V,selection:dist_EditorSelection.create(ee,d.mainIndex),effects:er}}changes(h=[]){return h instanceof ChangeSet?h:ChangeSet.of(h,this.doc.length,this.facet(dist_EditorState.lineSeparator))}toText(h){return Text.of(h.split(this.facet(dist_EditorState.lineSeparator)||nO))}sliceDoc(h=0,d=this.doc.length){return this.doc.sliceString(h,d,this.lineBreak)}facet(h){let d=this.config.address[h.id];return null==d?h.default:(ensureAddr(this,d),getAddr(this,d))}toJSON(h){let d={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(h)for(let _ in h){let V=h[_];V instanceof dist_StateField&&null!=this.config.address[V.id]&&(d[_]=V.spec.toJSON(this.field(h[_]),this))}return d}static fromJSON(h,d={},_){if(!h||"string"!=typeof h.doc)throw RangeError("Invalid JSON representation for EditorState");let V=[];if(_){for(let d in _)if(Object.prototype.hasOwnProperty.call(h,d)){let ee=_[d],er=h[d];V.push(ee.init(h=>ee.spec.fromJSON(er,h)))}}return dist_EditorState.create({doc:h.doc,selection:dist_EditorSelection.fromJSON(h.selection),extensions:d.extensions?V.concat([d.extensions]):V})}static create(h={}){let d=Configuration.resolve(h.extensions||[],new Map),_=h.doc instanceof Text?h.doc:Text.of((h.doc||"").split(d.staticFacet(dist_EditorState.lineSeparator)||nO)),V=h.selection?h.selection instanceof dist_EditorSelection?h.selection:dist_EditorSelection.single(h.selection.anchor,h.selection.head):dist_EditorSelection.single(0);return checkSelection(V,_.length),d.staticFacet(nx)||(V=V.asSingle()),new dist_EditorState(d,_,V,d.dynamicSlots.map(()=>null),(h,d)=>d.create(h),null)}get tabSize(){return this.facet(dist_EditorState.tabSize)}get lineBreak(){return this.facet(dist_EditorState.lineSeparator)||"\n"}get readOnly(){return this.facet(nP)}phrase(h,...d){for(let d of this.facet(dist_EditorState.phrases))if(Object.prototype.hasOwnProperty.call(d,h)){h=d[h];break}return d.length&&(h=h.replace(/\$(\$|\d*)/g,(h,_)=>{if("$"==_)return"$";let V=+(_||1);return!V||V>d.length?h:d[V-1]})),h}languageDataAt(h,d,_=-1){let V=[];for(let ee of this.facet(nw))for(let er of ee(this,d,_))Object.prototype.hasOwnProperty.call(er,h)&&V.push(er[h]);return V}charCategorizer(h){var d;return d=this.languageDataAt("wordChars",h).join(""),h=>{if(!/\S/.test(h))return nR.Space;if(function(h){if(V)return V.test(h);for(let d=0;d<h.length;d++){let _=h[d];if(/\w/.test(_)||_>"\x80"&&(_.toUpperCase()!=_.toLowerCase()||nA.test(_)))return!0}return!1}(h))return nR.Word;for(let _=0;_<d.length;_++)if(h.indexOf(d[_])>-1)return nR.Word;return nR.Other}}wordAt(h){let{text:d,from:_,length:V}=this.doc.lineAt(h),ee=this.charCategorizer(h),er=h-_,eo=h-_;for(;er>0;){let h=findClusterBreak(d,er,!1);if(ee(d.slice(h,er))!=nR.Word)break;er=h}for(;eo<V;){let h=findClusterBreak(d,eo);if(ee(d.slice(eo,h))!=nR.Word)break;eo=h}return er==eo?null:dist_EditorSelection.range(er+_,eo+_)}};function combineConfig(h,d,_={}){let V={};for(let d of h)for(let h of Object.keys(d)){let ee=d[h],er=V[h];if(void 0===er)V[h]=ee;else if(er===ee||void 0===ee);else if(Object.hasOwnProperty.call(_,h))V[h]=_[h](er,ee);else throw Error("Config merge conflict for field "+h)}for(let h in d)void 0===V[h]&&(V[h]=d[h]);return V}dist_EditorState.allowMultipleSelections=nx,dist_EditorState.tabSize=Facet.define({combine:h=>h.length?h[0]:4}),dist_EditorState.lineSeparator=nk,dist_EditorState.readOnly=nP,dist_EditorState.phrases=Facet.define({compare(h,d){let _=Object.keys(h),V=Object.keys(d);return _.length==V.length&&_.every(_=>h[_]==d[_])}}),dist_EditorState.languageData=nw,dist_EditorState.changeFilter=nT,dist_EditorState.transactionFilter=nE,dist_EditorState.transactionExtender=nC,Compartment.reconfigure=dist_StateEffect.define();let RangeValue=class RangeValue{eq(h){return this==h}range(h,d=h){return Range.create(h,d,this)}};RangeValue.prototype.startSide=RangeValue.prototype.endSide=0,RangeValue.prototype.point=!1,RangeValue.prototype.mapMode=ny.TrackDel;let Range=class Range{constructor(h,d,_){this.from=h,this.to=d,this.value=_}static create(h,d,_){return new Range(h,d,_)}};function cmpRange(h,d){return h.from-d.from||h.value.startSide-d.value.startSide}let Chunk=class Chunk{constructor(h,d,_,V){this.from=h,this.to=d,this.value=_,this.maxPoint=V}get length(){return this.to[this.to.length-1]}findIndex(h,d,_,V=0){let ee=_?this.to:this.from;for(let er=V,eo=ee.length;;){if(er==eo)return er;let V=er+eo>>1,ec=ee[V]-h||(_?this.value[V].endSide:this.value[V].startSide)-d;if(V==er)return ec>=0?er:eo;ec>=0?eo=V:er=V+1}}between(h,d,_,V){for(let ee=this.findIndex(d,-1e9,!0),er=this.findIndex(_,1e9,!1,ee);ee<er;ee++)if(!1===V(this.from[ee]+h,this.to[ee]+h,this.value[ee]))return!1}map(h,d){let _=[],V=[],ee=[],er=-1,eo=-1;for(let ec=0;ec<this.value.length;ec++){let eh=this.value[ec],ep=this.from[ec]+h,ef=this.to[ec]+h,em,eg;if(ep==ef){let h=d.mapPos(ep,eh.startSide,eh.mapMode);if(null==h||(em=eg=h,eh.startSide!=eh.endSide&&(eg=d.mapPos(ep,eh.endSide))<em))continue}else if((em=d.mapPos(ep,eh.startSide))>(eg=d.mapPos(ef,eh.endSide))||em==eg&&eh.startSide>0&&eh.endSide<=0)continue;0>(eg-em||eh.endSide-eh.startSide)||(er<0&&(er=em),eh.point&&(eo=Math.max(eo,eg-em)),_.push(eh),V.push(em-er),ee.push(eg-er))}return{mapped:_.length?new Chunk(V,ee,_,eo):null,pos:er}}};let dist_RangeSet=class dist_RangeSet{constructor(h,d,_,V){this.chunkPos=h,this.chunk=d,this.nextLayer=_,this.maxPoint=V}static create(h,d,_,V){return new dist_RangeSet(h,d,_,V)}get length(){let h=this.chunk.length-1;return h<0?0:Math.max(this.chunkEnd(h),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let h=this.nextLayer.size;for(let d of this.chunk)h+=d.value.length;return h}chunkEnd(h){return this.chunkPos[h]+this.chunk[h].length}update(h){let{add:d=[],sort:_=!1,filterFrom:V=0,filterTo:ee=this.length}=h,er=h.filter;if(0==d.length&&!er)return this;if(_&&(d=d.slice().sort(cmpRange)),this.isEmpty)return d.length?dist_RangeSet.of(d):this;let eo=new LayerCursor(this,null,-1).goto(0),ec=0,eh=[],ep=new dist_RangeSetBuilder;for(;eo.value||ec<d.length;)if(ec<d.length&&(eo.from-d[ec].from||eo.startSide-d[ec].value.startSide)>=0){let h=d[ec++];ep.addInner(h.from,h.to,h.value)||eh.push(h)}else 1==eo.rangeIndex&&eo.chunkIndex<this.chunk.length&&(ec==d.length||this.chunkEnd(eo.chunkIndex)<d[ec].from)&&(!er||V>this.chunkEnd(eo.chunkIndex)||ee<this.chunkPos[eo.chunkIndex])&&ep.addChunk(this.chunkPos[eo.chunkIndex],this.chunk[eo.chunkIndex])?eo.nextChunk():((!er||V>eo.to||ee<eo.from||er(eo.from,eo.to,eo.value))&&!ep.addInner(eo.from,eo.to,eo.value)&&eh.push(Range.create(eo.from,eo.to,eo.value)),eo.next());return ep.finishInner(this.nextLayer.isEmpty&&!eh.length?dist_RangeSet.empty:this.nextLayer.update({add:eh,filter:er,filterFrom:V,filterTo:ee}))}map(h){if(h.empty||this.isEmpty)return this;let d=[],_=[],V=-1;for(let ee=0;ee<this.chunk.length;ee++){let er=this.chunkPos[ee],eo=this.chunk[ee],ec=h.touchesRange(er,er+eo.length);if(!1===ec)V=Math.max(V,eo.maxPoint),d.push(eo),_.push(h.mapPos(er));else if(!0===ec){let{mapped:ee,pos:ec}=eo.map(er,h);ee&&(V=Math.max(V,ee.maxPoint),d.push(ee),_.push(ec))}}let ee=this.nextLayer.map(h);return 0==d.length?ee:new dist_RangeSet(_,d,ee||dist_RangeSet.empty,V)}between(h,d,_){if(!this.isEmpty){for(let V=0;V<this.chunk.length;V++){let ee=this.chunkPos[V],er=this.chunk[V];if(d>=ee&&h<=ee+er.length&&!1===er.between(ee,h-ee,d-ee,_))return}this.nextLayer.between(h,d,_)}}iter(h=0){return HeapCursor.from([this]).goto(h)}get isEmpty(){return this.nextLayer==this}static iter(h,d=0){return HeapCursor.from(h).goto(d)}static compare(h,d,_,V,ee=-1){let er=h.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=ee),eo=d.filter(h=>h.maxPoint>0||!h.isEmpty&&h.maxPoint>=ee),ec=findSharedChunks(er,eo,_),eh=new SpanCursor(er,ec,ee),ep=new SpanCursor(eo,ec,ee);_.iterGaps((h,d,_)=>compare(eh,h,ep,d,_,V)),_.empty&&0==_.length&&compare(eh,0,ep,0,0,V)}static eq(h,d,_=0,V){null==V&&(V=999999999);let ee=h.filter(h=>!h.isEmpty&&0>d.indexOf(h)),er=d.filter(d=>!d.isEmpty&&0>h.indexOf(d));if(ee.length!=er.length)return!1;if(!ee.length)return!0;let eo=findSharedChunks(ee,er),ec=new SpanCursor(ee,eo,0).goto(_),eh=new SpanCursor(er,eo,0).goto(_);for(;;){if(ec.to!=eh.to||!sameValues(ec.active,eh.active)||ec.point&&(!eh.point||!ec.point.eq(eh.point)))return!1;if(ec.to>V)return!0;ec.next(),eh.next()}}static spans(h,d,_,V,ee=-1){let er=new SpanCursor(h,null,ee).goto(d),eo=d,ec=er.openStart;for(;;){let h=Math.min(er.to,_);if(er.point){let _=er.activeForPoint(er.to),ee=er.pointFrom<d?_.length+1:Math.min(_.length,ec);V.point(eo,h,er.point,_,ee,er.pointRank),ec=Math.min(er.openEnd(h),_.length)}else h>eo&&(V.span(eo,h,er.active,ec),ec=er.openEnd(h));if(er.to>_)return ec+(er.point&&er.to>_?1:0);eo=er.to,er.next()}}static of(h,d=!1){let _=new dist_RangeSetBuilder;for(let V of h instanceof Range?[h]:d?function(h){if(h.length>1)for(let d=h[0],_=1;_<h.length;_++){let V=h[_];if(cmpRange(d,V)>0)return h.slice().sort(cmpRange);d=V}return h}(h):h)_.add(V.from,V.to,V.value);return _.finish()}static join(h){if(!h.length)return dist_RangeSet.empty;let d=h[h.length-1];for(let _=h.length-2;_>=0;_--)for(let V=h[_];V!=dist_RangeSet.empty;V=V.nextLayer)d=new dist_RangeSet(V.chunkPos,V.chunk,d,Math.max(V.maxPoint,d.maxPoint));return d}};dist_RangeSet.empty=new dist_RangeSet([],[],null,-1),dist_RangeSet.empty.nextLayer=dist_RangeSet.empty;let dist_RangeSetBuilder=class dist_RangeSetBuilder{finishChunk(h){this.chunks.push(new Chunk(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,h&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(h,d,_){this.addInner(h,d,_)||(this.nextLayer||(this.nextLayer=new dist_RangeSetBuilder)).add(h,d,_)}addInner(h,d,_){let V=h-this.lastTo||_.startSide-this.last.endSide;if(V<=0&&0>(h-this.lastFrom||_.startSide-this.last.startSide))throw Error("Ranges must be added sorted by `from` position and `startSide`");return!(V<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=h),this.from.push(h-this.chunkStart),this.to.push(d-this.chunkStart),this.last=_,this.lastFrom=h,this.lastTo=d,this.value.push(_),_.point&&(this.maxPoint=Math.max(this.maxPoint,d-h)),!0)}addChunk(h,d){if(0>(h-this.lastTo||d.value[0].startSide-this.last.endSide))return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,d.maxPoint),this.chunks.push(d),this.chunkPos.push(h);let _=d.value.length-1;return this.last=d.value[_],this.lastFrom=d.from[_]+h,this.lastTo=d.to[_]+h,!0}finish(){return this.finishInner(dist_RangeSet.empty)}finishInner(h){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return h;let d=dist_RangeSet.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(h):h,this.setMaxPoint);return this.from=null,d}};function findSharedChunks(h,d,_){let V=new Map;for(let d of h)for(let h=0;h<d.chunk.length;h++)d.chunk[h].maxPoint<=0&&V.set(d.chunk[h],d.chunkPos[h]);let ee=new Set;for(let h of d)for(let d=0;d<h.chunk.length;d++){let er=V.get(h.chunk[d]);null==er||(_?_.mapPos(er):er)!=h.chunkPos[d]||(null==_?void 0:_.touchesRange(er,er+h.chunk[d].length))||ee.add(h.chunk[d])}return ee}let LayerCursor=class LayerCursor{constructor(h,d,_,V=0){this.layer=h,this.skip=d,this.minPoint=_,this.rank=V}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(h,d=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(h,d,!1),this}gotoInner(h,d,_){for(;this.chunkIndex<this.layer.chunk.length;){let d=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(d)||this.layer.chunkEnd(this.chunkIndex)<h||d.maxPoint<this.minPoint))break;this.chunkIndex++,_=!1}if(this.chunkIndex<this.layer.chunk.length){let V=this.layer.chunk[this.chunkIndex].findIndex(h-this.layer.chunkPos[this.chunkIndex],d,!0);(!_||this.rangeIndex<V)&&this.setRangeIndex(V)}this.next()}forward(h,d){0>(this.to-h||this.endSide-d)&&this.gotoInner(h,d,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let h=this.layer.chunkPos[this.chunkIndex],d=this.layer.chunk[this.chunkIndex],_=h+d.from[this.rangeIndex];if(this.from=_,this.to=h+d.to[this.rangeIndex],this.value=d.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(h){if(h==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=h}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(h){return this.from-h.from||this.startSide-h.startSide||this.rank-h.rank||this.to-h.to||this.endSide-h.endSide}};let HeapCursor=class HeapCursor{constructor(h){this.heap=h}static from(h,d=null,_=-1){let V=[];for(let ee=0;ee<h.length;ee++)for(let er=h[ee];!er.isEmpty;er=er.nextLayer)er.maxPoint>=_&&V.push(new LayerCursor(er,d,_,ee));return 1==V.length?V[0]:new HeapCursor(V)}get startSide(){return this.value?this.value.startSide:0}goto(h,d=-1e9){for(let _ of this.heap)_.goto(h,d);for(let h=this.heap.length>>1;h>=0;h--)heapBubble(this.heap,h);return this.next(),this}forward(h,d){for(let _ of this.heap)_.forward(h,d);for(let h=this.heap.length>>1;h>=0;h--)heapBubble(this.heap,h);0>(this.to-h||this.value.endSide-d)&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let h=this.heap[0];this.from=h.from,this.to=h.to,this.value=h.value,this.rank=h.rank,h.value&&h.next(),heapBubble(this.heap,0)}}};function heapBubble(h,d){for(let _=h[d];;){let V=(d<<1)+1;if(V>=h.length)break;let ee=h[V];if(V+1<h.length&&ee.compare(h[V+1])>=0&&(ee=h[V+1],V++),0>_.compare(ee))break;h[V]=_,h[d]=ee,d=V}}let SpanCursor=class SpanCursor{constructor(h,d,_){this.minPoint=_,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=HeapCursor.from(h,d,_)}goto(h,d=-1e9){return this.cursor.goto(h,d),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=h,this.endSide=d,this.openStart=-1,this.next(),this}forward(h,d){for(;this.minActive>-1&&0>(this.activeTo[this.minActive]-h||this.active[this.minActive].endSide-d);)this.removeActive(this.minActive);this.cursor.forward(h,d)}removeActive(h){remove(this.active,h),remove(this.activeTo,h),remove(this.activeRank,h),this.minActive=findMinIndex(this.active,this.activeTo)}addActive(h){let d=0,{value:_,to:V,rank:ee}=this.cursor;for(;d<this.activeRank.length&&(ee-this.activeRank[d]||V-this.activeTo[d])>0;)d++;insert(this.active,d,_),insert(this.activeTo,d,V),insert(this.activeRank,d,ee),h&&insert(h,d,this.cursor.from),this.minActive=findMinIndex(this.active,this.activeTo)}next(){let h=this.to,d=this.point;this.point=null;let _=this.openStart<0?[]:null;for(;;){let V=this.minActive;if(V>-1&&0>(this.activeTo[V]-this.cursor.from||this.active[V].endSide-this.cursor.startSide)){if(this.activeTo[V]>h){this.to=this.activeTo[V],this.endSide=this.active[V].endSide;break}this.removeActive(V),_&&remove(_,V)}else if(this.cursor.value){if(this.cursor.from>h){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let h=this.cursor.value;if(h.point){if(d&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=h,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=h.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else this.addActive(_),this.cursor.next()}}else{this.to=this.endSide=1e9;break}}if(_){this.openStart=0;for(let d=_.length-1;d>=0&&_[d]<h;d--)this.openStart++}}activeForPoint(h){if(!this.active.length)return this.active;let d=[];for(let _=this.active.length-1;_>=0&&!(this.activeRank[_]<this.pointRank);_--)(this.activeTo[_]>h||this.activeTo[_]==h&&this.active[_].endSide>=this.point.endSide)&&d.push(this.active[_]);return d.reverse()}openEnd(h){let d=0;for(let _=this.activeTo.length-1;_>=0&&this.activeTo[_]>h;_--)d++;return d}};function compare(h,d,_,V,ee,er){h.goto(d),_.goto(V);let eo=V+ee,ec=V,eh=V-d;for(;;){let d=h.to+eh-_.to||h.endSide-_.endSide,V=d<0?h.to+eh:_.to,ee=Math.min(V,eo);if(h.point||_.point?h.point&&_.point&&(h.point==_.point||h.point.eq(_.point))&&sameValues(h.activeForPoint(h.to),_.activeForPoint(_.to))||er.comparePoint(ec,ee,h.point,_.point):ee>ec&&!sameValues(h.active,_.active)&&er.compareRange(ec,ee,h.active,_.active),V>eo)break;ec=V,d<=0&&h.next(),d>=0&&_.next()}}function sameValues(h,d){if(h.length!=d.length)return!1;for(let _=0;_<h.length;_++)if(h[_]!=d[_]&&!h[_].eq(d[_]))return!1;return!0}function remove(h,d){for(let _=d,V=h.length-1;_<V;_++)h[_]=h[_+1];h.pop()}function insert(h,d,_){for(let _=h.length-1;_>=d;_--)h[_+1]=h[_];h[d]=_}function findMinIndex(h,d){let _=-1,V=1e9;for(let ee=0;ee<d.length;ee++)0>(d[ee]-V||h[ee].endSide-h[_].endSide)&&(_=ee,V=d[ee]);return _}function dist_countColumn(h,d,_=h.length){let V=0;for(let ee=0;ee<_;)9==h.charCodeAt(ee)?(V+=d-V%d,ee++):(V++,ee=findClusterBreak(h,ee));return V}let n$="undefined"==typeof Symbol?"__ͼ":Symbol.for("ͼ"),nN="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),nM="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};let StyleModule=class StyleModule{constructor(h,d){this.rules=[];let{finish:_}=d||{};function splitSelector(h){return/^@/.test(h)?[h]:h.split(/,\s*/)}for(let d in h)!function render(h,d,V,ee){let er=[],eo=/^@(\w+)\b/.exec(h[0]),ec=eo&&"keyframes"==eo[1];if(eo&&null==d)return V.push(h[0]+";");for(let _ in d){let ee=d[_];if(/&/.test(_))render(_.split(/,\s*/).map(d=>h.map(h=>d.replace(/&/,h))).reduce((h,d)=>h.concat(d)),ee,V);else if(ee&&"object"==typeof ee){if(!eo)throw RangeError("The value of a property ("+_+") should be a primitive value.");render(splitSelector(_),ee,er,ec)}else null!=ee&&er.push(_.replace(/_.*/,"").replace(/[A-Z]/g,h=>"-"+h.toLowerCase())+": "+ee+";")}(er.length||ec)&&V.push((!_||eo||ee?h:h.map(_)).join(", ")+" {"+er.join(" ")+"}")}(splitSelector(d),h[d],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let h=nM[n$]||1;return nM[n$]=h+1,"ͼ"+h.toString(36)}static mount(h,d,_){let V=h[nN],ee=_&&_.nonce;V?ee&&V.setNonce(ee):V=new StyleSet(h,ee),V.mount(Array.isArray(d)?d:[d])}};let nQ=new Map;let StyleSet=class StyleSet{constructor(h,d){let _=h.ownerDocument||h,V=_.defaultView;if(!h.head&&h.adoptedStyleSheets&&V.CSSStyleSheet){let d=nQ.get(_);if(d)return h.adoptedStyleSheets=[d.sheet,...h.adoptedStyleSheets],h[nN]=d;this.sheet=new V.CSSStyleSheet,h.adoptedStyleSheets=[this.sheet,...h.adoptedStyleSheets],nQ.set(_,this)}else{this.styleTag=_.createElement("style"),d&&this.styleTag.setAttribute("nonce",d);let V=h.head||h;V.insertBefore(this.styleTag,V.firstChild)}this.modules=[],h[nN]=this}mount(h){let d=this.sheet,_=0,V=0;for(let ee=0;ee<h.length;ee++){let er=h[ee],eo=this.modules.indexOf(er);if(eo<V&&eo>-1&&(this.modules.splice(eo,1),V--,eo=-1),-1==eo){if(this.modules.splice(V++,0,er),d)for(let h=0;h<er.rules.length;h++)d.insertRule(er.rules[h],_++)}else{for(;V<eo;)_+=this.modules[V++].rules.length;_+=er.rules.length,V++}}if(!d){let h="";for(let d=0;d<this.modules.length;d++)h+=this.modules[d].getRules()+"\n";this.styleTag.textContent=h}}setNonce(h){this.styleTag&&this.styleTag.getAttribute("nonce")!=h&&this.styleTag.setAttribute("nonce",h)}};for(var nD={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},nj={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},nL="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),nF="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),nZ=0;nZ<10;nZ++)nD[48+nZ]=nD[96+nZ]=String(nZ);for(var nZ=1;nZ<=24;nZ++)nD[nZ+111]="F"+nZ;for(var nZ=65;nZ<=90;nZ++)nD[nZ]=String.fromCharCode(nZ+32),nj[nZ]=String.fromCharCode(nZ);for(var nV in nD)nj.hasOwnProperty(nV)||(nj[nV]=nD[nV]);function getSelection(h){return(11==h.nodeType?h.getSelection?h:h.ownerDocument:h).getSelection()}function contains(h,d){return!!d&&(h==d||h.contains(1!=d.nodeType?d.parentNode:d))}function hasSelection(h,d){if(!d.anchorNode)return!1;try{return contains(h,d.anchorNode)}catch(h){return!1}}function clientRectsFor(h){return 3==h.nodeType?textRange(h,0,h.nodeValue.length).getClientRects():1==h.nodeType?h.getClientRects():[]}function isEquivalentPosition(h,d,_,V){return!!_&&(scanFor(h,d,_,V,-1)||scanFor(h,d,_,V,1))}function domIndex(h){for(var d=0;;d++)if(!(h=h.previousSibling))return d}function scanFor(h,d,_,V,ee){for(;;){if(h==_&&d==V)return!0;if(d==(ee<0?0:maxOffset(h))){if("DIV"==h.nodeName)return!1;let _=h.parentNode;if(!_||1!=_.nodeType)return!1;d=domIndex(h)+(ee<0?0:1),h=_}else{if(1!=h.nodeType||1==(h=h.childNodes[d+(ee<0?-1:0)]).nodeType&&"false"==h.contentEditable)return!1;d=ee<0?maxOffset(h):0}}}function maxOffset(h){return 3==h.nodeType?h.nodeValue.length:h.childNodes.length}function flattenRect(h,d){let _=d?h.left:h.right;return{left:_,right:_,top:h.top,bottom:h.bottom}}function getScale(h,d){let _=d.width/h.offsetWidth,V=d.height/h.offsetHeight;return(_>.995&&_<1.005||!isFinite(_)||1>Math.abs(d.width-h.offsetWidth))&&(_=1),(V>.995&&V<1.005||!isFinite(V)||1>Math.abs(d.height-h.offsetHeight))&&(V=1),{scaleX:_,scaleY:V}}let DOMSelectionState=class DOMSelectionState{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(h){return this.anchorNode==h.anchorNode&&this.anchorOffset==h.anchorOffset&&this.focusNode==h.focusNode&&this.focusOffset==h.focusOffset}setRange(h){let{anchorNode:d,focusNode:_}=h;this.set(d,Math.min(h.anchorOffset,d?maxOffset(d):0),_,Math.min(h.focusOffset,_?maxOffset(_):0))}set(h,d,_,V){this.anchorNode=h,this.anchorOffset=d,this.focusNode=_,this.focusOffset=V}};let nB=null;function focusPreventScroll(h){if(h.setActive)return h.setActive();if(nB)return h.focus(nB);let d=[];for(let _=h;_&&(d.push(_,_.scrollTop,_.scrollLeft),_!=_.ownerDocument);_=_.parentNode);if(h.focus(null==nB?{get preventScroll(){return nB={preventScroll:!0},!0}}:void 0),!nB){nB=!1;for(let h=0;h<d.length;){let _=d[h++],V=d[h++],ee=d[h++];_.scrollTop!=V&&(_.scrollTop=V),_.scrollLeft!=ee&&(_.scrollLeft=ee)}}}function textRange(h,d,_=d){let V=ee||(ee=document.createRange());return V.setEnd(h,_),V.setStart(h,d),V}function dispatchKey(h,d,_){let V={key:d,code:d,keyCode:_,which:_,cancelable:!0},ee=new KeyboardEvent("keydown",V);ee.synthetic=!0,h.dispatchEvent(ee);let er=new KeyboardEvent("keyup",V);return er.synthetic=!0,h.dispatchEvent(er),ee.defaultPrevented||er.defaultPrevented}function clearAttributes(h){for(;h.attributes.length;)h.removeAttributeNode(h.attributes[0])}function isScrolledToBottom(h){return h.scrollTop>Math.max(1,h.scrollHeight-h.clientHeight-4)}let DOMPos=class DOMPos{constructor(h,d,_=!0){this.node=h,this.offset=d,this.precise=_}static before(h,d){return new DOMPos(h.parentNode,domIndex(h),d)}static after(h,d){return new DOMPos(h.parentNode,domIndex(h)+1,d)}};let nW=[];let ContentView=class ContentView{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(h){let d=this.posAtStart;for(let _ of this.children){if(_==h)return d;d+=_.length+_.breakAfter}throw RangeError("Invalid child in posBefore")}posAfter(h){return this.posBefore(h)+h.length}sync(h,d){if(2&this.flags){let _=this.dom,V=null,ee;for(let er of this.children){if(7&er.flags){if(!er.dom&&(ee=V?V.nextSibling:_.firstChild)){let h=ContentView.get(ee);(!h||!h.parent&&h.canReuseDOM(er))&&er.reuseDOM(ee)}er.sync(h,d),er.flags&=-8}if(ee=V?V.nextSibling:_.firstChild,d&&!d.written&&d.node==_&&ee!=er.dom&&(d.written=!0),er.dom.parentNode==_)for(;ee&&ee!=er.dom;)ee=rm$1(ee);else _.insertBefore(er.dom,ee);V=er.dom}for((ee=V?V.nextSibling:_.firstChild)&&d&&d.node==_&&(d.written=!0);ee;)ee=rm$1(ee)}else if(1&this.flags)for(let _ of this.children)7&_.flags&&(_.sync(h,d),_.flags&=-8)}reuseDOM(h){}localPosFromDOM(h,d){let _;if(h==this.dom)_=this.dom.childNodes[d];else{let V=0==maxOffset(h)?0:0==d?-1:1;for(;;){let d=h.parentNode;if(d==this.dom)break;0==V&&d.firstChild!=d.lastChild&&(V=h==d.firstChild?-1:1),h=d}_=V<0?h:h.nextSibling}if(_==this.dom.firstChild)return 0;for(;_&&!ContentView.get(_);)_=_.nextSibling;if(!_)return this.length;for(let h=0,d=0;;h++){let V=this.children[h];if(V.dom==_)return d;d+=V.length+V.breakAfter}}domBoundsAround(h,d,_=0){let V=-1,ee=-1,er=-1,eo=-1;for(let ec=0,eh=_,ep=_;ec<this.children.length;ec++){let _=this.children[ec],ef=eh+_.length;if(eh<h&&ef>d)return _.domBoundsAround(h,d,eh);if(ef>=h&&-1==V&&(V=ec,ee=eh),eh>d&&_.dom.parentNode==this.dom){er=ec,eo=ep;break}ep=ef,eh=ef+_.breakAfter}return{from:ee,to:eo<0?_+this.length:eo,startDOM:(V?this.children[V-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:er<this.children.length&&er>=0?this.children[er].dom:null}}markDirty(h=!1){this.flags|=2,this.markParentsDirty(h)}markParentsDirty(h){for(let d=this.parent;d;d=d.parent){if(h&&(d.flags|=2),1&d.flags)return;d.flags|=1,h=!1}}setParent(h){this.parent!=h&&(this.parent=h,7&this.flags&&this.markParentsDirty(!0))}setDOM(h){this.dom!=h&&(this.dom&&(this.dom.cmView=null),this.dom=h,h.cmView=this)}get rootView(){for(let h=this;;){let d=h.parent;if(!d)return h;h=d}}replaceChildren(h,d,_=nW){this.markDirty();for(let V=h;V<d;V++){let h=this.children[V];h.parent==this&&0>_.indexOf(h)&&h.destroy()}this.children.splice(h,d-h,..._);for(let h=0;h<_.length;h++)_[h].setParent(this)}ignoreMutation(h){return!1}ignoreEvent(h){return!1}childCursor(h=this.length){return new ChildCursor(this.children,h,this.children.length)}childPos(h,d=1){return this.childCursor().findPos(h,d)}toString(){let h=this.constructor.name.replace("View","");return h+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==h?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(h){return h.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(h,d,_,V,ee,er){return!1}become(h){return!1}canReuseDOM(h){return h.constructor==this.constructor&&!((this.flags|h.flags)&8)}getSide(){return 0}destroy(){for(let h of this.children)h.parent==this&&h.destroy();this.parent=null}};function rm$1(h){let d=h.nextSibling;return h.parentNode.removeChild(h),d}ContentView.prototype.breakAfter=0;let ChildCursor=class ChildCursor{constructor(h,d,_){this.children=h,this.pos=d,this.i=_,this.off=0}findPos(h,d=1){for(;;){if(h>this.pos||h==this.pos&&(d>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=h-this.pos,this;let _=this.children[--this.i];this.pos-=_.length+_.breakAfter}}};function replaceRange(h,d,_,V,ee,er,eo,ec,eh){let{children:ep}=h,ef=ep.length?ep[d]:null,em=er.length?er[er.length-1]:null,eg=em?em.breakAfter:eo;if(!(d==V&&ef&&!eo&&!eg&&er.length<2&&ef.merge(_,ee,er.length?em:null,0==_,ec,eh))){if(V<ep.length){let h=ep[V];h&&(ee<h.length||h.breakAfter&&(null==em?void 0:em.breakAfter))?(d==V&&(h=h.split(ee),ee=0),!eg&&em&&h.merge(0,ee,em,!0,0,eh)?er[er.length-1]=h:((ee||h.children.length&&!h.children[0].length)&&h.merge(0,ee,null,!1,0,eh),er.push(h))):(null==h?void 0:h.breakAfter)&&(em?em.breakAfter=1:eo=1),V++}for(ef&&(ef.breakAfter=eo,_>0&&(!eo&&er.length&&ef.merge(_,ef.length,er[0],!1,ec,0)?ef.breakAfter=er.shift().breakAfter:(_<ef.length||ef.children.length&&0==ef.children[ef.children.length-1].length)&&ef.merge(_,ef.length,null,!1,ec,0),d++));d<V&&er.length;)if(ep[V-1].become(er[er.length-1]))V--,er.pop(),eh=er.length?0:ec;else if(ep[d].become(er[0]))d++,er.shift(),ec=er.length?0:eh;else break;!er.length&&d&&V<ep.length&&!ep[d-1].breakAfter&&ep[V].merge(0,0,ep[d-1],!1,ec,eh)&&d--,(d<V||er.length)&&h.replaceChildren(d,V,er)}}function mergeChildrenInto(h,d,_,V,ee,er){let eo=h.childCursor(),{i:ec,off:eh}=eo.findPos(_,1),{i:ep,off:ef}=eo.findPos(d,-1),em=d-_;for(let h of V)em+=h.length;h.length+=em,replaceRange(h,ep,ef,ec,eh,V,0,ee,er)}let nU="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},nz="undefined"!=typeof document?document:{documentElement:{style:{}}},nq=/Edge\/(\d+)/.exec(nU.userAgent),nX=/MSIE \d/.test(nU.userAgent),nY=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(nU.userAgent),nG=!!(nX||nY||nq),nH=!nG&&/gecko\/(\d+)/i.test(nU.userAgent),nK=!nG&&/Chrome\/(\d+)/.exec(nU.userAgent),nJ="webkitFontSmoothing"in nz.documentElement.style,n0=!nG&&/Apple Computer/.test(nU.vendor),n1=n0&&(/Mobile\/\w+/.test(nU.userAgent)||nU.maxTouchPoints>2);var n2={mac:n1||/Mac/.test(nU.platform),windows:/Win/.test(nU.platform),linux:/Linux|X11/.test(nU.platform),ie:nG,ie_version:nX?nz.documentMode||6:nY?+nY[1]:nq?+nq[1]:0,gecko:nH,gecko_version:nH?+(/Firefox\/(\d+)/.exec(nU.userAgent)||[0,0])[1]:0,chrome:!!nK,chrome_version:nK?+nK[1]:0,ios:n1,android:/Android\b/.test(nU.userAgent),webkit:nJ,safari:n0,webkit_version:nJ?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=nz.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};let TextView=class TextView extends ContentView{constructor(h){super(),this.text=h}get length(){return this.text.length}createDOM(h){this.setDOM(h||document.createTextNode(this.text))}sync(h,d){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(d&&d.node==this.dom&&(d.written=!0),this.dom.nodeValue=this.text)}reuseDOM(h){3==h.nodeType&&this.createDOM(h)}merge(h,d,_){return!(8&this.flags)&&(!_||_ instanceof TextView&&!(this.length-(d-h)+_.length>256)&&!(8&_.flags))&&(this.text=this.text.slice(0,h)+(_?_.text:"")+this.text.slice(d),this.markDirty(),!0)}split(h){let d=new TextView(this.text.slice(h));return this.text=this.text.slice(0,h),this.markDirty(),d.flags|=8&this.flags,d}localPosFromDOM(h,d){return h==this.dom?d:d?this.text.length:0}domAtPos(h){return new DOMPos(this.dom,h)}domBoundsAround(h,d,_){return{from:_,to:_+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(h,d){return function(h,d,_){let V=h.nodeValue.length;d>V&&(d=V);let ee=d,er=d,eo=0;0==d&&_<0||d==V&&_>=0?!(n2.chrome||n2.gecko)&&(d?(ee--,eo=1):er<V&&(er++,eo=-1)):_<0?ee--:er<V&&er++;let ec=textRange(h,ee,er).getClientRects();if(!ec.length)return null;let eh=ec[(eo?eo<0:_>=0)?0:ec.length-1];return n2.safari&&!eo&&0==eh.width&&(eh=Array.prototype.find.call(ec,h=>h.width)||eh),eo?flattenRect(eh,eo<0):eh||null}(this.dom,h,d)}};let MarkView=class MarkView extends ContentView{constructor(h,d=[],_=0){for(let V of(super(),this.mark=h,this.children=d,this.length=_,d))V.setParent(this)}setAttrs(h){if(clearAttributes(h),this.mark.class&&(h.className=this.mark.class),this.mark.attrs)for(let d in this.mark.attrs)h.setAttribute(d,this.mark.attrs[d]);return h}canReuseDOM(h){return super.canReuseDOM(h)&&!((this.flags|h.flags)&8)}reuseDOM(h){h.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(h),this.flags|=6)}sync(h,d){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(h,d)}merge(h,d,_,V,ee,er){return(!_||!!(_ instanceof MarkView&&_.mark.eq(this.mark))&&(!h||!(ee<=0))&&(!(d<this.length)||!(er<=0)))&&(mergeChildrenInto(this,h,d,_?_.children.slice():[],ee-1,er-1),this.markDirty(),!0)}split(h){let d=[],_=0,V=-1,ee=0;for(let er of this.children){let eo=_+er.length;eo>h&&d.push(_<h?er.split(h-_):er),V<0&&_>=h&&(V=ee),_=eo,ee++}let er=this.length-h;return this.length=h,V>-1&&(this.children.length=V,this.markDirty()),new MarkView(this.mark,d,er)}domAtPos(h){return inlineDOMAtPos(this,h)}coordsAt(h,d){return coordsInChildren(this,h,d)}};let WidgetView=class WidgetView extends ContentView{static create(h,d,_){return new WidgetView(h,d,_)}constructor(h,d,_){super(),this.widget=h,this.length=d,this.side=_,this.prevWidget=null}split(h){let d=WidgetView.create(this.widget,this.length-h,this.side);return this.length-=h,d}sync(h){this.dom&&this.widget.updateDOM(this.dom,h)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(h)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(h,d,_,V,ee,er){return(!_||_ instanceof WidgetView&&!!this.widget.compare(_.widget)&&(!(h>0)||!(ee<=0))&&(!(d<this.length)||!(er<=0)))&&(this.length=h+(_?_.length:0)+(this.length-d),!0)}become(h){return h instanceof WidgetView&&h.side==this.side&&this.widget.constructor==h.widget.constructor&&(this.widget.compare(h.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=h.widget,this.length=h.length,!0)}ignoreMutation(){return!0}ignoreEvent(h){return this.widget.ignoreEvent(h)}get overrideDOMText(){if(0==this.length)return Text.empty;let h=this;for(;h.parent;)h=h.parent;let{view:d}=h,_=d&&d.state.doc,V=this.posAtStart;return _?_.slice(V,V+this.length):Text.empty}domAtPos(h){return(this.length?0==h:this.side>0)?DOMPos.before(this.dom):DOMPos.after(this.dom,h==this.length)}domBoundsAround(){return null}coordsAt(h,d){let _=this.widget.coordsAt(this.dom,h,d);if(_)return _;let V=this.dom.getClientRects(),ee=null;if(!V.length)return null;let er=this.side?this.side<0:h>0;for(let d=er?V.length-1:0;ee=V[d],h>0?0!=d:d!=V.length-1&&!(ee.top<ee.bottom);d+=er?-1:1);return flattenRect(ee,!er)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}};let WidgetBufferView=class WidgetBufferView extends ContentView{constructor(h){super(),this.side=h}get length(){return 0}merge(){return!1}become(h){return h instanceof WidgetBufferView&&h.side==this.side}split(){return new WidgetBufferView(this.side)}sync(){if(!this.dom){let h=document.createElement("img");h.className="cm-widgetBuffer",h.setAttribute("aria-hidden","true"),this.setDOM(h)}}getSide(){return this.side}domAtPos(h){return this.side>0?DOMPos.before(this.dom):DOMPos.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(h){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Text.empty}get isHidden(){return!0}};function inlineDOMAtPos(h,d){let _=h.dom,{children:V}=h,ee=0;for(let h=0;ee<V.length;ee++){let er=V[ee],eo=h+er.length;if(!(eo==h&&0>=er.getSide())){if(d>h&&d<eo&&er.dom.parentNode==_)return er.domAtPos(d-h);if(d<=h)break;h=eo}}for(let h=ee;h>0;h--){let d=V[h-1];if(d.dom.parentNode==_)return d.domAtPos(d.length)}for(let h=ee;h<V.length;h++){let d=V[h];if(d.dom.parentNode==_)return d.domAtPos(0)}return new DOMPos(_,0)}function coordsInChildren(h,d,_){let V=null,ee=-1,er=null,eo=-1;!function scan(h,d){for(let ec=0,eh=0;ec<h.children.length&&eh<=d;ec++){let ep=h.children[ec],ef=eh+ep.length;ef>=d&&(ep.children.length?scan(ep,d-eh):(!er||er.isHidden&&_>0)&&(ef>d||eh==ef&&ep.getSide()>0)?(er=ep,eo=d-eh):(eh<d||eh==ef&&0>ep.getSide()&&!ep.isHidden)&&(V=ep,ee=d-eh)),eh=ef}}(h,d);let ec=(_<0?V:er)||V||er;return ec?ec.coordsAt(Math.max(0,ec==V?ee:eo),_):function(h){let d=h.dom.lastChild;if(!d)return h.dom.getBoundingClientRect();let _=clientRectsFor(d);return _[_.length-1]||null}(h)}function combineAttrs(h,d){for(let _ in h)"class"==_&&d.class?d.class+=" "+h.class:"style"==_&&d.style?d.style+=";"+h.style:d[_]=h[_];return d}TextView.prototype.children=WidgetView.prototype.children=WidgetBufferView.prototype.children=nW;let n5=Object.create(null);function attrsEq(h,d,_){if(h==d)return!0;h||(h=n5),d||(d=n5);let V=Object.keys(h),ee=Object.keys(d);if(V.length-(_&&V.indexOf(_)>-1?1:0)!=ee.length-(_&&ee.indexOf(_)>-1?1:0))return!1;for(let er of V)if(er!=_&&(-1==ee.indexOf(er)||h[er]!==d[er]))return!1;return!0}function updateAttrs(h,d,_){let V=!1;if(d)for(let ee in d)_&&ee in _||(V=!0,"style"==ee?h.style.cssText="":h.removeAttribute(ee));if(_)for(let ee in _)d&&d[ee]==_[ee]||(V=!0,"style"==ee?h.style.cssText=_[ee]:h.setAttribute(ee,_[ee]));return V}let LineView=class LineView extends ContentView{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(h,d,_,V,ee,er){if(_){if(!(_ instanceof LineView))return!1;this.dom||_.transferDOM(this)}return V&&this.setDeco(_?_.attrs:null),mergeChildrenInto(this,h,d,_?_.children.slice():[],ee,er),!0}split(h){let d=new LineView;if(d.breakAfter=this.breakAfter,0==this.length)return d;let{i:_,off:V}=this.childPos(h);V&&(d.append(this.children[_].split(V),0),this.children[_].merge(V,this.children[_].length,null,!1,0,0),_++);for(let h=_;h<this.children.length;h++)d.append(this.children[h],0);for(;_>0&&0==this.children[_-1].length;)this.children[--_].destroy();return this.children.length=_,this.markDirty(),this.length=h,d}transferDOM(h){this.dom&&(this.markDirty(),h.setDOM(this.dom),h.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(h){attrsEq(this.attrs,h)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=h)}append(h,d){!function joinInlineInto(h,d,_){let V,{children:ee}=h;_>0&&d instanceof MarkView&&ee.length&&(V=ee[ee.length-1])instanceof MarkView&&V.mark.eq(d.mark)?joinInlineInto(V,d.children[0],_-1):(ee.push(d),d.setParent(h)),h.length+=d.length}(this,h,d)}addLineDeco(h){let d=h.spec.attributes,_=h.spec.class;d&&(this.attrs=combineAttrs(d,this.attrs||{})),_&&(this.attrs=combineAttrs({class:_},this.attrs||{}))}domAtPos(h){return inlineDOMAtPos(this,h)}reuseDOM(h){"DIV"==h.nodeName&&(this.setDOM(h),this.flags|=6)}sync(h,d){var _;this.dom?4&this.flags&&(clearAttributes(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(updateAttrs(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(h,d);let V=this.dom.lastChild;for(;V&&ContentView.get(V) instanceof MarkView;)V=V.lastChild;if(!V||!this.length||"BR"!=V.nodeName&&(null===(_=ContentView.get(V))||void 0===_?void 0:_.isEditable)==!1&&(!n2.ios||!this.children.some(h=>h instanceof TextView))){let h=document.createElement("BR");h.cmIgnore=!0,this.dom.appendChild(h)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let h=0,d;for(let _ of this.children){if(!(_ instanceof TextView)||/[^ -~]/.test(_.text))return null;let V=clientRectsFor(_.dom);if(1!=V.length)return null;h+=V[0].width,d=V[0].height}return h?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:h/this.length,textHeight:d}:null}coordsAt(h,d){let _=coordsInChildren(this,h,d);if(!this.children.length&&_&&this.parent){let{heightOracle:h}=this.parent.view.viewState,d=_.bottom-_.top;if(2>Math.abs(d-h.lineHeight)&&h.textHeight<d){let V=(d-h.textHeight)/2;return{top:_.top+V,bottom:_.bottom-V,left:_.left,right:_.left}}}return _}become(h){return!1}covers(){return!0}static find(h,d){for(let _=0,V=0;_<h.children.length;_++){let ee=h.children[_],er=V+ee.length;if(er>=d){if(ee instanceof LineView)return ee;if(er>d)break}V=er+ee.breakAfter}return null}};let BlockWidgetView=class BlockWidgetView extends ContentView{constructor(h,d,_){super(),this.widget=h,this.length=d,this.deco=_,this.breakAfter=0,this.prevWidget=null}merge(h,d,_,V,ee,er){return(!_||_ instanceof BlockWidgetView&&!!this.widget.compare(_.widget)&&(!(h>0)||!(ee<=0))&&(!(d<this.length)||!(er<=0)))&&(this.length=h+(_?_.length:0)+(this.length-d),!0)}domAtPos(h){return 0==h?DOMPos.before(this.dom):DOMPos.after(this.dom,h==this.length)}split(h){let d=this.length-h;this.length=h;let _=new BlockWidgetView(this.widget,d,this.deco);return _.breakAfter=this.breakAfter,_}get children(){return nW}sync(h){this.dom&&this.widget.updateDOM(this.dom,h)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(h)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Text.empty}domBoundsAround(){return null}become(h){return h instanceof BlockWidgetView&&h.widget.constructor==this.widget.constructor&&(h.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=h.widget,this.length=h.length,this.deco=h.deco,this.breakAfter=h.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(h){return this.widget.ignoreEvent(h)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(h,d){return this.widget.coordsAt(this.dom,h,d)}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(h){let{startSide:d,endSide:_}=this.deco;return d!=_&&(h<0?d<0:_>0)}};let WidgetType=class WidgetType{eq(h){return!1}updateDOM(h,d){return!1}compare(h){return this==h||this.constructor==h.constructor&&this.eq(h)}get estimatedHeight(){return -1}get lineBreaks(){return 0}ignoreEvent(h){return!0}coordsAt(h,d,_){return null}get isHidden(){return!1}get editable(){return!1}destroy(h){}};var n7=((ec=n7||(n7={}))[ec.Text=0]="Text",ec[ec.WidgetBefore=1]="WidgetBefore",ec[ec.WidgetAfter=2]="WidgetAfter",ec[ec.WidgetRange=3]="WidgetRange",ec);let Decoration=class Decoration extends RangeValue{constructor(h,d,_,V){super(),this.startSide=h,this.endSide=d,this.widget=_,this.spec=V}get heightRelevant(){return!1}static mark(h){return new MarkDecoration(h)}static widget(h){let d=Math.max(-1e4,Math.min(1e4,h.side||0)),_=!!h.block;return d+=_&&!h.inlineOrder?d>0?3e8:-4e8:d>0?1e8:-1e8,new PointDecoration(h,d,d,_,h.widget||null,!1)}static replace(h){let d=!!h.block,_,V;if(h.isBlockGap)_=-5e8,V=4e8;else{let{start:ee,end:er}=getInclusive(h,d);_=(ee?d?-3e8:-1:5e8)-1,V=(er?d?2e8:1:-6e8)+1}return new PointDecoration(h,_,V,d,h.widget||null,!0)}static line(h){return new LineDecoration(h)}static set(h,d=!1){return dist_RangeSet.of(h,d)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}};Decoration.none=dist_RangeSet.empty;let MarkDecoration=class MarkDecoration extends Decoration{constructor(h){let{start:d,end:_}=getInclusive(h);super(d?-1:5e8,_?1:-6e8,null,h),this.tagName=h.tagName||"span",this.class=h.class||"",this.attrs=h.attributes||null}eq(h){var d,_;return this==h||h instanceof MarkDecoration&&this.tagName==h.tagName&&(this.class||(null===(d=this.attrs)||void 0===d?void 0:d.class))==(h.class||(null===(_=h.attrs)||void 0===_?void 0:_.class))&&attrsEq(this.attrs,h.attrs,"class")}range(h,d=h){if(h>=d)throw RangeError("Mark decorations may not be empty");return super.range(h,d)}};MarkDecoration.prototype.point=!1;let LineDecoration=class LineDecoration extends Decoration{constructor(h){super(-2e8,-2e8,null,h)}eq(h){return h instanceof LineDecoration&&this.spec.class==h.spec.class&&attrsEq(this.spec.attributes,h.spec.attributes)}range(h,d=h){if(d!=h)throw RangeError("Line decoration ranges must be zero-length");return super.range(h,d)}};LineDecoration.prototype.mapMode=ny.TrackBefore,LineDecoration.prototype.point=!0;let PointDecoration=class PointDecoration extends Decoration{constructor(h,d,_,V,ee,er){super(d,_,ee,h),this.block=V,this.isReplace=er,this.mapMode=V?d<=0?ny.TrackBefore:ny.TrackAfter:ny.TrackDel}get type(){return this.startSide!=this.endSide?n7.WidgetRange:this.startSide<=0?n7.WidgetBefore:n7.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(h){var d,_;return h instanceof PointDecoration&&((d=this.widget)==(_=h.widget)||!!(d&&_&&d.compare(_)))&&this.block==h.block&&this.startSide==h.startSide&&this.endSide==h.endSide}range(h,d=h){if(this.isReplace&&(h>d||h==d&&this.startSide>0&&this.endSide<=0))throw RangeError("Invalid range for replacement decoration");if(!this.isReplace&&d!=h)throw RangeError("Widget decorations can only have zero-length ranges");return super.range(h,d)}};function getInclusive(h,d=!1){let{inclusiveStart:_,inclusiveEnd:V}=h;return null==_&&(_=h.inclusive),null==V&&(V=h.inclusive),{start:null!=_?_:d,end:null!=V?V:d}}function addRange(h,d,_,V=0){let ee=_.length-1;ee>=0&&_[ee]+V>=h?_[ee]=Math.max(_[ee],d):_.push(h,d)}PointDecoration.prototype.point=!0;let ContentBuilder=class ContentBuilder{constructor(h,d,_,V){this.doc=h,this.pos=d,this.end=_,this.disallowBlockEffectsFor=V,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=h.iter(),this.skip=d}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let h=this.content[this.content.length-1];return!(h.breakAfter||h instanceof BlockWidgetView&&h.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new LineView),this.atCursorPos=!0),this.curLine}flushBuffer(h=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(wrapMarks(new WidgetBufferView(-1),h),h.length),this.pendingBuffer=0)}addBlockWidget(h){this.flushBuffer(),this.curLine=null,this.content.push(h)}finish(h){this.pendingBuffer&&h<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||h&&this.content.length&&this.content[this.content.length-1]instanceof BlockWidgetView||this.getLine()}buildText(h,d,_){for(;h>0;){if(this.textOff==this.text.length){let{value:d,lineBreak:_,done:V}=this.cursor.next(this.skip);if(this.skip=0,V)throw Error("Ran out of text content when drawing inline views");if(_){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,h--;continue}this.text=d,this.textOff=0}let V=Math.min(this.text.length-this.textOff,h,512);this.flushBuffer(d.slice(d.length-_)),this.getLine().append(wrapMarks(new TextView(this.text.slice(this.textOff,this.textOff+V)),d),_),this.atCursorPos=!0,this.textOff+=V,h-=V,_=0}}span(h,d,_,V){this.buildText(d-h,_,V),this.pos=d,this.openStart<0&&(this.openStart=V)}point(h,d,_,V,ee,er){if(this.disallowBlockEffectsFor[er]&&_ instanceof PointDecoration){if(_.block)throw RangeError("Block decorations may not be specified via plugins");if(d>this.doc.lineAt(this.pos).to)throw RangeError("Decorations that replace line breaks may not be specified via plugins")}let eo=d-h;if(_ instanceof PointDecoration){if(_.block)_.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new BlockWidgetView(_.widget||new NullWidget("div"),eo,_));else{let er=WidgetView.create(_.widget||new NullWidget("span"),eo,eo?0:_.startSide),ec=this.atCursorPos&&!er.isEditable&&ee<=V.length&&(h<d||_.startSide>0),eh=!er.isEditable&&(h<d||ee>V.length||_.startSide<=0),ep=this.getLine();2!=this.pendingBuffer||ec||er.isEditable||(this.pendingBuffer=0),this.flushBuffer(V),ec&&(ep.append(wrapMarks(new WidgetBufferView(1),V),ee),ee=V.length+Math.max(0,ee-V.length)),ep.append(wrapMarks(er,V),ee),this.atCursorPos=eh,this.pendingBuffer=eh?h<d||ee>V.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=V.slice())}}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(_);eo&&(this.textOff+eo<=this.text.length?this.textOff+=eo:(this.skip+=eo-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=d),this.openStart<0&&(this.openStart=ee)}static build(h,d,_,V,ee){let er=new ContentBuilder(h,d,_,ee);return er.openEnd=dist_RangeSet.spans(V,d,_,er),er.openStart<0&&(er.openStart=er.openEnd),er.finish(er.openEnd),er}};function wrapMarks(h,d){for(let _ of d)h=new MarkView(_,[h],h.length);return h}let NullWidget=class NullWidget extends WidgetType{constructor(h){super(),this.tag=h}eq(h){return h.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(h){return h.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}};var n3=((eh=n3||(n3={}))[eh.LTR=0]="LTR",eh[eh.RTL=1]="RTL",eh);let n4=n3.LTR,n6=n3.RTL;function dec(h){let d=[];for(let _=0;_<h.length;_++)d.push(1<<+h[_]);return d}let n9=dec("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),n8=dec("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),re=Object.create(null),rn=[];for(let h of["()","[]","{}"]){let d=h.charCodeAt(0),_=h.charCodeAt(1);re[d]=_,re[_]=-d}function charType(h){return h<=247?n9[h]:1424<=h&&h<=1524?2:1536<=h&&h<=1785?n8[h-1536]:1774<=h&&h<=2220?4:8192<=h&&h<=8204?256:64336<=h&&h<=65023?4:1}let ri=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;let BidiSpan=class BidiSpan{get dir(){return this.level%2?n6:n4}constructor(h,d,_){this.from=h,this.to=d,this.level=_}side(h,d){return this.dir==d==h?this.to:this.from}forward(h,d){return h==(this.dir==d)}static find(h,d,_,V){let ee=-1;for(let er=0;er<h.length;er++){let eo=h[er];if(eo.from<=d&&eo.to>=d){if(eo.level==_)return er;(ee<0||(0!=V?V<0?eo.from<d:eo.to>d:h[ee].level>eo.level))&&(ee=er)}}if(ee<0)throw RangeError("Index out of range");return ee}};let rs=[];function trivialOrder(h){return[new BidiSpan(0,h,0)]}let ro="",ra=Facet.define(),rl=Facet.define(),ru=Facet.define(),rd=Facet.define(),rp=Facet.define(),rg=Facet.define(),rO=Facet.define(),ry=Facet.define({combine:h=>h.some(h=>h)}),rv=Facet.define({combine:h=>h.some(h=>h)});let ScrollTarget=class ScrollTarget{constructor(h,d="nearest",_="nearest",V=5,ee=5,er=!1){this.range=h,this.y=d,this.x=_,this.yMargin=V,this.xMargin=ee,this.isSnapshot=er}map(h){return h.empty?this:new ScrollTarget(this.range.map(h),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(h){return this.range.to<=h.doc.length?this:new ScrollTarget(dist_EditorSelection.cursor(h.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}};let rb=dist_StateEffect.define({map:(h,d)=>h.map(d)});function logException(h,d,_){let V=h.facet(rd);V.length?V[0](d):window.onerror?window.onerror(String(d),_,void 0,void 0,d):_?console.error(_+":",d):console.error(d)}let rS=Facet.define({combine:h=>!h.length||h[0]}),r_=0,rw=Facet.define();let dist_ViewPlugin=class dist_ViewPlugin{constructor(h,d,_,V,ee){this.id=h,this.create=d,this.domEventHandlers=_,this.domEventObservers=V,this.extension=ee(this)}static define(h,d){let{eventHandlers:_,eventObservers:V,provide:ee,decorations:er}=d||{};return new dist_ViewPlugin(r_++,h,_,V,h=>{let d=[rw.of(h)];return er&&d.push(rT.of(d=>{let _=d.plugin(h);return _?er(_):Decoration.none})),ee&&d.push(ee(h)),d})}static fromClass(h,d){return dist_ViewPlugin.define(d=>new h(d),d)}};let PluginInstance=class PluginInstance{constructor(h){this.spec=h,this.mustUpdate=null,this.value=null}update(h){if(this.value){if(this.mustUpdate){let h=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(h)}catch(d){if(logException(h.state,d,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(h){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(h)}catch(d){logException(h.state,d,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(h){var d;if(null===(d=this.value)||void 0===d?void 0:d.destroy)try{this.value.destroy()}catch(d){logException(h.state,d,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}};let rx=Facet.define(),rk=Facet.define(),rT=Facet.define(),rE=Facet.define(),rC=Facet.define(),rP=Facet.define();function getIsolatedRanges(h,d){let _=h.state.facet(rP);if(!_.length)return _;let V=_.map(d=>d instanceof Function?d(h):d),ee=[];return dist_RangeSet.spans(V,d.from,d.to,{point(){},span(h,_,V,er){let eo=h-d.from,ec=_-d.from,eh=ee;for(let h=V.length-1;h>=0;h--,er--){let _=V[h].spec.bidiIsolate,ee;if(null==_&&(_=function(h,d,_){for(let V=d;V<_;V++){let d=charType(h.charCodeAt(V));if(1==d)break;if(2==d||4==d)return n6}return n4}(d.text,eo,ec)),er>0&&eh.length&&(ee=eh[eh.length-1]).to==eo&&ee.direction==_)ee.to=ec,eh=ee.inner;else{let h={from:eo,to:ec,direction:_,inner:[]};eh.push(h),eh=h.inner}}}}),ee}let rI=Facet.define();function getScrollMargins(h){let d=0,_=0,V=0,ee=0;for(let er of h.state.facet(rI)){let eo=er(h);eo&&(null!=eo.left&&(d=Math.max(d,eo.left)),null!=eo.right&&(_=Math.max(_,eo.right)),null!=eo.top&&(V=Math.max(V,eo.top)),null!=eo.bottom&&(ee=Math.max(ee,eo.bottom)))}return{left:d,right:_,top:V,bottom:ee}}let rR=Facet.define();let ChangedRange=class ChangedRange{constructor(h,d,_,V){this.fromA=h,this.toA=d,this.fromB=_,this.toB=V}join(h){return new ChangedRange(Math.min(this.fromA,h.fromA),Math.max(this.toA,h.toA),Math.min(this.fromB,h.fromB),Math.max(this.toB,h.toB))}addToSet(h){let d=h.length,_=this;for(;d>0;d--){let V=h[d-1];if(!(V.fromA>_.toA)){if(V.toA<_.fromA)break;_=_.join(V),h.splice(d-1,1)}}return h.splice(d,0,_),h}static extendWithRanges(h,d){if(0==d.length)return h;let _=[];for(let V=0,ee=0,er=0,eo=0;;V++){let ec=V==h.length?null:h[V],eh=er-eo,ep=ec?ec.fromB:1e9;for(;ee<d.length&&d[ee]<ep;){let h=d[ee],V=d[ee+1],er=Math.max(eo,h),ec=Math.min(ep,V);if(er<=ec&&new ChangedRange(er+eh,ec+eh,er,ec).addToSet(_),V>ep)break;ee+=2}if(!ec)return _;new ChangedRange(ec.fromA,ec.toA,ec.fromB,ec.toB).addToSet(_),er=ec.toA,eo=ec.toB}}};let ViewUpdate=class ViewUpdate{constructor(h,d,_){for(let V of(this.view=h,this.state=d,this.transactions=_,this.flags=0,this.startState=h.state,this.changes=ChangeSet.empty(this.startState.doc.length),_))this.changes=this.changes.compose(V.changes);let V=[];this.changes.iterChangedRanges((h,d,_,ee)=>V.push(new ChangedRange(h,d,_,ee))),this.changedRanges=V}static create(h,d,_){return new ViewUpdate(h,d,_)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(h=>h.selection)}get empty(){return 0==this.flags&&0==this.transactions.length}};let DocView=class DocView extends ContentView{get length(){return this.view.state.doc.length}constructor(h){super(),this.view=h,this.decorations=[],this.dynamicDecorationMap=[],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(h.contentDOM),this.children=[new LineView],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new ChangedRange(0,0,0,h.state.doc.length)],0,null)}update(h){var d,_,V,ee,er,eo;let ec,eh;let ep=h.changedRanges;this.minWidth>0&&ep.length&&(ep.every(({fromA:h,toA:d})=>d<this.minWidthFrom||h>this.minWidthTo)?(this.minWidthFrom=h.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=h.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0);let ef=-1;!(this.view.inputState.composing>=0)||((null===(d=this.domChanged)||void 0===d?void 0:d.newSel)?ef=this.domChanged.newSel.head:(_=h.changes,V=this.hasComposition,ec=!1,V&&_.iterChangedRanges((h,d)=>{h<V.to&&d>V.from&&(ec=!0)}),ec||h.selectionSet||(ef=h.state.selection.main.head)));let em=ef>-1?function(h,d,_){let V=findCompositionNode(h,_);if(!V)return null;let{node:ee,from:er,to:eo}=V,ec=ee.nodeValue;if(/[\n\r]/.test(ec)||h.state.doc.sliceString(V.from,V.to)!=ec)return null;let eh=d.invertedDesc,ep=new ChangedRange(eh.mapPos(er),eh.mapPos(eo),er,eo),ef=[];for(let d=ee.parentNode;;d=d.parentNode){let _=ContentView.get(d);if(_ instanceof MarkView)ef.push({node:d,deco:_.mark});else{if(_ instanceof LineView||"DIV"==d.nodeName&&d.parentNode==h.contentDOM)return{range:ep,text:ee,marks:ef,line:d};if(d==h.contentDOM)return null;ef.push({node:d,deco:new MarkDecoration({inclusive:!0,attributes:function(h){let d=Object.create(null);for(let _=0;_<h.attributes.length;_++){let V=h.attributes[_];d[V.name]=V.value}return d}(d),tagName:d.tagName.toLowerCase()})})}}}(this.view,h.changes,ef):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:_}=this.hasComposition;ep=new ChangedRange(d,_,h.changes.mapPos(d,-1),h.changes.mapPos(_,1)).addToSet(ep.slice())}this.hasComposition=em?{from:em.range.fromB,to:em.range.toB}:null,(n2.ie||n2.chrome)&&!em&&h&&h.state.doc.lines!=h.startState.doc.lines&&(this.forceSelection=!0);let eg=(ee=this.decorations,er=this.updateDeco(),eo=h.changes,eh=new rA,dist_RangeSet.compare(ee,er,eo,eh),eh.changes);return ep=ChangedRange.extendWithRanges(ep,eg),(!!(7&this.flags)||0!=ep.length)&&(this.updateInner(ep,h.startState.doc.length,em),h.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(h,d,_){this.view.viewState.mustMeasureContent=!0,this.updateChildren(h,d,_);let{observer:V}=this.view;V.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let h=n2.chrome||n2.ios?{node:V.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,h),this.flags&=-8,h&&(h.written||V.selectionRange.focusNode!=h.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(h=>h.flags&=-9);let ee=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let h of this.children)h instanceof BlockWidgetView&&h.widget instanceof BlockGapWidget&&ee.push(h.dom);V.updateGaps(ee)}updateChildren(h,d,_){let V=_?_.range.addToSet(h.slice()):h,ee=this.childCursor(d);for(let h=V.length-1;;h--){let d=h>=0?V[h]:null;if(!d)break;let{fromA:er,toA:eo,fromB:ec,toB:eh}=d,ep,ef,em,eg;if(_&&_.range.fromB<eh&&_.range.toB>ec){let h=ContentBuilder.build(this.view.state.doc,ec,_.range.fromB,this.decorations,this.dynamicDecorationMap),d=ContentBuilder.build(this.view.state.doc,_.range.toB,eh,this.decorations,this.dynamicDecorationMap);ef=h.breakAtStart,em=h.openStart,eg=d.openEnd;let V=this.compositionView(_);d.breakAtStart?V.breakAfter=1:d.content.length&&V.merge(V.length,V.length,d.content[0],!1,d.openStart,0)&&(V.breakAfter=d.content[0].breakAfter,d.content.shift()),h.content.length&&V.merge(0,0,h.content[h.content.length-1],!0,0,h.openEnd)&&h.content.pop(),ep=h.content.concat(V).concat(d.content)}else({content:ep,breakAtStart:ef,openStart:em,openEnd:eg}=ContentBuilder.build(this.view.state.doc,ec,eh,this.decorations,this.dynamicDecorationMap));let{i:eO,off:ey}=ee.findPos(eo,1),{i:ev,off:eS}=ee.findPos(er,-1);replaceRange(this,ev,eS,eO,ey,ep,ef,em,eg)}_&&this.fixCompositionDOM(_)}compositionView(h){let d=new TextView(h.text.nodeValue);for(let{deco:_}of(d.flags|=8,h.marks))d=new MarkView(_,[d],d.length);let _=new LineView;return _.append(d,0),_}fixCompositionDOM(h){let fix=(h,d)=>{d.flags|=8|(d.children.some(h=>7&h.flags)?1:0),this.markedForComposition.add(d);let _=ContentView.get(h);_&&_!=d&&(_.dom=null),d.setDOM(h)},d=this.childPos(h.range.fromB,1),_=this.children[d.i];fix(h.line,_);for(let V=h.marks.length-1;V>=-1;V--)d=_.childPos(d.off,1),_=_.children[d.i],fix(V>=0?h.marks[V].node:h.text,_)}updateSelection(h=!1,d=!1){var _;(h||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let V=this.view.root.activeElement,ee=V==this.dom,er=!ee&&hasSelection(this.dom,this.view.observer.selectionRange)&&!(V&&this.dom.contains(V));if(!(ee||d||er))return;let eo=this.forceSelection;this.forceSelection=!1;let ec=this.view.state.selection.main,eh=this.moveToLine(this.domAtPos(ec.anchor)),ep=ec.empty?eh:this.moveToLine(this.domAtPos(ec.head));if(n2.gecko&&ec.empty&&!this.hasComposition&&1==(_=eh).node.nodeType&&_.node.firstChild&&(0==_.offset||"false"==_.node.childNodes[_.offset-1].contentEditable)&&(_.offset==_.node.childNodes.length||"false"==_.node.childNodes[_.offset].contentEditable)){let h=document.createTextNode("");this.view.observer.ignore(()=>eh.node.insertBefore(h,eh.node.childNodes[eh.offset]||null)),eh=ep=new DOMPos(h,0),eo=!0}let ef=this.view.observer.selectionRange;!eo&&ef.focusNode&&(isEquivalentPosition(eh.node,eh.offset,ef.anchorNode,ef.anchorOffset)&&isEquivalentPosition(ep.node,ep.offset,ef.focusNode,ef.focusOffset)||this.suppressWidgetCursorChange(ef,ec))||(this.view.observer.ignore(()=>{n2.android&&n2.chrome&&this.dom.contains(ef.focusNode)&&function(h,d){for(let _=h;_&&_!=d;_=_.assignedSlot||_.parentNode)if(1==_.nodeType&&"false"==_.contentEditable)return!0;return!1}(ef.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let h=getSelection(this.view.root);if(h){if(ec.empty){if(n2.gecko){var d,_;let h=(d=eh.node,_=eh.offset,1!=d.nodeType?0:(_&&"false"==d.childNodes[_-1].contentEditable?1:0)|(_<d.childNodes.length&&"false"==d.childNodes[_].contentEditable?2:0));if(h&&3!=h){let d=nearbyTextNode(eh.node,eh.offset,1==h?1:-1);d&&(eh=new DOMPos(d.node,d.offset))}}h.collapse(eh.node,eh.offset),null!=ec.bidiLevel&&void 0!==h.caretBidiLevel&&(h.caretBidiLevel=ec.bidiLevel)}else if(h.extend){h.collapse(eh.node,eh.offset);try{h.extend(ep.node,ep.offset)}catch(h){}}else{let d=document.createRange();ec.anchor>ec.head&&([eh,ep]=[ep,eh]),d.setEnd(ep.node,ep.offset),d.setStart(eh.node,eh.offset),h.removeAllRanges(),h.addRange(d)}}er&&this.view.root.activeElement==this.dom&&(this.dom.blur(),V&&V.focus())}),this.view.observer.setSelectionRange(eh,ep)),this.impreciseAnchor=eh.precise?null:new DOMPos(ef.anchorNode,ef.anchorOffset),this.impreciseHead=ep.precise?null:new DOMPos(ef.focusNode,ef.focusOffset)}suppressWidgetCursorChange(h,d){return this.hasComposition&&d.empty&&isEquivalentPosition(h.focusNode,h.focusOffset,h.anchorNode,h.anchorOffset)&&this.posFromDOM(h.focusNode,h.focusOffset)==d.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:h}=this,d=h.state.selection.main,_=getSelection(h.root),{anchorNode:V,anchorOffset:ee}=h.observer.selectionRange;if(!_||!d.empty||!d.assoc||!_.modify)return;let er=LineView.find(this,d.head);if(!er)return;let eo=er.posAtStart;if(d.head==eo||d.head==eo+er.length)return;let ec=this.coordsAt(d.head,-1),eh=this.coordsAt(d.head,1);if(!ec||!eh||ec.bottom>eh.top)return;let ep=this.domAtPos(d.head+d.assoc);_.collapse(ep.node,ep.offset),_.modify("move",d.assoc<0?"forward":"backward","lineboundary"),h.observer.readSelectionRange();let ef=h.observer.selectionRange;h.docView.posFromDOM(ef.anchorNode,ef.anchorOffset)!=d.from&&_.collapse(V,ee)}moveToLine(h){let d=this.dom,_;if(h.node!=d)return h;for(let V=h.offset;!_&&V<d.childNodes.length;V++){let h=ContentView.get(d.childNodes[V]);h instanceof LineView&&(_=h.domAtPos(0))}for(let V=h.offset-1;!_&&V>=0;V--){let h=ContentView.get(d.childNodes[V]);h instanceof LineView&&(_=h.domAtPos(h.length))}return _?new DOMPos(_.node,_.offset,!0):h}nearest(h){for(let d=h;d;){let h=ContentView.get(d);if(h&&h.rootView==this)return h;d=d.parentNode}return null}posFromDOM(h,d){let _=this.nearest(h);if(!_)throw RangeError("Trying to find position for a DOM position outside of the document");return _.localPosFromDOM(h,d)+_.posAtStart}domAtPos(h){let{i:d,off:_}=this.childCursor().findPos(h,-1);for(;d<this.children.length-1;){let h=this.children[d];if(_<h.length||h instanceof LineView)break;d++,_=0}return this.children[d].domAtPos(_)}coordsAt(h,d){let _=null,V=0;for(let ee=this.length,er=this.children.length-1;er>=0;er--){let eo=this.children[er],ec=ee-eo.breakAfter,eh=ec-eo.length;if(ec<h)break;eh<=h&&(eh<h||eo.covers(-1))&&(ec>h||eo.covers(1))&&(!_||eo instanceof LineView&&!(_ instanceof LineView&&d>=0))&&(_=eo,V=eh),ee=eh}return _?_.coordsAt(h-V,d):null}coordsForChar(h){let{i:d,off:_}=this.childPos(h,1),V=this.children[d];if(!(V instanceof LineView))return null;for(;V.children.length;){let{i:h,off:d}=V.childPos(_,1);for(;;h++){if(h==V.children.length)return null;if((V=V.children[h]).length)break}_=d}if(!(V instanceof TextView))return null;let ee=findClusterBreak(V.text,_);if(ee==_)return null;let er=textRange(V.dom,_,ee).getClientRects();for(let h=0;h<er.length;h++){let d=er[h];if(h==er.length-1||d.top<d.bottom&&d.left<d.right)return d}return null}measureVisibleLineHeights(h){let d=[],{from:_,to:V}=h,ee=this.view.contentDOM.clientWidth,er=ee>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,eo=-1,ec=this.view.textDirection==n3.LTR;for(let h=0,eh=0;eh<this.children.length;eh++){let ep=this.children[eh],ef=h+ep.length;if(ef>V)break;if(h>=_){let _=ep.dom.getBoundingClientRect();if(d.push(_.height),er){let d=ep.dom.lastChild,V=d?clientRectsFor(d):[];if(V.length){let d=V[V.length-1],er=ec?d.right-_.left:_.right-d.left;er>eo&&(eo=er,this.minWidth=ee,this.minWidthFrom=h,this.minWidthTo=ef)}}}h=ef+ep.breakAfter}return d}textDirectionAt(h){let{i:d}=this.childPos(h,1);return"rtl"==getComputedStyle(this.children[d].dom).direction?n3.RTL:n3.LTR}measureTextSize(){for(let h of this.children)if(h instanceof LineView){let d=h.measureTextSize();if(d)return d}let h=document.createElement("div"),d,_,V;return h.className="cm-line",h.style.width="99999px",h.style.position="absolute",h.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(h);let ee=clientRectsFor(h.firstChild)[0];d=h.getBoundingClientRect().height,_=ee?ee.width/27:7,V=ee?ee.height:d,h.remove()}),{lineHeight:d,charWidth:_,textHeight:V}}childCursor(h=this.length){let d=this.children.length;return d&&(h-=this.children[--d].length),new ChildCursor(this.children,h,d)}computeBlockGapDeco(){let h=[],d=this.view.viewState;for(let _=0,V=0;;V++){let ee=V==d.viewports.length?null:d.viewports[V],er=ee?ee.from-1:this.length;if(er>_){let V=(d.lineBlockAt(er).bottom-d.lineBlockAt(_).top)/this.view.scaleY;h.push(Decoration.replace({widget:new BlockGapWidget(V),block:!0,inclusive:!0,isBlockGap:!0}).range(_,er))}if(!ee)break;_=ee.to+1}return Decoration.set(h)}updateDeco(){let h=this.view.state.facet(rT).map((h,d)=>(this.dynamicDecorationMap[d]="function"==typeof h)?h(this.view):h),d=!1,_=this.view.state.facet(rE).map((h,_)=>{let V="function"==typeof h;return V&&(d=!0),V?h(this.view):h});_.length&&(this.dynamicDecorationMap[h.length]=d,h.push(dist_RangeSet.join(_)));for(let d=h.length;d<h.length+3;d++)this.dynamicDecorationMap[d]=!1;return this.decorations=[...h,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco]}scrollIntoView(h){if(h.isSnapshot){let d=this.view.viewState.lineBlockAt(h.range.head);this.view.scrollDOM.scrollTop=d.top-h.yMargin,this.view.scrollDOM.scrollLeft=h.xMargin;return}let{range:d}=h,_=this.coordsAt(d.head,d.empty?d.assoc:d.head>d.anchor?-1:1),V;if(!_)return;!d.empty&&(V=this.coordsAt(d.anchor,d.anchor>d.head?-1:1))&&(_={left:Math.min(_.left,V.left),top:Math.min(_.top,V.top),right:Math.max(_.right,V.right),bottom:Math.max(_.bottom,V.bottom)});let ee=getScrollMargins(this.view),er={left:_.left-ee.left,top:_.top-ee.top,right:_.right+ee.right,bottom:_.bottom+ee.bottom},{offsetWidth:eo,offsetHeight:ec}=this.view.scrollDOM;!function(h,d,_,V,ee,er,eo,ec){let eh=h.ownerDocument,ep=eh.defaultView||window;for(let ef=h,em=!1;ef&&!em;)if(1==ef.nodeType){let h,eg=ef==eh.body,eO=1,ey=1;if(eg)h={left:0,right:ep.innerWidth,top:0,bottom:ep.innerHeight};else{if(/^(fixed|sticky)$/.test(getComputedStyle(ef).position)&&(em=!0),ef.scrollHeight<=ef.clientHeight&&ef.scrollWidth<=ef.clientWidth){ef=ef.assignedSlot||ef.parentNode;continue}let d=ef.getBoundingClientRect();({scaleX:eO,scaleY:ey}=getScale(ef,d)),h={left:d.left,right:d.left+ef.clientWidth*eO,top:d.top,bottom:d.top+ef.clientHeight*ey}}let ev=0,eS=0;if("nearest"==ee)d.top<h.top?(eS=-(h.top-d.top+eo),_>0&&d.bottom>h.bottom+eS&&(eS=d.bottom-h.bottom+eS+eo)):d.bottom>h.bottom&&(eS=d.bottom-h.bottom+eo,_<0&&d.top-eS<h.top&&(eS=-(h.top+eS-d.top+eo)));else{let V=d.bottom-d.top,er=h.bottom-h.top;eS=("center"==ee&&V<=er?d.top+V/2-er/2:"start"==ee||"center"==ee&&_<0?d.top-eo:d.bottom-er+eo)-h.top}if("nearest"==V?d.left<h.left?(ev=-(h.left-d.left+er),_>0&&d.right>h.right+ev&&(ev=d.right-h.right+ev+er)):d.right>h.right&&(ev=d.right-h.right+er,_<0&&d.left<h.left+ev&&(ev=-(h.left+ev-d.left+er))):ev=("center"==V?d.left+(d.right-d.left)/2-(h.right-h.left)/2:"start"==V==ec?d.left-er:d.right-(h.right-h.left)+er)-h.left,ev||eS){if(eg)ep.scrollBy(ev,eS);else{let h=0,_=0;if(eS){let h=ef.scrollTop;ef.scrollTop+=eS/ey,_=(ef.scrollTop-h)*ey}if(ev){let d=ef.scrollLeft;ef.scrollLeft+=ev/eO,h=(ef.scrollLeft-d)*eO}d={left:d.left-h,top:d.top-_,right:d.right-h,bottom:d.bottom-_},h&&1>Math.abs(h-ev)&&(V="nearest"),_&&1>Math.abs(_-eS)&&(ee="nearest")}}if(eg)break;ef=ef.assignedSlot||ef.parentNode}else if(11==ef.nodeType)ef=ef.host;else break}(this.view.scrollDOM,er,d.head<d.anchor?-1:1,h.x,h.y,Math.max(Math.min(h.xMargin,eo),-eo),Math.max(Math.min(h.yMargin,ec),-ec),this.view.textDirection==n3.LTR)}};let BlockGapWidget=class BlockGapWidget extends WidgetType{constructor(h){super(),this.height=h}toDOM(){let h=document.createElement("div");return h.className="cm-gap",this.updateDOM(h),h}eq(h){return h.height==this.height}updateDOM(h){return h.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}};function findCompositionNode(h,d){let _=h.observer.selectionRange,V=_.focusNode&&nearbyTextNode(_.focusNode,_.focusOffset,0);if(!V)return null;let ee=d-V.offset;return{from:ee,to:ee+V.node.nodeValue.length,node:V.node}}function nearbyTextNode(h,d,_){if(_<=0)for(let _=h,V=d;;){if(3==_.nodeType)return{node:_,offset:V};if(1==_.nodeType&&V>0)V=maxOffset(_=_.childNodes[V-1]);else break}if(_>=0)for(let V=h,ee=d;;){if(3==V.nodeType)return{node:V,offset:ee};if(1==V.nodeType&&ee<V.childNodes.length&&_>=0)V=V.childNodes[ee],ee=0;else break}return null}let rA=class{constructor(){this.changes=[]}compareRange(h,d){addRange(h,d,this.changes)}comparePoint(h,d){addRange(h,d,this.changes)}};function yOverlap(h,d){return h.top<d.bottom-1&&h.bottom>d.top+1}function upTop(h,d){return d<h.top?{top:d,left:h.left,right:h.right,bottom:h.bottom}:h}function upBot(h,d){return d>h.bottom?{top:h.top,left:h.left,right:h.right,bottom:d}:h}function domPosInText(h,d,_){let V=h.nodeValue.length,ee=-1,er=1e9,eo=0;for(let ec=0;ec<V;ec++){let V=textRange(h,ec,ec+1).getClientRects();for(let eh=0;eh<V.length;eh++){let ep=V[eh];if(ep.top==ep.bottom)continue;eo||(eo=d-ep.left);let ef=(ep.top>_?ep.top-_:_-ep.bottom)-1;if(ep.left-1<=d&&ep.right+1>=d&&ef<er){let _=d>=(ep.left+ep.right)/2,V=_;if((n2.chrome||n2.gecko)&&textRange(h,ec).getBoundingClientRect().left==ep.right&&(V=!_),ef<=0)return{node:h,offset:ec+(V?1:0)};ee=ec+(V?1:0),er=ef}}}return{node:h,offset:ee>-1?ee:eo>0?h.nodeValue.length:0}}function posAtCoords(h,d,_,V=-1){var ee,er;let eo=h.contentDOM.getBoundingClientRect(),ec=eo.top+h.viewState.paddingTop,eh,{docHeight:ep}=h.viewState,{x:ef,y:em}=d,eg=em-ec;if(eg<0)return 0;if(eg>ep)return h.state.doc.length;for(let d=h.viewState.heightOracle.textHeight/2,ee=!1;(eh=h.elementAtHeight(eg)).type!=n7.Text;)for(;!((eg=V>0?eh.bottom+d:eh.top-d)>=0)||!(eg<=ep);){if(ee)return _?null:0;ee=!0,V=-V}em=ec+eg;let eO=eh.from;if(eO<h.viewport.from)return 0==h.viewport.from?0:_?null:posAtCoordsImprecise(h,eo,eh,ef,em);if(eO>h.viewport.to)return h.viewport.to==h.state.doc.length?h.state.doc.length:_?null:posAtCoordsImprecise(h,eo,eh,ef,em);let ey=h.dom.ownerDocument,ev=h.root.elementFromPoint?h.root:ey,eS=ev.elementFromPoint(ef,em);eS&&!h.contentDOM.contains(eS)&&(eS=null),!eS&&(ef=Math.max(eo.left+1,Math.min(eo.right-1,ef)),(eS=ev.elementFromPoint(ef,em))&&!h.contentDOM.contains(eS)&&(eS=null));let e_,ew=-1;if(eS&&(null===(ee=h.docView.nearest(eS))||void 0===ee?void 0:ee.isEditable)!=!1){if(ey.caretPositionFromPoint){let h=ey.caretPositionFromPoint(ef,em);h&&({offsetNode:e_,offset:ew}=h)}else if(ey.caretRangeFromPoint){let d=ey.caretRangeFromPoint(ef,em);d&&({startContainer:e_,startOffset:ew}=d,(!h.contentDOM.contains(e_)||n2.safari&&function(h,d,_){let V;if(3!=h.nodeType||d!=(V=h.nodeValue.length))return!1;for(let d=h.nextSibling;d;d=d.nextSibling)if(1!=d.nodeType||"BR"!=d.nodeName)return!1;return textRange(h,V-1,V).getBoundingClientRect().left>_}(e_,ew,ef)||n2.chrome&&function(h,d,_){if(0!=d)return!1;for(let d=h;;){let h=d.parentNode;if(!h||1!=h.nodeType||h.firstChild!=d)return!1;if(h.classList.contains("cm-line"))break;d=h}return _-(1==h.nodeType?h.getBoundingClientRect():textRange(h,0,Math.max(h.nodeValue.length,1)).getBoundingClientRect()).left>5}(e_,ew,ef))&&(e_=void 0))}}if(!e_||!h.docView.dom.contains(e_)){let d=LineView.find(h.docView,eO);if(!d)return eg>eh.top+eh.height/2?eh.to:eh.from;({node:e_,offset:ew}=function domPosAtCoords(h,d,_){let V,ee,er,eo,ec,eh,ep,ef,em=!1;for(let ey=h.firstChild;ey;ey=ey.nextSibling){let h=clientRectsFor(ey);for(let ev=0;ev<h.length;ev++){var eg,eO;let eS=h[ev];eh&&yOverlap(eh,eS)&&(eS=upTop(upBot(eS,eh.bottom),eh.top));let e_=(eg=eS).left>d?eg.left-d:Math.max(0,d-eg.right),ew=(eO=eS).top>_?eO.top-_:Math.max(0,_-eO.bottom);if(0==e_&&0==ew)return 3==ey.nodeType?domPosInText(ey,d,_):domPosAtCoords(ey,d,_);if(!ec||ef>ew||ef==ew&&ep>e_){ec=ey,eh=eS,ep=e_,ef=ew;let V=ew?_<eS.top?-1:1:e_?d<eS.left?-1:1:0;em=!V||(V>0?ev<h.length-1:ev>0)}0==e_?_>eS.bottom&&(!er||er.bottom<eS.bottom)?(V=ey,er=eS):_<eS.top&&(!eo||eo.top>eS.top)&&(ee=ey,eo=eS):er&&yOverlap(er,eS)?er=upBot(er,eS.bottom):eo&&yOverlap(eo,eS)&&(eo=upTop(eo,eS.top))}}if(er&&er.bottom>=_?(ec=V,eh=er):eo&&eo.top<=_&&(ec=ee,eh=eo),!ec)return{node:h,offset:0};let ey=Math.max(eh.left,Math.min(eh.right,d));if(3==ec.nodeType)return domPosInText(ec,ey,_);if(em&&"false"!=ec.contentEditable)return domPosAtCoords(ec,ey,_);let ev=Array.prototype.indexOf.call(h.childNodes,ec)+(d>=(eh.left+eh.right)/2?1:0);return{node:h,offset:ev}}(d.dom,ef,em))}let ex=h.docView.nearest(e_);if(!ex)return null;if(!ex.isWidget||(null===(er=ex.dom)||void 0===er?void 0:er.nodeType)!=1)return ex.localPosFromDOM(e_,ew)+ex.posAtStart;{let h=ex.dom.getBoundingClientRect();return d.y<h.top||d.y<=h.bottom&&d.x<=(h.left+h.right)/2?ex.posAtStart:ex.posAtEnd}}function posAtCoordsImprecise(h,d,_,V,ee){let er=Math.round((V-d.left)*h.defaultCharacterWidth);if(h.lineWrapping&&_.height>1.5*h.defaultLineHeight){let d=h.viewState.heightOracle.textHeight;er+=Math.floor((ee-_.top-(h.defaultLineHeight-d)*.5)/d)*h.viewState.heightOracle.lineLength}let eo=h.state.sliceDoc(_.from,_.to);return _.from+function(h,d,_,V){for(let V=0,ee=0;;){if(ee>=d)return V;if(V==h.length)break;ee+=9==h.charCodeAt(V)?_-ee%_:1,V=findClusterBreak(h,V)}return h.length}(eo,er,h.state.tabSize)}function blockAt(h,d){let _=h.lineBlockAt(d);if(Array.isArray(_.type)){for(let h of _.type)if(h.to>d||h.to==d&&(h.to==_.to||h.type==n7.Text))return h}return _}function moveByChar(h,d,_,V){let ee=h.state.doc.lineAt(d.head),er=h.bidiSpans(ee),eo=h.textDirectionAt(ee.from);for(let ec=d,eh=null;;){let d=function(h,d,_,V,ee){var er;let eo=V.head-h.from,ec=BidiSpan.find(d,eo,null!==(er=V.bidiLevel)&&void 0!==er?er:-1,V.assoc),eh=d[ec],ep=eh.side(ee,_);if(eo==ep){let h=ec+=ee?1:-1;if(h<0||h>=d.length)return null;eo=(eh=d[ec=h]).side(!ee,_),ep=eh.side(ee,_)}let ef=findClusterBreak(h.text,eo,eh.forward(ee,_));(ef<eh.from||ef>eh.to)&&(ef=ep),ro=h.text.slice(Math.min(eo,ef),Math.max(eo,ef));let em=ec==(ee?d.length-1:0)?null:d[ec+(ee?1:-1)];return em&&ef==ep&&em.level+(ee?0:1)<eh.level?dist_EditorSelection.cursor(em.side(!ee,_)+h.from,em.forward(ee,_)?1:-1,em.level):dist_EditorSelection.cursor(ef+h.from,eh.forward(ee,_)?-1:1,eh.level)}(ee,er,eo,ec,_),ep=ro;if(!d){if(ee.number==(_?h.state.doc.lines:1))return ec;ep="\n",ee=h.state.doc.line(ee.number+(_?1:-1)),er=h.bidiSpans(ee),d=h.visualLineSide(ee,!_)}if(eh){if(!eh(ep))return ec}else{if(!V)return d;eh=V(ep)}ec=d}}function skipAtomicRanges(h,d,_){for(;;){let V=0;for(let ee of h)ee.between(d-1,d+1,(h,ee,er)=>{if(d>h&&d<ee){let er=V||_||(d-h<ee-d?-1:1);d=er<0?h:ee,V=er}});if(!V)return d}}function skipAtoms(h,d,_){let V=skipAtomicRanges(h.state.facet(rC).map(d=>d(h)),_.from,d.head>_.from?-1:1);return V==_.from?_:dist_EditorSelection.cursor(V,V<_.from?1:-1)}let InputState=class InputState{setSelectionOrigin(h){this.lastSelectionOrigin=h,this.lastSelectionTime=Date.now()}constructor(h){var d;this.view=h,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastEscPress=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=h.hasFocus,n2.safari&&h.contentDOM.addEventListener("input",()=>null),n2.gecko&&(d=h.contentDOM.ownerDocument,rU.has(d)||(rU.add(d),d.addEventListener("copy",()=>{}),d.addEventListener("cut",()=>{})))}handleEvent(h){!(!function(h,d){if(!d.bubbles)return!0;if(d.defaultPrevented)return!1;for(let _=d.target,V;_!=h.contentDOM;_=_.parentNode)if(!_||11==_.nodeType||(V=ContentView.get(_))&&V.ignoreEvent(d))return!1;return!0}(this.view,h)||this.ignoreDuringComposition(h))&&("keydown"==h.type&&this.keydown(h)||this.runHandlers(h.type,h))}runHandlers(h,d){let _=this.handlers[h];if(_){for(let h of _.observers)h(this.view,d);for(let h of _.handlers){if(d.defaultPrevented)break;if(h(this.view,d)){d.preventDefault();break}}}}ensureHandlers(h){let d=function(h){let d=Object.create(null);function record(h){return d[h]||(d[h]={observers:[],handlers:[]})}for(let d of h){let h=d.spec;if(h&&h.domEventHandlers)for(let _ in h.domEventHandlers){let V=h.domEventHandlers[_];V&&record(_).handlers.push(bindHandler(d.value,V))}if(h&&h.domEventObservers)for(let _ in h.domEventObservers){let V=h.domEventObservers[_];V&&record(_).observers.push(bindHandler(d.value,V))}}for(let h in rQ)record(h).handlers.push(rQ[h]);for(let h in rD)record(h).observers.push(rD[h]);return d}(h),_=this.handlers,V=this.view.contentDOM;for(let h in d)if("scroll"!=h){let ee=!d[h].handlers.length,er=_[h];er&&!er.handlers.length!=ee&&(V.removeEventListener(h,this.handleEvent),er=null),er||V.addEventListener(h,this.handleEvent,{passive:ee})}for(let h in _)"scroll"==h||d[h]||V.removeEventListener(h,this.handleEvent);this.handlers=d}keydown(h){let d;return this.lastKeyCode=h.keyCode,this.lastKeyTime=Date.now(),!!(9==h.keyCode&&Date.now()<this.lastEscPress+2e3)||((27!=h.keyCode&&0>rM.indexOf(h.keyCode)&&(this.view.inputState.lastEscPress=0),n2.android&&n2.chrome&&!h.synthetic&&(13==h.keyCode||8==h.keyCode))?(this.view.observer.delayAndroidKey(h.key,h.keyCode),!0):n2.ios&&!h.synthetic&&!h.altKey&&!h.metaKey&&((d=r$.find(d=>d.keyCode==h.keyCode))&&!h.ctrlKey||rN.indexOf(h.key)>-1&&h.ctrlKey&&!h.shiftKey)?(this.pendingIOSKey=d||h,setTimeout(()=>this.flushIOSKey(),250),!0):(229!=h.keyCode&&this.view.observer.forceFlush(),!1))}flushIOSKey(){let h=this.pendingIOSKey;return!!h&&(this.pendingIOSKey=void 0,dispatchKey(this.view.contentDOM,h.key,h.keyCode))}ignoreDuringComposition(h){return!!/^key/.test(h.type)&&(this.composing>0||!!(n2.safari&&!n2.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(h){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=h}update(h){this.mouseSelection&&this.mouseSelection.update(h),this.draggedContent&&h.docChanged&&(this.draggedContent=this.draggedContent.map(h.changes)),h.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}};function bindHandler(h,d){return(_,V)=>{try{return d.call(h,V,_)}catch(h){logException(_.state,h)}}}let r$=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],rN="dthko",rM=[16,17,18,20,91,92,224,225];function dragScrollSpeed(h){return .7*Math.max(0,h)+8}let MouseSelection=class MouseSelection{constructor(h,d,_,V){let ee;this.view=h,this.startEvent=d,this.style=_,this.mustSelect=V,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=d,this.scrollParent=function(h){let d=h.ownerDocument;for(let _=h.parentNode;_&&_!=d.body;)if(1==_.nodeType){if(_.scrollHeight>_.clientHeight||_.scrollWidth>_.clientWidth)return _;_=_.assignedSlot||_.parentNode}else if(11==_.nodeType)_=_.host;else break;return null}(h.contentDOM),this.atoms=h.state.facet(rC).map(d=>d(h));let er=h.contentDOM.ownerDocument;er.addEventListener("mousemove",this.move=this.move.bind(this)),er.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=d.shiftKey,this.multiple=h.state.facet(dist_EditorState.allowMultipleSelections)&&((ee=h.state.facet(ra)).length?ee[0](d):n2.mac?d.metaKey:d.ctrlKey),this.dragging=!!function(h,d){let{main:_}=h.state.selection;if(_.empty)return!1;let V=getSelection(h.root);if(!V||0==V.rangeCount)return!0;let ee=V.getRangeAt(0).getClientRects();for(let h=0;h<ee.length;h++){let _=ee[h];if(_.left<=d.clientX&&_.right>=d.clientX&&_.top<=d.clientY&&_.bottom>=d.clientY)return!0}return!1}(h,d)&&1==getClickType(d)&&null}start(h){!1===this.dragging&&this.select(h)}move(h){var d,_;if(0==h.buttons)return this.destroy();if(this.dragging||null==this.dragging&&10>Math.max(Math.abs((_=this.startEvent).clientX-h.clientX),Math.abs(_.clientY-h.clientY)))return;this.select(this.lastEvent=h);let V=0,ee=0,er=(null===(d=this.scrollParent)||void 0===d?void 0:d.getBoundingClientRect())||{left:0,top:0,right:this.view.win.innerWidth,bottom:this.view.win.innerHeight},eo=getScrollMargins(this.view);h.clientX-eo.left<=er.left+6?V=-dragScrollSpeed(er.left-h.clientX):h.clientX+eo.right>=er.right-6&&(V=dragScrollSpeed(h.clientX-er.right)),h.clientY-eo.top<=er.top+6?ee=-dragScrollSpeed(er.top-h.clientY):h.clientY+eo.bottom>=er.bottom-6&&(ee=dragScrollSpeed(h.clientY-er.bottom)),this.setScrollSpeed(V,ee)}up(h){null==this.dragging&&this.select(this.lastEvent),this.dragging||h.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let h=this.view.contentDOM.ownerDocument;h.removeEventListener("mousemove",this.move),h.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(h,d){this.scrollSpeed={x:h,y:d},h||d?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){this.scrollParent?(this.scrollParent.scrollLeft+=this.scrollSpeed.x,this.scrollParent.scrollTop+=this.scrollSpeed.y):this.view.win.scrollBy(this.scrollSpeed.x,this.scrollSpeed.y),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(h){let d=null;for(let _=0;_<h.ranges.length;_++){let V=h.ranges[_],ee=null;if(V.empty){let h=skipAtomicRanges(this.atoms,V.from,0);h!=V.from&&(ee=dist_EditorSelection.cursor(h,-1))}else{let h=skipAtomicRanges(this.atoms,V.from,-1),d=skipAtomicRanges(this.atoms,V.to,1);(h!=V.from||d!=V.to)&&(ee=dist_EditorSelection.range(V.from==V.anchor?h:d,V.from==V.head?h:d))}ee&&(d||(d=h.ranges.slice()),d[_]=ee)}return d?dist_EditorSelection.create(d,h.mainIndex):h}select(h){let{view:d}=this,_=this.skipAtoms(this.style.get(h,this.extend,this.multiple));(this.mustSelect||!_.eq(d.state.selection,!1===this.dragging))&&this.view.dispatch({selection:_,userEvent:"select.pointer"}),this.mustSelect=!1}update(h){this.style.update(h)&&setTimeout(()=>this.select(this.lastEvent),20)}};let rQ=Object.create(null),rD=Object.create(null),rj=n2.ie&&n2.ie_version<15||n2.ios&&n2.webkit_version<604;function doPaste(h,d){let{state:_}=h,V,ee=1,er=_.toText(d),eo=er.lines==_.selection.ranges.length;if(null!=rB&&_.selection.ranges.every(h=>h.empty)&&rB==er.toString()){let h=-1;V=_.changeByRange(V=>{let ec=_.doc.lineAt(V.from);if(ec.from==h)return{range:V};h=ec.from;let eh=_.toText((eo?er.line(ee++).text:d)+_.lineBreak);return{changes:{from:ec.from,insert:eh},range:dist_EditorSelection.cursor(V.from+eh.length)}})}else V=eo?_.changeByRange(h=>{let d=er.line(ee++);return{changes:{from:h.from,to:h.to,insert:d.text},range:dist_EditorSelection.cursor(h.from+d.length)}}):_.replaceSelection(er);h.dispatch(V,{userEvent:"input.paste",scrollIntoView:!0})}function rangeForClick(h,d,_,V){if(1==V)return dist_EditorSelection.cursor(d,_);if(2==V)return function(h,d,_=1){let V=h.charCategorizer(d),ee=h.doc.lineAt(d),er=d-ee.from;if(0==ee.length)return dist_EditorSelection.cursor(d);0==er?_=1:er==ee.length&&(_=-1);let eo=er,ec=er;_<0?eo=findClusterBreak(ee.text,er,!1):ec=findClusterBreak(ee.text,er);let eh=V(ee.text.slice(eo,ec));for(;eo>0;){let h=findClusterBreak(ee.text,eo,!1);if(V(ee.text.slice(h,eo))!=eh)break;eo=h}for(;ec<ee.length;){let h=findClusterBreak(ee.text,ec);if(V(ee.text.slice(ec,h))!=eh)break;ec=h}return dist_EditorSelection.range(eo+ee.from,ec+ee.from)}(h.state,d,_);{let _=LineView.find(h.docView,d),V=h.state.doc.lineAt(_?_.posAtEnd:d),ee=_?_.posAtStart:V.from,er=_?_.posAtEnd:V.to;return er<h.state.doc.length&&er==V.to&&er++,dist_EditorSelection.range(ee,er)}}rD.scroll=h=>{h.inputState.lastScrollTop=h.scrollDOM.scrollTop,h.inputState.lastScrollLeft=h.scrollDOM.scrollLeft},rQ.keydown=(h,d)=>(h.inputState.setSelectionOrigin("select"),27==d.keyCode&&(h.inputState.lastEscPress=Date.now()),!1),rD.touchstart=(h,d)=>{h.inputState.lastTouchTime=Date.now(),h.inputState.setSelectionOrigin("select.pointer")},rD.touchmove=h=>{h.inputState.setSelectionOrigin("select.pointer")},rQ.mousedown=(h,d)=>{let _,V,ee;if(h.observer.flush(),h.inputState.lastTouchTime>Date.now()-2e3)return!1;let er=null;for(let _ of h.state.facet(ru))if(er=_(h,d))break;if(er||0!=d.button||(_=queryPos(h,d),V=getClickType(d),ee=h.state.selection,er={update(h){h.docChanged&&(_.pos=h.changes.mapPos(_.pos),ee=ee.map(h.changes))},get(d,er,eo){let ec=queryPos(h,d),eh,ep=rangeForClick(h,ec.pos,ec.bias,V);if(_.pos!=ec.pos&&!er){let d=rangeForClick(h,_.pos,_.bias,V),ee=Math.min(d.from,ep.from),er=Math.max(d.to,ep.to);ep=ee<ep.from?dist_EditorSelection.range(ee,er):dist_EditorSelection.range(er,ee)}return er?ee.replaceRange(ee.main.extend(ep.from,ep.to)):eo&&1==V&&ee.ranges.length>1&&(eh=function(h,d){for(let _=0;_<h.ranges.length;_++){let{from:V,to:ee}=h.ranges[_];if(V<=d&&ee>=d)return dist_EditorSelection.create(h.ranges.slice(0,_).concat(h.ranges.slice(_+1)),h.mainIndex==_?0:h.mainIndex-(h.mainIndex>_?1:0))}return null}(ee,ec.pos))?eh:eo?ee.addRange(ep):dist_EditorSelection.create([ep])}}),er){let _=!h.hasFocus;h.inputState.startMouseSelection(new MouseSelection(h,d,er,_)),_&&h.observer.ignore(()=>focusPreventScroll(h.contentDOM));let V=h.inputState.mouseSelection;if(V)return V.start(d),!1===V.dragging}return!1};let insideY=(h,d)=>h>=d.top&&h<=d.bottom,inside=(h,d,_)=>insideY(d,_)&&h>=_.left&&h<=_.right;function queryPos(h,d){let _=h.posAtCoords({x:d.clientX,y:d.clientY},!1);return{pos:_,bias:function(h,d,_,V){let ee=LineView.find(h.docView,d);if(!ee)return 1;let er=d-ee.posAtStart;if(0==er)return 1;if(er==ee.length)return -1;let eo=ee.coordsAt(er,-1);if(eo&&inside(_,V,eo))return -1;let ec=ee.coordsAt(er,1);return ec&&inside(_,V,ec)?1:eo&&insideY(V,eo)?-1:1}(h,_,d.clientX,d.clientY)}}let rL=n2.ie&&n2.ie_version<=11,rF=null,rZ=0,rV=0;function getClickType(h){if(!rL)return h.detail;let d=rF,_=rV;return rF=h,rV=Date.now(),rZ=!d||_>Date.now()-400&&2>Math.abs(d.clientX-h.clientX)&&2>Math.abs(d.clientY-h.clientY)?(rZ+1)%3:1}function dropText(h,d,_,V){let ee;if(!_)return;let er=h.posAtCoords({x:d.clientX,y:d.clientY},!1),{draggedContent:eo}=h.inputState,ec=V&&eo&&((ee=h.state.facet(rl)).length?ee[0](d):n2.mac?!d.altKey:!d.ctrlKey)?{from:eo.from,to:eo.to}:null,eh={from:er,insert:_},ep=h.state.changes(ec?[ec,eh]:eh);h.focus(),h.dispatch({changes:ep,selection:{anchor:ep.mapPos(er,-1),head:ep.mapPos(er,1)},userEvent:ec?"move.drop":"input.drop"}),h.inputState.draggedContent=null}rQ.dragstart=(h,d)=>{let{selection:{main:_}}=h.state;if(d.target.draggable){let V=h.docView.nearest(d.target);if(V&&V.isWidget){let h=V.posAtStart,d=h+V.length;(h>=_.to||d<=_.from)&&(_=dist_EditorSelection.range(h,d))}}let{inputState:V}=h;return V.mouseSelection&&(V.mouseSelection.dragging=!0),V.draggedContent=_,d.dataTransfer&&(d.dataTransfer.setData("Text",h.state.sliceDoc(_.from,_.to)),d.dataTransfer.effectAllowed="copyMove"),!1},rQ.dragend=h=>(h.inputState.draggedContent=null,!1),rQ.drop=(h,d)=>{if(!d.dataTransfer)return!1;if(h.state.readOnly)return!0;let _=d.dataTransfer.files;if(_&&_.length){let V=Array(_.length),ee=0,finishFile=()=>{++ee==_.length&&dropText(h,d,V.filter(h=>null!=h).join(h.state.lineBreak),!1)};for(let h=0;h<_.length;h++){let d=new FileReader;d.onerror=finishFile,d.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(d.result)||(V[h]=d.result),finishFile()},d.readAsText(_[h])}return!0}{let _=d.dataTransfer.getData("Text");if(_)return dropText(h,d,_,!0),!0}return!1},rQ.paste=(h,d)=>{if(h.state.readOnly)return!0;h.observer.flush();let _=rj?null:d.clipboardData;return _?(doPaste(h,_.getData("text/plain")||_.getData("text/uri-text")),!0):(function(h){let d=h.dom.parentNode;if(!d)return;let _=d.appendChild(document.createElement("textarea"));_.style.cssText="position: fixed; left: -10000px; top: 10px",_.focus(),setTimeout(()=>{h.focus(),_.remove(),doPaste(h,_.value)},50)}(h),!1)};let rB=null;rQ.copy=rQ.cut=(h,d)=>{let{text:_,ranges:V,linewise:ee}=function(h){let d=[],_=[],V=!1;for(let V of h.selection.ranges)V.empty||(d.push(h.sliceDoc(V.from,V.to)),_.push(V));if(!d.length){let ee=-1;for(let{from:V}of h.selection.ranges){let er=h.doc.lineAt(V);er.number>ee&&(d.push(er.text),_.push({from:er.from,to:Math.min(h.doc.length,er.to+1)})),ee=er.number}V=!0}return{text:d.join(h.lineBreak),ranges:_,linewise:V}}(h.state);if(!_&&!ee)return!1;rB=ee?_:null,"cut"!=d.type||h.state.readOnly||h.dispatch({changes:V,scrollIntoView:!0,userEvent:"delete.cut"});let er=rj?null:d.clipboardData;return er?(er.clearData(),er.setData("text/plain",_),!0):(!function(h,d){let _=h.dom.parentNode;if(!_)return;let V=_.appendChild(document.createElement("textarea"));V.style.cssText="position: fixed; left: -10000px; top: 10px",V.value=d,V.focus(),V.selectionEnd=d.length,V.selectionStart=0,setTimeout(()=>{V.remove(),h.focus()},50)}(h,_),!1)};let rW=Annotation.define();function focusChangeTransaction(h,d){let _=[];for(let V of h.facet(rO)){let ee=V(h,d);ee&&_.push(ee)}return _?h.update({effects:_,annotations:rW.of(!0)}):null}function updateForFocusChange(h){setTimeout(()=>{let d=h.hasFocus;if(d!=h.inputState.notifiedFocused){let _=focusChangeTransaction(h.state,d);_?h.dispatch(_):h.update([])}},10)}rD.focus=h=>{h.inputState.lastFocusTime=Date.now(),!h.scrollDOM.scrollTop&&(h.inputState.lastScrollTop||h.inputState.lastScrollLeft)&&(h.scrollDOM.scrollTop=h.inputState.lastScrollTop,h.scrollDOM.scrollLeft=h.inputState.lastScrollLeft),updateForFocusChange(h)},rD.blur=h=>{h.observer.clearSelectionRange(),updateForFocusChange(h)},rD.compositionstart=rD.compositionupdate=h=>{null==h.inputState.compositionFirstChange&&(h.inputState.compositionFirstChange=!0),h.inputState.composing<0&&(h.inputState.composing=0)},rD.compositionend=h=>{h.inputState.composing=-1,h.inputState.compositionEndedAt=Date.now(),h.inputState.compositionPendingKey=!0,h.inputState.compositionPendingChange=h.observer.pendingRecords().length>0,h.inputState.compositionFirstChange=null,n2.chrome&&n2.android?h.observer.flushSoon():h.inputState.compositionPendingChange?Promise.resolve().then(()=>h.observer.flush()):setTimeout(()=>{h.inputState.composing<0&&h.docView.hasComposition&&h.update([])},50)},rD.contextmenu=h=>{h.inputState.lastContextMenu=Date.now()},rQ.beforeinput=(h,d)=>{var _;let V;if(n2.chrome&&n2.android&&(V=r$.find(h=>h.inputType==d.inputType))&&(h.observer.delayAndroidKey(V.key,V.keyCode),"Backspace"==V.key||"Delete"==V.key)){let d=(null===(_=window.visualViewport)||void 0===_?void 0:_.height)||0;setTimeout(()=>{var _;((null===(_=window.visualViewport)||void 0===_?void 0:_.height)||0)>d+10&&h.hasFocus&&(h.contentDOM.blur(),h.focus())},100)}return!1};let rU=new Set,rz=["pre-wrap","normal","pre-line","break-spaces"];let HeightOracle=class HeightOracle{constructor(h){this.lineWrapping=h,this.doc=Text.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30,this.heightChanged=!1}heightForGap(h,d){let _=this.doc.lineAt(d).number-this.doc.lineAt(h).number+1;return this.lineWrapping&&(_+=Math.max(0,Math.ceil((d-h-_*this.lineLength*.5)/this.lineLength))),this.lineHeight*_}heightForLine(h){return this.lineWrapping?(1+Math.max(0,Math.ceil((h-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(h){return this.doc=h,this}mustRefreshForWrapping(h){return rz.indexOf(h)>-1!=this.lineWrapping}mustRefreshForHeights(h){let d=!1;for(let _=0;_<h.length;_++){let V=h[_];V<0?_++:this.heightSamples[Math.floor(10*V)]||(d=!0,this.heightSamples[Math.floor(10*V)]=!0)}return d}refresh(h,d,_,V,ee,er){let eo=rz.indexOf(h)>-1,ec=Math.round(d)!=Math.round(this.lineHeight)||this.lineWrapping!=eo;if(this.lineWrapping=eo,this.lineHeight=d,this.charWidth=_,this.textHeight=V,this.lineLength=ee,ec){this.heightSamples={};for(let h=0;h<er.length;h++){let d=er[h];d<0?h++:this.heightSamples[Math.floor(10*d)]=!0}}return ec}};let MeasuredHeights=class MeasuredHeights{constructor(h,d){this.from=h,this.heights=d,this.index=0}get more(){return this.index<this.heights.length}};let BlockInfo=class BlockInfo{constructor(h,d,_,V,ee){this.from=h,this.length=d,this.top=_,this.height=V,this._content=ee}get type(){return"number"==typeof this._content?n7.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof PointDecoration?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(h){let d=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(h._content)?h._content:[h]);return new BlockInfo(this.from,this.length+h.length,this.top,this.height+h.height,d)}};var rq=((ep=rq||(rq={}))[ep.ByPos=0]="ByPos",ep[ep.ByHeight=1]="ByHeight",ep[ep.ByPosNoHeight=2]="ByPosNoHeight",ep);let HeightMap=class HeightMap{constructor(h,d,_=2){this.length=h,this.height=d,this.flags=_}get outdated(){return(2&this.flags)>0}set outdated(h){this.flags=(h?2:0)|-3&this.flags}setHeight(h,d){this.height!=d&&(Math.abs(this.height-d)>.001&&(h.heightChanged=!0),this.height=d)}replace(h,d,_){return HeightMap.of(_)}decomposeLeft(h,d){d.push(this)}decomposeRight(h,d){d.push(this)}applyChanges(h,d,_,V){let ee=this,er=_.doc;for(let eo=V.length-1;eo>=0;eo--){let{fromA:ec,toA:eh,fromB:ep,toB:ef}=V[eo],em=ee.lineAt(ec,rq.ByPosNoHeight,_.setDoc(d),0,0),eg=em.to>=eh?em:ee.lineAt(eh,rq.ByPosNoHeight,_,0,0);for(ef+=eg.to-eh,eh=eg.to;eo>0&&em.from<=V[eo-1].toA;)ec=V[eo-1].fromA,ep=V[eo-1].fromB,eo--,ec<em.from&&(em=ee.lineAt(ec,rq.ByPosNoHeight,_,0,0));ep+=em.from-ec,ec=em.from;let eO=NodeBuilder.build(_.setDoc(er),h,ep,ef);ee=ee.replace(ec,eh,eO)}return ee.updateHeight(_,0)}static empty(){return new HeightMapText(0,0)}static of(h){if(1==h.length)return h[0];let d=0,_=h.length,V=0,ee=0;for(;;)if(d==_){if(V>2*ee){let ee=h[d-1];ee.break?h.splice(--d,1,ee.left,null,ee.right):h.splice(--d,1,ee.left,ee.right),_+=1+ee.break,V-=ee.size}else if(ee>2*V){let d=h[_];d.break?h.splice(_,1,d.left,null,d.right):h.splice(_,1,d.left,d.right),_+=2+d.break,ee-=d.size}else break}else if(V<ee){let _=h[d++];_&&(V+=_.size)}else{let d=h[--_];d&&(ee+=d.size)}let er=0;return null==h[d-1]?(er=1,d--):null==h[d]&&(er=1,_++),new HeightMapBranch(HeightMap.of(h.slice(0,d)),er,HeightMap.of(h.slice(_)))}};HeightMap.prototype.size=1;let HeightMapBlock=class HeightMapBlock extends HeightMap{constructor(h,d,_){super(h,d),this.deco=_}blockAt(h,d,_,V){return new BlockInfo(V,this.length,_,this.height,this.deco||0)}lineAt(h,d,_,V,ee){return this.blockAt(0,_,V,ee)}forEachLine(h,d,_,V,ee,er){h<=ee+this.length&&d>=ee&&er(this.blockAt(0,_,V,ee))}updateHeight(h,d=0,_=!1,V){return V&&V.from<=d&&V.more&&this.setHeight(h,V.heights[V.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}};let HeightMapText=class HeightMapText extends HeightMapBlock{constructor(h,d){super(h,d,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(h,d,_,V){return new BlockInfo(V,this.length,_,this.height,this.breaks)}replace(h,d,_){let V=_[0];return 1==_.length&&(V instanceof HeightMapText||V instanceof HeightMapGap&&4&V.flags)&&10>Math.abs(this.length-V.length)?(V instanceof HeightMapGap?V=new HeightMapText(V.length,this.height):V.height=this.height,this.outdated||(V.outdated=!1),V):HeightMap.of(_)}updateHeight(h,d=0,_=!1,V){return V&&V.from<=d&&V.more?this.setHeight(h,V.heights[V.index++]):(_||this.outdated)&&this.setHeight(h,Math.max(this.widgetHeight,h.heightForLine(this.length-this.collapsed))+this.breaks*h.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}};let HeightMapGap=class HeightMapGap extends HeightMap{constructor(h){super(h,0)}heightMetrics(h,d){let _=h.doc.lineAt(d).number,V=h.doc.lineAt(d+this.length).number,ee=V-_+1,er,eo=0;if(h.lineWrapping){let d=Math.min(this.height,h.lineHeight*ee);er=d/ee,this.length>ee+1&&(eo=(this.height-d)/(this.length-ee-1))}else er=this.height/ee;return{firstLine:_,lastLine:V,perLine:er,perChar:eo}}blockAt(h,d,_,V){let{firstLine:ee,lastLine:er,perLine:eo,perChar:ec}=this.heightMetrics(d,V);if(d.lineWrapping){let ee=V+Math.round(Math.max(0,Math.min(1,(h-_)/this.height))*this.length),er=d.doc.lineAt(ee),eh=eo+er.length*ec,ep=Math.max(_,h-eh/2);return new BlockInfo(er.from,er.length,ep,eh,0)}{let V=Math.max(0,Math.min(er-ee,Math.floor((h-_)/eo))),{from:ec,length:eh}=d.doc.line(ee+V);return new BlockInfo(ec,eh,_+eo*V,eo,0)}}lineAt(h,d,_,V,ee){if(d==rq.ByHeight)return this.blockAt(h,_,V,ee);if(d==rq.ByPosNoHeight){let{from:d,to:V}=_.doc.lineAt(h);return new BlockInfo(d,V-d,0,0,0)}let{firstLine:er,perLine:eo,perChar:ec}=this.heightMetrics(_,ee),eh=_.doc.lineAt(h),ep=eo+eh.length*ec,ef=eh.number-er,em=V+eo*ef+ec*(eh.from-ee-ef);return new BlockInfo(eh.from,eh.length,Math.max(V,Math.min(em,V+this.height-ep)),ep,0)}forEachLine(h,d,_,V,ee,er){h=Math.max(h,ee),d=Math.min(d,ee+this.length);let{firstLine:eo,perLine:ec,perChar:eh}=this.heightMetrics(_,ee);for(let ep=h,ef=V;ep<=d;){let d=_.doc.lineAt(ep);if(ep==h){let _=d.number-eo;ef+=ec*_+eh*(h-ee-_)}let V=ec+eh*d.length;er(new BlockInfo(d.from,d.length,ef,V,0)),ef+=V,ep=d.to+1}}replace(h,d,_){let V=this.length-d;if(V>0){let h=_[_.length-1];h instanceof HeightMapGap?_[_.length-1]=new HeightMapGap(h.length+V):_.push(null,new HeightMapGap(V-1))}if(h>0){let d=_[0];d instanceof HeightMapGap?_[0]=new HeightMapGap(h+d.length):_.unshift(new HeightMapGap(h-1),null)}return HeightMap.of(_)}decomposeLeft(h,d){d.push(new HeightMapGap(h-1),null)}decomposeRight(h,d){d.push(null,new HeightMapGap(this.length-h-1))}updateHeight(h,d=0,_=!1,V){let ee=d+this.length;if(V&&V.from<=d+this.length&&V.more){let _=[],er=Math.max(d,V.from),eo=-1;for(V.from>d&&_.push(new HeightMapGap(V.from-d-1).updateHeight(h,d));er<=ee&&V.more;){let d=h.doc.lineAt(er).length;_.length&&_.push(null);let ee=V.heights[V.index++];-1==eo?eo=ee:Math.abs(ee-eo)>=.001&&(eo=-2);let ec=new HeightMapText(d,ee);ec.outdated=!1,_.push(ec),er+=d+1}er<=ee&&_.push(null,new HeightMapGap(ee-er).updateHeight(h,er));let ec=HeightMap.of(_);return(eo<0||Math.abs(ec.height-this.height)>=.001||Math.abs(eo-this.heightMetrics(h,d).perLine)>=.001)&&(h.heightChanged=!0),ec}return(_||this.outdated)&&(this.setHeight(h,h.heightForGap(d,d+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}};let HeightMapBranch=class HeightMapBranch extends HeightMap{constructor(h,d,_){super(h.length+d+_.length,h.height+_.height,d|(h.outdated||_.outdated?2:0)),this.left=h,this.right=_,this.size=h.size+_.size}get break(){return 1&this.flags}blockAt(h,d,_,V){let ee=_+this.left.height;return h<ee?this.left.blockAt(h,d,_,V):this.right.blockAt(h,d,ee,V+this.left.length+this.break)}lineAt(h,d,_,V,ee){let er=V+this.left.height,eo=ee+this.left.length+this.break,ec=d==rq.ByHeight?h<er:h<eo,eh=ec?this.left.lineAt(h,d,_,V,ee):this.right.lineAt(h,d,_,er,eo);if(this.break||(ec?eh.to<eo:eh.from>eo))return eh;let ep=d==rq.ByPosNoHeight?rq.ByPosNoHeight:rq.ByPos;return ec?eh.join(this.right.lineAt(eo,ep,_,er,eo)):this.left.lineAt(eo,ep,_,V,ee).join(eh)}forEachLine(h,d,_,V,ee,er){let eo=V+this.left.height,ec=ee+this.left.length+this.break;if(this.break)h<ec&&this.left.forEachLine(h,d,_,V,ee,er),d>=ec&&this.right.forEachLine(h,d,_,eo,ec,er);else{let eh=this.lineAt(ec,rq.ByPos,_,V,ee);h<eh.from&&this.left.forEachLine(h,eh.from-1,_,V,ee,er),eh.to>=h&&eh.from<=d&&er(eh),d>eh.to&&this.right.forEachLine(eh.to+1,d,_,eo,ec,er)}}replace(h,d,_){let V=this.left.length+this.break;if(d<V)return this.balanced(this.left.replace(h,d,_),this.right);if(h>this.left.length)return this.balanced(this.left,this.right.replace(h-V,d-V,_));let ee=[];h>0&&this.decomposeLeft(h,ee);let er=ee.length;for(let h of _)ee.push(h);if(h>0&&mergeGaps(ee,er-1),d<this.length){let h=ee.length;this.decomposeRight(d,ee),mergeGaps(ee,h)}return HeightMap.of(ee)}decomposeLeft(h,d){let _=this.left.length;if(h<=_)return this.left.decomposeLeft(h,d);d.push(this.left),this.break&&h>=++_&&d.push(null),h>_&&this.right.decomposeLeft(h-_,d)}decomposeRight(h,d){let _=this.left.length,V=_+this.break;if(h>=V)return this.right.decomposeRight(h-V,d);h<_&&this.left.decomposeRight(h,d),this.break&&h<V&&d.push(null),d.push(this.right)}balanced(h,d){return h.size>2*d.size||d.size>2*h.size?HeightMap.of(this.break?[h,null,d]:[h,d]):(this.left=h,this.right=d,this.height=h.height+d.height,this.outdated=h.outdated||d.outdated,this.size=h.size+d.size,this.length=h.length+this.break+d.length,this)}updateHeight(h,d=0,_=!1,V){let{left:ee,right:er}=this,eo=d+ee.length+this.break,ec=null;return(V&&V.from<=d+ee.length&&V.more?ec=ee=ee.updateHeight(h,d,_,V):ee.updateHeight(h,d,_),V&&V.from<=eo+er.length&&V.more?ec=er=er.updateHeight(h,eo,_,V):er.updateHeight(h,eo,_),ec)?this.balanced(ee,er):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}};function mergeGaps(h,d){let _,V;null==h[d]&&(_=h[d-1])instanceof HeightMapGap&&(V=h[d+1])instanceof HeightMapGap&&h.splice(d-1,3,new HeightMapGap(_.length+1+V.length))}let NodeBuilder=class NodeBuilder{constructor(h,d){this.pos=h,this.oracle=d,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=h}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(h,d){if(this.lineStart>-1){let h=Math.min(d,this.lineEnd),_=this.nodes[this.nodes.length-1];_ instanceof HeightMapText?_.length+=h-this.pos:(h>this.pos||!this.isCovered)&&this.nodes.push(new HeightMapText(h-this.pos,-1)),this.writtenTo=h,d>h&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=d}point(h,d,_){if(h<d||_.heightRelevant){let V=_.widget?_.widget.estimatedHeight:0,ee=_.widget?_.widget.lineBreaks:0;V<0&&(V=this.oracle.lineHeight);let er=d-h;_.block?this.addBlock(new HeightMapBlock(er,V,_)):(er||ee||V>=5)&&this.addLineDeco(V,ee,er)}else d>h&&this.span(h,d);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:h,to:d}=this.oracle.doc.lineAt(this.pos);this.lineStart=h,this.lineEnd=d,this.writtenTo<h&&((this.writtenTo<h-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,h-1)),this.nodes.push(null)),this.pos>h&&this.nodes.push(new HeightMapText(this.pos-h,-1)),this.writtenTo=this.pos}blankContent(h,d){let _=new HeightMapGap(d-h);return this.oracle.doc.lineAt(h).to==d&&(_.flags|=4),_}ensureLine(){this.enterLine();let h=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(h instanceof HeightMapText)return h;let d=new HeightMapText(0,-1);return this.nodes.push(d),d}addBlock(h){this.enterLine();let d=h.deco;d&&d.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(h),this.writtenTo=this.pos=this.pos+h.length,d&&d.endSide>0&&(this.covering=h)}addLineDeco(h,d,_){let V=this.ensureLine();V.length+=_,V.collapsed+=_,V.widgetHeight=Math.max(V.widgetHeight,h),V.breaks+=d,this.writtenTo=this.pos=this.pos+_}finish(h){let d=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||d instanceof HeightMapText||this.isCovered?(this.writtenTo<this.pos||null==d)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new HeightMapText(0,-1));let _=h;for(let h of this.nodes)h instanceof HeightMapText&&h.updateHeight(this.oracle,_),_+=h?h.length:1;return this.nodes}static build(h,d,_,V){let ee=new NodeBuilder(_,h);return dist_RangeSet.spans(d,_,V,ee,0),ee.finish(_)}};let DecorationComparator=class DecorationComparator{constructor(){this.changes=[]}compareRange(){}comparePoint(h,d,_,V){(h<d||_&&_.heightRelevant||V&&V.heightRelevant)&&addRange(h,d,this.changes,5)}};let LineGap=class LineGap{constructor(h,d,_){this.from=h,this.to=d,this.size=_}static same(h,d){if(h.length!=d.length)return!1;for(let _=0;_<h.length;_++){let V=h[_],ee=d[_];if(V.from!=ee.from||V.to!=ee.to||V.size!=ee.size)return!1}return!0}draw(h,d){return Decoration.replace({widget:new LineGapWidget(this.size*(d?h.scaleY:h.scaleX),d)}).range(this.from,this.to)}};let LineGapWidget=class LineGapWidget extends WidgetType{constructor(h,d){super(),this.size=h,this.vertical=d}eq(h){return h.size==this.size&&h.vertical==this.vertical}toDOM(){let h=document.createElement("div");return this.vertical?h.style.height=this.size+"px":(h.style.width=this.size+"px",h.style.height="2px",h.style.display="inline-block"),h}get estimatedHeight(){return this.vertical?this.size:-1}};let ViewState=class ViewState{constructor(h){this.state=h,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!0,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=rX,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=n3.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let d=h.facet(rk).some(h=>"function"!=typeof h&&"cm-lineWrapping"==h.class);this.heightOracle=new HeightOracle(d),this.stateDeco=h.facet(rT).filter(h=>"function"!=typeof h),this.heightMap=HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle.setDoc(h.doc),[new ChangedRange(0,0,0,h.doc.length)]),this.viewport=this.getViewport(0,null),this.updateViewportLines(),this.updateForViewport(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Decoration.set(this.lineGaps.map(h=>h.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let h=[this.viewport],{main:d}=this.state.selection;for(let _=0;_<=1;_++){let V=_?d.head:d.anchor;if(!h.some(({from:h,to:d})=>V>=h&&V<=d)){let{from:d,to:_}=this.lineBlockAt(V);h.push(new Viewport(d,_))}}this.viewports=h.sort((h,d)=>h.from-d.from),this.scaler=this.heightMap.height<=7e6?rX:new BigScaler(this.heightOracle,this.heightMap,this.viewports)}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,h=>{this.viewportLines.push(1==this.scaler.scale?h:scaleBlock(h,this.scaler))})}update(h,d=null){var _,V;let ee;this.state=h.state;let er=this.stateDeco;this.stateDeco=this.state.facet(rT).filter(h=>"function"!=typeof h);let eo=h.changedRanges,ec=ChangedRange.extendWithRanges(eo,(_=this.stateDeco,V=h?h.changes:ChangeSet.empty(this.state.doc.length),ee=new DecorationComparator,dist_RangeSet.compare(er,_,V,ee,0),ee.changes)),eh=this.heightMap.height,ep=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);this.heightMap=this.heightMap.applyChanges(this.stateDeco,h.startState.doc,this.heightOracle.setDoc(this.state.doc),ec),this.heightMap.height!=eh&&(h.flags|=2),ep?(this.scrollAnchorPos=h.changes.mapPos(ep.from,-1),this.scrollAnchorHeight=ep.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let ef=ec.length?this.mapViewport(this.viewport,h.changes):this.viewport;(d&&(d.range.head<ef.from||d.range.head>ef.to)||!this.viewportIsAppropriate(ef))&&(ef=this.getViewport(0,d));let em=!h.changes.empty||2&h.flags||ef.from!=this.viewport.from||ef.to!=this.viewport.to;this.viewport=ef,this.updateForViewport(),em&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,h.changes))),h.flags|=this.computeVisibleRanges(),d&&(this.scrollTarget=d),!this.mustEnforceCursorAssoc&&h.selectionSet&&h.view.lineWrapping&&h.state.selection.main.empty&&h.state.selection.main.assoc&&!h.state.facet(rv)&&(this.mustEnforceCursorAssoc=!0)}measure(h){let d=h.contentDOM,_=window.getComputedStyle(d),V=this.heightOracle,ee=_.whiteSpace;this.defaultTextDirection="rtl"==_.direction?n3.RTL:n3.LTR;let er=this.heightOracle.mustRefreshForWrapping(ee),eo=d.getBoundingClientRect(),ec=er||this.mustMeasureContent||this.contentDOMHeight!=eo.height;this.contentDOMHeight=eo.height,this.mustMeasureContent=!1;let eh=0,ep=0;if(eo.width&&eo.height){let{scaleX:h,scaleY:_}=getScale(d,eo);(this.scaleX!=h||this.scaleY!=_)&&(this.scaleX=h,this.scaleY=_,eh|=8,er=ec=!0)}let ef=(parseInt(_.paddingTop)||0)*this.scaleY,em=(parseInt(_.paddingBottom)||0)*this.scaleY;(this.paddingTop!=ef||this.paddingBottom!=em)&&(this.paddingTop=ef,this.paddingBottom=em,eh|=10),this.editorWidth!=h.scrollDOM.clientWidth&&(V.lineWrapping&&(ec=!0),this.editorWidth=h.scrollDOM.clientWidth,eh|=8);let eg=h.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=eg&&(this.scrollAnchorHeight=-1,this.scrollTop=eg),this.scrolledToBottom=isScrolledToBottom(h.scrollDOM);let eO=(this.printing?function(h,d){let _=h.getBoundingClientRect();return{left:0,right:_.right-_.left,top:d,bottom:_.bottom-(_.top+d)}}:function(h,d){let _=h.getBoundingClientRect(),V=h.ownerDocument,ee=V.defaultView||window,er=Math.max(0,_.left),eo=Math.min(ee.innerWidth,_.right),ec=Math.max(0,_.top),eh=Math.min(ee.innerHeight,_.bottom);for(let d=h.parentNode;d&&d!=V.body;)if(1==d.nodeType){let _=d,V=window.getComputedStyle(_);if((_.scrollHeight>_.clientHeight||_.scrollWidth>_.clientWidth)&&"visible"!=V.overflow){let V=_.getBoundingClientRect();er=Math.max(er,V.left),eo=Math.min(eo,V.right),ec=Math.max(ec,V.top),eh=d==h.parentNode?V.bottom:Math.min(eh,V.bottom)}d="absolute"==V.position||"fixed"==V.position?_.offsetParent:_.parentNode}else if(11==d.nodeType)d=d.host;else break;return{left:er-_.left,right:Math.max(er,eo)-_.left,top:ec-(_.top+d),bottom:Math.max(ec,eh)-(_.top+d)}})(d,this.paddingTop),ey=eO.top-this.pixelViewport.top,ev=eO.bottom-this.pixelViewport.bottom;this.pixelViewport=eO;let eS=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(eS!=this.inView&&(this.inView=eS,eS&&(ec=!0)),!this.inView&&!this.scrollTarget)return 0;let e_=eo.width;if((this.contentDOMWidth!=e_||this.editorHeight!=h.scrollDOM.clientHeight)&&(this.contentDOMWidth=eo.width,this.editorHeight=h.scrollDOM.clientHeight,eh|=8),ec){let d=h.docView.measureVisibleLineHeights(this.viewport);if(V.mustRefreshForHeights(d)&&(er=!0),er||V.lineWrapping&&Math.abs(e_-this.contentDOMWidth)>V.charWidth){let{lineHeight:_,charWidth:eo,textHeight:ec}=h.docView.measureTextSize();(er=_>0&&V.refresh(ee,_,eo,ec,e_/eo,d))&&(h.docView.minWidth=0,eh|=8)}for(let _ of(ey>0&&ev>0?ep=Math.max(ey,ev):ey<0&&ev<0&&(ep=Math.min(ey,ev)),V.heightChanged=!1,this.viewports)){let ee=_.from==this.viewport.from?d:h.docView.measureVisibleLineHeights(_);this.heightMap=(er?HeightMap.empty().applyChanges(this.stateDeco,Text.empty,this.heightOracle,[new ChangedRange(0,0,0,h.state.doc.length)]):this.heightMap).updateHeight(V,0,er,new MeasuredHeights(_.from,ee))}V.heightChanged&&(eh|=2)}let ew=!this.viewportIsAppropriate(this.viewport,ep)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return ew&&(this.viewport=this.getViewport(ep,this.scrollTarget)),this.updateForViewport(),(2&eh||ew)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(er?[]:this.lineGaps,h)),eh|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,h.docView.enforceCursorAssoc()),eh}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(h,d){let _=.5-Math.max(-.5,Math.min(.5,h/1e3/2)),V=this.heightMap,ee=this.heightOracle,{visibleTop:er,visibleBottom:eo}=this,ec=new Viewport(V.lineAt(er-1e3*_,rq.ByHeight,ee,0,0).from,V.lineAt(eo+(1-_)*1e3,rq.ByHeight,ee,0,0).to);if(d){let{head:h}=d.range;if(h<ec.from||h>ec.to){let _=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),er=V.lineAt(h,rq.ByPos,ee,0,0),eo;eo="center"==d.y?(er.top+er.bottom)/2-_/2:"start"==d.y||"nearest"==d.y&&h<ec.from?er.top:er.bottom-_,ec=new Viewport(V.lineAt(eo-500,rq.ByHeight,ee,0,0).from,V.lineAt(eo+_+500,rq.ByHeight,ee,0,0).to)}}return ec}mapViewport(h,d){let _=d.mapPos(h.from,-1),V=d.mapPos(h.to,1);return new Viewport(this.heightMap.lineAt(_,rq.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(V,rq.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:h,to:d},_=0){if(!this.inView)return!0;let{top:V}=this.heightMap.lineAt(h,rq.ByPos,this.heightOracle,0,0),{bottom:ee}=this.heightMap.lineAt(d,rq.ByPos,this.heightOracle,0,0),{visibleTop:er,visibleBottom:eo}=this;return(0==h||V<=er-Math.max(10,Math.min(-_,250)))&&(d==this.state.doc.length||ee>=eo+Math.max(10,Math.min(_,250)))&&V>er-2e3&&ee<eo+2e3}mapLineGaps(h,d){if(!h.length||d.empty)return h;let _=[];for(let V of h)d.touchesRange(V.from,V.to)||_.push(new LineGap(d.mapPos(V.from),d.mapPos(V.to),V.size));return _}ensureLineGaps(h,d){let _=this.heightOracle.lineWrapping,V=_?1e4:2e3,ee=V>>1,er=V<<1;if(this.defaultTextDirection!=n3.LTR&&!_)return[];let eo=[],addGap=(V,er,ec,eh)=>{if(er-V<ee)return;let ep=this.state.selection.main,ef=[ep.from];for(let h of(ep.empty||ef.push(ep.to),ef))if(h>V&&h<er){addGap(V,h-10,ec,eh),addGap(h+10,er,ec,eh);return}let em=function(h,d){for(let _ of h)if(d(_))return _}(h,h=>h.from>=ec.from&&h.to<=ec.to&&Math.abs(h.from-V)<ee&&Math.abs(h.to-er)<ee&&!ef.some(d=>h.from<d&&h.to>d));if(!em){if(er<ec.to&&d&&_&&d.visibleRanges.some(h=>h.from<=er&&h.to>=er)){let h=d.moveToLineBoundary(dist_EditorSelection.cursor(er),!1,!0).head;h>V&&(er=h)}em=new LineGap(V,er,this.gapSize(ec,V,er,eh))}eo.push(em)};for(let h of this.viewportLines){let d,ee;if(h.length<er)continue;let eo=function(h,d,_){let V=[],ee=h,er=0;return dist_RangeSet.spans(_,h,d,{span(){},point(h,d){h>ee&&(V.push({from:ee,to:h}),er+=h-ee),ee=d}},20),ee<d&&(V.push({from:ee,to:d}),er+=d-ee),{total:er,ranges:V}}(h.from,h.to,this.stateDeco);if(eo.total<er)continue;let ec=this.scrollTarget?this.scrollTarget.range.head:null;if(_){let _,er,eh=V/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=ec){let d=findFraction(eo,ec),V=((this.visibleBottom-this.visibleTop)/2+eh)/h.height;_=d-V,er=d+V}else _=(this.visibleTop-h.top-eh)/h.height,er=(this.visibleBottom-h.top+eh)/h.height;d=findPosition(eo,_),ee=findPosition(eo,er)}else{let h,_,er=eo.total*this.heightOracle.charWidth,eh=V*this.heightOracle.charWidth;if(null!=ec){let d=findFraction(eo,ec),V=((this.pixelViewport.right-this.pixelViewport.left)/2+eh)/er;h=d-V,_=d+V}else h=(this.pixelViewport.left-eh)/er,_=(this.pixelViewport.right+eh)/er;d=findPosition(eo,h),ee=findPosition(eo,_)}d>h.from&&addGap(h.from,d,h,eo),ee<h.to&&addGap(ee,h.to,h,eo)}return eo}gapSize(h,d,_,V){let ee=findFraction(V,_)-findFraction(V,d);return this.heightOracle.lineWrapping?h.height*ee:V.total*this.heightOracle.charWidth*ee}updateLineGaps(h){LineGap.same(h,this.lineGaps)||(this.lineGaps=h,this.lineGapDeco=Decoration.set(h.map(h=>h.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(){let h=this.stateDeco;this.lineGaps.length&&(h=h.concat(this.lineGapDeco));let d=[];dist_RangeSet.spans(h,this.viewport.from,this.viewport.to,{span(h,_){d.push({from:h,to:_})},point(){}},20);let _=d.length!=this.visibleRanges.length||this.visibleRanges.some((h,_)=>h.from!=d[_].from||h.to!=d[_].to);return this.visibleRanges=d,_?4:0}lineBlockAt(h){return h>=this.viewport.from&&h<=this.viewport.to&&this.viewportLines.find(d=>d.from<=h&&d.to>=h)||scaleBlock(this.heightMap.lineAt(h,rq.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(h){return scaleBlock(this.heightMap.lineAt(this.scaler.fromDOM(h),rq.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(h){let d=this.lineBlockAtHeight(h+8);return d.from>=this.viewport.from||this.viewportLines[0].top-h>200?d:this.viewportLines[0]}elementAtHeight(h){return scaleBlock(this.heightMap.blockAt(this.scaler.fromDOM(h),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}};let Viewport=class Viewport{constructor(h,d){this.from=h,this.to=d}};function findPosition({total:h,ranges:d},_){if(_<=0)return d[0].from;if(_>=1)return d[d.length-1].to;let V=Math.floor(h*_);for(let h=0;;h++){let{from:_,to:ee}=d[h],er=ee-_;if(V<=er)return _+V;V-=er}}function findFraction(h,d){let _=0;for(let{from:V,to:ee}of h.ranges){if(d<=ee){_+=d-V;break}_+=ee-V}return _/h.total}let rX={toDOM:h=>h,fromDOM:h=>h,scale:1};let BigScaler=class BigScaler{constructor(h,d,_){let V=0,ee=0,er=0;for(let eo of(this.viewports=_.map(({from:_,to:ee})=>{let er=d.lineAt(_,rq.ByPos,h,0,0).top,eo=d.lineAt(ee,rq.ByPos,h,0,0).bottom;return V+=eo-er,{from:_,to:ee,top:er,bottom:eo,domTop:0,domBottom:0}}),this.scale=(7e6-V)/(d.height-V),this.viewports))eo.domTop=er+(eo.top-ee)*this.scale,er=eo.domBottom=eo.domTop+(eo.bottom-eo.top),ee=eo.bottom}toDOM(h){for(let d=0,_=0,V=0;;d++){let ee=d<this.viewports.length?this.viewports[d]:null;if(!ee||h<ee.top)return V+(h-_)*this.scale;if(h<=ee.bottom)return ee.domTop+(h-ee.top);_=ee.bottom,V=ee.domBottom}}fromDOM(h){for(let d=0,_=0,V=0;;d++){let ee=d<this.viewports.length?this.viewports[d]:null;if(!ee||h<ee.domTop)return _+(h-V)/this.scale;if(h<=ee.domBottom)return ee.top+(h-ee.domTop);_=ee.bottom,V=ee.domBottom}}};function scaleBlock(h,d){if(1==d.scale)return h;let _=d.toDOM(h.top),V=d.toDOM(h.bottom);return new BlockInfo(h.from,h.length,_,V-_,Array.isArray(h._content)?h._content.map(h=>scaleBlock(h,d)):h._content)}let rY=Facet.define({combine:h=>h.join(" ")}),rG=Facet.define({combine:h=>h.indexOf(!0)>-1}),rH=StyleModule.newName(),rK=StyleModule.newName(),rJ=StyleModule.newName(),r0={"&light":"."+rK,"&dark":"."+rJ};function buildTheme(h,d,_){return new StyleModule(d,{finish:d=>/&/.test(d)?d.replace(/&\w*/,d=>{if("&"==d)return h;if(!_||!_[d])throw RangeError(`Unsupported selector: ${d}`);return _[d]}):h+" "+d})}let r1=buildTheme("."+rH,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#444"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace:before":{content:"attr(data-display)",position:"absolute",pointerEvents:"none",color:"#888"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},r0);let DOMReader=class DOMReader{constructor(h,d){this.points=h,this.text="",this.lineSeparator=d.facet(dist_EditorState.lineSeparator)}append(h){this.text+=h}lineBreak(){this.text+="￿"}readRange(h,d){if(!h)return this;let _=h.parentNode;for(let V=h;;){this.findPointBefore(_,V);let h=this.text.length;this.readNode(V);let ee=V.nextSibling;if(ee==d)break;let er=ContentView.get(V),eo=ContentView.get(ee);(er&&eo?er.breakAfter:(er?er.breakAfter:isBlockElement(V))||isBlockElement(ee)&&("BR"!=V.nodeName||V.cmIgnore)&&this.text.length>h)&&this.lineBreak(),V=ee}return this.findPointBefore(_,d),this}readTextNode(h){let d=h.nodeValue;for(let _ of this.points)_.node==h&&(_.pos=this.text.length+Math.min(_.offset,d.length));for(let _=0,V=this.lineSeparator?null:/\r\n?|\n/g;;){let ee=-1,er=1,eo;if(this.lineSeparator?(ee=d.indexOf(this.lineSeparator,_),er=this.lineSeparator.length):(eo=V.exec(d))&&(ee=eo.index,er=eo[0].length),this.append(d.slice(_,ee<0?d.length:ee)),ee<0)break;if(this.lineBreak(),er>1)for(let d of this.points)d.node==h&&d.pos>this.text.length&&(d.pos-=er-1);_=ee+er}}readNode(h){if(h.cmIgnore)return;let d=ContentView.get(h),_=d&&d.overrideDOMText;if(null!=_){this.findPointInside(h,_.length);for(let h=_.iter();!h.next().done;)h.lineBreak?this.lineBreak():this.append(h.value)}else 3==h.nodeType?this.readTextNode(h):"BR"==h.nodeName?h.nextSibling&&this.lineBreak():1==h.nodeType&&this.readRange(h.firstChild,null)}findPointBefore(h,d){for(let _ of this.points)_.node==h&&h.childNodes[_.offset]==d&&(_.pos=this.text.length)}findPointInside(h,d){for(let _ of this.points)(3==h.nodeType?_.node==h:h.contains(_.node))&&(_.pos=this.text.length+(!function(h,d,_){for(;;){if(!d||_<maxOffset(d))return!1;if(d==h)return!0;_=domIndex(d)+1,d=d.parentNode}}(h,_.node,_.offset)?0:d))}};function isBlockElement(h){return 1==h.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(h.nodeName)}let DOMPoint=class DOMPoint{constructor(h,d){this.node=h,this.offset=d,this.pos=-1}};let DOMChange=class DOMChange{constructor(h,d,_,V){this.typeOver=V,this.bounds=null,this.text="";let{impreciseHead:ee,impreciseAnchor:er}=h.docView;if(h.state.readOnly&&d>-1)this.newSel=null;else if(d>-1&&(this.bounds=h.docView.domBoundsAround(d,_,0))){let d=ee||er?[]:function(h){let d=[];if(h.root.activeElement!=h.contentDOM)return d;let{anchorNode:_,anchorOffset:V,focusNode:ee,focusOffset:er}=h.observer.selectionRange;return _&&(d.push(new DOMPoint(_,V)),(ee!=_||er!=V)&&d.push(new DOMPoint(ee,er))),d}(h),_=new DOMReader(d,h.state);_.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=_.text,this.newSel=function(h,d){if(0==h.length)return null;let _=h[0].pos,V=2==h.length?h[1].pos:_;return _>-1&&V>-1?dist_EditorSelection.single(_+d,V+d):null}(d,this.bounds.from)}else{let d=h.observer.selectionRange,_=ee&&ee.node==d.focusNode&&ee.offset==d.focusOffset||!contains(h.contentDOM,d.focusNode)?h.state.selection.main.head:h.docView.posFromDOM(d.focusNode,d.focusOffset),V=er&&er.node==d.anchorNode&&er.offset==d.anchorOffset||!contains(h.contentDOM,d.anchorNode)?h.state.selection.main.anchor:h.docView.posFromDOM(d.anchorNode,d.anchorOffset),eo=h.viewport;if(n2.ios&&h.state.selection.main.empty&&_!=V&&(eo.from>0||eo.to<h.state.doc.length)){let d=eo.from-Math.min(_,V),ee=eo.to-Math.max(_,V);(0==d||1==d)&&(0==ee||-1==ee)&&(_=0,V=h.state.doc.length)}this.newSel=dist_EditorSelection.single(V,_)}}};function applyDOMChange(h,d){let _;let{newSel:V}=d,ee=h.state.selection.main,er=h.inputState.lastKeyTime>Date.now()-100?h.inputState.lastKeyCode:-1;if(d.bounds){let{from:V,to:eo}=d.bounds,ec=ee.from,eh=null;(8===er||n2.android&&d.text.length<eo-V)&&(ec=ee.to,eh="end");let ep=function(h,d,_,V){let ee=Math.min(h.length,d.length),er=0;for(;er<ee&&h.charCodeAt(er)==d.charCodeAt(er);)er++;if(er==ee&&h.length==d.length)return null;let eo=h.length,ec=d.length;for(;eo>0&&ec>0&&h.charCodeAt(eo-1)==d.charCodeAt(ec-1);)eo--,ec--;if("end"==V){let h=Math.max(0,er-Math.min(eo,ec));_-=eo+h-er}if(eo<er&&h.length<d.length){let h=_<=er&&_>=eo?er-_:0;er-=h,ec=er+(ec-eo),eo=er}else if(ec<er){let h=_<=er&&_>=ec?er-_:0;er-=h,eo=er+(eo-ec),ec=er}return{from:er,toA:eo,toB:ec}}(h.state.doc.sliceString(V,eo,"￿"),d.text,ec-V,eh);ep&&(n2.chrome&&13==er&&ep.toB==ep.from+2&&"￿￿"==d.text.slice(ep.from,ep.toB)&&ep.toB--,_={from:V+ep.from,to:V+ep.toA,insert:Text.of(d.text.slice(ep.from,ep.toB).split("￿"))})}else V&&(!h.hasFocus&&h.state.facet(rS)||V.main.eq(ee))&&(V=null);if(!_&&!V)return!1;if(!_&&d.typeOver&&!ee.empty&&V&&V.main.empty?_={from:ee.from,to:ee.to,insert:h.state.doc.slice(ee.from,ee.to)}:_&&_.from>=ee.from&&_.to<=ee.to&&(_.from!=ee.from||_.to!=ee.to)&&ee.to-ee.from-(_.to-_.from)<=4?_={from:ee.from,to:ee.to,insert:h.state.doc.slice(ee.from,_.from).append(_.insert).append(h.state.doc.slice(_.to,ee.to))}:(n2.mac||n2.android)&&_&&_.from==_.to&&_.from==ee.head-1&&/^\. ?$/.test(_.insert.toString())&&"off"==h.contentDOM.getAttribute("autocorrect")?(V&&2==_.insert.length&&(V=dist_EditorSelection.single(V.main.anchor-1,V.main.head-1)),_={from:ee.from,to:ee.to,insert:Text.of([" "])}):n2.chrome&&_&&_.from==_.to&&_.from==ee.head&&"\n "==_.insert.toString()&&h.lineWrapping&&(V&&(V=dist_EditorSelection.single(V.main.anchor-1,V.main.head-1)),_={from:ee.from,to:ee.to,insert:Text.of([" "])}),_){let d;if(n2.ios&&h.inputState.flushIOSKey()||n2.android&&(_.from==ee.from&&_.to==ee.to&&1==_.insert.length&&2==_.insert.lines&&dispatchKey(h.contentDOM,"Enter",13)||(_.from==ee.from-1&&_.to==ee.to&&0==_.insert.length||8==er&&_.insert.length<_.to-_.from&&_.to>ee.head)&&dispatchKey(h.contentDOM,"Backspace",8)||_.from==ee.from&&_.to==ee.to+1&&0==_.insert.length&&dispatchKey(h.contentDOM,"Delete",46)))return!0;let eo=_.insert.toString();h.inputState.composing>=0&&h.inputState.composing++;let defaultInsert=()=>d||(d=function(h,d,_){let V,ee=h.state,er=ee.selection.main;if(d.from>=er.from&&d.to<=er.to&&d.to-d.from>=(er.to-er.from)/3&&(!_||_.main.empty&&_.main.from==d.from+d.insert.length)&&h.inputState.composing<0){let _=er.from<d.from?ee.sliceDoc(er.from,d.from):"",eo=er.to>d.to?ee.sliceDoc(d.to,er.to):"";V=ee.replaceSelection(h.state.toText(_+d.insert.sliceString(0,void 0,h.state.lineBreak)+eo))}else{let eo=ee.changes(d),ec=_&&_.main.to<=eo.newLength?_.main:void 0;if(ee.selection.ranges.length>1&&h.inputState.composing>=0&&d.to<=er.to&&d.to>=er.to-10){let eh=h.state.sliceDoc(d.from,d.to),ep,ef=_&&findCompositionNode(h,_.main.head);if(ef){let h=d.insert.length-(d.to-d.from);ep={from:ef.from,to:ef.to-h}}else ep=h.state.doc.lineAt(er.head);let em=er.to-d.to,eg=er.to-er.from;V=ee.changeByRange(_=>{if(_.from==er.from&&_.to==er.to)return{changes:eo,range:ec||_.map(eo)};let V=_.to-em,ef=V-eh.length;if(_.to-_.from!=eg||h.state.sliceDoc(ef,V)!=eh||_.to>=ep.from&&_.from<=ep.to)return{range:_};let eO=ee.changes({from:ef,to:V,insert:d.insert}),ey=_.to-er.to;return{changes:eO,range:ec?dist_EditorSelection.range(Math.max(0,ec.anchor+ey),Math.max(0,ec.head+ey)):_.map(eO)}})}else V={changes:eo,selection:ec&&ee.selection.replaceRange(ec)}}let eo="input.type";return(h.composing||h.inputState.compositionPendingChange&&h.inputState.compositionEndedAt>Date.now()-50)&&(h.inputState.compositionPendingChange=!1,eo+=".compose",h.inputState.compositionFirstChange&&(eo+=".start",h.inputState.compositionFirstChange=!1)),ee.update(V,{userEvent:eo,scrollIntoView:!0})}(h,_,V));return h.state.facet(rg).some(d=>d(h,_.from,_.to,eo,defaultInsert))||h.dispatch(defaultInsert()),!0}if(!V||V.main.eq(ee))return!1;{let d=!1,_="select";return h.inputState.lastSelectionTime>Date.now()-50&&("select"==h.inputState.lastSelectionOrigin&&(d=!0),_=h.inputState.lastSelectionOrigin),h.dispatch({selection:V,scrollIntoView:d,userEvent:_}),!0}}let r2={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},r5=n2.ie&&n2.ie_version<=11;let DOMObserver=class DOMObserver{constructor(h){this.view=h,this.active=!1,this.selectionRange=new DOMSelectionState,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.parentCheck=-1,this.dom=h.contentDOM,this.observer=new MutationObserver(d=>{for(let h of d)this.queue.push(h);(n2.ie&&n2.ie_version<=11||n2.ios&&h.composing)&&d.some(h=>"childList"==h.type&&h.removedNodes.length||"characterData"==h.type&&h.oldValue.length>h.target.nodeValue.length)?this.flushSoon():this.flush()}),r5&&(this.onCharData=h=>{this.queue.push({target:h.target,type:"characterData",oldValue:h.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver(()=>{var h;(null===(h=this.view.docView)||void 0===h?void 0:h.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(h.scrollDOM)),this.addWindowListeners(this.win=h.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver(h=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),h.length>0&&h[h.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(h=>{h.length>0&&h[h.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(h){this.view.inputState.runHandlers("scroll",h),this.intersecting&&this.view.measure()}onScroll(h){this.intersecting&&this.flush(!1),this.onScrollChanged(h)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(){this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500)}updateGaps(h){if(this.gapIntersection&&(h.length!=this.gaps.length||this.gaps.some((d,_)=>d!=h[_]))){for(let d of(this.gapIntersection.disconnect(),h))this.gapIntersection.observe(d);this.gaps=h}}onSelectionChange(h){let d=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:_}=this,V=this.selectionRange;if(_.state.facet(rS)?_.root.activeElement!=this.dom:!hasSelection(_.dom,V))return;let ee=V.anchorNode&&_.docView.nearest(V.anchorNode);if(ee&&ee.ignoreEvent(h)){d||(this.selectionChanged=!1);return}(n2.ie&&n2.ie_version<=11||n2.android&&n2.chrome)&&!_.state.selection.main.empty&&V.focusNode&&isEquivalentPosition(V.focusNode,V.focusOffset,V.anchorNode,V.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:h}=this,d=n2.safari&&11==h.root.nodeType&&function(h){let d=h.activeElement;for(;d&&d.shadowRoot;)d=d.shadowRoot.activeElement;return d}(this.dom.ownerDocument)==this.dom&&function(h){let d=null;function read(h){h.preventDefault(),h.stopImmediatePropagation(),d=h.getTargetRanges()[0]}if(h.contentDOM.addEventListener("beforeinput",read,!0),h.dom.ownerDocument.execCommand("indent"),h.contentDOM.removeEventListener("beforeinput",read,!0),!d)return null;let _=d.startContainer,V=d.startOffset,ee=d.endContainer,er=d.endOffset,eo=h.docView.domAtPos(h.state.selection.main.anchor);return isEquivalentPosition(eo.node,eo.offset,ee,er)&&([_,V,ee,er]=[ee,er,_,V]),{anchorNode:_,anchorOffset:V,focusNode:ee,focusOffset:er}}(this.view)||getSelection(h.root);if(!d||this.selectionRange.eq(d))return!1;let _=hasSelection(this.dom,d);return _&&!this.selectionChanged&&h.inputState.lastFocusTime>Date.now()-200&&h.inputState.lastTouchTime<Date.now()-300&&function(h,d){let _=d.focusNode,V=d.focusOffset;if(!_||d.anchorNode!=_||d.anchorOffset!=V)return!1;for(V=Math.min(V,maxOffset(_));;)if(V){if(1!=_.nodeType)return!1;let h=_.childNodes[V-1];"false"==h.contentEditable?V--:V=maxOffset(_=h)}else{if(_==h)return!0;V=domIndex(_),_=_.parentNode}}(this.dom,d)?(this.view.inputState.lastFocusTime=0,h.docView.updateSelection(),!1):(this.selectionRange.setRange(d),_&&(this.selectionChanged=!0),!0)}setSelectionRange(h,d){this.selectionRange.set(h.node,h.offset,d.node,d.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let h=0,d=null;for(let _=this.dom;_;)if(1==_.nodeType)!d&&h<this.scrollTargets.length&&this.scrollTargets[h]==_?h++:d||(d=this.scrollTargets.slice(0,h)),d&&d.push(_),_=_.assignedSlot||_.parentNode;else if(11==_.nodeType)_=_.host;else break;if(h<this.scrollTargets.length&&!d&&(d=this.scrollTargets.slice(0,h)),d){for(let h of this.scrollTargets)h.removeEventListener("scroll",this.onScroll);for(let h of this.scrollTargets=d)h.addEventListener("scroll",this.onScroll)}}ignore(h){if(!this.active)return h();try{return this.stop(),h()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,r2),r5&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),r5&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(h,d){var _;this.delayedAndroidKey||(this.flushingAndroidKey=this.view.win.requestAnimationFrame(()=>{let h=this.delayedAndroidKey;h&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=h.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&h.force&&dispatchKey(this.dom,h.key,h.keyCode))})),this.delayedAndroidKey&&"Enter"!=h||(this.delayedAndroidKey={key:h,keyCode:d,force:this.lastChange<Date.now()-50||!!(null===(_=this.delayedAndroidKey)||void 0===_?void 0:_.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let h of this.observer.takeRecords())this.queue.push(h);return this.queue}processRecords(){let h=this.pendingRecords();h.length&&(this.queue=[]);let d=-1,_=-1,V=!1;for(let ee of h){let h=this.readMutation(ee);h&&(h.typeOver&&(V=!0),-1==d?{from:d,to:_}=h:(d=Math.min(h.from,d),_=Math.max(h.to,_)))}return{from:d,to:_,typeOver:V}}readChange(){let{from:h,to:d,typeOver:_}=this.processRecords(),V=this.selectionChanged&&hasSelection(this.dom,this.selectionRange);if(h<0&&!V)return null;h>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let ee=new DOMChange(this.view,h,d,_);return this.view.docView.domChanged={newSel:ee.newSel?ee.newSel.main:null},ee}flush(h=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;h&&this.readSelectionRange();let d=this.readChange();if(!d)return this.view.requestMeasure(),!1;let _=this.view.state,V=applyDOMChange(this.view,d);return this.view.state==_&&this.view.update([]),V}readMutation(h){let d=this.view.docView.nearest(h.target);if(!d||d.ignoreMutation(h))return null;if(d.markDirty("attributes"==h.type),"attributes"==h.type&&(d.flags|=4),"childList"==h.type){let _=findChild(d,h.previousSibling||h.target.previousSibling,-1),V=findChild(d,h.nextSibling||h.target.nextSibling,1);return{from:_?d.posAfter(_):d.posAtStart,to:V?d.posBefore(V):d.posAtEnd,typeOver:!1}}return"characterData"==h.type?{from:d.posAtStart,to:d.posAtEnd,typeOver:h.target.nodeValue==h.oldValue}:null}setWindow(h){h!=this.win&&(this.removeWindowListeners(this.win),this.win=h,this.addWindowListeners(this.win))}addWindowListeners(h){h.addEventListener("resize",this.onResize),h.addEventListener("beforeprint",this.onPrint),h.addEventListener("scroll",this.onScroll),h.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(h){h.removeEventListener("scroll",this.onScroll),h.removeEventListener("resize",this.onResize),h.removeEventListener("beforeprint",this.onPrint),h.document.removeEventListener("selectionchange",this.onSelectionChange)}destroy(){var h,d,_;for(let V of(this.stop(),null===(h=this.intersection)||void 0===h||h.disconnect(),null===(d=this.gapIntersection)||void 0===d||d.disconnect(),null===(_=this.resizeScroll)||void 0===_||_.disconnect(),this.scrollTargets))V.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey)}};function findChild(h,d,_){for(;d;){let V=ContentView.get(d);if(V&&V.parent==h)return V;let ee=d.parentNode;d=ee!=h.dom?ee:_>0?d.nextSibling:d.previousSibling}return null}let EditorView=class EditorView{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(h={}){this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),h.parent&&h.parent.appendChild(this.dom);let{dispatch:d}=h;for(let _ of(this.dispatchTransactions=h.dispatchTransactions||d&&(h=>h.forEach(h=>d(h,this)))||(h=>this.update(h)),this.dispatch=this.dispatch.bind(this),this._root=h.root||function(h){for(;h;){if(h&&(9==h.nodeType||11==h.nodeType&&h.host))return h;h=h.assignedSlot||h.parentNode}return null}(h.parent)||document,this.viewState=new ViewState(h.state||dist_EditorState.create(h)),h.scrollTo&&h.scrollTo.is(rb)&&(this.viewState.scrollTarget=h.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(rw).map(h=>new PluginInstance(h)),this.plugins))_.update(this);this.observer=new DOMObserver(this),this.inputState=new InputState(this),this.inputState.ensureHandlers(this.plugins),this.docView=new DocView(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure()}dispatch(...h){let d=1==h.length&&h[0]instanceof Transaction?h:1==h.length&&Array.isArray(h[0])?h[0]:[this.state.update(...h)];this.dispatchTransactions(d,this)}update(h){if(0!=this.updateState)throw Error("Calls to EditorView.update are not allowed while an update is in progress");let d=!1,_=!1,V,ee=this.state;for(let d of h){if(d.startState!=ee)throw RangeError("Trying to update state with a transaction that doesn't start from the previous state.");ee=d.state}if(this.destroyed){this.viewState.state=ee;return}let er=this.hasFocus,eo=0,ec=null;h.some(h=>h.annotation(rW))?(this.inputState.notifiedFocused=er,eo=1):er==this.inputState.notifiedFocused||(this.inputState.notifiedFocused=er,(ec=focusChangeTransaction(ee,er))||(eo=1));let eh=this.observer.delayedAndroidKey,ep=null;if(eh?(this.observer.clearDelayedAndroidKey(),((ep=this.observer.readChange())&&!this.state.doc.eq(ee.doc)||!this.state.selection.eq(ee.selection))&&(ep=null)):this.observer.clear(),ee.facet(dist_EditorState.phrases)!=this.state.facet(dist_EditorState.phrases))return this.setState(ee);V=ViewUpdate.create(this,ee,h),V.flags|=eo;let ef=this.viewState.scrollTarget;try{for(let d of(this.updateState=2,h)){if(ef&&(ef=ef.map(d.changes)),d.scrollIntoView){let{main:h}=d.state.selection;ef=new ScrollTarget(h.empty?h:dist_EditorSelection.cursor(h.head,h.head>h.anchor?-1:1))}for(let h of d.effects)h.is(rb)&&(ef=h.value.clip(this.state))}this.viewState.update(V,ef),this.bidiCache=CachedOrder.update(this.bidiCache,V.changes),V.empty||(this.updatePlugins(V),this.inputState.update(V)),d=this.docView.update(V),this.state.facet(rR)!=this.styleModules&&this.mountStyles(),_=this.updateAttrs(),this.showAnnouncements(h),this.docView.updateSelection(d,h.some(h=>h.isUserEvent("select.pointer")))}finally{this.updateState=0}if(V.startState.facet(rY)!=V.state.facet(rY)&&(this.viewState.mustMeasureContent=!0),(d||_||ef||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),!V.empty)for(let h of this.state.facet(rp))try{h(V)}catch(h){logException(this.state,h,"update listener")}(ec||ep)&&Promise.resolve().then(()=>{ec&&this.state==ec.startState&&this.dispatch(ec),ep&&!applyDOMChange(this,ep)&&eh.force&&dispatchKey(this.contentDOM,eh.key,eh.keyCode)})}setState(h){if(0!=this.updateState)throw Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=h;return}this.updateState=2;let d=this.hasFocus;try{for(let h of this.plugins)h.destroy(this);for(let d of(this.viewState=new ViewState(h),this.plugins=h.facet(rw).map(h=>new PluginInstance(h)),this.pluginMap.clear(),this.plugins))d.update(this);this.docView.destroy(),this.docView=new DocView(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}d&&this.focus(),this.requestMeasure()}updatePlugins(h){let d=h.startState.facet(rw),_=h.state.facet(rw);if(d!=_){let V=[];for(let ee of _){let _=d.indexOf(ee);if(_<0)V.push(new PluginInstance(ee));else{let d=this.plugins[_];d.mustUpdate=h,V.push(d)}}for(let d of this.plugins)d.mustUpdate!=h&&d.destroy(this);this.plugins=V,this.pluginMap.clear()}else for(let d of this.plugins)d.mustUpdate=h;for(let h=0;h<this.plugins.length;h++)this.plugins[h].update(this);d!=_&&this.inputState.ensureHandlers(this.plugins)}measure(h=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,h&&this.observer.forceFlush();let d=null,_=this.scrollDOM,V=_.scrollTop*this.scaleY,{scrollAnchorPos:ee,scrollAnchorHeight:er}=this.viewState;Math.abs(V-this.viewState.scrollTop)>1&&(er=-1),this.viewState.scrollAnchorHeight=-1;try{for(let h=0;;h++){if(er<0){if(isScrolledToBottom(_))ee=-1,er=this.viewState.heightMap.height;else{let h=this.viewState.scrollAnchorAt(V);ee=h.from,er=h.top}}this.updateState=1;let eo=this.viewState.measure(this);if(!eo&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(h>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let ec=[];4&eo||([this.measureRequests,ec]=[ec,this.measureRequests]);let eh=ec.map(h=>{try{return h.read(this)}catch(h){return logException(this.state,h),r3}}),ep=ViewUpdate.create(this,this.state,[]),ef=!1;ep.flags|=eo,d?d.flags|=eo:d=ep,this.updateState=2,ep.empty||(this.updatePlugins(ep),this.inputState.update(ep),this.updateAttrs(),ef=this.docView.update(ep));for(let h=0;h<ec.length;h++)if(eh[h]!=r3)try{let d=ec[h];d.write&&d.write(eh[h],this)}catch(h){logException(this.state,h)}if(ef&&this.docView.updateSelection(!0),!ep.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,er=-1;continue}{let h=(ee<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(ee).top)-er;if(h>1||h<-1){V+=h,_.scrollTop=V/this.scaleY,er=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(d&&!d.empty)for(let h of this.state.facet(rp))h(d)}get themeClasses(){return rH+" "+(this.state.facet(rG)?rJ:rK)+" "+this.state.facet(rY)}updateAttrs(){let h=attrsFromFacet(this,rx,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),d={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(rS)?"true":"false",class:"cm-content",style:`${n2.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(d["aria-readonly"]="true"),attrsFromFacet(this,rk,d);let _=this.observer.ignore(()=>{let _=updateAttrs(this.contentDOM,this.contentAttrs,d),V=updateAttrs(this.dom,this.editorAttrs,h);return _||V});return this.editorAttrs=h,this.contentAttrs=d,_}showAnnouncements(h){let d=!0;for(let _ of h)for(let h of _.effects)h.is(EditorView.announce)&&(d&&(this.announceDOM.textContent=""),d=!1,this.announceDOM.appendChild(document.createElement("div")).textContent=h.value)}mountStyles(){this.styleModules=this.state.facet(rR);let h=this.state.facet(EditorView.cspNonce);StyleModule.mount(this.root,this.styleModules.concat(r1).reverse(),h?{nonce:h}:void 0)}readMeasured(){if(2==this.updateState)throw Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(h){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),h&&!(this.measureRequests.indexOf(h)>-1)){if(null!=h.key){for(let d=0;d<this.measureRequests.length;d++)if(this.measureRequests[d].key===h.key){this.measureRequests[d]=h;return}}this.measureRequests.push(h)}}plugin(h){let d=this.pluginMap.get(h);return(void 0===d||d&&d.spec!=h)&&this.pluginMap.set(h,d=this.plugins.find(d=>d.spec==h)||null),d&&d.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(h){return this.readMeasured(),this.viewState.elementAtHeight(h)}lineBlockAtHeight(h){return this.readMeasured(),this.viewState.lineBlockAtHeight(h)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(h){return this.viewState.lineBlockAt(h)}get contentHeight(){return this.viewState.contentHeight}moveByChar(h,d,_){return skipAtoms(this,h,moveByChar(this,h,d,_))}moveByGroup(h,d){return skipAtoms(this,h,moveByChar(this,h,d,d=>{var _;let V,ee;return _=h.head,ee=(V=this.state.charCategorizer(_))(d),h=>{let d=V(h);return ee==nR.Space&&(ee=d),ee==d}}))}visualLineSide(h,d){let _=this.bidiSpans(h),V=this.textDirectionAt(h.from),ee=_[d?_.length-1:0];return dist_EditorSelection.cursor(ee.side(d,V)+h.from,ee.forward(!d,V)?1:-1)}moveToLineBoundary(h,d,_=!0){return function(h,d,_,V){let ee=blockAt(h,d.head),er=V&&ee.type==n7.Text&&(h.lineWrapping||ee.widgetLineBreaks)?h.coordsAtPos(d.assoc<0&&d.head>ee.from?d.head-1:d.head):null;if(er){let d=h.dom.getBoundingClientRect(),V=h.textDirectionAt(ee.from),eo=h.posAtCoords({x:_==(V==n3.LTR)?d.right-1:d.left+1,y:(er.top+er.bottom)/2});if(null!=eo)return dist_EditorSelection.cursor(eo,_?-1:1)}return dist_EditorSelection.cursor(_?ee.to:ee.from,_?-1:1)}(this,h,d,_)}moveVertically(h,d,_){return skipAtoms(this,h,function(h,d,_,V){let ee=d.head,er=_?1:-1;if(ee==(_?h.state.doc.length:0))return dist_EditorSelection.cursor(ee,d.assoc);let eo=d.goalColumn,ec,eh=h.contentDOM.getBoundingClientRect(),ep=h.coordsAtPos(ee,d.assoc||-1),ef=h.documentTop;if(ep)null==eo&&(eo=ep.left-eh.left),ec=er<0?ep.top:ep.bottom;else{let d=h.viewState.lineBlockAt(ee);null==eo&&(eo=Math.min(eh.right-eh.left,h.defaultCharacterWidth*(ee-d.from))),ec=(er<0?d.top:d.bottom)+ef}let em=eh.left+eo,eg=null!=V?V:h.viewState.heightOracle.textHeight>>1;for(let d=0;;d+=10){let _=ec+(eg+d)*er,V=posAtCoords(h,{x:em,y:_},!1,er);if(_<eh.top||_>eh.bottom||(er<0?V<ee:V>ee)){let d=h.docView.coordsForChar(V),ee=!d||_<d.top?-1:1;return dist_EditorSelection.cursor(V,ee,void 0,eo)}}}(this,h,d,_))}domAtPos(h){return this.docView.domAtPos(h)}posAtDOM(h,d=0){return this.docView.posFromDOM(h,d)}posAtCoords(h,d=!0){return this.readMeasured(),posAtCoords(this,h,d)}coordsAtPos(h,d=1){this.readMeasured();let _=this.docView.coordsAt(h,d);if(!_||_.left==_.right)return _;let V=this.state.doc.lineAt(h),ee=this.bidiSpans(V);return flattenRect(_,ee[BidiSpan.find(ee,h-V.from,-1,d)].dir==n3.LTR==d>0)}coordsForChar(h){return this.readMeasured(),this.docView.coordsForChar(h)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(h){return!this.state.facet(ry)||h<this.viewport.from||h>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(h))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(h){if(h.length>r7)return trivialOrder(h.length);let d=this.textDirectionAt(h.from),_;for(let V of this.bidiCache)if(V.from==h.from&&V.dir==d&&(V.fresh||function isolatesEq(h,d){if(h.length!=d.length)return!1;for(let _=0;_<h.length;_++){let V=h[_],ee=d[_];if(V.from!=ee.from||V.to!=ee.to||V.direction!=ee.direction||!isolatesEq(V.inner,ee.inner))return!1}return!0}(V.isolates,_=getIsolatedRanges(this,h))))return V.order;_||(_=getIsolatedRanges(this,h));let V=function(h,d,_){if(!h)return[new BidiSpan(0,0,d==n6?1:0)];if(d==n4&&!_.length&&!ri.test(h))return trivialOrder(h.length);if(_.length)for(;h.length>rs.length;)rs[rs.length]=256;let V=[],ee=d==n4?0:1;return function computeSectionOrder(h,d,_,V,ee,er,eo){let ec=d%2?2:1;(function(h,d,_,V,ee){for(let er=0;er<=V.length;er++){let eo=er?V[er-1].to:d,ec=er<V.length?V[er].from:_,eh=er?256:ee;for(let d=eo,_=eh,V=eh;d<ec;d++){let ee=charType(h.charCodeAt(d));512==ee?ee=_:8==ee&&4==V&&(ee=16),rs[d]=4==ee?2:ee,7&ee&&(V=ee),_=ee}for(let h=eo,d=eh,V=eh;h<ec;h++){let ee=rs[h];if(128==ee)h<ec-1&&d==rs[h+1]&&24&d?ee=rs[h]=d:rs[h]=256;else if(64==ee){let ee=h+1;for(;ee<ec&&64==rs[ee];)ee++;let er=h&&8==d||ee<_&&8==rs[ee]?1==V?1:8:256;for(let d=h;d<ee;d++)rs[d]=er;h=ee-1}else 8==ee&&1==V&&(rs[h]=1);d=ee,7&ee&&(V=ee)}}})(h,ee,er,V,ec),function(h,d,_,V,ee){let er=1==ee?2:1;for(let eo=0,ec=0,eh=0;eo<=V.length;eo++){let ep=eo?V[eo-1].to:d,ef=eo<V.length?V[eo].from:_;for(let d=ep,_,V,eo;d<ef;d++)if(V=re[_=h.charCodeAt(d)]){if(V<0){for(let h=ec-3;h>=0;h-=3)if(rn[h+1]==-V){let _=rn[h+2],V=2&_?ee:4&_?1&_?er:ee:0;V&&(rs[d]=rs[rn[h]]=V),ec=h;break}}else if(189==rn.length)break;else rn[ec++]=d,rn[ec++]=_,rn[ec++]=eh}else if(2==(eo=rs[d])||1==eo){let h=eo==ee;eh=h?0:1;for(let d=ec-3;d>=0;d-=3){let _=rn[d+2];if(2&_)break;if(h)rn[d+2]|=2;else{if(4&_)break;rn[d+2]|=4}}}}}(h,ee,er,V,ec),function(h,d,_,V){for(let ee=0,er=V;ee<=_.length;ee++){let eo=ee?_[ee-1].to:h,ec=ee<_.length?_[ee].from:d;for(let eh=eo;eh<ec;){let eo=rs[eh];if(256==eo){let eo=eh+1;for(;;)if(eo==ec){if(ee==_.length)break;eo=_[ee++].to,ec=ee<_.length?_[ee].from:d}else if(256==rs[eo])eo++;else break;let ep=1==er,ef=ep==((eo<d?rs[eo]:V)==1)?ep?1:2:V;for(let d=eo,V=ee,er=V?_[V-1].to:h;d>eh;)d==er&&(d=_[--V].from,er=V?_[V-1].to:h),rs[--d]=ef;eh=eo}else er=eo,eh++}}}(ee,er,V,ec),function emitSpans(h,d,_,V,ee,er,eo){let ec=V%2?2:1;if(V%2==ee%2)for(let eh=d,ep=0;eh<_;){let d=!0,ef=!1;if(ep==er.length||eh<er[ep].from){let h=rs[eh];h!=ec&&(d=!1,ef=16==h)}let em=d||1!=ec?null:[],eg=d?V:V+1,eO=eh;i:for(;;)if(ep<er.length&&eO==er[ep].from){if(ef)break;let ey=er[ep];if(!d)for(let h=ey.to,d=ep+1;;){if(h==_)break i;if(d<er.length&&er[d].from==h)h=er[d++].to;else if(rs[h]==ec)break i;else break}ep++,em?em.push(ey):(ey.from>eh&&eo.push(new BidiSpan(eh,ey.from,eg)),computeSectionOrder(h,ey.direction==n4!=!(eg%2)?V+1:V,ee,ey.inner,ey.from,ey.to,eo),eh=ey.to),eO=ey.to}else if(eO==_||(d?rs[eO]!=ec:rs[eO]==ec))break;else eO++;em?emitSpans(h,eh,eO,V+1,ee,em,eo):eh<eO&&eo.push(new BidiSpan(eh,eO,eg)),eh=eO}else for(let eh=_,ep=er.length;eh>d;){let _=!0,ef=!1;if(!ep||eh>er[ep-1].to){let h=rs[eh-1];h!=ec&&(_=!1,ef=16==h)}let em=_||1!=ec?null:[],eg=_?V:V+1,eO=eh;i:for(;;)if(ep&&eO==er[ep-1].to){if(ef)break;let ey=er[--ep];if(!_)for(let h=ey.from,_=ep;;){if(h==d)break i;if(_&&er[_-1].to==h)h=er[--_].from;else if(rs[h-1]==ec)break i;else break}em?em.push(ey):(ey.to<eh&&eo.push(new BidiSpan(ey.to,eh,eg)),computeSectionOrder(h,ey.direction==n4!=!(eg%2)?V+1:V,ee,ey.inner,ey.from,ey.to,eo),eh=ey.from),eO=ey.from}else if(eO==d||(_?rs[eO-1]!=ec:rs[eO-1]==ec))break;else eO--;em?emitSpans(h,eO,eh,V+1,ee,em,eo):eO<eh&&eo.push(new BidiSpan(eO,eh,eg)),eh=eO}}(h,ee,er,d,_,V,eo)}(h,ee,ee,_,0,h.length,V),V}(h.text,d,_);return this.bidiCache.push(new CachedOrder(h.from,h.to,d,_,!0,V)),V}get hasFocus(){var h;return(this.dom.ownerDocument.hasFocus()||n2.safari&&(null===(h=this.inputState)||void 0===h?void 0:h.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{focusPreventScroll(this.contentDOM),this.docView.updateSelection()})}setRoot(h){this._root!=h&&(this._root=h,this.observer.setWindow((9==h.nodeType?h:h.ownerDocument).defaultView||window),this.mountStyles())}destroy(){for(let h of this.plugins)h.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(h,d={}){return rb.of(new ScrollTarget("number"==typeof h?dist_EditorSelection.cursor(h):h,d.y,d.x,d.yMargin,d.xMargin))}scrollSnapshot(){let{scrollTop:h,scrollLeft:d}=this.scrollDOM,_=this.viewState.scrollAnchorAt(h);return rb.of(new ScrollTarget(dist_EditorSelection.cursor(_.from),"start","start",_.top-h,d,!0))}static domEventHandlers(h){return dist_ViewPlugin.define(()=>({}),{eventHandlers:h})}static domEventObservers(h){return dist_ViewPlugin.define(()=>({}),{eventObservers:h})}static theme(h,d){let _=StyleModule.newName(),V=[rY.of(_),rR.of(buildTheme(`.${_}`,h))];return d&&d.dark&&V.push(rG.of(!0)),V}static baseTheme(h){return n_.lowest(rR.of(buildTheme("."+rH,h,r0)))}static findFromDOM(h){var d;let _=h.querySelector(".cm-content"),V=_&&ContentView.get(_)||ContentView.get(h);return(null===(d=null==V?void 0:V.rootView)||void 0===d?void 0:d.view)||null}};EditorView.styleModule=rR,EditorView.inputHandler=rg,EditorView.focusChangeEffect=rO,EditorView.perLineTextDirection=ry,EditorView.exceptionSink=rd,EditorView.updateListener=rp,EditorView.editable=rS,EditorView.mouseSelectionStyle=ru,EditorView.dragMovesSelection=rl,EditorView.clickAddsSelectionRange=ra,EditorView.decorations=rT,EditorView.outerDecorations=rE,EditorView.atomicRanges=rC,EditorView.bidiIsolatedRanges=rP,EditorView.scrollMargins=rI,EditorView.darkTheme=rG,EditorView.cspNonce=Facet.define({combine:h=>h.length?h[0]:""}),EditorView.contentAttributes=rk,EditorView.editorAttributes=rx,EditorView.lineWrapping=EditorView.contentAttributes.of({class:"cm-lineWrapping"}),EditorView.announce=dist_StateEffect.define();let r7=4096,r3={};let CachedOrder=class CachedOrder{constructor(h,d,_,V,ee,er){this.from=h,this.to=d,this.dir=_,this.isolates=V,this.fresh=ee,this.order=er}static update(h,d){if(d.empty&&!h.some(h=>h.fresh))return h;let _=[],V=h.length?h[h.length-1].dir:n3.LTR;for(let ee=Math.max(0,h.length-10);ee<h.length;ee++){let er=h[ee];er.dir!=V||d.touchesRange(er.from,er.to)||_.push(new CachedOrder(d.mapPos(er.from,1),d.mapPos(er.to,-1),er.dir,er.isolates,!1,er.order))}return _}};function attrsFromFacet(h,d,_){for(let V=h.state.facet(d),ee=V.length-1;ee>=0;ee--){let d=V[ee],er="function"==typeof d?d(h):d;er&&combineAttrs(er,_)}return _}let r4=n2.mac?"mac":n2.windows?"win":n2.linux?"linux":"key";function modifiers(h,d,_){return d.altKey&&(h="Alt-"+h),d.ctrlKey&&(h="Ctrl-"+h),d.metaKey&&(h="Meta-"+h),!1!==_&&d.shiftKey&&(h="Shift-"+h),h}let r6=n_.default(EditorView.domEventHandlers({keydown:(h,d)=>{var _,V,ee,er,eo;let ec,eh,ep,ef,em,eg,eO,ey,ev,eS,e_,ew,ex;return _=(ec=d.state.facet(r9),(eh=r8.get(ec))||r8.set(ec,eh=function(h,d=r4){let _=Object.create(null),V=Object.create(null),checkPrefix=(h,d)=>{let _=V[h];if(null==_)V[h]=d;else if(_!=d)throw Error("Key binding "+h+" is used both as a regular binding and as a multi-stroke prefix")},add=(h,V,ee,er,eo)=>{var ec,eh;let ep=_[h]||(_[h]=Object.create(null)),ef=V.split(/ (?!$)/).map(h=>(function(h,d){let _,V,ee,er;let eo=h.split(/-(?!$)/),ec=eo[eo.length-1];"Space"==ec&&(ec=" ");for(let h=0;h<eo.length-1;++h){let ec=eo[h];if(/^(cmd|meta|m)$/i.test(ec))er=!0;else if(/^a(lt)?$/i.test(ec))_=!0;else if(/^(c|ctrl|control)$/i.test(ec))V=!0;else if(/^s(hift)?$/i.test(ec))ee=!0;else if(/^mod$/i.test(ec))"mac"==d?er=!0:V=!0;else throw Error("Unrecognized modifier name: "+ec)}return _&&(ec="Alt-"+ec),V&&(ec="Ctrl-"+ec),er&&(ec="Meta-"+ec),ee&&(ec="Shift-"+ec),ec})(h,d));for(let d=1;d<ef.length;d++){let _=ef.slice(0,d).join(" ");checkPrefix(_,!0),ep[_]||(ep[_]={preventDefault:!0,stopPropagation:!1,run:[d=>{let V=ie={view:d,prefix:_,scope:h};return setTimeout(()=>{ie==V&&(ie=null)},4e3),!0}]})}let em=ef.join(" ");checkPrefix(em,!1);let eg=ep[em]||(ep[em]={preventDefault:!1,stopPropagation:!1,run:(null===(eh=null===(ec=ep._any)||void 0===ec?void 0:ec.run)||void 0===eh?void 0:eh.slice())||[]});ee&&eg.run.push(ee),er&&(eg.preventDefault=!0),eo&&(eg.stopPropagation=!0)};for(let V of h){let h=V.scope?V.scope.split(" "):["editor"];if(V.any)for(let d of h){let h=_[d]||(_[d]=Object.create(null));for(let d in h._any||(h._any={preventDefault:!1,stopPropagation:!1,run:[]}),h)h[d].run.push(V.any)}let ee=V[d]||V.key;if(ee)for(let d of h)add(d,ee,V.run,V.preventDefault,V.stopPropagation),V.shift&&add(d,"Shift-"+ee,V.shift,V.preventDefault,V.stopPropagation)}return _}(ec.reduce((h,d)=>h.concat(d),[]))),eh),V=h,ee=d,er="editor",ef=codePointSize(codePointAt(ep=("Esc"==(eo=!(nL&&V.metaKey&&V.shiftKey&&!V.ctrlKey&&!V.altKey||nF&&V.shiftKey&&V.key&&1==V.key.length||"Unidentified"==V.key)&&V.key||(V.shiftKey?nj:nD)[V.keyCode]||V.key||"Unidentified")&&(eo="Escape"),"Del"==eo&&(eo="Delete"),"Left"==eo&&(eo="ArrowLeft"),"Up"==eo&&(eo="ArrowUp"),"Right"==eo&&(eo="ArrowRight"),"Down"==eo&&(eo="ArrowDown"),eo),0))==ep.length&&" "!=ep,em="",eg=!1,eO=!1,ey=!1,ie&&ie.view==ee&&ie.scope==er&&(em=ie.prefix+" ",0>rM.indexOf(V.keyCode)&&(eO=!0,ie=null)),ev=new Set,eS=h=>{if(h){for(let d of h.run)if(!ev.has(d)&&(ev.add(d),d(ee,V)))return h.stopPropagation&&(ey=!0),!0;h.preventDefault&&(h.stopPropagation&&(ey=!0),eO=!0)}return!1},(e_=_[er])&&(eS(e_[em+modifiers(ep,V,!ef)])?eg=!0:ef&&(V.altKey||V.metaKey||V.ctrlKey)&&!(n2.windows&&V.ctrlKey&&V.altKey)&&(ew=nD[V.keyCode])&&ew!=ep?eS(e_[em+modifiers(ew,V,!0)])?eg=!0:V.shiftKey&&(ex=nj[V.keyCode])!=ep&&ex!=ew&&eS(e_[em+modifiers(ex,V,!1)])&&(eg=!0):ef&&V.shiftKey&&eS(e_[em+modifiers(ep,V,!0)])&&(eg=!0),!eg&&eS(e_._any)&&(eg=!0)),eO&&(eg=!0),eg&&ey&&V.stopPropagation(),eg}})),r9=Facet.define({enables:r6}),r8=new WeakMap,ie=null;let RectangleMarker=class RectangleMarker{constructor(h,d,_,V,ee){this.className=h,this.left=d,this.top=_,this.width=V,this.height=ee}draw(){let h=document.createElement("div");return h.className=this.className,this.adjust(h),h}update(h,d){return d.className==this.className&&(this.adjust(h),!0)}adjust(h){h.style.left=this.left+"px",h.style.top=this.top+"px",null!=this.width&&(h.style.width=this.width+"px"),h.style.height=this.height+"px"}eq(h){return this.left==h.left&&this.top==h.top&&this.width==h.width&&this.height==h.height&&this.className==h.className}static forRange(h,d,_){if(!_.empty)return function(h,d,_){if(_.to<=h.viewport.from||_.from>=h.viewport.to)return[];let V=Math.max(_.from,h.viewport.from),ee=Math.min(_.to,h.viewport.to),er=h.textDirection==n3.LTR,eo=h.contentDOM,ec=eo.getBoundingClientRect(),eh=getBase(h),ep=eo.querySelector(".cm-line"),ef=ep&&window.getComputedStyle(ep),em=ec.left+(ef?parseInt(ef.paddingLeft)+Math.min(0,parseInt(ef.textIndent)):0),eg=ec.right-(ef?parseInt(ef.paddingRight):0),eO=blockAt(h,V),ey=blockAt(h,ee),ev=eO.type==n7.Text?eO:null,eS=ey.type==n7.Text?ey:null;if(ev&&(h.lineWrapping||eO.widgetLineBreaks)&&(ev=wrappedLine(h,V,ev)),eS&&(h.lineWrapping||ey.widgetLineBreaks)&&(eS=wrappedLine(h,ee,eS)),ev&&eS&&ev.from==eS.from)return pieces(drawForLine(_.from,_.to,ev));{let d=ev?drawForLine(_.from,null,ev):drawForWidget(eO,!1),V=eS?drawForLine(null,_.to,eS):drawForWidget(ey,!0),ee=[];return(ev||eO).to<(eS||ey).from-(ev&&eS?1:0)||eO.widgetLineBreaks>1&&d.bottom+h.defaultLineHeight/2<V.top?ee.push(piece(em,d.bottom,eg,V.top)):d.bottom<V.top&&h.elementAtHeight((d.bottom+V.top)/2).type==n7.Text&&(d.bottom=V.top=(d.bottom+V.top)/2),pieces(d).concat(ee).concat(pieces(V))}function piece(h,_,V,ee){return new RectangleMarker(d,h-eh.left,_-eh.top-.01,V-h,ee-_+.01)}function pieces({top:h,bottom:d,horizontal:_}){let V=[];for(let ee=0;ee<_.length;ee+=2)V.push(piece(_[ee],h,_[ee+1],d));return V}function drawForLine(d,_,V){let ee=1e9,eo=-1e9,ec=[];function addSpan(d,_,eh,ep,ef){let eO=h.coordsAtPos(d,d==V.to?-2:2),ey=h.coordsAtPos(eh,eh==V.from?2:-2);eO&&ey&&(ee=Math.min(eO.top,ey.top,ee),eo=Math.max(eO.bottom,ey.bottom,eo),ef==n3.LTR?ec.push(er&&_?em:eO.left,er&&ep?eg:ey.right):ec.push(!er&&ep?em:ey.left,!er&&_?eg:eO.right))}let eh=null!=d?d:V.from,ep=null!=_?_:V.to;for(let V of h.visibleRanges)if(V.to>eh&&V.from<ep)for(let ee=Math.max(V.from,eh),er=Math.min(V.to,ep);;){let V=h.state.doc.lineAt(ee);for(let eo of h.bidiSpans(V)){let h=eo.from+V.from,ec=eo.to+V.from;if(h>=er)break;ec>ee&&addSpan(Math.max(h,ee),null==d&&h<=eh,Math.min(ec,er),null==_&&ec>=ep,eo.dir)}if((ee=V.to+1)>=er)break}return 0==ec.length&&addSpan(eh,null==d,ep,null==_,h.textDirection),{top:ee,bottom:eo,horizontal:ec}}function drawForWidget(h,d){let _=ec.top+(d?h.top:h.bottom);return{top:_,bottom:_,horizontal:[]}}}(h,d,_);{let V=h.coordsAtPos(_.head,_.assoc||1);if(!V)return[];let ee=getBase(h);return[new RectangleMarker(d,V.left-ee.left,V.top-ee.top,null,V.bottom-V.top)]}}};function getBase(h){let d=h.scrollDOM.getBoundingClientRect();return{left:(h.textDirection==n3.LTR?d.left:d.right-h.scrollDOM.clientWidth*h.scaleX)-h.scrollDOM.scrollLeft*h.scaleX,top:d.top-h.scrollDOM.scrollTop*h.scaleY}}function wrappedLine(h,d,_){let V=dist_EditorSelection.cursor(d);return{from:Math.max(_.from,h.moveToLineBoundary(V,!1,!0).from),to:Math.min(_.to,h.moveToLineBoundary(V,!0,!0).from),type:n7.Text}}let ii=!n2.ios,io={".cm-line":{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};function iterMatches(h,d,_,V,ee){d.lastIndex=0;for(let er=h.iterRange(_,V),eo=_,ec;!er.next().done;eo+=er.value.length)if(!er.lineBreak)for(;ec=d.exec(er.value);)ee(eo+ec.index,ec)}ii&&(io[".cm-line"].caretColor="transparent !important",io[".cm-content"]={caretColor:"transparent !important"});let MatchDecorator=class MatchDecorator{constructor(h){let{regexp:d,decoration:_,decorate:V,boundary:ee,maxLength:er=1e3}=h;if(!d.global)throw RangeError("The regular expression given to MatchDecorator should have its 'g' flag set");if(this.regexp=d,V)this.addMatch=(h,d,_,ee)=>V(ee,_,_+h[0].length,h,d);else if("function"==typeof _)this.addMatch=(h,d,V,ee)=>{let er=_(h,d,V);er&&ee(V,V+h[0].length,er)};else if(_)this.addMatch=(h,d,V,ee)=>ee(V,V+h[0].length,_);else throw RangeError("Either 'decorate' or 'decoration' should be provided to MatchDecorator");this.boundary=ee,this.maxLength=er}createDeco(h){let d=new dist_RangeSetBuilder,_=d.add.bind(d);for(let{from:d,to:V}of function(h,d){let _=h.visibleRanges;if(1==_.length&&_[0].from==h.viewport.from&&_[0].to==h.viewport.to)return _;let V=[];for(let{from:ee,to:er}of _)ee=Math.max(h.state.doc.lineAt(ee).from,ee-d),er=Math.min(h.state.doc.lineAt(er).to,er+d),V.length&&V[V.length-1].to>=ee?V[V.length-1].to=er:V.push({from:ee,to:er});return V}(h,this.maxLength))iterMatches(h.state.doc,this.regexp,d,V,(d,V)=>this.addMatch(V,h,d,_));return d.finish()}updateDeco(h,d){let _=1e9,V=-1;return(h.docChanged&&h.changes.iterChanges((d,ee,er,eo)=>{eo>h.view.viewport.from&&er<h.view.viewport.to&&(_=Math.min(er,_),V=Math.max(eo,V))}),h.viewportChanged||V-_>1e3)?this.createDeco(h.view):V>-1?this.updateRange(h.view,d.map(h.changes),_,V):d}updateRange(h,d,_,V){for(let ee of h.visibleRanges){let er=Math.max(ee.from,_),eo=Math.min(ee.to,V);if(eo>er){let _=h.state.doc.lineAt(er),V=_.to<eo?h.state.doc.lineAt(eo):_,ec=Math.max(ee.from,_.from),eh=Math.min(ee.to,V.to);if(this.boundary){for(;er>_.from;er--)if(this.boundary.test(_.text[er-1-_.from])){ec=er;break}for(;eo<V.to;eo++)if(this.boundary.test(V.text[eo-V.from])){eh=eo;break}}let ep=[],ef,add=(h,d,_)=>ep.push(_.range(h,d));if(_==V)for(this.regexp.lastIndex=ec-_.from;(ef=this.regexp.exec(_.text))&&ef.index<eh-_.from;)this.addMatch(ef,h,ef.index+_.from,add);else iterMatches(h.state.doc,this.regexp,ec,eh,(d,_)=>this.addMatch(_,h,d,add));d=d.update({filterFrom:ec,filterTo:eh,filter:(h,d)=>h<ec||d>eh,add:ep})}}return d}};let ia=null!=/x/.unicode?"gu":"g",il=RegExp("[\x00-\b\n-\x1f\x7f-\x9f\xad؜​‎‏\u2028\u2029‭‮⁦⁧⁩\uFEFF￹-￼]",ia),ip={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8237:"left-to-right override",8238:"right-to-left override",8294:"left-to-right isolate",8295:"right-to-left isolate",8297:"pop directional isolate",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"},im=null,ig=Facet.define({combine(h){let d=combineConfig(h,{render:null,specialChars:il,addSpecialChars:null});return(d.replaceTabs=!function(){var h;if(null==im&&"undefined"!=typeof document&&document.body){let d=document.body.style;im=(null!==(h=d.tabSize)&&void 0!==h?h:d.MozTabSize)!=null}return im||!1}())&&(d.specialChars=RegExp("	|"+d.specialChars.source,ia)),d.addSpecialChars&&(d.specialChars=RegExp(d.specialChars.source+"|"+d.addSpecialChars.source,ia)),d}}),iO=null;let SpecialCharWidget=class SpecialCharWidget extends WidgetType{constructor(h,d){super(),this.options=h,this.code=d}eq(h){return h.code==this.code}toDOM(h){var d;let _=(d=this.code)>=32?"•":10==d?"␤":String.fromCharCode(9216+d),V=h.state.phrase("Control character")+" "+(ip[this.code]||"0x"+this.code.toString(16)),ee=this.options.render&&this.options.render(this.code,V,_);if(ee)return ee;let er=document.createElement("span");return er.textContent=_,er.title=V,er.setAttribute("aria-label",V),er.className="cm-specialChar",er}ignoreEvent(){return!1}};let TabWidget=class TabWidget extends WidgetType{constructor(h){super(),this.width=h}eq(h){return h.width==this.width}toDOM(){let h=document.createElement("span");return h.textContent="	",h.className="cm-tab",h.style.width=this.width+"px",h}ignoreEvent(){return!1}};let iy=Decoration.line({class:"cm-activeLine"}),iv=dist_ViewPlugin.fromClass(class{constructor(h){this.decorations=this.getDeco(h)}update(h){(h.docChanged||h.selectionSet)&&(this.decorations=this.getDeco(h.view))}getDeco(h){let d=-1,_=[];for(let V of h.state.selection.ranges){let ee=h.lineBlockAt(V.head);ee.from>d&&(_.push(iy.range(ee.from)),d=ee.from)}return Decoration.set(_)}},{decorations:h=>h.decorations}),iS="-10000px";let TooltipViewManager=class TooltipViewManager{constructor(h,d,_){this.facet=d,this.createTooltipView=_,this.input=h.state.facet(d),this.tooltips=this.input.filter(h=>h),this.tooltipViews=this.tooltips.map(_)}update(h,d){var _;let V=h.state.facet(this.facet),ee=V.filter(h=>h);if(V===this.input){for(let d of this.tooltipViews)d.update&&d.update(h);return!1}let er=[],eo=d?[]:null;for(let _=0;_<ee.length;_++){let V=ee[_],ec=-1;if(V){for(let h=0;h<this.tooltips.length;h++){let d=this.tooltips[h];d&&d.create==V.create&&(ec=h)}if(ec<0)er[_]=this.createTooltipView(V),eo&&(eo[_]=!!V.above);else{let V=er[_]=this.tooltipViews[ec];eo&&(eo[_]=d[ec]),V.update&&V.update(h)}}}for(let h of this.tooltipViews)0>er.indexOf(h)&&(h.dom.remove(),null===(_=h.destroy)||void 0===_||_.call(h));return d&&(eo.forEach((h,_)=>d[_]=h),d.length=eo.length),this.input=V,this.tooltips=ee,this.tooltipViews=er,!0}};function windowSpace(h){let{win:d}=h;return{top:0,left:0,bottom:d.innerHeight,right:d.innerWidth}}let i_=Facet.define({combine:h=>{var d,_,V;return{position:n2.ios?"absolute":(null===(d=h.find(h=>h.position))||void 0===d?void 0:d.position)||"fixed",parent:(null===(_=h.find(h=>h.parent))||void 0===_?void 0:_.parent)||null,tooltipSpace:(null===(V=h.find(h=>h.tooltipSpace))||void 0===V?void 0:V.tooltipSpace)||windowSpace}}}),iw=new WeakMap,ix=dist_ViewPlugin.fromClass(class{constructor(h){this.view=h,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let d=h.state.facet(i_);this.position=d.position,this.parent=d.parent,this.classes=h.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.manager=new TooltipViewManager(h,iE,h=>this.createTooltip(h)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver(h=>{Date.now()>this.lastTransaction-50&&h.length>0&&h[h.length-1].intersectionRatio<1&&this.measureSoon()},{threshold:[1]}):null,this.observeIntersection(),h.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver)for(let h of(this.intersectionObserver.disconnect(),this.manager.tooltipViews))this.intersectionObserver.observe(h.dom)}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout(()=>{this.measureTimeout=-1,this.maybeMeasure()},50))}update(h){h.transactions.length&&(this.lastTransaction=Date.now());let d=this.manager.update(h,this.above);d&&this.observeIntersection();let _=d||h.geometryChanged,V=h.state.facet(i_);if(V.position!=this.position&&!this.madeAbsolute){for(let h of(this.position=V.position,this.manager.tooltipViews))h.dom.style.position=this.position;_=!0}if(V.parent!=this.parent){for(let h of(this.parent&&this.container.remove(),this.parent=V.parent,this.createContainer(),this.manager.tooltipViews))this.container.appendChild(h.dom);_=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);_&&this.maybeMeasure()}createTooltip(h){let d=h.create(this.view);if(d.dom.classList.add("cm-tooltip"),h.arrow&&!d.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let h=document.createElement("div");h.className="cm-tooltip-arrow",d.dom.appendChild(h)}return d.dom.style.position=this.position,d.dom.style.top=iS,d.dom.style.left="0px",this.container.appendChild(d.dom),d.mount&&d.mount(this.view),d}destroy(){var h,d;for(let d of(this.view.win.removeEventListener("resize",this.measureSoon),this.manager.tooltipViews))d.dom.remove(),null===(h=d.destroy)||void 0===h||h.call(d);this.parent&&this.container.remove(),null===(d=this.intersectionObserver)||void 0===d||d.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let h=this.view.dom.getBoundingClientRect(),d=1,_=1,V=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:h}=this.manager.tooltipViews[0];if(n2.gecko)V=h.offsetParent!=this.container.ownerDocument.body;else if(h.style.top==iS&&"0px"==h.style.left){let d=h.getBoundingClientRect();V=Math.abs(d.top+1e4)>1||Math.abs(d.left)>1}}if(V||"absolute"==this.position){if(this.parent){let h=this.parent.getBoundingClientRect();h.width&&h.height&&(d=h.width/this.parent.offsetWidth,_=h.height/this.parent.offsetHeight)}else({scaleX:d,scaleY:_}=this.view.viewState)}return{editor:h,parent:this.parent?this.container.getBoundingClientRect():h,pos:this.manager.tooltips.map((h,d)=>{let _=this.manager.tooltipViews[d];return _.getCoords?_.getCoords(h.pos):this.view.coordsAtPos(h.pos)}),size:this.manager.tooltipViews.map(({dom:h})=>h.getBoundingClientRect()),space:this.view.state.facet(i_).tooltipSpace(this.view),scaleX:d,scaleY:_,makeAbsolute:V}}writeMeasure(h){var d;if(h.makeAbsolute)for(let h of(this.madeAbsolute=!0,this.position="absolute",this.manager.tooltipViews))h.dom.style.position="absolute";let{editor:_,space:V,scaleX:ee,scaleY:er}=h,eo=[];for(let ec=0;ec<this.manager.tooltips.length;ec++){let eh=this.manager.tooltips[ec],ep=this.manager.tooltipViews[ec],{dom:ef}=ep,em=h.pos[ec],eg=h.size[ec];if(!em||em.bottom<=Math.max(_.top,V.top)||em.top>=Math.min(_.bottom,V.bottom)||em.right<Math.max(_.left,V.left)-.1||em.left>Math.min(_.right,V.right)+.1){ef.style.top=iS;continue}let eO=eh.arrow?ep.dom.querySelector(".cm-tooltip-arrow"):null,ey=eO?7:0,ev=eg.right-eg.left,eS=null!==(d=iw.get(ep))&&void 0!==d?d:eg.bottom-eg.top,e_=ep.offset||iT,ew=this.view.textDirection==n3.LTR,ex=eg.width>V.right-V.left?ew?V.left:V.right-eg.width:ew?Math.min(em.left-(eO?14:0)+e_.x,V.right-ev):Math.max(V.left,em.left-ev+(eO?14:0)-e_.x),ek=this.above[ec];!eh.strictSide&&(ek?em.top-(eg.bottom-eg.top)-e_.y<V.top:em.bottom+(eg.bottom-eg.top)+e_.y>V.bottom)&&ek==V.bottom-em.bottom>em.top-V.top&&(ek=this.above[ec]=!ek);let eT=(ek?em.top-V.top:V.bottom-em.bottom)-ey;if(eT<eS&&!1!==ep.resize){if(eT<this.view.defaultLineHeight){ef.style.top=iS;continue}iw.set(ep,eS),ef.style.height=(eS=eT)/er+"px"}else ef.style.height&&(ef.style.height="");let eE=ek?em.top-eS-ey-e_.y:em.bottom+ey+e_.y,eC=ex+ev;if(!0!==ep.overlap)for(let h of eo)h.left<eC&&h.right>ex&&h.top<eE+eS&&h.bottom>eE&&(eE=ek?h.top-eS-2-ey:h.bottom+ey+2);if("absolute"==this.position?(ef.style.top=(eE-h.parent.top)/er+"px",ef.style.left=(ex-h.parent.left)/ee+"px"):(ef.style.top=eE/er+"px",ef.style.left=ex/ee+"px"),eO){let h=em.left+(ew?e_.x:-e_.x)-(ex+14-7);eO.style.left=h/ee+"px"}!0!==ep.overlap&&eo.push({left:ex,top:eE,right:eC,bottom:eE+eS}),ef.classList.toggle("cm-tooltip-above",ek),ef.classList.toggle("cm-tooltip-below",!ek),ep.positioned&&ep.positioned(h.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let h of this.manager.tooltipViews)h.dom.style.top=iS}},{eventObservers:{scroll(){this.maybeMeasure()}}}),ik=EditorView.baseTheme({".cm-tooltip":{zIndex:100,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),iT={x:0,y:0},iE=Facet.define({enables:[ix,ik]}),iC=Facet.define();let HoverTooltipHost=class HoverTooltipHost{static create(h){return new HoverTooltipHost(h)}constructor(h){this.view=h,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new TooltipViewManager(h,iC,h=>this.createHostedView(h))}createHostedView(h){let d=h.create(this.view);return d.dom.classList.add("cm-tooltip-section"),this.dom.appendChild(d.dom),this.mounted&&d.mount&&d.mount(this.view),d}mount(h){for(let d of this.manager.tooltipViews)d.mount&&d.mount(h);this.mounted=!0}positioned(h){for(let d of this.manager.tooltipViews)d.positioned&&d.positioned(h)}update(h){this.manager.update(h)}destroy(){var h;for(let d of this.manager.tooltipViews)null===(h=d.destroy)||void 0===h||h.call(d)}passProp(h){let d;for(let _ of this.manager.tooltipViews){let V=_[h];if(void 0!==V){if(void 0===d)d=V;else if(d!==V)return}}return d}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}};let iP=Facet.define({combine(h){let d,_;for(let V of h)d=d||V.topContainer,_=_||V.bottomContainer;return{topContainer:d,bottomContainer:_}}}),iI=dist_ViewPlugin.fromClass(class{constructor(h){this.input=h.state.facet(iR),this.specs=this.input.filter(h=>h),this.panels=this.specs.map(d=>d(h));let d=h.state.facet(iP);for(let _ of(this.top=new PanelGroup(h,!0,d.topContainer),this.bottom=new PanelGroup(h,!1,d.bottomContainer),this.top.sync(this.panels.filter(h=>h.top)),this.bottom.sync(this.panels.filter(h=>!h.top)),this.panels))_.dom.classList.add("cm-panel"),_.mount&&_.mount()}update(h){let d=h.state.facet(iP);this.top.container!=d.topContainer&&(this.top.sync([]),this.top=new PanelGroup(h.view,!0,d.topContainer)),this.bottom.container!=d.bottomContainer&&(this.bottom.sync([]),this.bottom=new PanelGroup(h.view,!1,d.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let _=h.state.facet(iR);if(_!=this.input){let d=_.filter(h=>h),V=[],ee=[],er=[],eo=[];for(let _ of d){let d=this.specs.indexOf(_),ec;d<0?(ec=_(h.view),eo.push(ec)):(ec=this.panels[d]).update&&ec.update(h),V.push(ec),(ec.top?ee:er).push(ec)}for(let h of(this.specs=d,this.panels=V,this.top.sync(ee),this.bottom.sync(er),eo))h.dom.classList.add("cm-panel"),h.mount&&h.mount()}else for(let d of this.panels)d.update&&d.update(h)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:h=>EditorView.scrollMargins.of(d=>{let _=d.plugin(h);return _&&{top:_.top.scrollMargin(),bottom:_.bottom.scrollMargin()}})});let PanelGroup=class PanelGroup{constructor(h,d,_){this.view=h,this.top=d,this.container=_,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(h){for(let d of this.panels)d.destroy&&0>h.indexOf(d)&&d.destroy();this.panels=h,this.syncDOM()}syncDOM(){if(0==this.panels.length){this.dom&&(this.dom.remove(),this.dom=void 0);return}if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let h=this.container||this.view.dom;h.insertBefore(this.dom,this.top?h.firstChild:null)}let h=this.dom.firstChild;for(let d of this.panels)if(d.dom.parentNode==this.dom){for(;h!=d.dom;)h=rm(h);h=h.nextSibling}else this.dom.insertBefore(d.dom,h);for(;h;)h=rm(h)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let h of this.classes.split(" "))h&&this.container.classList.remove(h);for(let h of(this.classes=this.view.themeClasses).split(" "))h&&this.container.classList.add(h)}}};function rm(h){let d=h.nextSibling;return h.remove(),d}let iR=Facet.define({enables:iI});let dist_GutterMarker=class dist_GutterMarker extends RangeValue{compare(h){return this==h||this.constructor==h.constructor&&this.eq(h)}eq(h){return!1}destroy(h){}};dist_GutterMarker.prototype.elementClass="",dist_GutterMarker.prototype.toDOM=void 0,dist_GutterMarker.prototype.mapMode=ny.TrackBefore,dist_GutterMarker.prototype.startSide=dist_GutterMarker.prototype.endSide=-1,dist_GutterMarker.prototype.point=!0;let iA=Facet.define(),i$=Facet.define(),iN=Facet.define({combine:h=>h.some(h=>h)}),iM=dist_ViewPlugin.fromClass(class{constructor(h){for(let d of(this.view=h,this.prevViewport=h.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=h.state.facet(i$).map(d=>new SingleGutterView(h,d)),this.gutters))this.dom.appendChild(d.dom);this.fixed=!h.state.facet(iN),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),h.scrollDOM.insertBefore(this.dom,h.contentDOM)}update(h){if(this.updateGutters(h)){let d=this.prevViewport,_=h.view.viewport,V=Math.min(d.to,_.to)-Math.max(d.from,_.from);this.syncGutters(V<(_.to-_.from)*.8)}h.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight+"px"),this.view.state.facet(iN)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=h.view.viewport}syncGutters(h){let d=this.dom.nextSibling;h&&this.dom.remove();let _=dist_RangeSet.iter(this.view.state.facet(iA),this.view.viewport.from),V=[],ee=this.gutters.map(h=>new UpdateContext(h,this.view.viewport,-this.view.documentPadding.top));for(let h of this.view.viewportLineBlocks)if(V.length&&(V=[]),Array.isArray(h.type)){let d=!0;for(let er of h.type)if(er.type==n7.Text&&d){for(let h of(advanceCursor(_,V,er.from),ee))h.line(this.view,er,V);d=!1}else if(er.widget)for(let h of ee)h.widget(this.view,er)}else if(h.type==n7.Text)for(let d of(advanceCursor(_,V,h.from),ee))d.line(this.view,h,V);else if(h.widget)for(let d of ee)d.widget(this.view,h);for(let h of ee)h.finish();h&&this.view.scrollDOM.insertBefore(this.dom,d)}updateGutters(h){let d=h.startState.facet(i$),_=h.state.facet(i$),V=h.docChanged||h.heightChanged||h.viewportChanged||!dist_RangeSet.eq(h.startState.facet(iA),h.state.facet(iA),h.view.viewport.from,h.view.viewport.to);if(d==_)for(let d of this.gutters)d.update(h)&&(V=!0);else{V=!0;let ee=[];for(let V of _){let _=d.indexOf(V);_<0?ee.push(new SingleGutterView(this.view,V)):(this.gutters[_].update(h),ee.push(this.gutters[_]))}for(let h of this.gutters)h.dom.remove(),0>ee.indexOf(h)&&h.destroy();for(let h of ee)this.dom.appendChild(h.dom);this.gutters=ee}return V}destroy(){for(let h of this.gutters)h.destroy();this.dom.remove()}},{provide:h=>EditorView.scrollMargins.of(d=>{let _=d.plugin(h);return _&&0!=_.gutters.length&&_.fixed?d.textDirection==n3.LTR?{left:_.dom.offsetWidth*d.scaleX}:{right:_.dom.offsetWidth*d.scaleX}:null})});function dist_asArray(h){return Array.isArray(h)?h:[h]}function advanceCursor(h,d,_){for(;h.value&&h.from<=_;)h.from==_&&d.push(h.value),h.next()}let UpdateContext=class UpdateContext{constructor(h,d,_){this.gutter=h,this.height=_,this.i=0,this.cursor=dist_RangeSet.iter(h.markers,d.from)}addElement(h,d,_){let{gutter:V}=this,ee=(d.top-this.height)/h.scaleY,er=d.height/h.scaleY;if(this.i==V.elements.length){let d=new GutterElement(h,er,ee,_);V.elements.push(d),V.dom.appendChild(d.dom)}else V.elements[this.i].update(h,er,ee,_);this.height=d.bottom,this.i++}line(h,d,_){let V=[];advanceCursor(this.cursor,V,d.from),_.length&&(V=V.concat(_));let ee=this.gutter.config.lineMarker(h,d,V);ee&&V.unshift(ee);let er=this.gutter;(0!=V.length||er.config.renderEmptyElements)&&this.addElement(h,d,V)}widget(h,d){let _=this.gutter.config.widgetMarker(h,d.widget,d);_&&this.addElement(h,d,[_])}finish(){let h=this.gutter;for(;h.elements.length>this.i;){let d=h.elements.pop();h.dom.removeChild(d.dom),d.destroy()}}};let SingleGutterView=class SingleGutterView{constructor(h,d){for(let _ in this.view=h,this.config=d,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:""),d.domEventHandlers)this.dom.addEventListener(_,V=>{let ee=V.target,er;if(ee!=this.dom&&this.dom.contains(ee)){for(;ee.parentNode!=this.dom;)ee=ee.parentNode;let h=ee.getBoundingClientRect();er=(h.top+h.bottom)/2}else er=V.clientY;let eo=h.lineBlockAtHeight(er-h.documentTop);d.domEventHandlers[_](h,eo,V)&&V.preventDefault()});this.markers=dist_asArray(d.markers(h)),d.initialSpacer&&(this.spacer=new GutterElement(h,0,0,[d.initialSpacer(h)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(h){let d=this.markers;if(this.markers=dist_asArray(this.config.markers(h.view)),this.spacer&&this.config.updateSpacer){let d=this.config.updateSpacer(this.spacer.markers[0],h);d!=this.spacer.markers[0]&&this.spacer.update(h.view,0,0,[d])}let _=h.view.viewport;return!dist_RangeSet.eq(this.markers,d,_.from,_.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(h)}destroy(){for(let h of this.elements)h.destroy()}};let GutterElement=class GutterElement{constructor(h,d,_,V){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(h,d,_,V)}update(h,d,_,V){this.height!=d&&(this.height=d,this.dom.style.height=d+"px"),this.above!=_&&(this.dom.style.marginTop=(this.above=_)?_+"px":""),!function(h,d){if(h.length!=d.length)return!1;for(let _=0;_<h.length;_++)if(!h[_].compare(d[_]))return!1;return!0}(this.markers,V)&&this.setMarkers(h,V)}setMarkers(h,d){let _="cm-gutterElement",V=this.dom.firstChild;for(let ee=0,er=0;;){let eo=er,ec=ee<d.length?d[ee++]:null,eh=!1;if(ec){let h=ec.elementClass;h&&(_+=" "+h);for(let h=er;h<this.markers.length;h++)if(this.markers[h].compare(ec)){eo=h,eh=!0;break}}else eo=this.markers.length;for(;er<eo;){let h=this.markers[er++];if(h.toDOM){h.destroy(V);let d=V.nextSibling;V.remove(),V=d}}if(!ec)break;ec.toDOM&&(eh?V=V.nextSibling:this.dom.insertBefore(ec.toDOM(h),V)),eh&&er++}this.dom.className=_,this.markers=d}destroy(){this.setMarkers(null,[])}};let iQ=Facet.define(),iD=Facet.define({combine:h=>combineConfig(h,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(h,d){let _=Object.assign({},h);for(let h in d){let V=_[h],ee=d[h];_[h]=V?(h,d,_)=>V(h,d,_)||ee(h,d,_):ee}return _}})});let NumberMarker=class NumberMarker extends dist_GutterMarker{constructor(h){super(),this.number=h}eq(h){return this.number==h.number}toDOM(){return document.createTextNode(this.number)}};function formatNumber(h,d){return h.state.facet(iD).formatNumber(d,h.state)}let ij=i$.compute([iD],h=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers:h=>h.state.facet(iQ),lineMarker:(h,d,_)=>_.some(h=>h.toDOM)?null:new NumberMarker(formatNumber(h,h.state.doc.lineAt(d.from).number)),widgetMarker:()=>null,lineMarkerChange:h=>h.startState.facet(iD)!=h.state.facet(iD),initialSpacer:h=>new NumberMarker(formatNumber(h,maxLineNumber(h.state.doc.lines))),updateSpacer(h,d){let _=formatNumber(d.view,maxLineNumber(d.view.state.doc.lines));return _==h.number?h:new NumberMarker(_)},domEventHandlers:h.facet(iD).domEventHandlers}));function maxLineNumber(h){let d=9;for(;d<h;)d=10*d+9;return d}let iL=0;let dist_Range=class dist_Range{constructor(h,d){this.from=h,this.to=d}};let dist_NodeProp=class dist_NodeProp{constructor(h={}){this.id=iL++,this.perNode=!!h.perNode,this.deserialize=h.deserialize||(()=>{throw Error("This node type doesn't define a deserialize function")})}add(h){if(this.perNode)throw RangeError("Can't add per-node props to node types");return"function"!=typeof h&&(h=dist_NodeType.match(h)),d=>{let _=h(d);return void 0===_?null:[this,_]}}};dist_NodeProp.closedBy=new dist_NodeProp({deserialize:h=>h.split(" ")}),dist_NodeProp.openedBy=new dist_NodeProp({deserialize:h=>h.split(" ")}),dist_NodeProp.group=new dist_NodeProp({deserialize:h=>h.split(" ")}),dist_NodeProp.isolate=new dist_NodeProp({deserialize:h=>{if(h&&"rtl"!=h&&"ltr"!=h&&"auto"!=h)throw RangeError("Invalid value for isolate: "+h);return h||"auto"}}),dist_NodeProp.contextHash=new dist_NodeProp({perNode:!0}),dist_NodeProp.lookAhead=new dist_NodeProp({perNode:!0}),dist_NodeProp.mounted=new dist_NodeProp({perNode:!0});let MountedTree=class MountedTree{constructor(h,d,_){this.tree=h,this.overlay=d,this.parser=_}static get(h){return h&&h.props&&h.props[dist_NodeProp.mounted.id]}};let iF=Object.create(null);let dist_NodeType=class dist_NodeType{constructor(h,d,_,V=0){this.name=h,this.props=d,this.id=_,this.flags=V}static define(h){let d=h.props&&h.props.length?Object.create(null):iF,_=(h.top?1:0)|(h.skipped?2:0)|(h.error?4:0)|(null==h.name?8:0),V=new dist_NodeType(h.name||"",d,h.id,_);if(h.props){for(let _ of h.props)if(Array.isArray(_)||(_=_(V)),_){if(_[0].perNode)throw RangeError("Can't store a per-node prop on a node type");d[_[0].id]=_[1]}}return V}prop(h){return this.props[h.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(h){if("string"==typeof h){if(this.name==h)return!0;let d=this.prop(dist_NodeProp.group);return!!d&&d.indexOf(h)>-1}return this.id==h}static match(h){let d=Object.create(null);for(let _ in h)for(let V of _.split(" "))d[V]=h[_];return h=>{for(let _=h.prop(dist_NodeProp.group),V=-1;V<(_?_.length:0);V++){let ee=d[V<0?h.name:_[V]];if(ee)return ee}}}};dist_NodeType.none=new dist_NodeType("",Object.create(null),0,8);let NodeSet=class NodeSet{constructor(h){this.types=h;for(let d=0;d<h.length;d++)if(h[d].id!=d)throw RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...h){let d=[];for(let _ of this.types){let V=null;for(let d of h){let h=d(_);h&&(V||(V=Object.assign({},_.props)),V[h[0].id]=h[1])}d.push(V?new dist_NodeType(_.name,V,_.id,_.flags):_)}return new NodeSet(d)}};let iZ=new WeakMap,iV=new WeakMap;(ef=ev||(ev={}))[ef.ExcludeBuffers=1]="ExcludeBuffers",ef[ef.IncludeAnonymous=2]="IncludeAnonymous",ef[ef.IgnoreMounts=4]="IgnoreMounts",ef[ef.IgnoreOverlays=8]="IgnoreOverlays";let dist_Tree=class dist_Tree{constructor(h,d,_,V,ee){if(this.type=h,this.children=d,this.positions=_,this.length=V,this.props=null,ee&&ee.length)for(let[h,d]of(this.props=Object.create(null),ee))this.props["number"==typeof h?h:h.id]=d}toString(){let h=MountedTree.get(this);if(h&&!h.overlay)return h.tree.toString();let d="";for(let h of this.children){let _=h.toString();_&&(d&&(d+=","),d+=_)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(d.length?"("+d+")":""):d}cursor(h=0){return new TreeCursor(this.topNode,h)}cursorAt(h,d=0,_=0){let V=iZ.get(this)||this.topNode,ee=new TreeCursor(V);return ee.moveTo(h,d),iZ.set(this,ee._tree),ee}get topNode(){return new TreeNode(this,0,0,null)}resolve(h,d=0){let _=resolveNode(iZ.get(this)||this.topNode,h,d,!1);return iZ.set(this,_),_}resolveInner(h,d=0){let _=resolveNode(iV.get(this)||this.topNode,h,d,!0);return iV.set(this,_),_}resolveStack(h,d=0){return function(h,d,_){let V=h.resolveInner(d,_),ee=null;for(let h=V instanceof TreeNode?V:V.context.parent;h;h=h.parent)if(h.index<0){let er=h.parent;(ee||(ee=[V])).push(er.resolve(d,_)),h=er}else{let er=MountedTree.get(h.tree);if(er&&er.overlay&&er.overlay[0].from<=d&&er.overlay[er.overlay.length-1].to>=d){let eo=new TreeNode(er.tree,er.overlay[0].from+h.from,-1,h);(ee||(ee=[V])).push(resolveNode(eo,d,_,!1))}}return ee?iterStack(ee):V}(this,h,d)}iterate(h){let{enter:d,leave:_,from:V=0,to:ee=this.length}=h,er=h.mode||0,eo=(er&ev.IncludeAnonymous)>0;for(let h=this.cursor(er|ev.IncludeAnonymous);;){let er=!1;if(h.from<=ee&&h.to>=V&&(!eo&&h.type.isAnonymous||!1!==d(h))){if(h.firstChild())continue;er=!0}for(;er&&_&&(eo||!h.type.isAnonymous)&&_(h),!h.nextSibling();){if(!h.parent())return;er=!0}}}prop(h){return h.perNode?this.props?this.props[h.id]:void 0:this.type.prop(h)}get propValues(){let h=[];if(this.props)for(let d in this.props)h.push([+d,this.props[d]]);return h}balance(h={}){return this.children.length<=8?this:balanceRange(dist_NodeType.none,this.children,this.positions,0,this.children.length,0,this.length,(h,d,_)=>new dist_Tree(this.type,h,d,_,this.propValues),h.makeTree||((h,d,_)=>new dist_Tree(dist_NodeType.none,h,d,_)))}static build(h){return function(h){var d;let{buffer:_,nodeSet:V,maxBufferLength:ee=1024,reused:er=[],minRepeatType:eo=V.types.length}=h,ec=Array.isArray(_)?new FlatBufferCursor(_,_.length):_,eh=V.types,ep=0,ef=0;function makeRepeatLeaf(h,d,_,ee,er,eo,ec,eh){let ep=[],ef=[];for(;h.length>ee;)ep.push(h.pop()),ef.push(d.pop()+_-er);h.push(makeTree(V.types[ec],ep,ef,eo-er,eh-eo)),d.push(er-_)}function makeTree(h,d,_,V,ee=0,er){if(ep){let h=[dist_NodeProp.contextHash,ep];er=er?[h].concat(er):[h]}if(ee>25){let h=[dist_NodeProp.lookAhead,ee];er=er?[h].concat(er):[h]}return new dist_Tree(h,d,_,V,er)}let em=[],eg=[];for(;ec.pos>0;)!function takeNode(h,d,_,em,eg,eO){let{id:ey,start:ev,end:eS,size:e_}=ec,ew=ef;for(;e_<0;){if(ec.next(),-1==e_){let d=er[ey];_.push(d),em.push(ev-h);return}if(-3==e_){ep=ey;return}if(-4==e_){ef=ey;return}throw RangeError(`Unrecognized record size: ${e_}`)}let ex=eh[ey],ek,eT,eE=ev-h;if(eS-ev<=ee&&(eT=function(h,d){let _=ec.fork(),V=0,er=0,eh=0,ep=_.end-ee,ef={size:0,start:0,skip:0};s:for(let ee=_.pos-h;_.pos>ee;){let h=_.size;if(_.id==d&&h>=0){ef.size=V,ef.start=er,ef.skip=eh,eh+=4,V+=4,_.next();continue}let ec=_.pos-h;if(h<0||ec<ee||_.start<ep)break;let em=_.id>=eo?4:0,eg=_.start;for(_.next();_.pos>ec;){if(_.size<0){if(-3==_.size)em+=4;else break s}else _.id>=eo&&(em+=4);_.next()}er=eg,V+=h,eh+=em}return(d<0||V==h)&&(ef.size=V,ef.start=er,ef.skip=eh),ef.size>4?ef:void 0}(ec.pos-d,eg))){let d=new Uint16Array(eT.size-eT.skip),_=ec.pos-eT.size,ee=d.length;for(;ec.pos>_;)ee=function copyToBuffer(h,d,_){let{id:V,start:ee,end:er,size:eh}=ec;if(ec.next(),eh>=0&&V<eo){let eo=_;if(eh>4){let V=ec.pos-(eh-4);for(;ec.pos>V;)_=copyToBuffer(h,d,_)}d[--_]=eo,d[--_]=er-h,d[--_]=ee-h,d[--_]=V}else -3==eh?ep=V:-4==eh&&(ef=V);return _}(eT.start,d,ee);ek=new TreeBuffer(d,eS-eT.start,V),eE=eT.start-h}else{let h=ec.pos-e_;ec.next();let d=[],_=[],er=ey>=eo?ey:-1,eh=0,ep=eS;for(;ec.pos>h;)er>=0&&ec.id==er&&ec.size>=0?(ec.end<=ep-ee&&(makeRepeatLeaf(d,_,ev,eh,ec.end,ep,er,ew),eh=d.length,ep=ec.end),ec.next()):eO>2500?function(h,d,_,er){let eo=[],eh=0,ep=-1;for(;ec.pos>d;){let{id:h,start:d,end:_,size:V}=ec;if(V>4)ec.next();else if(ep>-1&&d<ep)break;else ep<0&&(ep=_-ee),eo.push(h,d,_),eh++,ec.next()}if(eh){let d=new Uint16Array(4*eh),ee=eo[eo.length-2];for(let h=eo.length-3,_=0;h>=0;h-=3)d[_++]=eo[h],d[_++]=eo[h+1]-ee,d[_++]=eo[h+2]-ee,d[_++]=_;_.push(new TreeBuffer(d,eo[2]-ee,V)),er.push(ee-h)}}(ev,h,d,_):takeNode(ev,h,d,_,er,eO+1);if(er>=0&&eh>0&&eh<d.length&&makeRepeatLeaf(d,_,ev,eh,ev,ep,er,ew),d.reverse(),_.reverse(),er>-1&&eh>0){let h=function(h){return(d,_,V)=>{let ee=0,er=d.length-1,eo,ec;if(er>=0&&(eo=d[er])instanceof dist_Tree){if(!er&&eo.type==h&&eo.length==V)return eo;(ec=eo.prop(dist_NodeProp.lookAhead))&&(ee=_[er]+eo.length+ec)}return makeTree(h,d,_,V,ee)}}(ex);ek=balanceRange(ex,d,_,0,d.length,0,eS-ev,h,h)}else ek=makeTree(ex,d,_,eS-ev,ew-eS)}_.push(ek),em.push(eE)}(h.start||0,h.bufferStart||0,em,eg,-1,0);let eO=null!==(d=h.length)&&void 0!==d?d:em.length?eg[0]+em[0].length:0;return new dist_Tree(eh[h.topID],em.reverse(),eg.reverse(),eO)}(h)}};dist_Tree.empty=new dist_Tree(dist_NodeType.none,[],[],0);let FlatBufferCursor=class FlatBufferCursor{constructor(h,d){this.buffer=h,this.index=d}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new FlatBufferCursor(this.buffer,this.index)}};let TreeBuffer=class TreeBuffer{constructor(h,d,_){this.buffer=h,this.length=d,this.set=_}get type(){return dist_NodeType.none}toString(){let h=[];for(let d=0;d<this.buffer.length;)h.push(this.childString(d)),d=this.buffer[d+3];return h.join(",")}childString(h){let d=this.buffer[h],_=this.buffer[h+3],V=this.set.types[d],ee=V.name;if(/\W/.test(ee)&&!V.isError&&(ee=JSON.stringify(ee)),_==(h+=4))return ee;let er=[];for(;h<_;)er.push(this.childString(h)),h=this.buffer[h+3];return ee+"("+er.join(",")+")"}findChild(h,d,_,V,ee){let{buffer:er}=this,eo=-1;for(let ec=h;ec!=d&&(!checkSide(ee,V,er[ec+1],er[ec+2])||(eo=ec,!(_>0)));ec=er[ec+3]);return eo}slice(h,d,_){let V=this.buffer,ee=new Uint16Array(d-h),er=0;for(let eo=h,ec=0;eo<d;){ee[ec++]=V[eo++],ee[ec++]=V[eo++]-_;let d=ee[ec++]=V[eo++]-_;ee[ec++]=V[eo++]-h,er=Math.max(er,d)}return new TreeBuffer(ee,er,this.set)}};function checkSide(h,d,_,V){switch(h){case -2:return _<d;case -1:return V>=d&&_<d;case 0:return _<d&&V>d;case 1:return _<=d&&V>d;case 2:return V>d;case 4:return!0}}function resolveNode(h,d,_,V){for(var ee;h.from==h.to||(_<1?h.from>=d:h.from>d)||(_>-1?h.to<=d:h.to<d);){let d=!V&&h instanceof TreeNode&&h.index<0?null:h.parent;if(!d)return h;h=d}let er=V?0:ev.IgnoreOverlays;if(V)for(let V=h,eo=V.parent;eo;eo=(V=eo).parent)V instanceof TreeNode&&V.index<0&&(null===(ee=eo.enter(d,_,er))||void 0===ee?void 0:ee.from)!=V.from&&(h=eo);for(;;){let V=h.enter(d,_,er);if(!V)return h;h=V}}let BaseNode=class BaseNode{cursor(h=0){return new TreeCursor(this,h)}getChild(h,d=null,_=null){let V=getChildren(this,h,d,_);return V.length?V[0]:null}getChildren(h,d=null,_=null){return getChildren(this,h,d,_)}resolve(h,d=0){return resolveNode(this,h,d,!1)}resolveInner(h,d=0){return resolveNode(this,h,d,!0)}matchContext(h){return matchNodeContext(this,h)}enterUnfinishedNodesBefore(h){let d=this.childBefore(h),_=this;for(;d;){let h=d.lastChild;if(!h||h.to!=d.to)break;h.type.isError&&h.from==h.to?(_=d,d=h.prevSibling):d=h}return _}get node(){return this}get next(){return this.parent}};let TreeNode=class TreeNode extends BaseNode{constructor(h,d,_,V){super(),this._tree=h,this.from=d,this.index=_,this._parent=V}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(h,d,_,V,ee=0){for(let er=this;;){for(let{children:eo,positions:ec}=er._tree,eh=d>0?eo.length:-1;h!=eh;h+=d){let eh=eo[h],ep=ec[h]+er.from;if(checkSide(V,_,ep,ep+eh.length)){if(eh instanceof TreeBuffer){if(ee&ev.ExcludeBuffers)continue;let eo=eh.findChild(0,eh.buffer.length,d,_-ep,V);if(eo>-1)return new BufferNode(new BufferContext(er,eh,h,ep),null,eo)}else if(ee&ev.IncludeAnonymous||!eh.type.isAnonymous||hasChild(eh)){let eo;if(!(ee&ev.IgnoreMounts)&&(eo=MountedTree.get(eh))&&!eo.overlay)return new TreeNode(eo.tree,ep,h,er);let ec=new TreeNode(eh,ep,h,er);return ee&ev.IncludeAnonymous||!ec.type.isAnonymous?ec:ec.nextChild(d<0?eh.children.length-1:0,d,_,V)}}}if(ee&ev.IncludeAnonymous||!er.type.isAnonymous||(h=er.index>=0?er.index+d:d<0?-1:er._parent._tree.children.length,!(er=er._parent)))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(h){return this.nextChild(0,1,h,2)}childBefore(h){return this.nextChild(this._tree.children.length-1,-1,h,-2)}enter(h,d,_=0){let V;if(!(_&ev.IgnoreOverlays)&&(V=MountedTree.get(this._tree))&&V.overlay){let _=h-this.from;for(let{from:h,to:ee}of V.overlay)if((d>0?h<=_:h<_)&&(d<0?ee>=_:ee>_))return new TreeNode(V.tree,V.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,h,d,_)}nextSignificantParent(){let h=this;for(;h.type.isAnonymous&&h._parent;)h=h._parent;return h}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}};function getChildren(h,d,_,V){let ee=h.cursor(),er=[];if(!ee.firstChild())return er;if(null!=_){for(let h=!1;!h;)if(h=ee.type.is(_),!ee.nextSibling())return er}for(;;){if(null!=V&&ee.type.is(V))return er;if(ee.type.is(d)&&er.push(ee.node),!ee.nextSibling())return null==V?er:[]}}function matchNodeContext(h,d,_=d.length-1){for(let V=h.parent;_>=0;V=V.parent){if(!V)return!1;if(!V.type.isAnonymous){if(d[_]&&d[_]!=V.name)return!1;_--}}return!0}let BufferContext=class BufferContext{constructor(h,d,_,V){this.parent=h,this.buffer=d,this.index=_,this.start=V}};let BufferNode=class BufferNode extends BaseNode{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(h,d,_){super(),this.context=h,this._parent=d,this.index=_,this.type=h.buffer.set.types[h.buffer.buffer[_]]}child(h,d,_){let{buffer:V}=this.context,ee=V.findChild(this.index+4,V.buffer[this.index+3],h,d-this.context.start,_);return ee<0?null:new BufferNode(this.context,this,ee)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(h){return this.child(1,h,2)}childBefore(h){return this.child(-1,h,-2)}enter(h,d,_=0){if(_&ev.ExcludeBuffers)return null;let{buffer:V}=this.context,ee=V.findChild(this.index+4,V.buffer[this.index+3],d>0?1:-1,h-this.context.start,d);return ee<0?null:new BufferNode(this.context,this,ee)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(h){return this._parent?null:this.context.parent.nextChild(this.context.index+h,h,0,4)}get nextSibling(){let{buffer:h}=this.context,d=h.buffer[this.index+3];return d<(this._parent?h.buffer[this._parent.index+3]:h.buffer.length)?new BufferNode(this.context,this._parent,d):this.externalSibling(1)}get prevSibling(){let{buffer:h}=this.context,d=this._parent?this._parent.index+4:0;return this.index==d?this.externalSibling(-1):new BufferNode(this.context,this._parent,h.findChild(d,this.index,-1,0,4))}get tree(){return null}toTree(){let h=[],d=[],{buffer:_}=this.context,V=this.index+4,ee=_.buffer[this.index+3];if(ee>V){let er=_.buffer[this.index+1];h.push(_.slice(V,ee,er)),d.push(0)}return new dist_Tree(this.type,h,d,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}};function iterStack(h){if(!h.length)return null;let d=0,_=h[0];for(let V=1;V<h.length;V++){let ee=h[V];(ee.from>_.from||ee.to<_.to)&&(_=ee,d=V)}let V=_ instanceof TreeNode&&_.index<0?null:_.parent,ee=h.slice();return V?ee[d]=V:ee.splice(d,1),new StackIterator(ee,_)}let StackIterator=class StackIterator{constructor(h,d){this.heads=h,this.node=d}get next(){return iterStack(this.heads)}};let TreeCursor=class TreeCursor{get name(){return this.type.name}constructor(h,d=0){if(this.mode=d,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,h instanceof TreeNode)this.yieldNode(h);else{this._tree=h.context.parent,this.buffer=h.context;for(let d=h._parent;d;d=d._parent)this.stack.unshift(d.index);this.bufferNode=h,this.yieldBuf(h.index)}}yieldNode(h){return!!h&&(this._tree=h,this.type=h.type,this.from=h.from,this.to=h.to,!0)}yieldBuf(h,d){this.index=h;let{start:_,buffer:V}=this.buffer;return this.type=d||V.set.types[V.buffer[h]],this.from=_+V.buffer[h+1],this.to=_+V.buffer[h+2],!0}yield(h){return!!h&&(h instanceof TreeNode?(this.buffer=null,this.yieldNode(h)):(this.buffer=h.context,this.yieldBuf(h.index,h.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(h,d,_){if(!this.buffer)return this.yield(this._tree.nextChild(h<0?this._tree._tree.children.length-1:0,h,d,_,this.mode));let{buffer:V}=this.buffer,ee=V.findChild(this.index+4,V.buffer[this.index+3],h,d-this.buffer.start,_);return!(ee<0)&&(this.stack.push(this.index),this.yieldBuf(ee))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(h){return this.enterChild(1,h,2)}childBefore(h){return this.enterChild(-1,h,-2)}enter(h,d,_=this.mode){return this.buffer?!(_&ev.ExcludeBuffers)&&this.enterChild(1,h,d):this.yield(this._tree.enter(h,d,_))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ev.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let h=this.mode&ev.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(h)}sibling(h){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+h,h,0,4,this.mode));let{buffer:d}=this.buffer,_=this.stack.length-1;if(h<0){let h=_<0?0:this.stack[_]+4;if(this.index!=h)return this.yieldBuf(d.findChild(h,this.index,-1,0,4))}else{let h=d.buffer[this.index+3];if(h<(_<0?d.buffer.length:d.buffer[this.stack[_]+3]))return this.yieldBuf(h)}return _<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+h,h,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(h){let d,_,{buffer:V}=this;if(V){if(h>0){if(this.index<V.buffer.buffer.length)return!1}else for(let h=0;h<this.index;h++)if(V.buffer.buffer[h+3]<this.index)return!1;({index:d,parent:_}=V)}else({index:d,_parent:_}=this._tree);for(;_;{index:d,_parent:_}=_)if(d>-1)for(let V=d+h,ee=h<0?-1:_._tree.children.length;V!=ee;V+=h){let h=_._tree.children[V];if(this.mode&ev.IncludeAnonymous||h instanceof TreeBuffer||!h.type.isAnonymous||hasChild(h))return!1}return!0}move(h,d){if(d&&this.enterChild(h,0,4))return!0;for(;;){if(this.sibling(h))return!0;if(this.atLastNode(h)||!this.parent())return!1}}next(h=!0){return this.move(1,h)}prev(h=!0){return this.move(-1,h)}moveTo(h,d=0){for(;(this.from==this.to||(d<1?this.from>=h:this.from>h)||(d>-1?this.to<=h:this.to<h))&&this.parent(););for(;this.enterChild(1,h,d););return this}get node(){if(!this.buffer)return this._tree;let h=this.bufferNode,d=null,_=0;if(h&&h.context==this.buffer)s:for(let V=this.index,ee=this.stack.length;ee>=0;){for(let er=h;er;er=er._parent)if(er.index==V){if(V==this.index)return er;d=er,_=ee+1;break s}V=this.stack[--ee]}for(let h=_;h<this.stack.length;h++)d=new BufferNode(this.buffer,d,this.stack[h]);return this.bufferNode=new BufferNode(this.buffer,d,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(h,d){for(let _=0;;){let V=!1;if(this.type.isAnonymous||!1!==h(this)){if(this.firstChild()){_++;continue}this.type.isAnonymous||(V=!0)}for(;V&&d&&d(this),V=this.type.isAnonymous,!this.nextSibling();){if(!_)return;this.parent(),_--,V=!0}}}matchContext(h){if(!this.buffer)return matchNodeContext(this.node,h);let{buffer:d}=this.buffer,{types:_}=d.set;for(let V=h.length-1,ee=this.stack.length-1;V>=0;ee--){if(ee<0)return matchNodeContext(this.node,h,V);let er=_[d.buffer[this.stack[ee]]];if(!er.isAnonymous){if(h[V]&&h[V]!=er.name)return!1;V--}}return!0}};function hasChild(h){return h.children.some(h=>h instanceof TreeBuffer||!h.type.isAnonymous||hasChild(h))}let iB=new WeakMap;function nodeSize(h,d){if(!h.isAnonymous||d instanceof TreeBuffer||d.type!=h)return 1;let _=iB.get(d);if(null==_){for(let V of(_=1,d.children)){if(V.type!=h||!(V instanceof dist_Tree)){_=1;break}_+=nodeSize(h,V)}iB.set(d,_)}return _}function balanceRange(h,d,_,V,ee,er,eo,ec,eh){let ep=0;for(let _=V;_<ee;_++)ep+=nodeSize(h,d[_]);let ef=Math.ceil(1.5*ep/8),em=[],eg=[];return!function divide(d,_,V,ee,eo){for(let ec=V;ec<ee;){let V=ec,ep=_[ec],eO=nodeSize(h,d[ec]);for(ec++;ec<ee;ec++){let _=nodeSize(h,d[ec]);if(eO+_>=ef)break;eO+=_}if(ec==V+1){if(eO>ef){let h=d[V];divide(h.children,h.positions,0,h.children.length,_[V]+eo);continue}em.push(d[V])}else{let ee=_[ec-1]+d[ec-1].length-ep;em.push(balanceRange(h,d,_,V,ec,ep,ee,null,eh))}eg.push(ep+eo-er)}}(d,_,V,ee,0),(ec||eh)(em,eg,eo)}let NodeWeakMap=class NodeWeakMap{constructor(){this.map=new WeakMap}setBuffer(h,d,_){let V=this.map.get(h);V||this.map.set(h,V=new Map),V.set(d,_)}getBuffer(h,d){let _=this.map.get(h);return _&&_.get(d)}set(h,d){h instanceof BufferNode?this.setBuffer(h.context.buffer,h.index,d):h instanceof TreeNode&&this.map.set(h.tree,d)}get(h){return h instanceof BufferNode?this.getBuffer(h.context.buffer,h.index):h instanceof TreeNode?this.map.get(h.tree):void 0}cursorSet(h,d){h.buffer?this.setBuffer(h.buffer.buffer,h.index,d):this.map.set(h.tree,d)}cursorGet(h){return h.buffer?this.getBuffer(h.buffer.buffer,h.index):this.map.get(h.tree)}};let TreeFragment=class TreeFragment{constructor(h,d,_,V,ee=!1,er=!1){this.from=h,this.to=d,this.tree=_,this.offset=V,this.open=(ee?1:0)|(er?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(h,d=[],_=!1){let V=[new TreeFragment(0,h.length,h,0,!1,_)];for(let _ of d)_.to>h.length&&V.push(_);return V}static applyChanges(h,d,_=128){if(!d.length)return h;let V=[],ee=1,er=h.length?h[0]:null;for(let eo=0,ec=0,eh=0;;eo++){let ep=eo<d.length?d[eo]:null,ef=ep?ep.fromA:1e9;if(ef-ec>=_)for(;er&&er.from<ef;){let d=er;if(ec>=d.from||ef<=d.to||eh){let h=Math.max(d.from,ec)-eh,_=Math.min(d.to,ef)-eh;d=h>=_?null:new TreeFragment(h,_,d.tree,d.offset+eh,eo>0,!!ep)}if(d&&V.push(d),er.to>ef)break;er=ee<h.length?h[ee++]:null}if(!ep)break;ec=ep.toA,eh=ep.toA-ep.toB}return V}};let dist_Parser=class dist_Parser{startParse(h,d,_){return"string"==typeof h&&(h=new StringInput(h)),_=_?_.length?_.map(h=>new dist_Range(h.from,h.to)):[new dist_Range(0,0)]:[new dist_Range(0,h.length)],this.createParse(h,d||[],_)}parse(h,d,_){let V=this.startParse(h,d,_);for(;;){let h=V.advance();if(h)return h}}};let StringInput=class StringInput{constructor(h){this.string=h}get length(){return this.string.length}chunk(h){return this.string.slice(h)}get lineChunks(){return!1}read(h,d){return this.string.slice(h,d)}};let InnerParse=class InnerParse{constructor(h,d,_,V,ee){this.parser=h,this.parse=d,this.overlay=_,this.target=V,this.from=ee}};function checkRanges(h){if(!h.length||h.some(h=>h.from>=h.to))throw RangeError("Invalid inner parse ranges given: "+JSON.stringify(h))}let ActiveOverlay=class ActiveOverlay{constructor(h,d,_,V,ee,er,eo){this.parser=h,this.predicate=d,this.mounts=_,this.index=V,this.start=ee,this.target=er,this.prev=eo,this.depth=0,this.ranges=[]}};let iW=new dist_NodeProp({perNode:!0});let MixedParse=class MixedParse{constructor(h,d,_,V,ee){this.nest=d,this.input=_,this.fragments=V,this.ranges=ee,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=h}advance(){if(this.baseParse){let h=this.baseParse.advance();if(!h)return null;if(this.baseParse=null,this.baseTree=h,this.startInner(),null!=this.stoppedAt)for(let h of this.inner)h.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let h=this.baseTree;return null!=this.stoppedAt&&(h=new dist_Tree(h.type,h.children,h.positions,h.length,h.propValues.concat([[iW,this.stoppedAt]]))),h}let h=this.inner[this.innerDone],d=h.parse.advance();if(d){this.innerDone++;let _=Object.assign(Object.create(null),h.target.props);_[dist_NodeProp.mounted.id]=new MountedTree(d,h.overlay,h.parser),h.target.props=_}return null}get parsedPos(){if(this.baseParse)return 0;let h=this.input.length;for(let d=this.innerDone;d<this.inner.length;d++)this.inner[d].from<h&&(h=Math.min(h,this.inner[d].parse.parsedPos));return h}stopAt(h){if(this.stoppedAt=h,this.baseParse)this.baseParse.stopAt(h);else for(let d=this.innerDone;d<this.inner.length;d++)this.inner[d].parse.stopAt(h)}startInner(){let h=new FragmentCursor(this.fragments),d=null,_=null,V=new TreeCursor(new TreeNode(this.baseTree,this.ranges[0].from,0,null),ev.IncludeAnonymous|ev.IgnoreMounts);s:for(let ee,er;;){let eo=!0,ec;if(null!=this.stoppedAt&&V.from>=this.stoppedAt)eo=!1;else if(h.hasNode(V)){if(d){let h=d.mounts.find(h=>h.frag.from<=V.from&&h.frag.to>=V.to&&h.mount.overlay);if(h)for(let _ of h.mount.overlay){let ee=_.from+h.pos,er=_.to+h.pos;ee>=V.from&&er<=V.to&&!d.ranges.some(h=>h.from<er&&h.to>ee)&&d.ranges.push({from:ee,to:er})}}eo=!1}else if(_&&(er=function(h,d,_){for(let V of h){if(V.from>=_)break;if(V.to>d)return V.from<=d&&V.to>=_?2:1}return 0}(_.ranges,V.from,V.to)))eo=2!=er;else if(!V.type.isAnonymous&&(ee=this.nest(V,this.input))&&(V.from<V.to||!ee.overlay)){V.tree||function(h){let{node:d}=h,_=[],V=d.context.buffer;do _.push(h.index),h.parent();while(!h.tree);let ee=h.tree,er=ee.children.indexOf(V),eo=ee.children[er],ec=eo.buffer,eh=[er];for(let V of(ee.children[er]=function split(h,V,ee,er,ep,ef){let em=_[ef],eg=[],eO=[];sliceBuf(eo,h,em,eg,eO,er);let ey=ec[em+1],ev=ec[em+2];eh.push(eg.length);let eS=ef?split(em+4,ec[em+3],eo.set.types[ec[em]],ey,ev-ey,ef-1):d.toTree();return eg.push(eS),eO.push(ey-er),sliceBuf(eo,ec[em+3],V,eg,eO,er),new dist_Tree(ee,eg,eO,ep)}(0,ec.length,dist_NodeType.none,0,eo.length,_.length-1),eh)){let d=h.tree.children[V],_=h.tree.positions[V];h.yield(new TreeNode(d,_+h.from,V,h._tree))}}(V);let er=h.findMounts(V.from,ee.parser);if("function"==typeof ee.overlay)d=new ActiveOverlay(ee.parser,ee.overlay,er,this.inner.length,V.from,V.tree,d);else{let h=punchRanges(this.ranges,ee.overlay||(V.from<V.to?[new dist_Range(V.from,V.to)]:[]));h.length&&checkRanges(h),(h.length||!ee.overlay)&&this.inner.push(new InnerParse(ee.parser,h.length?ee.parser.startParse(this.input,enterFragments(er,h),h):ee.parser.startParse(""),ee.overlay?ee.overlay.map(h=>new dist_Range(h.from-V.from,h.to-V.from)):null,V.tree,h.length?h[0].from:V.from)),ee.overlay?h.length&&(_={ranges:h,depth:0,prev:_}):eo=!1}}else d&&(ec=d.predicate(V))&&(!0===ec&&(ec=new dist_Range(V.from,V.to)),ec.from<ec.to&&d.ranges.push(ec));if(eo&&V.firstChild())d&&d.depth++,_&&_.depth++;else for(;!V.nextSibling();){if(!V.parent())break s;if(d&&!--d.depth){let h=punchRanges(this.ranges,d.ranges);h.length&&(checkRanges(h),this.inner.splice(d.index,0,new InnerParse(d.parser,d.parser.startParse(this.input,enterFragments(d.mounts,h),h),d.ranges.map(h=>new dist_Range(h.from-d.start,h.to-d.start)),d.target,h[0].from))),d=d.prev}!_||--_.depth||(_=_.prev)}}}};function sliceBuf(h,d,_,V,ee,er){if(d<_){let eo=h.buffer[d+1];V.push(h.slice(d,_,eo)),ee.push(eo-er)}}let StructureCursor=class StructureCursor{constructor(h,d){this.offset=d,this.done=!1,this.cursor=h.cursor(ev.IncludeAnonymous|ev.IgnoreMounts)}moveTo(h){let{cursor:d}=this,_=h-this.offset;for(;!this.done&&d.from<_;)d.to>=h&&d.enter(_,1,ev.IgnoreOverlays|ev.ExcludeBuffers)||d.next(!1)||(this.done=!0)}hasNode(h){if(this.moveTo(h.from),!this.done&&this.cursor.from+this.offset==h.from&&this.cursor.tree)for(let d=this.cursor.tree;;){if(d==h.tree)return!0;if(d.children.length&&0==d.positions[0]&&d.children[0]instanceof dist_Tree)d=d.children[0];else break}return!1}};let FragmentCursor=class FragmentCursor{constructor(h){var d;if(this.fragments=h,this.curTo=0,this.fragI=0,h.length){let _=this.curFrag=h[0];this.curTo=null!==(d=_.tree.prop(iW))&&void 0!==d?d:_.to,this.inner=new StructureCursor(_.tree,-_.offset)}else this.curFrag=this.inner=null}hasNode(h){for(;this.curFrag&&h.from>=this.curTo;)this.nextFrag();return this.curFrag&&this.curFrag.from<=h.from&&this.curTo>=h.to&&this.inner.hasNode(h)}nextFrag(){var h;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let d=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(h=d.tree.prop(iW))&&void 0!==h?h:d.to,this.inner=new StructureCursor(d.tree,-d.offset)}}findMounts(h,d){var _;let V=[];if(this.inner){this.inner.cursor.moveTo(h,1);for(let h=this.inner.cursor.node;h;h=h.parent){let ee=null===(_=h.tree)||void 0===_?void 0:_.prop(dist_NodeProp.mounted);if(ee&&ee.parser==d)for(let d=this.fragI;d<this.fragments.length;d++){let _=this.fragments[d];if(_.from>=h.to)break;_.tree==this.curFrag.tree&&V.push({frag:_,pos:h.from-_.offset,mount:ee})}}}return V}};function punchRanges(h,d){let _=null,V=d;for(let ee=1,er=0;ee<h.length;ee++){let eo=h[ee-1].to,ec=h[ee].from;for(;er<V.length;er++){let h=V[er];if(h.from>=ec)break;!(h.to<=eo)&&(_||(V=_=d.slice()),h.from<eo?(_[er]=new dist_Range(h.from,eo),h.to>ec&&_.splice(er+1,0,new dist_Range(ec,h.to))):h.to>ec?_[er--]=new dist_Range(ec,h.to):_.splice(er--,1))}}return V}function enterFragments(h,d){let _=[];for(let{pos:V,mount:ee,frag:er}of h){let h=V+(ee.overlay?ee.overlay[0].from:0),eo=h+ee.tree.length,ec=Math.max(er.from,h),eh=Math.min(er.to,eo);if(ee.overlay){let eo=function(h,d,_,V){let ee=0,er=0,eo=!1,ec=!1,eh=-1e9,ep=[];for(;;){let ef=ee==h.length?1e9:eo?h[ee].to:h[ee].from,em=er==d.length?1e9:ec?d[er].to:d[er].from;if(eo!=ec){let h=Math.max(eh,_),d=Math.min(ef,em,V);h<d&&ep.push(new dist_Range(h,d))}if(1e9==(eh=Math.min(ef,em)))break;ef==eh&&(eo?(eo=!1,ee++):eo=!0),em==eh&&(ec?(ec=!1,er++):ec=!0)}return ep}(d,ee.overlay.map(h=>new dist_Range(h.from+V,h.to+V)),ec,eh);for(let d=0,V=ec;;d++){let ec=d==eo.length,ep=ec?eh:eo[d].from;if(ep>V&&_.push(new TreeFragment(V,ep,ee.tree,-h,er.from>=V||er.openStart,er.to<=ep||er.openEnd)),ec)break;V=eo[d].to}}else _.push(new TreeFragment(ec,eh,ee.tree,-h,er.from>=h||er.openStart,er.to<=eo||er.openEnd))}return _}let iU=0;let Tag=class Tag{constructor(h,d,_){this.set=h,this.base=d,this.modified=_,this.id=iU++}static define(h){if(null==h?void 0:h.base)throw Error("Can not derive from a modified tag");let d=new Tag([],null,[]);if(d.set.push(d),h)for(let _ of h.set)d.set.push(_);return d}static defineModifier(){let h=new Modifier;return d=>d.modified.indexOf(h)>-1?d:Modifier.get(d.base||d,d.modified.concat(h).sort((h,d)=>h.id-d.id))}};let iz=0;let Modifier=class Modifier{constructor(){this.instances=[],this.id=iz++}static get(h,d){if(!d.length)return h;let _=d[0].instances.find(_=>{var V;return _.base==h&&(V=_.modified,d.length==V.length&&d.every((h,d)=>h==V[d]))});if(_)return _;let V=[],ee=new Tag(V,h,d);for(let h of d)h.instances.push(ee);let er=function(h){let d=[[]];for(let _=0;_<h.length;_++)for(let V=0,ee=d.length;V<ee;V++)d.push(d[V].concat(h[_]));return d.sort((h,d)=>d.length-h.length)}(d);for(let d of h.set)if(!d.modified.length)for(let h of er)V.push(Modifier.get(d,h));return ee}};function styleTags(h){let d=Object.create(null);for(let _ in h){let V=h[_];for(let h of(Array.isArray(V)||(V=[V]),_.split(" ")))if(h){let _=[],ee=2,er=h;for(let d=0;;){if("..."==er&&d>0&&d+3==h.length){ee=1;break}let V=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(er);if(!V)throw RangeError("Invalid path: "+h);if(_.push("*"==V[0]?"":'"'==V[0][0]?JSON.parse(V[0]):V[0]),(d+=V[0].length)==h.length)break;let eo=h[d++];if(d==h.length&&"!"==eo){ee=0;break}if("/"!=eo)throw RangeError("Invalid path: "+h);er=h.slice(d)}let eo=_.length-1,ec=_[eo];if(!ec)throw RangeError("Invalid path: "+h);let eh=new Rule(V,ee,eo>0?_.slice(0,eo):null);d[ec]=eh.sort(d[ec])}}return iq.add(d)}let iq=new dist_NodeProp;let Rule=class Rule{constructor(h,d,_,V){this.tags=h,this.mode=d,this.context=_,this.next=V}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(h){return!h||h.depth<this.depth?(this.next=h,this):(h.next=this.sort(h.next),h)}get depth(){return this.context?this.context.length:0}};function tagHighlighter(h,d){let _=Object.create(null);for(let d of h)if(Array.isArray(d.tag))for(let h of d.tag)_[h.id]=d.class;else _[d.tag.id]=d.class;let{scope:V,all:ee=null}=d||{};return{style:h=>{let d=ee;for(let V of h)for(let h of V.set){let V=_[h.id];if(V){d=d?d+" "+V:V;break}}return d},scope:V}}function highlightTree(h,d,_,V=0,ee=h.length){let er=new HighlightBuilder(V,Array.isArray(d)?d:[d],_);er.highlightRange(h.cursor(),V,ee,"",er.highlighters),er.flush(ee)}Rule.empty=new Rule([],2,null);let HighlightBuilder=class HighlightBuilder{constructor(h,d,_){this.at=h,this.highlighters=d,this.span=_,this.class=""}startSpan(h,d){d!=this.class&&(this.flush(h),h>this.at&&(this.at=h),this.class=d)}flush(h){h>this.at&&this.class&&this.span(this.at,h,this.class)}highlightRange(h,d,_,V,ee){let{type:er,from:eo,to:ec}=h;if(eo>=_||ec<=d)return;er.isTop&&(ee=this.highlighters.filter(h=>!h.scope||h.scope(er)));let eh=V,ep=function(h){let d=h.type.prop(iq);for(;d&&d.context&&!h.matchContext(d.context);)d=d.next;return d||null}(h)||Rule.empty,ef=function(h,d){let _=null;for(let V of h){let h=V.style(d);h&&(_=_?_+" "+h:h)}return _}(ee,ep.tags);if(ef&&(eh&&(eh+=" "),eh+=ef,1==ep.mode&&(V+=(V?" ":"")+ef)),this.startSpan(Math.max(d,eo),eh),ep.opaque)return;let em=h.tree&&h.tree.prop(dist_NodeProp.mounted);if(em&&em.overlay){let er=h.node.enter(em.overlay[0].from+eo,1),ep=this.highlighters.filter(h=>!h.scope||h.scope(em.tree.type)),ef=h.firstChild();for(let eg=0,eO=eo;;eg++){let ey=eg<em.overlay.length?em.overlay[eg]:null,ev=ey?ey.from+eo:ec,eS=Math.max(d,eO),e_=Math.min(_,ev);if(eS<e_&&ef)for(;h.from<e_&&(this.highlightRange(h,eS,e_,V,ee),this.startSpan(Math.min(e_,h.to),eh),!(h.to>=ev)&&h.nextSibling()););if(!ey||ev>_)break;(eO=ey.to+eo)>d&&(this.highlightRange(er.cursor(),Math.max(d,ey.from+eo),Math.min(_,eO),"",ep),this.startSpan(Math.min(_,eO),eh))}ef&&h.parent()}else if(h.firstChild()){em&&(V="");do{if(h.to<=d)continue;if(h.from>=_)break;this.highlightRange(h,d,_,V,ee),this.startSpan(Math.min(_,h.to),eh)}while(h.nextSibling());h.parent()}}};let iX=Tag.define,iY=iX(),iG=iX(),iH=iX(iG),iK=iX(iG),iJ=iX(),i0=iX(iJ),i1=iX(iJ),i2=iX(),i5=iX(i2),i7=iX(),i3=iX(),i4=iX(),i6=iX(i4),i9=iX(),i8={comment:iY,lineComment:iX(iY),blockComment:iX(iY),docComment:iX(iY),name:iG,variableName:iX(iG),typeName:iH,tagName:iX(iH),propertyName:iK,attributeName:iX(iK),className:iX(iG),labelName:iX(iG),namespace:iX(iG),macroName:iX(iG),literal:iJ,string:i0,docString:iX(i0),character:iX(i0),attributeValue:iX(i0),number:i1,integer:iX(i1),float:iX(i1),bool:iX(iJ),regexp:iX(iJ),escape:iX(iJ),color:iX(iJ),url:iX(iJ),keyword:i7,self:iX(i7),null:iX(i7),atom:iX(i7),unit:iX(i7),modifier:iX(i7),operatorKeyword:iX(i7),controlKeyword:iX(i7),definitionKeyword:iX(i7),moduleKeyword:iX(i7),operator:i3,derefOperator:iX(i3),arithmeticOperator:iX(i3),logicOperator:iX(i3),bitwiseOperator:iX(i3),compareOperator:iX(i3),updateOperator:iX(i3),definitionOperator:iX(i3),typeOperator:iX(i3),controlOperator:iX(i3),punctuation:i4,separator:iX(i4),bracket:i6,angleBracket:iX(i6),squareBracket:iX(i6),paren:iX(i6),brace:iX(i6),content:i2,heading:i5,heading1:iX(i5),heading2:iX(i5),heading3:iX(i5),heading4:iX(i5),heading5:iX(i5),heading6:iX(i5),contentSeparator:iX(i2),list:iX(i2),quote:iX(i2),emphasis:iX(i2),strong:iX(i2),link:iX(i2),monospace:iX(i2),strikethrough:iX(i2),inserted:iX(),deleted:iX(),changed:iX(),invalid:iX(),meta:i9,documentMeta:iX(i9),annotation:iX(i9),processingInstruction:iX(i9),definition:Tag.defineModifier(),constant:Tag.defineModifier(),function:Tag.defineModifier(),standard:Tag.defineModifier(),local:Tag.defineModifier(),special:Tag.defineModifier()};tagHighlighter([{tag:i8.link,class:"tok-link"},{tag:i8.heading,class:"tok-heading"},{tag:i8.emphasis,class:"tok-emphasis"},{tag:i8.strong,class:"tok-strong"},{tag:i8.keyword,class:"tok-keyword"},{tag:i8.atom,class:"tok-atom"},{tag:i8.bool,class:"tok-bool"},{tag:i8.url,class:"tok-url"},{tag:i8.labelName,class:"tok-labelName"},{tag:i8.inserted,class:"tok-inserted"},{tag:i8.deleted,class:"tok-deleted"},{tag:i8.literal,class:"tok-literal"},{tag:i8.string,class:"tok-string"},{tag:i8.number,class:"tok-number"},{tag:[i8.regexp,i8.escape,i8.special(i8.string)],class:"tok-string2"},{tag:i8.variableName,class:"tok-variableName"},{tag:i8.local(i8.variableName),class:"tok-variableName tok-local"},{tag:i8.definition(i8.variableName),class:"tok-variableName tok-definition"},{tag:i8.special(i8.variableName),class:"tok-variableName2"},{tag:i8.definition(i8.propertyName),class:"tok-propertyName tok-definition"},{tag:i8.typeName,class:"tok-typeName"},{tag:i8.namespace,class:"tok-namespace"},{tag:i8.className,class:"tok-className"},{tag:i8.macroName,class:"tok-macroName"},{tag:i8.propertyName,class:"tok-propertyName"},{tag:i8.operator,class:"tok-operator"},{tag:i8.comment,class:"tok-comment"},{tag:i8.meta,class:"tok-meta"},{tag:i8.invalid,class:"tok-invalid"},{tag:i8.punctuation,class:"tok-punctuation"}]);let se=new dist_NodeProp;function defineLanguageFacet(h){return Facet.define({combine:h?d=>d.concat(h):void 0})}let st=new dist_NodeProp;let Language=class Language{constructor(h,d,_=[],V=""){this.data=h,this.name=V,dist_EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(dist_EditorState.prototype,"tree",{get(){return dist_syntaxTree(this)}}),this.parser=d,this.extension=[su.of(this),dist_EditorState.languageData.of((h,d,_)=>{let V=topNodeAt(h,d,_),ee=V.type.prop(se);if(!ee)return[];let er=h.facet(ee),eo=V.type.prop(st);if(eo){let ee=V.resolve(d-V.from,_);for(let d of eo)if(d.test(ee,h)){let _=h.facet(d.facet);return"replace"==d.type?_:_.concat(er)}}return er})].concat(_)}isActiveAt(h,d,_=-1){return topNodeAt(h,d,_).type.prop(se)==this.data}findRegions(h){let d=h.facet(su);if((null==d?void 0:d.data)==this.data)return[{from:0,to:h.doc.length}];if(!d||!d.allowsNesting)return[];let _=[],explore=(h,d)=>{if(h.prop(se)==this.data){_.push({from:d,to:d+h.length});return}let V=h.prop(dist_NodeProp.mounted);if(V){if(V.tree.prop(se)==this.data){if(V.overlay)for(let h of V.overlay)_.push({from:h.from+d,to:h.to+d});else _.push({from:d,to:d+h.length});return}if(V.overlay){let h=_.length;if(explore(V.tree,V.overlay[0].from+d),_.length>h)return}}for(let _=0;_<h.children.length;_++){let V=h.children[_];V instanceof dist_Tree&&explore(V,h.positions[_]+d)}};return explore(dist_syntaxTree(h),0),_}get allowsNesting(){return!0}};function topNodeAt(h,d,_){let V=h.facet(su),ee=dist_syntaxTree(h).topNode;if(!V||V.allowsNesting)for(let h=ee;h;h=h.enter(d,_,ev.ExcludeBuffers))h.type.isTop&&(ee=h);return ee}Language.setState=dist_StateEffect.define();let LRLanguage=class LRLanguage extends Language{constructor(h,d,_){super(h,d,[],_),this.parser=d}static define(h){let d=defineLanguageFacet(h.languageData);return new LRLanguage(d,h.parser.configure({props:[se.add(h=>h.isTop?d:void 0)]}),h.name)}configure(h,d){return new LRLanguage(this.data,this.parser.configure(h),d||this.name)}get allowsNesting(){return this.parser.hasWrappers()}};function dist_syntaxTree(h){let d=h.field(Language.state,!1);return d?d.tree:dist_Tree.empty}let DocInput=class DocInput{constructor(h){this.doc=h,this.cursorPos=0,this.string="",this.cursor=h.iter()}get length(){return this.doc.length}syncTo(h){return this.string=this.cursor.next(h-this.cursorPos).value,this.cursorPos=h+this.string.length,this.cursorPos-this.string.length}chunk(h){return this.syncTo(h),this.string}get lineChunks(){return!0}read(h,d){let _=this.cursorPos-this.string.length;return h<_||d>=this.cursorPos?this.doc.sliceString(h,d):this.string.slice(h-_,d-_)}};let sn=null;let ParseContext=class ParseContext{constructor(h,d,_=[],V,ee,er,eo,ec){this.parser=h,this.state=d,this.fragments=_,this.tree=V,this.treeLen=ee,this.viewport=er,this.skipped=eo,this.scheduleOn=ec,this.parse=null,this.tempSkipped=[]}static create(h,d,_){return new ParseContext(h,d,[],dist_Tree.empty,0,_,[],null)}startParse(){return this.parser.startParse(new DocInput(this.state.doc),this.fragments)}work(h,d){return(null!=d&&d>=this.state.doc.length&&(d=void 0),this.tree!=dist_Tree.empty&&this.isDone(null!=d?d:this.state.doc.length))?(this.takeTree(),!0):this.withContext(()=>{var _;if("number"==typeof h){let d=Date.now()+h;h=()=>Date.now()>d}for(this.parse||(this.parse=this.startParse()),null!=d&&(null==this.parse.stoppedAt||this.parse.stoppedAt>d)&&d<this.state.doc.length&&this.parse.stopAt(d);;){let V=this.parse.advance();if(V){if(this.fragments=this.withoutTempSkipped(TreeFragment.addTree(V,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(_=this.parse.stoppedAt)&&void 0!==_?_:this.state.doc.length,this.tree=V,this.parse=null,!(this.treeLen<(null!=d?d:this.state.doc.length)))return!0;this.parse=this.startParse()}if(h())return!1}})}takeTree(){let h,d;this.parse&&(h=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>h)&&this.parse.stopAt(h),this.withContext(()=>{for(;!(d=this.parse.advance()););}),this.treeLen=h,this.tree=d,this.fragments=this.withoutTempSkipped(TreeFragment.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(h){let d=sn;sn=this;try{return h()}finally{sn=d}}withoutTempSkipped(h){for(let d;d=this.tempSkipped.pop();)h=cutFragments(h,d.from,d.to);return h}changes(h,d){let{fragments:_,tree:V,treeLen:ee,viewport:er,skipped:eo}=this;if(this.takeTree(),!h.empty){let d=[];if(h.iterChangedRanges((h,_,V,ee)=>d.push({fromA:h,toA:_,fromB:V,toB:ee})),_=TreeFragment.applyChanges(_,d),V=dist_Tree.empty,ee=0,er={from:h.mapPos(er.from,-1),to:h.mapPos(er.to,1)},this.skipped.length)for(let d of(eo=[],this.skipped)){let _=h.mapPos(d.from,1),V=h.mapPos(d.to,-1);_<V&&eo.push({from:_,to:V})}}return new ParseContext(this.parser,d,_,V,ee,er,eo,this.scheduleOn)}updateViewport(h){if(this.viewport.from==h.from&&this.viewport.to==h.to)return!1;this.viewport=h;let d=this.skipped.length;for(let d=0;d<this.skipped.length;d++){let{from:_,to:V}=this.skipped[d];_<h.to&&V>h.from&&(this.fragments=cutFragments(this.fragments,_,V),this.skipped.splice(d--,1))}return!(this.skipped.length>=d)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(h,d){this.skipped.push({from:h,to:d})}static getSkippingParser(h){return new class extends dist_Parser{createParse(d,_,V){let ee=V[0].from,er=V[V.length-1].to;return{parsedPos:ee,advance(){let d=sn;if(d){for(let h of V)d.tempSkipped.push(h);h&&(d.scheduleOn=d.scheduleOn?Promise.all([d.scheduleOn,h]):h)}return this.parsedPos=er,new dist_Tree(dist_NodeType.none,[],[],er-ee)},stoppedAt:null,stopAt(){}}}}}isDone(h){h=Math.min(h,this.state.doc.length);let d=this.fragments;return this.treeLen>=h&&d.length&&0==d[0].from&&d[0].to>=h}static get(){return sn}};function cutFragments(h,d,_){return TreeFragment.applyChanges(h,[{fromA:d,toA:_,fromB:d,toB:_}])}let LanguageState=class LanguageState{constructor(h){this.context=h,this.tree=h.tree}apply(h){if(!h.docChanged&&this.tree==this.context.tree)return this;let d=this.context.changes(h.changes,h.state),_=this.context.treeLen==h.startState.doc.length?void 0:Math.max(h.changes.mapPos(this.context.treeLen),d.viewport.to);return d.work(20,_)||d.takeTree(),new LanguageState(d)}static init(h){let d=Math.min(3e3,h.doc.length),_=ParseContext.create(h.facet(su).parser,h,{from:0,to:d});return _.work(20,d)||_.takeTree(),new LanguageState(_)}};Language.state=dist_StateField.define({create:LanguageState.init,update(h,d){for(let h of d.effects)if(h.is(Language.setState))return h.value;return d.startState.facet(su)!=d.state.facet(su)?LanguageState.init(d.state):h.apply(d)}});let requestIdle=h=>{let d=setTimeout(()=>h(),500);return()=>clearTimeout(d)};"undefined"!=typeof requestIdleCallback&&(requestIdle=h=>{let d=-1,_=setTimeout(()=>{d=requestIdleCallback(h,{timeout:400})},100);return()=>d<0?clearTimeout(_):cancelIdleCallback(d)});let ss="undefined"!=typeof navigator&&(null===(eS=navigator.scheduling)||void 0===eS?void 0:eS.isInputPending)?()=>navigator.scheduling.isInputPending():null,sa=dist_ViewPlugin.fromClass(class{constructor(h){this.view=h,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(h){let d=this.view.state.field(Language.state).context;(d.updateViewport(h.view.viewport)||this.view.viewport.to>d.treeLen)&&this.scheduleWork(),(h.docChanged||h.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(d)}scheduleWork(){if(this.working)return;let{state:h}=this.view,d=h.field(Language.state);d.tree==d.context.tree&&d.context.isDone(h.doc.length)||(this.working=requestIdle(this.work))}work(h){this.working=null;let d=Date.now();if(this.chunkEnd<d&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=d+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:_,viewport:{to:V}}=this.view,ee=_.field(Language.state);if(ee.tree==ee.context.tree&&ee.context.isDone(V+1e5))return;let er=Date.now()+Math.min(this.chunkBudget,100,h&&!ss?Math.max(25,h.timeRemaining()-5):1e9),eo=ee.context.treeLen<V&&_.doc.length>V+1e3,ec=ee.context.work(()=>ss&&ss()||Date.now()>er,V+(eo?0:1e5));this.chunkBudget-=Date.now()-d,(ec||this.chunkBudget<=0)&&(ee.context.takeTree(),this.view.dispatch({effects:Language.setState.of(new LanguageState(ee.context))})),this.chunkBudget>0&&!(ec&&!eo)&&this.scheduleWork(),this.checkAsyncSchedule(ee.context)}checkAsyncSchedule(h){h.scheduleOn&&(this.workScheduled++,h.scheduleOn.then(()=>this.scheduleWork()).catch(h=>logException(this.view.state,h)).then(()=>this.workScheduled--),h.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),su=Facet.define({combine:h=>h.length?h[0]:null,enables:h=>[Language.state,sa,EditorView.contentAttributes.compute([h],d=>{let _=d.facet(h);return _&&_.name?{"data-language":_.name}:{}})]});let LanguageSupport=class LanguageSupport{constructor(h,d=[]){this.language=h,this.support=d,this.extension=[h,d]}};let sh=Facet.define(),sd=Facet.define({combine:h=>{if(!h.length)return"  ";let d=h[0];if(!d||/\S/.test(d)||Array.from(d).some(h=>h!=d[0]))throw Error("Invalid indent unit: "+JSON.stringify(h[0]));return d}});function getIndentUnit(h){let d=h.facet(sd);return 9==d.charCodeAt(0)?h.tabSize*d.length:d.length}function indentString(h,d){let _="",V=h.tabSize,ee=h.facet(sd)[0];if("	"==ee){for(;d>=V;)_+="	",d-=V;ee=" "}for(let h=0;h<d;h++)_+=ee;return _}function getIndentation(h,d){for(let _ of(h instanceof dist_EditorState&&(h=new IndentContext(h)),h.state.facet(sh))){let V=_(h,d);if(void 0!==V)return V}let _=dist_syntaxTree(h.state);return _.length>=d?function(h,d,_){let V=d.resolveStack(_),ee=V.node.enterUnfinishedNodesBefore(_);if(ee!=V.node){let h=[];for(let d=ee;d!=V.node;d=d.parent)h.push(d);for(let d=h.length-1;d>=0;d--)V={node:h[d],next:V}}return indentFor(V,h,_)}(h,_,d):null}let IndentContext=class IndentContext{constructor(h,d={}){this.state=h,this.options=d,this.unit=getIndentUnit(h)}lineAt(h,d=1){let _=this.state.doc.lineAt(h),{simulateBreak:V,simulateDoubleBreak:ee}=this.options;return null!=V&&V>=_.from&&V<=_.to?ee&&V==h?{text:"",from:h}:(d<0?V<h:V<=h)?{text:_.text.slice(V-_.from),from:V}:{text:_.text.slice(0,V-_.from),from:_.from}:_}textAfterPos(h,d=1){if(this.options.simulateDoubleBreak&&h==this.options.simulateBreak)return"";let{text:_,from:V}=this.lineAt(h,d);return _.slice(h-V,Math.min(_.length,h+100-V))}column(h,d=1){let{text:_,from:V}=this.lineAt(h,d),ee=this.countColumn(_,h-V),er=this.options.overrideIndentation?this.options.overrideIndentation(V):-1;return er>-1&&(ee+=er-this.countColumn(_,_.search(/\S|$/))),ee}countColumn(h,d=h.length){return dist_countColumn(h,this.state.tabSize,d)}lineIndent(h,d=1){let{text:_,from:V}=this.lineAt(h,d),ee=this.options.overrideIndentation;if(ee){let h=ee(V);if(h>-1)return h}return this.countColumn(_,_.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}};let sp=new dist_NodeProp;function indentFor(h,d,_){for(let V=h;V;V=V.next){let h=function(h){let d=h.type.prop(sp);if(d)return d;let _=h.firstChild,V;if(_&&(V=_.type.prop(dist_NodeProp.closedBy))){let d=h.lastChild,_=d&&V.indexOf(d.name)>-1;return h=>delimitedStrategy(h,!0,1,void 0,_&&!(h.pos==h.options.simulateBreak&&h.options.simulateDoubleBreak)?d.from:void 0)}return null==h.parent?topIndent:null}(V.node);if(h)return h(TreeIndentContext.create(d,_,V))}return 0}function topIndent(){return 0}let TreeIndentContext=class TreeIndentContext extends IndentContext{constructor(h,d,_){super(h.state,h.options),this.base=h,this.pos=d,this.context=_}get node(){return this.context.node}static create(h,d,_){return new TreeIndentContext(h,d,_)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(h){let d=this.state.doc.lineAt(h.from);for(;;){let _=h.resolve(d.from);for(;_.parent&&_.parent.from==_.from;)_=_.parent;if(function(h,d){for(let _=d;_;_=_.parent)if(h==_)return!0;return!1}(_,h))break;d=this.state.doc.lineAt(_.from)}return this.lineIndent(d.from)}continue(){return indentFor(this.context.next,this.base,this.pos)}};function delimitedStrategy(h,d,_,V,ee){let er=h.textAfter,eo=er.match(/^\s*/)[0].length,ec=V&&er.slice(eo,eo+V.length)==V||ee==h.pos+eo,eh=d?function(h){let d=h.node,_=d.childAfter(d.from),V=d.lastChild;if(!_)return null;let ee=h.options.simulateBreak,er=h.state.doc.lineAt(_.from),eo=null==ee||ee<=er.from?er.to:Math.min(er.to,ee);for(let h=_.to;;){let ee=d.childAfter(h);if(!ee||ee==V)return null;if(!ee.type.isSkipped)return ee.from<eo?_:null;h=ee.to}}(h):null;return eh?ec?h.column(eh.from):h.column(eh.to):h.baseIndent+(ec?0:h.unit*_)}function continuedIndent({except:h,units:d=1}={}){return _=>{let V=h&&h.test(_.textAfter);return _.baseIndent+(V?0:d*_.unit)}}let sm=new dist_NodeProp;function foldInside(h){let d=h.firstChild,_=h.lastChild;return d&&d.to<_.from?{from:d.to,to:_.type.isError?h.to:_.from}:null}function mapRange(h,d){let _=d.mapPos(h.from,1),V=d.mapPos(h.to,-1);return _>=V?void 0:{from:_,to:V}}let sg=dist_StateEffect.define({map:mapRange}),sO=dist_StateEffect.define({map:mapRange}),sy=dist_StateField.define({create:()=>Decoration.none,update(h,d){for(let _ of(h=h.map(d.changes),d.effects))if(_.is(sg)&&!function(h,d,_){let V=!1;return h.between(d,d,(h,ee)=>{h==d&&ee==_&&(V=!0)}),V}(h,_.value.from,_.value.to)){let{preparePlaceholder:V}=d.state.facet(sb),ee=V?Decoration.replace({widget:new PreparedFoldWidget(V(d.state,_.value))}):sS;h=h.update({add:[ee.range(_.value.from,_.value.to)]})}else _.is(sO)&&(h=h.update({filter:(h,d)=>_.value.from!=h||_.value.to!=d,filterFrom:_.value.from,filterTo:_.value.to}));if(d.selection){let _=!1,{head:V}=d.selection.main;h.between(V,V,(h,d)=>{h<V&&d>V&&(_=!0)}),_&&(h=h.update({filterFrom:V,filterTo:V,filter:(h,d)=>d<=V||h>=V}))}return h},provide:h=>EditorView.decorations.from(h),toJSON(h,d){let _=[];return h.between(0,d.doc.length,(h,d)=>{_.push(h,d)}),_},fromJSON(h){if(!Array.isArray(h)||h.length%2)throw RangeError("Invalid JSON for fold state");let d=[];for(let _=0;_<h.length;){let V=h[_++],ee=h[_++];if("number"!=typeof V||"number"!=typeof ee)throw RangeError("Invalid JSON for fold state");d.push(sS.range(V,ee))}return Decoration.set(d,!0)}}),sv={placeholderDOM:null,preparePlaceholder:null,placeholderText:"…"},sb=Facet.define({combine:h=>combineConfig(h,sv)});function widgetToDOM(h,d){let{state:_}=h,V=_.facet(sb),onclick=d=>{var _,V,ee,er;let eo,ec=h.lineBlockAt(h.posAtDOM(d.target)),eh=(_=h.state,V=ec.from,ee=ec.to,eo=null,null===(er=_.field(sy,!1))||void 0===er||er.between(V,ee,(h,d)=>{(!eo||eo.from>h)&&(eo={from:h,to:d})}),eo);eh&&h.dispatch({effects:sO.of(eh)}),d.preventDefault()};if(V.placeholderDOM)return V.placeholderDOM(h,onclick,d);let ee=document.createElement("span");return ee.textContent=V.placeholderText,ee.setAttribute("aria-label",_.phrase("folded code")),ee.title=_.phrase("unfold"),ee.className="cm-foldPlaceholder",ee.onclick=onclick,ee}let sS=Decoration.replace({widget:new class extends WidgetType{toDOM(h){return widgetToDOM(h,null)}}});let PreparedFoldWidget=class PreparedFoldWidget extends WidgetType{constructor(h){super(),this.value=h}eq(h){return this.value==h.value}toDOM(h){return widgetToDOM(h,this.value)}};let HighlightStyle=class HighlightStyle{constructor(h,d){let _;function def(h){let d=StyleModule.newName();return(_||(_=Object.create(null)))["."+d]=h,d}this.specs=h;let V="string"==typeof d.all?d.all:d.all?def(d.all):void 0,ee=d.scope;this.scope=ee instanceof Language?h=>h.prop(se)==ee.data:ee?h=>h==ee:void 0,this.style=tagHighlighter(h.map(h=>({tag:h.tag,class:h.class||def(Object.assign({},h,{tag:null}))})),{all:V}).style,this.module=_?new StyleModule(_):null,this.themeType=d.themeType}static define(h,d){return new HighlightStyle(h,d||{})}};let s_=Facet.define(),sw=Facet.define({combine:h=>h.length?[h[0]]:null});function getHighlighters(h){let d=h.facet(s_);return d.length?d:h.facet(sw)}let sx=n_.high(dist_ViewPlugin.fromClass(class{constructor(h){this.markCache=Object.create(null),this.tree=dist_syntaxTree(h.state),this.decorations=this.buildDeco(h,getHighlighters(h.state))}update(h){let d=dist_syntaxTree(h.state),_=getHighlighters(h.state),V=_!=getHighlighters(h.startState);d.length<h.view.viewport.to&&!V&&d.type==this.tree.type?this.decorations=this.decorations.map(h.changes):(d!=this.tree||h.viewportChanged||V)&&(this.tree=d,this.decorations=this.buildDeco(h.view,_))}buildDeco(h,d){if(!d||!this.tree.length)return Decoration.none;let _=new dist_RangeSetBuilder;for(let{from:V,to:ee}of h.visibleRanges)highlightTree(this.tree,d,(h,d,V)=>{_.add(h,d,this.markCache[V]||(this.markCache[V]=Decoration.mark({class:V})))},V,ee);return _.finish()}},{decorations:h=>h.decorations}));i8.meta,i8.link,i8.heading,i8.emphasis,i8.strong,i8.strikethrough,i8.keyword,i8.atom,i8.bool,i8.url,i8.contentSeparator,i8.labelName,i8.literal,i8.inserted,i8.string,i8.deleted,i8.regexp,i8.escape,i8.string,i8.variableName,i8.variableName,i8.typeName,i8.namespace,i8.className,i8.variableName,i8.macroName,i8.propertyName,i8.comment,i8.invalid;let sk=EditorView.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}}),sT="()[]{}",sE=Facet.define({combine:h=>combineConfig(h,{afterCursor:!0,brackets:sT,maxScanDistance:1e4,renderMatch:defaultRenderMatch})}),sC=Decoration.mark({class:"cm-matchingBracket"}),sP=Decoration.mark({class:"cm-nonmatchingBracket"});function defaultRenderMatch(h){let d=[],_=h.matched?sC:sP;return d.push(_.range(h.start.from,h.start.to)),h.end&&d.push(_.range(h.end.from,h.end.to)),d}let sI=dist_StateField.define({create:()=>Decoration.none,update(h,d){if(!d.docChanged&&!d.selection)return h;let _=[],V=d.state.facet(sE);for(let h of d.state.selection.ranges){if(!h.empty)continue;let ee=matchBrackets(d.state,h.head,-1,V)||h.head>0&&matchBrackets(d.state,h.head-1,1,V)||V.afterCursor&&(matchBrackets(d.state,h.head,1,V)||h.head<d.state.doc.length&&matchBrackets(d.state,h.head+1,-1,V));ee&&(_=_.concat(V.renderMatch(ee,d.state)))}return Decoration.set(_,!0)},provide:h=>EditorView.decorations.from(h)}),sR=[sI,sk],sA=new dist_NodeProp;function matchingNodes(h,d,_){let V=h.prop(d<0?dist_NodeProp.openedBy:dist_NodeProp.closedBy);if(V)return V;if(1==h.name.length){let V=_.indexOf(h.name);if(V>-1&&V%2==(d<0?1:0))return[_[V+d]]}return null}function findHandle(h){let d=h.type.prop(sA);return d?d(h.node):h}function matchBrackets(h,d,_,V={}){let ee=V.maxScanDistance||1e4,er=V.brackets||sT,eo=dist_syntaxTree(h),ec=eo.resolveInner(d,_);for(let h=ec;h;h=h.parent){let V=matchingNodes(h.type,_,er);if(V&&h.from<h.to){let ee=findHandle(h);if(ee&&(_>0?d>=ee.from&&d<ee.to:d>ee.from&&d<=ee.to))return function(h,d,_,V,ee,er,eo){let ec=V.parent,eh={from:ee.from,to:ee.to},ep=0,ef=null==ec?void 0:ec.cursor();if(ef&&(_<0?ef.childBefore(V.from):ef.childAfter(V.to)))do if(_<0?ef.to<=V.from:ef.from>=V.to){if(0==ep&&er.indexOf(ef.type.name)>-1&&ef.from<ef.to){let h=findHandle(ef);return{start:eh,end:h?{from:h.from,to:h.to}:void 0,matched:!0}}if(matchingNodes(ef.type,_,eo))ep++;else if(matchingNodes(ef.type,-_,eo)){if(0==ep){let h=findHandle(ef);return{start:eh,end:h&&h.from<h.to?{from:h.from,to:h.to}:void 0,matched:!1}}ep--}}while(_<0?ef.prevSibling():ef.nextSibling());return{start:eh,matched:!1}}(0,0,_,h,ee,V,er)}}return function(h,d,_,V,ee,er,eo){let ec=_<0?h.sliceDoc(d-1,d):h.sliceDoc(d,d+1),eh=eo.indexOf(ec);if(eh<0||eh%2==0!=_>0)return null;let ep={from:_<0?d-1:d,to:_>0?d+1:d},ef=h.doc.iterRange(d,_>0?h.doc.length:0),em=0;for(let h=0;!ef.next().done&&h<=er;){let er=ef.value;_<0&&(h+=er.length);let ec=d+h*_;for(let h=_>0?0:er.length-1,d=_>0?er.length:-1;h!=d;h+=_){let d=eo.indexOf(er[h]);if(!(d<0)&&V.resolveInner(ec+h,1).type==ee){if(d%2==0==_>0)em++;else{if(1==em)return{start:ep,end:{from:ec+h,to:ec+h+1},matched:d>>1==eh>>1};em--}}}_>0&&(h+=er.length)}return ef.done?{start:ep,matched:!1}:null}(h,d,_,eo,ec.type,ee,er)}let s$=Object.create(null),sN=[dist_NodeType.none],sM=[],sQ=Object.create(null),sD=Object.create(null);for(let[h,d]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])sD[h]=function(h,d){let _=[];for(let V of d.split(" ")){let d=[];for(let _ of V.split(".")){let V=h[_]||i8[_];V?"function"==typeof V?d.length?d=d.map(V):warnForPart(_,`Modifier ${_} used at start of tag`):d.length?warnForPart(_,`Tag ${_} used as modifier`):d=Array.isArray(V)?V:[V]:warnForPart(_,`Unknown highlighting tag ${_}`)}for(let h of d)_.push(h)}if(!_.length)return 0;let V=d.replace(/ /g,"_"),ee=V+" "+_.map(h=>h.id),er=sQ[ee];if(er)return er.id;let eo=sQ[ee]=dist_NodeType.define({id:sN.length,name:V,props:[styleTags({[V]:_})]});return sN.push(eo),eo.id}(s$,d);function warnForPart(h,d){sM.indexOf(h)>-1||(sM.push(h),console.warn(d))}n3.RTL,n3.LTR;let CompletionContext=class CompletionContext{constructor(h,d,_){this.state=h,this.pos=d,this.explicit=_,this.abortListeners=[]}tokenBefore(h){let d=dist_syntaxTree(this.state).resolveInner(this.pos,-1);for(;d&&0>h.indexOf(d.name);)d=d.parent;return d?{from:d.from,to:this.pos,text:this.state.sliceDoc(d.from,this.pos),type:d.type}:null}matchBefore(h){let d=this.state.doc.lineAt(this.pos),_=Math.max(d.from,this.pos-250),V=d.text.slice(_-d.from,this.pos-d.from),ee=V.search(ensureAnchor(h,!1));return ee<0?null:{from:_+ee,to:this.pos,text:V.slice(ee)}}get aborted(){return null==this.abortListeners}addEventListener(h,d){"abort"==h&&this.abortListeners&&this.abortListeners.push(d)}};function toSet(h){let d=Object.keys(h).join(""),_=/\w/.test(d);return _&&(d=d.replace(/\w/g,"")),`[${_?"\\w":""}${d.replace(/[^\w\s]/g,"\\$&")}]`}function completeFromList(h){let d=h.map(h=>"string"==typeof h?{label:h}:h),[_,V]=d.every(h=>/^\w+$/.test(h.label))?[/\w*$/,/\w+$/]:function(h){let d=Object.create(null),_=Object.create(null);for(let{label:V}of h){d[V[0]]=!0;for(let h=1;h<V.length;h++)_[V[h]]=!0}let V=toSet(d)+toSet(_)+"*$";return[RegExp("^"+V),new RegExp(V)]}(d);return h=>{let ee=h.matchBefore(V);return ee||h.explicit?{from:ee?ee.from:h.pos,options:d,validFor:_}:null}}let Option=class Option{constructor(h,d,_,V){this.completion=h,this.source=d,this.match=_,this.score=V}};function cur(h){return h.selection.main.from}function ensureAnchor(h,d){var _;let{source:V}=h,ee=d&&"^"!=V[0],er="$"!=V[V.length-1];return ee||er?RegExp(`${ee?"^":""}(?:${V})${er?"$":""}`,null!==(_=h.flags)&&void 0!==_?_:h.ignoreCase?"i":""):h}let sj=Annotation.define(),sL=new WeakMap;function asSource(h){if(!Array.isArray(h))return h;let d=sL.get(h);return d||sL.set(h,d=completeFromList(h)),d}let sF=dist_StateEffect.define(),sZ=dist_StateEffect.define();let FuzzyMatcher=class FuzzyMatcher{constructor(h){this.pattern=h,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let d=0;d<h.length;){let _=codePointAt(h,d),V=codePointSize(_);this.chars.push(_);let ee=h.slice(d,d+V),er=ee.toUpperCase();this.folded.push(codePointAt(er==ee?ee.toLowerCase():er,0)),d+=V}this.astral=h.length!=this.chars.length}ret(h,d){return this.score=h,this.matched=d,!0}match(h){if(0==this.pattern.length)return this.ret(-100,[]);if(h.length<this.pattern.length)return!1;let{chars:d,folded:_,any:V,precise:ee,byWord:er}=this;if(1==d.length){let V=codePointAt(h,0),ee=codePointSize(V),er=ee==h.length?0:-100;if(V==d[0]);else{if(V!=_[0])return!1;er+=-200}return this.ret(er,[0,ee])}let eo=h.indexOf(this.pattern);if(0==eo)return this.ret(h.length==this.pattern.length?0:-100,[0,this.pattern.length]);let ec=d.length,eh=0;if(eo<0){for(let ee=0,er=Math.min(h.length,200);ee<er&&eh<ec;){let er=codePointAt(h,ee);(er==d[eh]||er==_[eh])&&(V[eh++]=ee),ee+=codePointSize(er)}if(eh<ec)return!1}let ep=0,ef=0,em=!1,eg=0,eO=-1,ey=-1,ev=/[a-z]/.test(h),eS=!0;for(let V=0,eh=Math.min(h.length,200),e_=0;V<eh&&ef<ec;){let eh=codePointAt(h,V);eo<0&&(ep<ec&&eh==d[ep]&&(ee[ep++]=V),eg<ec&&(eh==d[eg]||eh==_[eg]?(0==eg&&(eO=V),ey=V+1,eg++):eg=0));let ew,ex=eh<255?eh>=48&&eh<=57||eh>=97&&eh<=122?2:eh>=65&&eh<=90?1:0:(ew=fromCodePoint(eh))!=ew.toLowerCase()?1:ew!=ew.toUpperCase()?2:0;(!V||1==ex&&ev||0==e_&&0!=ex)&&(d[ef]==eh||_[ef]==eh&&(em=!0)?er[ef++]=V:er.length&&(eS=!1)),e_=ex,V+=codePointSize(eh)}return ef==ec&&0==er[0]&&eS?this.result(-100+(em?-200:0),er,h):eg==ec&&0==eO?this.ret(-200-h.length+(ey==h.length?0:-100),[0,ey]):eo>-1?this.ret(-700-h.length,[eo,eo+this.pattern.length]):eg==ec?this.ret(-900-h.length,[eO,ey]):ef==ec?this.result(-100+(em?-200:0)+-700+(eS?0:-1100),er,h):2!=d.length&&this.result((V[0]?-700:0)+-200+-1100,V,h)}result(h,d,_){let V=[],ee=0;for(let h of d){let d=h+(this.astral?codePointSize(codePointAt(_,h)):1);ee&&V[ee-1]==h?V[ee-1]=d:(V[ee++]=h,V[ee++]=d)}return this.ret(h-_.length,V)}};let sV=Facet.define({combine:h=>combineConfig(h,{activateOnTyping:!0,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:defaultPositionInfo,compareCompletions:(h,d)=>h.label.localeCompare(d.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(h,d)=>h&&d,closeOnBlur:(h,d)=>h&&d,icons:(h,d)=>h&&d,tooltipClass:(h,d)=>_=>joinClass(h(_),d(_)),optionClass:(h,d)=>_=>joinClass(h(_),d(_)),addToOptions:(h,d)=>h.concat(d)})});function joinClass(h,d){return h?d?h+" "+d:h:d}function defaultPositionInfo(h,d,_,V,ee,er){let eo=h.textDirection==n3.RTL,ec=eo,eh=!1,ep="top",ef,em,eg=d.left-ee.left,eO=ee.right-d.right,ey=V.right-V.left,ev=V.bottom-V.top;if(ec&&eg<Math.min(ey,eO)?ec=!1:!ec&&eO<Math.min(ey,eg)&&(ec=!0),ey<=(ec?eg:eO))ef=Math.max(ee.top,Math.min(_.top,ee.bottom-ev))-d.top,em=Math.min(400,ec?eg:eO);else{eh=!0,em=Math.min(400,(eo?d.right:ee.right-d.left)-30);let h=ee.bottom-d.bottom;h>=ev||h>d.top?ef=_.bottom-d.top:(ep="bottom",ef=d.bottom-_.top)}let eS=(d.bottom-d.top)/er.offsetHeight,e_=(d.right-d.left)/er.offsetWidth;return{style:`${ep}: ${ef/eS}px; max-width: ${em/e_}px`,class:"cm-completionInfo-"+(eh?eo?"left-narrow":"right-narrow":ec?"left":"right")}}function rangeAroundSelected(h,d,_){if(h<=_)return{from:0,to:h};if(d<0&&(d=0),d<=h>>1){let h=Math.floor(d/_);return{from:h*_,to:(h+1)*_}}let V=Math.floor((h-d)/_);return{from:h-(V+1)*_,to:h-V*_}}let CompletionTooltip=class CompletionTooltip{constructor(h,d,_){let V;this.view=h,this.stateField=d,this.applyCompletion=_,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:h=>this.placeInfo(h),key:this},this.space=null,this.currentClass="";let ee=h.state.field(d),{options:er,selected:eo}=ee.open,ec=h.state.facet(sV);this.optionContent=(V=ec.addToOptions.slice(),ec.icons&&V.push({render(h){let d=document.createElement("div");return d.classList.add("cm-completionIcon"),h.type&&d.classList.add(...h.type.split(/\s+/g).map(h=>"cm-completionIcon-"+h)),d.setAttribute("aria-hidden","true"),d},position:20}),V.push({render(h,d,_,V){let ee=document.createElement("span");ee.className="cm-completionLabel";let er=h.displayLabel||h.label,eo=0;for(let h=0;h<V.length;){let d=V[h++],_=V[h++];d>eo&&ee.appendChild(document.createTextNode(er.slice(eo,d)));let ec=ee.appendChild(document.createElement("span"));ec.appendChild(document.createTextNode(er.slice(d,_))),ec.className="cm-completionMatchedText",eo=_}return eo<er.length&&ee.appendChild(document.createTextNode(er.slice(eo))),ee},position:50},{render(h){if(!h.detail)return null;let d=document.createElement("span");return d.className="cm-completionDetail",d.textContent=h.detail,d},position:80}),V.sort((h,d)=>h.position-d.position).map(h=>h.render)),this.optionClass=ec.optionClass,this.tooltipClass=ec.tooltipClass,this.range=rangeAroundSelected(er.length,eo,ec.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(h.state),this.dom.addEventListener("mousedown",_=>{let{options:V}=h.state.field(d).open;for(let d=_.target,ee;d&&d!=this.dom;d=d.parentNode)if("LI"==d.nodeName&&(ee=/-(\d+)$/.exec(d.id))&&+ee[1]<V.length){this.applyCompletion(h,V[+ee[1]]),_.preventDefault();return}}),this.dom.addEventListener("focusout",d=>{let _=h.state.field(this.stateField,!1);_&&_.tooltip&&h.state.facet(sV).closeOnBlur&&d.relatedTarget!=h.contentDOM&&h.dispatch({effects:sZ.of(null)})}),this.showOptions(er,ee.id)}mount(){this.updateSel()}showOptions(h,d){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(h,d,this.range)),this.list.addEventListener("scroll",()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)})}update(h){var d;let _=h.state.field(this.stateField),V=h.startState.field(this.stateField);if(this.updateTooltipClass(h.state),_!=V){let{options:ee,selected:er,disabled:eo}=_.open;V.open&&V.open.options==ee||(this.range=rangeAroundSelected(ee.length,er,h.state.facet(sV).maxRenderedOptions),this.showOptions(ee,_.id)),this.updateSel(),eo!=(null===(d=V.open)||void 0===d?void 0:d.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!eo)}}updateTooltipClass(h){let d=this.tooltipClass(h);if(d!=this.currentClass){for(let h of this.currentClass.split(" "))h&&this.dom.classList.remove(h);for(let h of d.split(" "))h&&this.dom.classList.add(h);this.currentClass=d}}positioned(h){this.space=h,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let h=this.view.state.field(this.stateField),d=h.open;if((d.selected>-1&&d.selected<this.range.from||d.selected>=this.range.to)&&(this.range=rangeAroundSelected(d.options.length,d.selected,this.view.state.facet(sV).maxRenderedOptions),this.showOptions(d.options,h.id)),this.updateSelectedOption(d.selected)){this.destroyInfo();let{completion:_}=d.options[d.selected],{info:V}=_;if(!V)return;let ee="string"==typeof V?document.createTextNode(V):V(_);if(!ee)return;"then"in ee?ee.then(d=>{d&&this.view.state.field(this.stateField,!1)==h&&this.addInfoPane(d,_)}).catch(h=>logException(this.view.state,h,"completion info")):this.addInfoPane(ee,_)}}addInfoPane(h,d){this.destroyInfo();let _=this.info=document.createElement("div");if(_.className="cm-tooltip cm-completionInfo",null!=h.nodeType)_.appendChild(h),this.infoDestroy=null;else{let{dom:d,destroy:V}=h;_.appendChild(d),this.infoDestroy=V||null}this.dom.appendChild(_),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(h){var d,_;let V,ee,er,eo=null;for(let d=this.list.firstChild,_=this.range.from;d;d=d.nextSibling,_++)"LI"==d.nodeName&&d.id?_==h?d.hasAttribute("aria-selected")||(d.setAttribute("aria-selected","true"),eo=d):d.hasAttribute("aria-selected")&&d.removeAttribute("aria-selected"):_--;return eo&&(d=this.list,_=eo,V=d.getBoundingClientRect(),ee=_.getBoundingClientRect(),er=V.height/d.offsetHeight,ee.top<V.top?d.scrollTop-=(V.top-ee.top)/er:ee.bottom>V.bottom&&(d.scrollTop+=(ee.bottom-V.bottom)/er)),eo}measureInfo(){let h=this.dom.querySelector("[aria-selected]");if(!h||!this.info)return null;let d=this.dom.getBoundingClientRect(),_=this.info.getBoundingClientRect(),V=h.getBoundingClientRect(),ee=this.space;if(!ee){let h=this.dom.ownerDocument.defaultView||window;ee={left:0,top:0,right:h.innerWidth,bottom:h.innerHeight}}return V.top>Math.min(ee.bottom,d.bottom)-10||V.bottom<Math.max(ee.top,d.top)+10?null:this.view.state.facet(sV).positionInfo(this.view,d,V,_,ee,this.dom)}placeInfo(h){this.info&&(h?(h.style&&(this.info.style.cssText=h.style),this.info.className="cm-tooltip cm-completionInfo "+(h.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(h,d,_){let V=document.createElement("ul");V.id=d,V.setAttribute("role","listbox"),V.setAttribute("aria-expanded","true"),V.setAttribute("aria-label",this.view.state.phrase("Completions"));let ee=null;for(let er=_.from;er<_.to;er++){let{completion:eo,match:ec}=h[er],{section:eh}=eo;if(eh){let h="string"==typeof eh?eh:eh.name;h!=ee&&(er>_.from||0==_.from)&&(ee=h,"string"!=typeof eh&&eh.header?V.appendChild(eh.header(eh)):V.appendChild(document.createElement("completion-section")).textContent=h)}let ep=V.appendChild(document.createElement("li"));ep.id=d+"-"+er,ep.setAttribute("role","option");let ef=this.optionClass(eo);for(let h of(ef&&(ep.className=ef),this.optionContent)){let d=h(eo,this.view.state,this.view,ec);d&&ep.appendChild(d)}}return _.from&&V.classList.add("cm-completionListIncompleteTop"),_.to<h.length&&V.classList.add("cm-completionListIncompleteBottom"),V}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}};function score(h){return 100*(h.boost||0)+(h.apply?10:0)+(h.info?5:0)+(h.type?1:0)}let CompletionDialog=class CompletionDialog{constructor(h,d,_,V,ee,er){this.options=h,this.attrs=d,this.tooltip=_,this.timestamp=V,this.selected=ee,this.disabled=er}setSelected(h,d){return h==this.selected||h>=this.options.length?this:new CompletionDialog(this.options,makeAttrs(d,h),this.tooltip,this.timestamp,h,this.disabled)}static build(h,d,_,V,ee){let er=function(h,d){let _=[],V=null,addOption=h=>{_.push(h);let{section:d}=h.completion;if(d){V||(V=[]);let h="string"==typeof d?d:d.name;V.some(d=>d.name==h)||V.push("string"==typeof d?{name:h}:d)}};for(let V of h)if(V.hasResult()){let h=V.result.getMatch;if(!1===V.result.filter)for(let d of V.result.options)addOption(new Option(d,V.source,h?h(d):[],1e9-_.length));else{let _=new FuzzyMatcher(d.sliceDoc(V.from,V.to));for(let d of V.result.options)if(_.match(d.label)){let ee=d.displayLabel?h?h(d,_.matched):[]:_.matched;addOption(new Option(d,V.source,ee,_.score+(d.boost||0)))}}}if(V){let h=Object.create(null),d=0;for(let _ of V.sort((h,d)=>{var _,V;return(null!==(_=h.rank)&&void 0!==_?_:1e9)-(null!==(V=d.rank)&&void 0!==V?V:1e9)||(h.name<d.name?-1:1)}))d-=1e5,h[_.name]=d;for(let d of _){let{section:_}=d.completion;_&&(d.score+=h["string"==typeof _?_:_.name])}}let ee=[],er=null,eo=d.facet(sV).compareCompletions;for(let h of _.sort((h,d)=>d.score-h.score||eo(h.completion,d.completion))){let d=h.completion;er&&er.label==d.label&&er.detail==d.detail&&(null==er.type||null==d.type||er.type==d.type)&&er.apply==d.apply&&er.boost==d.boost?score(h.completion)>score(er)&&(ee[ee.length-1]=h):ee.push(h),er=h.completion}return ee}(h,d);if(!er.length)return V&&h.some(h=>1==h.state)?new CompletionDialog(V.options,V.attrs,V.tooltip,V.timestamp,V.selected,!0):null;let eo=d.facet(sV).selectOnOpen?0:-1;if(V&&V.selected!=eo&&-1!=V.selected){let h=V.options[V.selected].completion;for(let d=0;d<er.length;d++)if(er[d].completion==h){eo=d;break}}return new CompletionDialog(er,makeAttrs(_,eo),{pos:h.reduce((h,d)=>d.hasResult()?Math.min(h,d.from):h,1e8),create:createTooltip,above:ee.aboveCursor},V?V.timestamp:Date.now(),eo,!1)}map(h){return new CompletionDialog(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:h.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}};let CompletionState=class CompletionState{constructor(h,d,_){this.active=h,this.id=d,this.open=_}static start(){return new CompletionState(sW,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(h){let{state:d}=h,_=d.facet(sV),V=(_.override||d.languageDataAt("autocomplete",cur(d)).map(asSource)).map(d=>(this.active.find(h=>h.source==d)||new ActiveSource(d,this.active.some(h=>0!=h.state)?1:0)).update(h,_));V.length==this.active.length&&V.every((h,d)=>h==this.active[d])&&(V=this.active);let ee=this.open;for(let er of(ee&&h.docChanged&&(ee=ee.map(h.changes)),h.selection||V.some(d=>d.hasResult()&&h.changes.touchesRange(d.from,d.to))||!function(h,d){if(h==d)return!0;for(let _=0,V=0;;){for(;_<h.length&&!h[_].hasResult;)_++;for(;V<d.length&&!d[V].hasResult;)V++;let ee=_==h.length,er=V==d.length;if(ee||er)return ee==er;if(h[_++].result!=d[V++].result)return!1}}(V,this.active)?ee=CompletionDialog.build(V,d,this.id,ee,_):ee&&ee.disabled&&!V.some(h=>1==h.state)&&(ee=null),!ee&&V.every(h=>1!=h.state)&&V.some(h=>h.hasResult())&&(V=V.map(h=>h.hasResult()?new ActiveSource(h.source,0):h)),h.effects))er.is(sz)&&(ee=ee&&ee.setSelected(er.value,this.id));return V==this.active&&ee==this.open?this:new CompletionState(V,this.id,ee)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:sB}};let sB={"aria-autocomplete":"list"};function makeAttrs(h,d){let _={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":h};return d>-1&&(_["aria-activedescendant"]=h+"-"+d),_}let sW=[];let ActiveSource=class ActiveSource{constructor(h,d,_=-1){this.source=h,this.state=d,this.explicitPos=_}hasResult(){return!1}update(h,d){let _=h.isUserEvent("input.type")?"input":h.isUserEvent("delete.backward")?"delete":null,V=this;for(let ee of(_?V=V.handleUserEvent(h,_,d):h.docChanged?V=V.handleChange(h):h.selection&&0!=V.state&&(V=new ActiveSource(V.source,0)),h.effects))if(ee.is(sF))V=new ActiveSource(V.source,1,ee.value?cur(h.state):-1);else if(ee.is(sZ))V=new ActiveSource(V.source,0);else if(ee.is(sU))for(let h of ee.value)h.source==V.source&&(V=h);return V}handleUserEvent(h,d,_){return"delete"!=d&&_.activateOnTyping?new ActiveSource(this.source,1):this.map(h.changes)}handleChange(h){return h.changes.touchesRange(cur(h.startState))?new ActiveSource(this.source,0):this.map(h.changes)}map(h){return h.empty||this.explicitPos<0?this:new ActiveSource(this.source,this.state,h.mapPos(this.explicitPos))}};let ActiveResult=class ActiveResult extends ActiveSource{constructor(h,d,_,V,ee){super(h,2,d),this.result=_,this.from=V,this.to=ee}hasResult(){return!0}handleUserEvent(h,d,_){var V;let ee=h.changes.mapPos(this.from),er=h.changes.mapPos(this.to,1),eo=cur(h.state);if((this.explicitPos<0?eo<=ee:eo<this.from)||eo>er||"delete"==d&&cur(h.startState)==this.from)return new ActiveSource(this.source,"input"==d&&_.activateOnTyping?1:0);let ec=this.explicitPos<0?-1:h.changes.mapPos(this.explicitPos),eh;return!function(h,d,_,V){if(!h)return!1;let ee=d.sliceDoc(_,V);return"function"==typeof h?h(ee,_,V,d):ensureAnchor(h,!0).test(ee)}(this.result.validFor,h.state,ee,er)?this.result.update&&(eh=this.result.update(this.result,ee,er,new CompletionContext(h.state,eo,ec>=0)))?new ActiveResult(this.source,ec,eh,eh.from,null!==(V=eh.to)&&void 0!==V?V:cur(h.state)):new ActiveSource(this.source,1,ec):new ActiveResult(this.source,ec,this.result,ee,er)}handleChange(h){return h.changes.touchesRange(this.from,this.to)?new ActiveSource(this.source,0):this.map(h.changes)}map(h){return h.empty?this:new ActiveResult(this.source,this.explicitPos<0?-1:h.mapPos(this.explicitPos),this.result,h.mapPos(this.from),h.mapPos(this.to,1))}};let sU=dist_StateEffect.define({map:(h,d)=>h.map(h=>h.map(d))}),sz=dist_StateEffect.define(),sq=dist_StateField.define({create:()=>CompletionState.start(),update:(h,d)=>h.update(d),provide:h=>[iE.from(h,h=>h.tooltip),EditorView.contentAttributes.from(h,h=>h.attrs)]});function applyCompletion(h,d){let _=d.completion.apply||d.completion.label,V=h.state.field(sq).active.find(h=>h.source==d.source);return V instanceof ActiveResult&&("string"==typeof _?h.dispatch(Object.assign(Object.assign({},function(h,d,_,V){let{main:ee}=h.selection,er=_-ee.from,eo=V-ee.from;return Object.assign(Object.assign({},h.changeByRange(ec=>ec!=ee&&_!=V&&h.sliceDoc(ec.from+er,ec.from+eo)!=h.sliceDoc(_,V)?{range:ec}:{changes:{from:ec.from+er,to:V==ee.from?ec.to:ec.from+eo,insert:d},range:dist_EditorSelection.cursor(ec.from+er+d.length)})),{scrollIntoView:!0,userEvent:"input.complete"})}(h.state,_,V.from,V.to)),{annotations:sj.of(d.completion)})):_(h,d.completion,V.from,V.to),!0)}let createTooltip=h=>new CompletionTooltip(h,sq,applyCompletion),sX=EditorView.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"\xb7\xb7\xb7"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'\uD835\uDC65'"}},".cm-completionIcon-constant":{"&:after":{content:"'\uD835\uDC36'"}},".cm-completionIcon-type":{"&:after":{content:"'\uD835\uDC61'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'\uD83D\uDD11︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});let FieldPos=class FieldPos{constructor(h,d,_,V){this.field=h,this.line=d,this.from=_,this.to=V}};let FieldRange=class FieldRange{constructor(h,d,_){this.field=h,this.from=d,this.to=_}map(h){let d=h.mapPos(this.from,-1,ny.TrackDel),_=h.mapPos(this.to,1,ny.TrackDel);return null==d||null==_?null:new FieldRange(this.field,d,_)}};let Snippet=class Snippet{constructor(h,d){this.lines=h,this.fieldPositions=d}instantiate(h,d){let _=[],V=[d],ee=h.doc.lineAt(d),er=/^\s*/.exec(ee.text)[0];for(let ee of this.lines){if(_.length){let _=er,eo=/^\t*/.exec(ee)[0].length;for(let d=0;d<eo;d++)_+=h.facet(sd);V.push(d+_.length-eo),ee=_+ee.slice(eo)}_.push(ee),d+=ee.length+1}return{text:_,ranges:this.fieldPositions.map(h=>new FieldRange(h.field,V[h.line]+h.from,V[h.line]+h.to))}}static parse(h){let d=[],_=[],V=[],ee;for(let er of h.split(/\r\n?|\n/)){for(;ee=/[#$]\{(?:(\d+)(?::([^}]*))?|([^}]*))\}/.exec(er);){let h=ee[1]?+ee[1]:null,eo=ee[2]||ee[3]||"",ec=-1;for(let _=0;_<d.length;_++)(null!=h?d[_].seq==h:eo&&d[_].name==eo)&&(ec=_);if(ec<0){let _=0;for(;_<d.length&&(null==h||null!=d[_].seq&&d[_].seq<h);)_++;for(let ee of(d.splice(_,0,{seq:h,name:eo}),ec=_,V))ee.field>=ec&&ee.field++}V.push(new FieldPos(ec,_.length,ee.index,ee.index+eo.length)),er=er.slice(0,ee.index)+eo+er.slice(ee.index+ee[0].length)}for(let h;h=/\\([{}])/.exec(er);)for(let d of(er=er.slice(0,h.index)+h[1]+er.slice(h.index+h[0].length),V))d.line==_.length&&d.from>h.index&&(d.from--,d.to--);_.push(er)}return new Snippet(_,V)}};let sY=Decoration.widget({widget:new class extends WidgetType{toDOM(){let h=document.createElement("span");return h.className="cm-snippetFieldPosition",h}ignoreEvent(){return!1}}}),sG=Decoration.mark({class:"cm-snippetField"});let ActiveSnippet=class ActiveSnippet{constructor(h,d){this.ranges=h,this.active=d,this.deco=Decoration.set(h.map(h=>(h.from==h.to?sY:sG).range(h.from,h.to)))}map(h){let d=[];for(let _ of this.ranges){let V=_.map(h);if(!V)return null;d.push(V)}return new ActiveSnippet(d,this.active)}selectionInsideField(h){return h.ranges.every(h=>this.ranges.some(d=>d.field==this.active&&d.from<=h.from&&d.to>=h.to))}};let sH=dist_StateEffect.define({map:(h,d)=>h&&h.map(d)}),sK=dist_StateEffect.define(),sJ=dist_StateField.define({create:()=>null,update(h,d){for(let _ of d.effects){if(_.is(sH))return _.value;if(_.is(sK)&&h)return new ActiveSnippet(h.ranges,_.value)}return h&&d.docChanged&&(h=h.map(d.changes)),h&&d.selection&&!h.selectionInsideField(d.selection)&&(h=null),h},provide:h=>EditorView.decorations.from(h,h=>h?h.deco:Decoration.none)});function fieldSelection(h,d){return dist_EditorSelection.create(h.filter(h=>h.field==d).map(h=>dist_EditorSelection.range(h.from,h.to)))}function moveField(h){return({state:d,dispatch:_})=>{let V=d.field(sJ,!1);if(!V||h<0&&0==V.active)return!1;let ee=V.active+h,er=h>0&&!V.ranges.some(d=>d.field==ee+h);return _(d.update({selection:fieldSelection(V.ranges,ee),effects:sH.of(er?null:new ActiveSnippet(V.ranges,ee)),scrollIntoView:!0})),!0}}let s0=moveField(1),s1=moveField(-1),s2=[{key:"Tab",run:s0,shift:s1},{key:"Escape",run:({state:h,dispatch:d})=>!!h.field(sJ,!1)&&(d(h.update({effects:sH.of(null)})),!0)}],s5=Facet.define({combine:h=>h.length?h[0]:s2}),s7=n_.highest(r9.compute([s5],h=>h.facet(s5)));function snippetCompletion(h,d){let _;return Object.assign(Object.assign({},d),{apply:(_=Snippet.parse(h),(h,d,V,ee)=>{let{text:er,ranges:eo}=_.instantiate(h.state,V),ec={changes:{from:V,to:ee,insert:Text.of(er)},scrollIntoView:!0,annotations:d?[sj.of(d),Transaction.userEvent.of("input.complete")]:void 0};if(eo.length&&(ec.selection=fieldSelection(eo,0)),eo.some(h=>h.field>0)){let d=new ActiveSnippet(eo,0),_=ec.effects=[sH.of(d)];void 0===h.state.field(sJ,!1)&&_.push(dist_StateEffect.appendConfig.of([sJ,s7,s3,sX]))}h.dispatch(h.state.update(ec))})})}let s3=EditorView.domEventHandlers({mousedown(h,d){let _=d.state.field(sJ,!1),V;if(!_||null==(V=d.posAtCoords({x:h.clientX,y:h.clientY})))return!1;let ee=_.ranges.find(h=>h.from<=V&&h.to>=V);return!!ee&&ee.field!=_.active&&(d.dispatch({selection:fieldSelection(_.ranges,ee.field),effects:sH.of(_.ranges.some(h=>h.field>ee.field)?new ActiveSnippet(_.ranges,ee.field):null),scrollIntoView:!0}),!0)}}),s4={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},s6=dist_StateEffect.define({map(h,d){let _=d.mapPos(h,-1,ny.TrackAfter);return null==_?void 0:_}}),s9=new class extends RangeValue{};s9.startSide=1,s9.endSide=-1;let s8=dist_StateField.define({create:()=>dist_RangeSet.empty,update(h,d){if(h=h.map(d.changes),d.selection){let _=d.state.doc.lineAt(d.selection.main.head);h=h.update({filter:h=>h>=_.from&&h<=_.to})}for(let _ of d.effects)_.is(s6)&&(h=h.update({add:[s9.range(_.value,_.value+1)]}));return h}}),oe="()[]{}<>";function closing(h){for(let d=0;d<oe.length;d+=2)if(oe.charCodeAt(d)==h)return oe.charAt(d+1);return fromCodePoint(h<128?h:h+1)}function config(h,d){return h.languageDataAt("closeBrackets",d)[0]||s4}let or="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),oi=EditorView.inputHandler.of((h,d,_,V)=>{if((or?h.composing:h.compositionStarted)||h.state.readOnly)return!1;let ee=h.state.selection.main;if(V.length>2||2==V.length&&1==codePointSize(codePointAt(V,0))||d!=ee.from||_!=ee.to)return!1;let er=function(h,d){let _=config(h,h.selection.main.head),V=_.brackets||s4.brackets;for(let ee of V){let er=closing(codePointAt(ee,0));if(d==ee)return er==ee?function(h,d,_,V){let ee=V.stringPrefixes||s4.stringPrefixes,er=null,eo=h.changeByRange(V=>{if(!V.empty)return{changes:[{insert:d,from:V.from},{insert:d,from:V.to}],effects:s6.of(V.to+d.length),range:dist_EditorSelection.range(V.anchor+d.length,V.head+d.length)};let eo=V.head,ec=nextChar(h.doc,eo),eh;if(ec==d){if(nodeStart(h,eo))return{changes:{insert:d+d,from:eo},effects:s6.of(eo+d.length),range:dist_EditorSelection.cursor(eo+d.length)};if(closedBracketAt(h,eo)){let V=_&&h.sliceDoc(eo,eo+3*d.length)==d+d+d?d+d+d:d;return{changes:{from:eo,to:eo+V.length,insert:V},range:dist_EditorSelection.cursor(eo+V.length)}}}else if(_&&h.sliceDoc(eo-2*d.length,eo)==d+d&&(eh=canStartStringAt(h,eo-2*d.length,ee))>-1&&nodeStart(h,eh))return{changes:{insert:d+d+d+d,from:eo},effects:s6.of(eo+d.length),range:dist_EditorSelection.cursor(eo+d.length)};else if(h.charCategorizer(eo)(ec)!=nR.Word&&canStartStringAt(h,eo,ee)>-1&&!function(h,d,_,V){let ee=dist_syntaxTree(h).resolveInner(d,-1),er=V.reduce((h,d)=>Math.max(h,d.length),0);for(let eo=0;eo<5;eo++){let eo=h.sliceDoc(ee.from,Math.min(ee.to,ee.from+_.length+er)),ec=eo.indexOf(_);if(!ec||ec>-1&&V.indexOf(eo.slice(0,ec))>-1){let d=ee.firstChild;for(;d&&d.from==ee.from&&d.to-d.from>_.length+ec;){if(h.sliceDoc(d.to-_.length,d.to)==_)return!1;d=d.firstChild}return!0}let eh=ee.to==d&&ee.parent;if(!eh)break;ee=eh}return!1}(h,eo,d,ee))return{changes:{insert:d+d,from:eo},effects:s6.of(eo+d.length),range:dist_EditorSelection.cursor(eo+d.length)};return{range:er=V}});return er?null:h.update(eo,{scrollIntoView:!0,userEvent:"input.type"})}(h,ee,V.indexOf(ee+ee+ee)>-1,_):function(h,d,_,V){let ee=null,er=h.changeByRange(er=>{if(!er.empty)return{changes:[{insert:d,from:er.from},{insert:_,from:er.to}],effects:s6.of(er.to+d.length),range:dist_EditorSelection.range(er.anchor+d.length,er.head+d.length)};let eo=nextChar(h.doc,er.head);return!eo||/\s/.test(eo)||V.indexOf(eo)>-1?{changes:{insert:d+_,from:er.head},effects:s6.of(er.head+d.length),range:dist_EditorSelection.cursor(er.head+d.length)}:{range:ee=er}});return ee?null:h.update(er,{scrollIntoView:!0,userEvent:"input.type"})}(h,ee,er,_.before||s4.before);if(d==er&&closedBracketAt(h,h.selection.main.from))return function(h,d,_){let V=null,ee=h.changeByRange(d=>d.empty&&nextChar(h.doc,d.head)==_?{changes:{from:d.head,to:d.head+_.length,insert:_},range:dist_EditorSelection.cursor(d.head+_.length)}:V={range:d});return V?null:h.update(ee,{scrollIntoView:!0,userEvent:"input.type"})}(h,0,er)}return null}(h.state,V);return!!er&&(h.dispatch(er),!0)}),oo=[{key:"Backspace",run:({state:h,dispatch:d})=>{if(h.readOnly)return!1;let _=config(h,h.selection.main.head).brackets||s4.brackets,V=null,ee=h.changeByRange(d=>{if(d.empty){var ee,er;let V;let eo=(ee=h.doc,er=d.head,codePointSize(codePointAt(V=ee.sliceString(er-2,er),0))==V.length?V:V.slice(1));for(let V of _)if(V==eo&&nextChar(h.doc,d.head)==closing(codePointAt(V,0)))return{changes:{from:d.head-V.length,to:d.head+V.length},range:dist_EditorSelection.cursor(d.head-V.length)}}return{range:V=d}});return V||d(h.update(ee,{scrollIntoView:!0,userEvent:"delete.backward"})),!V}}];function closedBracketAt(h,d){let _=!1;return h.field(s8).between(0,h.doc.length,h=>{h==d&&(_=!0)}),_}function nextChar(h,d){let _=h.sliceString(d,d+2);return _.slice(0,codePointSize(codePointAt(_,0)))}function nodeStart(h,d){let _=dist_syntaxTree(h).resolveInner(d+1);return _.parent&&_.from==d}function canStartStringAt(h,d,_){let V=h.charCategorizer(d);if(V(h.sliceDoc(d-1,d))!=nR.Word)return d;for(let ee of _){let _=d-ee.length;if(h.sliceDoc(_,d)==ee&&V(h.sliceDoc(_-1,_))!=nR.Word)return _}return -1}function command(h,d){return({state:_,dispatch:V})=>{if(_.readOnly)return!1;let ee=h(d,_);return!!ee&&(V(_.update(ee)),!0)}}let oa=command(function(h,d,_=d.selection.ranges){let V=[],ee=-1;for(let{from:h,to:er}of _){let _=V.length,eo=1e9,ec=getConfig(d,h).line;if(ec){for(let _=h;_<=er;){let eh=d.doc.lineAt(_);if(eh.from>ee&&(h==er||er>eh.from)){ee=eh.from;let h=/^\s*/.exec(eh.text)[0].length,d=h==eh.length,_=eh.text.slice(h,h+ec.length)==ec?h:-1;h<eh.text.length&&h<eo&&(eo=h),V.push({line:eh,comment:_,token:ec,indent:h,empty:d,single:!1})}_=eh.to+1}if(eo<1e9)for(let h=_;h<V.length;h++)V[h].indent<V[h].line.text.length&&(V[h].indent=eo);V.length==_+1&&(V[_].single=!0)}}if(2!=h&&V.some(h=>h.comment<0&&(!h.empty||h.single))){let h=[];for(let{line:d,token:_,indent:ee,empty:er,single:eo}of V)(eo||!er)&&h.push({from:d.from+ee,insert:_+" "});let _=d.changes(h);return{changes:_,selection:d.selection.map(_,1)}}if(1!=h&&V.some(h=>h.comment>=0)){let h=[];for(let{line:d,comment:_,token:ee}of V)if(_>=0){let V=d.from+_,er=V+ee.length;" "==d.text[er-d.from]&&er++,h.push({from:V,to:er})}return{changes:h}}return null},0),op=command(changeBlockComment,0),om=command((h,d)=>changeBlockComment(h,d,function(h){let d=[];for(let _ of h.selection.ranges){let V=h.doc.lineAt(_.from),ee=_.to<=V.to?V:h.doc.lineAt(_.to),er=d.length-1;er>=0&&d[er].to>V.from?d[er].to=ee.to:d.push({from:V.from+/^\s*/.exec(V.text)[0].length,to:ee.to})}return d}(d)),0);function getConfig(h,d){let _=h.languageDataAt("commentTokens",d);return _.length?_[0]:{}}function changeBlockComment(h,d,_=d.selection.ranges){let V=_.map(h=>getConfig(d,h.from).block);if(!V.every(h=>h))return null;let ee=_.map((h,_)=>(function(h,{open:d,close:_},V,ee){let er,eo,ec=h.sliceDoc(V-50,V),eh=h.sliceDoc(ee,ee+50),ep=/\s*$/.exec(ec)[0].length,ef=/^\s*/.exec(eh)[0].length,em=ec.length-ep;if(ec.slice(em-d.length,em)==d&&eh.slice(ef,ef+_.length)==_)return{open:{pos:V-ep,margin:ep&&1},close:{pos:ee+ef,margin:ef&&1}};ee-V<=100?er=eo=h.sliceDoc(V,ee):(er=h.sliceDoc(V,V+50),eo=h.sliceDoc(ee-50,ee));let eg=/^\s*/.exec(er)[0].length,eO=/\s*$/.exec(eo)[0].length,ey=eo.length-eO-_.length;return er.slice(eg,eg+d.length)==d&&eo.slice(ey,ey+_.length)==_?{open:{pos:V+eg+d.length,margin:/\s/.test(er.charAt(eg+d.length))?1:0},close:{pos:ee-eO-_.length,margin:/\s/.test(eo.charAt(ey-1))?1:0}}:null})(d,V[_],h.from,h.to));if(2!=h&&!ee.every(h=>h))return{changes:d.changes(_.map((h,d)=>ee[d]?[]:[{from:h.from,insert:V[d].open+" "},{from:h.to,insert:" "+V[d].close}]))};if(1!=h&&ee.some(h=>h)){let h=[];for(let d=0,_;d<ee.length;d++)if(_=ee[d]){let ee=V[d],{open:er,close:eo}=_;h.push({from:er.pos-ee.open.length,to:er.pos+er.margin},{from:eo.pos-eo.margin,to:eo.pos+ee.close.length})}return{changes:h}}return null}let og=Annotation.define(),oO=Annotation.define(),oy=Facet.define(),ov=Facet.define({combine:h=>combineConfig(h,{minDepth:100,newGroupDelay:500,joinToEvent:(h,d)=>d},{minDepth:Math.max,newGroupDelay:Math.min,joinToEvent:(h,d)=>(_,V)=>h(_,V)||d(_,V)})}),ob=dist_StateField.define({create:()=>HistoryState.empty,update(h,d){let _=d.state.facet(ov),V=d.annotation(og);if(V){let ee=HistEvent.fromTransaction(d,V.selection),er=V.side,eo=0==er?h.undone:h.done;return eo=ee?updateBranch(eo,eo.length,_.minDepth,ee):addSelection(eo,d.startState.selection),new HistoryState(0==er?V.rest:eo,0==er?eo:V.rest)}let ee=d.annotation(oO);if(("full"==ee||"before"==ee)&&(h=h.isolate()),!1===d.annotation(Transaction.addToHistory))return d.changes.empty?h:h.addMapping(d.changes.desc);let er=HistEvent.fromTransaction(d),eo=d.annotation(Transaction.time),ec=d.annotation(Transaction.userEvent);return er?h=h.addChanges(er,eo,ec,_,d):d.selection&&(h=h.addSelection(d.startState.selection,eo,ec,_.newGroupDelay)),("full"==ee||"after"==ee)&&(h=h.isolate()),h},toJSON:h=>({done:h.done.map(h=>h.toJSON()),undone:h.undone.map(h=>h.toJSON())}),fromJSON:h=>new HistoryState(h.done.map(HistEvent.fromJSON),h.undone.map(HistEvent.fromJSON))});function cmd(h,d){return function({state:_,dispatch:V}){if(!d&&_.readOnly)return!1;let ee=_.field(ob,!1);if(!ee)return!1;let er=ee.pop(h,_,d);return!!er&&(V(er),!0)}}let oS=cmd(0,!1),o_=cmd(1,!1),ow=cmd(0,!0),ox=cmd(1,!0);let HistEvent=class HistEvent{constructor(h,d,_,V,ee){this.changes=h,this.effects=d,this.mapped=_,this.startSelection=V,this.selectionsAfter=ee}setSelAfter(h){return new HistEvent(this.changes,this.effects,this.mapped,this.startSelection,h)}toJSON(){var h,d,_;return{changes:null===(h=this.changes)||void 0===h?void 0:h.toJSON(),mapped:null===(d=this.mapped)||void 0===d?void 0:d.toJSON(),startSelection:null===(_=this.startSelection)||void 0===_?void 0:_.toJSON(),selectionsAfter:this.selectionsAfter.map(h=>h.toJSON())}}static fromJSON(h){return new HistEvent(h.changes&&ChangeSet.fromJSON(h.changes),[],h.mapped&&ChangeDesc.fromJSON(h.mapped),h.startSelection&&dist_EditorSelection.fromJSON(h.startSelection),h.selectionsAfter.map(dist_EditorSelection.fromJSON))}static fromTransaction(h,d){let _=ok;for(let d of h.startState.facet(oy)){let V=d(h);V.length&&(_=_.concat(V))}return!_.length&&h.changes.empty?null:new HistEvent(h.changes.invert(h.startState.doc),_,void 0,d||h.startState.selection,ok)}static selection(h){return new HistEvent(void 0,ok,void 0,void 0,h)}};function updateBranch(h,d,_,V){let ee=d+1>_+20?d-_-1:0,er=h.slice(ee,d);return er.push(V),er}function conc(h,d){return h.length?d.length?h.concat(d):h:d}let ok=[];function addSelection(h,d){if(!h.length)return[HistEvent.selection([d])];{let _=h[h.length-1],V=_.selectionsAfter.slice(Math.max(0,_.selectionsAfter.length-200));return V.length&&V[V.length-1].eq(d)?h:(V.push(d),updateBranch(h,h.length-1,1e9,_.setSelAfter(V)))}}function addMappingToBranch(h,d){if(!h.length)return h;let _=h.length,V=ok;for(;_;){let ee=function(h,d,_){let V=conc(h.selectionsAfter.length?h.selectionsAfter.map(h=>h.map(d)):ok,_);if(!h.changes)return HistEvent.selection(V);let ee=h.changes.map(d),er=d.mapDesc(h.changes,!0),eo=h.mapped?h.mapped.composeDesc(er):er;return new HistEvent(ee,dist_StateEffect.mapEffects(h.effects,d),eo,h.startSelection.map(er),V)}(h[_-1],d,V);if(ee.changes&&!ee.changes.empty||ee.effects.length){let d=h.slice(0,_);return d[_-1]=ee,d}d=ee.mapped,_--,V=ee.selectionsAfter}return V.length?[HistEvent.selection(V)]:ok}let oT=/^(input\.type|delete)($|\.)/;let HistoryState=class HistoryState{constructor(h,d,_=0,V){this.done=h,this.undone=d,this.prevTime=_,this.prevUserEvent=V}isolate(){return this.prevTime?new HistoryState(this.done,this.undone):this}addChanges(h,d,_,V,ee){var er,eo;let ec,eh,ep=this.done,ef=ep[ep.length-1];return ep=ef&&ef.changes&&!ef.changes.empty&&h.changes&&(!_||oT.test(_))&&(!ef.selectionsAfter.length&&d-this.prevTime<V.newGroupDelay&&V.joinToEvent(ee,(er=ef.changes,eo=h.changes,ec=[],eh=!1,er.iterChangedRanges((h,d)=>ec.push(h,d)),eo.iterChangedRanges((h,d,_,V)=>{for(let h=0;h<ec.length;){let d=ec[h++],ee=ec[h++];V>=d&&_<=ee&&(eh=!0)}}),eh))||"input.type.compose"==_)?updateBranch(ep,ep.length-1,V.minDepth,new HistEvent(h.changes.compose(ef.changes),conc(h.effects,ef.effects),ef.mapped,ef.startSelection,ok)):updateBranch(ep,ep.length,V.minDepth,h),new HistoryState(ep,ok,d,_)}addSelection(h,d,_,V){var ee;let er=this.done.length?this.done[this.done.length-1].selectionsAfter:ok;return er.length>0&&d-this.prevTime<V&&_==this.prevUserEvent&&_&&/^select($|\.)/.test(_)&&(ee=er[er.length-1]).ranges.length==h.ranges.length&&0===ee.ranges.filter((d,_)=>d.empty!=h.ranges[_].empty).length?this:new HistoryState(addSelection(this.done,h),this.undone,d,_)}addMapping(h){return new HistoryState(addMappingToBranch(this.done,h),addMappingToBranch(this.undone,h),this.prevTime,this.prevUserEvent)}pop(h,d,_){let V=0==h?this.done:this.undone;if(0==V.length)return null;let ee=V[V.length-1],er=ee.selectionsAfter[0]||d.selection;if(_&&ee.selectionsAfter.length){let _,eo;return d.update({selection:ee.selectionsAfter[ee.selectionsAfter.length-1],annotations:og.of({side:h,rest:(_=V[V.length-1],(eo=V.slice())[V.length-1]=_.setSelAfter(_.selectionsAfter.slice(0,_.selectionsAfter.length-1)),eo),selection:er}),userEvent:0==h?"select.undo":"select.redo",scrollIntoView:!0})}if(!ee.changes)return null;{let _=1==V.length?ok:V.slice(0,V.length-1);return ee.mapped&&(_=addMappingToBranch(_,ee.mapped)),d.update({changes:ee.changes,selection:ee.startSelection,effects:ee.effects,annotations:og.of({side:h,rest:_,selection:er}),filter:!1,userEvent:0==h?"undo":"redo",scrollIntoView:!0})}}};HistoryState.empty=new HistoryState(ok,ok);let oE=[{key:"Mod-z",run:oS,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:o_,preventDefault:!0},{linux:"Ctrl-Shift-z",run:o_,preventDefault:!0},{key:"Mod-u",run:ow,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:ox,preventDefault:!0}];function updateSel(h,d){return dist_EditorSelection.create(h.ranges.map(d),h.mainIndex)}function setSel(h,d){return h.update({selection:d,scrollIntoView:!0,userEvent:"select"})}function moveSel({state:h,dispatch:d},_){let V=updateSel(h.selection,_);return!V.eq(h.selection,!0)&&(d(setSel(h,V)),!0)}function rangeEnd(h,d){return dist_EditorSelection.cursor(d?h.to:h.from)}function cursorByChar(h,d){return moveSel(h,_=>_.empty?h.moveByChar(_,d):rangeEnd(_,d))}function ltrAtCursor(h){return h.textDirectionAt(h.state.selection.main.head)==n3.LTR}let cursorCharLeft=h=>cursorByChar(h,!ltrAtCursor(h)),cursorCharRight=h=>cursorByChar(h,ltrAtCursor(h));function cursorByGroup(h,d){return moveSel(h,_=>_.empty?h.moveByGroup(_,d):rangeEnd(_,d))}function moveBySyntax(h,d,_){let V,ee,er=dist_syntaxTree(h).resolveInner(d.head),eo=_?dist_NodeProp.closedBy:dist_NodeProp.openedBy;for(let V=d.head;;){let d=_?er.childAfter(V):er.childBefore(V);if(!d)break;!function(h,d,_){if(d.type.prop(_))return!0;let V=d.to-d.from;return V&&(V>2||/[^\s,.;:]/.test(h.sliceDoc(d.from,d.to)))||d.firstChild}(h,d,eo)?V=_?d.to:d.from:er=d}return ee=er.type.prop(eo)&&(V=_?matchBrackets(h,er.from,1):matchBrackets(h,er.to,-1))&&V.matched?_?V.end.to:V.end.from:_?er.to:er.from,dist_EditorSelection.cursor(ee,_?-1:1)}function cursorByLine(h,d){return moveSel(h,_=>{if(!_.empty)return rangeEnd(_,d);let V=h.moveVertically(_,d);return V.head!=_.head?V:h.moveToLineBoundary(_,d)})}"undefined"!=typeof Intl&&Intl.Segmenter;let cursorLineUp=h=>cursorByLine(h,!1),cursorLineDown=h=>cursorByLine(h,!0);function pageInfo(h){let d=h.scrollDOM.clientHeight<h.scrollDOM.scrollHeight-2,_=0,V=0,ee;if(d){for(let d of h.state.facet(EditorView.scrollMargins)){let ee=d(h);(null==ee?void 0:ee.top)&&(_=Math.max(null==ee?void 0:ee.top,_)),(null==ee?void 0:ee.bottom)&&(V=Math.max(null==ee?void 0:ee.bottom,V))}ee=h.scrollDOM.clientHeight-_-V}else ee=(h.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:_,marginBottom:V,selfScroll:d,height:Math.max(h.defaultLineHeight,ee-5)}}function cursorByPage(h,d){let _,V=pageInfo(h),{state:ee}=h,er=updateSel(ee.selection,_=>_.empty?h.moveVertically(_,d,V.height):rangeEnd(_,d));if(er.eq(ee.selection))return!1;if(V.selfScroll){let d=h.coordsAtPos(ee.selection.main.head),eo=h.scrollDOM.getBoundingClientRect(),ec=eo.top+V.marginTop,eh=eo.bottom-V.marginBottom;d&&d.top>ec&&d.bottom<eh&&(_=EditorView.scrollIntoView(er.main.head,{y:"start",yMargin:d.top-ec}))}return h.dispatch(setSel(ee,er),{effects:_}),!0}let cursorPageUp=h=>cursorByPage(h,!1),cursorPageDown=h=>cursorByPage(h,!0);function moveByLineBoundary(h,d,_){let V=h.lineBlockAt(d.head),ee=h.moveToLineBoundary(d,_);if(ee.head==d.head&&ee.head!=(_?V.to:V.from)&&(ee=h.moveToLineBoundary(d,_,!1)),!_&&ee.head==V.from&&V.length){let _=/^\s*/.exec(h.state.sliceDoc(V.from,Math.min(V.from+100,V.to)))[0].length;_&&d.head!=V.from+_&&(ee=dist_EditorSelection.cursor(V.from+_))}return ee}function extendSel(h,d){let _=updateSel(h.state.selection,h=>{let _=d(h);return dist_EditorSelection.range(h.anchor,_.head,_.goalColumn,_.bidiLevel||void 0)});return!_.eq(h.state.selection)&&(h.dispatch(setSel(h.state,_)),!0)}function selectByChar(h,d){return extendSel(h,_=>h.moveByChar(_,d))}let selectCharLeft=h=>selectByChar(h,!ltrAtCursor(h)),selectCharRight=h=>selectByChar(h,ltrAtCursor(h));function selectByGroup(h,d){return extendSel(h,_=>h.moveByGroup(_,d))}function selectByLine(h,d){return extendSel(h,_=>h.moveVertically(_,d))}let selectLineUp=h=>selectByLine(h,!1),selectLineDown=h=>selectByLine(h,!0);function selectByPage(h,d){return extendSel(h,_=>h.moveVertically(_,d,pageInfo(h).height))}let selectPageUp=h=>selectByPage(h,!1),selectPageDown=h=>selectByPage(h,!0),cursorDocStart=({state:h,dispatch:d})=>(d(setSel(h,{anchor:0})),!0),cursorDocEnd=({state:h,dispatch:d})=>(d(setSel(h,{anchor:h.doc.length})),!0),selectDocStart=({state:h,dispatch:d})=>(d(setSel(h,{anchor:h.selection.main.anchor,head:0})),!0),selectDocEnd=({state:h,dispatch:d})=>(d(setSel(h,{anchor:h.selection.main.anchor,head:h.doc.length})),!0);function deleteBy(h,d){if(h.state.readOnly)return!1;let _="delete.selection",{state:V}=h,ee=V.changeByRange(V=>{let{from:ee,to:er}=V;if(ee==er){let eo=d(V);eo<ee?(_="delete.backward",eo=skipAtomic(h,eo,!1)):eo>ee&&(_="delete.forward",eo=skipAtomic(h,eo,!0)),ee=Math.min(ee,eo),er=Math.max(er,eo)}else ee=skipAtomic(h,ee,!1),er=skipAtomic(h,er,!0);return ee==er?{range:V}:{changes:{from:ee,to:er},range:dist_EditorSelection.cursor(ee,ee<V.head?-1:1)}});return!ee.changes.empty&&(h.dispatch(V.update(ee,{scrollIntoView:!0,userEvent:_,effects:"delete.selection"==_?EditorView.announce.of(V.phrase("Selection deleted")):void 0})),!0)}function skipAtomic(h,d,_){if(h instanceof EditorView)for(let V of h.state.facet(EditorView.atomicRanges).map(d=>d(h)))V.between(d,d,(h,V)=>{h<d&&V>d&&(d=_?V:h)});return d}let deleteByChar=(h,d)=>deleteBy(h,_=>{let V=_.from,{state:ee}=h,er=ee.doc.lineAt(V),eo,ec;if(!d&&V>er.from&&V<er.from+200&&!/[^ \t]/.test(eo=er.text.slice(0,V-er.from))){if("	"==eo[eo.length-1])return V-1;let h=dist_countColumn(eo,ee.tabSize)%getIndentUnit(ee)||getIndentUnit(ee);for(let d=0;d<h&&" "==eo[eo.length-1-d];d++)V--;ec=V}else(ec=findClusterBreak(er.text,V-er.from,d,d)+er.from)==V&&er.number!=(d?ee.doc.lines:1)?ec+=d?1:-1:!d&&/[\ufe00-\ufe0f]/.test(er.text.slice(ec-er.from,V-er.from))&&(ec=findClusterBreak(er.text,ec-er.from,!1,!1)+er.from);return ec}),deleteCharBackward=h=>deleteByChar(h,!1),deleteCharForward=h=>deleteByChar(h,!0),deleteByGroup=(h,d)=>deleteBy(h,_=>{let V=_.head,{state:ee}=h,er=ee.doc.lineAt(V),eo=ee.charCategorizer(V);for(let h=null;;){if(V==(d?er.to:er.from)){V==_.head&&er.number!=(d?ee.doc.lines:1)&&(V+=d?1:-1);break}let ec=findClusterBreak(er.text,V-er.from,d)+er.from,eh=er.text.slice(Math.min(V,ec)-er.from,Math.max(V,ec)-er.from),ep=eo(eh);if(null!=h&&ep!=h)break;(" "!=eh||V!=_.head)&&(h=ep),V=ec}return V}),deleteGroupBackward=h=>deleteByGroup(h,!1);function selectedLineBlocks(h){let d=[],_=-1;for(let V of h.selection.ranges){let ee=h.doc.lineAt(V.from),er=h.doc.lineAt(V.to);if(V.empty||V.to!=er.from||(er=h.doc.lineAt(V.to-1)),_>=ee.number){let h=d[d.length-1];h.to=er.to,h.ranges.push(V)}else d.push({from:ee.from,to:er.to,ranges:[V]});_=er.number+1}return d}function moveLine(h,d,_){if(h.readOnly)return!1;let V=[],ee=[];for(let d of selectedLineBlocks(h)){if(_?d.to==h.doc.length:0==d.from)continue;let er=h.doc.lineAt(_?d.to+1:d.from-1),eo=er.length+1;if(_)for(let _ of(V.push({from:d.to,to:er.to},{from:d.from,insert:er.text+h.lineBreak}),d.ranges))ee.push(dist_EditorSelection.range(Math.min(h.doc.length,_.anchor+eo),Math.min(h.doc.length,_.head+eo)));else for(let _ of(V.push({from:er.from,to:d.from},{from:d.to,insert:h.lineBreak+er.text}),d.ranges))ee.push(dist_EditorSelection.range(_.anchor-eo,_.head-eo))}return!!V.length&&(d(h.update({changes:V,scrollIntoView:!0,selection:dist_EditorSelection.create(ee,h.selection.mainIndex),userEvent:"move.line"})),!0)}function copyLine(h,d,_){if(h.readOnly)return!1;let V=[];for(let d of selectedLineBlocks(h))_?V.push({from:d.from,insert:h.doc.slice(d.from,d.to)+h.lineBreak}):V.push({from:d.to,insert:h.lineBreak+h.doc.slice(d.from,d.to)});return d(h.update({changes:V,scrollIntoView:!0,userEvent:"input.copyline"})),!0}let oC=newlineAndIndent(!1),oP=newlineAndIndent(!0);function newlineAndIndent(h){return({state:d,dispatch:_})=>{if(d.readOnly)return!1;let V=d.changeByRange(_=>{let{from:V,to:ee}=_,er=d.doc.lineAt(V),eo=!h&&V==ee&&function(h,d){if(/\(\)|\[\]|\{\}/.test(h.sliceDoc(d-1,d+1)))return{from:d,to:d};let _=dist_syntaxTree(h).resolveInner(d),V=_.childBefore(d),ee=_.childAfter(d),er;return V&&ee&&V.to<=d&&ee.from>=d&&(er=V.type.prop(dist_NodeProp.closedBy))&&er.indexOf(ee.name)>-1&&h.doc.lineAt(V.to).from==h.doc.lineAt(ee.from).from&&!/\S/.test(h.sliceDoc(V.to,ee.from))?{from:V.to,to:ee.from}:null}(d,V);h&&(V=ee=(ee<=er.to?er:d.doc.lineAt(ee)).to);let ec=new IndentContext(d,{simulateBreak:V,simulateDoubleBreak:!!eo}),eh=getIndentation(ec,V);for(null==eh&&(eh=dist_countColumn(/^\s*/.exec(d.doc.lineAt(V).text)[0],d.tabSize));ee<er.to&&/\s/.test(er.text[ee-er.from]);)ee++;eo?{from:V,to:ee}=eo:V>er.from&&V<er.from+100&&!/\S/.test(er.text.slice(0,V))&&(V=er.from);let ep=["",indentString(d,eh)];return eo&&ep.push(indentString(d,ec.lineIndent(er.from,-1))),{changes:{from:V,to:ee,insert:Text.of(ep)},range:dist_EditorSelection.cursor(V+1+ep[1].length)}});return _(d.update(V,{scrollIntoView:!0,userEvent:"input"})),!0}}function changeBySelectedLine(h,d){let _=-1;return h.changeByRange(V=>{let ee=[];for(let er=V.from;er<=V.to;){let eo=h.doc.lineAt(er);eo.number>_&&(V.empty||V.to>eo.from)&&(d(eo,ee,V),_=eo.number),er=eo.to+1}let er=h.changes(ee);return{changes:ee,range:dist_EditorSelection.range(er.mapPos(V.anchor,1),er.mapPos(V.head,1))}})}let indentMore=({state:h,dispatch:d})=>!h.readOnly&&(d(h.update(changeBySelectedLine(h,(d,_)=>{_.push({from:d.from,insert:h.facet(sd)})}),{userEvent:"input.indent"})),!0),indentLess=({state:h,dispatch:d})=>!h.readOnly&&(d(h.update(changeBySelectedLine(h,(d,_)=>{let V=/^\s*/.exec(d.text)[0];if(!V)return;let ee=dist_countColumn(V,h.tabSize),er=0,eo=indentString(h,Math.max(0,ee-getIndentUnit(h)));for(;er<V.length&&er<eo.length&&V.charCodeAt(er)==eo.charCodeAt(er);)er++;_.push({from:d.from+er,to:d.from+V.length,insert:eo.slice(er)})}),{userEvent:"delete.dedent"})),!0),oI=[{key:"Ctrl-b",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Ctrl-f",run:cursorCharRight,shift:selectCharRight},{key:"Ctrl-p",run:cursorLineUp,shift:selectLineUp},{key:"Ctrl-n",run:cursorLineDown,shift:selectLineDown},{key:"Ctrl-a",run:h=>moveSel(h,d=>dist_EditorSelection.cursor(h.lineBlockAt(d.head).from,1)),shift:h=>extendSel(h,d=>dist_EditorSelection.cursor(h.lineBlockAt(d.head).from))},{key:"Ctrl-e",run:h=>moveSel(h,d=>dist_EditorSelection.cursor(h.lineBlockAt(d.head).to,-1)),shift:h=>extendSel(h,d=>dist_EditorSelection.cursor(h.lineBlockAt(d.head).to))},{key:"Ctrl-d",run:deleteCharForward},{key:"Ctrl-h",run:deleteCharBackward},{key:"Ctrl-k",run:h=>deleteBy(h,d=>{let _=h.lineBlockAt(d.head).to;return d.head<_?_:Math.min(h.state.doc.length,d.head+1)})},{key:"Ctrl-Alt-h",run:deleteGroupBackward},{key:"Ctrl-o",run:({state:h,dispatch:d})=>{if(h.readOnly)return!1;let _=h.changeByRange(h=>({changes:{from:h.from,to:h.to,insert:Text.of(["",""])},range:dist_EditorSelection.cursor(h.from)}));return d(h.update(_,{scrollIntoView:!0,userEvent:"input"})),!0}},{key:"Ctrl-t",run:({state:h,dispatch:d})=>{if(h.readOnly)return!1;let _=h.changeByRange(d=>{if(!d.empty||0==d.from||d.from==h.doc.length)return{range:d};let _=d.from,V=h.doc.lineAt(_),ee=_==V.from?_-1:findClusterBreak(V.text,_-V.from,!1)+V.from,er=_==V.to?_+1:findClusterBreak(V.text,_-V.from,!0)+V.from;return{changes:{from:ee,to:er,insert:h.doc.slice(_,er).append(h.doc.slice(ee,_))},range:dist_EditorSelection.cursor(er)}});return!_.changes.empty&&(d(h.update(_,{scrollIntoView:!0,userEvent:"move.character"})),!0)}},{key:"Ctrl-v",run:cursorPageDown}],oR=[{key:"ArrowLeft",run:cursorCharLeft,shift:selectCharLeft,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:h=>cursorByGroup(h,!ltrAtCursor(h)),shift:h=>selectByGroup(h,!ltrAtCursor(h)),preventDefault:!0},{mac:"Cmd-ArrowLeft",run:h=>moveSel(h,d=>moveByLineBoundary(h,d,!ltrAtCursor(h))),shift:h=>extendSel(h,d=>moveByLineBoundary(h,d,!ltrAtCursor(h))),preventDefault:!0},{key:"ArrowRight",run:cursorCharRight,shift:selectCharRight,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:h=>cursorByGroup(h,ltrAtCursor(h)),shift:h=>selectByGroup(h,ltrAtCursor(h)),preventDefault:!0},{mac:"Cmd-ArrowRight",run:h=>moveSel(h,d=>moveByLineBoundary(h,d,ltrAtCursor(h))),shift:h=>extendSel(h,d=>moveByLineBoundary(h,d,ltrAtCursor(h))),preventDefault:!0},{key:"ArrowUp",run:cursorLineUp,shift:selectLineUp,preventDefault:!0},{mac:"Cmd-ArrowUp",run:cursorDocStart,shift:selectDocStart},{mac:"Ctrl-ArrowUp",run:cursorPageUp,shift:selectPageUp},{key:"ArrowDown",run:cursorLineDown,shift:selectLineDown,preventDefault:!0},{mac:"Cmd-ArrowDown",run:cursorDocEnd,shift:selectDocEnd},{mac:"Ctrl-ArrowDown",run:cursorPageDown,shift:selectPageDown},{key:"PageUp",run:cursorPageUp,shift:selectPageUp},{key:"PageDown",run:cursorPageDown,shift:selectPageDown},{key:"Home",run:h=>moveSel(h,d=>moveByLineBoundary(h,d,!1)),shift:h=>extendSel(h,d=>moveByLineBoundary(h,d,!1)),preventDefault:!0},{key:"Mod-Home",run:cursorDocStart,shift:selectDocStart},{key:"End",run:h=>moveSel(h,d=>moveByLineBoundary(h,d,!0)),shift:h=>extendSel(h,d=>moveByLineBoundary(h,d,!0)),preventDefault:!0},{key:"Mod-End",run:cursorDocEnd,shift:selectDocEnd},{key:"Enter",run:oC},{key:"Mod-a",run:({state:h,dispatch:d})=>(d(h.update({selection:{anchor:0,head:h.doc.length},userEvent:"select"})),!0)},{key:"Backspace",run:deleteCharBackward,shift:deleteCharBackward},{key:"Delete",run:deleteCharForward},{key:"Mod-Backspace",mac:"Alt-Backspace",run:deleteGroupBackward},{key:"Mod-Delete",mac:"Alt-Delete",run:h=>deleteByGroup(h,!0)},{mac:"Mod-Backspace",run:h=>deleteBy(h,d=>{let _=h.moveToLineBoundary(d,!1).head;return d.head>_?_:Math.max(0,d.head-1)})},{mac:"Mod-Delete",run:h=>deleteBy(h,d=>{let _=h.moveToLineBoundary(d,!0).head;return d.head<_?_:Math.min(h.state.doc.length,d.head+1)})}].concat(oI.map(h=>({mac:h.key,run:h.run,shift:h.shift}))),oA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:h=>moveSel(h,d=>moveBySyntax(h.state,d,!ltrAtCursor(h))),shift:h=>extendSel(h,d=>moveBySyntax(h.state,d,!ltrAtCursor(h)))},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:h=>moveSel(h,d=>moveBySyntax(h.state,d,ltrAtCursor(h))),shift:h=>extendSel(h,d=>moveBySyntax(h.state,d,ltrAtCursor(h)))},{key:"Alt-ArrowUp",run:({state:h,dispatch:d})=>moveLine(h,d,!1)},{key:"Shift-Alt-ArrowUp",run:({state:h,dispatch:d})=>copyLine(h,d,!1)},{key:"Alt-ArrowDown",run:({state:h,dispatch:d})=>moveLine(h,d,!0)},{key:"Shift-Alt-ArrowDown",run:({state:h,dispatch:d})=>copyLine(h,d,!0)},{key:"Escape",run:({state:h,dispatch:d})=>{let _=h.selection,V=null;return _.ranges.length>1?V=dist_EditorSelection.create([_.main]):_.main.empty||(V=dist_EditorSelection.create([dist_EditorSelection.cursor(_.main.head)])),!!V&&(d(setSel(h,V)),!0)}},{key:"Mod-Enter",run:oP},{key:"Alt-l",mac:"Ctrl-l",run:({state:h,dispatch:d})=>{let _=selectedLineBlocks(h).map(({from:d,to:_})=>dist_EditorSelection.range(d,Math.min(_+1,h.doc.length)));return d(h.update({selection:dist_EditorSelection.create(_),userEvent:"select"})),!0}},{key:"Mod-i",run:({state:h,dispatch:d})=>{let _=updateSel(h.selection,d=>{var _;let V=dist_syntaxTree(h).resolveStack(d.from,1);for(let h=V;h;h=h.next){let{node:V}=h;if((V.from<d.from&&V.to>=d.to||V.to>d.to&&V.from<=d.from)&&(null===(_=V.parent)||void 0===_?void 0:_.parent))return dist_EditorSelection.range(V.to,V.from)}return d});return d(setSel(h,_)),!0},preventDefault:!0},{key:"Mod-[",run:indentLess},{key:"Mod-]",run:indentMore},{key:"Mod-Alt-\\",run:({state:h,dispatch:d})=>{if(h.readOnly)return!1;let _=Object.create(null),V=new IndentContext(h,{overrideIndentation:h=>{let d=_[h];return null==d?-1:d}}),ee=changeBySelectedLine(h,(d,ee,er)=>{let eo=getIndentation(V,d.from);if(null==eo)return;/\S/.test(d.text)||(eo=0);let ec=/^\s*/.exec(d.text)[0],eh=indentString(h,eo);(ec!=eh||er.from<d.from+ec.length)&&(_[d.from]=eo,ee.push({from:d.from,to:d.from+ec.length,insert:eh}))});return ee.changes.empty||d(h.update(ee,{userEvent:"indent"})),!0}},{key:"Shift-Mod-k",run:h=>{if(h.state.readOnly)return!1;let{state:d}=h,_=d.changes(selectedLineBlocks(d).map(({from:h,to:_})=>(h>0?h--:_<d.doc.length&&_++,{from:h,to:_}))),V=updateSel(d.selection,d=>h.moveVertically(d,!0)).map(_);return h.dispatch({changes:_,selection:V,scrollIntoView:!0,userEvent:"delete.line"}),!0}},{key:"Shift-Mod-\\",run:({state:h,dispatch:d})=>{let _,V;return _=!1,V=updateSel(h.selection,d=>{let V=matchBrackets(h,d.head,-1)||matchBrackets(h,d.head,1)||d.head>0&&matchBrackets(h,d.head-1,1)||d.head<h.doc.length&&matchBrackets(h,d.head+1,-1);if(!V||!V.end)return d;_=!0;let ee=V.start.from==d.head?V.end.to:V.end.from;return dist_EditorSelection.cursor(ee)}),!!_&&(d(setSel(h,V)),!0)}},{key:"Mod-/",run:h=>{let{state:d}=h,_=d.doc.lineAt(d.selection.main.from),V=getConfig(h.state,_.from);return V.line?oa(h):!!V.block&&om(h)}},{key:"Alt-A",run:op}].concat(oR);_(6337);let o$=eF["undefined"!=typeof document&&void 0!==document.createElement?"useLayoutEffect":"useEffect"],oN=new Map;function getIntersectionObserver(h){let{root:d,..._}=h,V=JSON.stringify(_),ee=oN.get(d);return ee||(ee={},oN.set(d,ee)),ee[V]?ee[V]:ee[V]=function({root:h=null,pollInterval:d=null,useMutationObserver:_=!1,rootMargin:V="0px 0px 0px 0px",threshold:ee=0}){let er=new Set;if("undefined"==typeof IntersectionObserver)return null;let eo=new IntersectionObserver(h=>{for(let d of er)d(h,eo)},{root:h,rootMargin:V,threshold:ee});return eo.POLL_INTERVAL=d,eo.USE_MUTATION_OBSERVER=_,{observer:eo,getListeners:()=>er,subscribe:h=>er.add(h),unsubscribe:h=>er.delete(h)}}(h)}var intersection_observer_dist_module=function(h,d={}){let{root:_=null,pollInterval:V=null,useMutationObserver:ee=!1,rootMargin:er="0px 0px 0px 0px",threshold:eo=0,initialIsIntersecting:ec=!1}=d,[eh,ep]=eF.useState(()=>({boundingClientRect:null,intersectionRatio:0,intersectionRect:null,isIntersecting:ec,rootBounds:null,target:null,time:0})),[ef,em]=eF.useState(()=>getIntersectionObserver({root:_,pollInterval:V,useMutationObserver:ee,rootMargin:er,threshold:eo}));return eF.useEffect(()=>{let h=getIntersectionObserver({root:_,pollInterval:V,useMutationObserver:ee,rootMargin:er,threshold:eo});em(h)},[_,er,V,ee,JSON.stringify(eo)]),o$(()=>{let d=h&&"current"in h?h.current:h;if(!ef||!d)return;let _=!1;ef.observer.observe(d);let callback=h=>{if(!_)for(let _=0;_<h.length;_++){let V=h[_];V.target===d&&ep(V)}};return ef.subscribe(callback),()=>{_=!0,ef.observer.unobserve(d),ef.unsubscribe(callback)}},[h,ef]),eh},oM=_(3454);let Stack=class Stack{constructor(h,d,_,V,ee,er,eo,ec,eh,ep=0,ef){this.p=h,this.stack=d,this.state=_,this.reducePos=V,this.pos=ee,this.score=er,this.buffer=eo,this.bufferBase=ec,this.curContext=eh,this.lookAhead=ep,this.parent=ef}toString(){return`[${this.stack.filter((h,d)=>d%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(h,d,_=0){let V=h.parser.context;return new Stack(h,[],d,_,_,0,[],0,V?new StackContext(V,V.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(h,d){this.stack.push(this.state,d,this.bufferBase+this.buffer.length),this.state=h}reduce(h){var d;let _=h>>19,V=65535&h,{parser:ee}=this.p,er=ee.dynamicPrecedence(V);if(er&&(this.score+=er),0==_){this.pushState(ee.getGoto(this.state,V,!0),this.reducePos),V<ee.minRepeatTerm&&this.storeNode(V,this.reducePos,this.reducePos,4,!0),this.reduceContext(V,this.reducePos);return}let eo=this.stack.length-(_-1)*3-(262144&h?6:0),ec=eo?this.stack[eo-2]:this.p.ranges[0].from,eh=this.reducePos-ec;eh>=2e3&&!(null===(d=this.p.parser.nodeSet.types[V])||void 0===d?void 0:d.isAnonymous)&&(ec==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=eh):this.p.lastBigReductionSize<eh&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=ec,this.p.lastBigReductionSize=eh));let ep=eo?this.stack[eo-1]:0,ef=this.bufferBase+this.buffer.length-ep;if(V<ee.minRepeatTerm||131072&h){let h=ee.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(V,ec,h,ef+4,!0)}if(262144&h)this.state=this.stack[eo];else{let h=this.stack[eo-3];this.state=ee.getGoto(h,V,!0)}for(;this.stack.length>eo;)this.stack.pop();this.reduceContext(V,ec)}storeNode(h,d,_,V=4,ee=!1){if(0==h&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let h=this,V=this.buffer.length;if(0==V&&h.parent&&(V=h.bufferBase-h.parent.bufferBase,h=h.parent),V>0&&0==h.buffer[V-4]&&h.buffer[V-1]>-1){if(d==_)return;if(h.buffer[V-2]>=d){h.buffer[V-2]=_;return}}}if(ee&&this.pos!=_){let ee=this.buffer.length;if(ee>0&&0!=this.buffer[ee-4])for(;ee>0&&this.buffer[ee-2]>_;)this.buffer[ee]=this.buffer[ee-4],this.buffer[ee+1]=this.buffer[ee-3],this.buffer[ee+2]=this.buffer[ee-2],this.buffer[ee+3]=this.buffer[ee-1],ee-=4,V>4&&(V-=4);this.buffer[ee]=h,this.buffer[ee+1]=d,this.buffer[ee+2]=_,this.buffer[ee+3]=V}else this.buffer.push(h,d,_,V)}shift(h,d,_,V){if(131072&h)this.pushState(65535&h,this.pos);else if((262144&h)==0){let{parser:ee}=this.p;(V>this.pos||d<=ee.maxNode)&&(this.pos=V,ee.stateFlag(h,1)||(this.reducePos=V)),this.pushState(h,_),this.shiftContext(d,_),d<=ee.maxNode&&this.buffer.push(d,_,V,4)}else this.pos=V,this.shiftContext(d,_),d<=this.p.parser.maxNode&&this.buffer.push(d,_,V,4)}apply(h,d,_,V){65536&h?this.reduce(h):this.shift(h,d,_,V)}useNode(h,d){let _=this.p.reused.length-1;(_<0||this.p.reused[_]!=h)&&(this.p.reused.push(h),_++);let V=this.pos;this.reducePos=this.pos=V+h.length,this.pushState(d,V),this.buffer.push(_,V,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,h,this,this.p.stream.reset(this.pos-h.length)))}split(){let h=this,d=h.buffer.length;for(;d>0&&h.buffer[d-2]>h.reducePos;)d-=4;let _=h.buffer.slice(d),V=h.bufferBase+d;for(;h&&V==h.bufferBase;)h=h.parent;return new Stack(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,_,V,this.curContext,this.lookAhead,h)}recoverByDelete(h,d){let _=h<=this.p.parser.maxNode;_&&this.storeNode(h,this.pos,d,4),this.storeNode(0,this.pos,d,_?8:4),this.pos=this.reducePos=d,this.score-=190}canShift(h){for(let d=new SimulatedStack(this);;){let _=this.p.parser.stateSlot(d.state,4)||this.p.parser.hasAction(d.state,h);if(0==_)return!1;if((65536&_)==0)return!0;d.reduce(_)}}recoverByInsert(h){if(this.stack.length>=300)return[];let d=this.p.parser.nextStates(this.state);if(d.length>8||this.stack.length>=120){let _=[];for(let V=0,ee;V<d.length;V+=2)(ee=d[V+1])!=this.state&&this.p.parser.hasAction(ee,h)&&_.push(d[V],ee);if(this.stack.length<120)for(let h=0;_.length<8&&h<d.length;h+=2){let V=d[h+1];_.some((h,d)=>1&d&&h==V)||_.push(d[h],V)}d=_}let _=[];for(let h=0;h<d.length&&_.length<4;h+=2){let V=d[h+1];if(V==this.state)continue;let ee=this.split();ee.pushState(V,this.pos),ee.storeNode(0,ee.pos,ee.pos,4,!0),ee.shiftContext(d[h],this.pos),ee.reducePos=this.pos,ee.score-=200,_.push(ee)}return _}forceReduce(){let{parser:h}=this.p,d=h.stateSlot(this.state,5);if((65536&d)==0)return!1;if(!h.validAction(this.state,d)){let _=d>>19,V=65535&d,ee=this.stack.length-3*_;if(ee<0||0>h.getGoto(this.stack[ee],V,!1)){let h=this.findForcedReduction();if(null==h)return!1;d=h}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(d),!0}findForcedReduction(){let{parser:h}=this.p,d=[],explore=(_,V)=>{if(!d.includes(_))return d.push(_),h.allActions(_,d=>{if(393216&d);else if(65536&d){let _=(d>>19)-V;if(_>1){let V=65535&d,ee=this.stack.length-3*_;if(ee>=0&&h.getGoto(this.stack[ee],V,!1)>=0)return _<<19|65536|V}}else{let h=explore(d,V+1);if(null!=h)return h}})};return explore(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:h}=this.p;return 65535==h.data[h.stateSlot(this.state,1)]&&!h.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(h){if(this.state!=h.state||this.stack.length!=h.stack.length)return!1;for(let d=0;d<this.stack.length;d+=3)if(this.stack[d]!=h.stack[d])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(h){return this.p.parser.dialect.flags[h]}shiftContext(h,d){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,h,this,this.p.stream.reset(d)))}reduceContext(h,d){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,h,this,this.p.stream.reset(d)))}emitContext(){let h=this.buffer.length-1;(h<0||-3!=this.buffer[h])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let h=this.buffer.length-1;(h<0||-4!=this.buffer[h])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(h){if(h!=this.curContext.context){let d=new StackContext(this.curContext.tracker,h);d.hash!=this.curContext.hash&&this.emitContext(),this.curContext=d}}setLookAhead(h){h>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=h)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}};let StackContext=class StackContext{constructor(h,d){this.tracker=h,this.context=d,this.hash=h.strict?h.hash(d):0}};let SimulatedStack=class SimulatedStack{constructor(h){this.start=h,this.state=h.state,this.stack=h.stack,this.base=this.stack.length}reduce(h){let d=h>>19;0==d?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(d-1)*3;let _=this.start.p.parser.getGoto(this.stack[this.base-3],65535&h,!0);this.state=_}};let StackBufferCursor=class StackBufferCursor{constructor(h,d,_){this.stack=h,this.pos=d,this.index=_,this.buffer=h.buffer,0==this.index&&this.maybeNext()}static create(h,d=h.bufferBase+h.buffer.length){return new StackBufferCursor(h,d,d-h.bufferBase)}maybeNext(){let h=this.stack.parent;null!=h&&(this.index=this.stack.bufferBase-h.bufferBase,this.stack=h,this.buffer=h.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new StackBufferCursor(this.stack,this.pos,this.index)}};function decodeArray(h,d=Uint16Array){if("string"!=typeof h)return h;let _=null;for(let V=0,ee=0;V<h.length;){let er=0;for(;;){let d=h.charCodeAt(V++),_=!1;if(126==d){er=65535;break}d>=92&&d--,d>=34&&d--;let ee=d-32;if(ee>=46&&(ee-=46,_=!0),er+=ee,_)break;er*=46}_?_[ee++]=er:_=new d(er)}return _}let CachedToken=class CachedToken{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}};let oQ=new CachedToken;let InputStream=class InputStream{constructor(h,d){this.input=h,this.ranges=d,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=oQ,this.rangeIndex=0,this.pos=this.chunkPos=d[0].from,this.range=d[0],this.end=d[d.length-1].to,this.readNext()}resolveOffset(h,d){let _=this.range,V=this.rangeIndex,ee=this.pos+h;for(;ee<_.from;){if(!V)return null;let h=this.ranges[--V];ee-=_.from-h.to,_=h}for(;d<0?ee>_.to:ee>=_.to;){if(V==this.ranges.length-1)return null;let h=this.ranges[++V];ee+=h.from-_.to,_=h}return ee}clipPos(h){if(h>=this.range.from&&h<this.range.to)return h;for(let d of this.ranges)if(d.to>h)return Math.max(h,d.from);return this.end}peek(h){let d=this.chunkOff+h,_,V;if(d>=0&&d<this.chunk.length)_=this.pos+h,V=this.chunk.charCodeAt(d);else{let d=this.resolveOffset(h,1);if(null==d)return -1;if((_=d)>=this.chunk2Pos&&_<this.chunk2Pos+this.chunk2.length)V=this.chunk2.charCodeAt(_-this.chunk2Pos);else{let h=this.rangeIndex,d=this.range;for(;d.to<=_;)d=this.ranges[++h];this.chunk2=this.input.chunk(this.chunk2Pos=_),_+this.chunk2.length>d.to&&(this.chunk2=this.chunk2.slice(0,d.to-_)),V=this.chunk2.charCodeAt(0)}}return _>=this.token.lookAhead&&(this.token.lookAhead=_+1),V}acceptToken(h,d=0){let _=d?this.resolveOffset(d,-1):this.pos;if(null==_||_<this.token.start)throw RangeError("Token end out of bounds");this.token.value=h,this.token.end=_}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:h,chunkPos:d}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=h,this.chunk2Pos=d,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let h=this.input.chunk(this.pos),d=this.pos+h.length;this.chunk=d>this.range.to?h.slice(0,this.range.to-this.pos):h,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(h=1){for(this.chunkOff+=h;this.pos+h>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();h-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=h,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(h,d){if(d?(this.token=d,d.start=h,d.lookAhead=h+1,d.value=d.extended=-1):this.token=oQ,this.pos!=h){if(this.pos=h,h==this.end)return this.setDone(),this;for(;h<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;h>=this.range.to;)this.range=this.ranges[++this.rangeIndex];h>=this.chunkPos&&h<this.chunkPos+this.chunk.length?this.chunkOff=h-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(h,d){if(h>=this.chunkPos&&d<=this.chunkPos+this.chunk.length)return this.chunk.slice(h-this.chunkPos,d-this.chunkPos);if(h>=this.chunk2Pos&&d<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(h-this.chunk2Pos,d-this.chunk2Pos);if(h>=this.range.from&&d<=this.range.to)return this.input.read(h,d);let _="";for(let V of this.ranges){if(V.from>=d)break;V.to>h&&(_+=this.input.read(Math.max(V.from,h),Math.min(V.to,d)))}return _}};let TokenGroup=class TokenGroup{constructor(h,d){this.data=h,this.id=d}token(h,d){let{parser:_}=d.p;dist_readToken(this.data,h,d,this.id,_.data,_.tokenPrecTable)}};TokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;let LocalTokenGroup=class LocalTokenGroup{constructor(h,d,_){this.precTable=d,this.elseToken=_,this.data="string"==typeof h?decodeArray(h):h}token(h,d){let _=h.pos,V=0;for(;;){let _=h.next<0,ee=h.resolveOffset(1,1);if(dist_readToken(this.data,h,d,0,this.data,this.precTable),h.token.value>-1)break;if(null==this.elseToken)return;if(!_&&V++,null==ee)break;h.reset(ee,h.token)}V&&(h.reset(_,h.token),h.acceptToken(this.elseToken,V))}};LocalTokenGroup.prototype.contextual=TokenGroup.prototype.fallback=TokenGroup.prototype.extend=!1;let ExternalTokenizer=class ExternalTokenizer{constructor(h,d={}){this.token=h,this.contextual=!!d.contextual,this.fallback=!!d.fallback,this.extend=!!d.extend}};function dist_readToken(h,d,_,V,ee,er){let eo=0,ec=1<<V,{dialect:eh}=_.p.parser;s:for(;(ec&h[eo])!=0;){let _=h[eo+1];for(let V=eo+3;V<_;V+=2)if((h[V+1]&ec)>0){let _=h[V];if(eh.allows(_)&&(-1==d.token.value||d.token.value==_||function(h,d,_,V){let ee=findOffset(_,V,d);return ee<0||findOffset(_,V,h)<ee}(_,d.token.value,ee,er))){d.acceptToken(_);break}}let V=d.next,ep=0,ef=h[eo+2];if(d.next<0&&ef>ep&&65535==h[_+3*ef-3]){eo=h[_+3*ef-1];continue}for(;ep<ef;){let ee=ep+ef>>1,er=_+ee+(ee<<1),ec=h[er],eh=h[er+1]||65536;if(V<ec)ef=ee;else if(V>=eh)ep=ee+1;else{eo=h[er+2],d.advance();continue s}}break}}function findOffset(h,d,_){for(let V=d,ee;65535!=(ee=h[V]);V++)if(ee==_)return V-d;return -1}let oD=void 0!==oM&&oM.env&&/\bparse\b/.test(oM.env.LOG),oj=null;function cutAt(h,d,_){let V=h.cursor(ev.IncludeAnonymous);for(V.moveTo(d);;)if(!(_<0?V.childBefore(d):V.childAfter(d)))for(;;){if((_<0?V.to<d:V.from>d)&&!V.type.isError)return _<0?Math.max(0,Math.min(V.to-1,d-25)):Math.min(h.length,Math.max(V.from+1,d+25));if(_<0?V.prevSibling():V.nextSibling())break;if(!V.parent())return _<0?0:h.length}}let dist_FragmentCursor=class dist_FragmentCursor{constructor(h,d){this.fragments=h,this.nodeSet=d,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let h=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(h){for(this.safeFrom=h.openStart?cutAt(h.tree,h.from+h.offset,1)-h.offset:h.from,this.safeTo=h.openEnd?cutAt(h.tree,h.to+h.offset,-1)-h.offset:h.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(h.tree),this.start.push(-h.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(h){if(h<this.nextStart)return null;for(;this.fragment&&this.safeTo<=h;)this.nextFragment();if(!this.fragment)return null;for(;;){let d=this.trees.length-1;if(d<0)return this.nextFragment(),null;let _=this.trees[d],V=this.index[d];if(V==_.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let ee=_.children[V],er=this.start[d]+_.positions[V];if(er>h)return this.nextStart=er,null;if(ee instanceof dist_Tree){if(er==h){if(er<this.safeFrom)return null;let h=er+ee.length;if(h<=this.safeTo){let d=ee.prop(dist_NodeProp.lookAhead);if(!d||h+d<this.fragment.to)return ee}}this.index[d]++,er+ee.length>=Math.max(this.safeFrom,h)&&(this.trees.push(ee),this.start.push(er),this.index.push(0))}else this.index[d]++,this.nextStart=er+ee.length}}};let TokenCache=class TokenCache{constructor(h,d){this.stream=d,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=h.tokenizers.map(h=>new CachedToken)}getActions(h){let d=0,_=null,{parser:V}=h.p,{tokenizers:ee}=V,er=V.stateSlot(h.state,3),eo=h.curContext?h.curContext.hash:0,ec=0;for(let V=0;V<ee.length;V++){if((1<<V&er)==0)continue;let eh=ee[V],ep=this.tokens[V];if((!_||eh.fallback)&&((eh.contextual||ep.start!=h.pos||ep.mask!=er||ep.context!=eo)&&(this.updateCachedToken(ep,eh,h),ep.mask=er,ep.context=eo),ep.lookAhead>ep.end+25&&(ec=Math.max(ep.lookAhead,ec)),0!=ep.value)){let V=d;if(ep.extended>-1&&(d=this.addActions(h,ep.extended,ep.end,d)),d=this.addActions(h,ep.value,ep.end,d),!eh.extend&&(_=ep,d>V))break}}for(;this.actions.length>d;)this.actions.pop();return ec&&h.setLookAhead(ec),_||h.pos!=this.stream.end||((_=new CachedToken).value=h.p.parser.eofTerm,_.start=_.end=h.pos,d=this.addActions(h,_.value,_.end,d)),this.mainToken=_,this.actions}getMainToken(h){if(this.mainToken)return this.mainToken;let d=new CachedToken,{pos:_,p:V}=h;return d.start=_,d.end=Math.min(_+1,V.stream.end),d.value=_==V.stream.end?V.parser.eofTerm:0,d}updateCachedToken(h,d,_){let V=this.stream.clipPos(_.pos);if(d.token(this.stream.reset(V,h),_),h.value>-1){let{parser:d}=_.p;for(let V=0;V<d.specialized.length;V++)if(d.specialized[V]==h.value){let ee=d.specializers[V](this.stream.read(h.start,h.end),_);if(ee>=0&&_.p.parser.dialect.allows(ee>>1)){(1&ee)==0?h.value=ee>>1:h.extended=ee>>1;break}}}else h.value=0,h.end=this.stream.clipPos(V+1)}putAction(h,d,_,V){for(let d=0;d<V;d+=3)if(this.actions[d]==h)return V;return this.actions[V++]=h,this.actions[V++]=d,this.actions[V++]=_,V}addActions(h,d,_,V){let{state:ee}=h,{parser:er}=h.p,{data:eo}=er;for(let h=0;h<2;h++)for(let ec=er.stateSlot(ee,h?2:1);;ec+=3){if(65535==eo[ec]){if(1==eo[ec+1])ec=pair(eo,ec+2);else{0==V&&2==eo[ec+1]&&(V=this.putAction(pair(eo,ec+2),d,_,V));break}}eo[ec]==d&&(V=this.putAction(pair(eo,ec+1),d,_,V))}return V}};let dist_Parse=class dist_Parse{constructor(h,d,_,V){this.parser=h,this.input=d,this.ranges=V,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new InputStream(d,V),this.tokens=new TokenCache(h,this.stream),this.topTerm=h.top[1];let{from:ee}=V[0];this.stacks=[Stack.start(this,h.top[0],ee)],this.fragments=_.length&&this.stream.end-ee>4*h.bufferLength?new dist_FragmentCursor(_,h.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let h,d,_=this.stacks,V=this.minStackPos,ee=this.stacks=[];if(this.bigReductionCount>300&&1==_.length){let[h]=_;for(;h.forceReduce()&&h.stack.length&&h.stack[h.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let er=0;er<_.length;er++){let eo=_[er];for(;;){if(this.tokens.mainToken=null,eo.pos>V)ee.push(eo);else{if(this.advanceStack(eo,ee,_))continue;h||(h=[],d=[]),h.push(eo);let V=this.tokens.getMainToken(eo);d.push(V.value,V.end)}break}}if(!ee.length){let d=h&&function(h){let d=null;for(let _ of h){let h=_.p.stoppedAt;(_.pos==_.p.stream.end||null!=h&&_.pos>h)&&_.p.parser.stateFlag(_.state,2)&&(!d||d.score<_.score)&&(d=_)}return d}(h);if(d)return oD&&console.log("Finish with "+this.stackID(d)),this.stackToTree(d);if(this.parser.strict)throw oD&&h&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),SyntaxError("No parse at "+V);this.recovering||(this.recovering=5)}if(this.recovering&&h){let _=null!=this.stoppedAt&&h[0].pos>this.stoppedAt?h[0]:this.runRecovery(h,d,ee);if(_)return oD&&console.log("Force-finish "+this.stackID(_)),this.stackToTree(_.forceAll())}if(this.recovering){let h=1==this.recovering?1:3*this.recovering;if(ee.length>h)for(ee.sort((h,d)=>d.score-h.score);ee.length>h;)ee.pop();ee.some(h=>h.reducePos>V)&&this.recovering--}else if(ee.length>1){o:for(let h=0;h<ee.length-1;h++){let d=ee[h];for(let _=h+1;_<ee.length;_++){let V=ee[_];if(d.sameState(V)||d.buffer.length>500&&V.buffer.length>500){if((d.score-V.score||d.buffer.length-V.buffer.length)>0)ee.splice(_--,1);else{ee.splice(h--,1);continue o}}}}ee.length>12&&ee.splice(12,ee.length-12)}this.minStackPos=ee[0].pos;for(let h=1;h<ee.length;h++)ee[h].pos<this.minStackPos&&(this.minStackPos=ee[h].pos);return null}stopAt(h){if(null!=this.stoppedAt&&this.stoppedAt<h)throw RangeError("Can't move stoppedAt forward");this.stoppedAt=h}advanceStack(h,d,_){let V=h.pos,{parser:ee}=this,er=oD?this.stackID(h)+" -> ":"";if(null!=this.stoppedAt&&V>this.stoppedAt)return h.forceReduce()?h:null;if(this.fragments){let d=h.curContext&&h.curContext.tracker.strict,_=d?h.curContext.hash:0;for(let eo=this.fragments.nodeAt(V);eo;){let V=this.parser.nodeSet.types[eo.type.id]==eo.type?ee.getGoto(h.state,eo.type.id):-1;if(V>-1&&eo.length&&(!d||(eo.prop(dist_NodeProp.contextHash)||0)==_))return h.useNode(eo,V),oD&&console.log(er+this.stackID(h)+` (via reuse of ${ee.getName(eo.type.id)})`),!0;if(!(eo instanceof dist_Tree)||0==eo.children.length||eo.positions[0]>0)break;let ec=eo.children[0];if(ec instanceof dist_Tree&&0==eo.positions[0])eo=ec;else break}}let eo=ee.stateSlot(h.state,4);if(eo>0)return h.reduce(eo),oD&&console.log(er+this.stackID(h)+` (via always-reduce ${ee.getName(65535&eo)})`),!0;if(h.stack.length>=8400)for(;h.stack.length>6e3&&h.forceReduce(););let ec=this.tokens.getActions(h);for(let eo=0;eo<ec.length;){let eh=ec[eo++],ep=ec[eo++],ef=ec[eo++],em=eo==ec.length||!_,eg=em?h:h.split(),eO=this.tokens.mainToken;if(eg.apply(eh,ep,eO?eO.start:eg.pos,ef),oD&&console.log(er+this.stackID(eg)+` (via ${(65536&eh)==0?"shift":`reduce of ${ee.getName(65535&eh)}`} for ${ee.getName(ep)} @ ${V}${eg==h?"":", split"})`),em)return!0;eg.pos>V?d.push(eg):_.push(eg)}return!1}advanceFully(h,d){let _=h.pos;for(;;){if(!this.advanceStack(h,null,null))return!1;if(h.pos>_)return pushStackDedup(h,d),!0}}runRecovery(h,d,_){let V=null,ee=!1;for(let er=0;er<h.length;er++){let eo=h[er],ec=d[er<<1],eh=d[(er<<1)+1],ep=oD?this.stackID(eo)+" -> ":"";if(eo.deadEnd&&(ee||(ee=!0,eo.restart(),oD&&console.log(ep+this.stackID(eo)+" (restarted)"),this.advanceFully(eo,_))))continue;let ef=eo.split(),em=ep;for(let h=0;ef.forceReduce()&&h<10&&(oD&&console.log(em+this.stackID(ef)+" (via force-reduce)"),!this.advanceFully(ef,_));h++)oD&&(em=this.stackID(ef)+" -> ");for(let h of eo.recoverByInsert(ec))oD&&console.log(ep+this.stackID(h)+" (via recover-insert)"),this.advanceFully(h,_);this.stream.end>eo.pos?(eh==eo.pos&&(eh++,ec=0),eo.recoverByDelete(ec,eh),oD&&console.log(ep+this.stackID(eo)+` (via recover-delete ${this.parser.getName(ec)})`),pushStackDedup(eo,_)):(!V||V.score<eo.score)&&(V=eo)}return V}stackToTree(h){return h.close(),dist_Tree.build({buffer:StackBufferCursor.create(h),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:h.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(h){let d=(oj||(oj=new WeakMap)).get(h);return d||oj.set(h,d=String.fromCodePoint(this.nextStackID++)),d+h}};function pushStackDedup(h,d){for(let _=0;_<d.length;_++){let V=d[_];if(V.pos==h.pos&&V.sameState(h)){d[_].score<h.score&&(d[_]=h);return}}d.push(h)}let Dialect=class Dialect{constructor(h,d,_){this.source=h,this.flags=d,this.disabled=_}allows(h){return!this.disabled||0==this.disabled[h]}};let id=h=>h;let ContextTracker=class ContextTracker{constructor(h){this.start=h.start,this.shift=h.shift||id,this.reduce=h.reduce||id,this.reuse=h.reuse||id,this.hash=h.hash||(()=>0),this.strict=!1!==h.strict}};let LRParser=class LRParser extends dist_Parser{constructor(h){if(super(),this.wrappers=[],14!=h.version)throw RangeError(`Parser version (${h.version}) doesn't match runtime version (14)`);let d=h.nodeNames.split(" ");this.minRepeatTerm=d.length;for(let _=0;_<h.repeatNodeCount;_++)d.push("");let _=Object.keys(h.topRules).map(d=>h.topRules[d][1]),V=[];for(let h=0;h<d.length;h++)V.push([]);function setProp(h,d,_){V[h].push([d,d.deserialize(String(_))])}if(h.nodeProps)for(let d of h.nodeProps){let h=d[0];"string"==typeof h&&(h=dist_NodeProp[h]);for(let _=1;_<d.length;){let V=d[_++];if(V>=0)setProp(V,h,d[_++]);else{let ee=d[_+-V];for(let er=-V;er>0;er--)setProp(d[_++],h,ee);_++}}}this.nodeSet=new NodeSet(d.map((d,ee)=>dist_NodeType.define({name:ee>=this.minRepeatTerm?void 0:d,id:ee,props:V[ee],top:_.indexOf(ee)>-1,error:0==ee,skipped:h.skippedNodes&&h.skippedNodes.indexOf(ee)>-1}))),h.propSources&&(this.nodeSet=this.nodeSet.extend(...h.propSources)),this.strict=!1,this.bufferLength=1024;let ee=decodeArray(h.tokenData);this.context=h.context,this.specializerSpecs=h.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let h=0;h<this.specializerSpecs.length;h++)this.specialized[h]=this.specializerSpecs[h].term;this.specializers=this.specializerSpecs.map(getSpecializer),this.states=decodeArray(h.states,Uint32Array),this.data=decodeArray(h.stateData),this.goto=decodeArray(h.goto),this.maxTerm=h.maxTerm,this.tokenizers=h.tokenizers.map(h=>"number"==typeof h?new TokenGroup(ee,h):h),this.topRules=h.topRules,this.dialects=h.dialects||{},this.dynamicPrecedences=h.dynamicPrecedences||null,this.tokenPrecTable=h.tokenPrec,this.termNames=h.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(h,d,_){let V=new dist_Parse(this,h,d,_);for(let ee of this.wrappers)V=ee(V,h,d,_);return V}getGoto(h,d,_=!1){let V=this.goto;if(d>=V[0])return -1;for(let ee=V[d+1];;){let d=V[ee++],er=1&d,eo=V[ee++];if(er&&_)return eo;for(let _=ee+(d>>1);ee<_;ee++)if(V[ee]==h)return eo;if(er)return -1}}hasAction(h,d){let _=this.data;for(let V=0;V<2;V++)for(let ee=this.stateSlot(h,V?2:1),er;;ee+=3){if(65535==(er=_[ee])){if(1==_[ee+1])er=_[ee=pair(_,ee+2)];else if(2==_[ee+1])return pair(_,ee+2);else break}if(er==d||0==er)return pair(_,ee+1)}return 0}stateSlot(h,d){return this.states[6*h+d]}stateFlag(h,d){return(this.stateSlot(h,0)&d)>0}validAction(h,d){return!!this.allActions(h,h=>h==d||null)}allActions(h,d){let _=this.stateSlot(h,4),V=_?d(_):void 0;for(let _=this.stateSlot(h,1);null==V;_+=3){if(65535==this.data[_]){if(1==this.data[_+1])_=pair(this.data,_+2);else break}V=d(pair(this.data,_+1))}return V}nextStates(h){let d=[];for(let _=this.stateSlot(h,1);;_+=3){if(65535==this.data[_]){if(1==this.data[_+1])_=pair(this.data,_+2);else break}if((1&this.data[_+2])==0){let h=this.data[_+1];d.some((d,_)=>1&_&&d==h)||d.push(this.data[_],h)}}return d}configure(h){let d=Object.assign(Object.create(LRParser.prototype),this);if(h.props&&(d.nodeSet=this.nodeSet.extend(...h.props)),h.top){let _=this.topRules[h.top];if(!_)throw RangeError(`Invalid top rule name ${h.top}`);d.top=_}return h.tokenizers&&(d.tokenizers=this.tokenizers.map(d=>{let _=h.tokenizers.find(h=>h.from==d);return _?_.to:d})),h.specializers&&(d.specializers=this.specializers.slice(),d.specializerSpecs=this.specializerSpecs.map((_,V)=>{let ee=h.specializers.find(h=>h.from==_.external);if(!ee)return _;let er=Object.assign(Object.assign({},_),{external:ee.to});return d.specializers[V]=getSpecializer(er),er})),h.contextTracker&&(d.context=h.contextTracker),h.dialect&&(d.dialect=this.parseDialect(h.dialect)),null!=h.strict&&(d.strict=h.strict),h.wrap&&(d.wrappers=d.wrappers.concat(h.wrap)),null!=h.bufferLength&&(d.bufferLength=h.bufferLength),d}hasWrappers(){return this.wrappers.length>0}getName(h){return this.termNames?this.termNames[h]:String(h<=this.maxNode&&this.nodeSet.types[h].name||h)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(h){let d=this.dynamicPrecedences;return null==d?0:d[h]||0}parseDialect(h){let d=Object.keys(this.dialects),_=d.map(()=>!1);if(h)for(let V of h.split(" ")){let h=d.indexOf(V);h>=0&&(_[h]=!0)}let V=null;for(let h=0;h<d.length;h++)if(!_[h])for(let _=this.dialects[d[h]],ee;65535!=(ee=this.data[_++]);)(V||(V=new Uint8Array(this.maxTerm+1)))[ee]=1;return new Dialect(h,_,V)}static deserialize(h){return new LRParser(h)}};function pair(h,d){return h[d]|h[d+1]<<16}function getSpecializer(h){if(h.external){let d=h.extend?1:0;return(_,V)=>h.external(_,V)<<1|d}return h.get}let oL=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288];function isAlpha(h){return h>=65&&h<=90||h>=97&&h<=122||h>=161}let oF=new ExternalTokenizer((h,d)=>{for(let V=!1,ee=0,er=0;;er++){var _;let{next:eo}=h;if(isAlpha(eo)||45==eo||95==eo||V&&(_=eo)>=48&&_<=57)!V&&(45!=eo||er>0)&&(V=!0),ee===er&&45==eo&&ee++,h.advance();else if(92==eo&&10!=h.peek(1))h.advance(),h.next>-1&&h.advance(),V=!0;else{V&&h.acceptToken(40==eo?100:2==ee&&d.canShift(2)?2:101);break}}}),oZ=new ExternalTokenizer(h=>{if(oL.includes(h.peek(-1))){let{next:d}=h;(isAlpha(d)||95==d||35==d||46==d||91==d||58==d&&isAlpha(h.peek(1))||45==d||38==d)&&h.acceptToken(99)}}),oV=new ExternalTokenizer(h=>{if(!oL.includes(h.peek(-1))){let{next:d}=h;if(37==d&&(h.advance(),h.acceptToken(1)),isAlpha(d)){do h.advance();while(isAlpha(h.next));h.acceptToken(1)}}}),oB=styleTags({"AtKeyword import charset namespace keyframes media supports":i8.definitionKeyword,"from to selector":i8.keyword,NamespaceName:i8.namespace,KeyframeName:i8.labelName,KeyframeRangeName:i8.operatorKeyword,TagName:i8.tagName,ClassName:i8.className,PseudoClassName:i8.constant(i8.className),IdName:i8.labelName,"FeatureName PropertyName":i8.propertyName,AttributeName:i8.attributeName,NumberLiteral:i8.number,KeywordQuery:i8.keyword,UnaryQueryOp:i8.operatorKeyword,"CallTag ValueName":i8.atom,VariableName:i8.variableName,Callee:i8.operatorKeyword,Unit:i8.unit,"UniversalSelector NestingSelector":i8.definitionOperator,MatchOp:i8.compareOperator,"ChildOp SiblingOp, LogicOp":i8.logicOperator,BinOp:i8.arithmeticOperator,Important:i8.modifier,Comment:i8.blockComment,ColorLiteral:i8.color,"ParenthesizedContent StringLiteral":i8.string,":":i8.punctuation,"PseudoOp #":i8.derefOperator,"; ,":i8.separator,"( )":i8.paren,"[ ]":i8.squareBracket,"{ }":i8.brace}),oW={__proto__:null,lang:32,"nth-child":32,"nth-last-child":32,"nth-of-type":32,"nth-last-of-type":32,dir:32,"host-context":32,url:60,"url-prefix":60,domain:60,regexp:60,selector:138},oU={__proto__:null,"@import":118,"@media":142,"@charset":146,"@namespace":150,"@keyframes":156,"@supports":168},oz={__proto__:null,not:132,only:132},oq=LRParser.deserialize({version:14,states:":^QYQ[OOO#_Q[OOP#fOWOOOOQP'#Cd'#CdOOQP'#Cc'#CcO#kQ[O'#CfO$_QXO'#CaO$fQ[O'#ChO$qQ[O'#DTO$vQ[O'#DWOOQP'#Em'#EmO${QdO'#DgO%jQ[O'#DtO${QdO'#DvO%{Q[O'#DxO&WQ[O'#D{O&`Q[O'#ERO&nQ[O'#ETOOQS'#El'#ElOOQS'#EW'#EWQYQ[OOO&uQXO'#CdO'jQWO'#DcO'oQWO'#EsO'zQ[O'#EsQOQWOOP(UO#tO'#C_POOO)C@[)C@[OOQP'#Cg'#CgOOQP,59Q,59QO#kQ[O,59QO(aQ[O'#E[O({QWO,58{O)TQ[O,59SO$qQ[O,59oO$vQ[O,59rO(aQ[O,59uO(aQ[O,59wO(aQ[O,59xO)`Q[O'#DbOOQS,58{,58{OOQP'#Ck'#CkOOQO'#DR'#DROOQP,59S,59SO)gQWO,59SO)lQWO,59SOOQP'#DV'#DVOOQP,59o,59oOOQO'#DX'#DXO)qQ`O,59rOOQS'#Cp'#CpO${QdO'#CqO)yQvO'#CsO+ZQtO,5:ROOQO'#Cx'#CxO)lQWO'#CwO+oQWO'#CyO+tQ[O'#DOOOQS'#Ep'#EpOOQO'#Dj'#DjO+|Q[O'#DqO,[QWO'#EtO&`Q[O'#DoO,jQWO'#DrOOQO'#Eu'#EuO)OQWO,5:`O,oQpO,5:bOOQS'#Dz'#DzO,wQWO,5:dO,|Q[O,5:dOOQO'#D}'#D}O-UQWO,5:gO-ZQWO,5:mO-cQWO,5:oOOQS-E8U-E8UO${QdO,59}O-kQ[O'#E^O-xQWO,5;_O-xQWO,5;_POOO'#EV'#EVP.TO#tO,58yPOOO,58y,58yOOQP1G.l1G.lO.zQXO,5:vOOQO-E8Y-E8YOOQS1G.g1G.gOOQP1G.n1G.nO)gQWO1G.nO)lQWO1G.nOOQP1G/Z1G/ZO/XQ`O1G/^O/rQXO1G/aO0YQXO1G/cO0pQXO1G/dO1WQWO,59|O1]Q[O'#DSO1dQdO'#CoOOQP1G/^1G/^O${QdO1G/^O1kQpO,59]OOQS,59_,59_O${QdO,59aO1sQWO1G/mOOQS,59c,59cO1xQ!bO,59eOOQS'#DP'#DPOOQS'#EY'#EYO2QQ[O,59jOOQS,59j,59jO2YQWO'#DjO2eQWO,5:VO2jQWO,5:]O&`Q[O,5:XO&`Q[O'#E_O2rQWO,5;`O2}QWO,5:ZO(aQ[O,5:^OOQS1G/z1G/zOOQS1G/|1G/|OOQS1G0O1G0OO3`QWO1G0OO3eQdO'#EOOOQS1G0R1G0ROOQS1G0X1G0XOOQS1G0Z1G0ZO3pQtO1G/iOOQO,5:x,5:xO4WQ[O,5:xOOQO-E8[-E8[O4eQWO1G0yPOOO-E8T-E8TPOOO1G.e1G.eOOQP7+$Y7+$YOOQP7+$x7+$xO${QdO7+$xOOQS1G/h1G/hO4pQXO'#ErO4wQWO,59nO4|QtO'#EXO5tQdO'#EoO6OQWO,59ZO6TQpO7+$xOOQS1G.w1G.wOOQS1G.{1G.{OOQS7+%X7+%XO6]QWO1G/POOQS-E8W-E8WOOQS1G/U1G/UO${QdO1G/qOOQO1G/w1G/wOOQO1G/s1G/sO6bQWO,5:yOOQO-E8]-E8]O6pQXO1G/xOOQS7+%j7+%jO6wQYO'#CsOOQO'#EQ'#EQO7SQ`O'#EPOOQO'#EP'#EPO7_QWO'#E`O7gQdO,5:jOOQS,5:j,5:jO7rQtO'#E]O${QdO'#E]O8sQdO7+%TOOQO7+%T7+%TOOQO1G0d1G0dO9WQpO<<HdO9`QWO,5;^OOQP1G/Y1G/YOOQS-E8V-E8VO${QdO'#EZO9hQWO,5;ZOOQT1G.u1G.uOOQP<<Hd<<HdOOQS7+$k7+$kO9pQdO7+%]OOQO7+%d7+%dOOQO,5:k,5:kO3hQdO'#EaO7_QWO,5:zOOQS,5:z,5:zOOQS-E8^-E8^OOQS1G0U1G0UO9wQtO,5:wOOQS-E8Z-E8ZOOQO<<Ho<<HoOOQPAN>OAN>OO:xQdO,5:uOOQO-E8X-E8XOOQO<<Hw<<HwOOQO,5:{,5:{OOQO-E8_-E8_OOQS1G0f1G0f",stateData:";[~O#ZOS#[QQ~OUYOXYO]VO^VOqXOxWO![aO!]ZO!i[O!k]O!m^O!p_O!v`O#XRO#bTO~OQfOUYOXYO]VO^VOqXOxWO![aO!]ZO!i[O!k]O!m^O!p_O!v`O#XeO#bTO~O#U#gP~P!ZO#[jO~O#XlO~O]qO^qOqsOtoOxrO!OtO!RvO#VuO#bnO~O!TwO~P#pO`}O#WzO#XyO~O#X!OO~O#X!QO~OQ![Ob!TOf![Oh![On!YOq!ZO#W!WO#X!SO#e!UO~Ob!^O!d!`O!g!aO#X!]O!T#hP~Oh!fOn!YO#X!eO~Oh!hO#X!hO~Ob!^O!d!`O!g!aO#X!]O~O!Y#hP~P%jO]WX]!WX^WXqWXtWXxWX!OWX!RWX!TWX#VWX#bWX~O]!mO~O!Y!nO#U#gX!S#gX~O#U#gX!S#gX~P!ZO#]!qO#^!qO#_!sO~OUYOXYO]VO^VOqXOxWO#XRO#bTO~OtoO!TwO~O`!zO#WzO#XyO~O!S#gP~P!ZOb#RO~Ob#SO~Op#TO|#UO~OP#WObgXjgX!YgX!dgX!ggX#XgXagXQgXfgXhgXngXqgXtgX!XgX#UgX#WgX#egXpgX!SgX~Ob!^Oj#XO!d!`O!g!aO#X!]O!Y#hP~Ob#[O~Op#`O#X#]O~Ob!^O!d!`O!g!aO#X#aO~Ot#eO!b#dO!T#hX!Y#hX~Ob#hO~Oj#XO!Y#jO~O!Y#kO~Oh#lOn!YO~O!T#mO~O!TwO!b#dO~O!TwO!Y#pO~O!Y#QX#U#QX!S#QX~P!ZO!Y!nO#U#ga!S#ga~O#]!qO#^!qO#_#wO~O]qO^qOqsOxrO!OtO!RvO#VuO#bnO~Ot#Oa!T#Oaa#Oa~P.`Op#yO|#zO~O]qO^qOqsOxrO#bnO~Ot}i!O}i!R}i!T}i#V}ia}i~P/aOt!Pi!O!Pi!R!Pi!T!Pi#V!Pia!Pi~P/aOt!Qi!O!Qi!R!Qi!T!Qi#V!Qia!Qi~P/aO!S#{O~Oa#fP~P(aOa#cP~P${Oa$SOj#XO~O!Y$UO~Oh$VOo$VO~Op$XO#X#]O~O]!`Xa!^X!b!^X~O]$YO~Oa$ZO!b#dO~Ot#eO!T#ha!Y#ha~O!b#dOt!ca!T!ca!Y!caa!ca~O!Y$`O~O!S$gO#X$bO#e$aO~Oj#XOt$iO!X$kO!Y!Vi#U!Vi!S!Vi~P${O!Y#Qa#U#Qa!S#Qa~P!ZO!Y!nO#U#gi!S#gi~Oa#fX~P#pOa$oO~Oj#XOQ!{Xa!{Xb!{Xf!{Xh!{Xn!{Xq!{Xt!{X#W!{X#X!{X#e!{X~Ot$qOa#cX~P${Oa$sO~Oj#XOp$tO~Oa$uO~O!b#dOt#Ra!T#Ra!Y#Ra~Oa$wO~P.`OP#WOtgX!TgX~O#e$aOt!sX!T!sX~Ot$yO!TwO~O!S$}O#X$bO#e$aO~Oj#XOQ#PXb#PXf#PXh#PXn#PXq#PXt#PX!X#PX!Y#PX#U#PX#W#PX#X#PX#e#PX!S#PX~Ot$iO!X%QO!Y!Vq#U!Vq!S!Vq~P${Oj#XOp%RO~OtoOa#fa~Ot$qOa#ca~Oa%UO~P${Oj#XOQ#Pab#Paf#Pah#Pan#Paq#Pat#Pa!X#Pa!Y#Pa#U#Pa#W#Pa#X#Pa#e#Pa!S#Pa~Oa!}at!}a~P${O#Zo#[#ej!R#e~",goto:"-g#jPPP#kP#nP#w$WP#w$g#wPP$mPPP$s$|$|P%`P$|P$|%z&^PPPP$|&vP&z'Q#wP'W#w'^P#wP#w#wPPP'd'y(WPP#nPP(_(_(i(_P(_P(_(_P#nP#nP#nP(l#nP(o(r(u(|#nP#nP)R)X)h)v)|*S*^*d*n*t*zPPPPPPPPPP+Q+ZP+v+yP,o,r,x-RRkQ_bOPdhw!n#skYOPdhotuvw!n#R#h#skSOPdhotuvw!n#R#h#sQmTR!tnQ{VR!xqQ!x}Q#Z!XR#x!zq![Z]!T!m#S#U#X#q#z$P$Y$i$j$q$v%Sp![Z]!T!m#S#U#X#q#z$P$Y$i$j$q$v%SU$d#m$f$yR$x$cq!XZ]!T!m#S#U#X#q#z$P$Y$i$j$q$v%Sp![Z]!T!m#S#U#X#q#z$P$Y$i$j$q$v%SQ!f^R#l!gT#^!Z#_Q|VR!yqQ!x|R#x!yQ!PWR!{rQ!RXR!|sQxUQ!wpQ#i!cQ#o!jQ#p!kQ${$eR%X$zSgPwQ!phQ#r!nR$l#sZfPhw!n#sa!b[`a!V!^!`#d#eR#b!^R!g^R!i_R#n!iS$e#m$fR%V$yV$c#m$f$yQ!rjR#v!rQdOShPwU!ldh#sR#s!nQ$P#SU$p$P$v%SQ$v$YR%S$qQ#_!ZR$W#_Q$r$PR%T$rQpUS!vp$nR$n#|Q$j#qR%P$jQ!ogS#t!o#uR#u!pQ#f!_R$^#fQ$f#mR$|$fQ$z$eR%W$z_cOPdhw!n#s^UOPdhw!n#sQ!uoQ!}tQ#OuQ#PvQ#|#RR$_#hR$Q#SQ!VZQ!d]Q#V!TQ#q!m[$O#S$P$Y$q$v%SQ$R#UQ$T#XS$h#q$jQ$m#zR%O$iR#}#RQiPR#QwQ!c[Q!kaR#Y!VU!_[a!VQ!j`Q#c!^Q#g!`Q$[#dR$]#e",nodeNames:"⚠ Unit VariableName Comment StyleSheet RuleSet UniversalSelector TagSelector TagName NestingSelector ClassSelector ClassName PseudoClassSelector : :: PseudoClassName PseudoClassName ) ( ArgList ValueName ParenthesizedValue ColorLiteral NumberLiteral StringLiteral BinaryExpression BinOp CallExpression Callee CallLiteral CallTag ParenthesizedContent ] [ LineNames LineName , PseudoClassName ArgList IdSelector # IdName AttributeSelector AttributeName MatchOp ChildSelector ChildOp DescendantSelector SiblingSelector SiblingOp } { Block Declaration PropertyName Important ; ImportStatement AtKeyword import KeywordQuery FeatureQuery FeatureName BinaryQuery LogicOp UnaryQuery UnaryQueryOp ParenthesizedQuery SelectorQuery selector MediaStatement media CharsetStatement charset NamespaceStatement namespace NamespaceName KeyframesStatement keyframes KeyframeName KeyframeList KeyframeSelector KeyframeRangeName SupportsStatement supports AtRule Styles",maxTerm:117,nodeProps:[["isolate",-2,3,24,""],["openedBy",17,"(",32,"[",50,"{"],["closedBy",18,")",33,"]",51,"}"]],propSources:[oB],skippedNodes:[0,3,87],repeatNodeCount:11,tokenData:"J^~R!^OX$}X^%u^p$}pq%uqr)Xrs.Rst/utu6duv$}vw7^wx7oxy9^yz9oz{9t{|:_|}?Q}!O?c!O!P@Q!P!Q@i!Q![Ab![!]B]!]!^CX!^!_$}!_!`Cj!`!aC{!a!b$}!b!cDw!c!}$}!}#OFa#O#P$}#P#QFr#Q#R6d#R#T$}#T#UGT#U#c$}#c#dHf#d#o$}#o#pH{#p#q6d#q#rI^#r#sIo#s#y$}#y#z%u#z$f$}$f$g%u$g#BY$}#BY#BZ%u#BZ$IS$}$IS$I_%u$I_$I|$}$I|$JO%u$JO$JT$}$JT$JU%u$JU$KV$}$KV$KW%u$KW&FU$}&FU&FV%u&FV;'S$};'S;=`JW<%lO$}`%QSOy%^z;'S%^;'S;=`%o<%lO%^`%cSo`Oy%^z;'S%^;'S;=`%o<%lO%^`%rP;=`<%l%^~%zh#Z~OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^~'mh#Z~o`OX%^X^'f^p%^pq'fqy%^z#y%^#y#z'f#z$f%^$f$g'f$g#BY%^#BY#BZ'f#BZ$IS%^$IS$I_'f$I_$I|%^$I|$JO'f$JO$JT%^$JT$JU'f$JU$KV%^$KV$KW'f$KW&FU%^&FU&FV'f&FV;'S%^;'S;=`%o<%lO%^l)[UOy%^z#]%^#]#^)n#^;'S%^;'S;=`%o<%lO%^l)sUo`Oy%^z#a%^#a#b*V#b;'S%^;'S;=`%o<%lO%^l*[Uo`Oy%^z#d%^#d#e*n#e;'S%^;'S;=`%o<%lO%^l*sUo`Oy%^z#c%^#c#d+V#d;'S%^;'S;=`%o<%lO%^l+[Uo`Oy%^z#f%^#f#g+n#g;'S%^;'S;=`%o<%lO%^l+sUo`Oy%^z#h%^#h#i,V#i;'S%^;'S;=`%o<%lO%^l,[Uo`Oy%^z#T%^#T#U,n#U;'S%^;'S;=`%o<%lO%^l,sUo`Oy%^z#b%^#b#c-V#c;'S%^;'S;=`%o<%lO%^l-[Uo`Oy%^z#h%^#h#i-n#i;'S%^;'S;=`%o<%lO%^l-uS!X[o`Oy%^z;'S%^;'S;=`%o<%lO%^~.UWOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o<%lO.R~.sOh~~.vRO;'S.R;'S;=`/P;=`O.R~/SXOY.RZr.Rrs.ns#O.R#O#P.s#P;'S.R;'S;=`/o;=`<%l.R<%lO.R~/rP;=`<%l.Rn/zYxQOy%^z!Q%^!Q![0j![!c%^!c!i0j!i#T%^#T#Z0j#Z;'S%^;'S;=`%o<%lO%^l0oYo`Oy%^z!Q%^!Q![1_![!c%^!c!i1_!i#T%^#T#Z1_#Z;'S%^;'S;=`%o<%lO%^l1dYo`Oy%^z!Q%^!Q![2S![!c%^!c!i2S!i#T%^#T#Z2S#Z;'S%^;'S;=`%o<%lO%^l2ZYf[o`Oy%^z!Q%^!Q![2y![!c%^!c!i2y!i#T%^#T#Z2y#Z;'S%^;'S;=`%o<%lO%^l3QYf[o`Oy%^z!Q%^!Q![3p![!c%^!c!i3p!i#T%^#T#Z3p#Z;'S%^;'S;=`%o<%lO%^l3uYo`Oy%^z!Q%^!Q![4e![!c%^!c!i4e!i#T%^#T#Z4e#Z;'S%^;'S;=`%o<%lO%^l4lYf[o`Oy%^z!Q%^!Q![5[![!c%^!c!i5[!i#T%^#T#Z5[#Z;'S%^;'S;=`%o<%lO%^l5aYo`Oy%^z!Q%^!Q![6P![!c%^!c!i6P!i#T%^#T#Z6P#Z;'S%^;'S;=`%o<%lO%^l6WSf[o`Oy%^z;'S%^;'S;=`%o<%lO%^d6gUOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^d7QS|So`Oy%^z;'S%^;'S;=`%o<%lO%^b7cSXQOy%^z;'S%^;'S;=`%o<%lO%^~7rWOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W<%lO7o~8_RO;'S7o;'S;=`8h;=`O7o~8kXOY7oZw7owx.nx#O7o#O#P8[#P;'S7o;'S;=`9W;=`<%l7o<%lO7o~9ZP;=`<%l7on9cSb^Oy%^z;'S%^;'S;=`%o<%lO%^~9tOa~n9{UUQjWOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^n:fWjW!RQOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^l;TUo`Oy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^l;nYo`#e[Oy%^z!Q%^!Q![;g![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^l<cYo`Oy%^z{%^{|=R|}%^}!O=R!O!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=WUo`Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l=qUo`#e[Oy%^z!Q%^!Q![=j![;'S%^;'S;=`%o<%lO%^l>[[o`#e[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^n?VSt^Oy%^z;'S%^;'S;=`%o<%lO%^l?hWjWOy%^z!O%^!O!P;O!P!Q%^!Q![>T![;'S%^;'S;=`%o<%lO%^n@VU#bQOy%^z!Q%^!Q![;g![;'S%^;'S;=`%o<%lO%^~@nTjWOy%^z{@}{;'S%^;'S;=`%o<%lO%^~AUSo`#[~Oy%^z;'S%^;'S;=`%o<%lO%^lAg[#e[Oy%^z!O%^!O!P;g!P!Q%^!Q![>T![!g%^!g!h<^!h#X%^#X#Y<^#Y;'S%^;'S;=`%o<%lO%^bBbU]QOy%^z![%^![!]Bt!];'S%^;'S;=`%o<%lO%^bB{S^Qo`Oy%^z;'S%^;'S;=`%o<%lO%^nC^S!Y^Oy%^z;'S%^;'S;=`%o<%lO%^dCoS|SOy%^z;'S%^;'S;=`%o<%lO%^bDQU!OQOy%^z!`%^!`!aDd!a;'S%^;'S;=`%o<%lO%^bDkS!OQo`Oy%^z;'S%^;'S;=`%o<%lO%^bDzWOy%^z!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^bEk[![Qo`Oy%^z}%^}!OEd!O!Q%^!Q![Ed![!c%^!c!}Ed!}#T%^#T#oEd#o;'S%^;'S;=`%o<%lO%^nFfSq^Oy%^z;'S%^;'S;=`%o<%lO%^nFwSp^Oy%^z;'S%^;'S;=`%o<%lO%^bGWUOy%^z#b%^#b#cGj#c;'S%^;'S;=`%o<%lO%^bGoUo`Oy%^z#W%^#W#XHR#X;'S%^;'S;=`%o<%lO%^bHYS!bQo`Oy%^z;'S%^;'S;=`%o<%lO%^bHiUOy%^z#f%^#f#gHR#g;'S%^;'S;=`%o<%lO%^fIQS!TUOy%^z;'S%^;'S;=`%o<%lO%^nIcS!S^Oy%^z;'S%^;'S;=`%o<%lO%^fItU!RQOy%^z!_%^!_!`6y!`;'S%^;'S;=`%o<%lO%^`JZP;=`<%l$}",tokenizers:[oZ,oV,oF,1,2,3,4,new LocalTokenGroup("m~RRYZ[z{a~~g~aO#^~~dP!P!Qg~lO#_~~",28,105)],topRules:{StyleSheet:[0,4],Styles:[1,86]},specialized:[{term:100,get:h=>oW[h]||-1},{term:58,get:h=>oU[h]||-1},{term:101,get:h=>oz[h]||-1}],tokenPrec:1200}),oX=null;function properties(){if(!oX&&"object"==typeof document&&document.body){let{style:h}=document.body,d=[],_=new Set;for(let V in h)"cssText"==V||"cssFloat"==V||"string"!=typeof h[V]||(/[A-Z]/.test(V)&&(V=V.replace(/[A-Z]/g,h=>"-"+h.toLowerCase())),_.has(V)||(d.push(V),_.add(V)));oX=d.sort().map(h=>({type:"property",label:h}))}return oX||[]}let oY=["active","after","any-link","autofill","backdrop","before","checked","cue","default","defined","disabled","empty","enabled","file-selector-button","first","first-child","first-letter","first-line","first-of-type","focus","focus-visible","focus-within","fullscreen","has","host","host-context","hover","in-range","indeterminate","invalid","is","lang","last-child","last-of-type","left","link","marker","modal","not","nth-child","nth-last-child","nth-last-of-type","nth-of-type","only-child","only-of-type","optional","out-of-range","part","placeholder","placeholder-shown","read-only","read-write","required","right","root","scope","selection","slotted","target","target-text","valid","visited","where"].map(h=>({type:"class",label:h})),oG=["above","absolute","activeborder","additive","activecaption","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","antialiased","appworkspace","asterisks","attr","auto","auto-flow","avoid","avoid-column","avoid-page","avoid-region","axis-pan","background","backwards","baseline","below","bidi-override","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","clear","clip","close-quote","col-resize","collapse","color","color-burn","color-dodge","column","column-reverse","compact","condensed","contain","content","contents","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","darken","dashed","decimal","decimal-leading-zero","default","default-button","dense","destination-atop","destination-in","destination-out","destination-over","difference","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic-abegede-gez","ethiopic-halehame-aa-er","ethiopic-halehame-gez","ew-resize","exclusion","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fill-box","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","graytext","grid","groove","hand","hard-light","help","hidden","hide","higher","highlight","highlighttext","horizontal","hsl","hsla","hue","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-grid","inline-table","inset","inside","intrinsic","invert","italic","justify","keep-all","landscape","large","larger","left","level","lighter","lighten","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-hexadecimal","lower-latin","lower-norwegian","lowercase","ltr","luminosity","manipulation","match","matrix","matrix3d","medium","menu","menutext","message-box","middle","min-intrinsic","mix","monospace","move","multiple","multiple_mask_images","multiply","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","opacity","open-quote","optimizeLegibility","optimizeSpeed","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","perspective","pinch-zoom","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","saturation","scale","scale3d","scaleX","scaleY","scaleZ","screen","scroll","scrollbar","scroll-position","se-resize","self-start","self-end","semi-condensed","semi-expanded","separate","serif","show","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","soft-light","solid","source-atop","source-in","source-out","source-over","space","space-around","space-between","space-evenly","spell-out","square","start","static","status-bar","stretch","stroke","stroke-box","sub","subpixel-antialiased","svg_masks","super","sw-resize","symbolic","symbols","system-ui","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","text","text-bottom","text-top","textarea","textfield","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","to","top","transform","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","unidirectional-pan","unset","up","upper-latin","uppercase","url","var","vertical","vertical-text","view-box","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"].map(h=>({type:"keyword",label:h})).concat(["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"].map(h=>({type:"constant",label:h}))),oH=["a","abbr","address","article","aside","b","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","dd","del","details","dfn","dialog","div","dl","dt","em","figcaption","figure","footer","form","header","hgroup","h1","h2","h3","h4","h5","h6","hr","html","i","iframe","img","input","ins","kbd","label","legend","li","main","meter","nav","ol","output","p","pre","ruby","section","select","small","source","span","strong","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","tr","u","ul"].map(h=>({type:"type",label:h})),oK=/^(\w[\w-]*|-\w[\w-]*|)$/,oJ=/^-(-[\w-]*)?$/,o0=new NodeWeakMap,o1=["Declaration"],o2=(em=h=>"VariableName"==h.name,h=>{let{state:d,pos:_}=h,V=dist_syntaxTree(d).resolveInner(_,-1),ee=V.type.isError&&V.from==V.to-1&&"-"==d.doc.sliceString(V.from,V.to);if("PropertyName"==V.name||(ee||"TagName"==V.name)&&/^(Block|Styles)$/.test(V.resolve(V.to).name))return{from:V.from,options:properties(),validFor:oK};if("ValueName"==V.name)return{from:V.from,options:oG,validFor:oK};if("PseudoClassName"==V.name)return{from:V.from,options:oY,validFor:oK};if(em(V)||(h.explicit||ee)&&function(h,d){var _;if(("("==h.name||h.type.isError)&&(h=h.parent||h),"ArgList"!=h.name)return!1;let V=null===(_=h.parent)||void 0===_?void 0:_.firstChild;return(null==V?void 0:V.name)=="Callee"&&"var"==d.sliceString(V.from,V.to)}(V,d.doc))return{from:em(V)||ee?V.from:_,options:function variableNames(h,d,_){if(d.to-d.from>4096){let V=o0.get(d);if(V)return V;let ee=[],er=new Set,eo=d.cursor(ev.IncludeAnonymous);if(eo.firstChild())do for(let d of variableNames(h,eo.node,_))er.has(d.label)||(er.add(d.label),ee.push(d));while(eo.nextSibling());return o0.set(d,ee),ee}{let V=[],ee=new Set;return d.cursor().iterate(d=>{var er;if(_(d)&&d.matchContext(o1)&&(null===(er=d.node.nextSibling)||void 0===er?void 0:er.name)==":"){let _=h.sliceString(d.from,d.to);ee.has(_)||(ee.add(_),V.push({label:_,type:"variable"}))}}),V}}(d.doc,function(h){for(let d=h;;){if(d.type.isTop)return d;if(!(d=d.parent))return h}}(V),em),validFor:oJ};if("TagName"==V.name){for(let{parent:h}=V;h;h=h.parent)if("Block"==h.name)return{from:V.from,options:properties(),validFor:oK};return{from:V.from,options:oH,validFor:oK}}if(!h.explicit)return null;let er=V.resolve(_),eo=er.childBefore(_);return eo&&":"==eo.name&&"PseudoClassSelector"==er.name?{from:_,options:oY,validFor:oK}:eo&&":"==eo.name&&"Declaration"==er.name||"ArgList"==er.name?{from:_,options:oG,validFor:oK}:"Block"==er.name||"Styles"==er.name?{from:_,options:properties(),validFor:oK}:null}),o5=LRLanguage.define({name:"css",parser:oq.configure({props:[sp.add({Declaration:continuedIndent()}),sm.add({"Block KeyframeList":foldInside})]}),languageData:{commentTokens:{block:{open:"/*",close:"*/"}},indentOnInput:/^\s*\}$/,wordChars:"-"}});function css(){return new LanguageSupport(o5,o5.data.of({autocomplete:o2}))}let o7={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},o3={dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},o4={dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}};function isSpace(h){return 9==h||10==h||13==h||32==h}let o6=null,o9=null,o8=0;function tagNameAfter(h,d){var _;let V=h.pos+d;if(o8==V&&o9==h)return o6;let ee=h.peek(d);for(;isSpace(ee);)ee=h.peek(++d);let er="";for(;45==(_=ee)||46==_||58==_||_>=65&&_<=90||95==_||_>=97&&_<=122||_>=161;)er+=String.fromCharCode(ee),ee=h.peek(++d);return o9=h,o8=V,o6=er?er.toLowerCase():ee==ai||ee==as?void 0:null}let ai=63,as=33;function ElementContext(h,d){this.name=h,this.parent=d,this.hash=d?d.hash:0;for(let d=0;d<h.length;d++)this.hash+=(this.hash<<4)+h.charCodeAt(d)+(h.charCodeAt(d)<<8)}let ao=[6,10,7,8,9],al=new ContextTracker({start:null,shift:(h,d,_,V)=>ao.indexOf(d)>-1?new ElementContext(tagNameAfter(V,1)||"",h):h,reduce:(h,d)=>20==d&&h?h.parent:h,reuse(h,d,_,V){let ee=d.type.id;return 6==ee||36==ee?new ElementContext(tagNameAfter(V,1)||"",h):h},hash:h=>h?h.hash:0,strict:!1}),au=new ExternalTokenizer((h,d)=>{if(60!=h.next){h.next<0&&d.context&&h.acceptToken(57);return}h.advance();let _=47==h.next;_&&h.advance();let V=tagNameAfter(h,0);if(void 0===V)return;if(!V)return h.acceptToken(_?14:6);let ee=d.context?d.context.name:null;if(_){if(V==ee)return h.acceptToken(11);if(ee&&o3[ee])return h.acceptToken(57,-2);if(d.dialectEnabled(0))return h.acceptToken(12);for(let h=d.context;h;h=h.parent)if(h.name==V)return;h.acceptToken(13)}else{if("script"==V)return h.acceptToken(7);if("style"==V)return h.acceptToken(8);if("textarea"==V)return h.acceptToken(9);if(o7.hasOwnProperty(V))return h.acceptToken(10);ee&&o4[ee]&&o4[ee][V]?h.acceptToken(57,-1):h.acceptToken(6)}},{contextual:!0}),ap=new ExternalTokenizer(h=>{for(let d=0,_=0;;_++){if(h.next<0){_&&h.acceptToken(58);break}if(45==h.next)d++;else if(62==h.next&&d>=2){_>=3&&h.acceptToken(58,-2);break}else d=0;h.advance()}}),am=new ExternalTokenizer((h,d)=>{if(47==h.next&&62==h.peek(1)){let _=d.dialectEnabled(1)||function(h){for(;h;h=h.parent)if("svg"==h.name||"math"==h.name)return!0;return!1}(d.context);h.acceptToken(_?5:4,2)}else 62==h.next&&h.acceptToken(4,1)});function contentTokenizer(h,d,_){let V=2+h.length;return new ExternalTokenizer(ee=>{for(let er=0,eo=0,ec=0;;ec++){if(ee.next<0){ec&&ee.acceptToken(d);break}if(0==er&&60==ee.next||1==er&&47==ee.next||er>=2&&er<V&&ee.next==h.charCodeAt(er-2))er++,eo++;else if((2==er||er==V)&&isSpace(ee.next))eo++;else if(er==V&&62==ee.next){ec>eo?ee.acceptToken(d,-eo):ee.acceptToken(_,-(eo-2));break}else if((10==ee.next||13==ee.next)&&ec){ee.acceptToken(d,1);break}else er=eo=0;ee.advance()}})}let ag=contentTokenizer("script",54,1),aO=contentTokenizer("style",55,2),ay=contentTokenizer("textarea",56,3),av=styleTags({"Text RawText":i8.content,"StartTag StartCloseTag SelfClosingEndTag EndTag":i8.angleBracket,TagName:i8.tagName,"MismatchedCloseTag/TagName":[i8.tagName,i8.invalid],AttributeName:i8.attributeName,"AttributeValue UnquotedAttributeValue":i8.attributeValue,Is:i8.definitionOperator,"EntityReference CharacterReference":i8.character,Comment:i8.blockComment,ProcessingInst:i8.processingInstruction,DoctypeDecl:i8.documentMeta}),aS=LRParser.deserialize({version:14,states:",xOVO!rOOO!WQ#tO'#CqO!]Q#tO'#CzO!bQ#tO'#C}O!gQ#tO'#DQO!lQ#tO'#DSO!qOaO'#CpO!|ObO'#CpO#XOdO'#CpO$eO!rO'#CpOOO`'#Cp'#CpO$lO$fO'#DTO$tQ#tO'#DVO$yQ#tO'#DWOOO`'#Dk'#DkOOO`'#DY'#DYQVO!rOOO%OQ&rO,59]O%WQ&rO,59fO%`Q&rO,59iO%hQ&rO,59lO%sQ&rO,59nOOOa'#D^'#D^O%{OaO'#CxO&WOaO,59[OOOb'#D_'#D_O&`ObO'#C{O&kObO,59[OOOd'#D`'#D`O&sOdO'#DOO'OOdO,59[OOO`'#Da'#DaO'WO!rO,59[O'_Q#tO'#DROOO`,59[,59[OOOp'#Db'#DbO'dO$fO,59oOOO`,59o,59oO'lQ#|O,59qO'qQ#|O,59rOOO`-E7W-E7WO'vQ&rO'#CsOOQW'#DZ'#DZO(UQ&rO1G.wOOOa1G.w1G.wO(^Q&rO1G/QOOOb1G/Q1G/QO(fQ&rO1G/TOOOd1G/T1G/TO(nQ&rO1G/WOOO`1G/W1G/WOOO`1G/Y1G/YO(yQ&rO1G/YOOOa-E7[-E7[O)RQ#tO'#CyOOO`1G.v1G.vOOOb-E7]-E7]O)WQ#tO'#C|OOOd-E7^-E7^O)]Q#tO'#DPOOO`-E7_-E7_O)bQ#|O,59mOOOp-E7`-E7`OOO`1G/Z1G/ZOOO`1G/]1G/]OOO`1G/^1G/^O)gQ,UO,59_OOQW-E7X-E7XOOOa7+$c7+$cOOOb7+$l7+$lOOOd7+$o7+$oOOO`7+$r7+$rOOO`7+$t7+$tO)rQ#|O,59eO)wQ#|O,59hO)|Q#|O,59kOOO`1G/X1G/XO*RO7[O'#CvO*dOMhO'#CvOOQW1G.y1G.yOOO`1G/P1G/POOO`1G/S1G/SOOO`1G/V1G/VOOOO'#D['#D[O*uO7[O,59bOOQW,59b,59bOOOO'#D]'#D]O+WOMhO,59bOOOO-E7Y-E7YOOQW1G.|1G.|OOOO-E7Z-E7Z",stateData:"+s~O!^OS~OUSOVPOWQOXROYTO[]O][O^^O`^Oa^Ob^Oc^Ox^O{_O!dZO~OfaO~OfbO~OfcO~OfdO~OfeO~O!WfOPlP!ZlP~O!XiOQoP!ZoP~O!YlORrP!ZrP~OUSOVPOWQOXROYTOZqO[]O][O^^O`^Oa^Ob^Oc^Ox^O!dZO~O!ZrO~P#dO![sO!euO~OfvO~OfwO~OS|OhyO~OS!OOhyO~OS!QOhyO~OS!SOT!TOhyO~OS!TOhyO~O!WfOPlX!ZlX~OP!WO!Z!XO~O!XiOQoX!ZoX~OQ!ZO!Z!XO~O!YlORrX!ZrX~OR!]O!Z!XO~O!Z!XO~P#dOf!_O~O![sO!e!aO~OS!bO~OS!cO~Oi!dOSgXhgXTgX~OS!fOhyO~OS!gOhyO~OS!hOhyO~OS!iOT!jOhyO~OS!jOhyO~Of!kO~Of!lO~Of!mO~OS!nO~Ok!qO!`!oO!b!pO~OS!rO~OS!sO~OS!tO~Oa!uOb!uOc!uO!`!wO!a!uO~Oa!xOb!xOc!xO!b!wO!c!xO~Oa!uOb!uOc!uO!`!{O!a!uO~Oa!xOb!xOc!xO!b!{O!c!xO~OT~bac!dx{!d~",goto:"%p!`PPPPPPPPPPPPPPPPPPPP!a!gP!mPP!yP!|#P#S#Y#]#`#f#i#l#r#x!aP!a!aP$O$U$l$r$x%O%U%[%bPPPPPPPP%hX^OX`pXUOX`pezabcde{}!P!R!UR!q!dRhUR!XhXVOX`pRkVR!XkXWOX`pRnWR!XnXXOX`pQrXR!XpXYOX`pQ`ORx`Q{aQ}bQ!PcQ!RdQ!UeZ!e{}!P!R!UQ!v!oR!z!vQ!y!pR!|!yQgUR!VgQjVR!YjQmWR![mQpXR!^pQtZR!`tS_O`ToXp",nodeNames:"⚠ StartCloseTag StartCloseTag StartCloseTag EndTag SelfClosingEndTag StartTag StartTag StartTag StartTag StartTag StartCloseTag StartCloseTag StartCloseTag IncompleteCloseTag Document Text EntityReference CharacterReference InvalidEntity Element OpenTag TagName Attribute AttributeName Is AttributeValue UnquotedAttributeValue ScriptText CloseTag OpenTag StyleText CloseTag OpenTag TextareaText CloseTag OpenTag CloseTag SelfClosingTag Comment ProcessingInst MismatchedCloseTag CloseTag DoctypeDecl",maxTerm:67,context:al,nodeProps:[["closedBy",-10,1,2,3,7,8,9,10,11,12,13,"EndTag",6,"EndTag SelfClosingEndTag",-4,21,30,33,36,"CloseTag"],["openedBy",4,"StartTag StartCloseTag",5,"StartTag",-4,29,32,35,37,"OpenTag"],["group",-9,14,17,18,19,20,39,40,41,42,"Entity",16,"Entity TextContent",-3,28,31,34,"TextContent Entity"],["isolate",-11,21,29,30,32,33,35,36,37,38,41,42,"ltr",-3,26,27,39,""]],propSources:[av],skippedNodes:[0],repeatNodeCount:9,tokenData:"!<p!aR!YOX$qXY,QYZ,QZ[$q[]&X]^,Q^p$qpq,Qqr-_rs3_sv-_vw3}wxHYx}-_}!OH{!O!P-_!P!Q$q!Q![-_![!]Mz!]!^-_!^!_!$S!_!`!;x!`!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4U-_4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!Z$|c`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr$qrs&}sv$qvw+Pwx(tx!^$q!^!_*V!_!a&X!a#S$q#S#T&X#T;'S$q;'S;=`+z<%lO$q!R&bX`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&Xq'UV`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}P'pT`POv'kw!^'k!_;'S'k;'S;=`(P<%lO'kP(SP;=`<%l'kp([S!cpOv(Vx;'S(V;'S;=`(h<%lO(Vp(kP;=`<%l(Vq(qP;=`<%l&}a({W`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t`)jT!a`Or)esv)ew;'S)e;'S;=`)y<%lO)e`)|P;=`<%l)ea*SP;=`<%l(t!Q*^V!a`!cpOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!Q*vP;=`<%l*V!R*|P;=`<%l&XW+UYkWOX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+PW+wP;=`<%l+P!Z+}P;=`<%l$q!a,]``P!a`!cp!^^OX&XXY,QYZ,QZ]&X]^,Q^p&Xpq,Qqr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!_-ljhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q[/ebhSkWOX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+PS0rXhSqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0mS1bP;=`<%l0m[1hP;=`<%l/^!V1vchS`P!a`!cpOq&Xqr1krs&}sv1kvw0mwx(tx!P1k!P!Q&X!Q!^1k!^!_*V!_!a&X!a#s1k#s$f&X$f;'S1k;'S;=`3R<%l?Ah1k?Ah?BY&X?BY?Mn1k?MnO&X!V3UP;=`<%l1k!_3[P;=`<%l-_!Z3hV!`h`P!cpOv&}wx'kx!^&}!^!_(V!_;'S&};'S;=`(n<%lO&}!_4WihSkWc!ROX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst>]tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^/^!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!Z5zbkWOX5uXZ7SZ[5u[^7S^p5uqr5urs7Sst+Ptw5uwx7Sx!]5u!]!^7w!^!a7S!a#S5u#S#T7S#T;'S5u;'S;=`8n<%lO5u!R7VVOp7Sqs7St!]7S!]!^7l!^;'S7S;'S;=`7q<%lO7S!R7qOa!R!R7tP;=`<%l7S!Z8OYkWa!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!Z8qP;=`<%l5u!_8{ihSkWOX5uXZ7SZ[5u[^7S^p5uqr8trs7Sst/^tw8twx7Sx!P8t!P!Q5u!Q!]8t!]!^:j!^!a7S!a#S8t#S#T;{#T#s8t#s$f5u$f;'S8t;'S;=`>V<%l?Ah8t?Ah?BY5u?BY?Mn8t?MnO5u!_:sbhSkWa!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!V<QchSOp7Sqr;{rs7Sst0mtw;{wx7Sx!P;{!P!Q7S!Q!];{!]!^=]!^!a7S!a#s;{#s$f7S$f;'S;{;'S;=`>P<%l?Ah;{?Ah?BY7S?BY?Mn;{?MnO7S!V=dXhSa!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!V>SP;=`<%l;{!_>YP;=`<%l8t!_>dhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^/^!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!Z@TakWOX@OXZAYZ[@O[^AY^p@Oqr@OrsAYsw@OwxAYx!]@O!]!^Az!^!aAY!a#S@O#S#TAY#T;'S@O;'S;=`Bq<%lO@O!RA]UOpAYq!]AY!]!^Ao!^;'SAY;'S;=`At<%lOAY!RAtOb!R!RAwP;=`<%lAY!ZBRYkWb!ROX+PZ[+P^p+Pqr+Psw+Px!^+P!a#S+P#T;'S+P;'S;=`+t<%lO+P!ZBtP;=`<%l@O!_COhhSkWOX@OXZAYZ[@O[^AY^p@OqrBwrsAYswBwwxAYx!PBw!P!Q@O!Q!]Bw!]!^Dj!^!aAY!a#SBw#S#TE{#T#sBw#s$f@O$f;'SBw;'S;=`HS<%l?AhBw?Ah?BY@O?BY?MnBw?MnO@O!_DsbhSkWb!ROX+PZ[+P^p+Pqr/^sw/^x!P/^!P!Q+P!Q!^/^!a#S/^#S#T0m#T#s/^#s$f+P$f;'S/^;'S;=`1e<%l?Ah/^?Ah?BY+P?BY?Mn/^?MnO+P!VFQbhSOpAYqrE{rsAYswE{wxAYx!PE{!P!QAY!Q!]E{!]!^GY!^!aAY!a#sE{#s$fAY$f;'SE{;'S;=`G|<%l?AhE{?Ah?BYAY?BY?MnE{?MnOAY!VGaXhSb!Rqr0msw0mx!P0m!Q!^0m!a#s0m$f;'S0m;'S;=`1_<%l?Ah0m?BY?Mn0m!VHPP;=`<%lE{!_HVP;=`<%lBw!ZHcW!bx`P!a`Or(trs'ksv(tw!^(t!^!_)e!_;'S(t;'S;=`*P<%lO(t!aIYlhS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OKQ!O!P-_!P!Q$q!Q!^-_!^!_*V!_!a&X!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!aK_khS`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx!P-_!P!Q$q!Q!^-_!^!_*V!_!`&X!`!aMS!a#S-_#S#T1k#T#s-_#s$f$q$f;'S-_;'S;=`3X<%l?Ah-_?Ah?BY$q?BY?Mn-_?MnO$q!TM_X`P!a`!cp!eQOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X!aNZ!ZhSfQ`PkW!a`!cpOX$qXZ&XZ[$q[^&X^p$qpq&Xqr-_rs&}sv-_vw/^wx(tx}-_}!OMz!O!PMz!P!Q$q!Q![Mz![!]Mz!]!^-_!^!_*V!_!a&X!a!c-_!c!}Mz!}#R-_#R#SMz#S#T1k#T#oMz#o#s-_#s$f$q$f$}-_$}%OMz%O%W-_%W%oMz%o%p-_%p&aMz&a&b-_&b1pMz1p4UMz4U4dMz4d4e-_4e$ISMz$IS$I`-_$I`$IbMz$Ib$Je-_$Je$JgMz$Jg$Kh-_$Kh%#tMz%#t&/x-_&/x&EtMz&Et&FV-_&FV;'SMz;'S;:j!#|;:j;=`3X<%l?&r-_?&r?AhMz?Ah?BY$q?BY?MnMz?MnO$q!a!$PP;=`<%lMz!R!$ZY!a`!cpOq*Vqr!$yrs(Vsv*Vwx)ex!a*V!a!b!4t!b;'S*V;'S;=`*s<%lO*V!R!%Q]!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!%y!O!f*V!f!g!']!g#W*V#W#X!0`#X;'S*V;'S;=`*s<%lO*V!R!&QX!a`!cpOr*Vrs(Vsv*Vwx)ex}*V}!O!&m!O;'S*V;'S;=`*s<%lO*V!R!&vV!a`!cp!dPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!'dX!a`!cpOr*Vrs(Vsv*Vwx)ex!q*V!q!r!(P!r;'S*V;'S;=`*s<%lO*V!R!(WX!a`!cpOr*Vrs(Vsv*Vwx)ex!e*V!e!f!(s!f;'S*V;'S;=`*s<%lO*V!R!(zX!a`!cpOr*Vrs(Vsv*Vwx)ex!v*V!v!w!)g!w;'S*V;'S;=`*s<%lO*V!R!)nX!a`!cpOr*Vrs(Vsv*Vwx)ex!{*V!{!|!*Z!|;'S*V;'S;=`*s<%lO*V!R!*bX!a`!cpOr*Vrs(Vsv*Vwx)ex!r*V!r!s!*}!s;'S*V;'S;=`*s<%lO*V!R!+UX!a`!cpOr*Vrs(Vsv*Vwx)ex!g*V!g!h!+q!h;'S*V;'S;=`*s<%lO*V!R!+xY!a`!cpOr!+qrs!,hsv!+qvw!-Swx!.[x!`!+q!`!a!/j!a;'S!+q;'S;=`!0Y<%lO!+qq!,mV!cpOv!,hvx!-Sx!`!,h!`!a!-q!a;'S!,h;'S;=`!.U<%lO!,hP!-VTO!`!-S!`!a!-f!a;'S!-S;'S;=`!-k<%lO!-SP!-kO{PP!-nP;=`<%l!-Sq!-xS!cp{POv(Vx;'S(V;'S;=`(h<%lO(Vq!.XP;=`<%l!,ha!.aX!a`Or!.[rs!-Ssv!.[vw!-Sw!`!.[!`!a!.|!a;'S!.[;'S;=`!/d<%lO!.[a!/TT!a`{POr)esv)ew;'S)e;'S;=`)y<%lO)ea!/gP;=`<%l!.[!R!/sV!a`!cp{POr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!0]P;=`<%l!+q!R!0gX!a`!cpOr*Vrs(Vsv*Vwx)ex#c*V#c#d!1S#d;'S*V;'S;=`*s<%lO*V!R!1ZX!a`!cpOr*Vrs(Vsv*Vwx)ex#V*V#V#W!1v#W;'S*V;'S;=`*s<%lO*V!R!1}X!a`!cpOr*Vrs(Vsv*Vwx)ex#h*V#h#i!2j#i;'S*V;'S;=`*s<%lO*V!R!2qX!a`!cpOr*Vrs(Vsv*Vwx)ex#m*V#m#n!3^#n;'S*V;'S;=`*s<%lO*V!R!3eX!a`!cpOr*Vrs(Vsv*Vwx)ex#d*V#d#e!4Q#e;'S*V;'S;=`*s<%lO*V!R!4XX!a`!cpOr*Vrs(Vsv*Vwx)ex#X*V#X#Y!+q#Y;'S*V;'S;=`*s<%lO*V!R!4{Y!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!a!4t!a!b!:]!b;'S!4t;'S;=`!;r<%lO!4tq!5pV!cpOv!5kvx!6Vx!a!5k!a!b!7W!b;'S!5k;'S;=`!8V<%lO!5kP!6YTO!a!6V!a!b!6i!b;'S!6V;'S;=`!7Q<%lO!6VP!6lTO!`!6V!`!a!6{!a;'S!6V;'S;=`!7Q<%lO!6VP!7QOxPP!7TP;=`<%l!6Vq!7]V!cpOv!5kvx!6Vx!`!5k!`!a!7r!a;'S!5k;'S;=`!8V<%lO!5kq!7yS!cpxPOv(Vx;'S(V;'S;=`(h<%lO(Vq!8YP;=`<%l!5ka!8bX!a`Or!8]rs!6Vsv!8]vw!6Vw!a!8]!a!b!8}!b;'S!8];'S;=`!:V<%lO!8]a!9SX!a`Or!8]rs!6Vsv!8]vw!6Vw!`!8]!`!a!9o!a;'S!8];'S;=`!:V<%lO!8]a!9vT!a`xPOr)esv)ew;'S)e;'S;=`)y<%lO)ea!:YP;=`<%l!8]!R!:dY!a`!cpOr!4trs!5ksv!4tvw!6Vwx!8]x!`!4t!`!a!;S!a;'S!4t;'S;=`!;r<%lO!4t!R!;]V!a`!cpxPOr*Vrs(Vsv*Vwx)ex;'S*V;'S;=`*s<%lO*V!R!;uP;=`<%l!4t!V!<TXiS`P!a`!cpOr&Xrs&}sv&Xwx(tx!^&X!^!_*V!_;'S&X;'S;=`*y<%lO&X",tokenizers:[ag,aO,ay,am,au,ap,0,1,2,3,4,5],topRules:{Document:[0,15]},dialects:{noMatch:0,selfClosing:485},tokenPrec:487});function dist_getAttrs(h,d){let _=Object.create(null);for(let V of h.getChildren(23)){let h=V.getChild(24),ee=V.getChild(26)||V.getChild(27);h&&(_[d.read(h.from,h.to)]=ee?26==ee.type.id?d.read(ee.from+1,ee.to-1):d.read(ee.from,ee.to):"")}return _}function findTagName(h,d){let _=h.getChild(22);return _?d.read(_.from,_.to):" "}function maybeNest(h,d,_){let V;for(let ee of _)if(!ee.attrs||ee.attrs(V||(V=dist_getAttrs(h.node.parent.firstChild,d))))return{parser:ee.parser};return null}function configureNesting(h=[],d=[]){var _;let V=[],ee=[],er=[],eo=[];for(let d of h)("script"==d.tag?V:"style"==d.tag?ee:"textarea"==d.tag?er:eo).push(d);let ec=d.length?Object.create(null):null;for(let h of d)(ec[h.name]||(ec[h.name]=[])).push(h);return _=(h,d)=>{let _=h.type.id;if(28==_)return maybeNest(h,d,V);if(31==_)return maybeNest(h,d,ee);if(34==_)return maybeNest(h,d,er);if(20==_&&eo.length){let _=h.node,V=_.firstChild,ee=V&&findTagName(V,d),er;if(ee){for(let h of eo)if(h.tag==ee&&(!h.attrs||h.attrs(er||(er=dist_getAttrs(_,d))))){let d=_.lastChild,ee=37==d.type.id?d.from:_.to;if(ee>V.to)return{parser:h.parser,overlay:[{from:V.to,to:ee}]}}}}if(ec&&23==_){let _=h.node,V;if(V=_.firstChild){let h=ec[d.read(V.from,V.to)];if(h)for(let V of h){if(V.tagName&&V.tagName!=findTagName(_.parent,d))continue;let h=_.lastChild;if(26==h.type.id){let d=h.from+1,_=h.lastChild,ee=h.to-(_&&_.isError?0:1);if(ee>d)return{parser:V.parser,overlay:[{from:d,to:ee}]}}else if(27==h.type.id)return{parser:V.parser,overlay:[{from:h.from,to:h.to}]}}}}return null},(h,d,V,ee)=>new MixedParse(h,_,d,V,ee)}let a_=[9,10,11,12,13,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],aw=new ContextTracker({start:!1,shift:(h,d)=>4==d||5==d||312==d?h:313==d,strict:!1}),ax=new ExternalTokenizer((h,d)=>{let{next:_}=h;(125==_||-1==_||d.context)&&h.acceptToken(310)},{contextual:!0,fallback:!0}),ak=new ExternalTokenizer((h,d)=>{let{next:_}=h,V;!(a_.indexOf(_)>-1)&&(47==_&&(47==(V=h.peek(1))||42==V)||125==_||59==_||-1==_||d.context||h.acceptToken(309))},{contextual:!0}),aT=new ExternalTokenizer((h,d)=>{let{next:_}=h;if((43==_||45==_)&&(h.advance(),_==h.next)){h.advance();let _=!d.context&&d.canShift(1);h.acceptToken(_?1:2)}},{contextual:!0});function identifierChar(h,d){return h>=65&&h<=90||h>=97&&h<=122||95==h||h>=192||!d&&h>=48&&h<=57}let aE=new ExternalTokenizer((h,d)=>{if(60!=h.next||!d.dialectEnabled(0)||(h.advance(),47==h.next))return;let _=0;for(;a_.indexOf(h.next)>-1;)h.advance(),_++;if(identifierChar(h.next,!0)){for(h.advance(),_++;identifierChar(h.next,!1);)h.advance(),_++;for(;a_.indexOf(h.next)>-1;)h.advance(),_++;if(44==h.next)return;for(let d=0;;d++){if(7==d){if(!identifierChar(h.next,!0))return;break}if(h.next!="extends".charCodeAt(d))break;h.advance(),_++}}h.acceptToken(3,-_)}),aC=styleTags({"get set async static":i8.modifier,"for while do if else switch try catch finally return throw break continue default case":i8.controlKeyword,"in of await yield void typeof delete instanceof":i8.operatorKeyword,"let var const using function class extends":i8.definitionKeyword,"import export from":i8.moduleKeyword,"with debugger as new":i8.keyword,TemplateString:i8.special(i8.string),super:i8.atom,BooleanLiteral:i8.bool,this:i8.self,null:i8.null,Star:i8.modifier,VariableName:i8.variableName,"CallExpression/VariableName TaggedTemplateExpression/VariableName":i8.function(i8.variableName),VariableDefinition:i8.definition(i8.variableName),Label:i8.labelName,PropertyName:i8.propertyName,PrivatePropertyName:i8.special(i8.propertyName),"CallExpression/MemberExpression/PropertyName":i8.function(i8.propertyName),"FunctionDeclaration/VariableDefinition":i8.function(i8.definition(i8.variableName)),"ClassDeclaration/VariableDefinition":i8.definition(i8.className),PropertyDefinition:i8.definition(i8.propertyName),PrivatePropertyDefinition:i8.definition(i8.special(i8.propertyName)),UpdateOp:i8.updateOperator,"LineComment Hashbang":i8.lineComment,BlockComment:i8.blockComment,Number:i8.number,String:i8.string,Escape:i8.escape,ArithOp:i8.arithmeticOperator,LogicOp:i8.logicOperator,BitOp:i8.bitwiseOperator,CompareOp:i8.compareOperator,RegExp:i8.regexp,Equals:i8.definitionOperator,Arrow:i8.function(i8.punctuation),": Spread":i8.punctuation,"( )":i8.paren,"[ ]":i8.squareBracket,"{ }":i8.brace,"InterpolationStart InterpolationEnd":i8.special(i8.brace),".":i8.derefOperator,", ;":i8.separator,"@":i8.meta,TypeName:i8.typeName,TypeDefinition:i8.definition(i8.typeName),"type enum interface implements namespace module declare":i8.definitionKeyword,"abstract global Privacy readonly override":i8.modifier,"is keyof unique infer":i8.operatorKeyword,JSXAttributeValue:i8.attributeValue,JSXText:i8.content,"JSXStartTag JSXStartCloseTag JSXSelfCloseEndTag JSXEndTag":i8.angleBracket,"JSXIdentifier JSXNameSpacedName":i8.tagName,"JSXAttribute/JSXIdentifier JSXAttribute/JSXNameSpacedName":i8.attributeName,"JSXBuiltin/JSXIdentifier":i8.standard(i8.tagName)}),aP={__proto__:null,export:18,as:23,from:31,default:34,async:39,function:40,extends:52,this:56,true:64,false:64,null:76,void:80,typeof:84,super:102,new:136,delete:152,yield:161,await:165,class:170,public:227,private:227,protected:227,readonly:229,instanceof:248,satisfies:251,in:252,const:254,import:286,keyof:339,unique:343,infer:349,is:385,abstract:405,implements:407,type:409,let:412,var:414,using:417,interface:423,enum:427,namespace:433,module:435,declare:439,global:443,for:462,of:471,while:474,with:478,do:482,if:486,else:488,switch:492,case:498,try:504,catch:508,finally:512,return:516,throw:520,break:524,continue:528,debugger:532},aI={__proto__:null,async:123,get:125,set:127,declare:187,public:189,private:189,protected:189,static:191,abstract:193,override:195,readonly:201,accessor:203,new:389},aR={__proto__:null,"<":143},aA=LRParser.deserialize({version:14,states:"$<UO%TQ^OOO%[Q^OOO'_Q`OOP(lOWOOO*zQ08SO'#ChO+RO!bO'#CiO+aO#tO'#CiO+oO?MpO'#D^O.QQ^O'#DdO.bQ^O'#DoO%[Q^O'#DyO0fQ^O'#EROOQ07b'#EZ'#EZO1PQWO'#EWOOQO'#El'#ElOOQO'#Ie'#IeO1XQWO'#GmO1dQWO'#EkO1iQWO'#EkO3kQ08SO'#JiO6[Q08SO'#JjO6xQWO'#FZO6}Q&jO'#FqOOQ07b'#Fc'#FcO7YO,YO'#FcO7hQ7[O'#FxO9UQWO'#FwOOQ07b'#Jj'#JjOOQ07`'#Ji'#JiO9ZQWO'#GqOOQU'#KU'#KUO9fQWO'#IRO9kQ07hO'#ISOOQU'#JW'#JWOOQU'#IW'#IWQ`Q^OOO`Q^OOO%[Q^O'#DqO9sQ^O'#D}O9zQ^O'#EPO9aQWO'#GmO:RQ7[O'#CnO:aQWO'#EjO:lQWO'#EuO:qQ7[O'#FbO;`QWO'#GmOOQO'#KV'#KVO;eQWO'#KVO;sQWO'#GuO;sQWO'#GvO;sQWO'#GxO9aQWO'#G{O<jQWO'#HOO>RQWO'#CdO>cQWO'#H[O>kQWO'#HbO>kQWO'#HdO`Q^O'#HfO>kQWO'#HhO>kQWO'#HkO>pQWO'#HqO>uQ07iO'#HwO%[Q^O'#HyO?QQ07iO'#H{O?]Q07iO'#H}O9kQ07hO'#IPO?hQ08SO'#ChO@jQ`O'#DiQOQWOOO%[Q^O'#EPOAQQWO'#ESO:RQ7[O'#EjOA]QWO'#EjOAhQpO'#FbOOQU'#Cf'#CfOOQ07`'#Dn'#DnOOQ07`'#Jm'#JmO%[Q^O'#JmOOQO'#Jq'#JqOOQO'#Ib'#IbOBhQ`O'#EcOOQ07`'#Eb'#EbOCdQ07pO'#EcOCnQ`O'#EVOOQO'#Jp'#JpODSQ`O'#JqOEaQ`O'#EVOCnQ`O'#EcPEnO!0LbO'#CaPOOO)CDu)CDuOOOO'#IX'#IXOEyO!bO,59TOOQ07b,59T,59TOOOO'#IY'#IYOFXO#tO,59TO%[Q^O'#D`OOOO'#I['#I[OFgO?MpO,59xOOQ07b,59x,59xOFuQ^O'#I]OGYQWO'#JkOI[QrO'#JkO+}Q^O'#JkOIcQWO,5:OOIyQWO'#ElOJWQWO'#JyOJcQWO'#JxOJcQWO'#JxOJkQWO,5;YOJpQWO'#JwOOQ07f,5:Z,5:ZOJwQ^O,5:ZOLxQ08SO,5:eOMiQWO,5:mONSQ07hO'#JvONZQWO'#JuO9ZQWO'#JuONoQWO'#JuONwQWO,5;XON|QWO'#JuO!#UQrO'#JjOOQ07b'#Ch'#ChO%[Q^O'#ERO!#tQpO,5:rOOQO'#Jr'#JrOOQO-E<c-E<cO9aQWO,5=XO!$[QWO,5=XO!$aQ^O,5;VO!&dQ7[O'#EgO!'}QWO,5;VO!)mQ7[O'#DsO!)tQ^O'#DxO!*OQ`O,5;`O!*WQ`O,5;`O%[Q^O,5;`OOQU'#FR'#FROOQU'#FT'#FTO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aO%[Q^O,5;aOOQU'#FX'#FXO!*fQ^O,5;rOOQ07b,5;w,5;wOOQ07b,5;x,5;xO!,iQWO,5;xOOQ07b,5;y,5;yO%[Q^O'#IiO!,qQ07hO,5<eO!&dQ7[O,5;aO!-`Q7[O,5;aO%[Q^O,5;uO!-gQ&jO'#FgO!.dQ&jO'#J}O!.OQ&jO'#J}O!.kQ&jO'#J}OOQO'#J}'#J}O!/PQ&jO,5<POOOS,5<],5<]O!/bQ^O'#FsOOOS'#Ih'#IhO7YO,YO,5;}O!/iQ&jO'#FuOOQ07b,5;},5;}O!0YQMhO'#CuOOQ07b'#Cy'#CyO!0mQWO'#CyO!0rO?MpO'#C}O!1`Q7[O,5<bO!1gQWO,5<dO!3SQ!LQO'#GSO!3aQWO'#GTO!3fQWO'#GTO!3kQ!LQO'#GXO!4jQ`O'#G]OOQO'#Gh'#GhO!(SQ7[O'#GgOOQO'#Gj'#GjO!(SQ7[O'#GiO!5]QMhO'#JdOOQ07b'#Jd'#JdO!5gQWO'#JcO!5uQWO'#JbO!5}QWO'#CtOOQ07b'#Cw'#CwOOQ07b'#DR'#DROOQ07b'#DT'#DTO1SQWO'#DVO!(SQ7[O'#FzO!(SQ7[O'#F|O!6VQWO'#GOO!6[QWO'#GPO!3fQWO'#GVO!(SQ7[O'#G[O!6aQWO'#EmO!7OQWO,5<cOOQ07`'#Cq'#CqO!7WQWO'#EnO!8QQ`O'#EoOOQ07`'#Jw'#JwO!8XQ07hO'#KWO9kQ07hO,5=]O`Q^O,5>mOOQU'#J`'#J`OOQU,5>n,5>nOOQU-E<U-E<UO!:ZQ08SO,5:]O!<wQ08SO,5:iO%[Q^O,5:iO!?bQ08SO,5:kOOQO,5@q,5@qO!@RQ7[O,5=XO!@aQ07hO'#JaO9UQWO'#JaO!@rQ07hO,59YO!@}Q`O,59YO!AVQ7[O,59YO:RQ7[O,59YO!AbQWO,5;VO!AjQWO'#HZO!BOQWO'#KZO%[Q^O,5;zO!7{Q`O,5;|O!BWQWO,5=tO!B]QWO,5=tO!BbQWO,5=tO9kQ07hO,5=tO;sQWO,5=dOOQO'#Cu'#CuO!BpQ`O,5=aO!BxQ7[O,5=bO!CTQWO,5=dO!CYQpO,5=gO!CbQWO'#KVO>pQWO'#HQO9aQWO'#HSO!CgQWO'#HSO:RQ7[O'#HUO!ClQWO'#HUOOQU,5=j,5=jO!CqQWO'#HVO!DSQWO'#CnO!DXQWO,59OO!DcQWO,59OO!FhQ^O,59OOOQU,59O,59OO!FxQ07hO,59OO%[Q^O,59OO!ITQ^O'#H^OOQU'#H_'#H_OOQU'#H`'#H`O`Q^O,5=vO!IkQWO,5=vO`Q^O,5=|O`Q^O,5>OO!IpQWO,5>QO`Q^O,5>SO!IuQWO,5>VO!IzQ^O,5>]OOQU,5>c,5>cO%[Q^O,5>cO9kQ07hO,5>eOOQU,5>g,5>gO!NUQWO,5>gOOQU,5>i,5>iO!NUQWO,5>iOOQU,5>k,5>kO!NZQ`O'#D[O%[Q^O'#JmO!NxQ`O'#JmO# gQ`O'#DjO# xQ`O'#DjO#$ZQ^O'#DjO#$bQWO'#JlO#$jQWO,5:TO#$oQWO'#EpO#$}QWO'#JzO#%VQWO,5;ZO#%[Q`O'#DjO#%iQ`O'#EUOOQ07b,5:n,5:nO%[Q^O,5:nO#%pQWO,5:nO>pQWO,5;UO!@}Q`O,5;UO!AVQ7[O,5;UO:RQ7[O,5;UO#%xQWO,5@XO#%}Q$ISO,5:rOOQO-E<`-E<`O#'TQ07pO,5:}OCnQ`O,5:qO#'_Q`O,5:qOCnQ`O,5:}O!@rQ07hO,5:qOOQ07`'#Ef'#EfOOQO,5:},5:}O%[Q^O,5:}O#'lQ07hO,5:}O#'wQ07hO,5:}O!@}Q`O,5:qOOQO,5;T,5;TO#(VQ07hO,5:}POOO'#IV'#IVP#(kO!0LbO,58{POOO,58{,58{OOOO-E<V-E<VOOQ07b1G.o1G.oOOOO-E<W-E<WO#(vQpO,59zOOOO-E<Y-E<YOOQ07b1G/d1G/dO#({QrO,5>wO+}Q^O,5>wOOQO,5>},5>}O#)VQ^O'#I]OOQO-E<Z-E<ZO#)dQWO,5@VO#)lQrO,5@VO#)sQWO,5@dOOQ07b1G/j1G/jO%[Q^O,5@eO#){QWO'#IcOOQO-E<a-E<aO#)sQWO,5@dOOQ07`1G0t1G0tOOQ07f1G/u1G/uOOQ07f1G0X1G0XO%[Q^O,5@bO#*aQ07hO,5@bO#*rQ07hO,5@bO#*yQWO,5@aO9ZQWO,5@aO#+RQWO,5@aO#+aQWO'#IfO#*yQWO,5@aOOQ07`1G0s1G0sO!*OQ`O,5:tO!*ZQ`O,5:tOOQO,5:v,5:vO#,RQWO,5:vO#,ZQ7[O1G2sO9aQWO1G2sOOQ07b1G0q1G0qO#,iQ08SO1G0qO#-nQ08QO,5;ROOQ07b'#GR'#GRO#.[Q08SO'#JdO!$aQ^O1G0qO#0dQ7[O'#JnO#0nQWO,5:_O#0sQrO'#JoO%[Q^O'#JoO#0}QWO,5:dOOQ07b'#D['#D[OOQ07b1G0z1G0zO%[Q^O1G0zOOQ07b1G1d1G1dO#1SQWO1G0zO#3kQ08SO1G0{O#3rQ08SO1G0{O#6]Q08SO1G0{O#6dQ08SO1G0{O#8nQ08SO1G0{O#9UQ08SO1G0{O#<OQ08SO1G0{O#<VQ08SO1G0{O#>jQ08SO1G0{O#>wQ08SO1G0{O#@uQ08SO1G0{O#CuQ(CYO'#ChO#EsQ(CYO1G1^O#EzQ(CYO'#JjO!,lQWO1G1dO#F[Q08SO,5?TOOQ07`-E<g-E<gO#GOQ08SO1G0{OOQ07b1G0{1G0{O#IZQ08SO1G1aO#I}Q&jO,5<TO#JVQ&jO,5<UO#J_Q&jO'#FlO#JvQWO'#FkOOQO'#KO'#KOOOQO'#Ig'#IgO#J{Q&jO1G1kOOQ07b1G1k1G1kOOOS1G1v1G1vO#K^Q(CYO'#JiO#KhQWO,5<_O!*fQ^O,5<_OOOS-E<f-E<fOOQ07b1G1i1G1iO#KmQ`O'#J}OOQ07b,5<a,5<aO#KuQ`O,5<aOOQ07b,59e,59eO!&dQ7[O'#DPOOOO'#IZ'#IZO#KzO?MpO,59iOOQ07b,59i,59iO%[Q^O1G1|O!6[QWO'#IkO#LVQ7[O,5<uOOQ07b,5<r,5<rO!(SQ7[O'#InO#LuQ7[O,5=RO!(SQ7[O'#IpO#MhQ7[O,5=TO!&dQ7[O,5=VOOQO1G2O1G2OO#MrQpO'#CqO#NVQpO,5<nO#N^QWO'#KRO9aQWO'#KRO#NlQWO,5<pO!(SQ7[O,5<oO#NqQWO'#GUO#N|QWO,5<oO$ RQpO'#GRO$ `QpO'#KSO$ jQWO'#KSO!&dQ7[O'#KSO$ oQWO,5<sO$ tQ`O'#G^O!4eQ`O'#G^O$!VQWO'#G`O$![QWO'#GbO!3fQWO'#GeO$!aQ07hO'#ImO$!lQ`O,5<wOOQ07f,5<w,5<wO$!sQ`O'#G^O$#RQ`O'#G_O$#ZQ`O'#G_O$#`Q7[O,5=RO$#pQ7[O,5=TOOQ07b,5=W,5=WO!(SQ7[O,5?}O!(SQ7[O,5?}O$$QQWO'#IrO$$]QWO,5?|O$$eQWO,59`O$%UQ7[O,59qOOQ07b,59q,59qO$%wQ7[O,5<fO$&jQ7[O,5<hO@bQWO,5<jOOQ07b,5<k,5<kO$&tQWO,5<qO$&yQ7[O,5<vO$'ZQWO'#JuO!$aQ^O1G1}O$'`QWO1G1}O9ZQWO'#JxO9ZQWO'#EpO%[Q^O'#EpO9ZQWO'#ItO$'eQ07hO,5@rOOQU1G2w1G2wOOQU1G4X1G4XOOQ07b1G/w1G/wO!,iQWO1G/wO$)jQ08SO1G0TOOQU1G2s1G2sO!&dQ7[O1G2sO%[Q^O1G2sO#,^QWO1G2sO$+nQ7[O'#EgOOQ07`,5?{,5?{O$+xQ07hO,5?{OOQU1G.t1G.tO!@rQ07hO1G.tO!@}Q`O1G.tO!AVQ7[O1G.tO$,ZQWO1G0qO$,`QWO'#ChO$,kQWO'#K[O$,sQWO,5=uO$,xQWO'#K[O$,}QWO'#K[O$-]QWO'#IzO$-kQWO,5@uO$-sQrO1G1fOOQ07b1G1h1G1hO9aQWO1G3`O@bQWO1G3`O$-zQWO1G3`O$.PQWO1G3`OOQU1G3`1G3`O!CTQWO1G3OO!&dQ7[O1G2{O$.UQWO1G2{OOQU1G2|1G2|O!&dQ7[O1G2|O$.ZQWO1G2|O$.cQ`O'#GzOOQU1G3O1G3OO!4eQ`O'#IvO!CYQpO1G3ROOQU1G3R1G3ROOQU,5=l,5=lO$.kQ7[O,5=nO9aQWO,5=nO$![QWO,5=pO9UQWO,5=pO!@}Q`O,5=pO!AVQ7[O,5=pO:RQ7[O,5=pO$.yQWO'#KYO$/UQWO,5=qOOQU1G.j1G.jO$/ZQ07hO1G.jO@bQWO1G.jO$/fQWO1G.jO9kQ07hO1G.jO$1kQrO,5@wO$1{QWO,5@wO9ZQWO,5@wO$2WQ^O,5=xO$2_QWO,5=xOOQU1G3b1G3bO`Q^O1G3bOOQU1G3h1G3hOOQU1G3j1G3jO>kQWO1G3lO$2dQ^O1G3nO$6hQ^O'#HmOOQU1G3q1G3qO$6uQWO'#HsO>pQWO'#HuOOQU1G3w1G3wO$6}Q^O1G3wO9kQ07hO1G3}OOQU1G4P1G4POOQ07`'#GY'#GYO9kQ07hO1G4RO9kQ07hO1G4TO$;UQWO,5@XO!*fQ^O,5;[O9ZQWO,5;[O>pQWO,5:UO!*fQ^O,5:UO!@}Q`O,5:UO$;ZQ(CYO,5:UOOQO,5;[,5;[O$;eQ`O'#I^O$;{QWO,5@WOOQ07b1G/o1G/oO$<TQ`O'#IdO$<_QWO,5@fOOQ07`1G0u1G0uO# xQ`O,5:UOOQO'#Ia'#IaO$<gQ`O,5:pOOQ07f,5:p,5:pO#%sQWO1G0YOOQ07b1G0Y1G0YO%[Q^O1G0YOOQ07b1G0p1G0pO>pQWO1G0pO!@}Q`O1G0pO!AVQ7[O1G0pOOQ07`1G5s1G5sO!@rQ07hO1G0]OOQO1G0i1G0iO%[Q^O1G0iO$<nQ07hO1G0iO$<yQ07hO1G0iO!@}Q`O1G0]OCnQ`O1G0]O$=XQ07hO1G0iOOQO1G0]1G0]O$=mQ08SO1G0iPOOO-E<T-E<TPOOO1G.g1G.gOOOO1G/f1G/fO$=wQpO,5<eO$>PQrO1G4cOOQO1G4i1G4iO%[Q^O,5>wO$>ZQWO1G5qO$>cQWO1G6OO$>kQrO1G6PO9ZQWO,5>}O$>uQ08SO1G5|O%[Q^O1G5|O$?VQ07hO1G5|O$?hQWO1G5{O$?hQWO1G5{O9ZQWO1G5{O$?pQWO,5?QO9ZQWO,5?QOOQO,5?Q,5?QO$@UQWO,5?QO$'ZQWO,5?QOOQO-E<d-E<dOOQO1G0`1G0`OOQO1G0b1G0bO!,lQWO1G0bOOQU7+(_7+(_O!&dQ7[O7+(_O%[Q^O7+(_O$@dQWO7+(_O$@oQ7[O7+(_O$@}Q08SO,5=RO$CYQ08SO,5=TO$EeQ08SO,5=RO$GvQ08SO,5=TO$JXQ08SO,59qO$LaQ08SO,5<fO$NlQ08SO,5<hO%!wQ08SO,5<vOOQ07b7+&]7+&]O%%YQ08SO7+&]O%%|Q7[O'#I_O%&WQWO,5@YOOQ07b1G/y1G/yO%&`Q^O'#I`O%&mQWO,5@ZO%&uQrO,5@ZOOQ07b1G0O1G0OO%'PQWO7+&fOOQ07b7+&f7+&fO%'UQ(CYO,5:eO%[Q^O7+&xO%'`Q(CYO,5:]O%'mQ(CYO,5:iO%'wQ(CYO,5:kOOQ07b7+'O7+'OOOQO1G1o1G1oOOQO1G1p1G1pO%(RQtO,5<WO!*fQ^O,5<VOOQO-E<e-E<eOOQ07b7+'V7+'VOOOS7+'b7+'bOOOS1G1y1G1yO%(^QWO1G1yOOQ07b1G1{1G1{O%(cQpO,59kOOOO-E<X-E<XOOQ07b1G/T1G/TO%(jQ08SO7+'hOOQ07b,5?V,5?VO%)^QpO,5?VOOQ07b1G2a1G2aP!&dQ7[O'#IkPOQ07b-E<i-E<iO%)|Q7[O,5?YOOQ07b-E<l-E<lO%*oQ7[O,5?[OOQ07b-E<n-E<nO%*yQpO1G2qOOQ07b1G2Y1G2YO%+QQWO'#IjO%+`QWO,5@mO%+`QWO,5@mO%+hQWO,5@mO%+sQWO,5@mOOQO1G2[1G2[O%,RQ7[O1G2ZO!(SQ7[O1G2ZO%,cQ!LQO'#IlO%,sQWO,5@nO!&dQ7[O,5@nO%,{QpO,5@nOOQ07b1G2_1G2_OOQ07`,5<x,5<xOOQ07`,5<y,5<yO$'ZQWO,5<yOC_QWO,5<yO!@}Q`O,5<xOOQO'#Ga'#GaO%-VQWO,5<zOOQ07`,5<|,5<|O$'ZQWO,5=POOQO,5?X,5?XOOQO-E<k-E<kOOQ07f1G2c1G2cO!4eQ`O,5<xO%-_QWO,5<yO$!VQWO,5<zO!4eQ`O,5<yO!(SQ7[O'#InO%.RQ7[O1G2mO!(SQ7[O'#IpO%.tQ7[O1G2oO%/OQ7[O1G5iO%/YQ7[O1G5iOOQO,5?^,5?^OOQO-E<p-E<pOOQO1G.z1G.zO!7{Q`O,59sO%[Q^O,59sO%/gQWO1G2UO!(SQ7[O1G2]O%/lQ08SO7+'iOOQ07b7+'i7+'iO!$aQ^O7+'iO%0`QWO,5;[OOQ07`,5?`,5?`OOQ07`-E<r-E<rOOQ07b7+%c7+%cO%0eQpO'#KTO#%sQWO7+(_O%0oQrO7+(_O$@gQWO7+(_O%0vQ08QO'#ChO%1ZQ08QO,5<}O%1{QWO,5<}OOQ07`1G5g1G5gOOQU7+$`7+$`O!@rQ07hO7+$`O!@}Q`O7+$`O!$aQ^O7+&]O%2QQWO'#IyO%2iQWO,5@vOOQO1G3a1G3aO9aQWO,5@vO%2iQWO,5@vO%2qQWO,5@vOOQO,5?f,5?fOOQO-E<x-E<xOOQ07b7+'Q7+'QO%2vQWO7+(zO9kQ07hO7+(zO9aQWO7+(zO@bQWO7+(zOOQU7+(j7+(jO%2{Q08QO7+(gO!&dQ7[O7+(gO%3VQpO7+(hOOQU7+(h7+(hO!&dQ7[O7+(hO%3^QWO'#KXO%3iQWO,5=fOOQO,5?b,5?bOOQO-E<t-E<tOOQU7+(m7+(mO%4xQ`O'#HTOOQU1G3Y1G3YO!&dQ7[O1G3YO%[Q^O1G3YO%5PQWO1G3YO%5[Q7[O1G3YO9kQ07hO1G3[O$![QWO1G3[O9UQWO1G3[O!@}Q`O1G3[O!AVQ7[O1G3[O%5jQWO'#IxO%6OQWO,5@tO%6WQ`O,5@tOOQ07`1G3]1G3]OOQU7+$U7+$UO@bQWO7+$UO9kQ07hO7+$UO%6cQWO7+$UO%[Q^O1G6cO%[Q^O1G6dO%6hQ07hO1G6cO%6rQ^O1G3dO%6yQWO1G3dO%7OQ^O1G3dOOQU7+(|7+(|O9kQ07hO7+)WO`Q^O7+)YOOQU'#K_'#K_OOQU'#I{'#I{O%7VQ^O,5>XOOQU,5>X,5>XO%[Q^O'#HnO%7dQWO'#HpOOQU,5>_,5>_O9ZQWO,5>_OOQU,5>a,5>aOOQU7+)c7+)cOOQU7+)i7+)iOOQU7+)m7+)mOOQU7+)o7+)oO%7iQ`O1G5sO%7}Q(CYO1G0vO%8XQWO1G0vOOQO1G/p1G/pO%8dQ(CYO1G/pO>pQWO1G/pO!*fQ^O'#DjOOQO,5>x,5>xOOQO-E<[-E<[OOQO,5?O,5?OOOQO-E<b-E<bO!@}Q`O1G/pOOQO-E<_-E<_OOQ07f1G0[1G0[OOQ07b7+%t7+%tO#%sQWO7+%tOOQ07b7+&[7+&[O>pQWO7+&[O!@}Q`O7+&[OOQO7+%w7+%wO$=mQ08SO7+&TOOQO7+&T7+&TO%[Q^O7+&TO%8nQ07hO7+&TO!@rQ07hO7+%wO!@}Q`O7+%wO%8yQ07hO7+&TO%9XQ08SO7++hO%[Q^O7++hO%9iQWO7++gO%9iQWO7++gOOQO1G4l1G4lO9ZQWO1G4lO%9qQWO1G4lOOQO7+%|7+%|O#%sQWO<<KyO%0oQrO<<KyO%:PQWO<<KyOOQU<<Ky<<KyO!&dQ7[O<<KyO%[Q^O<<KyO%:XQWO<<KyO%:dQ08SO,5?YO%<oQ08SO,5?[O%>zQ08SO1G2ZO%A]Q08SO1G2mO%ChQ08SO1G2oO%EsQ7[O,5>yOOQO-E<]-E<]O%E}QrO,5>zO%[Q^O,5>zOOQO-E<^-E<^O%FXQWO1G5uOOQ07b<<JQ<<JQO%FaQ(CYO1G0qO%HkQ(CYO1G0{O%HrQ(CYO1G0{O%JvQ(CYO1G0{O%J}Q(CYO1G0{O%LrQ(CYO1G0{O%MYQ(CYO1G0{O& mQ(CYO1G0{O& tQ(CYO1G0{O&#rQ(CYO1G0{O&$PQ(CYO1G0{O&%}Q(CYO1G0{O&&bQ08SO<<JdO&'gQ(CYO1G0{O&)]Q(CYO'#JdO&+`Q(CYO1G1aO&+mQ(CYO1G0TO!*fQ^O'#FnOOQO'#KP'#KPOOQO1G1r1G1rO&+wQWO1G1qO&+|Q(CYO,5?TOOOS7+'e7+'eOOOO1G/V1G/VOOQ07b1G4q1G4qO!(SQ7[O7+(]O&,WQWO,5?UO9aQWO,5?UOOQO-E<h-E<hO&,fQWO1G6XO&,fQWO1G6XO&,nQWO1G6XO&,yQ7[O7+'uO&-ZQpO,5?WO&-eQWO,5?WO!&dQ7[O,5?WOOQO-E<j-E<jO&-jQpO1G6YO&-tQWO1G6YOOQ07`1G2e1G2eO$'ZQWO1G2eOOQ07`1G2d1G2dO&-|QWO1G2fO!&dQ7[O1G2fOOQ07`1G2k1G2kO!@}Q`O1G2dOC_QWO1G2eO&.RQWO1G2fO&.ZQWO1G2eO&.}Q7[O,5?YOOQ07b-E<m-E<mO&/pQ7[O,5?[OOQ07b-E<o-E<oO!(SQ7[O7++TOOQ07b1G/_1G/_O&/zQWO1G/_OOQ07b7+'p7+'pO&0PQ7[O7+'wO&0aQ08SO<<KTOOQ07b<<KT<<KTO&1TQWO1G0vO!&dQ7[O'#IsO&1YQWO,5@oO!&dQ7[O1G2iOOQU<<Gz<<GzO!@rQ07hO<<GzO&1bQ08SO<<IwOOQ07b<<Iw<<IwOOQO,5?e,5?eO&2UQWO,5?eO&2ZQWO,5?eOOQO-E<w-E<wO&2iQWO1G6bO&2iQWO1G6bO9aQWO1G6bO@bQWO<<LfOOQU<<Lf<<LfO&2qQWO<<LfO9kQ07hO<<LfOOQU<<LR<<LRO%2{Q08QO<<LROOQU<<LS<<LSO%3VQpO<<LSO&2vQ`O'#IuO&3RQWO,5@sO!*fQ^O,5@sOOQU1G3Q1G3QO&3ZQ^O'#JmOOQO'#Iw'#IwO9kQ07hO'#IwO&3eQ`O,5=oOOQU,5=o,5=oO&3lQ`O'#EcO&4QQWO7+(tO&4VQWO7+(tOOQU7+(t7+(tO!&dQ7[O7+(tO%[Q^O7+(tO&4_QWO7+(tOOQU7+(v7+(vO9kQ07hO7+(vO$![QWO7+(vO9UQWO7+(vO!@}Q`O7+(vO&4jQWO,5?dOOQO-E<v-E<vOOQO'#HW'#HWO&4uQWO1G6`O9kQ07hO<<GpOOQU<<Gp<<GpO@bQWO<<GpO&4}QWO7++}O&5SQWO7+,OO%[Q^O7++}O%[Q^O7+,OOOQU7+)O7+)OO&5XQWO7+)OO&5^Q^O7+)OO&5eQWO7+)OOOQU<<Lr<<LrOOQU<<Lt<<LtOOQU-E<y-E<yOOQU1G3s1G3sO&5jQWO,5>YOOQU,5>[,5>[O&5oQWO1G3yO9ZQWO7+&bO!*fQ^O7+&bOOQO7+%[7+%[O&5tQ(CYO1G6PO>pQWO7+%[OOQ07b<<I`<<I`OOQ07b<<Iv<<IvO>pQWO<<IvOOQO<<Io<<IoO$=mQ08SO<<IoO%[Q^O<<IoOOQO<<Ic<<IcO!@rQ07hO<<IcO&6OQ07hO<<IoO&6ZQ08SO<= SO&6kQWO<= ROOQO7+*W7+*WO9ZQWO7+*WOOQUANAeANAeO&6sQWOANAeO!&dQ7[OANAeO#%sQWOANAeO%0oQrOANAeO%[Q^OANAeO&6{Q08SO7+'uO&9^Q08SO,5?YO&;iQ08SO,5?[O&=tQ08SO7+'wO&@VQrO1G4fO&@aQ(CYO7+&]O&BeQ(CYO,5=RO&DlQ(CYO,5=TO&D|Q(CYO,5=RO&E^Q(CYO,5=TO&EnQ(CYO,59qO&GqQ(CYO,5<fO&ItQ(CYO,5<hO&KwQ(CYO,5<vO&MmQ(CYO7+'hO&MzQ(CYO7+'iO&NXQWO,5<YOOQO7+']7+']O&N^Q7[O<<KwOOQO1G4p1G4pO&NeQWO1G4pO&NpQWO1G4pO' OQWO7++sO' OQWO7++sO!&dQ7[O1G4rO' WQpO1G4rO' bQWO7++tOOQ07`7+(P7+(PO$'ZQWO7+(QO' jQpO7+(QOOQ07`7+(O7+(OO$'ZQWO7+(PO' qQWO7+(QO!&dQ7[O7+(QOC_QWO7+(PO' vQ7[O<<NoOOQ07b7+$y7+$yO'!QQpO,5?_OOQO-E<q-E<qO'![Q08QO7+(TOOQUAN=fAN=fO9aQWO1G5POOQO1G5P1G5PO'!lQWO1G5PO'!qQWO7++|O'!qQWO7++|O9kQ07hOANBQO@bQWOANBQOOQUANBQANBQOOQUANAmANAmOOQUANAnANAnO'!yQWO,5?aOOQO-E<s-E<sO'#UQ(CYO1G6_O'%fQrO'#ChOOQO,5?c,5?cOOQO-E<u-E<uOOQU1G3Z1G3ZO&3ZQ^O,5<zOOQU<<L`<<L`O!&dQ7[O<<L`O&4QQWO<<L`O'%pQWO<<L`O%[Q^O<<L`OOQU<<Lb<<LbO9kQ07hO<<LbO$![QWO<<LbO9UQWO<<LbO'%xQ`O1G5OO'&TQWO7++zOOQUAN=[AN=[O9kQ07hOAN=[OOQU<= i<= iOOQU<= j<= jO'&]QWO<= iO'&bQWO<= jOOQU<<Lj<<LjO'&gQWO<<LjO'&lQ^O<<LjOOQU1G3t1G3tO>pQWO7+)eO'&sQWO<<I|O''OQ(CYO<<I|OOQO<<Hv<<HvOOQ07bAN?bAN?bOOQOAN?ZAN?ZO$=mQ08SOAN?ZOOQOAN>}AN>}O%[Q^OAN?ZOOQO<<Mr<<MrOOQUG27PG27PO!&dQ7[OG27PO#%sQWOG27PO''YQWOG27PO%0oQrOG27PO''bQ(CYO<<JdO''oQ(CYO1G2ZO')eQ(CYO,5?YO'+hQ(CYO,5?[O'-kQ(CYO1G2mO'/nQ(CYO1G2oO'1qQ(CYO<<KTO'2OQ(CYO<<IwOOQO1G1t1G1tO!(SQ7[OANAcOOQO7+*[7+*[O'2]QWO7+*[O'2hQWO<= _O'2pQpO7+*^OOQ07`<<Kl<<KlO$'ZQWO<<KlOOQ07`<<Kk<<KkO'2zQpO<<KlO$'ZQWO<<KkOOQO7+*k7+*kO9aQWO7+*kO'3RQWO<= hOOQUG27lG27lO9kQ07hOG27lO!*fQ^O1G4{O'3ZQWO7++yO&4QQWOANAzOOQUANAzANAzO!&dQ7[OANAzO'3cQWOANAzOOQUANA|ANA|O9kQ07hOANA|O$![QWOANA|OOQO'#HX'#HXOOQO7+*j7+*jOOQUG22vG22vOOQUANETANETOOQUANEUANEUOOQUANBUANBUO'3kQWOANBUOOQU<<MP<<MPO!*fQ^OAN?hOOQOG24uG24uO$=mQ08SOG24uO#%sQWOLD,kOOQULD,kLD,kO!&dQ7[OLD,kO'3pQWOLD,kO'3xQ(CYO7+'uO'5nQ(CYO,5?YO'7qQ(CYO,5?[O'9tQ(CYO7+'wO';jQ7[OG26}OOQO<<Mv<<MvOOQ07`ANAWANAWO$'ZQWOANAWOOQ07`ANAVANAVOOQO<<NV<<NVOOQULD-WLD-WO';zQ(CYO7+*gOOQUG27fG27fO&4QQWOG27fO!&dQ7[OG27fOOQUG27hG27hO9kQ07hOG27hOOQUG27pG27pO'<UQ(CYOG25SOOQOLD*aLD*aOOQU!$(!V!$(!VO#%sQWO!$(!VO!&dQ7[O!$(!VO'<`Q08SOG26}OOQ07`G26rG26rOOQULD-QLD-QO&4QQWOLD-QOOQULD-SLD-SOOQU!)9Eq!)9EqO#%sQWO!)9EqOOQU!$(!l!$(!lOOQU!.K;]!.K;]O'>qQ(CYOG26}O!*fQ^O'#DyO1PQWO'#EWO'@gQrO'#JiO!*fQ^O'#DqO'@nQ^O'#D}O'@uQrO'#ChO'C]QrO'#ChO!*fQ^O'#EPO'CmQ^O,5;VO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O,5;aO!*fQ^O'#IiO'EpQWO,5<eO'ExQ7[O,5;aO'GcQ7[O,5;aO!*fQ^O,5;uO!&dQ7[O'#GgO'ExQ7[O'#GgO!&dQ7[O'#GiO'ExQ7[O'#GiO1SQWO'#DVO1SQWO'#DVO!&dQ7[O'#FzO'ExQ7[O'#FzO!&dQ7[O'#F|O'ExQ7[O'#F|O!&dQ7[O'#G[O'ExQ7[O'#G[O!*fQ^O,5:iO!*fQ^O,5@eO'CmQ^O1G0qO'GjQ(CYO'#ChO!*fQ^O1G1|O!&dQ7[O'#InO'ExQ7[O'#InO!&dQ7[O'#IpO'ExQ7[O'#IpO!&dQ7[O,5<oO'ExQ7[O,5<oO'CmQ^O1G1}O!*fQ^O7+&xO!&dQ7[O1G2ZO'ExQ7[O1G2ZO!&dQ7[O'#InO'ExQ7[O'#InO!&dQ7[O'#IpO'ExQ7[O'#IpO!&dQ7[O1G2]O'ExQ7[O1G2]O'CmQ^O7+'iO'CmQ^O7+&]O!&dQ7[OANAcO'ExQ7[OANAcO'GtQWO'#EkO'GyQWO'#EkO'HRQWO'#FZO'HWQWO'#EuO'H]QWO'#JyO'HhQWO'#JwO'HsQWO,5;VO'HxQ7[O,5<bO'IPQWO'#GTO'IUQWO'#GTO'IZQWO,5<cO'IcQWO,5;VO'IkQ(CYO1G1^O'IrQWO,5<oO'IwQWO,5<oO'I|QWO,5<qO'JRQWO,5<qO'JWQWO1G1}O'J]QWO1G0qO'JbQ7[O<<KwO'JiQ7[O<<KwO7hQ7[O'#FxO9UQWO'#FwOA]QWO'#EjO!*fQ^O,5;rO!3fQWO'#GTO!3fQWO'#GTO!3fQWO'#GVO!3fQWO'#GVO!(SQ7[O7+(]O!(SQ7[O7+(]O%*yQpO1G2qO%*yQpO1G2qO!&dQ7[O,5=VO!&dQ7[O,5=V",stateData:"'Km~O'tOS'uOSSOS'vRQ~OPYOQYORfOX!VO`qOczOdyOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![XO!fuO!kZO!nYO!oYO!pYO!rvO!twO!wxO!{]O#s!PO$T|O%b}O%d!QO%f!OO%g!OO%h!OO%k!RO%m!SO%p!TO%q!TO%s!UO&P!WO&V!XO&X!YO&Z!ZO&]![O&`!]O&f!^O&l!_O&n!`O&p!aO&r!bO&t!cO'{SO'}TO(QUO(XVO(g[O(tiO~OVtO~P`OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'{!dO'}TO(QUO(XVO(g[O(tiO~O`!vOo!nO!P!oO!_!xO!`!uO!a!uO!{:dO#P!pO#Q!pO#R!wO#S!pO#T!pO#W!yO#X!yO'|!lO'}TO(QUO([!mO(g!sO~O'v!zO~OP[XZ[X`[Xn[X|[X}[X!P[X!Y[X!h[X!i[X!k[X!o[X#[[X#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X'r[X(X[X(h[X(o[X(p[X~O!d$|X~P(qO^!|O'}#OO(O!|O(P#OO~O^#PO(P#OO(Q#OO(R#PO~Ot#RO!R#SO(Y#SO(Z#UO~OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'{:hO'}TO(QUO(XVO(g[O(tiO~O!X#YO!Y#VO!V(_P!V(lP~P+}O!Z#bO~P`OPYOQYORfOc!jOd!iOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'}TO(QUO(XVO(g[O(tiO~Ol#lO!X#hO!{]O#e#kO#f#hO'{:iO!j(iP~P.iO!k#nO'{#mO~O!w#rO!{]O%b#sO~O#g#tO~O!d#uO#g#tO~OP$]OZ$dOn$QO|#yO}#zO!P#{O!Y$aO!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO#y$YO(XVO(h$ZO(o#|O(p#}O~O`(]X'r(]X'p(]X!j(]X!V(]X![(]X%c(]X!d(]X~P1qO#[$eO$O$eOP(^XZ(^Xn(^X|(^X}(^X!P(^X!Y(^X!h(^X!k(^X!o(^X#j(^X#k(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#t(^X#v(^X#x(^X#y(^X(X(^X(h(^X(o(^X(p(^X![(^X%c(^X~O`(^X!i(^X'r(^X'p(^X!V(^X!j(^Xr(^X!d(^X~P4XO#[$eO~O$Y$gO$[$fO$c$lO~ORfO![$mO$f$nO$h$pO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz%ZO!P${O![$|O!f%`O!k$xO#f%aO$T%^O$o%[O$q%]O$t%_O'{$rO'}TO(QUO(X$uO(o$}O(p%POf(UP~O!k%bO~O!P%eO![%fO'{%dO~O!d%jO~O`%kO'r%kO~O'|!lO~P%[O%h%rO~P%[Og%VO!k%bO'{%dO'|!lO~Od%yO!k%bO'{%dO~O#r$SO~O|&OO![%{O!k%}O%d&RO'{%dO'|!lO'}TO(QUO_(}P~O!w#rO~O%m&TO!P(yX![(yX'{(yX~O'{&UO~O!t&ZO#s!PO%d!QO%f!OO%g!OO%h!OO%k!RO%m!SO%p!TO%q!TO~Oc&`Od&_O!w&]O%b&^O%u&[O~P;xOc&cOdyO![&bO!t&ZO!wxO!{]O#s!PO%b}O%f!OO%g!OO%h!OO%k!RO%m!SO%p!TO%q!TO%s!UO~Oa&fO#[&iO%d&dO'|!lO~P<}O!k&jO!t&nO~O!k#nO~O![XO~O`%kO'q&vO'r%kO~O`%kO'q&yO'r%kO~O`%kO'q&{O'r%kO~O'p[X!V[Xr[X!j[X&T[X![[X%c[X!d[X~P(qO!_'YO!`'RO!a'RO'|!lO'}TO(QUO~Oo'PO!P'OO!X'SO([&}O!Z(`P!Z(nP~P@UOj']O!['ZO'{%dO~Od'bO!k%bO'{%dO~O|&OO!k%}O~Oo!nO!P!oO!{:dO#P!pO#Q!pO#S!pO#T!pO'|!lO'}TO(QUO([!mO(g!sO~O!_'hO!`'gO!a'gO#R!pO#W'iO#X'iO~PApO`%kOg%VO!d#uO!k%bO'r%kO(h'kO~O!o'oO#['mO~PCOOo!nO!P!oO'}TO(QUO([!mO(g!sO~O![XOo(eX!P(eX!_(eX!`(eX!a(eX!{(eX#P(eX#Q(eX#R(eX#S(eX#T(eX#W(eX#X(eX'|(eX'}(eX(Q(eX([(eX(g(eX~O!`'gO!a'gO'|!lO~PCnO'w'sO'x'sO'y'uO~O^!|O'}'wO(O!|O(P'wO~O^#PO(P'wO(Q'wO(R#PO~Ot#RO!R#SO(Y#SO(Z'{O~O!X'}O!V'PX!V'VX!Y'PX!Y'VX~P+}O!Y(PO!V(_X~OP$]OZ$dOn$QO|#yO}#zO!P#{O!Y(PO!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO#y$YO(XVO(h$ZO(o#|O(p#}O~O!V(_X~PGbO!V(UO~O!V(kX!Y(kX!d(kX!j(kX(h(kX~O#[(kX#g#`X!Z(kX~PIhO#[(VO!V(mX!Y(mX~O!Y(WO!V(lX~O!V(ZO~O#[$eO~PIhO!Z([O~P`O|#yO}#zO!P#{O!i#wO!k#xO(XVOP!maZ!man!ma!Y!ma!h!ma!o!ma#j!ma#k!ma#l!ma#m!ma#n!ma#o!ma#p!ma#q!ma#r!ma#t!ma#v!ma#x!ma#y!ma(h!ma(o!ma(p!ma~O`!ma'r!ma'p!ma!V!ma!j!mar!ma![!ma%c!ma!d!ma~PKOO!j(]O~O!d#uO#[(^O(h'kO!Y(jX`(jX'r(jX~O!j(jX~PMnO!P%eO![%fO!{]O#e(cO#f(bO'{%dO~O!Y(dO!j(iX~O!j(fO~O!P%eO![%fO#f(bO'{%dO~OP(^XZ(^Xn(^X|(^X}(^X!P(^X!Y(^X!h(^X!i(^X!k(^X!o(^X#j(^X#k(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#r(^X#t(^X#v(^X#x(^X#y(^X(X(^X(h(^X(o(^X(p(^X~O!d#uO!j(^X~P! [O|(gO}(hO!i#wO!k#xO!{!za!P!za~O!w!za%b!za![!za#e!za#f!za'{!za~P!#`O!w(lO~OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![XO!fuO!kZO!nYO!oYO!pYO!rvO!t!gO!w!hO$T!kO'{!dO'}TO(QUO(XVO(g[O(tiO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz;QO!P${O![$|O!f<`O!k$xO#f;WO$T%^O$o;SO$q;UO$t%_O'{(pO'}TO(QUO(X$uO(o$}O(p%PO~O#g(rO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz%ZO!P${O![$|O!f%`O!k$xO#f%aO$T%^O$o%[O$q%]O$t%_O'{(pO'}TO(QUO(X$uO(o$}O(p%PO~Of(bP~P!(SO!X(vO!j(cP~P%[O([(xO(g[O~O!P(zO!k#xO([(xO(g[O~OP:cOQ:cORfOc<[Od!iOlkOn:cOokOpkOvkOx:cOz:cO!PWO!TkO!UkO![!eO!f:fO!kZO!n:cO!o:cO!p:cO!r:gO!t:jO!w!hO$T!kO'{)YO'}TO(QUO(XVO(g[O(t<YO~O})]O!k#xO~O!Y$aO`$ma'r$ma'p$ma!j$ma!V$ma![$ma%c$ma!d$ma~O#s)aO~P!&dO|)dO!d)cO![$ZX$W$ZX$Y$ZX$[$ZX$c$ZX~O!d)cO![(qX$W(qX$Y(qX$[(qX$c(qX~O|)dO~P!.OO|)dO![(qX$W(qX$Y(qX$[(qX$c(qX~O![)fO$W)jO$Y)eO$[)eO$c)kO~O!X)nO~P!*fO$Y$gO$[$fO$c)rO~Oj$uX|$uX!P$uX!i$uX(o$uX(p$uX~OfiXf$uXjiX!YiX#[iX~P!/tOo)tO~Ot)uO(Y)vO(Z)xO~Oj*RO|)zO!P){O(o$}O(p%PO~Of)yO~P!0}Of*SO~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz;QO!P${O![$|O!f<`O!k$xO#f;WO$T%^O$o;SO$q;UO$t%_O'}TO(QUO(X$uO(o$}O(p%PO~O!X*WO'{*TO!j(uP~P!1lO#g*YO~O!k*ZO~O!X*`O'{*]O!V(vP~P!1lOn*lO!P*dO!_*jO!`*cO!a*cO!k*ZO#W*kO%Y*fO'|!lO([!mO~O!Z*iO~P!3xO!i#wOj(WX|(WX!P(WX(o(WX(p(WX!Y(WX#[(WX~Of(WX#|(WX~P!4qOj*qO#[*pOf(VX!Y(VX~O!Y*rOf(UX~O'{&UOf(UP~O!k*yO~O'{(pO~Ol*}O!P%eO!X#hO![%fO!{]O#e#kO#f#hO'{%dO!j(iP~O!d#uO#g+OO~O!P%eO!X+QO!Y(WO![%fO'{%dO!V(lP~Oo'VO!P+SO!X+RO'}TO(QUO([(xO~O!Z(nP~P!7lO!Y+TO`(zX'r(zX~OP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO#y$YO(XVO(h$ZO(o#|O(p#}O~O`!ea!Y!ea'r!ea'p!ea!V!ea!j!ear!ea![!ea%c!ea!d!ea~P!8dO|#yO}#zO!P#{O!i#wO!k#xO(XVOP!qaZ!qan!qa!Y!qa!h!qa!o!qa#j!qa#k!qa#l!qa#m!qa#n!qa#o!qa#p!qa#q!qa#r!qa#t!qa#v!qa#x!qa#y!qa(h!qa(o!qa(p!qa~O`!qa'r!qa'p!qa!V!qa!j!qar!qa![!qa%c!qa!d!qa~P!:}O|#yO}#zO!P#{O!i#wO!k#xO(XVOP!saZ!san!sa!Y!sa!h!sa!o!sa#j!sa#k!sa#l!sa#m!sa#n!sa#o!sa#p!sa#q!sa#r!sa#t!sa#v!sa#x!sa#y!sa(h!sa(o!sa(p!sa~O`!sa'r!sa'p!sa!V!sa!j!sar!sa![!sa%c!sa!d!sa~P!=hOg%VOj+^O!['ZO%c+]O~O!d+`O`(TX![(TX'r(TX!Y(TX~O`%kO![XO'r%kO~Og%VO!k%bO~Og%VO!k%bO'{%dO~O!d#uO#g(rO~Oa+kO%d+lO'{+hO'}TO(QUO!Z)OP~O!Y+mO_(}X~OZ+qO~O_+rO~O![%{O'{%dO'|!lO_(}P~Og%VO#[+wO~Og%VOj+zO![$|O~O![+|O~O|,OO![XO~O%h%rO~O!w,TO~Od,YO~Oa,ZO'{#mO'}TO(QUO!Z(|P~Od%yO~O%d!QO'{&UO~P<}OZ,`O_,_O~OPYOQYORfOczOdyOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO!fuO!kZO!nYO!oYO!pYO!rvO!wxO!{]O%b}O'}TO(QUO(XVO(g[O(tiO~O![!eO!t!gO$T!kO'{!dO~P!DkO_,_O`%kO'r%kO~OPYOQYORfOc!jOd!iOlkOnYOokOpkOvkOxYOzYO!PWO!TkO!UkO![!eO!fuO!kZO!nYO!oYO!pYO!rvO!w!hO$T!kO'{!dO'}TO(QUO(XVO(g[O(tiO~O`,eO!twO#s!OO%f!OO%g!OO%h!OO~P!GTO!k&jO~O&V,kO~O![,mO~O&h,oO&j,pOP&eaQ&eaR&eaX&ea`&eac&ead&eal&ean&eao&eap&eav&eax&eaz&ea!P&ea!T&ea!U&ea![&ea!f&ea!k&ea!n&ea!o&ea!p&ea!r&ea!t&ea!w&ea!{&ea#s&ea$T&ea%b&ea%d&ea%f&ea%g&ea%h&ea%k&ea%m&ea%p&ea%q&ea%s&ea&P&ea&V&ea&X&ea&Z&ea&]&ea&`&ea&f&ea&l&ea&n&ea&p&ea&r&ea&t&ea'p&ea'{&ea'}&ea(Q&ea(X&ea(g&ea(t&ea!Z&ea&^&eaa&ea&c&ea~O'{,uO~Og!bX!Y!OX!Y!bX!Z!OX!Z!bX!d!OX!d!bX!k!bX#[!OX~O!d,zO#[,yOg(aX!Y#dX!Y(aX!Z#dX!Z(aX!d(aX!k(aX~Og%VO!d,|O!k%bO!Y!^X!Z!^X~Oo!nO!P!oO'}TO(QUO([!mO~OP:cOQ:cORfOc<[Od!iOlkOn:cOokOpkOvkOx:cOz:cO!PWO!TkO!UkO![!eO!f:fO!kZO!n:cO!o:cO!p:cO!r:gO!t:jO!w!hO$T!kO'}TO(QUO(XVO(g[O(t<YO~O'{;]O~P#!ZO!Y-QO!Z(`X~O!Z-SO~O!d,zO#[,yO!Y#dX!Z#dX~O!Y-TO!Z(nX~O!Z-VO~O!`-WO!a-WO'|!lO~P# xO!Z-ZO~P'_Oj-^O!['ZO~O!V-cO~Oo!za!_!za!`!za!a!za#P!za#Q!za#R!za#S!za#T!za#W!za#X!za'|!za'}!za(Q!za([!za(g!za~P!#`O!o-hO#[-fO~PCOO!`-jO!a-jO'|!lO~PCnO`%kO#[-fO'r%kO~O`%kO!d#uO#[-fO'r%kO~O`%kO!d#uO!o-hO#[-fO'r%kO(h'kO~O'w'sO'x'sO'y-oO~Or-pO~O!V'Pa!Y'Pa~P!8dO!X-tO!V'PX!Y'PX~P%[O!Y(PO!V(_a~O!V(_a~PGbO!Y(WO!V(la~O!P%eO!X-xO![%fO'{%dO!V'VX!Y'VX~O#[-zO!Y(ja!j(ja`(ja'r(ja~O!d#uO~P#*aO!Y(dO!j(ia~O!P%eO![%fO#f.OO'{%dO~Ol.TO!P%eO!X.QO![%fO!{]O#e.SO#f.QO'{%dO!Y'YX!j'YX~O}.XO!k#xO~Og%VOj.[O!['ZO%c.ZO~O`#_i!Y#_i'r#_i'p#_i!V#_i!j#_ir#_i![#_i%c#_i!d#_i~P!8dOj<fO|)zO!P){O(o$}O(p%PO~O#g#Za`#Za#[#Za'r#Za!Y#Za!j#Za![#Za!V#Za~P#-]O#g(WXP(WXZ(WX`(WXn(WX}(WX!h(WX!k(WX!o(WX#j(WX#k(WX#l(WX#m(WX#n(WX#o(WX#p(WX#q(WX#r(WX#t(WX#v(WX#x(WX#y(WX'r(WX(X(WX(h(WX!j(WX!V(WX'p(WXr(WX![(WX%c(WX!d(WX~P!4qO!Y.iOf(bX~P!0}Of.kO~O!Y.lO!j(cX~P!8dO!j.oO~O!V.qO~OP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O(XVOZ#ii`#iin#ii!Y#ii!h#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii'r#ii(h#ii(o#ii(p#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~O#j#ii~P#1XO#j$OO~P#1XOP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO(XVOZ#ii`#ii!Y#ii!h#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii'r#ii(h#ii(o#ii(p#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~On#ii~P#3yOn$QO~P#3yOP$]On$QO|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO(XVO`#ii!Y#ii#t#ii#v#ii#x#ii#y#ii'r#ii(h#ii(o#ii(p#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~OZ#ii!h#ii#o#ii#p#ii#q#ii#r#ii~P#6kOZ$dO!h$SO#o$SO#p$SO#q$cO#r$SO~P#6kOP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO(XVO(p#}O`#ii!Y#ii#x#ii#y#ii'r#ii(h#ii(o#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~O#v$VO~P#9lO#v#ii~P#9lOP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO(XVO`#ii!Y#ii#x#ii#y#ii'r#ii(h#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~O#v#ii(o#ii(p#ii~P#<^O#v$VO(o#|O(p#}O~P#<^OP$]OZ$dOn$QO|#yO}#zO!P#{O!h$SO!i#wO!k#xO!o$]O#j$OO#k$PO#l$PO#m$PO#n$RO#o$SO#p$SO#q$cO#r$SO#t$TO#v$VO#x$XO(XVO(o#|O(p#}O~O`#ii!Y#ii#y#ii'r#ii(h#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~P#?UOP[XZ[Xn[X|[X}[X!P[X!h[X!i[X!k[X!o[X#[[X#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X(X[X(h[X(o[X(p[X!Y[X!Z[X~O#|[X~P#AoOP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO#v:sO#x:uO#y:vO(XVO(h$ZO(o#|O(p#}O~O#|.sO~P#C|O#[:{O$O:{O#|(^X!Z(^X~P! [O`']a!Y']a'r']a'p']a!j']a!V']ar']a![']a%c']a!d']a~P!8dOP#iiZ#ii`#iin#ii}#ii!Y#ii!h#ii!i#ii!k#ii!o#ii#j#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii'r#ii(X#ii(h#ii'p#ii!V#ii!j#iir#ii![#ii%c#ii!d#ii~P#-]O`#}i!Y#}i'r#}i'p#}i!V#}i!j#}ir#}i![#}i%c#}i!d#}i~P!8dO$Y.xO$[.xO~O$Y.yO$[.yO~O!d)cO#[.zO![$`X$W$`X$Y$`X$[$`X$c$`X~O!X.{O~O![)fO$W.}O$Y)eO$[)eO$c/OO~O!Y:wO!Z(]X~P#C|O!Z/PO~O!d)cO$c(qX~O$c/RO~Ot)uO(Y)vO(Z/UO~O!V/YO~P!&dO(o$}Oj%Za|%Za!P%Za(p%Za!Y%Za#[%Za~Of%Za#|%Za~P#L^O(p%POj%]a|%]a!P%]a(o%]a!Y%]a#[%]a~Of%]a#|%]a~P#MPO!YeX!deX!jeX!j$uX(heX~P!/tO!j/bO~P#-]O!Y/cO!d#uO(h'kO!j(uX~O!j/hO~O!X*WO'{%dO!j(uP~O#g/jO~O!V$uX!Y$uX!d$|X~P!/tO!Y/kO!V(vX~P#-]O!d/mO~O!V/oO~Og%VOn/sO!d#uO!k%bO(h'kO~O'{/uO~O!d+`O~O`%kO!Y/yO'r%kO~O!Z/{O~P!3xO!`/|O!a/|O'|!lO([!mO~O!P0OO([!mO~O#W0PO~Of%Za!Y%Za#[%Za#|%Za~P!0}Of%]a!Y%]a#[%]a#|%]a~P!0}O'{&UOf'fX!Y'fX~O!Y*rOf(Ua~Of0YO~O|0ZO}0ZO!P0[Ojya(oya(pya!Yya#[ya~Ofya#|ya~P$$jO|)zO!P){Oj$na(o$na(p$na!Y$na#[$na~Of$na#|$na~P$%`O|)zO!P){Oj$pa(o$pa(p$pa!Y$pa#[$pa~Of$pa#|$pa~P$&RO#g0^O~Of%Oa!Y%Oa#[%Oa#|%Oa~P!0}O!d#uO~O#g0aO~O!Y+TO`(za'r(za~O|#yO}#zO!P#{O!i#wO!k#xO(XVOP!qiZ!qin!qi!Y!qi!h!qi!o!qi#j!qi#k!qi#l!qi#m!qi#n!qi#o!qi#p!qi#q!qi#r!qi#t!qi#v!qi#x!qi#y!qi(h!qi(o!qi(p!qi~O`!qi'r!qi'p!qi!V!qi!j!qir!qi![!qi%c!qi!d!qi~P$'pOg%VOn$tOo$sOp$sOv%XOx%YOz;QO!P${O![$|O!f<`O!k$xO#f;WO$T%^O$o;SO$q;UO$t%_O'}TO(QUO(X$uO(o$}O(p%PO~Ol0kO'{0jO~P$*ZO!d+`O`(Ta![(Ta'r(Ta!Y(Ta~O#g0qO~OZ[X!YeX!ZeX~O!Y0rO!Z)OX~O!Z0tO~OZ0uO~Oa0wO'{+hO'}TO(QUO~O![%{O'{%dO_'nX!Y'nX~O!Y+mO_(}a~O!j0zO~P!8dOZ0}O~O_1OO~O#[1RO~Oj1UO![$|O~O([(xO!Z({P~Og%VOj1_O![1[O%c1^O~OZ1iO!Y1gO!Z(|X~O!Z1jO~O_1lO`%kO'r%kO~O'{#mO'}TO(QUO~O#[$eO$O$eOP(^XZ(^Xn(^X|(^X}(^X!P(^X!Y(^X!h(^X!k(^X!o(^X#j(^X#k(^X#l(^X#m(^X#n(^X#o(^X#p(^X#q(^X#t(^X#v(^X#x(^X#y(^X(X(^X(h(^X(o(^X(p(^X~O#r1oO&T1pO`(^X!i(^X~P$/qO#[$eO#r1oO&T1pO~O`1rO~P%[O`1tO~O&^1wOP&[iQ&[iR&[iX&[i`&[ic&[id&[il&[in&[io&[ip&[iv&[ix&[iz&[i!P&[i!T&[i!U&[i![&[i!f&[i!k&[i!n&[i!o&[i!p&[i!r&[i!t&[i!w&[i!{&[i#s&[i$T&[i%b&[i%d&[i%f&[i%g&[i%h&[i%k&[i%m&[i%p&[i%q&[i%s&[i&P&[i&V&[i&X&[i&Z&[i&]&[i&`&[i&f&[i&l&[i&n&[i&p&[i&r&[i&t&[i'p&[i'{&[i'}&[i(Q&[i(X&[i(g&[i(t&[i!Z&[ia&[i&c&[i~Oa1}O!Z1{O&c1|O~P`O![XO!k2PO~O&j,pOP&eiQ&eiR&eiX&ei`&eic&eid&eil&ein&eio&eip&eiv&eix&eiz&ei!P&ei!T&ei!U&ei![&ei!f&ei!k&ei!n&ei!o&ei!p&ei!r&ei!t&ei!w&ei!{&ei#s&ei$T&ei%b&ei%d&ei%f&ei%g&ei%h&ei%k&ei%m&ei%p&ei%q&ei%s&ei&P&ei&V&ei&X&ei&Z&ei&]&ei&`&ei&f&ei&l&ei&n&ei&p&ei&r&ei&t&ei'p&ei'{&ei'}&ei(Q&ei(X&ei(g&ei(t&ei!Z&ei&^&eia&ei&c&ei~O!V2VO~O!Y!^a!Z!^a~P#C|Oo!nO!P!oO!X2]O([!mO!Y'QX!Z'QX~P@UO!Y-QO!Z(`a~O!Y'WX!Z'WX~P!7lO!Y-TO!Z(na~O!Z2dO~P'_O`%kO#[2mO'r%kO~O`%kO!d#uO#[2mO'r%kO~O`%kO!d#uO!o2qO#[2mO'r%kO(h'kO~O`%kO'r%kO~P!8dO!Y$aOr$ma~O!V'Pi!Y'Pi~P!8dO!Y(PO!V(_i~O!Y(WO!V(li~O!V(mi!Y(mi~P!8dO!Y(ji!j(ji`(ji'r(ji~P!8dO#[2sO!Y(ji!j(ji`(ji'r(ji~O!Y(dO!j(ii~O!P%eO![%fO!{]O#e2xO#f2wO'{%dO~O!P%eO![%fO#f2wO'{%dO~Oj3PO!['ZO%c3OO~Og%VOj3PO!['ZO%c3OO~O#g%ZaP%ZaZ%Za`%Zan%Za}%Za!h%Za!i%Za!k%Za!o%Za#j%Za#k%Za#l%Za#m%Za#n%Za#o%Za#p%Za#q%Za#r%Za#t%Za#v%Za#x%Za#y%Za'r%Za(X%Za(h%Za!j%Za!V%Za'p%Zar%Za![%Za%c%Za!d%Za~P#L^O#g%]aP%]aZ%]a`%]an%]a}%]a!h%]a!i%]a!k%]a!o%]a#j%]a#k%]a#l%]a#m%]a#n%]a#o%]a#p%]a#q%]a#r%]a#t%]a#v%]a#x%]a#y%]a'r%]a(X%]a(h%]a!j%]a!V%]a'p%]ar%]a![%]a%c%]a!d%]a~P#MPO#g%ZaP%ZaZ%Za`%Zan%Za}%Za!Y%Za!h%Za!i%Za!k%Za!o%Za#j%Za#k%Za#l%Za#m%Za#n%Za#o%Za#p%Za#q%Za#r%Za#t%Za#v%Za#x%Za#y%Za'r%Za(X%Za(h%Za!j%Za!V%Za'p%Za#[%Zar%Za![%Za%c%Za!d%Za~P#-]O#g%]aP%]aZ%]a`%]an%]a}%]a!Y%]a!h%]a!i%]a!k%]a!o%]a#j%]a#k%]a#l%]a#m%]a#n%]a#o%]a#p%]a#q%]a#r%]a#t%]a#v%]a#x%]a#y%]a'r%]a(X%]a(h%]a!j%]a!V%]a'p%]a#[%]ar%]a![%]a%c%]a!d%]a~P#-]O#gyaPyaZya`yanya!hya!iya!kya!oya#jya#kya#lya#mya#nya#oya#pya#qya#rya#tya#vya#xya#yya'rya(Xya(hya!jya!Vya'pyarya![ya%cya!dya~P$$jO#g$naP$naZ$na`$nan$na}$na!h$na!i$na!k$na!o$na#j$na#k$na#l$na#m$na#n$na#o$na#p$na#q$na#r$na#t$na#v$na#x$na#y$na'r$na(X$na(h$na!j$na!V$na'p$nar$na![$na%c$na!d$na~P$%`O#g$paP$paZ$pa`$pan$pa}$pa!h$pa!i$pa!k$pa!o$pa#j$pa#k$pa#l$pa#m$pa#n$pa#o$pa#p$pa#q$pa#r$pa#t$pa#v$pa#x$pa#y$pa'r$pa(X$pa(h$pa!j$pa!V$pa'p$par$pa![$pa%c$pa!d$pa~P$&RO#g%OaP%OaZ%Oa`%Oan%Oa}%Oa!Y%Oa!h%Oa!i%Oa!k%Oa!o%Oa#j%Oa#k%Oa#l%Oa#m%Oa#n%Oa#o%Oa#p%Oa#q%Oa#r%Oa#t%Oa#v%Oa#x%Oa#y%Oa'r%Oa(X%Oa(h%Oa!j%Oa!V%Oa'p%Oa#[%Oar%Oa![%Oa%c%Oa!d%Oa~P#-]O`#_q!Y#_q'r#_q'p#_q!V#_q!j#_qr#_q![#_q%c#_q!d#_q~P!8dOf'RX!Y'RX~P!(SO!Y.iOf(ba~O!X3ZO!Y'SX!j'SX~P%[O!Y.lO!j(ca~O!Y.lO!j(ca~P!8dO!V3^O~O#|!ma!Z!ma~PKOO#|!ea!Y!ea!Z!ea~P#C|O#|!qa!Z!qa~P!:}O#|!sa!Z!sa~P!=hORfO![3pO$a3qO~O!Z3uO~Or3vO~P#-]O`$jq!Y$jq'r$jq'p$jq!V$jq!j$jqr$jq![$jq%c$jq!d$jq~P!8dO!V3wO~P#-]O|)zO!P){O(p%POj'ba(o'ba!Y'ba#['ba~Of'ba#|'ba~P%)eO|)zO!P){Oj'da(o'da(p'da!Y'da#['da~Of'da#|'da~P%*WO(h$ZO~P#-]O!X3zO'{%dO!Y'^X!j'^X~O!Y/cO!j(ua~O!Y/cO!d#uO!j(ua~O!Y/cO!d#uO(h'kO!j(ua~Of$wi!Y$wi#[$wi#|$wi~P!0}O!X4SO'{*]O!V'`X!Y'`X~P!1lO!Y/kO!V(va~O!Y/kO!V(va~P#-]O!d#uO#r4[O~On4_O!d#uO(h'kO~O(o$}Oj%Zi|%Zi!P%Zi(p%Zi!Y%Zi#[%Zi~Of%Zi#|%Zi~P%-jO(p%POj%]i|%]i!P%]i(o%]i!Y%]i#[%]i~Of%]i#|%]i~P%.]Of(Vi!Y(Vi~P!0}O#[4fOf(Vi!Y(Vi~P!0}O!j4iO~O`$kq!Y$kq'r$kq'p$kq!V$kq!j$kqr$kq![$kq%c$kq!d$kq~P!8dO!V4mO~O!Y4nO![(wX~P#-]O!i#wO~P4XO`$uX![$uX%W[X'r$uX!Y$uX~P!/tO%W4pO`kXjkX|kX!PkX![kX'rkX(okX(pkX!YkX~O%W4pO~Oa4vO%d4wO'{+hO'}TO(QUO!Y'mX!Z'mX~O!Y0rO!Z)Oa~OZ4{O~O_4|O~O`%kO'r%kO~P#-]O![$|O~P#-]O!Y5UO#[5WO!Z({X~O!Z5XO~Oo!nO!P5YO!_!xO!`!uO!a!uO!{:dO#P!pO#Q!pO#R!pO#S!pO#T!pO#W5_O#X!yO'|!lO'}TO(QUO([!mO(g!sO~O!Z5^O~P%3nOj5dO![1[O%c5cO~Og%VOj5dO![1[O%c5cO~Oa5kO'{#mO'}TO(QUO!Y'lX!Z'lX~O!Y1gO!Z(|a~O'}TO(QUO([5mO~O_5qO~O#r5tO&T5uO~PMnO!j5vO~P%[O`5xO~O`5xO~P%[Oa1}O!Z5}O&c1|O~P`O!d6PO~O!d6ROg(ai!Y(ai!Z(ai!d(ai!k(ai~O!Y#di!Z#di~P#C|O#[6SO!Y#di!Z#di~O!Y!^i!Z!^i~P#C|O`%kO#[6]O'r%kO~O`%kO!d#uO#[6]O'r%kO~O!Y(jq!j(jq`(jq'r(jq~P!8dO!Y(dO!j(iq~O!P%eO![%fO#f6dO'{%dO~O!['ZO%c6gO~Oj6jO!['ZO%c6gO~O#g'baP'baZ'ba`'ban'ba}'ba!h'ba!i'ba!k'ba!o'ba#j'ba#k'ba#l'ba#m'ba#n'ba#o'ba#p'ba#q'ba#r'ba#t'ba#v'ba#x'ba#y'ba'r'ba(X'ba(h'ba!j'ba!V'ba'p'bar'ba!['ba%c'ba!d'ba~P%)eO#g'daP'daZ'da`'dan'da}'da!h'da!i'da!k'da!o'da#j'da#k'da#l'da#m'da#n'da#o'da#p'da#q'da#r'da#t'da#v'da#x'da#y'da'r'da(X'da(h'da!j'da!V'da'p'dar'da!['da%c'da!d'da~P%*WO#g$wiP$wiZ$wi`$win$wi}$wi!Y$wi!h$wi!i$wi!k$wi!o$wi#j$wi#k$wi#l$wi#m$wi#n$wi#o$wi#p$wi#q$wi#r$wi#t$wi#v$wi#x$wi#y$wi'r$wi(X$wi(h$wi!j$wi!V$wi'p$wi#[$wir$wi![$wi%c$wi!d$wi~P#-]O#g%ZiP%ZiZ%Zi`%Zin%Zi}%Zi!h%Zi!i%Zi!k%Zi!o%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#p%Zi#q%Zi#r%Zi#t%Zi#v%Zi#x%Zi#y%Zi'r%Zi(X%Zi(h%Zi!j%Zi!V%Zi'p%Zir%Zi![%Zi%c%Zi!d%Zi~P%-jO#g%]iP%]iZ%]i`%]in%]i}%]i!h%]i!i%]i!k%]i!o%]i#j%]i#k%]i#l%]i#m%]i#n%]i#o%]i#p%]i#q%]i#r%]i#t%]i#v%]i#x%]i#y%]i'r%]i(X%]i(h%]i!j%]i!V%]i'p%]ir%]i![%]i%c%]i!d%]i~P%.]Of'Ra!Y'Ra~P!0}O!Y'Sa!j'Sa~P!8dO!Y.lO!j(ci~O#|#_i!Y#_i!Z#_i~P#C|OP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O(XVOZ#iin#ii!h#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii#|#ii(h#ii(o#ii(p#ii!Y#ii!Z#ii~O#j#ii~P%FnO#j:lO~P%FnOP$]O|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO(XVOZ#ii!h#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii#|#ii(h#ii(o#ii(p#ii!Y#ii!Z#ii~On#ii~P%HyOn:nO~P%HyOP$]On:nO|#yO}#zO!P#{O!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO(XVO#t#ii#v#ii#x#ii#y#ii#|#ii(h#ii(o#ii(p#ii!Y#ii!Z#ii~OZ#ii!h#ii#o#ii#p#ii#q#ii#r#ii~P%KUOZ:zO!h:pO#o:pO#p:pO#q:yO#r:pO~P%KUOP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO(XVO(p#}O#x#ii#y#ii#|#ii(h#ii(o#ii!Y#ii!Z#ii~O#v:sO~P%MpO#v#ii~P%MpOP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO(XVO#x#ii#y#ii#|#ii(h#ii!Y#ii!Z#ii~O#v#ii(o#ii(p#ii~P& {O#v:sO(o#|O(p#}O~P& {OP$]OZ:zOn:nO|#yO}#zO!P#{O!h:pO!i#wO!k#xO!o$]O#j:lO#k:mO#l:mO#m:mO#n:oO#o:pO#p:pO#q:yO#r:pO#t:qO#v:sO#x:uO(XVO(o#|O(p#}O~O#y#ii#|#ii(h#ii!Y#ii!Z#ii~P&$^O`#zy!Y#zy'r#zy'p#zy!V#zy!j#zyr#zy![#zy%c#zy!d#zy~P!8dOj<gO|)zO!P){O(o$}O(p%PO~OP#iiZ#iin#ii}#ii!h#ii!i#ii!k#ii!o#ii#j#ii#k#ii#l#ii#m#ii#n#ii#o#ii#p#ii#q#ii#r#ii#t#ii#v#ii#x#ii#y#ii#|#ii(X#ii(h#ii!Y#ii!Z#ii~P&'UO!i#wOP(WXZ(WXj(WXn(WX|(WX}(WX!P(WX!h(WX!k(WX!o(WX#j(WX#k(WX#l(WX#m(WX#n(WX#o(WX#p(WX#q(WX#r(WX#t(WX#v(WX#x(WX#y(WX#|(WX(X(WX(h(WX(o(WX(p(WX!Y(WX!Z(WX~O#|#}i!Y#}i!Z#}i~P#C|O#|!qi!Z!qi~P$'pO!Z6|O~O!Y']a!Z']a~P#C|O!d#uO(h'kO!Y'^a!j'^a~O!Y/cO!j(ui~O!Y/cO!d#uO!j(ui~Of$wq!Y$wq#[$wq#|$wq~P!0}O!V'`a!Y'`a~P#-]O!d7TO~O!Y/kO!V(vi~P#-]O!Y/kO!V(vi~O!V7XO~O!d#uO#r7^O~On7_O!d#uO(h'kO~O|)zO!P){O(p%POj'ca(o'ca!Y'ca#['ca~Of'ca#|'ca~P&.fO|)zO!P){Oj'ea(o'ea(p'ea!Y'ea#['ea~Of'ea#|'ea~P&/XO!V7aO~Of$yq!Y$yq#[$yq#|$yq~P!0}O`$ky!Y$ky'r$ky'p$ky!V$ky!j$kyr$ky![$ky%c$ky!d$ky~P!8dO!d6RO~O!Y4nO![(wa~O`#_y!Y#_y'r#_y'p#_y!V#_y!j#_yr#_y![#_y%c#_y!d#_y~P!8dOZ7fO~Oa7hO'{+hO'}TO(QUO~O!Y0rO!Z)Oi~O_7lO~O([(xO!Y'iX!Z'iX~O!Y5UO!Z({a~OlkO'{7sO~P.iO!Z7vO~P%3nOo!nO!P7wO'}TO(QUO([!mO(g!sO~O![1[O~O![1[O%c7yO~Oj7|O![1[O%c7yO~OZ8RO!Y'la!Z'la~O!Y1gO!Z(|i~O!j8VO~O!j8WO~O!j8ZO~O!j8ZO~P%[O`8]O~O!d8^O~O!j8_O~O!Y(mi!Z(mi~P#C|O`%kO#[8gO'r%kO~O!Y(jy!j(jy`(jy'r(jy~P!8dO!Y(dO!j(iy~O!['ZO%c8jO~O#g$wqP$wqZ$wq`$wqn$wq}$wq!Y$wq!h$wq!i$wq!k$wq!o$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#p$wq#q$wq#r$wq#t$wq#v$wq#x$wq#y$wq'r$wq(X$wq(h$wq!j$wq!V$wq'p$wq#[$wqr$wq![$wq%c$wq!d$wq~P#-]O#g'caP'caZ'ca`'can'ca}'ca!h'ca!i'ca!k'ca!o'ca#j'ca#k'ca#l'ca#m'ca#n'ca#o'ca#p'ca#q'ca#r'ca#t'ca#v'ca#x'ca#y'ca'r'ca(X'ca(h'ca!j'ca!V'ca'p'car'ca!['ca%c'ca!d'ca~P&.fO#g'eaP'eaZ'ea`'ean'ea}'ea!h'ea!i'ea!k'ea!o'ea#j'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#t'ea#v'ea#x'ea#y'ea'r'ea(X'ea(h'ea!j'ea!V'ea'p'ear'ea!['ea%c'ea!d'ea~P&/XO#g$yqP$yqZ$yq`$yqn$yq}$yq!Y$yq!h$yq!i$yq!k$yq!o$yq#j$yq#k$yq#l$yq#m$yq#n$yq#o$yq#p$yq#q$yq#r$yq#t$yq#v$yq#x$yq#y$yq'r$yq(X$yq(h$yq!j$yq!V$yq'p$yq#[$yqr$yq![$yq%c$yq!d$yq~P#-]O!Y'Si!j'Si~P!8dO#|#_q!Y#_q!Z#_q~P#C|O(o$}OP%ZaZ%Zan%Za}%Za!h%Za!i%Za!k%Za!o%Za#j%Za#k%Za#l%Za#m%Za#n%Za#o%Za#p%Za#q%Za#r%Za#t%Za#v%Za#x%Za#y%Za#|%Za(X%Za(h%Za!Y%Za!Z%Za~Oj%Za|%Za!P%Za(p%Za~P&@nO(p%POP%]aZ%]an%]a}%]a!h%]a!i%]a!k%]a!o%]a#j%]a#k%]a#l%]a#m%]a#n%]a#o%]a#p%]a#q%]a#r%]a#t%]a#v%]a#x%]a#y%]a#|%]a(X%]a(h%]a!Y%]a!Z%]a~Oj%]a|%]a!P%]a(o%]a~P&BuOj<gO|)zO!P){O(p%PO~P&@nOj<gO|)zO!P){O(o$}O~P&BuO|0ZO}0ZO!P0[OPyaZyajyanya!hya!iya!kya!oya#jya#kya#lya#mya#nya#oya#pya#qya#rya#tya#vya#xya#yya#|ya(Xya(hya(oya(pya!Yya!Zya~O|)zO!P){OP$naZ$naj$nan$na}$na!h$na!i$na!k$na!o$na#j$na#k$na#l$na#m$na#n$na#o$na#p$na#q$na#r$na#t$na#v$na#x$na#y$na#|$na(X$na(h$na(o$na(p$na!Y$na!Z$na~O|)zO!P){OP$paZ$paj$pan$pa}$pa!h$pa!i$pa!k$pa!o$pa#j$pa#k$pa#l$pa#m$pa#n$pa#o$pa#p$pa#q$pa#r$pa#t$pa#v$pa#x$pa#y$pa#|$pa(X$pa(h$pa(o$pa(p$pa!Y$pa!Z$pa~OP%OaZ%Oan%Oa}%Oa!h%Oa!i%Oa!k%Oa!o%Oa#j%Oa#k%Oa#l%Oa#m%Oa#n%Oa#o%Oa#p%Oa#q%Oa#r%Oa#t%Oa#v%Oa#x%Oa#y%Oa#|%Oa(X%Oa(h%Oa!Y%Oa!Z%Oa~P&'UO#|$jq!Y$jq!Z$jq~P#C|O#|$kq!Y$kq!Z$kq~P#C|O!Z8vO~O#|8wO~P!0}O!d#uO!Y'^i!j'^i~O!d#uO(h'kO!Y'^i!j'^i~O!Y/cO!j(uq~O!V'`i!Y'`i~P#-]O!Y/kO!V(vq~O!V8}O~P#-]O!V8}O~Of(Vy!Y(Vy~P!0}O!Y'ga!['ga~P#-]O`%Vq![%Vq'r%Vq!Y%Vq~P#-]OZ9SO~O!Y0rO!Z)Oq~O#[9WO!Y'ia!Z'ia~O!Y5UO!Z({i~P#C|OP[XZ[Xn[X|[X}[X!P[X!V[X!Y[X!h[X!i[X!k[X!o[X#[[X#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X(X[X(h[X(o[X(p[X~O!d%TX#r%TX~P'#`O![1[O%c9[O~O'}TO(QUO([9aO~O!Y1gO!Z(|q~O!j9dO~O!j9eO~O!j9fO~O!j9fO~P%[O#[9iO!Y#dy!Z#dy~O!Y#dy!Z#dy~P#C|O!['ZO%c9nO~O#|#zy!Y#zy!Z#zy~P#C|OP$wiZ$win$wi}$wi!h$wi!i$wi!k$wi!o$wi#j$wi#k$wi#l$wi#m$wi#n$wi#o$wi#p$wi#q$wi#r$wi#t$wi#v$wi#x$wi#y$wi#|$wi(X$wi(h$wi!Y$wi!Z$wi~P&'UO|)zO!P){O(p%POP'baZ'baj'ban'ba}'ba!h'ba!i'ba!k'ba!o'ba#j'ba#k'ba#l'ba#m'ba#n'ba#o'ba#p'ba#q'ba#r'ba#t'ba#v'ba#x'ba#y'ba#|'ba(X'ba(h'ba(o'ba!Y'ba!Z'ba~O|)zO!P){OP'daZ'daj'dan'da}'da!h'da!i'da!k'da!o'da#j'da#k'da#l'da#m'da#n'da#o'da#p'da#q'da#r'da#t'da#v'da#x'da#y'da#|'da(X'da(h'da(o'da(p'da!Y'da!Z'da~O(o$}OP%ZiZ%Zij%Zin%Zi|%Zi}%Zi!P%Zi!h%Zi!i%Zi!k%Zi!o%Zi#j%Zi#k%Zi#l%Zi#m%Zi#n%Zi#o%Zi#p%Zi#q%Zi#r%Zi#t%Zi#v%Zi#x%Zi#y%Zi#|%Zi(X%Zi(h%Zi(p%Zi!Y%Zi!Z%Zi~O(p%POP%]iZ%]ij%]in%]i|%]i}%]i!P%]i!h%]i!i%]i!k%]i!o%]i#j%]i#k%]i#l%]i#m%]i#n%]i#o%]i#p%]i#q%]i#r%]i#t%]i#v%]i#x%]i#y%]i#|%]i(X%]i(h%]i(o%]i!Y%]i!Z%]i~O#|$ky!Y$ky!Z$ky~P#C|O#|#_y!Y#_y!Z#_y~P#C|O!d#uO!Y'^q!j'^q~O!Y/cO!j(uy~O!V'`q!Y'`q~P#-]O!V9wO~P#-]O!Y0rO!Z)Oy~O!Y5UO!Z({q~O![1[O%c:OO~O!j:RO~O!['ZO%c:WO~OP$wqZ$wqn$wq}$wq!h$wq!i$wq!k$wq!o$wq#j$wq#k$wq#l$wq#m$wq#n$wq#o$wq#p$wq#q$wq#r$wq#t$wq#v$wq#x$wq#y$wq#|$wq(X$wq(h$wq!Y$wq!Z$wq~P&'UO|)zO!P){O(p%POP'caZ'caj'can'ca}'ca!h'ca!i'ca!k'ca!o'ca#j'ca#k'ca#l'ca#m'ca#n'ca#o'ca#p'ca#q'ca#r'ca#t'ca#v'ca#x'ca#y'ca#|'ca(X'ca(h'ca(o'ca!Y'ca!Z'ca~O|)zO!P){OP'eaZ'eaj'ean'ea}'ea!h'ea!i'ea!k'ea!o'ea#j'ea#k'ea#l'ea#m'ea#n'ea#o'ea#p'ea#q'ea#r'ea#t'ea#v'ea#x'ea#y'ea#|'ea(X'ea(h'ea(o'ea(p'ea!Y'ea!Z'ea~OP$yqZ$yqn$yq}$yq!h$yq!i$yq!k$yq!o$yq#j$yq#k$yq#l$yq#m$yq#n$yq#o$yq#p$yq#q$yq#r$yq#t$yq#v$yq#x$yq#y$yq#|$yq(X$yq(h$yq!Y$yq!Z$yq~P&'UOf%_!Z!Y%_!Z#[%_!Z#|%_!Z~P!0}O!Y'iq!Z'iq~P#C|O!Y#d!Z!Z#d!Z~P#C|O#g%_!ZP%_!ZZ%_!Z`%_!Zn%_!Z}%_!Z!Y%_!Z!h%_!Z!i%_!Z!k%_!Z!o%_!Z#j%_!Z#k%_!Z#l%_!Z#m%_!Z#n%_!Z#o%_!Z#p%_!Z#q%_!Z#r%_!Z#t%_!Z#v%_!Z#x%_!Z#y%_!Z'r%_!Z(X%_!Z(h%_!Z!j%_!Z!V%_!Z'p%_!Z#[%_!Zr%_!Z![%_!Z%c%_!Z!d%_!Z~P#-]OP%_!ZZ%_!Zn%_!Z}%_!Z!h%_!Z!i%_!Z!k%_!Z!o%_!Z#j%_!Z#k%_!Z#l%_!Z#m%_!Z#n%_!Z#o%_!Z#p%_!Z#q%_!Z#r%_!Z#t%_!Z#v%_!Z#x%_!Z#y%_!Z#|%_!Z(X%_!Z(h%_!Z!Y%_!Z!Z%_!Z~P&'UOr(]X~P1qO'|!lO~P!*fO!VeX!YeX#[eX~P'#`OP[XZ[Xn[X|[X}[X!P[X!Y[X!YeX!h[X!i[X!k[X!o[X#[[X#[eX#geX#j[X#k[X#l[X#m[X#n[X#o[X#p[X#q[X#r[X#t[X#v[X#x[X#y[X$O[X(X[X(h[X(o[X(p[X~O!deX!j[X!jeX(heX~P'ASOP:cOQ:cORfOc<[Od!iOlkOn:cOokOpkOvkOx:cOz:cO!PWO!TkO!UkO![XO!f:fO!kZO!n:cO!o:cO!p:cO!r:gO!t:jO!w!hO$T!kO'{)YO'}TO(QUO(XVO(g[O(t<YO~O!Y:wO!Z$ma~Og%VOl%WOn$tOo$sOp$sOv%XOx%YOz;RO!P${O![$|O!f<aO!k$xO#f;XO$T%^O$o;TO$q;VO$t%_O'{(pO'}TO(QUO(X$uO(o$}O(p%PO~O#s)aO~P'ExO!Z[X!ZeX~P'ASO#g:kO~O!d#uO#g:kO~O#[:{O~O#r:pO~O#[;ZO!Y(mX!Z(mX~O#[:{O!Y(kX!Z(kX~O#g;[O~Of;^O~P!0}O#g;cO~O#g;dO~O!d#uO#g;eO~O!d#uO#g;[O~O#|;fO~P#C|O#g;gO~O#g;hO~O#g;mO~O#g;nO~O#g;oO~O#g;pO~O#|;qO~P!0}O#|;rO~P!0}O!i#P#Q#S#T#W#e#f#q(t$o$q$t%W%b%c%d%k%m%p%q%s%u~'vS#k!U't'|#lo#j#mn|'u$Y'u'{$[([~",goto:"$2p)SPPPPP)TPP)WP)iP*x.|PPPP5pPP6WPP<S?gP?zP?zPPP?zPAxP?zP?zP?zPA|PPBRPBlPGdPPPGhPPPPGhJiPPPJoKjPGhPMxPPPP!!WGhPPPGhPGhP!$fGhP!'z!(|!)VP!)y!)}!)yPPPPP!-Y!(|PP!-v!.pP!1dGhGh!1i!4s!9Y!9Y!=OPPP!=VGhPPPPPPPPPPP!@dP!AqPPGh!CSPGhPGhGhGhGhPGh!DfP!GnP!JrP!Jv!KQ!KU!KUP!GkP!KY!KYP!N^P!NbGhGh!Nh##k?zP?zP?z?zP#$v?z?z#'O?z#)k?z#+m?z?z#,[#.f#.f#.j#.r#.f#.zP#.fP?z#/d?z#3R?z?z5pPPP#6vPPP#7a#7aP#7aP#7w#7aPP#7}P#7tP#7t#8b#7t#8|#9S5m)W#9V)WP#9^#9^#9^P)WP)WP)WP)WPP)WP#9d#9gP#9g)WP#9kP#9nP)WP)WP)WP)WP)WP)W)WPP#9t#9z#:V#:]#:c#:i#:o#:}#;T#;Z#;e#;k#;u#<U#<[#<|#=`#=f#=l#=z#>a#@O#@^#@d#Ax#BW#Cr#DQ#DW#D^#Dd#Dn#Dt#Dz#EU#Eh#EnPPPPPPPPPP#EtPPPPPPP#Fi#Ip#KP#KW#K`PPPP$!d$%Z$+r$+u$+x$,q$,t$,w$-O$-WPP$-^$-b$.Y$/X$/]$/qPP$/u$/{$0PP$0S$0W$0Z$1P$1h$2P$2T$2W$2Z$2a$2d$2h$2lR!{RoqOXst!Z#c%j&m&o&p&r,h,m1w1zY!uQ'Z-Y1[5]Q%pvQ%xyQ&P|Q&e!VS'R!e-QQ'a!iS'g!r!xS*c$|*hQ+f%yQ+s&RQ,X&_Q-W'YQ-b'bQ-j'hQ/|*jQ1f,YR;Y:g%OdOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S,e,h,m-^-f-t-z.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3Z5Y5d5t5u5x6]7w7|8]8gS#p]:d!r)[$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q*u%ZQ+k%{Q,Z&bQ,b&jQ.c;QQ0h+^Q0l+`Q0w+lQ1n,`Q2{.[Q4v0rQ5k1gQ6i3PQ6u;RQ7h4wR8m6j&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]t!nQ!r!u!x!y'R'Y'Z'g'h'i-Q-W-Y-j1[5]5_$v$si#u#w$c$d$x${%O%Q%[%]%a)u){)}*P*R*Y*`*p*q+]+`+w+z.Z.i/Z/j/k/m0Q0S0^1R1U1^3O3x4S4[4f4n4p5c6g7T7^7y8j8w9[9n:O:W:y:z:|:};O;P;S;T;U;V;W;X;_;`;a;b;c;d;g;h;i;j;k;l;m;n;q;r<Y<b<c<f<gQ&S|Q'P!eS'V%f-TQ+k%{Q,Z&bQ0]*yQ0w+lQ0|+rQ1m,_Q1n,`Q4v0rQ5P1OQ5k1gQ5n1iQ5o1lQ7h4wQ7k4|Q8U5qQ9V7lR9b8RrnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zR,]&f&v^OPXYstuvwz!Z!`!g!j!o#R#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O']'m(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<[<][#[WZ#V#Y'S'}!S%gm#g#h#k%b%e(W(b(c(d+Q+R+T,d,z-x.O.P.Q.S2P2w2x6R6dQ%sxQ%wyS%||&RQ&Y!TQ'^!hQ'`!iQ(k#rS*V$x*ZS+e%x%yQ+i%{Q,S&]Q,W&_S-a'a'bQ.^(lQ/g*WQ0p+fQ0v+lQ0x+mQ0{+qQ1a,TS1e,X,YQ2i-bQ3y/cQ4u0rQ4y0uQ5O0}Q5j1fQ7Q3zQ7g4wQ7j4{Q9R7fR9y9S!O$zi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<c!S%uy!i!t%w%x%y'Q'`'a'b'f'p*b+e+f,}-a-b-i/t0p2b2i2p4^Q+_%sQ+x&VQ+{&WQ,V&_Q.](kQ1`,SU1d,W,X,YQ3Q.^Q5e1aS5i1e1fQ8Q5j#W<^#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<go<_:y:z:};P;T;V;X;`;b;d;h;j;l;n;rW%Ti%V*r<YS&V!Q&dQ&W!RQ&X!SR+v&T$w%Si#u#w$c$d$x${%O%Q%[%]%a)u){)}*P*R*Y*`*p*q+]+`+w+z.Z.i/Z/j/k/m0Q0S0^1R1U1^3O3x4S4[4f4n4p5c6g7T7^7y8j8w9[9n:O:W:y:z:|:};O;P;S;T;U;V;W;X;_;`;a;b;c;d;g;h;i;j;k;l;m;n;q;r<Y<b<c<f<gT)v$u)wV*v%Z;Q;RU'V!e%f-TS(y#y#zQ+p&OS.V(g(hQ1V+|Q4g0ZR7p5U&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]$i$`c#X#d%n%o%q'|(S(n(u(})O)P)Q)R)S)T)U)V)W)X)Z)^)b)l+Z+o-O-m-r-w-y.h.n.r.t.u.v/V0_2W2Z2k2r3Y3_3`3a3b3c3d3e3f3g3h3i3j3k3n3o3t4k4s6U6[6a6o6p6y6z7r8a8e8n8t8u9k9{:S:e<PT#SV#T&}kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q'T!eR2^-Qv!nQ!e!r!u!x!y'R'Y'Z'g'h'i-Q-W-Y-j1[5]5_S*b$|*hS/t*c*jQ/}*kQ1X,OQ4^/|R4a0PnqOXst!Z#c%j&m&o&p&r,h,m1w1zQ&t!^Q'q!wS(m#t:kQ+c%vQ,Q&YQ,R&[Q-_'_Q-l'jS.g(r;[S0`+O;eQ0n+dQ1Z,PQ2O,oQ2Q,pQ2Y,{Q2g-`Q2j-dS4l0a;oQ4q0oS4t0q;pQ6T2[Q6X2hQ6^2oQ7e4rQ8b6VQ8c6YQ8f6_R9h8_$d$_c#X#d%o%q'|(S(n(u(})O)P)Q)R)S)T)U)V)W)X)Z)^)b)l+Z+o-O-m-r-w-y.h.n.r.u.v/V0_2W2Z2k2r3Y3_3`3a3b3c3d3e3f3g3h3i3j3k3n3o3t4k4s6U6[6a6o6p6y6z7r8a8e8n8t8u9k9{:S:e<PS(j#o'dU*o%R(q3mS+Y%n.tQ2|0hQ6f2{Q8l6iR9o8m$d$^c#X#d%o%q'|(S(n(u(})O)P)Q)R)S)T)U)V)W)X)Z)^)b)l+Z+o-O-m-r-w-y.h.n.r.u.v/V0_2W2Z2k2r3Y3_3`3a3b3c3d3e3f3g3h3i3j3k3n3o3t4k4s6U6[6a6o6p6y6z7r8a8e8n8t8u9k9{:S:e<PS(i#o'dS({#z$_S+X%n.tS.W(h(jQ.w)]Q0e+YR2y.X&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]S#p]:dQ&o!XQ&p!YQ&r![Q&s!]R1v,kQ'[!hQ+[%sQ-]'^S.Y(k+_Q2e-[W2}.].^0g0iQ6W2fU6e2z2|3QS8i6f6hS9m8k8lS:U9l9oQ:^:VR:a:_U!vQ'Z-YT5Z1[5]!Q_OXZ`st!V!Z#c#g%b%j&d&f&m&o&p&r(d,h,m.P1w1z]!pQ!r'Z-Y1[5]T#p]:d%Y{OPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gS(y#y#zS.V(g(h!s;v$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Y!tQ'Z-Y1[5]Q'f!rS'p!u!xS'r!y5_S-i'g'hQ-k'iR2p-jQ'o!tS(`#f1qS-h'f'rQ/f*VQ/r*bQ2q-kQ4O/gS4X/s/}Q7P3yS7[4_4aQ8y7QR9Q7_Q#vbQ'n!tS(_#f1qS(a#l*}Q+P%cQ+a%tQ+g%zU-g'f'o'rQ-{(`Q/e*VQ/q*bQ/w*eQ0m+bQ1b,US2n-h-kQ2v.TS3}/f/gS4W/r/}Q4Z/vQ4]/xQ5g1cQ6`2qQ7O3yQ7S4OS7W4X4aQ7]4`Q8O5hS8x7P7QQ8|7XQ9O7[Q9_8PQ9u8yQ9v8}Q9x9QQ:Q9`Q:Y9wQ;y;tQ<U;}R<V<OV!vQ'Z-Y%YaOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gS#vz!j!r;s$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]R;y<[%YbOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gQ%cj!S%ty!i!t%w%x%y'Q'`'a'b'f'p*b+e+f,}-a-b-i/t0p2b2i2p4^S%zz!jQ+b%uQ,U&_W1c,V,W,X,YU5h1d1e1fS8P5i5jQ9`8Q!r;t$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q;}<ZR<O<[$|eOPXYstuvw!Z!`!g!o#R#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&m&o&p&r&v'O']'m(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8gY#aWZ#V#Y'}!S%gm#g#h#k%b%e(W(b(c(d+Q+R+T,d,z-x.O.P.Q.S2P2w2x6R6dQ,c&j!p;u$[$m)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]R;x'SS'W!e%fR2`-T%OdOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S,e,h,m-^-f-t-z.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3Z5Y5d5t5u5x6]7w7|8]8g!r)[$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]Q,b&jQ0h+^Q2{.[Q6i3PR8m6j!b$Uc#X%n'|(S(n(u)W)X)^)b+o-m-r-w-y.h.n/V0_2k2r3Y3k4k4s6[6a6o8e9k:e!P:r)Z)l-O.t2W2Z3_3i3j3n3t6U6p6y6z7r8a8n8t8u9{:S<P!f$Wc#X%n'|(S(n(u)T)U)W)X)^)b+o-m-r-w-y.h.n/V0_2k2r3Y3k4k4s6[6a6o8e9k:e!T:t)Z)l-O.t2W2Z3_3f3g3i3j3n3t6U6p6y6z7r8a8n8t8u9{:S<P!^$[c#X%n'|(S(n(u)^)b+o-m-r-w-y.h.n/V0_2k2r3Y3k4k4s6[6a6o8e9k:eQ3x/az<])Z)l-O.t2W2Z3_3n3t6U6p6y6z7r8a8n8t8u9{:S<PQ<b<dR<c<e&|kOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]S$nh$oR3q.z'TgOPWXYZhstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m$o%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.z.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]T$jf$pQ$hfS)e$k)iR)q$pT$if$pT)g$k)i'ThOPWXYZhstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$[$a$e$m$o%j%p%}&f&i&j&m&o&p&r&v'O'S']'m'}(P(V(^(r(v(z)n)y+O+S+^,e,h,m,y,|-^-f-t-z.[.l.s.z.{0[0a0q1_1o1p1r1t1w1z1|2]2m2s3P3Z3p5W5Y5d5t5u5x6S6]6j7w7|8]8g9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]T$nh$oQ$qhR)p$o%YjOPWXYZstuvw!Z!`!g!o#R#V#Y#c#n#t#x#{$O$P$Q$R$S$T$U$V$W$X$Y$a$e%j%p%}&f&i&j&m&o&p&r&v'O']'m'}(P(V(^(r(v(z)y+O+S+^,e,h,m-^-f-t-z.[.l.s0[0a0q1_1o1p1r1t1w1z1|2m2s3P3Z5Y5d5t5u5x6]6j7w7|8]8g!s<Z$[$m'S)n,y,|.{2]3p5W6S9W9i:c:f:g:j:k:l:m:n:o:p:q:r:s:t:u:v:w:{;Y;Z;[;^;e;f;o;p<]#clOPXZst!Z!`!o#R#c#n#{$m%j&f&i&j&m&o&p&r&v'O'](z)n+S+^,e,h,m-^.[.{0[1_1o1p1r1t1w1z1|3P3p5Y5d5t5u5x6j7w7|8]!O%Ri#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<c#W(q#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gQ*z%_Q/W)zo3m:y:z:};P;T;V;X;`;b;d;h;j;l;n;r!O$yi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<cQ*[$zS*e$|*hQ*{%`Q/x*f#W;{#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gn;|:y:z:};P;T;V;X;`;b;d;h;j;l;n;rQ<Q<^Q<R<_Q<S<`R<T<a!O%Ri#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<c#W(q#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<go3m:y:z:};P;T;V;X;`;b;d;h;j;l;n;rnoOXst!Z#c%j&m&o&p&r,h,m1w1zQ*_${Q,v&yQ,w&{R4R/k$v%Si#u#w$c$d$x${%O%Q%[%]%a)u){)}*P*R*Y*`*p*q+]+`+w+z.Z.i/Z/j/k/m0Q0S0^1R1U1^3O3x4S4[4f4n4p5c6g7T7^7y8j8w9[9n:O:W:y:z:|:};O;P;S;T;U;V;W;X;_;`;a;b;c;d;g;h;i;j;k;l;m;n;q;r<Y<b<c<f<gQ+y&WQ1T+{Q5S1SR7o5TT*g$|*hS*g$|*hT5[1[5]S/v*d5YT4`0O7wQ+a%tQ/w*eQ0m+bQ1b,UQ5g1cQ8O5hQ9_8PR:Q9`!O%Oi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<cr)}$v(s*O*n*|/i0U0V3W4P4j6}7`9t;z<W<XS0Q*m0R#W:|#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gn:}:y:z:};P;T;V;X;`;b;d;h;j;l;n;r!^;_(o)`*U*^._.b.f/S/X/a/n0f1Q1S3T4Q4U5R5T6k6n7U7Y7b7d8{9P:X<d<e`;`3l6q6t6x8o9p9s:bS;i.a3UT;j6s8r!O%Qi#w%O%Q%[%]%a)}*P*Y*p*q.i/j0Q0S0^3x4f8w<Y<b<cv*P$v(s*Q*m*|/]/i0U0V3W4P4b4j6}7`9t;z<W<XS0S*n0T#W;O#u$c$d$x${)u){*R*`+]+`+w+z.Z/Z/k/m1R1U1^3O4S4[4n4p5c6g7T7^7y8j9[9n:O:W:|;O;S;U;W;_;a;c;g;i;k;m;q<f<gn;P:y:z:};P;T;V;X;`;b;d;h;j;l;n;r!b;a(o)`*U*^.`.a.f/S/X/a/n0f1Q1S3R3T4Q4U5R5T6k6l6n7U7Y7b7d8{9P:X<d<ed;b3l6r6s6x8o8p9p9q9s:bS;k.b3VT;l6t8srnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zQ&a!UR,e&jrnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zR&a!UQ+}&XR1P+vsnOXst!V!Z#c%j&d&m&o&p&r,h,m1w1zQ1],SS5b1`1aU7x5`5a5eS9Z7z7{S9|9Y9]Q:Z9}R:`:[Q&h!VR,^&dR5n1iS%||&RR0x+mQ&m!WR,h&nR,n&sT1x,m1zR,r&tQ,q&tR2R,rQ't!zR-n'tSsOtQ#cXT%ms#cQ!}TR'v!}Q#QUR'x#QQ)w$uR/T)wQ#TVR'z#TQ#WWU(Q#W(R-uQ(R#XR-u(SQ-R'TR2_-RQ.j(sR3X.jQ.m(uS3[.m3]R3].nQ-Y'ZR2c-YY!rQ'Z-Y1[5]R'e!rS#^W%eU(X#^(Y-vQ(Y#_R-v(TQ-U'WR2a-Ut`OXst!V!Z#c%j&d&f&m&o&p&r,h,m1w1zS#gZ%bU#q`#g.PR.P(dQ(e#iQ-|(aW.U(e-|2t6bQ2t-}R6b2uQ)i$kR.|)iQ$ohR)o$oQ$bcU)_$b-q:xQ-q:eR:x)lQ/d*VW3{/d3|7R8zU3|/e/f/gS7R3}4OR8z7S$X)|$v(o(s)`*U*^*m*n*w*x*|.a.b.d.e.f/S/X/]/_/a/i/n0U0V0f1Q1S3R3S3T3W3l4P4Q4U4b4d4j5R5T6k6l6m6n6s6t6v6w6x6}7U7Y7`7b7d8o8p8q8{9P9p9q9r9s9t:X:b;z<W<X<d<eQ/l*^U4T/l4V7VQ4V/nR7V4UQ*h$|R/z*hr*O$v(s*m*n*|/i0U0V3W4P4j6}7`9t;z<W<X!^._(o)`*U*^.a.b.f/S/X/a/n0f1Q1S3T4Q4U5R5T6k6n7U7Y7b7d8{9P:X<d<eU/^*O._6qa6q3l6s6t6x8o9p9s:bQ0R*mQ3U.aU4c0R3U8rR8r6sv*Q$v(s*m*n*|/]/i0U0V3W4P4b4j6}7`9t;z<W<X!b.`(o)`*U*^.a.b.f/S/X/a/n0f1Q1S3R3T4Q4U5R5T6k6l6n7U7Y7b7d8{9P:X<d<eU/`*Q.`6re6r3l6s6t6x8o8p9p9q9s:bQ0T*nQ3V.bU4e0T3V8sR8s6tQ*s%UR0X*sQ4o0fR7c4oQ+U%hR0d+UQ5V1VS7q5V9XR9X7rQ,P&YR1Y,PQ5]1[R7u5]Q1h,ZS5l1h8SR8S5nQ0s+iW4x0s4z7i9TQ4z0vQ7i4yR9T7jQ+n%|R0y+nQ1z,mR5|1zYrOXst#cQ&q!ZQ+W%jQ,g&mQ,i&oQ,j&pQ,l&rQ1u,hS1x,m1zR5{1wQ%lpQ&u!_Q&x!aQ&z!bQ&|!cQ'l!tQ+V%iQ+c%vQ+u&SQ,]&hQ,t&wW-e'f'n'o'rQ-l'jQ/y*gQ0n+dS1k,^,aQ2S,sQ2T,vQ2U,wQ2j-dW2l-g-h-k-mQ4q0oQ4}0|Q5Q1QQ5f1bQ5p1mQ5z1vU6Z2k2n2qQ6^2oQ7e4rQ7m5PQ7n5RQ7t5[Q7}5gQ8T5oS8d6[6`Q8f6_Q9U7kQ9^8OQ9c8UQ9j8eQ9z9VQ:P9_Q:T9kR:]:QQ%vyQ'_!iQ'j!tU+d%w%x%yQ,{'QU-`'`'a'bS-d'f'pQ/p*bS0o+e+fQ2[,}S2h-a-bQ2o-iQ4Y/tQ4r0pQ6V2bQ6Y2iQ6_2pR7Z4^S$wi<YR*t%VU%Ui%V<YR0W*rQ$viS(o#u+`Q(s#wS)`$c$dQ*U$xQ*^${Q*m%OQ*n%QQ*w%[Q*x%]Q*|%aQ.a:|Q.b;OQ.d;SQ.e;UQ.f;WQ/S)uS/X){/ZQ/])}Q/_*PQ/a*RQ/i*YQ/n*`Q0U*pQ0V*qh0f+].Z1^3O5c6g7y8j9[9n:O:WQ1Q+wQ1S+zQ3R;_Q3S;aQ3T;cQ3W.iS3l:y:zQ4P/jQ4Q/kQ4U/mQ4b0QQ4d0SQ4j0^Q5R1RQ5T1UQ6k;gQ6l;iQ6m;kQ6n;mQ6s:}Q6t;PQ6v;TQ6w;VQ6x;XQ6}3xQ7U4SQ7Y4[Q7`4fQ7b4nQ7d4pQ8o;dQ8p;`Q8q;bQ8{7TQ9P7^Q9p;hQ9q;jQ9r;lQ9s;nQ9t8wQ:X;qQ:b;rQ;z<YQ<W<bQ<X<cQ<d<fR<e<gnpOXst!Z#c%j&m&o&p&r,h,m1w1zQ!fPS#eZ#nQ&w!`U'c!o5Y7wQ'y#RQ(|#{Q)m$mS,a&f&iQ,f&jQ,s&vQ,x'OQ-[']Q.p(zQ/Q)nQ0b+SQ0i+^Q1s,eQ2f-^Q2|.[Q3s.{Q4h0[Q5a1_Q5r1oQ5s1pQ5w1rQ5y1tQ6O1|Q6f3PQ6{3pQ7{5dQ8X5tQ8Y5uQ8[5xQ8l6jQ9]7|R9g8]#WcOPXZst!Z!`!o#c#n#{%j&f&i&j&m&o&p&r&v'O'](z+S+^,e,h,m-^.[0[1_1o1p1r1t1w1z1|3P5Y5d5t5u5x6j7w7|8]Q#XWQ#dYQ%nuQ%ovS%qw!gS'|#V(PQ(S#YQ(n#tQ(u#xQ(}$OQ)O$PQ)P$QQ)Q$RQ)R$SQ)S$TQ)T$UQ)U$VQ)V$WQ)W$XQ)X$YQ)Z$[Q)^$aQ)b$eW)l$m)n.{3pQ+Z%pQ+o%}S-O'S2]Q-m'mS-r'}-tQ-w(VQ-y(^Q.h(rQ.n(vQ.r:cQ.t:fQ.u:gQ.v:jQ/V)yQ0_+OQ2W,yQ2Z,|Q2k-fQ2r-zQ3Y.lQ3_:kQ3`:lQ3a:mQ3b:nQ3c:oQ3d:pQ3e:qQ3f:rQ3g:sQ3h:tQ3i:uQ3j:vQ3k.sQ3n:{Q3o;YQ3t:wQ4k0aQ4s0qQ6U;ZQ6[2mQ6a2sQ6o3ZQ6p;[Q6y;^Q6z;eQ7r5WQ8a6SQ8e6]Q8n;fQ8t;oQ8u;pQ9k8gQ9{9WQ:S9iQ:e#RR<P<]R#ZWR'U!eY!tQ'Z-Y1[5]S'Q!e-QQ'f!rS'p!u!xS'r!y5_S,}'R'YS-i'g'hQ-k'iQ2b-WR2p-jR(t#wR(w#xQ!fQT-X'Z-Y]!qQ!r'Z-Y1[5]Q#o]R'd:dT#jZ%bS#iZ%bS%hm,dU(a#g#h#kS-}(b(cQ.R(dQ0c+TQ2u.OU2v.P.Q.SS6c2w2xR8h6d`#]W#V#Y%e'}(W+Q-xr#fZm#g#h#k%b(b(c(d+T.O.P.Q.S2w2x6dQ1q,dQ2X,zQ6Q2PQ8`6RT;w'S+RT#`W%eS#_W%eS(O#V(WS(T#Y+QS-P'S+RT-s'}-xT'X!e%fQ$kfR)s$pT)h$k)iR3r.zT*X$x*ZR*a${Q0g+]Q2z.ZQ5`1^Q6h3OQ7z5cQ8k6gQ9Y7yQ9l8jQ9}9[Q:V9nQ:[:OR:_:WnqOXst!Z#c%j&m&o&p&r,h,m1w1zQ&g!VR,]&dtmOXst!U!V!Z#c%j&d&m&o&p&r,h,m1w1zR,d&jT%im,dR1W+|R,[&bQ&Q|R+t&RR+j%{T&k!W&nT&l!W&nT1y,m1z",nodeNames:"⚠ ArithOp ArithOp JSXStartTag LineComment BlockComment Script Hashbang ExportDeclaration export Star as VariableName String Escape from ; default FunctionDeclaration async function VariableDefinition > < TypeParamList TypeDefinition extends ThisType this LiteralType ArithOp Number BooleanLiteral TemplateType InterpolationEnd Interpolation InterpolationStart NullType null VoidType void TypeofType typeof MemberExpression . ?. PropertyName [ TemplateString Escape Interpolation super RegExp ] ArrayExpression Spread , } { ObjectExpression Property async get set PropertyDefinition Block : NewExpression new TypeArgList CompareOp < ) ( ArgList UnaryExpression delete LogicOp BitOp YieldExpression yield AwaitExpression await ParenthesizedExpression ClassExpression class ClassBody MethodDeclaration Decorator @ MemberExpression PrivatePropertyName CallExpression declare Privacy static abstract override PrivatePropertyDefinition PropertyDeclaration readonly accessor Optional TypeAnnotation Equals StaticBlock FunctionExpression ArrowFunction ParamList ParamList ArrayPattern ObjectPattern PatternProperty Privacy readonly Arrow MemberExpression BinaryExpression ArithOp ArithOp ArithOp ArithOp BitOp CompareOp instanceof satisfies in const CompareOp BitOp BitOp BitOp LogicOp LogicOp ConditionalExpression LogicOp LogicOp AssignmentExpression UpdateOp PostfixExpression CallExpression TaggedTemplateExpression DynamicImport import ImportMeta JSXElement JSXSelfCloseEndTag JSXSelfClosingTag JSXIdentifier JSXBuiltin JSXIdentifier JSXNamespacedName JSXMemberExpression JSXSpreadAttribute JSXAttribute JSXAttributeValue JSXEscape JSXEndTag JSXOpenTag JSXFragmentTag JSXText JSXEscape JSXStartCloseTag JSXCloseTag PrefixCast ArrowFunction TypeParamList SequenceExpression KeyofType keyof UniqueType unique ImportType InferredType infer TypeName ParenthesizedType FunctionSignature ParamList NewSignature IndexedType TupleType Label ArrayType ReadonlyType ObjectType MethodType PropertyType IndexSignature PropertyDefinition CallSignature TypePredicate is NewSignature new UnionType LogicOp IntersectionType LogicOp ConditionalType ParameterizedType ClassDeclaration abstract implements type VariableDeclaration let var using TypeAliasDeclaration InterfaceDeclaration interface EnumDeclaration enum EnumBody NamespaceDeclaration namespace module AmbientDeclaration declare GlobalDeclaration global ClassDeclaration ClassBody AmbientFunctionDeclaration ExportGroup VariableName VariableName ImportDeclaration ImportGroup ForStatement for ForSpec ForInSpec ForOfSpec of WhileStatement while WithStatement with DoStatement do IfStatement if else SwitchStatement switch SwitchBody CaseLabel case DefaultLabel TryStatement try CatchClause catch FinallyClause finally ReturnStatement return ThrowStatement throw BreakStatement break ContinueStatement continue DebuggerStatement debugger LabeledStatement ExpressionStatement SingleExpression SingleClassItem",maxTerm:371,context:aw,nodeProps:[["isolate",-8,4,5,13,33,35,48,50,52,""],["group",-26,8,16,18,65,201,205,209,210,212,215,218,228,230,236,238,240,242,245,251,257,259,261,263,265,267,268,"Statement",-32,12,13,28,31,32,38,48,51,52,54,59,67,75,79,81,83,84,106,107,116,117,134,137,139,140,141,142,144,145,164,165,167,"Expression",-23,27,29,33,37,39,41,168,170,172,173,175,176,177,179,180,181,183,184,185,195,197,199,200,"Type",-3,87,99,105,"ClassItem"],["openedBy",22,"<",34,"InterpolationStart",53,"[",57,"{",72,"(",157,"JSXStartCloseTag"],["closedBy",23,">",36,"InterpolationEnd",47,"]",58,"}",73,")",162,"JSXEndTag"]],propSources:[aC],skippedNodes:[0,4,5,271],repeatNodeCount:37,tokenData:"$Fj(CSR!bOX%ZXY+gYZ-yZ[+g[]%Z]^.c^p%Zpq+gqr/mrs3cst:_tuEruvJSvwLkwx! Yxy!'iyz!(sz{!)}{|!,q|}!.O}!O!,q!O!P!/Y!P!Q!9j!Q!R#8g!R![#:v![!]#Gv!]!^#IS!^!_#J^!_!`#Ns!`!a$#_!a!b$(l!b!c$,k!c!}Er!}#O$-u#O#P$/P#P#Q$4h#Q#R$5r#R#SEr#S#T$7P#T#o$8Z#o#p$<k#p#q$=a#q#r$>q#r#s$?}#s$f%Z$f$g+g$g#BYEr#BY#BZ$AX#BZ$ISEr$IS$I_$AX$I_$I|Er$I|$I}$Dd$I}$JO$Dd$JO$JTEr$JT$JU$AX$JU$KVEr$KV$KW$AX$KW&FUEr&FU&FV$AX&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$AX?HUOEr(n%d_$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&j&hT$f&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c&j&zP;=`<%l&c'|'U]$f&j(R!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!b(SU(R!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!b(iP;=`<%l'}'|(oP;=`<%l&}'[(y]$f&j(OpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rp)wU(OpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)rp*^P;=`<%l)r'[*dP;=`<%l(r#S*nX(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g#S+^P;=`<%l*g(n+dP;=`<%l%Z(CS+rq$f&j(Op(R!b't(;dOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p$f%Z$f$g+g$g#BY%Z#BY#BZ+g#BZ$IS%Z$IS$I_+g$I_$JT%Z$JT$JU+g$JU$KV%Z$KV$KW+g$KW&FU%Z&FU&FV+g&FV;'S%Z;'S;=`+a<%l?HT%Z?HT?HU+g?HUO%Z(CS.ST(P#S$f&j'u(;dO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c(CS.n_$f&j(Op(R!b'u(;dOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#`/x`$f&j!o$Ip(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S1V`#t$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`2X!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S2d_#t$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/|3l_'}$(n$f&j(R!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k(^4r_$f&j(R!bOY4kYZ5qZr4krs7nsw4kwx5qx!^4k!^!_8p!_#O4k#O#P5q#P#o4k#o#p8p#p;'S4k;'S;=`:X<%lO4k&z5vX$f&jOr5qrs6cs!^5q!^!_6y!_#o5q#o#p6y#p;'S5q;'S;=`7h<%lO5q&z6jT$a`$f&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c`6|TOr6yrs7]s;'S6y;'S;=`7b<%lO6y`7bO$a``7eP;=`<%l6y&z7kP;=`<%l5q(^7w]$a`$f&j(R!bOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!r8uZ(R!bOY8pYZ6yZr8prs9hsw8pwx6yx#O8p#O#P6y#P;'S8p;'S;=`:R<%lO8p!r9oU$a`(R!bOY'}Zw'}x#O'}#P;'S'};'S;=`(f<%lO'}!r:UP;=`<%l8p(^:[P;=`<%l4k#%|:hh$f&j(Op(R!bOY%ZYZ&cZq%Zqr<Srs&}st%ZtuCruw%Zwx(rx!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr(r<__VS$f&j(Op(R!bOY<SYZ&cZr<Srs=^sw<Swx@nx!^<S!^!_Bm!_#O<S#O#P>`#P#o<S#o#pBm#p;'S<S;'S;=`Cl<%lO<S(Q=g]VS$f&j(R!bOY=^YZ&cZw=^wx>`x!^=^!^!_?q!_#O=^#O#P>`#P#o=^#o#p?q#p;'S=^;'S;=`@h<%lO=^&n>gXVS$f&jOY>`YZ&cZ!^>`!^!_?S!_#o>`#o#p?S#p;'S>`;'S;=`?k<%lO>`S?XSVSOY?SZ;'S?S;'S;=`?e<%lO?SS?hP;=`<%l?S&n?nP;=`<%l>`!f?xWVS(R!bOY?qZw?qwx?Sx#O?q#O#P?S#P;'S?q;'S;=`@b<%lO?q!f@eP;=`<%l?q(Q@kP;=`<%l=^'`@w]VS$f&j(OpOY@nYZ&cZr@nrs>`s!^@n!^!_Ap!_#O@n#O#P>`#P#o@n#o#pAp#p;'S@n;'S;=`Bg<%lO@ntAwWVS(OpOYApZrAprs?Ss#OAp#O#P?S#P;'SAp;'S;=`Ba<%lOAptBdP;=`<%lAp'`BjP;=`<%l@n#WBvYVS(Op(R!bOYBmZrBmrs?qswBmwxApx#OBm#O#P?S#P;'SBm;'S;=`Cf<%lOBm#WCiP;=`<%lBm(rCoP;=`<%l<S#%|C}i$f&j(g!L^(Op(R!bOY%ZYZ&cZr%Zrs&}st%ZtuCruw%Zwx(rx!Q%Z!Q![Cr![!^%Z!^!_*g!_!c%Z!c!}Cr!}#O%Z#O#P&c#P#R%Z#R#SCr#S#T%Z#T#oCr#o#p*g#p$g%Z$g;'SCr;'S;=`El<%lOCr#%|EoP;=`<%lCr(CSFRk$f&j(Op(R!b$Y#t'{&;d([!LYOY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr+dHRk$f&j(Op(R!b$Y#tOY%ZYZ&cZr%Zrs&}st%ZtuGvuw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Gv![!^%Z!^!_*g!_!c%Z!c!}Gv!}#O%Z#O#P&c#P#R%Z#R#SGv#S#T%Z#T#oGv#o#p*g#p$g%Z$g;'SGv;'S;=`Iv<%lOGv+dIyP;=`<%lGv(CSJPP;=`<%lEr%#SJ_`$f&j(Op(R!b#l$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SKl_$f&j$O$Id(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&COLva(p&;`$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sv%ZvwM{wx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#SNW`$f&j#x$Id(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/|! c_(Q$)`$f&j(OpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b'l!!i_$f&j(OpOY!!bYZ!#hZr!!brs!#hsw!!bwx!$xx!^!!b!^!_!%z!_#O!!b#O#P!#h#P#o!!b#o#p!%z#p;'S!!b;'S;=`!'c<%lO!!b&z!#mX$f&jOw!#hwx6cx!^!#h!^!_!$Y!_#o!#h#o#p!$Y#p;'S!#h;'S;=`!$r<%lO!#h`!$]TOw!$Ywx7]x;'S!$Y;'S;=`!$l<%lO!$Y`!$oP;=`<%l!$Y&z!$uP;=`<%l!#h'l!%R]$a`$f&j(OpOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(r!Q!&PZ(OpOY!%zYZ!$YZr!%zrs!$Ysw!%zwx!&rx#O!%z#O#P!$Y#P;'S!%z;'S;=`!']<%lO!%z!Q!&yU$a`(OpOY)rZr)rs#O)r#P;'S)r;'S;=`*Z<%lO)r!Q!'`P;=`<%l!%z'l!'fP;=`<%l!!b(*Q!'t_!k(!b$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'l!)O_!jM|$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h!*[b$f&j(Op(R!b'|#)d#m$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rxz%Zz{!+d{!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S!+o`$f&j(Op(R!b#j$IdOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&-O!,|`$f&j(Op(R!bn&%`OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&C[!.Z_!Y&;l$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!/ec$f&j(Op(R!b|'<nOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!0p!P!Q%Z!Q![!3Y![!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!0ya$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!2O!P!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z!'d!2Z_!XMt$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!3eg$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!3Y![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S!3Y#S#X%Z#X#Y!4|#Y#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!5Vg$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx{%Z{|!6n|}%Z}!O!6n!O!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!6wc$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l!8_c$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![!8S![!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S!8S#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS!9uf$f&j(Op(R!b#k$IdOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpxz!;Zz{#,f{!P!;Z!P!Q#-{!Q!^!;Z!^!_#'Z!_!`#5k!`!a#7Q!a!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(r!;fb$f&j(Op(R!b!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(Q!<w`$f&j(R!b!USOY!<nYZ&cZw!<nwx!=yx!P!<n!P!Q!Eb!Q!^!<n!^!_!GY!_!}!<n!}#O!Ja#O#P!Dj#P#o!<n#o#p!GY#p;'S!<n;'S;=`!Kj<%lO!<n&n!>Q^$f&j!USOY!=yYZ&cZ!P!=y!P!Q!>|!Q!^!=y!^!_!@Y!_!}!=y!}#O!Bw#O#P!Dj#P#o!=y#o#p!@Y#p;'S!=y;'S;=`!E[<%lO!=y&n!?Ta$f&j!USO!^&c!_#Z&c#Z#[!>|#[#]&c#]#^!>|#^#a&c#a#b!>|#b#g&c#g#h!>|#h#i&c#i#j!>|#j#m&c#m#n!>|#n#o&c#p;'S&c;'S;=`&w<%lO&cS!@_X!USOY!@YZ!P!@Y!P!Q!@z!Q!}!@Y!}#O!Ac#O#P!Bb#P;'S!@Y;'S;=`!Bq<%lO!@YS!APU!US#Z#[!@z#]#^!@z#a#b!@z#g#h!@z#i#j!@z#m#n!@zS!AfVOY!AcZ#O!Ac#O#P!A{#P#Q!@Y#Q;'S!Ac;'S;=`!B[<%lO!AcS!BOSOY!AcZ;'S!Ac;'S;=`!B[<%lO!AcS!B_P;=`<%l!AcS!BeSOY!@YZ;'S!@Y;'S;=`!Bq<%lO!@YS!BtP;=`<%l!@Y&n!B|[$f&jOY!BwYZ&cZ!^!Bw!^!_!Ac!_#O!Bw#O#P!Cr#P#Q!=y#Q#o!Bw#o#p!Ac#p;'S!Bw;'S;=`!Dd<%lO!Bw&n!CwX$f&jOY!BwYZ&cZ!^!Bw!^!_!Ac!_#o!Bw#o#p!Ac#p;'S!Bw;'S;=`!Dd<%lO!Bw&n!DgP;=`<%l!Bw&n!DoX$f&jOY!=yYZ&cZ!^!=y!^!_!@Y!_#o!=y#o#p!@Y#p;'S!=y;'S;=`!E[<%lO!=y&n!E_P;=`<%l!=y(Q!Eki$f&j(R!b!USOY&}YZ&cZw&}wx&cx!^&}!^!_'}!_#O&}#O#P&c#P#Z&}#Z#[!Eb#[#]&}#]#^!Eb#^#a&}#a#b!Eb#b#g&}#g#h!Eb#h#i&}#i#j!Eb#j#m&}#m#n!Eb#n#o&}#o#p'}#p;'S&};'S;=`(l<%lO&}!f!GaZ(R!b!USOY!GYZw!GYwx!@Yx!P!GY!P!Q!HS!Q!}!GY!}#O!Ic#O#P!Bb#P;'S!GY;'S;=`!JZ<%lO!GY!f!HZb(R!b!USOY'}Zw'}x#O'}#P#Z'}#Z#[!HS#[#]'}#]#^!HS#^#a'}#a#b!HS#b#g'}#g#h!HS#h#i'}#i#j!HS#j#m'}#m#n!HS#n;'S'};'S;=`(f<%lO'}!f!IhX(R!bOY!IcZw!Icwx!Acx#O!Ic#O#P!A{#P#Q!GY#Q;'S!Ic;'S;=`!JT<%lO!Ic!f!JWP;=`<%l!Ic!f!J^P;=`<%l!GY(Q!Jh^$f&j(R!bOY!JaYZ&cZw!Jawx!Bwx!^!Ja!^!_!Ic!_#O!Ja#O#P!Cr#P#Q!<n#Q#o!Ja#o#p!Ic#p;'S!Ja;'S;=`!Kd<%lO!Ja(Q!KgP;=`<%l!Ja(Q!KmP;=`<%l!<n'`!Ky`$f&j(Op!USOY!KpYZ&cZr!Kprs!=ys!P!Kp!P!Q!L{!Q!^!Kp!^!_!Ns!_!}!Kp!}#O##z#O#P!Dj#P#o!Kp#o#p!Ns#p;'S!Kp;'S;=`#%T<%lO!Kp'`!MUi$f&j(Op!USOY(rYZ&cZr(rrs&cs!^(r!^!_)r!_#O(r#O#P&c#P#Z(r#Z#[!L{#[#](r#]#^!L{#^#a(r#a#b!L{#b#g(r#g#h!L{#h#i(r#i#j!L{#j#m(r#m#n!L{#n#o(r#o#p)r#p;'S(r;'S;=`*a<%lO(rt!NzZ(Op!USOY!NsZr!Nsrs!@Ys!P!Ns!P!Q# m!Q!}!Ns!}#O#!|#O#P!Bb#P;'S!Ns;'S;=`##t<%lO!Nst# tb(Op!USOY)rZr)rs#O)r#P#Z)r#Z#[# m#[#])r#]#^# m#^#a)r#a#b# m#b#g)r#g#h# m#h#i)r#i#j# m#j#m)r#m#n# m#n;'S)r;'S;=`*Z<%lO)rt##RX(OpOY#!|Zr#!|rs!Acs#O#!|#O#P!A{#P#Q!Ns#Q;'S#!|;'S;=`##n<%lO#!|t##qP;=`<%l#!|t##wP;=`<%l!Ns'`#$R^$f&j(OpOY##zYZ&cZr##zrs!Bws!^##z!^!_#!|!_#O##z#O#P!Cr#P#Q!Kp#Q#o##z#o#p#!|#p;'S##z;'S;=`#$}<%lO##z'`#%QP;=`<%l##z'`#%WP;=`<%l!Kp(r#%fk$f&j(Op(R!b!USOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#Z%Z#Z#[#%Z#[#]%Z#]#^#%Z#^#a%Z#a#b#%Z#b#g%Z#g#h#%Z#h#i%Z#i#j#%Z#j#m%Z#m#n#%Z#n#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#W#'d](Op(R!b!USOY#'ZZr#'Zrs!GYsw#'Zwx!Nsx!P#'Z!P!Q#(]!Q!}#'Z!}#O#)w#O#P!Bb#P;'S#'Z;'S;=`#*w<%lO#'Z#W#(fe(Op(R!b!USOY*gZr*grs'}sw*gwx)rx#O*g#P#Z*g#Z#[#(]#[#]*g#]#^#(]#^#a*g#a#b#(]#b#g*g#g#h#(]#h#i*g#i#j#(]#j#m*g#m#n#(]#n;'S*g;'S;=`+Z<%lO*g#W#*OZ(Op(R!bOY#)wZr#)wrs!Icsw#)wwx#!|x#O#)w#O#P!A{#P#Q#'Z#Q;'S#)w;'S;=`#*q<%lO#)w#W#*tP;=`<%l#)w#W#*zP;=`<%l#'Z(r#+W`$f&j(Op(R!bOY#*}YZ&cZr#*}rs!Jasw#*}wx##zx!^#*}!^!_#)w!_#O#*}#O#P!Cr#P#Q!;Z#Q#o#*}#o#p#)w#p;'S#*};'S;=`#,Y<%lO#*}(r#,]P;=`<%l#*}(r#,cP;=`<%l!;Z(CS#,sb$f&j(Op(R!b'v(;d!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z(CS#.W_$f&j(Op(R!bS(;dOY#-{YZ&cZr#-{rs#/Vsw#-{wx#2gx!^#-{!^!_#4f!_#O#-{#O#P#0X#P#o#-{#o#p#4f#p;'S#-{;'S;=`#5e<%lO#-{(Bb#/`]$f&j(R!bS(;dOY#/VYZ&cZw#/Vwx#0Xx!^#/V!^!_#1j!_#O#/V#O#P#0X#P#o#/V#o#p#1j#p;'S#/V;'S;=`#2a<%lO#/V(AO#0`X$f&jS(;dOY#0XYZ&cZ!^#0X!^!_#0{!_#o#0X#o#p#0{#p;'S#0X;'S;=`#1d<%lO#0X(;d#1QSS(;dOY#0{Z;'S#0{;'S;=`#1^<%lO#0{(;d#1aP;=`<%l#0{(AO#1gP;=`<%l#0X(<v#1qW(R!bS(;dOY#1jZw#1jwx#0{x#O#1j#O#P#0{#P;'S#1j;'S;=`#2Z<%lO#1j(<v#2^P;=`<%l#1j(Bb#2dP;=`<%l#/V(Ap#2p]$f&j(OpS(;dOY#2gYZ&cZr#2grs#0Xs!^#2g!^!_#3i!_#O#2g#O#P#0X#P#o#2g#o#p#3i#p;'S#2g;'S;=`#4`<%lO#2g(<U#3pW(OpS(;dOY#3iZr#3irs#0{s#O#3i#O#P#0{#P;'S#3i;'S;=`#4Y<%lO#3i(<U#4]P;=`<%l#3i(Ap#4cP;=`<%l#2g(=h#4oY(Op(R!bS(;dOY#4fZr#4frs#1jsw#4fwx#3ix#O#4f#O#P#0{#P;'S#4f;'S;=`#5_<%lO#4f(=h#5bP;=`<%l#4f(CS#5hP;=`<%l#-{%#W#5xb$f&j$O$Id(Op(R!b!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z+h#7_b$W#t$f&j(Op(R!b!USOY!;ZYZ&cZr!;Zrs!<nsw!;Zwx!Kpx!P!;Z!P!Q#%Z!Q!^!;Z!^!_#'Z!_!}!;Z!}#O#*}#O#P!Dj#P#o!;Z#o#p#'Z#p;'S!;Z;'S;=`#,`<%lO!;Z$/l#8rp$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#:v![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#:v#S#U%Z#U#V#>Q#V#X%Z#X#Y!4|#Y#b%Z#b#c#<v#c#d#AY#d#l%Z#l#m#D[#m#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#;Rk$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P!3Y!P!Q%Z!Q![#:v![!^%Z!^!_*g!_!g%Z!g!h!4|!h#O%Z#O#P&c#P#R%Z#R#S#:v#S#X%Z#X#Y!4|#Y#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#=R_$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#>Zd$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#?i!R!S#?i!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#?i#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#?tf$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!R#?i!R!S#?i!S!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#?i#S#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Acc$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#Bn!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#Bn#S#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Bye$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q!Y#Bn!Y!^%Z!^!_*g!_#O%Z#O#P&c#P#R%Z#R#S#Bn#S#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#Deg$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#E|![!^%Z!^!_*g!_!c%Z!c!i#E|!i#O%Z#O#P&c#P#R%Z#R#S#E|#S#T%Z#T#Z#E|#Z#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z$/l#FXi$f&j(Op(R!bo$'|OY%ZYZ&cZr%Zrs&}sw%Zwx(rx!Q%Z!Q![#E|![!^%Z!^!_*g!_!c%Z!c!i#E|!i#O%Z#O#P&c#P#R%Z#R#S#E|#S#T%Z#T#Z#E|#Z#b%Z#b#c#<v#c#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh#HT_!d$b$f&j#|%<f(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z)[#I__`l$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^#Jk^g!*v!h'.r(Op(R!b(tSOY*gZr*grs'}sw*gwx)rx!P*g!P!Q#Kg!Q!^*g!^!_#L]!_!`#M}!`#O*g#P;'S*g;'S;=`+Z<%lO*g(n#KpX$h&j(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#LfZ#n$Id(Op(R!bOY*gZr*grs'}sw*gwx)rx!_*g!_!`#MX!`#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#MbX$O$Id(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g$Kh#NWX#o$Id(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g%Gh$ Oa#[%?x$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`0z!`!a$!T!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#W$!`_#g$Ih$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%Gh$#nafBf#o$Id$c#|$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`$$s!`!a$%}!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$%O_#o$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$&Ya#n$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`!a$'_!a#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$'j`#n$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+h$(wc(h$Ip$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!O%Z!O!P$*S!P!^%Z!^!_*g!_!a%Z!a!b$+^!b#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z'+`$*__}'#p$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$+i`$f&j#y$Id(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z#&^$,v_!{!Ln$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(@^$.Q_!P(8n$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(n$/UZ$f&jO!^$/w!^!_$0_!_#i$/w#i#j$0d#j#l$/w#l#m$2V#m#o$/w#o#p$0_#p;'S$/w;'S;=`$4b<%lO$/w(n$0OT^#S$f&jO!^&c!_#o&c#p;'S&c;'S;=`&w<%lO&c#S$0dO^#S(n$0i[$f&jO!Q&c!Q![$1_![!^&c!_!c&c!c!i$1_!i#T&c#T#Z$1_#Z#o&c#o#p$3u#p;'S&c;'S;=`&w<%lO&c(n$1dZ$f&jO!Q&c!Q![$2V![!^&c!_!c&c!c!i$2V!i#T&c#T#Z$2V#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$2[Z$f&jO!Q&c!Q![$2}![!^&c!_!c&c!c!i$2}!i#T&c#T#Z$2}#Z#o&c#p;'S&c;'S;=`&w<%lO&c(n$3SZ$f&jO!Q&c!Q![$/w![!^&c!_!c&c!c!i$/w!i#T&c#T#Z$/w#Z#o&c#p;'S&c;'S;=`&w<%lO&c#S$3xR!Q![$4R!c!i$4R#T#Z$4R#S$4US!Q![$4R!c!i$4R#T#Z$4R#q#r$0_(n$4eP;=`<%l$/w!2r$4s_!V!+S$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z%#S$5}`#v$Id$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z&,v$7[_$f&j(Op(R!b(X&%WOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$8jk$f&j(Op(R!b'{&;d$[#t([!LYOY%ZYZ&cZr%Zrs&}st%Ztu$8Zuw%Zwx(rx}%Z}!O$:_!O!Q%Z!Q![$8Z![!^%Z!^!_*g!_!c%Z!c!}$8Z!}#O%Z#O#P&c#P#R%Z#R#S$8Z#S#T%Z#T#o$8Z#o#p*g#p$g%Z$g;'S$8Z;'S;=`$<e<%lO$8Z+d$:jk$f&j(Op(R!b$[#tOY%ZYZ&cZr%Zrs&}st%Ztu$:_uw%Zwx(rx}%Z}!O$:_!O!Q%Z!Q![$:_![!^%Z!^!_*g!_!c%Z!c!}$:_!}#O%Z#O#P&c#P#R%Z#R#S$:_#S#T%Z#T#o$:_#o#p*g#p$g%Z$g;'S$:_;'S;=`$<_<%lO$:_+d$<bP;=`<%l$:_(CS$<hP;=`<%l$8Z!5p$<tX![!3l(Op(R!bOY*gZr*grs'}sw*gwx)rx#O*g#P;'S*g;'S;=`+Z<%lO*g&CO$=la(o&;`$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_!`Ka!`#O%Z#O#P&c#P#o%Z#o#p*g#p#q$+^#q;'S%Z;'S;=`+a<%lO%Z%#`$?O_!Z$I`r`$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(r$@Y_!pS$f&j(Op(R!bOY%ZYZ&cZr%Zrs&}sw%Zwx(rx!^%Z!^!_*g!_#O%Z#O#P&c#P#o%Z#o#p*g#p;'S%Z;'S;=`+a<%lO%Z(CS$Aj|$f&j(Op(R!b't(;d$Y#t'{&;d([!LYOX%ZXY+gYZ&cZ[+g[p%Zpq+gqr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$f%Z$f$g+g$g#BYEr#BY#BZ$AX#BZ$ISEr$IS$I_$AX$I_$JTEr$JT$JU$AX$JU$KVEr$KV$KW$AX$KW&FUEr&FU&FV$AX&FV;'SEr;'S;=`I|<%l?HTEr?HT?HU$AX?HUOEr(CS$Duk$f&j(Op(R!b'u(;d$Y#t'{&;d([!LYOY%ZYZ&cZr%Zrs&}st%ZtuEruw%Zwx(rx}%Z}!OGv!O!Q%Z!Q![Er![!^%Z!^!_*g!_!c%Z!c!}Er!}#O%Z#O#P&c#P#R%Z#R#SEr#S#T%Z#T#oEr#o#p*g#p$g%Z$g;'SEr;'S;=`I|<%lOEr",tokenizers:[ak,aT,aE,2,3,4,5,6,7,8,9,10,11,12,13,ax,new LocalTokenGroup("$S~RRtu[#O#Pg#S#T#|~_P#o#pb~gOt~~jVO#i!P#i#j!U#j#l!P#l#m!q#m;'S!P;'S;=`#v<%lO!P~!UO!R~~!XS!Q![!e!c!i!e#T#Z!e#o#p#Z~!hR!Q![!q!c!i!q#T#Z!q~!tR!Q![!}!c!i!}#T#Z!}~#QR!Q![!P!c!i!P#T#Z!P~#^R!Q![#g!c!i#g#T#Z#g~#jS!Q![#g!c!i#g#T#Z#g#q#r!P~#yP;=`<%l!P~$RO(Z~~",141,332),new LocalTokenGroup("j~RQYZXz{^~^O'x~~aP!P!Qd~iO'y~~",25,315)],topRules:{Script:[0,6],SingleExpression:[1,269],SingleClassItem:[2,270]},dialects:{jsx:0,ts:14614},dynamicPrecedences:{69:1,79:1,81:1,165:1,193:1},specialized:[{term:319,get:h=>aP[h]||-1},{term:334,get:h=>aI[h]||-1},{term:70,get:h=>aR[h]||-1}],tokenPrec:14638}),a$=[snippetCompletion("function ${name}(${params}) {\n	${}\n}",{label:"function",detail:"definition",type:"keyword"}),snippetCompletion("for (let ${index} = 0; ${index} < ${bound}; ${index}++) {\n	${}\n}",{label:"for",detail:"loop",type:"keyword"}),snippetCompletion("for (let ${name} of ${collection}) {\n	${}\n}",{label:"for",detail:"of loop",type:"keyword"}),snippetCompletion("do {\n	${}\n} while (${})",{label:"do",detail:"loop",type:"keyword"}),snippetCompletion("while (${}) {\n	${}\n}",{label:"while",detail:"loop",type:"keyword"}),snippetCompletion("try {\n	${}\n} catch (${error}) {\n	${}\n}",{label:"try",detail:"/ catch block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n}",{label:"if",detail:"block",type:"keyword"}),snippetCompletion("if (${}) {\n	${}\n} else {\n	${}\n}",{label:"if",detail:"/ else block",type:"keyword"}),snippetCompletion("class ${name} {\n	constructor(${params}) {\n		${}\n	}\n}",{label:"class",detail:"definition",type:"keyword"}),snippetCompletion('import {${names}} from "${module}"\n${}',{label:"import",detail:"named",type:"keyword"}),snippetCompletion('import ${name} from "${module}"\n${}',{label:"import",detail:"default",type:"keyword"})],aN=a$.concat([snippetCompletion("interface ${name} {\n	${}\n}",{label:"interface",detail:"definition",type:"keyword"}),snippetCompletion("type ${name} = ${type}",{label:"type",detail:"definition",type:"keyword"}),snippetCompletion("enum ${name} {\n	${}\n}",{label:"enum",detail:"definition",type:"keyword"})]),aM=new NodeWeakMap,aQ=new Set(["Script","Block","FunctionExpression","FunctionDeclaration","ArrowFunction","MethodDeclaration","ForStatement"]);function defID(h){return(d,_)=>{let V=d.node.getChild("VariableDefinition");return V&&_(V,h),!0}}let aD=["FunctionDeclaration"],aj={FunctionDeclaration:defID("function"),ClassDeclaration:defID("class"),ClassExpression:()=>!0,EnumDeclaration:defID("constant"),TypeAliasDeclaration:defID("type"),NamespaceDeclaration:defID("namespace"),VariableDefinition(h,d){h.matchContext(aD)||d(h,"variable")},TypeDefinition(h,d){d(h,"type")},__proto__:null},aL=/^[\w$\xa1-\uffff][\w$\d\xa1-\uffff]*$/,aF=["TemplateString","String","RegExp","LineComment","BlockComment","VariableDefinition","TypeDefinition","Label","PropertyDefinition","PropertyName","PrivatePropertyDefinition","PrivatePropertyName",".","?."];function localCompletionSource(h){let d=dist_syntaxTree(h.state).resolveInner(h.pos,-1);if(aF.indexOf(d.name)>-1)return null;let _="VariableName"==d.name||d.to-d.from<20&&aL.test(h.state.sliceDoc(d.from,d.to));if(!_&&!h.explicit)return null;let V=[];for(let _=d;_;_=_.parent)aQ.has(_.name)&&(V=V.concat(function getScope(h,d){let _=aM.get(d);if(_)return _;let V=[],ee=!0;function def(d,_){let ee=h.sliceString(d.from,d.to);V.push({label:ee,type:_})}return d.cursor(ev.IncludeAnonymous).iterate(d=>{if(ee)ee=!1;else if(d.name){let h=aj[d.name];if(h&&h(d,def)||aQ.has(d.name))return!1}else if(d.to-d.from>8192){for(let _ of getScope(h,d.node))V.push(_);return!1}}),aM.set(d,V),V}(h.state.doc,_)));return{options:V,from:_?d.from:h.pos,validFor:aL}}let aZ=LRLanguage.define({name:"javascript",parser:aA.configure({props:[sp.add({IfStatement:continuedIndent({except:/^\s*({|else\b)/}),TryStatement:continuedIndent({except:/^\s*({|catch\b|finally\b)/}),LabeledStatement:h=>h.baseIndent,SwitchBody:h=>{let d=h.textAfter,_=/^\s*\}/.test(d),V=/^\s*(case|default)\b/.test(d);return h.baseIndent+(_?0:V?1:2)*h.unit},Block:function({closing:h,align:d=!0,units:_=1}){return V=>delimitedStrategy(V,d,_,h)}({closing:"}"}),ArrowFunction:h=>h.baseIndent+h.unit,"TemplateString BlockComment":()=>null,"Statement Property":continuedIndent({except:/^{/}),JSXElement(h){let d=/^\s*<\//.test(h.textAfter);return h.lineIndent(h.node.from)+(d?0:h.unit)},JSXEscape(h){let d=/\s*\}/.test(h.textAfter);return h.lineIndent(h.node.from)+(d?0:h.unit)},"JSXOpenTag JSXSelfClosingTag":h=>h.column(h.node.from)+h.unit}),sm.add({"Block ClassBody SwitchBody EnumBody ObjectExpression ArrayExpression ObjectType":foldInside,BlockComment:h=>({from:h.from+2,to:h.to-2})})]}),languageData:{closeBrackets:{brackets:["(","[","{","'",'"',"`"]},commentTokens:{line:"//",block:{open:"/*",close:"*/"}},indentOnInput:/^\s*(?:case |default:|\{|\}|<\/)$/,wordChars:"$"}}),aV={test:h=>/^JSX/.test(h.name),facet:defineLanguageFacet({commentTokens:{block:{open:"{/*",close:"*/}"}}})},aB=aZ.configure({dialect:"ts"},"typescript"),aW=aZ.configure({dialect:"jsx",props:[st.add(h=>h.isTop?[aV]:void 0)]}),aU=aZ.configure({dialect:"jsx ts",props:[st.add(h=>h.isTop?[aV]:void 0)]},"typescript"),kwCompletion=h=>({label:h,type:"keyword"}),az="break case const continue default delete export extends false finally in instanceof let new return static super switch this throw true typeof var yield".split(" ").map(kwCompletion),aq=az.concat(["declare","implements","private","protected","public"].map(kwCompletion));function javascript(h={}){var d;let _=h.jsx?h.typescript?aU:aW:h.typescript?aB:aZ,V=h.typescript?aN.concat(aq):a$.concat(az);return new LanguageSupport(_,[aZ.data.of({autocomplete:(d=completeFromList(V),h=>{for(let d=dist_syntaxTree(h.state).resolveInner(h.pos,-1);d;d=d.parent){if(aF.indexOf(d.name)>-1)return null;if(d.type.isTop)break}return d(h)})}),aZ.data.of({autocomplete:localCompletionSource}),h.jsx?aY:[]])}function elementName(h,d,_=h.length){for(let V=null==d?void 0:d.firstChild;V;V=V.nextSibling)if("JSXIdentifier"==V.name||"JSXBuiltin"==V.name||"JSXNamespacedName"==V.name||"JSXMemberExpression"==V.name)return h.sliceString(V.from,Math.min(V.to,_));return""}let aX="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),aY=EditorView.inputHandler.of((h,d,_,V,ee)=>{if((aX?h.composing:h.compositionStarted)||h.state.readOnly||d!=_||">"!=V&&"/"!=V||!aZ.isActiveAt(h.state,d,-1))return!1;let er=ee(),{state:eo}=er,ec=eo.changeByRange(h=>{var d;let{head:_}=h,ee=dist_syntaxTree(eo).resolveInner(_-1,-1),er;if("JSXStartTag"==ee.name&&(ee=ee.parent),eo.doc.sliceString(_-1,_)!=V||"JSXAttributeValue"==ee.name&&ee.to>_);else if(">"==V&&"JSXFragmentTag"==ee.name)return{range:h,changes:{from:_,insert:"</>"}};else if("/"==V&&"JSXStartCloseTag"==ee.name){let h=ee.parent,V=h.parent;if(V&&h.from==_-2&&((er=elementName(eo.doc,V.firstChild,_))||(null===(d=V.firstChild)||void 0===d?void 0:d.name)=="JSXFragmentTag")){let h=`${er}>`;return{range:dist_EditorSelection.cursor(_+h.length,-1),changes:{from:_,insert:h}}}}else if(">"==V){let d=function(h){for(;;){if("JSXOpenTag"==h.name||"JSXSelfClosingTag"==h.name||"JSXFragmentTag"==h.name)return h;if("JSXEscape"==h.name||!h.parent)return null;h=h.parent}}(ee);if(d&&!/^\/?>|^<\//.test(eo.doc.sliceString(_,_+2))&&(er=elementName(eo.doc,d,_)))return{range:h,changes:{from:_,insert:`</${er}>`}}}return{range:h}});return!ec.changes.empty&&(h.dispatch([er,eo.update(ec,{userEvent:"input.complete",scrollIntoView:!0})]),!0)}),aG=["_blank","_self","_top","_parent"],aH=["ascii","utf-8","utf-16","latin1","latin1"],aK=["get","post","put","delete"],aJ=["application/x-www-form-urlencoded","multipart/form-data","text/plain"],a0=["true","false"],a1={},a2={a:{attrs:{href:null,ping:null,type:null,media:null,target:aG,hreflang:null}},abbr:a1,address:a1,area:{attrs:{alt:null,coords:null,href:null,target:null,ping:null,media:null,hreflang:null,type:null,shape:["default","rect","circle","poly"]}},article:a1,aside:a1,audio:{attrs:{src:null,mediagroup:null,crossorigin:["anonymous","use-credentials"],preload:["none","metadata","auto"],autoplay:["autoplay"],loop:["loop"],controls:["controls"]}},b:a1,base:{attrs:{href:null,target:aG}},bdi:a1,bdo:a1,blockquote:{attrs:{cite:null}},body:a1,br:a1,button:{attrs:{form:null,formaction:null,name:null,value:null,autofocus:["autofocus"],disabled:["autofocus"],formenctype:aJ,formmethod:aK,formnovalidate:["novalidate"],formtarget:aG,type:["submit","reset","button"]}},canvas:{attrs:{width:null,height:null}},caption:a1,center:a1,cite:a1,code:a1,col:{attrs:{span:null}},colgroup:{attrs:{span:null}},command:{attrs:{type:["command","checkbox","radio"],label:null,icon:null,radiogroup:null,command:null,title:null,disabled:["disabled"],checked:["checked"]}},data:{attrs:{value:null}},datagrid:{attrs:{disabled:["disabled"],multiple:["multiple"]}},datalist:{attrs:{data:null}},dd:a1,del:{attrs:{cite:null,datetime:null}},details:{attrs:{open:["open"]}},dfn:a1,div:a1,dl:a1,dt:a1,em:a1,embed:{attrs:{src:null,type:null,width:null,height:null}},eventsource:{attrs:{src:null}},fieldset:{attrs:{disabled:["disabled"],form:null,name:null}},figcaption:a1,figure:a1,footer:a1,form:{attrs:{action:null,name:null,"accept-charset":aH,autocomplete:["on","off"],enctype:aJ,method:aK,novalidate:["novalidate"],target:aG}},h1:a1,h2:a1,h3:a1,h4:a1,h5:a1,h6:a1,head:{children:["title","base","link","style","meta","script","noscript","command"]},header:a1,hgroup:a1,hr:a1,html:{attrs:{manifest:null}},i:a1,iframe:{attrs:{src:null,srcdoc:null,name:null,width:null,height:null,sandbox:["allow-top-navigation","allow-same-origin","allow-forms","allow-scripts"],seamless:["seamless"]}},img:{attrs:{alt:null,src:null,ismap:null,usemap:null,width:null,height:null,crossorigin:["anonymous","use-credentials"]}},input:{attrs:{alt:null,dirname:null,form:null,formaction:null,height:null,list:null,max:null,maxlength:null,min:null,name:null,pattern:null,placeholder:null,size:null,src:null,step:null,value:null,width:null,accept:["audio/*","video/*","image/*"],autocomplete:["on","off"],autofocus:["autofocus"],checked:["checked"],disabled:["disabled"],formenctype:aJ,formmethod:aK,formnovalidate:["novalidate"],formtarget:aG,multiple:["multiple"],readonly:["readonly"],required:["required"],type:["hidden","text","search","tel","url","email","password","datetime","date","month","week","time","datetime-local","number","range","color","checkbox","radio","file","submit","image","reset","button"]}},ins:{attrs:{cite:null,datetime:null}},kbd:a1,keygen:{attrs:{challenge:null,form:null,name:null,autofocus:["autofocus"],disabled:["disabled"],keytype:["RSA"]}},label:{attrs:{for:null,form:null}},legend:a1,li:{attrs:{value:null}},link:{attrs:{href:null,type:null,hreflang:null,media:null,sizes:["all","16x16","16x16 32x32","16x16 32x32 64x64"]}},map:{attrs:{name:null}},mark:a1,menu:{attrs:{label:null,type:["list","context","toolbar"]}},meta:{attrs:{content:null,charset:aH,name:["viewport","application-name","author","description","generator","keywords"],"http-equiv":["content-language","content-type","default-style","refresh"]}},meter:{attrs:{value:null,min:null,low:null,high:null,max:null,optimum:null}},nav:a1,noscript:a1,object:{attrs:{data:null,type:null,name:null,usemap:null,form:null,width:null,height:null,typemustmatch:["typemustmatch"]}},ol:{attrs:{reversed:["reversed"],start:null,type:["1","a","A","i","I"]},children:["li","script","template","ul","ol"]},optgroup:{attrs:{disabled:["disabled"],label:null}},option:{attrs:{disabled:["disabled"],label:null,selected:["selected"],value:null}},output:{attrs:{for:null,form:null,name:null}},p:a1,param:{attrs:{name:null,value:null}},pre:a1,progress:{attrs:{value:null,max:null}},q:{attrs:{cite:null}},rp:a1,rt:a1,ruby:a1,samp:a1,script:{attrs:{type:["text/javascript"],src:null,async:["async"],defer:["defer"],charset:aH}},section:a1,select:{attrs:{form:null,name:null,size:null,autofocus:["autofocus"],disabled:["disabled"],multiple:["multiple"]}},slot:{attrs:{name:null}},small:a1,source:{attrs:{src:null,type:null,media:null}},span:a1,strong:a1,style:{attrs:{type:["text/css"],media:null,scoped:null}},sub:a1,summary:a1,sup:a1,table:a1,tbody:a1,td:{attrs:{colspan:null,rowspan:null,headers:null}},template:a1,textarea:{attrs:{dirname:null,form:null,maxlength:null,name:null,placeholder:null,rows:null,cols:null,autofocus:["autofocus"],disabled:["disabled"],readonly:["readonly"],required:["required"],wrap:["soft","hard"]}},tfoot:a1,th:{attrs:{colspan:null,rowspan:null,headers:null,scope:["row","col","rowgroup","colgroup"]}},thead:a1,time:{attrs:{datetime:null}},title:a1,tr:a1,track:{attrs:{src:null,label:null,default:null,kind:["subtitles","captions","descriptions","chapters","metadata"],srclang:null}},ul:{children:["li","script","template","ul","ol"]},var:a1,video:{attrs:{src:null,poster:null,width:null,height:null,crossorigin:["anonymous","use-credentials"],preload:["auto","metadata","none"],autoplay:["autoplay"],mediagroup:["movie"],muted:["muted"],controls:["controls"]}},wbr:a1},a5={accesskey:null,class:null,contenteditable:a0,contextmenu:null,dir:["ltr","rtl","auto"],draggable:["true","false","auto"],dropzone:["copy","move","link","string:","file:"],hidden:["hidden"],id:null,inert:["inert"],itemid:null,itemprop:null,itemref:null,itemscope:["itemscope"],itemtype:null,lang:["ar","bn","de","en-GB","en-US","es","fr","hi","id","ja","pa","pt","ru","tr","zh"],spellcheck:a0,autocorrect:a0,autocapitalize:a0,style:null,tabindex:null,title:null,translate:["yes","no"],rel:["stylesheet","alternate","author","bookmark","help","license","next","nofollow","noreferrer","prefetch","prev","search","tag"],role:"alert application article banner button cell checkbox complementary contentinfo dialog document feed figure form grid gridcell heading img list listbox listitem main navigation region row rowgroup search switch tab table tabpanel textbox timer".split(" "),"aria-activedescendant":null,"aria-atomic":a0,"aria-autocomplete":["inline","list","both","none"],"aria-busy":a0,"aria-checked":["true","false","mixed","undefined"],"aria-controls":null,"aria-describedby":null,"aria-disabled":a0,"aria-dropeffect":null,"aria-expanded":["true","false","undefined"],"aria-flowto":null,"aria-grabbed":["true","false","undefined"],"aria-haspopup":a0,"aria-hidden":a0,"aria-invalid":["true","false","grammar","spelling"],"aria-label":null,"aria-labelledby":null,"aria-level":null,"aria-live":["off","polite","assertive"],"aria-multiline":a0,"aria-multiselectable":a0,"aria-owns":null,"aria-posinset":null,"aria-pressed":["true","false","mixed","undefined"],"aria-readonly":a0,"aria-relevant":null,"aria-required":a0,"aria-selected":["true","false","undefined"],"aria-setsize":null,"aria-sort":["ascending","descending","none","other"],"aria-valuemax":null,"aria-valuemin":null,"aria-valuenow":null,"aria-valuetext":null},a7="beforeunload copy cut dragstart dragover dragleave dragenter dragend drag paste focus blur change click load mousedown mouseenter mouseleave mouseup keydown keyup resize scroll unload".split(" ").map(h=>"on"+h);for(let h of a7)a5[h]=null;let Schema=class Schema{constructor(h,d){this.tags=Object.assign(Object.assign({},a2),h),this.globalAttrs=Object.assign(Object.assign({},a5),d),this.allTags=Object.keys(this.tags),this.globalAttrNames=Object.keys(this.globalAttrs)}};function dist_elementName(h,d,_=h.length){if(!d)return"";let V=d.firstChild,ee=V&&V.getChild("TagName");return ee?h.sliceString(ee.from,Math.min(ee.to,_)):""}function findParentElement(h,d=!1){for(;h;h=h.parent)if("Element"==h.name){if(!d)return h;d=!1}return null}function allowedChildren(h,d,_){let V=_.tags[dist_elementName(h,findParentElement(d))];return(null==V?void 0:V.children)||_.allTags}function openTags(h,d){let _=[];for(let V=findParentElement(d);V&&!V.type.isTop;V=findParentElement(V.parent)){let ee=dist_elementName(h,V);if(ee&&"CloseTag"==V.lastChild.name)break;ee&&0>_.indexOf(ee)&&("EndTag"==d.name||d.from>=V.firstChild.to)&&_.push(ee)}return _}Schema.default=new Schema;let a3=/^[:\-\.\w\u00b7-\uffff]*$/;function completeTag(h,d,_,V,ee){let er=/\s*>/.test(h.sliceDoc(ee,ee+5))?"":">",eo=findParentElement(_,!0);return{from:V,to:ee,options:allowedChildren(h.doc,eo,d).map(h=>({label:h,type:"type"})).concat(openTags(h.doc,_).map((h,d)=>({label:"/"+h,apply:"/"+h+er,type:"type",boost:99-d}))),validFor:/^\/?[:\-\.\w\u00b7-\uffff]*$/}}function completeCloseTag(h,d,_,V){let ee=/\s*>/.test(h.sliceDoc(V,V+5))?"":">";return{from:_,to:V,options:openTags(h.doc,d).map((h,d)=>({label:h,apply:h+ee,type:"type",boost:99-d})),validFor:a3}}let a4=aZ.parser.configure({top:"SingleExpression"}),a6=[{tag:"script",attrs:h=>"text/typescript"==h.type||"ts"==h.lang,parser:aB.parser},{tag:"script",attrs:h=>"text/babel"==h.type||"text/jsx"==h.type,parser:aW.parser},{tag:"script",attrs:h=>"text/typescript-jsx"==h.type,parser:aU.parser},{tag:"script",attrs:h=>/^(importmap|speculationrules|application\/(.+\+)?json)$/i.test(h.type),parser:a4},{tag:"script",attrs:h=>!h.type||/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^module$|^$/i.test(h.type),parser:aZ.parser},{tag:"style",attrs:h=>(!h.lang||"css"==h.lang)&&(!h.type||/^(text\/)?(x-)?(stylesheet|css)$/i.test(h.type)),parser:o5.parser}],a9=[{name:"style",parser:o5.parser.configure({top:"Styles"})}].concat(a7.map(h=>({name:h,parser:aZ.parser}))),a8=LRLanguage.define({name:"html",parser:aS.configure({props:[sp.add({Element(h){let d=/^(\s*)(<\/)?/.exec(h.textAfter);return h.node.to<=h.pos+d[0].length?h.continue():h.lineIndent(h.node.from)+(d[2]?0:h.unit)},"OpenTag CloseTag SelfClosingTag":h=>h.column(h.node.from)+h.unit,Document(h){if(h.pos+/\s*/.exec(h.textAfter)[0].length<h.node.to)return h.continue();let d=null,_;for(let _=h.node;;){let h=_.lastChild;if(!h||"Element"!=h.name||h.to!=_.to)break;d=_=h}return d&&!((_=d.lastChild)&&("CloseTag"==_.name||"SelfClosingTag"==_.name))?h.lineIndent(d.from)+h.unit:null}}),sm.add({Element(h){let d=h.firstChild,_=h.lastChild;return d&&"OpenTag"==d.name?{from:d.to,to:"CloseTag"==_.name?_.from:h.to}:null}}),sA.add({"OpenTag CloseTag":h=>h.getChild("TagName")})]}),languageData:{commentTokens:{block:{open:"<!--",close:"-->"}},indentOnInput:/^\s*<\/\w+\W$/,wordChars:"-._"}}),le=a8.configure({wrap:configureNesting(a6,a9)}),lt=new Set("area base br col command embed frame hr img input keygen link meta param source track wbr menuitem".split(" ")),lr=EditorView.inputHandler.of((h,d,_,V,ee)=>{if(h.composing||h.state.readOnly||d!=_||">"!=V&&"/"!=V||!le.isActiveAt(h.state,d,-1))return!1;let er=ee(),{state:eo}=er,ec=eo.changeByRange(h=>{var d,_,ee;let er=eo.doc.sliceString(h.from-1,h.to)==V,{head:ec}=h,eh=dist_syntaxTree(eo).resolveInner(ec-1,-1),ep;if(("TagName"==eh.name||"StartTag"==eh.name)&&(eh=eh.parent),er&&">"==V&&"OpenTag"==eh.name){if((null===(_=null===(d=eh.parent)||void 0===d?void 0:d.lastChild)||void 0===_?void 0:_.name)!="CloseTag"&&(ep=dist_elementName(eo.doc,eh.parent,ec))&&!lt.has(ep)){let d=ec+(">"===eo.doc.sliceString(ec,ec+1)?1:0);return{range:h,changes:{from:ec,to:d,insert:`</${ep}>`}}}}else if(er&&"/"==V&&"IncompleteCloseTag"==eh.name){let h=eh.parent;if(eh.from==ec-2&&(null===(ee=h.lastChild)||void 0===ee?void 0:ee.name)!="CloseTag"&&(ep=dist_elementName(eo.doc,h,ec))&&!lt.has(ep)){let h=ec+(">"===eo.doc.sliceString(ec,ec+1)?1:0),d=`${ep}>`;return{range:dist_EditorSelection.cursor(ec+d.length,-1),changes:{from:ec,to:h,insert:d}}}}return{range:h}});return!ec.changes.empty&&(h.dispatch([er,eo.update(ec,{userEvent:"input.complete",scrollIntoView:!0})]),!0)});var li=_(1458),la=_.n(li),lh=_(8699),lp=_(6961),lf=_.n(lp),__assign=function(){return(__assign=Object.assign||function(h){for(var d,_=1,V=arguments.length;_<V;_++)for(var ee in d=arguments[_])Object.prototype.hasOwnProperty.call(d,ee)&&(h[ee]=d[ee]);return h}).apply(this,arguments)};function __rest(h,d){var _={};for(var V in h)Object.prototype.hasOwnProperty.call(h,V)&&0>d.indexOf(V)&&(_[V]=h[V]);if(null!=h&&"function"==typeof Object.getOwnPropertySymbols)for(var ee=0,V=Object.getOwnPropertySymbols(h);ee<V.length;ee++)0>d.indexOf(V[ee])&&Object.prototype.propertyIsEnumerable.call(h,V[ee])&&(_[V[ee]]=h[V[ee]]);return _}function __awaiter(h,d,_,V){return new(_||(_=Promise))(function(ee,er){function fulfilled(h){try{step(V.next(h))}catch(h){er(h)}}function rejected(h){try{step(V.throw(h))}catch(h){er(h)}}function step(h){var d;h.done?ee(h.value):((d=h.value)instanceof _?d:new _(function(h){h(d)})).then(fulfilled,rejected)}step((V=V.apply(h,d||[])).next())})}function __generator(h,d){var _,V,ee,er,eo={label:0,sent:function(){if(1&ee[0])throw ee[1];return ee[1]},trys:[],ops:[]};return er={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(er[Symbol.iterator]=function(){return this}),er;function verb(er){return function(ec){return function(er){if(_)throw TypeError("Generator is already executing.");for(;eo;)try{if(_=1,V&&(ee=2&er[0]?V.return:er[0]?V.throw||((ee=V.return)&&ee.call(V),0):V.next)&&!(ee=ee.call(V,er[1])).done)return ee;switch(V=0,ee&&(er=[2&er[0],ee.value]),er[0]){case 0:case 1:ee=er;break;case 4:return eo.label++,{value:er[1],done:!1};case 5:eo.label++,V=er[1],er=[0];continue;case 7:er=eo.ops.pop(),eo.trys.pop();continue;default:if(!(ee=(ee=eo.trys).length>0&&ee[ee.length-1])&&(6===er[0]||2===er[0])){eo=0;continue}if(3===er[0]&&(!ee||er[1]>ee[0]&&er[1]<ee[3])){eo.label=er[1];break}if(6===er[0]&&eo.label<ee[1]){eo.label=ee[1],ee=er;break}if(ee&&eo.label<ee[2]){eo.label=ee[2],eo.ops.push(er);break}ee[2]&&eo.ops.pop(),eo.trys.pop();continue}er=d.call(h,eo)}catch(h){er=[6,h],V=0}finally{_=ee=0}if(5&er[0])throw er[1];return{value:er[0]?er[1]:void 0,done:!0}}([er,ec])}}}function __spreadArray(h,d,_){if(_||2==arguments.length)for(var V,ee=0,er=d.length;ee<er;ee++)!V&&ee in d||(V||(V=Array.prototype.slice.call(d,0,ee)),V[ee]=d[ee]);return h.concat(V||Array.prototype.slice.call(d))}var SVG=function(h){return(0,ej.jsx)("svg",__assign({fill:"currentColor",height:"16",viewBox:"0 0 16 16",width:"16",xmlns:"http://www.w3.org/2000/svg"},h))},SignInIcon=function(){return(0,ej.jsxs)(SVG,{viewBox:"0 0 48 48",children:[(0,ej.jsx)("title",{children:"Sign in"}),(0,ej.jsx)("path",{d:"M9 42q-1.2 0-2.1-.9Q6 40.2 6 39V9q0-1.2.9-2.1Q7.8 6 9 6h14.55v3H9v30h14.55v3Zm24.3-9.25-2.15-2.15 5.1-5.1h-17.5v-3h17.4l-5.1-5.1 2.15-2.15 8.8 8.8Z"})]})},SignOutIcon=function(){return(0,ej.jsxs)(SVG,{viewBox:"0 0 48 48",children:[(0,ej.jsx)("title",{children:"Sign out"}),(0,ej.jsx)("path",{d:"M9 42q-1.2 0-2.1-.9Q6 40.2 6 39V9q0-1.2.9-2.1Q7.8 6 9 6h14.55v3H9v30h14.55v3Zm24.3-9.25-2.15-2.15 5.1-5.1h-17.5v-3h17.4l-5.1-5.1 2.15-2.15 8.8 8.8Z"})]})},RestartIcon=function(){return(0,ej.jsxs)(SVG,{fill:"none",stroke:"currentColor",children:[(0,ej.jsx)("title",{children:"Restart script"}),(0,ej.jsx)("path",{d:"M8 2C4.68629 2 2 4.68629 2 8C2 10.0946 3.07333 11.9385 4.7 13.0118",strokeLinecap:"round"}),(0,ej.jsx)("path",{d:"M14.0005 7.9998C14.0005 5.82095 12.8391 3.91335 11.1016 2.8623",strokeLinecap:"round"}),(0,ej.jsx)("path",{d:"M14.0003 2.3335H11.167C10.8908 2.3335 10.667 2.55735 10.667 2.8335V5.66683",strokeLinecap:"round"}),(0,ej.jsx)("path",{d:"M1.99967 13.6665L4.83301 13.6665C5.10915 13.6665 5.33301 13.4426 5.33301 13.1665L5.33301 10.3332",strokeLinecap:"round"}),(0,ej.jsx)("path",{d:"M10 10L12 12L10 14",strokeLinecap:"round",strokeLinejoin:"round"}),(0,ej.jsx)("path",{d:"M14.667 14L12.667 14",strokeLinecap:"round",strokeLinejoin:"round"})]})},RunIcon=function(){return(0,ej.jsxs)(SVG,{children:[(0,ej.jsx)("title",{children:"Run sandbox"}),(0,ej.jsx)("path",{d:"M11.0792 8.1078C11.2793 8.25007 11.27 8.55012 11.0616 8.67981L6.02535 11.8135C5.79638 11.956 5.5 11.7913 5.5 11.5216L5.5 8.40703L5.5 4.80661C5.5 4.52735 5.81537 4.36463 6.04296 4.52647L11.0792 8.1078Z"})]})},BackwardIcon=function(){return(0,ej.jsxs)(SVG,{children:[(0,ej.jsx)("title",{children:"Click to go back"}),(0,ej.jsx)("path",{d:"M9.64645 12.3536C9.84171 12.5488 10.1583 12.5488 10.3536 12.3536C10.5488 12.1583 10.5488 11.8417 10.3536 11.6464L9.64645 12.3536ZM10.3536 4.35355C10.5488 4.15829 10.5488 3.84171 10.3536 3.64644C10.1583 3.45118 9.84171 3.45118 9.64645 3.64644L10.3536 4.35355ZM6.07072 7.92929L5.71716 7.57573L6.07072 7.92929ZM10.3536 11.6464L6.42427 7.71716L5.71716 8.42426L9.64645 12.3536L10.3536 11.6464ZM6.42427 8.28284L10.3536 4.35355L9.64645 3.64644L5.71716 7.57573L6.42427 8.28284ZM6.42427 7.71716C6.58048 7.87337 6.58048 8.12663 6.42427 8.28284L5.71716 7.57573C5.48285 7.81005 5.48285 8.18995 5.71716 8.42426L6.42427 7.71716Z"})]})},ForwardIcon=function(){return(0,ej.jsxs)(SVG,{children:[(0,ej.jsx)("title",{children:"Click to go forward"}),(0,ej.jsx)("path",{d:"M6.35355 3.64645C6.15829 3.45118 5.84171 3.45118 5.64645 3.64645C5.45118 3.84171 5.45118 4.15829 5.64645 4.35355L6.35355 3.64645ZM5.64645 11.6464C5.45118 11.8417 5.45118 12.1583 5.64645 12.3536C5.84171 12.5488 6.15829 12.5488 6.35355 12.3536L5.64645 11.6464ZM9.92929 8.07071L10.2828 8.42426L9.92929 8.07071ZM5.64645 4.35355L9.57574 8.28284L10.2828 7.57574L6.35355 3.64645L5.64645 4.35355ZM9.57574 7.71716L5.64645 11.6464L6.35355 12.3536L10.2828 8.42426L9.57574 7.71716ZM9.57574 8.28284C9.41952 8.12663 9.41953 7.87337 9.57574 7.71716L10.2828 8.42426C10.5172 8.18995 10.5172 7.81005 10.2828 7.57574L9.57574 8.28284Z"})]})},RefreshIcon=function(){return(0,ej.jsxs)(SVG,{children:[(0,ej.jsx)("title",{children:"Refresh preview"}),(0,ej.jsx)("path",{clipRule:"evenodd",d:"M3.83325 7.99992C3.83325 5.69867 5.69853 3.83325 7.99934 3.83325C9.81246 3.83325 11.3563 4.99195 11.9285 6.61097C11.9396 6.6425 11.9536 6.67221 11.97 6.69992H8.80005C8.52391 6.69992 8.30005 6.92378 8.30005 7.19992C8.30005 7.47606 8.52391 7.69992 8.80005 7.69992H12.5667C12.8981 7.69992 13.1667 7.43129 13.1667 7.09992V3.33325C13.1667 3.05711 12.9429 2.83325 12.6667 2.83325C12.3906 2.83325 12.1667 3.05711 12.1667 3.33325V4.94608C11.2268 3.66522 9.7106 2.83325 7.99934 2.83325C5.14613 2.83325 2.83325 5.14651 2.83325 7.99992C2.83325 10.8533 5.14613 13.1666 7.99934 13.1666C9.91218 13.1666 11.5815 12.1266 12.474 10.5836C12.6123 10.3446 12.5306 10.0387 12.2915 9.90044C12.0525 9.76218 11.7466 9.84387 11.6084 10.0829C10.8873 11.3296 9.54072 12.1666 7.99934 12.1666C5.69853 12.1666 3.83325 10.3012 3.83325 7.99992Z",fillRule:"evenodd"})]})},CleanIcon=function(){return(0,ej.jsxs)(SVG,{fill:"none",stroke:"currentColor",children:[(0,ej.jsx)("title",{children:"Clean"}),(0,ej.jsx)("circle",{cx:"7.99998",cy:"8.00004",r:"4.66667",strokeLinecap:"round"}),(0,ej.jsx)("path",{d:"M4.66669 4.66663L11.3334 11.3333"})]})},ExportIcon=function(){return(0,ej.jsxs)(SVG,{fill:"none",stroke:"currentColor",children:[(0,ej.jsx)("title",{children:"Open on CodeSandbox"}),(0,ej.jsx)("path",{d:"M6.66665 3.33337H4.33331C3.78103 3.33337 3.33331 3.78109 3.33331 4.33337V11.6667C3.33331 12.219 3.78103 12.6667 4.33331 12.6667H11.6666C12.2189 12.6667 12.6666 12.219 12.6666 11.6667V9.33337",strokeLinecap:"round"}),(0,ej.jsx)("path",{d:"M10 3.33337H12.5667C12.6219 3.33337 12.6667 3.37815 12.6667 3.43337V6.00004",strokeLinecap:"round"}),(0,ej.jsx)("path",{d:"M7.33331 8.66668L12.5333 3.46667",strokeLinecap:"round"})]})},DirectoryIconOpen=function(){return(0,ej.jsxs)(SVG,{children:[(0,ej.jsx)("title",{children:"Directory"}),(0,ej.jsx)("path",{d:"M12.5526 12.6667H3.66675C3.2922 12.6667 2.96575 12.4608 2.79442 12.156L3.81072 8.0908C3.92201 7.64563 4.32199 7.33333 4.78086 7.33333H13.386C14.0365 7.33333 14.5139 7.94472 14.3561 8.57587L13.5228 11.9092C13.4115 12.3544 13.0115 12.6667 12.5526 12.6667Z",fill:"currentColor"}),(0,ej.jsx)("path",{d:"M13.3334 6.63333V6.33333C13.3334 5.78105 12.8857 5.33333 12.3334 5.33333H8.30286C8.10543 5.33333 7.91242 5.2749 7.74816 5.16538L6.25201 4.16795C6.08774 4.05844 5.89473 4 5.69731 4H3.66675C3.11446 4 2.66675 4.44772 2.66675 5L2.66675 11.6667C2.66675 12.219 3.11446 12.6667 3.66675 12.6667H12.5526C13.0115 12.6667 13.4115 12.3544 13.5228 11.9092L14.3561 8.57587C14.5139 7.94472 14.0365 7.33333 13.386 7.33333H4.78086C4.32199 7.33333 3.92201 7.64563 3.81072 8.0908L2.75008 12.3333",fill:"none",stroke:"currentColor",strokeLinecap:"round"})]})},DirectoryIconClosed=function(){return(0,ej.jsxs)(SVG,{children:[(0,ej.jsx)("title",{children:"Directory"}),(0,ej.jsx)("path",{d:"M12.3334 12.6667H3.66675C3.11446 12.6667 2.66675 12.219 2.66675 11.6667V5C2.66675 4.44772 3.11446 4 3.66675 4H5.69731C5.89473 4 6.08774 4.05844 6.25201 4.16795L7.74816 5.16538C7.91242 5.2749 8.10543 5.33333 8.30286 5.33333H12.3334C12.8857 5.33333 13.3334 5.78105 13.3334 6.33333V11.6667C13.3334 12.219 12.8857 12.6667 12.3334 12.6667Z",fill:"currentColor",stroke:"currentColor",strokeLinecap:"round"})]})},FileIcon=function(){return(0,ej.jsxs)(SVG,{fill:"currentColor",children:[(0,ej.jsx)("title",{children:"File"}),(0,ej.jsx)("path",{clipRule:"evenodd",d:"M4.5 4.33325C4.5 4.05711 4.72386 3.83325 5 3.83325H8.16675V6.56659C8.16675 6.89795 8.43538 7.16658 8.76675 7.16658H11.5V12.3333C11.5 12.6094 11.2761 12.8333 11 12.8333H5C4.72386 12.8333 4.5 12.6094 4.5 12.3333V4.33325ZM12.5 6.67568C12.5001 6.67265 12.5001 6.66962 12.5001 6.66658C12.5001 6.66355 12.5001 6.66052 12.5 6.65749V6.41413C12.5 6.01631 12.342 5.63478 12.0607 5.35347L9.97978 3.27259C9.69848 2.99129 9.31694 2.83325 8.91912 2.83325H8.66675H5C4.17157 2.83325 3.5 3.50483 3.5 4.33325V12.3333C3.5 13.1617 4.17157 13.8333 5 13.8333H11C11.8284 13.8333 12.5 13.1617 12.5 12.3333V6.67568ZM9.16675 3.89888C9.20518 3.92078 9.24085 3.94787 9.27267 3.9797L11.3536 6.06058C11.3854 6.09243 11.4125 6.12813 11.4344 6.16658H9.16675V3.89888Z",fillRule:"evenodd"})]})},CloseIcon=function(){return(0,ej.jsxs)(SVG,{stroke:"currentColor",children:[(0,ej.jsx)("title",{children:"Close file"}),(0,ej.jsx)("path",{d:"M12 4L4 12",strokeLinecap:"round"}),(0,ej.jsx)("path",{d:"M4 4L12 12",strokeLinecap:"round"})]})},ConsoleIcon=function(){return(0,ej.jsxs)(SVG,{children:[(0,ej.jsx)("title",{children:"Open browser console"}),(0,ej.jsx)("path",{d:"M5.65871 3.62037C5.44905 3.44066 5.1334 3.46494 4.95368 3.6746C4.77397 3.88427 4.79825 4.19992 5.00792 4.37963L5.65871 3.62037ZM5.00792 11.6204C4.79825 11.8001 4.77397 12.1157 4.95368 12.3254C5.1334 12.5351 5.44905 12.5593 5.65871 12.3796L5.00792 11.6204ZM9.9114 7.92407L10.2368 7.54445L9.9114 7.92407ZM5.00792 4.37963L9.586 8.3037L10.2368 7.54445L5.65871 3.62037L5.00792 4.37963ZM9.586 7.6963L5.00792 11.6204L5.65871 12.3796L10.2368 8.45555L9.586 7.6963ZM9.586 8.3037C9.39976 8.14407 9.39976 7.85594 9.586 7.6963L10.2368 8.45555C10.5162 8.2161 10.5162 7.7839 10.2368 7.54445L9.586 8.3037Z"}),(0,ej.jsx)("path",{d:"M10 11.5C9.72386 11.5 9.5 11.7239 9.5 12C9.5 12.2761 9.72386 12.5 10 12.5V11.5ZM14.6667 12.5C14.9428 12.5 15.1667 12.2761 15.1667 12C15.1667 11.7239 14.9428 11.5 14.6667 11.5V12.5ZM10 12.5H14.6667V11.5H10V12.5Z"})]})},lm={colors:{surface1:"#ffffff",surface2:"#EFEFEF",surface3:"#F3F3F3",disabled:"#C5C5C5",base:"#323232",clickable:"#808080",hover:"#4D4D4D",accent:"#3973E0",error:"#EA3323",errorSurface:"#FCF1F0",warning:"#6A4516",warningSurface:"#FEF2C0"},syntax:{plain:"#151515",comment:{color:"#999",fontStyle:"italic"},keyword:"#7C5AE3",tag:"#0971F1",punctuation:"#3B3B3B",definition:"#85A600",property:"#3B3B3B",static:"#3B3B3B",string:"#2E6BD0"},font:{body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',size:"13px",lineHeight:"20px"}},lg={colors:{surface1:"#151515",surface2:"#252525",surface3:"#2F2F2F",disabled:"#4D4D4D",base:"#808080",clickable:"#999999",hover:"#C5C5C5",accent:"#E5E5E5",error:"#FFB4A6",errorSurface:"#690000",warning:"#E7C400",warningSurface:"#3A3000"},syntax:{plain:"#FFFFFF",comment:{color:"#757575",fontStyle:"italic"},keyword:"#77B7D7",tag:"#DFAB5C",punctuation:"#ffffff",definition:"#86D9CA",property:"#77B7D7",static:"#C64640",string:"#977CDC"},font:{body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'"Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',size:"13px",lineHeight:"20px"}},lO={light:lm,dark:lg,auto:"undefined"!=typeof window&&(null===(e_=null==window?void 0:window.matchMedia)||void 0===e_?void 0:e_.call(window,"(prefers-color-scheme: dark)").matches)?lg:lm},getFileName=function(h){var d=h.lastIndexOf("/");return h.slice(d+1)},calculateNearestUniquePath=function(h,d){var _=("/"===h[0]?h.slice(1):h).split("/"),V=[];if(1===_.length)V.unshift(_[0]);else for(var ee=0;ee<d.length;ee++)for(var er=d[ee].split("/"),eo=1;eo<=_.length;eo++){var ec=_[_.length-eo],eh=er[er.length-eo];if(V.length<eo&&V.unshift(ec),ec!==eh)break}return V.length<_.length&&V.unshift(".."),V.join("/")},isDarkColor=function(h){var d=0,_=0,V=0;if(h.startsWith("#")){if(h.length<7)return!0;d=parseInt(h.substr(1,2),16),_=parseInt(h.substr(3,2),16),V=parseInt(h.substr(5,2),16)}else{var ee=h.replace("rgb(","").replace("rgba(","").replace(")","").split(",");if(ee.length<3)return!0;d=parseInt(ee[0],10),_=parseInt(ee[1],10),V=parseInt(ee[2],10)}return(299*d+587*_+114*V)/1e3<128},ly=0,generateRandomId=function(){return(+(Date.now().toString(10).substr(0,4)+ly++)).toString(16)},dist_toString=function(){return""},lv=Object.getOwnPropertyDescriptors({toString:dist_toString});Object.defineProperties(dist_toString,lv);var lb=(ew=(h=>{let d=!1,_=nd(h,h=>{d=!0;let _="prefix"in(h="object"==typeof h&&h||{})?String(h.prefix):"",V="object"==typeof h.media&&h.media||{},ee="object"==typeof h.root?h.root||null:globalThis.document||null,er="object"==typeof h.theme&&h.theme||{},eo={prefix:_,media:V,theme:er,themeMap:"object"==typeof h.themeMap&&h.themeMap||{...tK},utils:"object"==typeof h.utils&&h.utils||{}},ec=T(ee),eh={css:C(eo,ec),globalCss:N(eo,ec),keyframes:G(eo,ec),createTheme:U(eo,ec),reset(){ec.reset(),eh.theme.toString()},theme:{},sheet:ec,config:eo,prefix:_,getCssText:ec.toString,toString:ec.toString};return String(eh.theme=eh.createTheme(er)),eh});return d||_.reset(),_})({prefix:"sp"})).createTheme,lS=ew.css,l_=(ew.getCssText,ew.keyframes),lw={space:Array(11).fill(" ").reduce(function(h,d,_){var V;return __assign(__assign({},h),((V={})[_+1]="".concat((_+1)*4,"px"),V))},{}),border:{radius:"4px"},layout:{height:"300px",headerHeight:"40px"},transitions:{default:"150ms ease"},zIndices:{base:"1",overlay:"2",top:"3"}},standardizeStitchesTheme=function(h){var d=Object.entries(h.syntax).reduce(function(h,d){var _,V=d[0],ee=d[1],er=((_={})["color-".concat(V)]=ee,_);return"object"==typeof ee&&(er=Object.entries(ee).reduce(function(h,d){var _,ee=d[0],er=d[1];return __assign(__assign({},h),((_={})["".concat(ee,"-").concat(V)]=er,_))},{})),__assign(__assign({},h),er)},{});return __assign(__assign({},lw),{colors:h.colors,font:h.font,syntax:d})},standardizeTheme=function(h){if(void 0===h&&(h="light"),"string"==typeof h){var d,_,V,ee,er,eo=lO[h];if(!eo)throw Error("[sandpack-react]: invalid theme '".concat(h,"' provided."));return{theme:eo,id:h,mode:isDarkColor(eo.colors.surface1)?"dark":"light"}}var ec=isDarkColor(null!==(_=null===(d=null==h?void 0:h.colors)||void 0===d?void 0:d.surface1)&&void 0!==_?_:lm.colors.surface1)?"dark":"light",eh="dark"===ec?lg:lm,ep={colors:__assign(__assign({},eh.colors),null!==(V=null==h?void 0:h.colors)&&void 0!==V?V:{}),syntax:__assign(__assign({},eh.syntax),null!==(ee=null==h?void 0:h.syntax)&&void 0!==ee?ee:{}),font:__assign(__assign({},eh.font),null!==(er=null==h?void 0:h.font)&&void 0!==er?er:{})},ef=h?simpleHashFunction(JSON.stringify(ep)):"default";return{theme:ep,id:"sp-".concat(ef),mode:ec}},simpleHashFunction=function(h){for(var d=0,_=0;_<h.length;d&=d)d=31*d+h.charCodeAt(_++);return Math.abs(d)},fakeCss=function(){return""};fakeCss.toString=fakeCss;var lx=(0,eF.createContext)({}),ClassNamesProvider=function(h){var d=h.children,_=h.classes;return(0,ej.jsx)(lx.Provider,{value:_||{},children:d})},useClassNames=function(){var h=(0,eF.useContext)(lx);return function(d,_){void 0===_&&(_=[]);var V="".concat("sp","-").concat(d);return joinClassNames.apply(void 0,__spreadArray(__spreadArray([],_,!1),[V,h[V]],!1))}},joinClassNames=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];return h.filter(Boolean).join(" ")},lk=lS({all:"initial",fontSize:"$font$size",fontFamily:"$font$body",display:"block",boxSizing:"border-box",textRendering:"optimizeLegibility",WebkitTapHighlightColor:"transparent",WebkitFontSmoothing:"subpixel-antialiased",variants:{variant:{dark:{colorScheme:"dark"},light:{colorScheme:"light"}}},"@media screen and (min-resolution: 2dppx)":{WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale"},"*":{boxSizing:"border-box"},".sp-wrapper:focus":{outline:"0"}}),lT=eF.createContext({theme:lm,id:"light",mode:"light"}),SandpackThemeProvider=function(h){var d=h.theme,_=h.children,V=h.className,ee=__rest(h,["theme","children","className"]),er=eF.useState(d),eo=er[0],ec=er[1],eh=standardizeTheme(eo),ep=eh.theme,ef=eh.id,em=eh.mode,eg=useClassNames(),eO=eF.useMemo(function(){return lb(ef,standardizeStitchesTheme(ep))},[ep,ef]);return eF.useEffect(function(){if("auto"===d){var colorSchemeChange=function(h){ec(h.matches?"dark":"light")};return window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",colorSchemeChange),function(){window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",colorSchemeChange)}}},[d]),(0,ej.jsx)(lT.Provider,{value:{theme:ep,id:ef,mode:em},children:(0,ej.jsx)("div",__assign({className:eg("wrapper",[eO,lk({variant:em}),V])},ee,{children:_}))})};lT.Consumer;var lE={"/styles.css":{code:"body {\n  font-family: sans-serif;\n  -webkit-font-smoothing: auto;\n  -moz-font-smoothing: auto;\n  -moz-osx-font-smoothing: grayscale;\n  font-smoothing: auto;\n  text-rendering: optimizeLegibility;\n  font-smooth: always;\n  -webkit-tap-highlight-color: transparent;\n  -webkit-touch-callout: none;\n}\n\nh1 {\n  font-size: 1.5rem;\n}"}},lC={files:{"/src/styles.css":lE["/styles.css"],"/src/pages/index.astro":{code:'---\nimport "../styles.css";\nconst data = "world";\n---\n\n<h1>Hello {data}</h1>\n\n<style>\n  h1 {\n    font-size: 1.5rem;\n  }\n</style>'},".env":{code:'ASTRO_TELEMETRY_DISABLED="1"'},"/package.json":{code:JSON.stringify({dependencies:{astro:"^1.6.12","esbuild-wasm":"^0.15.16"},scripts:{dev:"astro dev",start:"astro dev",build:"astro build",preview:"astro preview",astro:"astro"}})}},main:"/src/pages/index.astro",environment:"node"},lP={files:__assign(__assign({},lE),{"/pages/_app.js":{code:"import '../styles.css'\n\nexport default function MyApp({ Component, pageProps }) {\n  return <Component {...pageProps} />\n}"},"/pages/index.js":{code:'export default function Home({ data }) {\n  return (\n    <div>\n      <h1>Hello {data}</h1>\n    </div>\n  );\n}\n  \nexport function getServerSideProps() {\n  return {\n    props: { data: "world" },\n  }\n}\n'},"/next.config.js":{code:"/** @type {import('next').NextConfig} */\nconst nextConfig = {\n  reactStrictMode: true,\n  swcMinify: true,\n}\n\nmodule.exports = nextConfig\n"},"/package.json":{code:JSON.stringify({name:"my-app",version:"0.1.0",private:!0,scripts:{dev:"NEXT_TELEMETRY_DISABLED=1 next dev",build:"next build",start:"next start",lint:"next lint"},dependencies:{next:"12.1.6",react:"18.2.0","react-dom":"18.2.0","@next/swc-wasm-nodejs":"12.1.6"}})}}),main:"/pages/index.js",environment:"node"},lI={files:{"/index.js":{code:"const http = require('http');\n\nconst hostname = '127.0.0.1';\nconst port = 3000;\n\nconst server = http.createServer((req, res) => {\n  res.statusCode = 200;\n  res.setHeader('Content-Type', 'text/html');\n  res.end('Hello world');\n});\n\nserver.listen(port, hostname, () => {\n  console.log(`Server running at http://${hostname}:${port}/`);\n});"},"/package.json":{code:JSON.stringify({dependencies:{},scripts:{start:"node index.js"},main:"index.js"})}},main:"/index.js",environment:"node"},lR={files:__assign(__assign({},lE),{"/index.js":{code:'import "./styles.css";\n\ndocument.getElementById("app").innerHTML = `\n<h1>Hello world</h1>\n`;\n'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/index.js"></script>\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"vite build",preview:"vite preview"},devDependencies:{vite:"4.1.4","esbuild-wasm":"0.17.12"}})}}),main:"/index.js",environment:"node"},lA={files:__assign(__assign({},lE),{"/App.jsx":{code:'export default function App() {\n  const data = "world"\n\n  return <h1>Hello {data}</h1>\n}\n'},"/index.jsx":{code:'import { render } from "preact";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = document.getElementById("root");\nrender(<App />, root);\n'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="root"></div>\n    <script type="module" src="/index.jsx"></script>\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"vite build",preview:"vite preview"},dependencies:{preact:"^10.16.0"},devDependencies:{"@preact/preset-vite":"^2.5.0",vite:"4.1.4","esbuild-wasm":"0.17.12"}})},"/vite.config.js":{code:"import { defineConfig } from \"vite\";\nimport preact from '@preact/preset-vite'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [preact()],\n});\n"}}),main:"/App.jsx",environment:"node"},l$={files:__assign(__assign({},lE),{"/App.tsx":{code:'export default function App() {\n  const data: string = "world"\n\n  return <h1>Hello {data}</h1>\n}\n'},"/index.tsx":{code:'import { render } from "preact";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = document.getElementById("root") as HTMLElement;\nrender(<App />, root);\n'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="root"></div>\n    <script type="module" src="/index.tsx"></script>\n  </body>\n</html>\n'},"/tsconfig.json":{code:JSON.stringify({compilerOptions:{target:"ESNext",useDefineForClassFields:!0,lib:["DOM","DOM.Iterable","ESNext"],allowJs:!1,skipLibCheck:!0,esModuleInterop:!1,allowSyntheticDefaultImports:!0,strict:!0,forceConsistentCasingInFileNames:!0,module:"ESNext",moduleResolution:"Node",resolveJsonModule:!0,isolatedModules:!0,noEmit:!0,jsx:"react-jsx",jsxImportSource:"preact"},include:["src"],references:[{path:"./tsconfig.node.json"}]},null,2)},"/tsconfig.node.json":{code:JSON.stringify({compilerOptions:{composite:!0,module:"ESNext",moduleResolution:"Node",allowSyntheticDefaultImports:!0},include:["vite.config.ts"]},null,2)},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"tsc && vite build",preview:"vite preview"},dependencies:{preact:"^10.16.0"},devDependencies:{"@preact/preset-vite":"^2.5.0",typescript:"^4.9.5",vite:"4.1.4","esbuild-wasm":"^0.17.12"}},null,2)},"/vite-env.d.ts":{code:'/// <reference types="vite/client" />'},"/vite.config.ts":{code:"import { defineConfig } from 'vite'\nimport preact from '@preact/preset-vite'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [preact()],\n})\n"}}),main:"/App.tsx",environment:"node"},lN={files:__assign(__assign({},lE),{"/App.jsx":{code:'export default function App() {\n  const data = "world"\n\n  return <h1>Hello {data}</h1>\n}\n'},"/index.jsx":{code:'import { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = createRoot(document.getElementById("root"));\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="root"></div>\n    <script type="module" src="/index.jsx"></script>\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"vite build",preview:"vite preview"},dependencies:{react:"^18.2.0","react-dom":"^18.2.0"},devDependencies:{"@vitejs/plugin-react":"3.1.0",vite:"4.1.4","esbuild-wasm":"0.17.12"}})},"/vite.config.js":{code:'import { defineConfig } from "vite";\nimport react from "@vitejs/plugin-react";\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n});\n'}}),main:"/App.jsx",environment:"node"},lM={files:__assign(__assign({},lE),{"/App.tsx":{code:'export default function App() {\n  const data: string = "world"\n\n  return <h1>Hello {data}</h1>\n}\n'},"/index.tsx":{code:'import { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\n\nimport App from "./App";\nimport React from "react";\n\nconst root = createRoot(document.getElementById("root") as HTMLElement);\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n'},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="root"></div>\n    <script type="module" src="/index.tsx"></script>\n  </body>\n</html>\n'},"/tsconfig.json":{code:JSON.stringify({compilerOptions:{target:"ESNext",useDefineForClassFields:!0,lib:["DOM","DOM.Iterable","ESNext"],allowJs:!1,skipLibCheck:!0,esModuleInterop:!1,allowSyntheticDefaultImports:!0,strict:!0,forceConsistentCasingInFileNames:!0,module:"ESNext",moduleResolution:"Node",resolveJsonModule:!0,isolatedModules:!0,noEmit:!0,jsx:"react-jsx"},include:["src"],references:[{path:"./tsconfig.node.json"}]},null,2)},"/tsconfig.node.json":{code:JSON.stringify({compilerOptions:{composite:!0,module:"ESNext",moduleResolution:"Node",allowSyntheticDefaultImports:!0},include:["vite.config.ts"]},null,2)},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"tsc && vite build",preview:"vite preview"},dependencies:{react:"^18.2.0","react-dom":"^18.2.0"},devDependencies:{"@types/react":"^18.0.28","@types/react-dom":"^18.0.11","@vitejs/plugin-react":"^3.1.0",typescript:"^4.9.5",vite:"4.1.4","esbuild-wasm":"^0.17.12"}},null,2)},"/vite-env.d.ts":{code:'/// <reference types="vite/client" />'},"/vite.config.ts":{code:"import { defineConfig } from 'vite'\nimport react from '@vitejs/plugin-react'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [react()],\n})\n"}}),main:"/App.tsx",environment:"node"},lQ={files:{"/src/styles.css":lE["/styles.css"],"/src/App.svelte":{code:'<script>\nconst data = "world";\n</script>\n\n<h1>Hello {data}</h1>\n\n<style>\nh1 {\n  font-size: 1.5rem;\n}\n</style>'},"/src/main.js":{code:"import App from './App.svelte'\nimport \"./styles.css\"\n\nconst app = new App({\n  target: document.getElementById('app'),\n})\n\nexport default app"},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/src/main.js"></script>\n  </body>\n</html>\n'},"/vite.config.js":{code:"import { defineConfig } from 'vite'\nimport { svelte } from '@sveltejs/vite-plugin-svelte'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [svelte()],\n})"},"/package.json":{code:JSON.stringify({type:"module",scripts:{dev:"vite"},devDependencies:{"@sveltejs/vite-plugin-svelte":"^2.0.2",svelte:"^3.55.1",vite:"4.0.4","esbuild-wasm":"^0.17.12"}})}},main:"/src/App.svelte",environment:"node"},lD={files:{"/src/styles.css":lE["/styles.css"],"/src/App.svelte":{code:'<script lang="ts">\nconst data: string = "world";\n</script>\n\n<h1>Hello {data}</h1>\n\n<style>\nh1 {\n  font-size: 1.5rem;\n}\n</style>'},"/src/main.ts":{code:"import App from './App.svelte'\nimport \"./styles.css\"\n\nconst app = new App({\n  target: document.getElementById('app'),\n})\n\nexport default app"},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/src/main.ts"></script>\n  </body>\n</html>\n'},"/vite-env.d.ts":{code:'/// <reference types="svelte" />\n/// <reference types="vite/client" />'},"svelte.config.js":{code:"import { vitePreprocess } from '@sveltejs/vite-plugin-svelte'\n\nexport default {\n  // Consult https://svelte.dev/docs#compile-time-svelte-preprocess\n  // for more information about preprocessors\n  preprocess: vitePreprocess(),\n}\n"},"/vite.config.ts":{code:"import { defineConfig } from 'vite'\nimport { svelte } from '@sveltejs/vite-plugin-svelte'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [svelte()],\n})"},"tsconfig.json":{code:JSON.stringify({extends:"@tsconfig/svelte/tsconfig.json",compilerOptions:{target:"ESNext",useDefineForClassFields:!0,module:"ESNext",resolveJsonModule:!0,allowJs:!0,checkJs:!0,isolatedModules:!0},include:["src/**/*.d.ts","src/**/*.ts","src/**/*.js","src/**/*.svelte"],references:[{path:"./tsconfig.node.json"}]},null,2)},"tsconfig.node.json":{code:JSON.stringify({compilerOptions:{composite:!0,module:"ESNext",moduleResolution:"Node"},include:["vite.config.ts"]},null,2)},"/package.json":{code:JSON.stringify({type:"module",scripts:{dev:"vite"},devDependencies:{"@sveltejs/vite-plugin-svelte":"^2.0.2","@tsconfig/svelte":"^3.0.0",svelte:"^3.55.1","svelte-check":"^2.10.3",tslib:"^2.5.0",vite:"4.1.4","esbuild-wasm":"^0.17.12"}},null,2)}},main:"/src/App.svelte",environment:"node"},lj={files:{"/src/styles.css":lE["/styles.css"],"/src/App.vue":{code:'<script setup>\nimport { ref } from "vue";\n\nconst data = ref("world");\n</script>\n\n<template>\n  <h1>Hello {{ data }}</h1>\n</template>\n\n<style>\nh1 {\n  font-size: 1.5rem;\n}\n</style>'},"/src/main.js":{code:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport \"./styles.css\"\n            \ncreateApp(App).mount('#app')            \n"},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/src/main.js"></script>\n  </body>\n</html>\n'},"/vite.config.js":{code:"import { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [vue()]\n})\n"},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"vite build",preview:"vite preview"},dependencies:{vue:"^3.2.45"},devDependencies:{"@vitejs/plugin-vue":"3.2.0",vite:"4.1.4","esbuild-wasm":"0.17.12"}})}},main:"/src/App.vue",environment:"node"},lL={files:{"/src/styles.css":lE["/styles.css"],"/src/App.vue":{code:'<script setup lang="ts">\nimport { ref } from "vue";\n\nconst data = ref<string>("world");\n</script>\n\n<template>\n  <h1>Hello {{ data }}</h1>\n</template>\n\n<style>\nh1 {\n  font-size: 1.5rem;\n}\n</style>'},"/src/main.ts":{code:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport \"./styles.css\"\n\ncreateApp(App).mount('#app')\n"},"/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8" />\n    <meta name="viewport" content="width=device-width, initial-scale=1.0" />\n    <title>Vite App</title>\n  </head>\n  <body>\n    <div id="app"></div>\n    <script type="module" src="/src/main.ts"></script>\n  </body>\n</html>\n'},"/vite-env.d.ts":{code:'/// <reference types="vite/client" />'},"/vite.config.ts":{code:"import { defineConfig } from 'vite'\nimport vue from '@vitejs/plugin-vue'\n\n// https://vitejs.dev/config/\nexport default defineConfig({\n  plugins: [vue()]\n})\n"},"tsconfig.json":{code:JSON.stringify({compilerOptions:{target:"ESNext",useDefineForClassFields:!0,module:"ESNext",moduleResolution:"Node",strict:!0,jsx:"preserve",resolveJsonModule:!0,isolatedModules:!0,esModuleInterop:!0,lib:["ESNext","DOM"],skipLibCheck:!0,noEmit:!0},include:["src/**/*.ts","src/**/*.d.ts","src/**/*.tsx","src/**/*.vue"],references:[{path:"./tsconfig.node.json"}]},null,2)},"tsconfig.node.json":{code:JSON.stringify({compilerOptions:{composite:!0,module:"ESNext",moduleResolution:"Node",allowSyntheticDefaultImports:!0},include:["vite.config.ts"]},null,2)},"/package.json":{code:JSON.stringify({scripts:{dev:"vite",build:"tsc && vite build",preview:"vite preview"},dependencies:{vue:"^3.2.47"},devDependencies:{"@vitejs/plugin-vue":"^4.0.0",vite:"4.1.4","vue-tsc":"^1.2.0",typescript:"^4.9.5","esbuild-wasm":"^0.17.12"}},null,2)}},main:"/src/App.vue",environment:"node"},lF={files:{"/src/app/app.component.css":lE["/styles.css"],"/src/app/app.component.html":{code:"<div>\n<h1>{{ helloWorld }}</h1>\n</div>     \n"},"/src/app/app.component.ts":{code:'import { Component } from "@angular/core";\n\n@Component({\n  selector: "app-root",\n  templateUrl: "./app.component.html",\n  styleUrls: ["./app.component.css"]\n})\nexport class AppComponent {\n  helloWorld = "Hello world";\n}           \n'},"/src/app/app.module.ts":{code:'import { BrowserModule } from "@angular/platform-browser";\nimport { NgModule } from "@angular/core";\n      \nimport { AppComponent } from "./app.component";\n      \n@NgModule({\n  declarations: [AppComponent],\n  imports: [BrowserModule],\n  providers: [],\n  bootstrap: [AppComponent]\n})\nexport class AppModule {}       \n'},"/src/index.html":{code:'<!doctype html>\n<html lang="en">\n      \n<head>\n  <meta charset="utf-8">\n  <title>Angular</title>\n  <base href="/">\n      \n  <meta name="viewport" content="width=device-width, initial-scale=1">\n  <link rel="icon" type="image/x-icon" href="favicon.ico">\n</head>\n      \n<body>\n   <app-root></app-root>\n</body>\n      \n</html>\n'},"/src/main.ts":{code:'import { enableProdMode } from "@angular/core";\nimport { platformBrowserDynamic } from "@angular/platform-browser-dynamic";\n      \nimport { AppModule } from "./app/app.module";      \n\nplatformBrowserDynamic()\n  .bootstrapModule(AppModule)\n  .catch(err => console.log(err));\n      \n'},"/src/polyfills.ts":{code:'import "core-js/proposals/reflect-metadata";   \n      import "zone.js/dist/zone";\n'},"/package.json":{code:JSON.stringify({dependencies:{"@angular/core":"^11.2.0","@angular/platform-browser":"^11.2.0","@angular/platform-browser-dynamic":"^11.2.0","@angular/common":"^11.2.0","@angular/compiler":"^11.2.0","zone.js":"0.11.3","core-js":"3.8.3",rxjs:"6.6.3"},main:"/src/main.ts"})}},main:"/src/app/app.component.ts",environment:"angular-cli"},lZ={files:__assign(__assign({},lE),{"/App.js":{code:"export default function App() {\n  return <h1>Hello world</h1>\n}\n"},"/index.js":{code:'import React, { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = createRoot(document.getElementById("root"));\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);'},"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Document</title>\n  </head>\n  <body>\n    <div id="root"></div>\n  </body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{react:"^18.0.0","react-dom":"^18.0.0","react-scripts":"^5.0.0"},main:"/index.js"})}}),main:"/App.js",environment:"create-react-app"},lV={files:__assign(__assign({},lE),{"tsconfig.json":{code:'{\n  "include": [\n    "./**/*"\n  ],\n  "compilerOptions": {\n    "strict": true,\n    "esModuleInterop": true,\n    "lib": [ "dom", "es2015" ],\n    "jsx": "react-jsx"\n  }\n}'},"/App.tsx":{code:"export default function App(): JSX.Element {\n  return <h1>Hello world</h1>\n}\n"},"/index.tsx":{code:'import React, { StrictMode } from "react";\nimport { createRoot } from "react-dom/client";\nimport "./styles.css";\n\nimport App from "./App";\n\nconst root = createRoot(document.getElementById("root"));\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);'},"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="UTF-8">\n    <meta name="viewport" content="width=device-width, initial-scale=1.0">\n    <title>Document</title>\n  </head>\n  <body>\n    <div id="root"></div>\n  </body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{react:"^18.0.0","react-dom":"^18.0.0","react-scripts":"^4.0.0"},devDependencies:{"@types/react":"^18.0.0","@types/react-dom":"^18.0.0",typescript:"^4.0.0"},main:"/index.tsx"})}}),main:"/App.tsx",environment:"create-react-app"},lB={files:__assign(__assign({},lE),{"/App.tsx":{code:'import { Component } from "solid-js";\n\nconst App: Component = () => {\n  return <h1>Hello world</h1>\n};\n\nexport default App;'},"/index.tsx":{code:'import { render } from "solid-js/web";\nimport App from "./App";\n\nimport "./styles.css";\n\nrender(() => <App />, document.getElementById("app"));'},"/index.html":{code:'<html>\n<head>\n  <title>Parcel Sandbox</title>\n  <meta charset="UTF-8" />\n</head>\n<body>\n  <div id="app"></div>\n  <script src="src/index.tsx"></script>\n</body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{"solid-js":"1.3.15"},main:"/index.tsx"})}}),main:"/App.tsx",environment:"solid"},lW={files:__assign(__assign({},lE),{"/App.svelte":{code:"<style>\n  h1 {\n    font-size: 1.5rem;\n  }\n</style>\n\n<script>\n  let name = 'world';\n</script>\n\n<main>\n  <h1>Hello {name}</h1>\n</main>"},"/index.js":{code:'import App from "./App.svelte";\nimport "./styles.css";\n\nconst app = new App({\n  target: document.body\n});\n\nexport default app;\n      '},"/public/index.html":{code:'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf8" />\n    <meta name="viewport" content="width=device-width" />\n\n    <title>Svelte app</title>\n\n    <link rel="stylesheet" href="public/bundle.css" />\n  </head>\n\n  <body>\n    <script src="bundle.js"></script>\n  </body>\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{svelte:"^3.0.0"},main:"/index.js"})}}),main:"/App.svelte",environment:"svelte"},lU={files:{"tsconfig.json":{code:'{\n  "include": [\n    "./**/*"\n  ],\n  "compilerOptions": {\n    "strict": true,\n    "esModuleInterop": true,\n    "lib": [ "dom", "es2015" ],\n    "jsx": "react-jsx"\n  }\n}'},"/add.ts":{code:"export const add = (a: number, b: number): number => a + b;"},"/add.test.ts":{code:"import { add } from './add';\n\ndescribe('add', () => {\n  test('Commutative Law of Addition', () => {\n    expect(add(1, 2)).toBe(add(2, 1));\n  });\n});"},"package.json":{code:JSON.stringify({dependencies:{},devDependencies:{typescript:"^4.0.0"},main:"/add.ts"})}},main:"/add.test.ts",environment:"parcel",mode:"tests"},lz={files:__assign(__assign({},lE),{"/index.js":{code:'import "./styles.css";\n\ndocument.getElementById("app").innerHTML = `\n<h1>Hello world</h1>\n`;\n'},"/index.html":{code:'<!DOCTYPE html>\n<html>\n\n<head>\n  <title>Parcel Sandbox</title>\n  <meta charset="UTF-8" />\n</head>\n\n<body>\n  <div id="app"></div>\n\n  <script src="index.js">\n  </script>\n</body>\n\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{},main:"/index.js"})}}),main:"/index.js",environment:"parcel"},lq={files:__assign(__assign({},lE),{"tsconfig.json":{code:'{\n  "compilerOptions": {\n    "strict": true,\n    "module": "commonjs",\n    "jsx": "preserve",\n    "esModuleInterop": true,\n    "sourceMap": true,\n    "allowJs": true,\n    "lib": [\n      "es6",\n      "dom"\n    ],\n    "rootDir": "src",\n    "moduleResolution": "node"\n  }\n}'},"/index.ts":{code:'import "./styles.css";\n\ndocument.getElementById("app").innerHTML = `\n<h1>Hello world</h1>\n`;\n'},"/index.html":{code:'<!DOCTYPE html>\n<html>\n\n<head>\n  <title>Parcel Sandbox</title>\n  <meta charset="UTF-8" />\n</head>\n\n<body>\n  <div id="app"></div>\n\n  <script src="index.ts">\n  </script>\n</body>\n\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{},devDependencies:{typescript:"^4.0.0"},main:"/index.ts"})}}),main:"/index.ts",environment:"parcel"},lX={files:{"/src/styles.css":lE["/styles.css"],"/src/App.vue":{code:"<template>\n  <h1>Hello {{ msg }}</h1>\n</template>\n\n<script setup>\nimport { ref } from 'vue';\nconst msg = ref('world');\n</script>"},"/src/main.js":{code:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport \"./styles.css\";\n\ncreateApp(App).mount('#app')\n"},"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width,initial-scale=1.0" />\n    <title>codesandbox</title>\n  </head>\n  <body>\n    <noscript>\n      <strong\n        >We\'re sorry but codesandbox doesn\'t work properly without JavaScript\n        enabled. Please enable it to continue.</strong\n      >\n    </noscript>\n    <div id="app"></div>\n    <!-- built files will be auto injected -->\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({name:"vue3",version:"0.1.0",private:!0,main:"/src/main.js",scripts:{serve:"vue-cli-service serve",build:"vue-cli-service build"},dependencies:{"core-js":"^3.26.1",vue:"^3.2.45"},devDependencies:{"@vue/cli-plugin-babel":"^5.0.8","@vue/cli-service":"^5.0.8"}})}},main:"/src/App.vue",environment:"vue-cli"},lY={files:{"/src/styles.css":lE["/styles.css"],"/src/App.vue":{code:"<template>\n  <h1>Hello {{ msg }}</h1>\n</template>\n\n<script setup lang=\"ts\">\nimport { ref } from 'vue';\nconst msg = ref<string>('world');\n</script>"},"/src/main.ts":{code:"import { createApp } from 'vue'\nimport App from './App.vue'\nimport \"./styles.css\";\n\ncreateApp(App).mount('#app')\n"},"/src/shims-vue.d.ts":'/* eslint-disable */\ndeclare module "*.vue" {\n  import type { DefineComponent } from "vue";\n  const component: DefineComponent<{}, {}, any>;\n  export default component;\n}',"/public/index.html":{code:'<!DOCTYPE html>\n<html lang="en">\n  <head>\n    <meta charset="utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <meta name="viewport" content="width=device-width,initial-scale=1.0" />\n    <title>codesandbox</title>\n  </head>\n  <body>\n    <noscript>\n      <strong\n        >We\'re sorry but codesandbox doesn\'t work properly without JavaScript\n        enabled. Please enable it to continue.</strong\n      >\n    </noscript>\n    <div id="app"></div>\n    <!-- built files will be auto injected -->\n  </body>\n</html>\n'},"/package.json":{code:JSON.stringify({name:"vue3-ts",version:"0.1.0",private:!0,main:"/src/main.ts",scripts:{serve:"vue-cli-service serve",build:"vue-cli-service build"},dependencies:{"core-js":"^3.26.1",vue:"^3.2.45"},devDependencies:{"@vue/cli-plugin-babel":"^5.0.8","@vue/cli-plugin-typescript":"^5.0.8","@vue/cli-service":"^5.0.8",typescript:"^4.9.3"}})},"/tsconfig.json":{code:JSON.stringify({compilerOptions:{target:"esnext",module:"esnext",strict:!0,jsx:"preserve",moduleResolution:"node",experimentalDecorators:!0,skipLibCheck:!0,esModuleInterop:!0,allowSyntheticDefaultImports:!0,forceConsistentCasingInFileNames:!0,useDefineForClassFields:!0,sourceMap:!1,baseUrl:".",types:["webpack-env"],paths:{"@/*":["src/*"]},lib:["esnext","dom","dom.iterable","scripthost"]},include:["src/**/*.ts","src/**/*.tsx","src/**/*.vue","tests/**/*.ts","tests/**/*.tsx"],exclude:["node_modules"]})}},main:"/src/App.vue",environment:"vue-cli"},lG={static:{files:__assign(__assign({},lE),{"/index.html":{code:'<!DOCTYPE html>\n<html>\n\n<head>\n  <title>Parcel Sandbox</title>\n  <meta charset="UTF-8" />\n  <link rel="stylesheet" href="/styles.css" />\n</head>\n\n<body>\n  <h1>Hello world</h1>\n</body>\n\n</html>'},"/package.json":{code:JSON.stringify({dependencies:{},main:"/index.html"})}}),main:"/index.html",environment:"static"},angular:lF,react:lZ,"react-ts":lV,solid:lB,svelte:lW,"test-ts":lU,"vanilla-ts":lq,vanilla:lz,vue:lX,"vue-ts":lY,node:lI,nextjs:lP,vite:lR,"vite-react":lN,"vite-react-ts":lM,"vite-preact":lA,"vite-preact-ts":l$,"vite-vue":lj,"vite-vue-ts":lL,"vite-svelte":lQ,"vite-svelte-ts":lD,astro:lC},getSandpackStateFromProps=function(h){var d,_,V,ee,er,eo,ec=(0,nm.f)(h.files),eh=combineTemplateFilesToSetup({template:h.template,customSetup:h.customSetup,files:ec}),ep=(0,nm.f)(null!==(_=null===(d=h.options)||void 0===d?void 0:d.visibleFiles)&&void 0!==_?_:[]),ef=(null===(V=h.options)||void 0===V?void 0:V.activeFile)?resolveFile(null===(ee=h.options)||void 0===ee?void 0:ee.activeFile,eh.files):void 0;0===ep.length&&ec&&Object.keys(ec).forEach(function(h){var d=ec[h];if("string"==typeof d){ep.push(h);return}!ef&&d.active&&(ef=h,!0===d.hidden&&ep.push(h)),d.hidden||ep.push(h)}),0===ep.length&&(ep=[eh.main]),eh.entry&&!eh.files[eh.entry]&&(eh.entry=resolveFile(eh.entry,eh.files)),!ef&&eh.main&&(ef=eh.main),ef&&eh.files[ef]||(ef=ep[0]),ep.includes(ef)||ep.push(ef);var em=(0,nm.d)(eh.files,null!==(er=eh.dependencies)&&void 0!==er?er:{},null!==(eo=eh.devDependencies)&&void 0!==eo?eo:{},eh.entry);return{visibleFiles:ep.filter(function(h){return em[h]}),activeFile:ef,files:em,environment:eh.environment,shouldUpdatePreview:!0}},resolveFile=function(h,d){var _=(0,nm.f)(d),V=(0,nm.f)(h);if(V in _)return V;if(!h)return null;for(var ee=null,er=0,eo=[".js",".jsx",".ts",".tsx"];!ee&&er<eo.length;){var ec=V.split(".")[0],eh="".concat(ec).concat(eo[er]);void 0!==_[eh]&&(ee=eh),er++}return ee},combineTemplateFilesToSetup=function(h){var d=h.files,_=h.template,V=h.customSetup;if(!_){if(!V){var ee=lG.vanilla;return __assign(__assign({},ee),{files:__assign(__assign({},ee.files),convertedFilesToBundlerFiles(d))})}if(!d||0===Object.keys(d).length)throw Error("[sandpack-react]: without a template, you must pass at least one file");return __assign(__assign({},V),{files:convertedFilesToBundlerFiles(d)})}var er=lG[_];if(!er)throw Error('[sandpack-react]: invalid template "'.concat(_,'" provided'));return V||d?{files:convertedFilesToBundlerFiles(__assign(__assign({},er.files),d)),dependencies:__assign(__assign({},er.dependencies),null==V?void 0:V.dependencies),devDependencies:__assign(__assign({},er.devDependencies),null==V?void 0:V.devDependencies),entry:(0,nm.f)(null==V?void 0:V.entry),main:er.main,environment:(null==V?void 0:V.environment)||er.environment}:er},convertedFilesToBundlerFiles=function(h){return h?Object.keys(h).reduce(function(d,_){return"string"==typeof h[_]?d[_]={code:h[_]}:d[_]=h[_],d},{}):{}},useAppState=function(h,d){var _=(0,eF.useState)({editorState:"pristine",teamId:h.teamId}),V=_[0],ee=_[1],er=getSandpackStateFromProps(h),eo=(0,np.J)(er.files,d)?"pristine":"dirty";return eo!==V.editorState&&ee(function(h){return __assign(__assign({},h),{editorState:eo})}),V},useClient=function(h,d){var V,ee,er,eo=h.options,ec=h.customSetup,eh=h.teamId,ep=h.sandboxId;null!=eo||(eo={}),null!=ec||(ec={});var ef=(null==eo?void 0:eo.initMode)||"lazy",em=(0,eF.useState)({startRoute:null==eo?void 0:eo.startRoute,bundlerState:void 0,error:null,initMode:ef,reactDevTools:void 0,status:null===(V=null==eo?void 0:eo.autorun)||void 0===V||V?"initial":"idle"}),eg=em[0],eO=em[1],ey=(0,eF.useRef)(null),ev=(0,eF.useRef)(null),eS=(0,eF.useRef)({}),e_=(0,eF.useRef)({}),ew=(0,eF.useRef)(null),ex=(0,eF.useRef)({}),ek=(0,eF.useRef)(),eT=(0,eF.useRef)({global:{}}),eE=(0,eF.useRef)(),eC=(0,eF.useRef)(d.environment),eP=(0,eF.useCallback)(function(h,V,ee){return __awaiter(void 0,void 0,void 0,function(){var er,ef,em,ey,ev;return __generator(this,function(eS){switch(eS.label){case 0:return e_.current[V]&&e_.current[V].destroy(),null!=eo||(eo={}),null!=ec||(ec={}),er=null!==(em=null==eo?void 0:eo.bundlerTimeOut)&&void 0!==em?em:4e4,ew.current&&clearTimeout(ew.current),"function"!=typeof ek.current&&(ew.current=setTimeout(function(){eI(),eO(function(h){return __assign(__assign({},h),{status:"timeout"})})},er)),[4,function(h,d,V){var ee;return void 0===V&&(V={}),(0,nm._)(this,void 0,void 0,function(){var er;return(0,nm.a)(this,function(eo){switch(eo.label){case 0:switch(null!==(ee=d.template)&&void 0!==ee?ee:"parcel"){case"node":return[3,1];case"static":return[3,3]}return[3,5];case 1:return[4,Promise.all([_.e(445),_.e(919)]).then(_.bind(_,6919)).then(function(h){return h.SandpackNode})];case 2:case 4:return er=eo.sent(),[3,7];case 3:return[4,Promise.all([_.e(621),_.e(445),_.e(831)]).then(_.bind(_,9831)).then(function(h){return h.SandpackStatic})];case 5:return[4,_.e(532).then(_.bind(_,532)).then(function(h){return h.SandpackRuntime})];case 6:er=eo.sent(),eo.label=7;case 7:return[2,new er(h,d,V)]}})})}(h,{files:d.files,template:d.environment},{externalResources:eo.externalResources,bundlerURL:eo.bundlerURL,startRoute:null!==(ey=null==ee?void 0:ee.startRoute)&&void 0!==ey?ey:eo.startRoute,fileResolver:eo.fileResolver,skipEval:null!==(ev=eo.skipEval)&&void 0!==ev&&ev,logLevel:eo.logLevel,showOpenInCodeSandbox:!1,showErrorScreen:!0,showLoadingScreen:!1,reactDevTools:eg.reactDevTools,customNpmRegistries:null==ec?void 0:ec.npmRegistries,teamId:eh,sandboxId:ep})];case 1:return ef=eS.sent(),"function"!=typeof ek.current&&(ek.current=ef.listen(handleMessage)),ex.current[V]=ex.current[V]||{},eT.current[V]&&(Object.keys(eT.current[V]).forEach(function(h){var d=eT.current[V][h],_=ef.listen(d);ex.current[V][h]=_}),eT.current[V]={}),Object.entries(eT.current.global).forEach(function(h){var d=h[0],_=h[1],ee=ef.listen(_);ex.current[V][d]=ee}),e_.current[V]=ef,[2]}})})},[d.environment,d.files,eg.reactDevTools]),eI=(0,eF.useCallback)(function(){Object.keys(e_.current).map(unregisterBundler),"function"==typeof ek.current&&(ek.current(),ek.current=void 0)},[]),eR=(0,eF.useCallback)(function(){return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(h){switch(h.label){case 0:return[4,Promise.all(Object.entries(eS.current).map(function(h){var d=h[0],_=h[1],V=_.iframe,ee=_.clientPropsOverride,er=void 0===ee?{}:ee;return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(h){switch(h.label){case 0:return[4,eP(V,d,er)];case 1:return h.sent(),[2]}})})}))];case 1:return h.sent(),eO(function(h){return __assign(__assign({},h),{error:null,status:"running"})}),[2]}})})},[eP]),eA=(0,eF.useCallback)(function(){if(null===(h=null==eo?void 0:eo.autorun)||void 0===h||h){var h,d,_,V=null!==(d=null==eo?void 0:eo.initModeObserverOptions)&&void 0!==d?d:{rootMargin:"1000px 0px"};ey.current&&ev.current&&(null===(_=ey.current)||void 0===_||_.unobserve(ev.current)),ev.current&&"lazy"===eg.initMode?(ey.current=new IntersectionObserver(function(h){var d;h.some(function(h){return h.isIntersecting})&&(eR(),ev.current&&(null===(d=ey.current)||void 0===d||d.unobserve(ev.current)))},V),ey.current.observe(ev.current)):ev.current&&"user-visible"===eg.initMode?(ey.current=new IntersectionObserver(function(h){h.some(function(h){return h.isIntersecting})?eR():(Object.keys(e_.current).map(unregisterBundler),eI())},V),ey.current.observe(ev.current)):eR()}},[null==eo?void 0:eo.autorun,null==eo?void 0:eo.initModeObserverOptions,eR,eg.initMode,eI]),e$=(0,eF.useCallback)(function(h,d,_){return __awaiter(void 0,void 0,void 0,function(){return __generator(this,function(V){switch(V.label){case 0:if(eS.current[d]={iframe:h,clientPropsOverride:_},"running"!==eg.status)return[3,2];return[4,eP(h,d,_)];case 1:V.sent(),V.label=2;case 2:return[2]}})})},[eP,eg.status]),unregisterBundler=function(h){var d,_,V=e_.current[h];V&&(V.destroy(),null===(d=V.iframe.contentWindow)||void 0===d||d.location.replace("about:blank"),V.iframe.removeAttribute("src"),delete e_.current[h]),delete eS.current[h],ew.current&&clearTimeout(ew.current),Object.values(null!==(_=ex.current[h])&&void 0!==_?_:{}).forEach(function(h){Object.values(h).forEach(function(h){return h()})});var ee=Object.keys(e_.current).length>0?"running":"idle";eO(function(h){return __assign(__assign({},h),{status:ee})})},handleMessage=function(h){"start"===h.type?eO(function(h){return __assign(__assign({},h),{error:null})}):"state"===h.type?eO(function(d){return __assign(__assign({},d),{bundlerState:h.state})}):("done"!==h.type||h.compilatonError)&&"connected"!==h.type?"action"===h.type&&"show-error"===h.action?eO(function(d){return __assign(__assign({},d),{error:(0,nm.e)(h)})}):"action"===h.type&&"notification"===h.action&&"error"===h.notificationType&&eO(function(d){return __assign(__assign({},d),{error:{message:h.title}})}):(ew.current&&clearTimeout(ew.current),eO(function(h){return __assign(__assign({},h),{error:null})}))},eN=null!==(ee=null==eo?void 0:eo.recompileMode)&&void 0!==ee?ee:"delayed",eM=null!==(er=null==eo?void 0:eo.recompileDelay)&&void 0!==er?er:500;return(0,eF.useEffect)(function(){if("running"===eg.status&&d.shouldUpdatePreview){if(eC.current!==d.environment&&(eC.current=d.environment,Object.entries(e_.current).forEach(function(h){var d=h[0];e$(h[1].iframe,d)})),"immediate"===eN&&Object.values(e_.current).forEach(function(h){"done"===h.status&&h.updateSandbox({files:d.files,template:d.environment})}),"delayed"===eN){if("undefined"==typeof window)return;window.clearTimeout(eE.current),eE.current=window.setTimeout(function(){Object.values(e_.current).forEach(function(h){"done"===h.status&&h.updateSandbox({files:d.files,template:d.environment})})},eM)}return function(){window.clearTimeout(eE.current)}}},[d.files,d.environment,d.shouldUpdatePreview,eM,eN,e$,eg.status]),(0,eF.useEffect)(function(){ef!==eg.initMode&&(eO(function(h){return __assign(__assign({},h),{initMode:ef})}),eA())},[ef,eA,eg.initMode]),(0,eF.useEffect)(function(){return function(){"function"==typeof ek.current&&ek.current(),ew.current&&clearTimeout(ew.current),eE.current&&clearTimeout(eE.current),ey.current&&ey.current.disconnect()}},[]),[eg,{clients:e_.current,initializeSandpackIframe:eA,runSandpack:eR,registerBundler:e$,unregisterBundler:unregisterBundler,registerReactDevTools:function(h){eO(function(d){return __assign(__assign({},d),{reactDevTools:h})})},addListener:function(h,d){if(d){if(e_.current[d]){var unsubscribeListener=e_.current[d].listen(h);return unsubscribeListener}var _=generateRandomId();eT.current[d]=eT.current[d]||{},ex.current[d]=ex.current[d]||{},eT.current[d][_]=h;var unsubscribeListener=function(){eT.current[d][_]?delete eT.current[d][_]:ex.current[d][_]&&(ex.current[d][_](),delete ex.current[d][_])};return unsubscribeListener}var V=generateRandomId();eT.current.global[V]=h;var ee=Object.values(e_.current).map(function(d){return d.listen(h)}),unsubscribeListener=function(){ee.forEach(function(h){return h()}),delete eT.current.global[V],Object.values(ex.current).forEach(function(h){var d;null===(d=null==h?void 0:h[V])||void 0===d||d.call(h)})};return unsubscribeListener},dispatchMessage:function(h,d){if("running"!==eg.status){console.warn("[sandpack-react]: dispatch cannot be called while in idle mode");return}d?e_.current[d].dispatch(h):Object.values(e_.current).forEach(function(d){d.dispatch(h)})},lazyAnchorRef:ev,unsubscribeClientListenersRef:ex,queuedListenersRef:eT}]},useFiles=function(h){var d=getSandpackStateFromProps(h),_=(0,eF.useState)(d),V=_[0],ee=_[1],er=(0,eF.useRef)(!1);(0,eF.useEffect)(function(){er.current?ee(getSandpackStateFromProps(h)):er.current=!0},[h.files,h.customSetup,h.template]);var updateFile=function(h,d,_){void 0===_&&(_=!0),ee(function(V){var ee,er=V.files;return"string"==typeof h&&"string"==typeof d?er=__assign(__assign({},er),((ee={})[h]={code:d},ee)):"object"==typeof h&&(er=__assign(__assign({},er),convertedFilesToBundlerFiles(h))),__assign(__assign({},V),{files:(0,nm.f)(er),shouldUpdatePreview:_})})};return[__assign(__assign({},V),{visibleFilesFromProps:d.visibleFiles}),{openFile:function(h){ee(function(d){var _=d.visibleFiles,V=__rest(d,["visibleFiles"]),ee=_.includes(h)?_:__spreadArray(__spreadArray([],_,!0),[h],!1);return __assign(__assign({},V),{activeFile:h,visibleFiles:ee})})},resetFile:function(h){ee(function(_){var V;return __assign(__assign({},_),{files:__assign(__assign({},_.files),((V={})[h]=d.files[h],V))})})},resetAllFiles:function(){ee(function(h){return __assign(__assign({},h),{files:d.files})})},setActiveFile:function(h){V.files[h]&&ee(function(d){return __assign(__assign({},d),{activeFile:h})})},updateCurrentFile:function(h,d){void 0===d&&(d=!0),updateFile(V.activeFile,h,d)},updateFile:updateFile,addFile:updateFile,closeFile:function(h){1!==V.visibleFiles.length&&ee(function(d){var _=d.visibleFiles,V=d.activeFile,ee=__rest(d,["visibleFiles","activeFile"]),er=_.indexOf(h),eo=_.filter(function(d){return d!==h});return __assign(__assign({},ee),{activeFile:h===V?0===er?_[1]:_[er-1]:V,visibleFiles:eo})})},deleteFile:function(h,d){void 0===d&&(d=!0),ee(function(_){var V=_.visibleFiles,ee=_.files,er=_.activeFile,eo=__rest(_,["visibleFiles","files","activeFile"]),ec=__assign({},ee);delete ec[h];var eh=V.filter(function(d){return d!==h});if(0===eh.length){var ep=Object.keys(ee)[Object.keys(ee).length-1];return __assign(__assign({},eo),{visibleFiles:[ep],activeFile:ep,files:ec,shouldUpdatePreview:d})}return __assign(__assign({},eo),{visibleFiles:eh,activeFile:h===er?eh[eh.length-1]:er,files:ec,shouldUpdatePreview:d})})}}]},lH=eF.createContext(null),SandpackProvider=function(h){var d,_,V=h.children,ee=h.options,er=h.style,eo=h.className,ec=h.theme,eh=useFiles(h),ep=eh[0],ef=eh[1],em=useClient(h,ep),eg=em[0],eO=em[1],ey=eO.dispatchMessage,ev=eO.addListener,eS=__rest(eO,["dispatchMessage","addListener"]),e_=useAppState(h,ep.files);return eF.useEffect(function(){eS.initializeSandpackIframe()},[]),(0,ej.jsx)(lH.Provider,{value:__assign(__assign(__assign(__assign(__assign(__assign({},ep),eg),e_),ef),eS),{autoReload:null===(_=null===(d=h.options)||void 0===d?void 0:d.autoReload)||void 0===_||_,listen:ev,dispatch:ey}),children:(0,ej.jsx)(ClassNamesProvider,{classes:null==ee?void 0:ee.classes,children:(0,ej.jsx)(SandpackThemeProvider,{className:eo,style:er,theme:ec,children:V})})})};function useSandpack(){var h=eF.useContext(lH);if(null===h)throw Error('[sandpack-react]: "useSandpack" must be wrapped by a "SandpackProvider"');var d=h.dispatch,_=h.listen,V=__rest(h,["dispatch","listen"]);return{sandpack:__assign({},V),dispatch:d,listen:_}}lH.Consumer;var useActiveCode=function(){var h,d,_,V=useSandpack().sandpack;return{code:null===(h=V.files[V.activeFile])||void 0===h?void 0:h.code,readOnly:null!==(_=null===(d=V.files[V.activeFile])||void 0===d?void 0:d.readOnly)&&void 0!==_&&_,updateCode:V.updateCurrentFile}},lK=lS({svg:{margin:"auto"}}),lJ=lS(((ex={appearance:"none",outline:"none",display:"flex",alignItems:"center",fontSize:"inherit",fontFamily:"inherit",backgroundColor:"transparent",transition:"color $default, background $default",cursor:"pointer",color:"$colors$clickable",border:0,textDecoration:"none","&:disabled":{color:"$colors$disabled"},"&:hover:not(:disabled,[data-active='true'])":{color:"$colors$hover"},'&[data-active="true"]':{color:"$colors$accent"},svg:{minWidth:"$space$4",width:"$space$4",height:"$space$4"}})["&.".concat(lK)]={padding:"$space$1",height:"$space$7",display:"flex"},ex["&.".concat(lK,"&:not(:has(span))")]={width:"$space$7"},ex["&.".concat(lK,"&:has(svg + span)")]={paddingRight:"$space$3",paddingLeft:"$space$2",gap:"$space$1"},ex)),l0=lS({backgroundColor:"$colors$surface2",borderRadius:"99999px",border:"1px solid $colors$surface3",'&[data-active="true"]':{color:"$colors$surface1",background:"$colors$accent"},"&:hover:not(:disabled,[data-active='true'])":{backgroundColor:"$colors$surface3"}}),l1=lS({padding:0}),l2=l_({"0%":{opacity:0},"100%":{opacity:1}}),l5=lS({position:"absolute",bottom:"0",left:"0",right:"0",top:"0",margin:"0",overflow:"auto",height:"100%",zIndex:"$top"}),l7=lS(((ek={whiteSpace:"pre-wrap",padding:"$space$10",backgroundColor:"$colors$surface1",display:"flex",gap:"$space$2",flexDirection:"column"})[".".concat(lJ)]={width:"auto",gap:"$space$2",padding:"0 $space$3 0 $space$2",marginTop:"$space$1"},ek.variants={solidBg:{true:{backgroundColor:"$colors$errorSurface"}}},ek)),l3=lS(((eT={padding:"$space$10",backgroundColor:"$colors$surface1"})[".".concat(lJ)]={marginTop:"$space$6",width:"auto",gap:"$space$2",padding:"0 $space$3 0 $space$2"},eT)),l4=lS({animation:"".concat(l2," 150ms ease"),color:"$colors$error",display:"flex",flexDirection:"column",gap:"$space$3",variants:{errorCode:{true:{fontFamily:"$font$mono"}}},a:{color:"inherit"},p:{margin:0}}),l6=lS({borderBottom:"1px solid $colors$surface2",background:"$colors$surface1"}),l9=lS({padding:"0 $space$2",overflow:"auto",display:"flex",flexWrap:"nowrap",alignItems:"stretch",minHeight:"40px",marginBottom:"-1px"}),l8=lS({padding:"0 $space$1 0 $space$1",borderRadius:"$border$radius",marginLeft:"$space$1",width:"$space$5",visibility:"hidden",svg:{width:"$space$3",height:"$space$3",display:"block",position:"relative",top:1}}),ce=lS(((eE={padding:"0 $space$2",height:"$layout$headerHeight",whiteSpace:"nowrap","&:focus":{outline:"none"}})["&:hover > .".concat(l8)]={visibility:"unset"},eE)),FileTabs=function(h){var d=h.closableTabs,_=h.className,V=__rest(h,["closableTabs","className"]),ee=useSandpack().sandpack,er=useClassNames(),eo=ee.activeFile,ec=ee.visibleFiles,eh=ee.setActiveFile,handleCloseFile=function(h){h.stopPropagation();var d=h.target.closest("[data-active]"),_=null==d?void 0:d.getAttribute("title");_&&ee.closeFile(_)},getTriggerText=function(h){var d=getFileName(h),_=ec.reduce(function(_,V){return V===h||getFileName(V)===d&&_.push(V),_},[]);return 0===_.length?d:calculateNearestUniquePath(h,_)};return(0,ej.jsx)("div",__assign({className:er("tabs",[l6,_]),translate:"no"},V,{children:(0,ej.jsx)("div",{"aria-label":"Select active file",className:er("tabs-scrollable-container",[l9]),role:"tablist",children:ec.map(function(h){return(0,ej.jsxs)("button",{"aria-selected":h===eo,className:er("tab-button",[lJ,ce]),"data-active":h===eo,onClick:function(){return eh(h)},role:"tab",title:h,type:"button",children:[getTriggerText(h),d&&ec.length>1&&(0,ej.jsx)("span",{className:er("close-button",[l8]),onClick:handleCloseFile,children:(0,ej.jsx)(CloseIcon,{})})]},h)})})}))},RoundedButton=function(h){var d=h.onClick,_=h.className,V=h.children,ee=useClassNames();return(0,ej.jsx)("button",{className:ee("button",[ee("icon-standalone"),lJ,lK,l0,_]),onClick:d,type:"button",children:V})},ct=lS({position:"absolute",bottom:"$space$2",right:"$space$2",paddingRight:"$space$3"}),RunButton$1=function(h){h.className;var d=h.onClick,_=__rest(h,["className","onClick"]),V=useSandpack().sandpack;return(0,ej.jsxs)(RoundedButton,__assign({className:ct.toString(),onClick:function(h){V.runSandpack(),null==d||d(h)}},_,{children:[(0,ej.jsx)(RunIcon,{}),(0,ej.jsx)("span",{children:"Run"})]}))},cs=lS(((eC={display:"flex",flexDirection:"column",width:"100%",position:"relative",backgroundColor:"$colors$surface1",gap:1})["&:has(.".concat("sp","-stack)")]={backgroundColor:"$colors$surface2"},eC)),SandpackStack=function(h){var d=h.className,_=__rest(h,["className"]),V=useClassNames();return(0,ej.jsx)("div",__assign({className:V("stack",[cs,d])},_))},useSandpackTheme=function(){var h=eF.useContext(lT);return{theme:h.theme,themeId:h.id,themeMode:h.mode}},shallowEqual=function(h,d){if(h.length!==d.length)return!1;for(var _=!0,V=0;V<h.length;V++)if(h[V]!==d[V]){_=!1;break}return _},getCodeMirrorPosition=function(h,d){var _=d.line,V=d.column;return h.line(_).from+(null!=V?V:0)-1},classNameToken=function(h){return"".concat("sp","-syntax-").concat(h)},getLanguageFromFile=function(h,d,_){if(!h&&!d)return"javascript";var V=d;if(!V&&h){var ee=h.lastIndexOf(".");V=h.slice(ee+1)}for(var er=0;er<_.length;er++){var eo=_[er];if(V===eo.name||eo.extensions.includes(V||""))return eo.name}switch(V){case"ts":case"tsx":return"typescript";case"html":case"svelte":case"vue":case"astro":return"html";case"css":case"less":case"scss":return"css";default:return"javascript"}},getCodeMirrorLanguage=function(h,d){for(var _={javascript:javascript({jsx:!0,typescript:!1}),typescript:javascript({jsx:!0,typescript:!0}),html:function(h={}){let d="",_;!1===h.matchClosingTags&&(d="noMatch"),!0===h.selfClosingTags&&(d=(d?d+" ":"")+"selfClosing"),(h.nestedLanguages&&h.nestedLanguages.length||h.nestedAttributes&&h.nestedAttributes.length)&&(_=configureNesting((h.nestedLanguages||[]).concat(a6),(h.nestedAttributes||[]).concat(a9)));let V=_?a8.configure({wrap:_,dialect:d}):d?le.configure({dialect:d}):le;return new LanguageSupport(V,[le.data.of({autocomplete:function(h){let{extraTags:d,extraGlobalAttributes:_}=h,V=_||d?new Schema(d,_):Schema.default;return h=>(function(h,d){let{state:_,pos:V}=d,ee=dist_syntaxTree(_).resolveInner(V,-1),er=ee.resolve(V);for(let h=V,d;er==ee&&(d=ee.childBefore(h));){let _=d.lastChild;if(!_||!_.type.isError||_.from<_.to)break;er=ee=d,h=_.from}if("TagName"==ee.name)return ee.parent&&/CloseTag$/.test(ee.parent.name)?completeCloseTag(_,ee,ee.from,V):completeTag(_,h,ee,ee.from,V);if("StartTag"==ee.name)return completeTag(_,h,ee,V,V);if("StartCloseTag"==ee.name||"IncompleteCloseTag"==ee.name)return completeCloseTag(_,ee,V,V);if(d.explicit&&("OpenTag"==ee.name||"SelfClosingTag"==ee.name)||"AttributeName"==ee.name){var eo,ec;let d,er,eh;return eo=ee,ec="AttributeName"==ee.name?ee.from:V,eh=(er=(d=findParentElement(eo))?h.tags[dist_elementName(_.doc,d)]:null)&&er.attrs?Object.keys(er.attrs):[],{from:ec,to:V,options:(er&&!1===er.globalAttrs?eh:eh.length?eh.concat(h.globalAttrNames):h.globalAttrNames).map(h=>({label:h,type:"property"})),validFor:a3}}return"Is"==ee.name||"AttributeValue"==ee.name||"UnquotedAttributeValue"==ee.name?function(h,d,_,V,ee){var er;let eo=null===(er=_.parent)||void 0===er?void 0:er.getChild("AttributeName"),ec=[],eh;if(eo){let er=h.sliceDoc(eo.from,eo.to),ep=d.globalAttrs[er];if(!ep){let V=findParentElement(_),ee=V?d.tags[dist_elementName(h.doc,V)]:null;ep=(null==ee?void 0:ee.attrs)&&ee.attrs[er]}if(ep){let d=h.sliceDoc(V,ee).toLowerCase(),_='"',er='"';for(let eo of(/^['"]/.test(d)?(eh='"'==d[0]?/^[^"]*$/:/^[^']*$/,_="",er=h.sliceDoc(ee,ee+1)==d[0]?"":d[0],d=d.slice(1),V++):eh=/^[^\s<>='"]*$/,ep))ec.push({label:eo,apply:_+eo+er,type:"constant"})}}return{from:V,to:ee,options:ec,validFor:eh}}(_,h,ee,"Is"==ee.name?V:ee.from,V):d.explicit&&("Element"==er.name||"Text"==er.name||"Document"==er.name)?function(h,d,_,V){let ee=[],er=0;for(let V of allowedChildren(h.doc,_,d))ee.push({label:"<"+V,type:"type"});for(let d of openTags(h.doc,_))ee.push({label:"</"+d+">",type:"type",boost:99-er++});return{from:V,to:V,options:ee,validFor:/^<\/?[:\-\.\w\u00b7-\uffff]*$/}}(_,h,ee,V):null})(V,h)}(h)}),!1!==h.autoCloseTags?lr:[],javascript().support,css().support])}(),css:css()},V=0;V<d.length;V++){var ee=d[V];if(h===ee.name)return ee.language}return _[h]},useCombinedRefs=function(){for(var h=[],d=0;d<arguments.length;d++)h[d]=arguments[d];return eF.useCallback(function(d){return h.forEach(function(h){if(h){if("function"==typeof h)return h(d);h.current=d}})},h)},co=Decoration.line({attributes:{class:"cm-errorLine"}}),ca=dist_ViewPlugin.fromClass(function(){function class_1(){this.decorations=Decoration.none}return class_1.prototype.update=function(h){var d=this;h.transactions.forEach(function(_){var V=_.annotation("show-error");if(void 0!==V){var ee=getCodeMirrorPosition(h.view.state.doc,{line:V})+1;d.decorations=Decoration.set([co.range(ee)])}else _.annotation("remove-errors")&&(d.decorations=Decoration.none)})},class_1}(),{decorations:function(h){return h.decorations}}),cl=lS({margin:"0",display:"block",fontFamily:"$font$mono",fontSize:"$font$size",color:"$syntax$color$plain",lineHeight:"$font$lineHeight"}),cc=lS(["string","plain","comment","keyword","definition","punctuation","property","tag","static"].reduce(function(h,d){var _;return __assign(__assign({},h),((_={})[".".concat(classNameToken(d))]={color:"$syntax$color$".concat(d),fontStyle:"$syntax$fontStyle$".concat(d)},_))},{})),cu=lS(((eP={flex:1,position:"relative",overflow:"auto",background:"$colors$surface1",".cm-scroller":{padding:"$space$4 0"}})[".".concat(cl)]={padding:"$space$4 0"},eP["@media screen and (max-width: 768px)"]={"@supports (-webkit-overflow-scrolling: touch)":{".cm-content":{fontSize:"16px"}}},eP)),ch=lS({margin:"0",outline:"none",height:"100%"}),cp=lS(((eI={fontFamily:"$font$mono",fontSize:"0.8em",position:"absolute",right:"$space$2",bottom:"$space$2",zIndex:"$top",color:"$colors$clickable",backgroundColor:"$colors$surface2",borderRadius:"99999px",padding:"calc($space$1 / 2) $space$2"})["& + .".concat(lJ)]={right:"calc($space$11 * 2)"},eI)),useSyntaxHighlight=function(h){var d=h.langSupport,_=h.highlightTheme,V=h.code,ee=void 0===V?"":V,er=d.language.parser.parse(ee),eo=0,ec=[],addElement=function(h,d){if(h>eo){var _=ee.slice(eo,h);ec.push(d?(0,eF.createElement)("span",{children:_,className:d,key:"".concat(h).concat(eo)}):_),eo=h}};return highlightTree(er,_,function(h,d,_){addElement(h,""),addElement(d,_)}),eo<ee.length&&(null==ee?void 0:ee.includes("\n"))&&ec.push("\n\n"),ec},cf=eF.forwardRef(function(h,d){var _=h.code,V=void 0===_?"":_,ee=h.filePath,er=h.fileType,eo=h.onCodeUpdate,ec=h.showLineNumbers,eh=void 0!==ec&&ec,ep=h.showInlineErrors,ef=void 0!==ep&&ep,em=h.wrapContent,eg=void 0!==em&&em,eO=h.editorState,ey=void 0===eO?"pristine":eO,ev=h.readOnly,eS=void 0!==ev&&ev,e_=h.showReadOnly,ew=h.decorators,ex=h.initMode,ek=void 0===ex?"lazy":ex,eT=h.extensions,eE=void 0===eT?[]:eT,eC=h.extensionsKeymap,eP=void 0===eC?[]:eC,eI=h.additionalLanguages,eR=void 0===eI?[]:eI,eA=eF.useRef(null),e$=useCombinedRefs(eA,d),eN=eF.useRef(),eM=useSandpackTheme(),eQ=eM.theme,eD=eM.themeId,eL=eF.useState(V),eZ=eL[0],eV=eL[1],eB=eF.useState("immediate"===ek),eW=eB[0],eU=eB[1],ez=useClassNames(),eq=useSandpack(),eX=eq.listen,eY=eq.sandpack.autoReload,eG=eF.useRef([]),eH=eF.useRef([]),eK=intersection_observer_dist_module(eA,{rootMargin:"600px 0px",threshold:.2}).isIntersecting;eF.useImperativeHandle(d,function(){return{getCodemirror:function(){return eN.current}}}),eF.useEffect(function(){("lazy"===ek||"user-visible"===ek)&&eK&&eU(!0)},[ek,eK]);var eJ=getLanguageFromFile(ee,er,eR),e0=getCodeMirrorLanguage(eJ,eR),e1=HighlightStyle.define([{tag:i8.link,textDecoration:"underline"},{tag:i8.emphasis,fontStyle:"italic"},{tag:i8.strong,fontWeight:"bold"},{tag:i8.keyword,class:classNameToken("keyword")},{tag:[i8.atom,i8.number,i8.bool],class:classNameToken("static")},{tag:i8.variableName,class:classNameToken("plain")},{tag:i8.standard(i8.tagName),class:classNameToken("tag")},{tag:[i8.function(i8.variableName),i8.definition(i8.function(i8.variableName)),i8.tagName],class:classNameToken("definition")},{tag:i8.propertyName,class:classNameToken("property")},{tag:[i8.literal,i8.inserted],class:classNameToken(eQ.syntax.string?"string":"static")},{tag:i8.punctuation,class:classNameToken("punctuation")},{tag:[i8.comment,i8.quote],class:classNameToken("comment")}]),e2=useSyntaxHighlight({langSupport:e0,highlightTheme:e1,code:V}),e5=eF.useMemo(function(){return ew?ew.sort(function(h,d){return h.line-d.line}):ew},[ew]);eF.useEffect(function(){if(eA.current&&eW){let em,eO;var h,d=[{key:"Tab",run:function(h){indentMore(h);var d,_,V=eP.find(function(h){return"Tab"===h.key});return null===(_=null===(d=null==V?void 0:V.run)||void 0===d?void 0:d.call(V,h))||void 0===_||_}},{key:"Shift-Tab",run:function(h){indentLess({state:h.state,dispatch:h.dispatch});var d,_,V=eP.find(function(h){return"Shift-Tab"===h.key});return null===(_=null===(d=null==V?void 0:V.run)||void 0===d?void 0:d.call(V,ep))||void 0===_||_}},{key:"Escape",run:function(){return!!eS||(eA.current&&eA.current.focus(),!0)}},{key:"mod-Backspace",run:deleteGroupBackward}],_=__spreadArray(__spreadArray([function(h={}){return[ig.of(h),iO||(iO=dist_ViewPlugin.fromClass(class{constructor(h){this.view=h,this.decorations=Decoration.none,this.decorationCache=Object.create(null),this.decorator=this.makeDecorator(h.state.facet(ig)),this.decorations=this.decorator.createDeco(h)}makeDecorator(h){return new MatchDecorator({regexp:h.specialChars,decoration:(d,_,V)=>{let{doc:ee}=_.state,er=codePointAt(d[0],0);if(9==er){let h=ee.lineAt(V),d=_.state.tabSize,er=dist_countColumn(h.text,d,V-h.from);return Decoration.replace({widget:new TabWidget((d-er%d)*this.view.defaultCharacterWidth/this.view.scaleX)})}return this.decorationCache[er]||(this.decorationCache[er]=Decoration.replace({widget:new SpecialCharWidget(h,er)}))},boundary:h.replaceTabs?void 0:/[^]/})}update(h){let d=h.state.facet(ig);h.startState.facet(ig)!=d?(this.decorator=this.makeDecorator(d),this.decorations=this.decorator.createDeco(h.view)):this.decorations=this.decorator.updateDeco(h,this.decorations)}},{decorations:h=>h.decorations}))]}(),function(h={}){return[ob,ov.of(h),EditorView.domEventHandlers({beforeinput(h,d){let _="historyUndo"==h.inputType?oS:"historyRedo"==h.inputType?o_:null;return!!_&&(h.preventDefault(),_(d))}})]}(),[oi,s8]],eE,!0),[r9.of(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],oo,!0),oA,!0),oE,!0),d,!0),eP,!0)),e0,EditorView.theme({"&":{backgroundColor:"var(--".concat("sp","-colors-surface1)"),color:"var(--".concat("sp","-syntax-color-plain)"),height:"100%"},".cm-matchingBracket, .cm-nonmatchingBracket, &.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{color:"inherit",backgroundColor:"rgba(128,128,128,.25)",backgroundBlendMode:"difference"},"&.cm-editor.cm-focused":{outline:"none"},".cm-activeLine":{backgroundColor:"var(--".concat("sp","-colors-surface3)"),borderRadius:"var(--".concat("sp","-border-radius)")},".cm-errorLine":{backgroundColor:"var(--".concat("sp","-colors-errorSurface)"),borderRadius:"var(--".concat("sp","-border-radius)")},".cm-content":{caretColor:"var(--".concat("sp","-colors-accent)"),padding:"0 var(--".concat("sp","-space-4)")},".cm-scroller":{fontFamily:"var(--".concat("sp","-font-mono)"),lineHeight:"var(--".concat("sp","-font-lineHeight)")},".cm-gutters":{backgroundColor:"var(--".concat("sp","-colors-surface1)"),color:"var(--".concat("sp","-colors-disabled)"),border:"none",paddingLeft:"var(--".concat("sp","-space-1)")},".cm-gutter.cm-lineNumbers":{fontSize:".6em"},".cm-lineNumbers .cm-gutterElement":{lineHeight:"var(--".concat("sp","-font-lineHeight)"),minWidth:"var(--".concat("sp","-space-5)")},".cm-content .cm-line":{paddingLeft:"var(--".concat("sp","-space-1)")},".cm-content.cm-readonly .cm-line":{paddingLeft:0}}),(em=[sx],e1 instanceof HighlightStyle&&(e1.module&&em.push(EditorView.styleModule.of(e1.module)),eO=e1.themeType),(null==h?void 0:h.fallback)?em.push(sw.of(e1)):eO?em.push(s_.computeN([EditorView.darkTheme],h=>h.facet(EditorView.darkTheme)==("dark"==eO)?[e1]:[])):em.push(s_.of(e1)),em)],!1);eS?(_.push(dist_EditorState.readOnly.of(!0)),_.push(EditorView.editable.of(!1))):(_.push(function(h={}){return[sE.of(h),sR]}()),_.push(iv)),e5&&_.push(dist_ViewPlugin.fromClass(function(){function class_1(h){this.decorations=this.getDecoration(h)}return class_1.prototype.update=function(h){},class_1.prototype.getDecoration=function(h){if(!e5)return Decoration.none;var d=e5.map(function(d){var _,V,ee,er=Decoration.line({attributes:{class:null!==(_=d.className)&&void 0!==_?_:""}}),eo=Decoration.mark({class:null!==(V=d.className)&&void 0!==V?V:"",attributes:null!==(ee=d.elementAttributes)&&void 0!==ee?ee:void 0}),ec=getCodeMirrorPosition(h.state.doc,{line:d.line,column:d.startColumn})+1;if(d.startColumn&&d.endColumn){var eh=getCodeMirrorPosition(h.state.doc,{line:d.line,column:d.endColumn})+1;return eo.range(ec,eh)}return er.range(ec)});return Decoration.set(d)},class_1}(),{decorations:function(h){return h.decorations}})),eg&&_.push(EditorView.lineWrapping),eh&&_.push(function(h={}){var d;let _;return[iD.of(h),(_=[iM],d&&!1===d.fixed&&_.push(iN.of(!0)),_),ij]}()),ef&&_.push(ca);var er=eA.current,ec=er.querySelector(".sp-pre-placeholder");ec&&er.removeChild(ec);var ep=new EditorView({doc:V,extensions:_,parent:er,dispatch:function(h){if(ep.update([h]),h.docChanged){var d=h.newDoc.sliceString(0,h.newDoc.length);eV(d),null==eo||eo(d)}}});return ep.contentDOM.setAttribute("data-gramm","false"),ep.contentDOM.setAttribute("data-lt-active","false"),ep.contentDOM.setAttribute("aria-label",ee?"Code Editor for ".concat(getFileName(ee)):"Code Editor"),eS?ep.contentDOM.classList.add("cm-readonly"):ep.contentDOM.setAttribute("tabIndex","-1"),eN.current=ep,function(){var h;null===(h=eN.current)||void 0===h||h.destroy()}}},[eW,eh,eg,eD,e5,eS,eY]),eF.useEffect(function(){var h=eN.current,d=!shallowEqual(eE,eG.current)||!shallowEqual(eP,eH.current);h&&d&&(h.dispatch({effects:dist_StateEffect.appendConfig.of(eE)}),h.dispatch({effects:dist_StateEffect.appendConfig.of(r9.of(__spreadArray([],eP,!0)))}),eG.current=eE,eH.current=eP)},[eE,eP]),eF.useEffect(function(){eN.current&&"dirty"===ey&&window.matchMedia("(min-width: 768px)").matches&&eN.current.contentDOM.focus()},[]),eF.useEffect(function(){if(eN.current&&"string"==typeof V&&V!==eZ){var h=eN.current,d=h.state.selection.ranges.some(function(h){var d=h.to,_=h.from;return d>V.length||_>V.length})?dist_EditorSelection.cursor(V.length):h.state.selection,_={from:0,to:h.state.doc.length,insert:V};h.dispatch({changes:_,selection:d})}},[V]),eF.useEffect(function(){if(ef){var h=eX(function(h){var d=eN.current;"success"===h.type?null==d||d.dispatch({annotations:[new Annotation("remove-errors",!0)]}):"action"===h.type&&"show-error"===h.action&&h.path===ee&&h.line&&(null==d||d.dispatch({annotations:[new Annotation("show-error",h.line)]}))});return function(){return h()}}},[eX,ef]);var gutterLineOffset=function(){var h=4;return eh&&(h+=6),eS||(h+=1),"var(--".concat("sp","-space-").concat(h,")")};return eS?(0,ej.jsxs)(ej.Fragment,{children:[(0,ej.jsx)("pre",{ref:e$,className:ez("cm",[ez(ey),ez(eJ),ch,cc]),translate:"no",children:(0,ej.jsx)("code",{className:ez("pre-placeholder",[cl]),style:{marginLeft:gutterLineOffset()},children:e2})}),eS&&(void 0===e_||e_)&&(0,ej.jsx)("span",__assign({className:ez("read-only",[cp])},{},{children:"Read-only"}))]}):(0,ej.jsx)("div",{ref:e$,"aria-autocomplete":"list","aria-label":ee?"Code Editor for ".concat(getFileName(ee)):"Code Editor","aria-multiline":"true",className:ez("cm",[ez(ey),ez(eJ),ch,cc]),onKeyDown:function(h){"Enter"===h.key&&eN.current&&(h.preventDefault(),eN.current.contentDOM.focus())},role:"textbox",tabIndex:0,translate:"no",suppressHydrationWarning:!0,children:(0,ej.jsx)("pre",{className:ez("pre-placeholder",[cl]),style:{marginLeft:gutterLineOffset()},children:e2})})}),cm=(0,eF.forwardRef)(function(h,d){var _=h.showTabs,V=h.showLineNumbers,ee=h.showInlineErrors,er=h.showRunButton,eo=h.wrapContent,ec=h.closableTabs,eh=h.initMode,ep=h.extensions,ef=h.extensionsKeymap,em=h.readOnly,eg=h.showReadOnly,eO=h.additionalLanguages,ey=h.className,ev=__rest(h,["showTabs","showLineNumbers","showInlineErrors","showRunButton","wrapContent","closableTabs","initMode","extensions","extensionsKeymap","readOnly","showReadOnly","additionalLanguages","className"]),eS=useSandpack().sandpack,e_=useActiveCode(),ew=e_.code,ex=e_.updateCode,ek=e_.readOnly,eT=eS.activeFile,eE=eS.status,eC=eS.editorState,eP=null!=_?_:eS.visibleFiles.length>1,eI=useClassNames(),handleCodeUpdate=function(h,d){void 0===d&&(d=!0),ex(h,d)};return(0,ej.jsxs)(SandpackStack,__assign({className:eI("editor",[ey])},ev,{children:[eP&&(0,ej.jsx)(FileTabs,{closableTabs:void 0!==ec&&ec}),(0,ej.jsxs)("div",{className:eI("code-editor",[cu]),children:[(0,ej.jsx)(cf,{ref:d,additionalLanguages:eO,code:ew,editorState:eC,extensions:ep,extensionsKeymap:ef,filePath:eT,initMode:eh||eS.initMode,onCodeUpdate:function(h){var d;return handleCodeUpdate(h,null===(d=eS.autoReload)||void 0===d||d)},readOnly:em||ek,showInlineErrors:void 0!==ee&&ee,showLineNumbers:void 0!==V&&V,showReadOnly:eg,wrapContent:void 0!==eo&&eo},eT),(void 0===er||er)&&(!eS.autoReload||"idle"===eE)?(0,ej.jsx)(RunButton$1,{}):null]})]}))});eF.forwardRef(function(h,d){var _=h.showTabs,V=h.showLineNumbers,ee=h.decorators,er=h.code,eo=h.initMode,ec=h.wrapContent,eh=h.additionalLanguages,ep=__rest(h,["showTabs","showLineNumbers","decorators","code","initMode","wrapContent","additionalLanguages"]),ef=useSandpack().sandpack,em=useActiveCode().code,eg=useClassNames(),eO=null!=_?_:ef.visibleFiles.length>1;return(0,ej.jsxs)(SandpackStack,__assign({className:eg("editor-viewer")},ep,{children:[eO?(0,ej.jsx)(FileTabs,{}):null,(0,ej.jsx)("div",{className:eg("code-editor",[cu]),children:(0,ej.jsx)(cf,{ref:d,additionalLanguages:eh,code:null!=er?er:em,decorators:ee,filePath:ef.activeFile,initMode:eo||ef.initMode,showLineNumbers:V,showReadOnly:!1,wrapContent:ec,readOnly:!0})}),"idle"===ef.status?(0,ej.jsx)(RunButton$1,{}):null]}))});var cg=lS(((eR={border:"1px solid $colors$surface2",display:"flex",flexWrap:"wrap",alignItems:"stretch",borderRadius:"$border$radius",overflow:"hidden",position:"relative",backgroundColor:"$colors$surface2",gap:1})["> .".concat(cs)]={flexGrow:1,flexShrink:1,flexBasis:"0",height:"$layout$height",overflow:"hidden","@media print":{height:"auto",display:"block"},"@media screen and (max-width: 768px)":((eA={})["&:not(.".concat("sp","-preview, .").concat("sp","-editor, .").concat("sp","-preset-column)")]={height:"calc($layout$height / 2)"},eA.minWidth="100%;",eA)},eR["> .".concat("sp","-file-explorer")]={flex:.2,minWidth:200,"@media screen and (max-width: 768px)":{flex:1}},eR)),cO=eF.forwardRef(function(h,d){var _=h.children,V=h.className,ee=__rest(h,["children","className"]),er=useSandpack().sandpack,eo=useClassNames(),ec=useCombinedRefs(er.lazyAnchorRef,d);return(0,ej.jsx)("div",__assign({ref:ec,className:eo("layout",[cg,V])},ee,{children:_}))}),useErrorMessage=function(){var h,d=useSandpack().sandpack.error;return null!==(h=null==d?void 0:d.message)&&void 0!==h?h:null},useLoadingOverlayState=function(h,d){var _=useSandpack(),V=_.sandpack,ee=_.listen,er=eF.useState("LOADING"),eo=er[0],ec=er[1];return(eF.useEffect(function(){var d=ee(function(h){"start"===h.type&&!0===h.firstLoad&&ec("LOADING"),"done"===h.type&&ec(function(h){return"LOADING"===h?"PRE_FADING":"HIDDEN"})},h);return function(){d()}},[h,"idle"===V.status]),eF.useEffect(function(){var h;return"PRE_FADING"!==eo||d?"FADING"===eo&&(h=setTimeout(function(){return ec("HIDDEN")},200)):ec("FADING"),function(){clearTimeout(h)}},[eo,d]),"timeout"===V.status)?"TIMEOUT":"running"!==V.status?"HIDDEN":eo},useSandpackNavigation=function(h){var d=useSandpack().dispatch;return{refresh:function(){return d({type:"refresh"},h)},back:function(){return d({type:"urlback"},h)},forward:function(){return d({type:"urlforward"},h)}}},useSandpackClient=function(h){var d=useSandpack(),_=d.sandpack,V=d.listen,ee=d.dispatch,er=eF.useRef(null),eo=eF.useRef(generateRandomId());return eF.useEffect(function(){var d=er.current,V=eo.current;return null!==d&&_.registerBundler(d,V,h),function(){return _.unregisterBundler(V)}},[]),{sandpack:_,getClient:function(){return _.clients[eo.current]||null},clientId:eo.current,iframe:er,listen:function(h){return V(h,eo.current)},dispatch:function(h){return ee(h,eo.current)}}},useSandpackShell=function(h){var d=useSandpack().dispatch;return{restart:function(){return d({type:"shell/restart"},h)},openPreview:function(){return d({type:"shell/openPreview"},h)}}},mapProgressMessage=function(h,d){var _;switch(h.state){case"downloading_manifest":return"[1/3] Downloading manifest";case"downloaded_module":return"[2/3] Downloaded ".concat(h.name," (").concat(d-h.totalPending,"/").concat(d,")");case"starting_command":return"[3/3] Starting command";case"command_running":return'[3/3] Running "'.concat(null===(_=h.command)||void 0===_?void 0:_.trim(),'"')}},useSandpackPreviewProgress=function(h){var d=eF.useState(!1),_=d[0],V=d[1],ee=eF.useState(),er=ee[0],eo=ee[1],ec=eF.useState(null),eh=ec[0],ep=ec[1],ef=null==h?void 0:h.timeout,em=null==h?void 0:h.clientId,eg=useSandpack().listen;return eF.useEffect(function(){var h,d=eg(function(d){"start"===d.type&&d.firstLoad&&V(!1),ef&&(h=setTimeout(function(){ep(null)},ef)),"shell/progress"!==d.type||_||(er||"downloaded_module"!==d.data.state||eo(d.data.totalPending),void 0!==er&&ep(mapProgressMessage(d.data,er))),"done"===d.type&&!1===d.compilatonError&&(ep(null),V(!0),clearTimeout(h))},em);return function(){h&&clearTimeout(h),d()}},[em,_,er,ef]),eh},useSandpackShellStdout=function(h){var d=h.clientId,_=h.maxMessageCount,V=void 0===_?800:_;h.resetOnPreviewRestart;var ee=eF.useState([]),er=ee[0],eo=ee[1],ec=useSandpack().listen;return eF.useEffect(function(){return ec(function(h){"start"===h.type?eo([]):"stdout"===h.type&&h.payload.data&&h.payload.data.trim()&&eo(function(d){for(var _=__spreadArray(__spreadArray([],d,!0),[{data:h.payload.data,id:generateRandomId()}],!1);_.length>V;)_.shift();return _})},d)},[V,d]),{logs:er,reset:function(){return eo([])}}},mapBundlerErrors=function(h){var d=h.replace("[sandpack-client]: ","");if(/process.exit/.test(d)){var _=d.match(/process.exit\((\d+)\)/);return _?0===Number(_[1])?"Server is not running, would you like to start it again?":"Server has crashed with status code ".concat(_[1],", would you like to restart the server?"):d}return d},ErrorOverlay=function(h){var d=h.children,_=h.className,V=__rest(h,["children","className"]),ee=useErrorMessage(),er=useSandpackShell().restart,eo=useClassNames(),ec=useSandpack().sandpack,eh=ec.runSandpack,ep=ec.teamId,ef=useSandpack().dispatch;if(!ee&&!d)return null;var em=null==ee?void 0:ee.startsWith("[sandpack-client]");return(null==ee?void 0:ee.includes("NPM_REGISTRY_UNAUTHENTICATED_REQUEST"))?(0,ej.jsxs)("div",__assign({className:eo("overlay",[eo("error"),l5,l3,_])},h,{children:[(0,ej.jsx)("p",{className:eo("error-message",[l4]),children:(0,ej.jsx)("strong",{children:"Unable to fetch required dependency."})}),(0,ej.jsx)("div",{className:eo("error-message",[l4]),children:(0,ej.jsxs)("p",{children:["Authentication required. Please sign in to your account (make sure to allow pop-ups to this page) and try again. If the issue persists, contact"," ",(0,ej.jsx)("a",{href:"mailto:hello@codesandbox.io?subject=Sandpack Timeout Error",children:"support"})," ","for further assistance."]})}),(0,ej.jsx)("div",{children:(0,ej.jsxs)("button",{className:eo("button",[lJ,lK,l0]),onClick:function(){ep&&ef({type:"sign-in",teamId:ep})},children:[(0,ej.jsx)(SignInIcon,{}),(0,ej.jsx)("span",{children:"Sign in"})]})})]})):em&&ee?(0,ej.jsx)("div",__assign({className:eo("overlay",[eo("error"),l5,l3,_])},V,{children:(0,ej.jsxs)("div",{className:eo("error-message",[l4]),children:[(0,ej.jsx)("p",{className:eo("error-title",[lS({fontWeight:"bold"})]),children:"Couldn't connect to server"}),(0,ej.jsx)("p",{children:mapBundlerErrors(ee)}),(0,ej.jsx)("div",{children:(0,ej.jsxs)("button",{className:eo("button",[eo("icon-standalone"),lJ,lK,l0]),onClick:function(){er(),eh()},title:"Restart script",type:"button",children:[(0,ej.jsx)(RestartIcon,{})," ",(0,ej.jsx)("span",{children:"Restart"})]})})]})})):(0,ej.jsxs)("div",__assign({className:eo("overlay",[eo("error"),l5,l7({solidBg:!0}),_]),translate:"no"},V,{children:[(0,ej.jsx)("p",{className:eo("error-message",[l4]),children:(0,ej.jsx)("strong",{children:"Something went wrong"})}),(0,ej.jsx)("p",{className:eo("error-message",[l4({errorCode:!0})]),children:ee||d})]}))};function convertBundleIntoReact(h,d,_,V){var ee,er,eo=d?null:function(h){var d={};switch(h.bg&&(d.backgroundColor="rgb(".concat(h.bg,")")),h.fg&&(d.color="rgb(".concat(h.fg,")")),h.decoration){case"bold":d.fontWeight="bold";break;case"dim":d.opacity="0.5";break;case"italic":d.fontStyle="italic";break;case"hidden":d.visibility="hidden";break;case"strikethrough":d.textDecoration="line-through";break;case"underline":d.textDecoration="underline";break;case"blink":d.textDecoration="blink"}return d}(_),ec=d?(ee="",(_.bg&&(ee+="".concat(_.bg,"-bg ")),_.fg&&(ee+="".concat(_.fg,"-fg ")),_.decoration&&(ee+="ansi-".concat(_.decoration," ")),""===ee)?null:ee=ee.substring(0,ee.length-1)):null;if(!h)return eF.createElement("span",{style:eo,key:V,className:ec},_.content);for(var eh=[],ep=/(\s|^)(https?:\/\/(?:www\.|(?!www))[^\s.]+\.[^\s]{2,}|www\.[^\s]+\.[^\s]{2,})/g,ef=0;null!==(er=ep.exec(_.content));){var em=er[1],eg=er[2],eO=er.index+em.length;eO>ef&&eh.push(_.content.substring(ef,eO));var ey=eg.startsWith("www.")?"http://".concat(eg):eg;eh.push(eF.createElement("a",{key:ef,href:ey,target:"_blank"},"".concat(eg))),ef=ep.lastIndex}return ef<_.content.length&&eh.push(_.content.substring(ef)),eF.createElement("span",{style:eo,key:V,className:ec},eh)}function Ansi(h){var d,_,V=h.className,ee=h.useClasses,er=h.children,eo=h.linkify;return eF.createElement("code",{className:V},(d=null!=er?er:"",void 0===(_=null!=ee&&ee)&&(_=!1),d=(0,lh.escapeCarriageReturn)(function(h){var d=h;do d=(h=d).replace(/[^\n]\x08/gm,"");while(d.length<h.length);return h}(d)),la().ansiToJson(d,{json:!0,remove_empty:!0,use_classes:_})).map(convertBundleIntoReact.bind(null,null!=eo&&eo,null!=ee&&ee)))}var StdoutList=function(h){var d=h.data,_=useClassNames();return(0,ej.jsx)(ej.Fragment,{children:d.map(function(h){var d=h.data,V=h.id;return(0,ej.jsx)("div",{className:_("console-item",[cy]),children:(0,ej.jsx)(Ansi,{children:d})},V)})})},cy=lS({width:"100%",padding:"$space$3 $space$2",fontSize:".85em",position:"relative",whiteSpace:"pre","&:not(:first-child):after":{content:"",position:"absolute",top:0,left:0,right:0,height:1,background:"$colors$surface3"}}),cv="https://codesandbox.io/api/v1/sandboxes/define",getFileParameters=function(h,d){var _,V=Object.keys(h).reduce(function(d,_){var V,ee=_.replace("/",""),er={content:h[_].code,isBinary:!1};return __assign(__assign({},d),((V={})[ee]=er,V))},{});return _=__assign({files:V},d?{template:d}:null),lf().compressToBase64(JSON.stringify(_)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},UnstyledOpenInCodeSandboxButton=function(h){var d,_,V,ee=h.children,er=__rest(h,["children"]),eo=useSandpack().sandpack,ec=eF.useRef(null),eh=eF.useState(),ep=eh[0],ef=eh[1];return(eF.useEffect(function(){var h=setTimeout(function(){var h=getFileParameters(eo.files,eo.environment);ef(new URLSearchParams({parameters:h,query:new URLSearchParams({file:eo.activeFile,utm_medium:"sandpack"}).toString()}))},600);return function(){clearTimeout(h)}},[eo.activeFile,eo.environment,eo.files]),(null!==(V=null===(_=null===(d=null==ep?void 0:ep.get)||void 0===d?void 0:d.call(ep,"parameters"))||void 0===_?void 0:_.length)&&void 0!==V?V:0)>1500)?(0,ej.jsxs)("button",__assign({onClick:function(){var h;return null===(h=ec.current)||void 0===h?void 0:h.submit()},title:"Open in CodeSandbox",type:"button"},er,{children:[(0,ej.jsxs)("form",{ref:ec,action:cv,method:"POST",style:{visibility:"hidden"},target:"_blank",children:[(0,ej.jsx)("input",{name:"environment",type:"hidden",value:"node"===eo.environment?"server":eo.environment}),Array.from(ep,function(h){var d=h[0],_=h[1];return(0,ej.jsx)("input",{name:d,type:"hidden",value:_},d)})]}),ee]})):(0,ej.jsx)("a",__assign({href:"".concat(cv,"?").concat(null==ep?void 0:ep.toString(),"&environment=").concat("node"===eo.environment?"server":eo.environment),rel:"noreferrer noopener",target:"_blank",title:"Open in CodeSandbox"},er,{children:ee}))},OpenInCodeSandboxButton=function(){var h=useClassNames();return(0,ej.jsxs)(UnstyledOpenInCodeSandboxButton,{className:h("button",[h("icon-standalone"),lJ,lK,l0]),children:[(0,ej.jsx)(ExportIcon,{}),(0,ej.jsx)("span",{children:"Open Sandbox"})]})},cb=lS({transform:"translate(-4px, 9px) scale(0.13, 0.13)","*":{position:"absolute",width:"96px",height:"96px"}}),cS=lS(((e$={position:"absolute",right:"$space$2",bottom:"$space$2",zIndex:"$top",width:"32px",height:"32px",borderRadius:"$border$radius"})[".".concat(cb)]={display:"flex"},e$[".sp-button.".concat(lJ)]={display:"none"},e$["&:hover .sp-button.".concat(lJ)]={display:"flex"},e$["&:hover .sp-button.".concat(lJ," > span")]={display:"none"},e$["&:hover .".concat(cb)]={display:"none"},e$)),c_=l_({"0%":{transform:"rotateX(-25.5deg) rotateY(45deg)"},"100%":{transform:"rotateX(-25.5deg) rotateY(405deg)"}}),cw=lS({animation:"".concat(c_," 1s linear infinite"),animationFillMode:"forwards",transformStyle:"preserve-3d",transform:"rotateX(-25.5deg) rotateY(45deg)","*":{border:"10px solid $colors$clickable",borderRadius:"8px",background:"$colors$surface1"},".top":{transform:"rotateX(90deg) translateZ(44px)",transformOrigin:"50% 50%"},".bottom":{transform:"rotateX(-90deg) translateZ(44px)",transformOrigin:"50% 50%"},".front":{transform:"rotateY(0deg) translateZ(44px)",transformOrigin:"50% 50%"},".back":{transform:"rotateY(-180deg) translateZ(44px)",transformOrigin:"50% 50%"},".left":{transform:"rotateY(-90deg) translateZ(44px)",transformOrigin:"50% 50%"},".right":{transform:"rotateY(90deg) translateZ(44px)",transformOrigin:"50% 50%"}}),Loading=function(h){var d=h.className,_=h.showOpenInCodeSandbox,V=__rest(h,["className","showOpenInCodeSandbox"]),ee=useClassNames();return(0,ej.jsxs)("div",__assign({className:ee("cube-wrapper",[cS,d]),title:"Open in CodeSandbox"},V,{children:[_&&(0,ej.jsx)(OpenInCodeSandboxButton,{}),(0,ej.jsx)("div",{className:ee("cube",[cb]),children:(0,ej.jsxs)("div",{className:ee("sides",[cw]),children:[(0,ej.jsx)("div",{className:"top"}),(0,ej.jsx)("div",{className:"right"}),(0,ej.jsx)("div",{className:"bottom"}),(0,ej.jsx)("div",{className:"left"}),(0,ej.jsx)("div",{className:"front"}),(0,ej.jsx)("div",{className:"back"})]})})]}))},ck=lS({backgroundColor:"$colors$surface1"}),LoadingOverlay=function(h){var d=h.clientId,_=h.loading,V=h.className,ee=h.style,er=h.showOpenInCodeSandbox,eo=__rest(h,["clientId","loading","className","style","showOpenInCodeSandbox"]),ec=useClassNames(),eh=useSandpack().sandpack,ep=eh.runSandpack,ef=eh.environment,em=eF.useState(!1),eg=em[0],eO=em[1],ey=useLoadingOverlayState(d,_),ev=useSandpackPreviewProgress({clientId:d}),eS=useSandpackShellStdout({clientId:d}).logs;return(eF.useEffect(function(){var h;return(null==ev?void 0:ev.includes("Running"))&&(h=setTimeout(function(){eO(!0)},3e3)),function(){h&&clearTimeout(h)}},[ev]),"HIDDEN"===ey)?null:"TIMEOUT"===ey?(0,ej.jsx)("div",__assign({className:ec("overlay",[ec("error"),l5,l7,l3,V])},eo,{children:(0,ej.jsxs)("div",{className:ec("error-message",[l4]),children:[(0,ej.jsx)("p",{className:ec("error-title",[lS({fontWeight:"bold"})]),children:"Couldn't connect to server"}),(0,ej.jsx)("div",{className:ec("error-message",[l4]),children:(0,ej.jsxs)("p",{children:["This means sandpack cannot connect to the runtime or your network is having some issues. Please check the network tab in your browser and try again. If the problem persists, report it via"," ",(0,ej.jsx)("a",{href:"mailto:hello@codesandbox.io?subject=Sandpack Timeout Error",children:"email"})," ","or submit an issue on"," ",(0,ej.jsx)("a",{href:"https://github.com/codesandbox/sandpack/issues",rel:"noreferrer noopener",target:"_blank",children:"GitHub."})]})}),(0,ej.jsxs)("p",{className:ec("error-message",[l4({errorCode:!0})]),children:["ENV: ",ef,(0,ej.jsx)("br",{}),"ERROR: TIME_OUT"]}),(0,ej.jsx)("div",{children:(0,ej.jsxs)("button",{className:ec("button",[ec("icon-standalone"),lJ,lK,l0]),onClick:ep,title:"Restart script",type:"button",children:[(0,ej.jsx)(RestartIcon,{})," ",(0,ej.jsx)("span",{children:"Try again"})]})})]})})):(0,ej.jsxs)(ej.Fragment,{children:[(0,ej.jsxs)("div",__assign({className:ec("overlay",[ec("loading"),l5,ck,V]),style:__assign(__assign({},ee),{opacity:"LOADING"===ey||"PRE_FADING"===ey?1:0,transition:"opacity ".concat(200,"ms ease-out")})},eo,{children:[eg&&(0,ej.jsx)("div",{className:cT.toString(),children:(0,ej.jsx)(StdoutList,{data:eS})}),(0,ej.jsx)(Loading,{showOpenInCodeSandbox:er})]})),ev&&(0,ej.jsx)("div",{className:cE.toString(),children:(0,ej.jsx)("p",{children:ev})})]})},cT=lS({position:"absolute",left:0,right:0,bottom:"$space$8",overflow:"auto",opacity:.5,overflowX:"hidden"}),cE=lS({position:"absolute",left:"$space$5",bottom:"$space$4",zIndex:"$top",color:"$colors$clickable",animation:"".concat(l2," 150ms ease"),fontFamily:"$font$mono",fontSize:".8em",width:"75%",p:{whiteSpace:"nowrap",margin:0,textOverflow:"ellipsis",overflow:"hidden"}}),DependenciesProgress=function(h){var d=useSandpackPreviewProgress({timeout:3e3,clientId:h.clientId});return d?(0,ej.jsx)("div",{className:cC.toString(),children:(0,ej.jsx)("p",{children:d})}):null},cC=lS({position:"absolute",left:"$space$5",bottom:"$space$4",zIndex:"$top",color:"$colors$clickable",animation:"".concat(l2," 150ms ease"),fontFamily:"$font$mono",fontSize:".8em",width:"75%",p:{whiteSpace:"nowrap",margin:0,textOverflow:"ellipsis",overflow:"hidden"}}),cP=lS({borderRadius:"0",width:"100%",padding:0,marginBottom:"$space$2",span:{textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"},svg:{marginRight:"$space$1"}}),File=function(h){var d=h.selectFile,_=h.path,V=h.active,ee=h.onClick,er=h.depth,eo=h.isDirOpen,ec=useClassNames(),eh=_.split("/").filter(Boolean).pop();return(0,ej.jsxs)("button",{className:ec("button",[ec("explorer"),lJ,cP]),"data-active":V,onClick:function(h){d&&d(_),null==ee||ee(h)},style:{paddingLeft:18*er+"px"},title:eh,type:"button",children:[d?(0,ej.jsx)(FileIcon,{}):eo?(0,ej.jsx)(DirectoryIconOpen,{}):(0,ej.jsx)(DirectoryIconClosed,{}),(0,ej.jsx)("span",{children:eh})]})},Directory=function(h){var d=h.prefixedPath,_=h.files,V=h.selectFile,ee=h.activeFile,er=h.depth,eo=h.autoHiddenFiles,ec=h.visibleFiles,eh=h.initialCollapsedFolder,ep=eF.useState(!(null==eh?void 0:eh.includes(d))),ef=ep[0],em=ep[1];return(0,ej.jsxs)("div",{children:[(0,ej.jsx)(File,{depth:er,isDirOpen:ef,onClick:function(){return em(function(h){return!h})},path:d+"/"}),ef&&(0,ej.jsx)(ModuleList,{activeFile:ee,autoHiddenFiles:eo,depth:er+1,files:_,initialCollapsedFolder:eh,prefixedPath:d,selectFile:V,visibleFiles:ec})]},d)},fromPropsToModules=function(h){var d=h.autoHiddenFiles,_=h.visibleFiles,V=h.files,ee=h.prefixedPath,er=_.length>0,eo=d&&!er,ec=d&&!!er,eh=Object.keys(V).filter(function(h){var d,er=h.startsWith(ee);return ec?er&&_.includes(h):eo?er&&!(null===(d=V[h])||void 0===d?void 0:d.hidden):er}).map(function(h){return h.substring(ee.length)}),ep=new Set(eh.filter(function(h){return h.includes("/")}).map(function(h){return"".concat(ee).concat(h.split("/")[0],"/")})),ef=eh.filter(function(h){return!h.includes("/")}).map(function(h){return"".concat(ee).concat(h)});return{directories:Array.from(ep),modules:ef}},ModuleList=function(h){var d=h.depth,_=void 0===d?0:d,V=h.activeFile,ee=h.selectFile,er=h.prefixedPath,eo=h.files,ec=h.autoHiddenFiles,eh=h.visibleFiles,ep=h.initialCollapsedFolder,ef=fromPropsToModules({visibleFiles:eh,autoHiddenFiles:ec,prefixedPath:er,files:eo}),em=ef.directories,eg=ef.modules;return(0,ej.jsxs)("div",{children:[em.map(function(h){return(0,ej.jsx)(Directory,{activeFile:V,autoHiddenFiles:ec,depth:_,files:eo,initialCollapsedFolder:ep,prefixedPath:h,selectFile:ee,visibleFiles:eh},h)}),eg.map(function(h){return(0,ej.jsx)(File,{active:V===h,depth:_,path:h,selectFile:ee},h)})]})},cI=lS({padding:"$space$3",overflow:"auto",height:"100%"}),SandpackFileExplorer=function(h){var d=h.className,_=h.autoHiddenFiles,V=h.initialCollapsedFolder,ee=__rest(h,["className","autoHiddenFiles","initialCollapsedFolder"]),er=useSandpack(),eo=er.sandpack,ec=eo.status,eh=eo.updateFile,ep=eo.deleteFile,ef=eo.activeFile,em=eo.files,eg=eo.openFile,eO=eo.visibleFilesFromProps,ey=er.listen,ev=useClassNames();eF.useEffect(function(){if("running"===ec)return ey(function(h){"fs/change"===h.type&&eh(h.path,h.content,!1),"fs/remove"===h.type&&ep(h.path,!1)})},[ec]);var eS=Object.keys(em).sort().reduce(function(h,d){return h[d]=em[d],h},{});return(0,ej.jsx)("div",__assign({className:ev("file-explorer",[cs,d])},ee,{children:(0,ej.jsx)("div",{className:ev("file-explorer-list",[cI]),children:(0,ej.jsx)(ModuleList,{activeFile:ef,autoHiddenFiles:void 0!==_&&_,files:eS,initialCollapsedFolder:void 0===V?[]:V,prefixedPath:"/",selectFile:eg,visibleFiles:eO})})}))},splitUrl=function(h){var d=h.match(/(https?:\/\/.*?)\//);return d&&d[1]?[d[1],h.replace(d[1],"")]:[h,"/"]},cR=lS({display:"flex",alignItems:"center",height:"$layout$headerHeight",borderBottom:"1px solid $colors$surface2",padding:"$space$3 $space$2",background:"$colors$surface1"}),cA=lS({backgroundColor:"$colors$surface2",color:"$colors$clickable",padding:"$space$1 $space$3",borderRadius:"99999px",border:"1px solid $colors$surface2",height:"24px",lineHeight:"24px",fontSize:"inherit",outline:"none",flex:1,marginLeft:"$space$4",width:"0",transition:"background $transitions$default","&:hover":{backgroundColor:"$colors$surface3"},"&:focus":{backgroundColor:"$surface1",border:"1px solid $colors$accent",color:"$colors$base"}}),Navigator=function(h){var d,_=h.clientId,V=h.onURLChange,ee=h.className,er=h.startRoute,eo=__rest(h,["clientId","onURLChange","className","startRoute"]),ec=eF.useState(""),eh=ec[0],ep=ec[1],ef=useSandpack(),em=ef.sandpack,eg=ef.dispatch,eO=ef.listen,ey=eF.useState(null!==(d=null!=er?er:em.startRoute)&&void 0!==d?d:"/"),ev=ey[0],eS=ey[1],e_=eF.useState(!1),ew=e_[0],ex=e_[1],ek=eF.useState(!1),eT=ek[0],eE=ek[1],eC=useClassNames();eF.useEffect(function(){var h=eO(function(h){if("urlchange"===h.type){var d=h.url,_=h.back,V=h.forward,ee=splitUrl(d),er=ee[0],eo=ee[1];ep(er),eS(eo),ex(_),eE(V)}},_);return function(){return h()}},[]);var eP=eC("button",[eC("icon"),lJ,l1,lS({minWidth:"$space$6",justifyContent:"center"})]);return(0,ej.jsxs)("div",__assign({className:eC("navigator",[cR,ee])},eo,{children:[(0,ej.jsx)("button",{"aria-label":"Go back one page",className:eP,disabled:!ew,onClick:function(){eg({type:"urlback"})},type:"button",children:(0,ej.jsx)(BackwardIcon,{})}),(0,ej.jsx)("button",{"aria-label":"Go forward one page",className:eP,disabled:!eT,onClick:function(){eg({type:"urlforward"})},type:"button",children:(0,ej.jsx)(ForwardIcon,{})}),(0,ej.jsx)("button",{"aria-label":"Refresh page",className:eP,onClick:function(){eg({type:"refresh"})},type:"button",children:(0,ej.jsx)(RefreshIcon,{})}),(0,ej.jsx)("input",{"aria-label":"Current Sandpack URL",className:eC("input",[cA]),name:"Current Sandpack URL",onChange:function(h){eS(h.target.value.startsWith("/")?h.target.value:"/".concat(h.target.value))},onKeyDown:function(h){"Enter"===h.code&&(h.preventDefault(),h.stopPropagation(),"function"==typeof V&&V(eh+h.currentTarget.value))},type:"text",value:ev})]}))},c$=lS(((eN={flex:1,display:"flex",flexDirection:"column",background:"white",overflow:"auto",position:"relative"})[".".concat("sp","-bridge-frame")]={border:0,position:"absolute",left:"$space$2",bottom:"$space$2",zIndex:"$top",height:12,width:"30%",mixBlendMode:"multiply",pointerEvents:"none"},eN)),cN=lS({border:"0",outline:"0",width:"100%",height:"100%",minHeight:"160px",maxHeight:"2000px",flex:1}),cM=lS({display:"flex",position:"absolute",bottom:"$space$2",right:"$space$2",zIndex:"$overlay",gap:"$space$2"}),cQ=eF.forwardRef(function(h,d){var _=h.showNavigator,V=void 0!==_&&_,ee=h.showRefreshButton,er=h.showOpenInCodeSandbox,eo=void 0===er||er,ec=h.showSandpackErrorOverlay;h.showOpenNewtab;var eh=h.showRestartButton,ep=h.actionsChildren,ef=void 0===ep?(0,ej.jsx)(ej.Fragment,{}):ep,em=h.children,eg=h.className,eO=h.startRoute,ey=void 0===eO?"/":eO,ev=__rest(h,["showNavigator","showRefreshButton","showOpenInCodeSandbox","showSandpackErrorOverlay","showOpenNewtab","showRestartButton","actionsChildren","children","className","startRoute"]),eS=useSandpackClient({startRoute:ey}),e_=eS.sandpack,ew=eS.listen,ex=eS.iframe,ek=eS.getClient,eT=eS.clientId,eE=eS.dispatch,eC=eF.useState(null),eP=eC[0],eI=eC[1],eR=e_.status,eA=useSandpackNavigation(eT).refresh,e$=useSandpackShell(eT).restart,eN=useClassNames();return eF.useEffect(function(){return ew(function(h){"resize"===h.type&&eI(h.height)})},[]),eF.useImperativeHandle(d,function(){return{clientId:eT,getClient:ek}},[ek,eT]),(0,ej.jsxs)(SandpackStack,__assign({className:eN("preview",[eg])},ev,{children:[V&&(0,ej.jsx)(Navigator,{clientId:eT,onURLChange:function(h){ex.current&&(ex.current.src=h)},startRoute:ey}),(0,ej.jsxs)("div",{className:eN("preview-container",[c$]),children:[(0,ej.jsx)("iframe",{ref:ex,className:eN("preview-iframe",[cN]),style:{height:eP||void 0},title:"Sandpack Preview"}),(0,ej.jsxs)("div",{className:eN("preview-actions",[cM]),children:[ef,(void 0===eh||eh)&&"node"===e_.environment&&(0,ej.jsx)(RoundedButton,{onClick:e$,children:(0,ej.jsx)(RestartIcon,{})}),!V&&(void 0===ee||ee)&&"running"===eR&&(0,ej.jsx)(RoundedButton,{onClick:eA,children:(0,ej.jsx)(RefreshIcon,{})}),e_.teamId&&(0,ej.jsx)("button",{className:eN("button",[eN("icon-standalone"),lJ,lK,l0]),onClick:function(){return eE({type:"sign-out"})},title:"Sign out",type:"button",children:(0,ej.jsx)(SignOutIcon,{})}),eo&&(0,ej.jsx)(OpenInCodeSandboxButton,{})]}),(0,ej.jsx)(LoadingOverlay,{clientId:eT,showOpenInCodeSandbox:eo}),(void 0===ec||ec)&&(0,ej.jsx)(ErrorOverlay,{}),em]})]}))});lS(((eM={display:"flex",flexDirection:"column",width:"100%",position:"relative",overflow:"auto",minHeight:"160px",flex:1})[".".concat("sp","-stack")]={height:"100%"},eM)),lS({justifyContent:"space-between",borderBottom:"1px solid $colors$surface2",padding:"0 $space$2",fontFamily:"$font$mono",height:"$layout$headerHeight",minHeight:"$layout$headerHeight",overflowX:"auto",whiteSpace:"nowrap"}),lS({display:"flex",flexDirection:"row",alignItems:"center",gap:"$space$2"});var cD=lS({variants:{status:{pass:{color:"var(--test-pass)"},fail:{color:"var(--test-fail)"},skip:{color:"var(--test-skip)"},title:{color:"var(--test-title)"}}}});cD({status:"pass"}),cD({status:"fail"}),cD({status:"skip"}),cD({status:"title"});var cj=lS({variants:{status:{pass:{background:"var(--test-pass)",color:"$colors$surface1"},fail:{background:"var(--test-fail)",color:"$colors$surface1"},run:{background:"var(--test-run)",color:"$colors$surface1"}}}});cj({status:"run"}),cj({status:"pass"}),cj({status:"fail"}),lS({marginLeft:"$space$4"}),lS({marginBottom:"$space$2",color:"$colors$clickable"}),lS({marginBottom:"$space$2",color:"$colors$hover"}),lS({marginLeft:"$space$2"}),lS({marginRight:"$space$2"}),lS({color:"$colors$hover",marginBottom:"$space$2"}),lS({marginLeft:"$space$4"}),lS({color:"$colors$hover",fontSize:"$font$size",padding:"$space$2",whiteSpace:"pre-wrap"}),lS({display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"$space$2"}),lS({marginBottom:"$space$2"}),lS({fontWeight:"bold"}),lS({borderRadius:"calc($border$radius / 2)"}),lS({padding:"$space$1 $space$2",fontFamily:"$font$mono",textTransform:"uppercase",marginRight:"$space$2"}),lS({fontFamily:"$font$mono",cursor:"pointer",display:"inline-block"}),lS({color:"$colors$clickable",textDecorationStyle:"dotted",textDecorationLine:"underline"}),lS({color:"$colors$hover",fontWeight:"bold",textDecorationStyle:"dotted",textDecorationLine:"underline"}),lS({marginBottom:"$space$2"}),lS({fontWeight:"bold",color:"$colors$hover",whiteSpace:"pre-wrap"}),lS({fontWeight:"bold",color:"$colors$clickable"}),lS({display:"flex",position:"absolute",bottom:"$space$2",right:"$space$2",zIndex:"$overlay","> *":{marginLeft:"$space$2"}}),lS({padding:"$space$4",height:"100%",overflow:"auto",display:"flex",flexDirection:"column",position:"relative",fontFamily:"$font$mono"}),lS({fontWeight:"bold",color:"$colors$base"});var cL=["SyntaxError: ","Error in sandbox:"],cF={id:"random",method:"clear",data:["Console was cleared"]},cZ=(0,eval)("this"),cV="function"==typeof ArrayBuffer,cB="function"==typeof Map,cW="function"==typeof Set;(eg=eQ||(eQ={}))[eg.infinity=0]="infinity",eg[eg.minusInfinity=1]="minusInfinity",eg[eg.minusZero=2]="minusZero";var cU={Arithmetic:function(h){return h===eQ.infinity?1/0:h===eQ.minusInfinity?-1/0:h===eQ.minusZero?-0:h},HTMLElement:function(h){var d=document.implementation.createHTMLDocument("sandbox");try{var _=d.createElement(h.tagName);_.innerHTML=h.innerHTML;for(var V=0,ee=Object.keys(h.attributes);V<ee.length;V++){var er=ee[V];try{_.setAttribute(er,h.attributes[er])}catch(h){}}return _}catch(d){return h}},Function:function(h){var tempFun=function(){};return Object.defineProperty(tempFun,"toString",{value:function(){return"function ".concat(h.name,"() {").concat(h.body,"}")}}),tempFun},"[[NaN]]":function(){return NaN},"[[undefined]]":function(){},"[[Date]]":function(h){var d=new Date;return d.setTime(h),d},"[[RegExp]]":function(h){return new RegExp(h.src,h.flags)},"[[Error]]":function(h){var d=new(cZ[h.name]||Error)(h.message);return d.stack=h.stack,d},"[[ArrayBuffer]]":function(h){if(cV){var d=new ArrayBuffer(h.length);return new Int8Array(d).set(h),d}return h},"[[TypedArray]]":function(h){return"function"==typeof cZ[h.ctorName]?new cZ[h.ctorName](h.arr):h.arr},"[[Map]]":function(h){if(cB){for(var d=new Map,_=0;_<h.length;_+=2)d.set(h[_],h[_+1]);return d}for(var V=[],ee=0;ee<h.length;ee+=2)V.push([h[_],h[_+1]]);return V},"[[Set]]":function(h){if(cW){for(var d=new Set,_=0;_<h.length;_++)d.add(h[_]);return d}return h}},formatSymbols=function(h){var d;if("string"==typeof h||"number"==typeof h||null===h);else if(Array.isArray(h))return h.map(formatSymbols);else if("object"==typeof h&&"@t"in h){var _=h["@t"],V=cU[_];return V(h.data)}else if("object"==typeof h&&"#@t"in h){var _=h["#@t"],V=cU[_];return V(h.data)}else if("object"==typeof h&&(null===(d=h.constructor)||void 0===d?void 0:d.name)==="NodeList"){var ee={};return Object.entries(h).forEach(function(h){var d=h[0],_=h[1];ee[d]=formatSymbols(_)}),ee}return h},arrayToString=function(h,d,_){var V=h.reduce(function(h,V,ee){return"".concat(h).concat(ee?", ":"").concat(fromConsoleToString(V,d,_))},"");return"[".concat(V,"]")},objectToString=function(h,d,_){var V="Object"!==h.constructor.name?"".concat(h.constructor.name," "):"";if(_>2)return V;var ee=Object.entries(h),er=Object.entries(h).reduce(function(h,V,er){var eo=V[0],ec=V[1],eh=ee.length>10?"\n  ":"",ep=fromConsoleToString(ec,d,_);return 400===er?h+eh+"...":er>400?h:h+"".concat(0===er?"":", ").concat(eh).concat(eo,": ")+ep},"");return"".concat(V,"{ ").concat(er).concat(ee.length>10?"\n":" ","}")},fromConsoleToString=function(h,d,_){var V;void 0===_&&(_=0);try{var ee=formatSymbols(h);if(Array.isArray(ee))return arrayToString(ee,d,_+1);switch(typeof ee){case"string":return'"'.concat(ee,'"').slice(0,1e4);case"number":case"function":case"symbol":return ee.toString();case"boolean":return String(ee);case"undefined":return"undefined";default:if(ee instanceof RegExp||ee instanceof Error||ee instanceof Date)return ee.toString();if(null===ee)return String(null);if(ee instanceof HTMLElement)return ee.outerHTML.slice(0,1e4);if(0===Object.entries(ee).length)return"{}";if("@r"in ee){if(_>2)return"Unable to print information";var er=d[ee["@r"]];return fromConsoleToString(er,d,_+1)}if((null===(V=ee.constructor)||void 0===V?void 0:V.name)==="NodeList"){var eo=ee.length,ec=Array(eo).fill(null).map(function(h,_){return fromConsoleToString(ee[_],d)});return"NodeList(".concat(ee.length,")[").concat(ec,"]")}return objectToString(ee,d,_+1)}}catch(h){return"Unable to print information"}},getType=function(h){switch(h){case"warn":return"warning";case"clear":return"clear";case"error":return"error";default:return"info"}},ConsoleList=function(h){var d=h.data,_=useClassNames();return(0,ej.jsx)(ej.Fragment,{children:d.map(function(h,d,V){var ee=h.data,er=h.id,eo=h.method;return ee&&Array.isArray(ee)?(0,ej.jsx)(eF.Fragment,{children:ee.map(function(h,ee){var ec=V.slice(d,V.length);return(0,ej.jsx)("div",{className:_("console-item",[cz({variant:getType(eo)})]),children:(0,ej.jsx)(cf,{code:"clear"===eo?h:fromConsoleToString(h,ec),fileType:"js",initMode:"user-visible",showReadOnly:!1,readOnly:!0,wrapContent:!0})},"".concat(er,"-").concat(ee))})},er):null})})},cz=lS(((eD={width:"100%",padding:"$space$3 $space$2",fontSize:".8em",position:"relative","&:not(:first-child):after":{content:"",position:"absolute",top:0,left:0,right:0,height:1,background:"$colors$surface3"},".sp-cm":{padding:0},".cm-editor":{background:"none"},".cm-content":{padding:0}})[".".concat("sp","-pre-placeholder")]={margin:"0 !important",fontSize:"1em"},eD.variants={variant:{error:{color:"$colors$error",background:"$colors$errorSurface","&:not(:first-child):after":{background:"$colors$error",opacity:.07}},warning:{color:"$colors$warning",background:"$colors$warningSurface","&:not(:first-child):after":{background:"$colors$warning",opacity:.07}},clear:{fontStyle:"italic"},info:{}}},eD)),cq=lS({justifyContent:"space-between",borderBottom:"1px solid $colors$surface2",padding:"0 $space$2",fontFamily:"$font$mono",height:"$layout$headerHeight",minHeight:"$layout$headerHeight",overflowX:"auto",whiteSpace:"nowrap"}),cX=lS({display:"flex",flexDirection:"row",alignItems:"center",gap:"$space$2"}),Header=function(h){var d=h.currentTab,_=h.setCurrentTab,V=h.node,ee=useClassNames(),er=ee("console-header-button",[lJ,l0,lS({padding:"$space$1 $space$3"})]);return(0,ej.jsxs)("div",{className:ee("console-header",[cq,cX]),children:[(0,ej.jsxs)("p",{className:ee("console-header-title",[lS({lineHeight:1,margin:0,color:"$colors$base",fontSize:"$font$size",display:"flex",alignItems:"center",gap:"$space$2"})]),children:[(0,ej.jsx)(ConsoleIcon,{}),(0,ej.jsx)("span",{children:"Terminal"})]}),V&&(0,ej.jsxs)("div",{className:ee("console-header-actions",[cX]),children:[(0,ej.jsx)("button",{className:er,"data-active":"server"===d,onClick:function(){return _("server")},type:"button",children:"Server"}),(0,ej.jsx)("button",{className:er,"data-active":"client"===d,onClick:function(){return _("client")},type:"button",children:"Client"})]})]})},useSandpackConsole=function(h){var d=h.clientId,_=h.maxMessageCount,V=void 0===_?800:_,ee=h.showSyntaxError,er=void 0!==ee&&ee,eo=h.resetOnPreviewRestart,ec=void 0!==eo&&eo,eh=eF.useState([]),ep=eh[0],ef=eh[1],em=useSandpack().listen;return eF.useEffect(function(){return em(function(h){if(ec&&"start"===h.type)ef([]);else if("console"===h.type&&h.codesandbox){var d=Array.isArray(h.log)?h.log:[h.log];if(d.find(function(h){return"clear"===h.method}))return ef([cF]);var _=er?d:d.filter(function(h){var d,_,V;return(null!==(V=null===(_=null===(d=null==h?void 0:h.data)||void 0===d?void 0:d.filter)||void 0===_?void 0:_.call(d,function(h){return"string"!=typeof h||0===cL.filter(function(d){return h.startsWith(d)}).length}))&&void 0!==V?V:[]).length>0});if(!_)return;ef(function(h){for(var d=__spreadArray(__spreadArray([],h,!0),_,!0).filter(function(h,d,_){return d===_.findIndex(function(d){return d.id===h.id})});d.length>V;)d.shift();return d})}},d)},[er,V,d,ec]),{logs:ep,reset:function(){return ef([])}}},cY=eF.forwardRef(function(h,d){var _,V=h.showHeader,ee=h.showSyntaxError,er=h.maxMessageCount,eo=h.onLogsChange,ec=h.className;h.showSetupProgress;var eh=h.showResetConsoleButton,ep=h.showRestartButton,ef=h.resetOnPreviewRestart,em=void 0!==ef&&ef,eg=h.actionsChildren,eO=void 0===eg?(0,ej.jsx)(ej.Fragment,{}):eg,ey=h.standalone,ev=void 0!==ey&&ey,eS=__rest(h,["showHeader","showSyntaxError","maxMessageCount","onLogsChange","className","showSetupProgress","showResetConsoleButton","showRestartButton","resetOnPreviewRestart","actionsChildren","standalone"]),e_=useSandpack().sandpack.environment,ew=useSandpackClient(),ex=ew.iframe,ek=ew.clientId,eT=useSandpackShell().restart,eE=eF.useState("node"===e_?"server":"client"),eC=eE[0],eP=eE[1],eI=ev?ek:void 0,eR=useSandpackConsole({maxMessageCount:er,showSyntaxError:void 0!==ee&&ee,resetOnPreviewRestart:em,clientId:eI}),eA=eR.logs,e$=eR.reset,eN=useSandpackShellStdout({maxMessageCount:er,resetOnPreviewRestart:em,clientId:eI}),eM=eN.logs,eQ=eN.reset,eD=eF.useRef(null);eF.useEffect(function(){null==eo||eo(eA),eD.current&&(eD.current.scrollTop=eD.current.scrollHeight)},[eo,eA,eM,eC]);var eL="server"===eC,eZ="node"===e_;eF.useImperativeHandle(d,function(){return{reset:function(){e$(),eQ()}}});var eV=useClassNames();return(0,ej.jsxs)(SandpackStack,__assign({className:eV("console",[lS(((_={height:"100%",background:"$surface1",iframe:{display:"none"}})[".".concat("sp","-bridge-frame")]={display:"block",border:0,position:"absolute",left:"$space$2",bottom:"$space$2",zIndex:"$top",height:12,width:"30%",mixBlendMode:"multiply",pointerEvents:"none"},_)),ec])},eS,{children:[(void 0===V||V)&&eZ&&(0,ej.jsx)(Header,{currentTab:eC,node:eZ,setCurrentTab:eP}),(0,ej.jsx)("div",{ref:eD,className:eV("console-list",[lS({overflow:"auto",scrollBehavior:"smooth"})]),children:eL?(0,ej.jsx)(StdoutList,{data:eM}):(0,ej.jsx)(ConsoleList,{data:eA})}),(0,ej.jsxs)("div",{className:eV("console-actions",[lS({position:"absolute",bottom:"$space$2",right:"$space$2",display:"flex",gap:"$space$2"})]),children:[eO,(void 0===ep||ep)&&eL&&(0,ej.jsx)(RoundedButton,{onClick:function(){eT(),e$(),eQ()},children:(0,ej.jsx)(RestartIcon,{})}),(void 0===eh||eh)&&(0,ej.jsx)(RoundedButton,{onClick:function(){"client"===eC?e$():eQ()},children:(0,ej.jsx)(CleanIcon,{})})]}),ev&&(0,ej.jsxs)(ej.Fragment,{children:[(0,ej.jsx)(DependenciesProgress,{clientId:eI}),(0,ej.jsx)("iframe",{ref:ex})]})]}))});lS({position:"absolute",zIndex:"$top",variants:{direction:{vertical:{right:0,left:0,height:10,cursor:"ns-resize"},horizontal:{top:0,bottom:0,width:10,cursor:"ew-resize"}}},"@media screen and (max-width: 768px)":{display:"none"}}),lS({position:"relative",strong:{background:"$colors$clickable",color:"$colors$surface1",minWidth:12,height:12,padding:"0 2px",borderRadius:12,fontSize:8,lineHeight:"12px",position:"absolute",top:0,right:0,fontWeight:"normal"}}),lS({width:"100%",overflow:"hidden"}),lS({flexDirection:"row-reverse","@media screen and (max-width: 768px)":{flexFlow:"wrap-reverse !important",flexDirection:"initial"}});var cG={colors:{surface1:"#193549",surface2:"#0d3a58",surface3:"#1f4662",clickable:"#aaaaaa",base:"#ffffff",disabled:"#C5C5C5",hover:"#ffffff",accent:"#ffc600",error:"#a22929",errorSurface:"#0d3a58"},syntax:{plain:"#ffffff",comment:{color:"#0088ff",fontStyle:"italic"},keyword:"#ff9d00",tag:"#9effff",punctuation:"#e1efff",definition:"#ffc600",property:"#ffc600",static:"#ffee80",string:"#a5ff90"},font:{body:'-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol"',mono:'"Operator Mono", "Fira Mono", "DejaVu Sans Mono", Menlo, Consolas, "Liberation Mono", Monaco, "Lucida Console", monospace',size:"13px",lineHeight:"20px"}};function CodeEditor(h){let{showConsole:d,showFileExplorer:_,visibleFiles:V,template:ee="react",...er}=h,[eo,ec]=(0,eF.useState)();return(0,eF.useEffect)(()=>{let h=getComputedStyle(document.documentElement).getPropertyValue("--primary-200");ec(h)},[]),eo?(0,ej.jsxs)(SandpackProvider,{options:{visibleFiles:V},...er,theme:{...cG,colors:{...cG.colors,accent:eo},syntax:{...cG.syntax,keyword:eo,property:eo},font:{size:"14px"}},template:ee,children:[(0,ej.jsx)(cm,{showTabs:!0,closableTabs:!0}),(0,ej.jsxs)(cO,{children:[(0,ej.jsx)(cQ,{showOpenInCodeSandbox:!1}),_&&(0,ej.jsx)(SandpackFileExplorer,{}),d&&(0,ej.jsx)(cY,{})]})]}):null}},3834:function(h,d,_){"use strict";_.d(d,{Bt:function(){return ee},OX:function(){return er},px:function(){return V},w4:function(){return eo}});let V="allysson.me",ee="https://allysson.me",er="@allyssonsantos",eo=768},6270:function(h,d,_){"use strict";_.d(d,{VI:function(){return er},od:function(){return ee},xC:function(){return V}});let V="SIGN_IN_MODAL",ee="DELETE_ACCOUNT_MODAL",er="DELETE_COMMENT_MODAL"},2707:function(h,d,_){"use strict";_.d(d,{Ho:function(){return AuthProvider},aC:function(){return useAuth},kS:function(){return logout},tm:function(){return deleteAccount},x4:function(){return login}});var V=_(5893),ee=_(7294),er=_(5629),eo=_(6008),ec=_(6385);let eh=(0,ee.createContext)({});function useAuth(){let h=(0,ee.useContext)(eh);if(void 0===h)throw Error("useAuth mst be used within a AuthProvider");return h}async function login(){try{let h=new er.hJ;return h.setCustomParameters({prompt:"select_account"}),await (0,er.rh)(ec.I,h),!0}catch(h){return Promise.reject(h)}}async function logout(){try{return await (0,er.w7)(ec.I),!0}catch(h){return Promise.reject(h)}}async function deleteAccount(){let h=ec.I.currentUser;try{await (0,er.h8)(h);let d=(0,eo.IO)((0,eo.hJ)(ec.db,"comments"),(0,eo.ar)("uid","==",h.uid)),_=await (0,eo.PL)(d);_.forEach(h=>(0,eo.oe)(h.ref))}catch(d){if(d){let d=new er.hJ;d.setCustomParameters({prompt:"select_account"}),(0,er.bc)(h,d)}}}function AuthProvider(h){let{children:d}=h,[_,er]=(0,ee.useState)(),[eo,ep]=(0,ee.useState)(!0);(0,ee.useEffect)(()=>{let h=ec.I.onAuthStateChanged(h=>{er(h),ep(!1)});return h},[]);let ef=(0,ee.useMemo)(()=>({currentUser:_,isLoadingUser:eo}),[_,eo]);return(0,V.jsx)(eh.Provider,{value:ef,children:d})}},923:function(h,d,_){"use strict";_.d(d,{I:function(){return BaseLayout}});var V=_(5893),ee=_(7294),er=_(1163),eo=_(2010),ec=_(5278),eh=_(408),ep=_(8273),ef=_(3993),em=_(2535),eg=_.n(em);let eO=(0,ec.j)(eg().main,{variants:{centralize:{true:eg()["main--centralized"]}}});function BaseLayout(h){var d;let{children:_,className:ec="",centralize:em=!0}=h,[ey,ev]=(0,ee.useState)(!1),eS=(0,er.useRouter)(),{t:e_}=(0,ep.$G)("sidebar");function handleSideBar(){ev(!ey)}return null===(d=eS.events)||void 0===d||d.on("routeChangeStart",()=>{ev(!1)}),(0,V.jsx)(eo.f,{attribute:"class",children:(0,V.jsxs)("div",{className:"".concat(ec," ").concat(eg().base),children:[(0,V.jsx)(ef.Ke,{isOpen:ey,onSideBarClose:handleSideBar}),(0,V.jsxs)("main",{className:eO({centralize:em}),children:[(0,V.jsx)(ef.zx,{onClick:handleSideBar,variant:"icon",className:eg()["main__menu-button"],"aria-label":e_("sidebar:open-menu"),children:(0,V.jsx)(eh.Z,{})}),_]})]})})}},1145:function(h,d,_){"use strict";_.d(d,{I:function(){return V.I}});var V=_(923)},4807:function(h,d,_){"use strict";_.r(d);var V=_(5893),ee=_(2555),er=_.n(ee),eo=_(8273),ec=_(2962),eh=_(2707),ep=_(3993),ef=_(3834),em=_(1145);_(4921),_(6713),_(415),_(4690),_(2207),d.default=(0,eo.Jc)(function(h){var d;let{Component:_,pageProps:ee}=h,eo=null!==(d=_.getLayout)&&void 0!==d?d:h=>(0,V.jsx)(em.I,{children:h});return(0,V.jsx)("div",{className:er().className,children:(0,V.jsx)(eh.Ho,{children:(0,V.jsx)(ep.DY,{children:eo((0,V.jsxs)(V.Fragment,{children:[(0,V.jsx)(ec.lX,{titleTemplate:"%s | ".concat(ef.px),defaultTitle:"Allysson Santos",canonical:ef.Bt,openGraph:{type:"website",locale:"pt_BR",url:ef.Bt,site_name:ef.px},twitter:{handle:ef.OX,cardType:"summary_large_image",site:ef.OX}}),(0,V.jsx)(_,{...ee})]}))})})})})},5774:function(h,d,_){"use strict";_.d(d,{Q:function(){return deleteComment},Y:function(){return createComment}});var V=_(6008),ee=_(6385);async function deleteComment(h){let d=(0,V.IO)((0,V.hJ)(ee.db,"comments"),(0,V.ar)((0,V.Jm)(),"==",h)),_=await (0,V.PL)(d);_.forEach(async h=>{try{return await (0,V.oe)(h.ref),!0}catch(h){return Promise.reject(h)}})}async function createComment(h,d,_){try{let er=await (0,V.ET)((0,V.hJ)(ee.db,"comments"),{uid:h.uid,message:d,userName:h.displayName,date:new Date,timestamp:(0,V.Bt)(),slug:_});return er}catch(h){return Promise.reject(h)}}},6385:function(h,d,_){"use strict";_.d(d,{I:function(){return eh},db:function(){return ec}});var V=_(1453);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(0,V.KN)("firebase","9.23.0","app");var ee=_(5629),er=_(6008);let eo=0===(0,V.C6)().length?(0,V.ZF)({apiKey:"AIzaSyB9jfDohrNNmUhoGcjUVmpImHcn95gZCos",authDomain:"auth.allysson.me",projectId:"allysson-4345b",storageBucket:"allysson-4345b.appspot.com",messagingSenderId:"951088796755",appId:"1:951088796755:web:4088c0e6f6183de5d762a6",measurementId:"G-R8DXL2MS36"}):(0,V.C6)()[0],ec=(0,er.ad)(eo),eh=(0,ee.v0)(eo)},4690:function(){},2207:function(){},415:function(){},6713:function(){},4921:function(){},2555:function(h){h.exports={style:{fontFamily:"'__Source_Sans_3_eb3c34', '__Source_Sans_3_Fallback_eb3c34'",fontStyle:"normal"},className:"__className_eb3c34"}},2823:function(h){h.exports={alert:"alert_alert__PSeut"}},5799:function(h){h.exports={avatar:"avatar_avatar__Wqj4_"}},3164:function(h){h.exports={button:"button_button__TIoc7","button-icon":"button_button-icon__fa23z","button--small":"button_button--small__CfF2k","button-inverted":"button_button-inverted__wmN_S","button-ghost":"button_button-ghost__Dvwu4"}},9071:function(h){h.exports={modal__footer:"delete-account-modal_modal__footer__AOns5"}},4230:function(h){h.exports={modal__footer:"delete-comment-modal_modal__footer__8ghvR",modal__message:"delete-comment-modal_modal__message__ye2cl"}},5507:function(h){h.exports={"google-button":"google-button_google-button__v5_Xn","google-button__logo":"google-button_google-button__logo__JzjlN","google-button__label":"google-button_google-button__label__Dr98A"}},4276:function(h){h.exports={"language-switcher":"language-switcher_language-switcher__P6Kmg"}},3008:function(h){h.exports={menu:"menu_menu__zyZg1",menu__list:"menu_menu__list__MtPW2",menu__item:"menu_menu__item__KeLtK"}},4512:function(h){h.exports={modal:"modal_modal__CZ9gP",modal__wrapper:"modal_modal__wrapper___80eS",modal__header:"modal_modal__header__XSjS5",modal__title:"modal_modal__title__e06D5"}},7754:function(h){h.exports={post:"post-preview_post__eRO4n",post__title:"post-preview_post__title__mX25k",post__description:"post-preview_post__description__mzxq_"}},3746:function(h){h.exports={sidebar:"side-bar_sidebar__f_cNM","sidebar--opened":"side-bar_sidebar--opened__QDK3v",sidebar__header:"side-bar_sidebar__header__Z6dBR","sidebar__close-button":"side-bar_sidebar__close-button__78ZLk",sidebar__logo:"side-bar_sidebar__logo__oJnAB",sidebar__navigation:"side-bar_sidebar__navigation__Gn3Tj",sidebar__list:"side-bar_sidebar__list__DcA5z",sidebar__category:"side-bar_sidebar__category__Wx2d9",sidebar__link:"side-bar_sidebar__link__DKoh8","sidebar__link--active":"side-bar_sidebar__link--active__js_XY","sidebar__theme-button":"side-bar_sidebar__theme-button__EMniA","sidebar__theme-button--active":"side-bar_sidebar__theme-button--active__USp_l"}},8175:function(h){h.exports={"sign-in-modal":"sign-in-modal_sign-in-modal__zXtGf","sign-in-modal__disclaimer":"sign-in-modal_sign-in-modal__disclaimer__Tjmub","sign-in-modal__button":"sign-in-modal_sign-in-modal__button__R9XVg"}},507:function(h){h.exports={textarea:"textarea_textarea__9qMB7"}},2535:function(h){h.exports={base:"base_base__UmMtm",main:"base_main__UaCI6","main--centralized":"base_main--centralized__b7X4U","main__menu-button":"base_main__menu-button__SMDTb"}},7663:function(h){!function(){var d={229:function(h){var d,_,V,ee=h.exports={};function defaultSetTimout(){throw Error("setTimeout has not been defined")}function defaultClearTimeout(){throw Error("clearTimeout has not been defined")}function runTimeout(h){if(d===setTimeout)return setTimeout(h,0);if((d===defaultSetTimout||!d)&&setTimeout)return d=setTimeout,setTimeout(h,0);try{return d(h,0)}catch(_){try{return d.call(null,h,0)}catch(_){return d.call(this,h,0)}}}!function(){try{d="function"==typeof setTimeout?setTimeout:defaultSetTimout}catch(h){d=defaultSetTimout}try{_="function"==typeof clearTimeout?clearTimeout:defaultClearTimeout}catch(h){_=defaultClearTimeout}}();var er=[],eo=!1,ec=-1;function cleanUpNextTick(){eo&&V&&(eo=!1,V.length?er=V.concat(er):ec=-1,er.length&&drainQueue())}function drainQueue(){if(!eo){var h=runTimeout(cleanUpNextTick);eo=!0;for(var d=er.length;d;){for(V=er,er=[];++ec<d;)V&&V[ec].run();ec=-1,d=er.length}V=null,eo=!1,function(h){if(_===clearTimeout)return clearTimeout(h);if((_===defaultClearTimeout||!_)&&clearTimeout)return _=clearTimeout,clearTimeout(h);try{_(h)}catch(d){try{return _.call(null,h)}catch(d){return _.call(this,h)}}}(h)}}function Item(h,d){this.fun=h,this.array=d}function noop(){}ee.nextTick=function(h){var d=Array(arguments.length-1);if(arguments.length>1)for(var _=1;_<arguments.length;_++)d[_-1]=arguments[_];er.push(new Item(h,d)),1!==er.length||eo||runTimeout(drainQueue)},Item.prototype.run=function(){this.fun.apply(null,this.array)},ee.title="browser",ee.browser=!0,ee.env={},ee.argv=[],ee.version="",ee.versions={},ee.on=noop,ee.addListener=noop,ee.once=noop,ee.off=noop,ee.removeListener=noop,ee.removeAllListeners=noop,ee.emit=noop,ee.prependListener=noop,ee.prependOnceListener=noop,ee.listeners=function(h){return[]},ee.binding=function(h){throw Error("process.binding is not supported")},ee.cwd=function(){return"/"},ee.chdir=function(h){throw Error("process.chdir is not supported")},ee.umask=function(){return 0}}},_={};function __nccwpck_require__(h){var V=_[h];if(void 0!==V)return V.exports;var ee=_[h]={exports:{}},er=!0;try{d[h](ee,ee.exports,__nccwpck_require__),er=!1}finally{er&&delete _[h]}return ee.exports}__nccwpck_require__.ab="//";var V=__nccwpck_require__(229);h.exports=V}()},9008:function(h,d,_){h.exports=_(9201)},5675:function(h,d,_){h.exports=_(645)},1664:function(h,d,_){h.exports=_(5170)},1163:function(h,d,_){h.exports=_(9974)},7272:function(h,d,_){"use strict";_.d(d,{kG:function(){return invariant}});var V=/(%?)(%([sdjo]))/g;function format(h,...d){if(0===d.length)return h;let _=0,ee=h.replace(V,(h,V,ee,er)=>{let eo=d[_],ec=function(h,d){switch(d){case"s":return h;case"d":case"i":return Number(h);case"j":return JSON.stringify(h);case"o":{if("string"==typeof h)return h;let d=JSON.stringify(h);if("{}"===d||"[]"===d||/^\[object .+?\]$/.test(d))return h;return d}}}(eo,er);return V?h:(_++,ec)});return _<d.length&&(ee+=` ${d.slice(_).join(" ")}`),ee=ee.replace(/%{2,2}/g,"%")}var ee=class extends Error{constructor(h,...d){super(h),this.message=h,this.name="Invariant Violation",this.message=format(h,...d),function(h){if(!h.stack)return;let d=h.stack.split("\n");d.splice(1,2),h.stack=d.join("\n")}(this)}},invariant=(h,d,..._)=>{if(!h)throw new ee(d,..._)};invariant.as=(h,d,_,...V)=>{if(!d){let d=null!=h.prototype.name,ee=d?new h(format(_,V)):h(format(_,V));throw ee}}},2703:function(h,d,_){"use strict";var V=_(414);function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction,h.exports=function(){function shim(h,d,_,ee,er,eo){if(eo!==V){var ec=Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw ec.name="Invariant Violation",ec}}function getShim(){return shim}shim.isRequired=shim;var h={array:shim,bigint:shim,bool:shim,func:shim,number:shim,object:shim,string:shim,symbol:shim,any:shim,arrayOf:getShim,element:shim,elementType:shim,instanceOf:getShim,node:shim,objectOf:getShim,oneOf:getShim,oneOfType:getShim,shape:getShim,exact:getShim,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return h.PropTypes=h,h}},5697:function(h,d,_){h.exports=_(2703)()},414:function(h){"use strict";h.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},408:function(h,d,_){"use strict";var V=_(7294),ee=_(5697),er=_.n(ee);function _extends(){return(_extends=Object.assign||function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}var eo=(0,V.forwardRef)(function(h,d){var _=h.color,ee=h.size,er=void 0===ee?24:ee,eo=function(h,d){if(null==h)return{};var _,V,ee=function(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}(h,d);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(h);for(V=0;V<er.length;V++)_=er[V],!(d.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(h,_)&&(ee[_]=h[_])}return ee}(h,["color","size"]);return V.createElement("svg",_extends({ref:d,xmlns:"http://www.w3.org/2000/svg",width:er,height:er,viewBox:"0 0 24 24",fill:"none",stroke:void 0===_?"currentColor":_,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},eo),V.createElement("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),V.createElement("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),V.createElement("line",{x1:"3",y1:"18",x2:"21",y2:"18"}))});eo.propTypes={color:er().string,size:er().oneOfType([er().string,er().number])},eo.displayName="Menu",d.Z=eo},8268:function(h,d,_){"use strict";var V=_(7294),ee=_(5697),er=_.n(ee);function _extends(){return(_extends=Object.assign||function(h){for(var d=1;d<arguments.length;d++){var _=arguments[d];for(var V in _)Object.prototype.hasOwnProperty.call(_,V)&&(h[V]=_[V])}return h}).apply(this,arguments)}var eo=(0,V.forwardRef)(function(h,d){var _=h.color,ee=h.size,er=void 0===ee?24:ee,eo=function(h,d){if(null==h)return{};var _,V,ee=function(h,d){if(null==h)return{};var _,V,ee={},er=Object.keys(h);for(V=0;V<er.length;V++)_=er[V],d.indexOf(_)>=0||(ee[_]=h[_]);return ee}(h,d);if(Object.getOwnPropertySymbols){var er=Object.getOwnPropertySymbols(h);for(V=0;V<er.length;V++)_=er[V],!(d.indexOf(_)>=0)&&Object.prototype.propertyIsEnumerable.call(h,_)&&(ee[_]=h[_])}return ee}(h,["color","size"]);return V.createElement("svg",_extends({ref:d,xmlns:"http://www.w3.org/2000/svg",width:er,height:er,viewBox:"0 0 24 24",fill:"none",stroke:void 0===_?"currentColor":_,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},eo),V.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),V.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))});eo.propTypes={color:er().string,size:er().oneOfType([er().string,er().number])},eo.displayName="X",d.Z=eo},9921:function(h,d){"use strict";/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _="function"==typeof Symbol&&Symbol.for,V=_?Symbol.for("react.element"):60103,ee=_?Symbol.for("react.portal"):60106,er=_?Symbol.for("react.fragment"):60107,eo=_?Symbol.for("react.strict_mode"):60108,ec=_?Symbol.for("react.profiler"):60114,eh=_?Symbol.for("react.provider"):60109,ep=_?Symbol.for("react.context"):60110,ef=_?Symbol.for("react.async_mode"):60111,em=_?Symbol.for("react.concurrent_mode"):60111,eg=_?Symbol.for("react.forward_ref"):60112,eO=_?Symbol.for("react.suspense"):60113,ey=_?Symbol.for("react.suspense_list"):60120,ev=_?Symbol.for("react.memo"):60115,eS=_?Symbol.for("react.lazy"):60116,e_=_?Symbol.for("react.block"):60121,ew=_?Symbol.for("react.fundamental"):60117,ex=_?Symbol.for("react.responder"):60118,ek=_?Symbol.for("react.scope"):60119;function z(h){if("object"==typeof h&&null!==h){var d=h.$$typeof;switch(d){case V:switch(h=h.type){case ef:case em:case er:case ec:case eo:case eO:return h;default:switch(h=h&&h.$$typeof){case ep:case eg:case eS:case ev:case eh:return h;default:return d}}case ee:return d}}}function A(h){return z(h)===em}d.AsyncMode=ef,d.ConcurrentMode=em,d.ContextConsumer=ep,d.ContextProvider=eh,d.Element=V,d.ForwardRef=eg,d.Fragment=er,d.Lazy=eS,d.Memo=ev,d.Portal=ee,d.Profiler=ec,d.StrictMode=eo,d.Suspense=eO,d.isAsyncMode=function(h){return A(h)||z(h)===ef},d.isConcurrentMode=A,d.isContextConsumer=function(h){return z(h)===ep},d.isContextProvider=function(h){return z(h)===eh},d.isElement=function(h){return"object"==typeof h&&null!==h&&h.$$typeof===V},d.isForwardRef=function(h){return z(h)===eg},d.isFragment=function(h){return z(h)===er},d.isLazy=function(h){return z(h)===eS},d.isMemo=function(h){return z(h)===ev},d.isPortal=function(h){return z(h)===ee},d.isProfiler=function(h){return z(h)===ec},d.isStrictMode=function(h){return z(h)===eo},d.isSuspense=function(h){return z(h)===eO},d.isValidElementType=function(h){return"string"==typeof h||"function"==typeof h||h===er||h===em||h===ec||h===eo||h===eO||h===ey||"object"==typeof h&&null!==h&&(h.$$typeof===eS||h.$$typeof===ev||h.$$typeof===eh||h.$$typeof===ep||h.$$typeof===eg||h.$$typeof===ew||h.$$typeof===ex||h.$$typeof===ek||h.$$typeof===e_)},d.typeOf=z},9864:function(h,d,_){"use strict";h.exports=_(9921)},8388:function(h,d,_){"use strict";_.r(d),_.d(d,{focusable:function(){return focusable},getTabIndex:function(){return getTabIndex},isFocusable:function(){return isFocusable},isTabbable:function(){return isTabbable},tabbable:function(){return tabbable}});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var V=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],ee=V.join(","),er="undefined"==typeof Element,eo=er?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,ec=!er&&Element.prototype.getRootNode?function(h){var d;return null==h?void 0:null===(d=h.getRootNode)||void 0===d?void 0:d.call(h)}:function(h){return null==h?void 0:h.ownerDocument},isInert=function isInert(h,d){void 0===d&&(d=!0);var _,V=null==h?void 0:null===(_=h.getAttribute)||void 0===_?void 0:_.call(h,"inert");return""===V||"true"===V||d&&h&&isInert(h.parentNode)},isContentEditable=function(h){var d,_=null==h?void 0:null===(d=h.getAttribute)||void 0===d?void 0:d.call(h,"contenteditable");return""===_||"true"===_},getCandidates=function(h,d,_){if(isInert(h))return[];var V=Array.prototype.slice.apply(h.querySelectorAll(ee));return d&&eo.call(h,ee)&&V.unshift(h),V=V.filter(_)},getCandidatesIteratively=function getCandidatesIteratively(h,d,_){for(var V=[],er=Array.from(h);er.length;){var ec=er.shift();if(!isInert(ec,!1)){if("SLOT"===ec.tagName){var eh=ec.assignedElements(),ep=getCandidatesIteratively(eh.length?eh:ec.children,!0,_);_.flatten?V.push.apply(V,ep):V.push({scopeParent:ec,candidates:ep})}else{eo.call(ec,ee)&&_.filter(ec)&&(d||!h.includes(ec))&&V.push(ec);var ef=ec.shadowRoot||"function"==typeof _.getShadowRoot&&_.getShadowRoot(ec),em=!isInert(ef,!1)&&(!_.shadowRootFilter||_.shadowRootFilter(ec));if(ef&&em){var eg=getCandidatesIteratively(!0===ef?ec.children:ef.children,!0,_);_.flatten?V.push.apply(V,eg):V.push({scopeParent:ec,candidates:eg})}else er.unshift.apply(er,ec.children)}}}return V},hasTabIndex=function(h){return!isNaN(parseInt(h.getAttribute("tabindex"),10))},getTabIndex=function(h){if(!h)throw Error("No node provided");return h.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(h.tagName)||isContentEditable(h))&&!hasTabIndex(h)?0:h.tabIndex},getSortOrderTabIndex=function(h,d){var _=getTabIndex(h);return _<0&&d&&!hasTabIndex(h)?0:_},sortOrderedTabbables=function(h,d){return h.tabIndex===d.tabIndex?h.documentOrder-d.documentOrder:h.tabIndex-d.tabIndex},isInput=function(h){return"INPUT"===h.tagName},getCheckedRadio=function(h,d){for(var _=0;_<h.length;_++)if(h[_].checked&&h[_].form===d)return h[_]},isTabbableRadio=function(h){if(!h.name)return!0;var d,_=h.form||ec(h),queryRadios=function(h){return _.querySelectorAll('input[type="radio"][name="'+h+'"]')};if("undefined"!=typeof window&&void 0!==window.CSS&&"function"==typeof window.CSS.escape)d=queryRadios(window.CSS.escape(h.name));else try{d=queryRadios(h.name)}catch(h){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",h.message),!1}var V=getCheckedRadio(d,h.form);return!V||V===h},isNodeAttached=function(h){var d,_,V,ee,er,eo,eh,ep=h&&ec(h),ef=null===(d=ep)||void 0===d?void 0:d.host,em=!1;if(ep&&ep!==h)for(em=!!(null!==(_=ef)&&void 0!==_&&null!==(V=_.ownerDocument)&&void 0!==V&&V.contains(ef)||null!=h&&null!==(ee=h.ownerDocument)&&void 0!==ee&&ee.contains(h));!em&&ef;)em=!!(null!==(eo=ef=null===(er=ep=ec(ef))||void 0===er?void 0:er.host)&&void 0!==eo&&null!==(eh=eo.ownerDocument)&&void 0!==eh&&eh.contains(ef));return em},isZeroArea=function(h){var d=h.getBoundingClientRect(),_=d.width,V=d.height;return 0===_&&0===V},isHidden=function(h,d){var _=d.displayCheck,V=d.getShadowRoot;if("hidden"===getComputedStyle(h).visibility)return!0;var ee=eo.call(h,"details>summary:first-of-type")?h.parentElement:h;if(eo.call(ee,"details:not([open]) *"))return!0;if(_&&"full"!==_&&"legacy-full"!==_){if("non-zero-area"===_)return isZeroArea(h)}else{if("function"==typeof V){for(var er=h;h;){var eh=h.parentElement,ep=ec(h);if(eh&&!eh.shadowRoot&&!0===V(eh))return isZeroArea(h);h=h.assignedSlot?h.assignedSlot:eh||ep===h.ownerDocument?eh:ep.host}h=er}if(isNodeAttached(h))return!h.getClientRects().length;if("legacy-full"!==_)return!0}return!1},isDisabledFromFieldset=function(h){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(h.tagName))for(var d=h.parentElement;d;){if("FIELDSET"===d.tagName&&d.disabled){for(var _=0;_<d.children.length;_++){var V=d.children.item(_);if("LEGEND"===V.tagName)return!!eo.call(d,"fieldset[disabled] *")||!V.contains(h)}return!0}d=d.parentElement}return!1},isNodeMatchingSelectorFocusable=function(h,d){return!(d.disabled||isInert(d)||isInput(d)&&"hidden"===d.type||isHidden(d,h)||"DETAILS"===d.tagName&&Array.prototype.slice.apply(d.children).some(function(h){return"SUMMARY"===h.tagName})||isDisabledFromFieldset(d))},isNodeMatchingSelectorTabbable=function(h,d){var _;return!(isInput(_=d)&&"radio"===_.type&&!isTabbableRadio(_)||0>getTabIndex(d))&&!!isNodeMatchingSelectorFocusable(h,d)},isValidShadowRootTabbable=function(h){var d=parseInt(h.getAttribute("tabindex"),10);return!!isNaN(d)||d>=0},sortByOrder=function sortByOrder(h){var d=[],_=[];return h.forEach(function(h,V){var ee=!!h.scopeParent,er=ee?h.scopeParent:h,eo=getSortOrderTabIndex(er,ee),ec=ee?sortByOrder(h.candidates):er;0===eo?ee?d.push.apply(d,ec):d.push(er):_.push({documentOrder:V,tabIndex:eo,item:h,isScope:ee,content:ec})}),_.sort(sortOrderedTabbables).reduce(function(h,d){return d.isScope?h.push.apply(h,d.content):h.push(d.content),h},[]).concat(d)},tabbable=function(h,d){return sortByOrder((d=d||{}).getShadowRoot?getCandidatesIteratively([h],d.includeContainer,{filter:isNodeMatchingSelectorTabbable.bind(null,d),flatten:!1,getShadowRoot:d.getShadowRoot,shadowRootFilter:isValidShadowRootTabbable}):getCandidates(h,d.includeContainer,isNodeMatchingSelectorTabbable.bind(null,d)))},focusable=function(h,d){return(d=d||{}).getShadowRoot?getCandidatesIteratively([h],d.includeContainer,{filter:isNodeMatchingSelectorFocusable.bind(null,d),flatten:!0,getShadowRoot:d.getShadowRoot}):getCandidates(h,d.includeContainer,isNodeMatchingSelectorFocusable.bind(null,d))},isTabbable=function(h,d){if(d=d||{},!h)throw Error("No node provided");return!1!==eo.call(h,ee)&&isNodeMatchingSelectorTabbable(d,h)},eh=V.concat("iframe").join(","),isFocusable=function(h,d){if(d=d||{},!h)throw Error("No node provided");return!1!==eo.call(h,eh)&&isNodeMatchingSelectorFocusable(d,h)}},1739:function(h){h.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}}},function(h){var __webpack_exec__=function(d){return h(h.s=d)};h.O(0,[774,179],function(){return __webpack_exec__(1861),__webpack_exec__(6840),__webpack_exec__(9974)}),_N_E=h.O()}]);