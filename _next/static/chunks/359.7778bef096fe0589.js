!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="7536b54a-3451-413a-9883-314ffd27bcbf",e._sentryDebugIdIdentifier="sentry-dbid-7536b54a-3451-413a-9883-314ffd27bcbf")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[359],{4340:function(e,t,n){"use strict";n.d(t,{u:function(){return u}});var a=n(5893),r=n(7294),o=n(5661),c=n(8268),l=n(6973),s=n(7813),i=n(792),d=n.n(i);let m=(0,o.j)(d().modal,{variants:{fadeIn:{true:"fade-in slide-in-mobile"},fadeOut:{true:"fade-out slide-out-mobile"}}}),u=(0,r.forwardRef)((e,t)=>{let{title:n,children:o,onClickOutside:i,isOpen:u,onClose:_,className:f,id:b="modal-title",...h}=e,p=(0,r.useRef)(null),[v,k]=(0,r.useState)(!1),{t:x}=(0,l.$G)("common");return(0,r.useImperativeHandle)(t,()=>p.current),(0,r.useEffect)(()=>{var e,t;!u||(null===(e=p.current)||void 0===e?void 0:e.open)||null===(t=p.current)||void 0===t||t.showModal()},[u]),(0,a.jsx)("dialog",{...h,onClose:_,ref:p,"aria-labelledby":b,onClick:function(e){"DIALOG"===e.target.nodeName&&i&&i()},onAnimationEnd:()=>{if(!u||v){var e;null===(e=p.current)||void 0===e||e.close(),k(!1)}},className:m({className:f,fadeIn:u&&!v,fadeOut:!u||v}),children:(0,a.jsxs)("div",{className:d().modal__wrapper,children:[(0,a.jsxs)("div",{className:d().modal__header,children:[(0,a.jsx)("h2",{id:b,className:d().modal__title,children:n}),(0,a.jsx)(s.z,{onClick:function(){k(!0)},"aria-label":x("close-modal"),variant:"icon",size:"small",children:(0,a.jsx)(c.Z,{"aria-hidden":!0})})]}),o]})})});u.displayName="Modal"},359:function(e,t,n){"use strict";n.r(t),n.d(t,{Feedback:function(){return U}});var a=n(5893),r=n(8718),o=n(7294),c=n(5697),l=n.n(c);function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var i=(0,o.forwardRef)(function(e,t){var n=e.color,a=e.size,r=void 0===a?24:a,c=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["color","size"]);return o.createElement("svg",s({ref:t,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),o.createElement("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"}))});function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}i.propTypes={color:l().string,size:l().oneOfType([l().string,l().number])},i.displayName="ThumbsUp";var m=(0,o.forwardRef)(function(e,t){var n=e.color,a=e.size,r=void 0===a?24:a,c=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["color","size"]);return o.createElement("svg",d({ref:t,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),o.createElement("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}))});m.propTypes={color:l().string,size:l().oneOfType([l().string,l().number])},m.displayName="MessageCircle";var u=n(8268),_=n(5661),f=n(6973),b=n(7813),h=n(8081),p=n(1266);async function v(e){let t=(0,r.IO)((0,r.hJ)(p.db,"comments"),(0,r.ar)((0,r.Jm)(),"==",e));(await (0,r.PL)(t)).forEach(async e=>{try{return await (0,r.oe)(e.ref),!0}catch(e){return Promise.reject(e)}})}async function k(e,t,n){try{return await (0,r.ET)((0,r.hJ)(p.db,"comments"),{uid:e.uid,message:t,userName:e.displayName,date:new Date,timestamp:(0,r.Bt)(),slug:n})}catch(e){return Promise.reject(e)}}var x=n(4340),j=n(8133),g=n(5111),y=n.n(g);function w(e){let{commentId:t,message:n}=e,{t:r}=(0,f.$G)(["delete-comment-modal","common"]),{openedModals:o,closeModal:c}=(0,j.o)(),l="".concat(h.VI,"-").concat(t),s=o.includes(l);function i(){c(l)}return(0,a.jsxs)(x.u,{isOpen:s,title:r("delete-comment-modal:title"),onClose:i,onClickOutside:i,id:"delete-comment-modal",children:[(0,a.jsx)("p",{children:r("delete-comment-modal:description")}),(0,a.jsx)("blockquote",{className:y().modal__message,children:n}),(0,a.jsxs)("div",{className:y().modal__footer,children:[(0,a.jsx)(b.z,{variant:"inverted",onClick:i,children:r("common:cancel")}),(0,a.jsx)(b.z,{variant:"ghost",onClick:function(){v(t),c(l)},children:r("common:delete")})]})]})}async function O(e,t){let n=(0,r.JU)(p.db,"likes",e.replace("/","")),a=await (0,r.QT)(n);if(a.exists()){let e=a.data().userIds;return e.includes(t)?await (0,r.r7)(n,{count:(0,r.nP)(-1),userIds:e.filter(e=>e!==t)}):await (0,r.r7)(n,{count:(0,r.nP)(1),userIds:[...e,t]})}return await (0,r.pl)((0,r.JU)(p.db,"likes",e.replace("/","")),{count:1,userIds:[t]})}var E=n(9457),N=n(600),C=n.n(N),R=n(3204),I=n.n(R);function z(e){return(0,a.jsx)("textarea",{className:I().textarea,...e})}var D=n(9561),S=n.n(D);let P=(0,_.j)(S().alert);function T(e){let{children:t,className:n}=e;return(0,a.jsx)("div",{role:"alert",className:P({className:n}),children:t})}var A=n(8091),G=n.n(A);let L={CREATED:"CREATED",CHANGE:"CHANGE",ERROR:"ERROR"};function J(e,t){switch(t.type){case L.CHANGE:return{...e,status:null,value:t.value};case L.CREATED:return{...e,status:L.CREATED,value:""};case L.ERROR:return{...e,status:L.ERROR};default:throw Error("Unhandled action type: ".concat(t.type))}}function M(e){let{slug:t}=e,{t:n}=(0,f.$G)("article"),{currentUser:r}=(0,E.aC)(),[c,l]=(0,o.useReducer)(J,{status:null,value:""});async function s(e){if(e.preventDefault(),r&&c.value)try{await k(r,c.value,t),l({type:L.CREATED})}catch(e){l({type:L.ERROR,value:c.value})}}return(0,a.jsxs)("form",{className:G().comment,onSubmit:s,children:[(0,a.jsx)(z,{placeholder:n("add-comment"),onChange:function(e){l({type:L.CHANGE,value:e.target.value})},value:c.value,rows:5,name:"comment"}),(0,a.jsx)(b.z,{variant:"inverted",type:"submit",className:G().comment__button,children:n("comment-button")}),"ERROR"===c.status&&(0,a.jsx)(T,{className:G().comment__alert,children:n("comment-error")})]})}let H=(0,_.j)(C()["like-button"],{variants:{liked:{true:C()["like-button--liked"]}}});function U(e){let{slug:t}=e,{t:n,i18n:c}=(0,f.$G)("article"),l=c.resolvedLanguage,[s,d]=(0,o.useState)(void 0),[_,v]=(0,o.useState)([]),{openModal:k}=(0,j.o)(),{currentUser:x}=(0,E.aC)(),g=null==s?void 0:s.userIds.includes(null==x?void 0:x.uid);return(0,o.useEffect)(()=>{async function e(){let e=(0,r.IO)((0,r.hJ)(p.db,"comments"),(0,r.ar)("slug","==",t),(0,r.Xo)("date","desc")),n=(0,r.cf)(e,e=>{v(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>n()}(function(e,t){let n=(0,r.JU)(p.db,"likes",e.replace("/",""));(0,r.cf)(n,t)})(t,e=>{d(e.data())}),e()},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:C().feedback__actions,children:[(0,a.jsxs)(b.z,{className:H({liked:g}),onClick:function(){x?O(t,x.uid):k(h.xC)},children:[(0,a.jsx)(i,{"aria-hidden":!0})," ",n("like",{count:(null==s?void 0:s.count)||0})]}),(0,a.jsxs)("div",{className:C().feedback__actions__comments,children:[(0,a.jsx)(m,{})," ",n("comment",{count:_.length||0})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("div",{className:C()["feedback__comment-title-wrapper"],children:[(0,a.jsx)("h2",{className:C()["feedback__comment-title"],children:n("comments-title")}),!x&&(0,a.jsx)(b.z,{variant:"ghost",onClick:()=>k(h.xC),children:"Fa\xe7a o login para deixar um coment\xe1rio"})]}),x&&(0,a.jsx)(M,{slug:t}),_.length?_.map(e=>{let{id:t,userName:r,date:o,message:c,uid:s}=e;return(0,a.jsxs)("div",{className:C().feedback__comment,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:C()["feedback__comment-author"],children:r}),(0,a.jsx)("time",{className:C()["feedback__comment-date"],children:o.toDate().toLocaleDateString(l,{year:"numeric",month:"long",day:"numeric"})}),(0,a.jsx)("p",{className:C()["feedback__comment-message"],children:c})]}),s===(null==x?void 0:x.uid)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(b.z,{className:C()["feedback__delete-comment"],variant:"icon",size:"small",title:n("delete-comment-aria-label"),onClick:()=>k("".concat(h.VI,"-").concat(t)),children:(0,a.jsx)(u.Z,{"aria-hidden":!0})}),(0,a.jsx)(w,{commentId:t,message:c})]})]},t)}):(0,a.jsx)("p",{children:n("no-comments")})]})]})}},9561:function(e){e.exports={alert:"alert_alert__PSeut"}},5111:function(e){e.exports={modal__footer:"delete-comment-modal_modal__footer__8ghvR",modal__message:"delete-comment-modal_modal__message__ye2cl"}},792:function(e){e.exports={modal:"modal_modal__CZ9gP",modal__wrapper:"modal_modal__wrapper___80eS",modal__header:"modal_modal__header__XSjS5",modal__title:"modal_modal__title__e06D5"}},3204:function(e){e.exports={textarea:"textarea_textarea__9qMB7"}},8091:function(e){e.exports={comment:"add-comment_comment__QwHU7",comment__button:"add-comment_comment__button__ERIrk",comment__alert:"add-comment_comment__alert__1SFG6"}},600:function(e){e.exports={feedback__actions:"feedback_feedback__actions__JpM2T","feedback__comment-title-wrapper":"feedback_feedback__comment-title-wrapper__B7G2a","feedback__comment-title":"feedback_feedback__comment-title__VNPif",feedback__actions__comments:"feedback_feedback__actions__comments__cC1Qs","like-button":"feedback_like-button__QE365","like-button--liked":"feedback_like-button--liked__ONjnV",feedback__comment:"feedback_feedback__comment__KKS4_","feedback__comment-author":"feedback_feedback__comment-author__sfdoi","feedback__comment-date":"feedback_feedback__comment-date__f0zf3","feedback__comment-message":"feedback_feedback__comment-message__zQ77o"}}}]);