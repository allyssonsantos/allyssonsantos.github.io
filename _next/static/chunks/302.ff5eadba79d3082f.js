!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=Error().stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="1ded3288-887c-4371-9cda-bde0c8dc55ae",e._sentryDebugIdIdentifier="sentry-dbid-1ded3288-887c-4371-9cda-bde0c8dc55ae")}catch(e){}}(),(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[302],{4340:function(e,t,n){"use strict";n.d(t,{u:function(){return u}});var a=n(5893),r=n(7294),o=n(5661),c=n(8268),l=n(6973),i=n(7813),s=n(792),d=n.n(s);let m=(0,o.j)(d().modal,{variants:{fadeIn:{true:"fade-in slide-in-mobile"},fadeOut:{true:"fade-out slide-out-mobile"}}}),u=(0,r.forwardRef)((e,t)=>{let{title:n,children:o,onClickOutside:s,isOpen:u,onClose:_,className:f,id:h="modal-title",...b}=e,p=(0,r.useRef)(null),[v,k]=(0,r.useState)(!1),{t:x}=(0,l.$G)("common");return(0,r.useImperativeHandle)(t,()=>p.current),(0,r.useEffect)(()=>{var e,t;!u||(null===(e=p.current)||void 0===e?void 0:e.open)||null===(t=p.current)||void 0===t||t.showModal()},[u]),(0,a.jsx)("dialog",{...b,onClose:_,ref:p,"aria-labelledby":h,onClick:function(e){"DIALOG"===e.target.nodeName&&s&&s()},onAnimationEnd:()=>{if(!u||v){var e;null===(e=p.current)||void 0===e||e.close(),k(!1)}},className:m({className:f,fadeIn:u&&!v,fadeOut:!u||v}),children:(0,a.jsxs)("div",{className:d().modal__wrapper,children:[(0,a.jsxs)("div",{className:d().modal__header,children:[(0,a.jsx)("h2",{id:h,className:d().modal__title,children:n}),(0,a.jsx)(i.z,{onClick:function(){k(!0)},"aria-label":x("close-modal"),variant:"icon",size:"small",children:(0,a.jsx)(c.Z,{"aria-hidden":!0})})]}),o]})})});u.displayName="Modal"},8302:function(e,t,n){"use strict";n.r(t),n.d(t,{Feedback:function(){return U}});var a=n(5893),r=n(8718),o=n(7294),c=n(5697),l=n.n(c);function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}var s=(0,o.forwardRef)(function(e,t){var n=e.color,a=e.size,r=void 0===a?24:a,c=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["color","size"]);return o.createElement("svg",i({ref:t,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),o.createElement("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"}))});function d(){return(d=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}s.propTypes={color:l().string,size:l().oneOfType([l().string,l().number])},s.displayName="ThumbsUp";var m=(0,o.forwardRef)(function(e,t){var n=e.color,a=e.size,r=void 0===a?24:a,c=function(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}(e,["color","size"]);return o.createElement("svg",d({ref:t,xmlns:"http://www.w3.org/2000/svg",width:r,height:r,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),o.createElement("path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8"}),o.createElement("polyline",{points:"16 6 12 2 8 6"}),o.createElement("line",{x1:"12",y1:"2",x2:"12",y2:"15"}))});m.propTypes={color:l().string,size:l().oneOfType([l().string,l().number])},m.displayName="Share";var u=n(8268),_=n(5661),f=n(6973),h=n(7813),b=n(8081),p=n(1266);async function v(e){let t=(0,r.IO)((0,r.hJ)(p.db,"comments"),(0,r.ar)((0,r.Jm)(),"==",e));(await (0,r.PL)(t)).forEach(async e=>{try{return await (0,r.oe)(e.ref),!0}catch(e){return Promise.reject(e)}})}async function k(e,t,n){try{return await (0,r.ET)((0,r.hJ)(p.db,"comments"),{uid:e.uid,message:t,userName:e.displayName,date:new Date,timestamp:(0,r.Bt)(),slug:n})}catch(e){return Promise.reject(e)}}var x=n(4340),g=n(8133),j=n(5111),y=n.n(j);function w(e){let{commentId:t,message:n}=e,{t:r}=(0,f.$G)(["delete-comment-modal","common"]),{openedModals:o,closeModal:c}=(0,g.o)(),l="".concat(b.VI,"-").concat(t),i=o.includes(l);function s(){c(l)}return(0,a.jsxs)(x.u,{isOpen:i,title:r("delete-comment-modal:title"),onClose:s,onClickOutside:s,id:"delete-comment-modal",children:[(0,a.jsx)("p",{children:r("delete-comment-modal:description")}),(0,a.jsx)("blockquote",{className:y().modal__message,children:n}),(0,a.jsxs)("div",{className:y().modal__footer,children:[(0,a.jsx)(h.z,{variant:"inverted",onClick:s,children:r("common:cancel")}),(0,a.jsx)(h.z,{variant:"ghost",onClick:function(){v(t),c(l)},children:r("common:delete")})]})]})}var E=n(7748);async function O(e,t){let n=(0,r.JU)(p.db,"likes",e.replace("/","")),a=await (0,r.QT)(n);if(a.exists()){let e=a.data().userIds;return e.includes(t)?await (0,r.r7)(n,{count:(0,r.nP)(-1),userIds:e.filter(e=>e!==t)}):await (0,r.r7)(n,{count:(0,r.nP)(1),userIds:[...e,t]})}return await (0,r.pl)((0,r.JU)(p.db,"likes",e.replace("/","")),{count:1,userIds:[t]})}var N=n(9457),C=n(600),R=n.n(C),I=n(3204),z=n.n(I);function S(e){return(0,a.jsx)("textarea",{className:z().textarea,...e})}var D=n(9561),P=n.n(D);let T=(0,_.j)(P().alert);function A(e){let{children:t,className:n}=e;return(0,a.jsx)("div",{role:"alert",className:T({className:n}),children:t})}var G=n(8091),J=n.n(G);let L={CREATED:"CREATED",CHANGE:"CHANGE",ERROR:"ERROR"};function H(e,t){switch(t.type){case L.CHANGE:return{...e,status:null,value:t.value};case L.CREATED:return{...e,status:L.CREATED,value:""};case L.ERROR:return{...e,status:L.ERROR};default:throw Error("Unhandled action type: ".concat(t.type))}}function M(e){var t;let{slug:n}=e,{t:r}=(0,f.$G)("article"),{currentUser:c}=(0,N.aC)(),[l,i]=(0,o.useReducer)(H,{status:null,value:""}),s=null===(t=l.value)||void 0===t?void 0:t.trim();async function d(e){if(e.preventDefault(),c&&s)try{await k(c,l.value,n),i({type:L.CREATED})}catch(e){i({type:L.ERROR,value:l.value})}}return(0,a.jsxs)("form",{className:J().comment,onSubmit:d,children:[(0,a.jsx)(S,{placeholder:r("add-comment"),onChange:function(e){i({type:L.CHANGE,value:e.target.value})},value:l.value,rows:5,name:"comment",required:!0}),(0,a.jsx)(h.z,{variant:"inverted",type:"submit",className:J().comment__button,disabled:!s,children:r("comment-button")}),"ERROR"===l.status&&(0,a.jsx)(A,{className:J().comment__alert,children:r("comment-error")})]})}let B=(0,_.j)(R()["like-button"],{variants:{liked:{true:R()["like-button--liked"]}}});function U(e){let{slug:t,title:n,description:c}=e,{t:l,i18n:i}=(0,f.$G)("article"),d=i.resolvedLanguage,[_,v]=(0,o.useState)(void 0),[k,x]=(0,o.useState)([]),{openModal:j}=(0,g.o)(),{currentUser:y}=(0,N.aC)(),C=null==_?void 0:_.userIds.includes(null==y?void 0:y.uid);return(0,o.useEffect)(()=>{async function e(){let e=(0,r.IO)((0,r.hJ)(p.db,"comments"),(0,r.ar)("slug","==",t),(0,r.Xo)("date","desc")),n=(0,r.cf)(e,e=>{x(e.docs.map(e=>({id:e.id,...e.data()})))});return()=>n()}(function(e,t){let n=(0,r.JU)(p.db,"likes",e.replace("/",""));(0,r.cf)(n,t)})(t,e=>{v(e.data())}),e()},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("section",{className:R().feedback__actions,children:[(0,a.jsxs)(h.z,{className:B({liked:C}),onClick:function(){y?O(t,y.uid):j(b.xC)},variant:"ghost",children:[(0,a.jsx)(s,{"aria-hidden":!0,size:14})," ",l("like",{count:(null==_?void 0:_.count)||0})]}),(0,a.jsxs)(h.z,{className:R().feedback__share,variant:"inverted",onClick:()=>(function(e){let{title:t,description:n,slug:a}=e;navigator.share&&navigator.share({title:t,text:n,url:"".concat(E.Bt,"/blog/").concat(a)})})({title:n,description:c,slug:t}),children:["Compartilhar",(0,a.jsx)(m,{size:14})]})]}),(0,a.jsxs)("section",{children:[(0,a.jsxs)("div",{className:R()["feedback__comment-title-wrapper"],children:[(0,a.jsxs)("h2",{className:R()["feedback__comment-title"],children:[l("comments-title")," ",k.length&&k.length]}),!y&&(0,a.jsx)(h.z,{variant:"inverted",onClick:()=>j(b.xC),children:"Fa\xe7a o login para deixar um coment\xe1rio"})]}),y&&(0,a.jsx)(M,{slug:t}),k.length?k.map(e=>{let{id:t,userName:n,date:r,message:o,uid:c}=e;return(0,a.jsxs)("div",{className:R().feedback__comment,children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("strong",{className:R()["feedback__comment-author"],children:n}),(0,a.jsx)("time",{className:R()["feedback__comment-date"],children:r.toDate().toLocaleDateString(d,{year:"numeric",month:"long",day:"numeric"})}),(0,a.jsx)("p",{className:R()["feedback__comment-message"],children:o})]}),c===(null==y?void 0:y.uid)&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(h.z,{className:R()["feedback__delete-comment"],variant:"icon",size:"small",title:l("delete-comment-aria-label"),onClick:()=>j("".concat(b.VI,"-").concat(t)),children:(0,a.jsx)(u.Z,{"aria-hidden":!0})}),(0,a.jsx)(w,{commentId:t,message:o})]})]},t)}):(0,a.jsx)("p",{children:l("no-comments")})]})]})}},9561:function(e){e.exports={alert:"alert_alert__PSeut"}},5111:function(e){e.exports={modal__footer:"delete-comment-modal_modal__footer__8ghvR",modal__message:"delete-comment-modal_modal__message__ye2cl"}},792:function(e){e.exports={modal:"modal_modal__CZ9gP",modal__wrapper:"modal_modal__wrapper___80eS",modal__header:"modal_modal__header__XSjS5",modal__title:"modal_modal__title__e06D5"}},3204:function(e){e.exports={textarea:"textarea_textarea__9qMB7"}},8091:function(e){e.exports={comment:"add-comment_comment__QwHU7",comment__button:"add-comment_comment__button__ERIrk",comment__alert:"add-comment_comment__alert__1SFG6"}},600:function(e){e.exports={feedback__actions:"feedback_feedback__actions__JpM2T","feedback__comment-title-wrapper":"feedback_feedback__comment-title-wrapper__B7G2a","feedback__comment-title":"feedback_feedback__comment-title__VNPif",feedback__actions__comments:"feedback_feedback__actions__comments__cC1Qs","like-button":"feedback_like-button__QE365","like-button--liked":"feedback_like-button--liked__ONjnV",feedback__comment:"feedback_feedback__comment__KKS4_","feedback__comment-author":"feedback_feedback__comment-author__sfdoi","feedback__comment-date":"feedback_feedback__comment-date__f0zf3","feedback__comment-message":"feedback_feedback__comment-message__zQ77o",feedback__share:"feedback_feedback__share__1629r"}}}]);