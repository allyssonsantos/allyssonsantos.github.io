(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[572],{8572:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return W},default:function(){return Y}});var r=n(5893),a=n(2962),c=n(1880),i=n(5675),l=n.n(i),s=n(7294),o=n(3935),u=n(1220);let d=(e,t={})=>{let n={React:s,ReactDOM:o,_jsx_runtime:u.i,...t},r=Function(...Object.keys(n),e);return r(...Object.values(n)).default},_=(e,t={})=>s.useMemo(()=>d(e,t),[e,t]);var m=n(2031),f=n(9430),h=n(8300),p=n(9526),b=n.n(p),v=n(2801);let k={CREATED:"CREATED",CHANGE:"CHANGE",ERROR:"ERROR"};function g(e,t){switch(t.type){case k.CHANGE:return{...e,status:null,value:t.value};case k.CREATED:return{...e,status:k.CREATED,value:""};case k.ERROR:return{...e,status:k.ERROR};default:throw Error("Unhandled action type: ".concat(t.type))}}function x(e){let{slug:t}=e,{t:n}=(0,m.$G)("article"),{currentUser:a}=(0,v.aC)(),[c,i]=(0,s.useReducer)(g,{status:null,value:""});async function l(e){if(e.preventDefault(),a&&c.value)try{await (0,h.Y)(a,c.value,t),i({type:k.CREATED})}catch(n){i({type:k.ERROR,value:c.value})}}return(0,r.jsxs)("form",{onSubmit:l,children:[(0,r.jsx)(f.gx,{placeholder:n("add-comment"),onChange:function(e){i({type:k.CHANGE,value:e.target.value})},value:c.value,rows:5,name:"comment"}),(0,r.jsx)(f.zx,{variant:"inverted",type:"submit",className:b().comment__button,children:n("comment-button")}),"ERROR"===c.status&&(0,r.jsx)(f.bZ,{className:b().comment__alert,children:n("comment-error")})]})}var j=n(6008),y=n(5697),O=n.n(y);function w(){return(w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var E=(0,s.forwardRef)(function(e,t){var n=e.color,r=e.size,a=void 0===r?24:r,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["color","size"]);return s.createElement("svg",w({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),s.createElement("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"}))});function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}E.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},E.displayName="ThumbsUp";var N=(0,s.forwardRef)(function(e,t){var n=e.color,r=e.size,a=void 0===r?24:r,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},c=Object.keys(e);for(r=0;r<c.length;r++)n=c[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(r=0;r<c.length;r++)n=c[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,["color","size"]);return s.createElement("svg",R({ref:t,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:void 0===n?"currentColor":n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),s.createElement("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}))});N.propTypes={color:O().string,size:O().oneOfType([O().string,O().number])},N.displayName="MessageCircle";var C=n(8268),A=n(4577),T=n(4114),z=n(6080);async function I(e,t){let n=(0,j.JU)(z.db,"likes",e.replace("/","")),r=await (0,j.QT)(n);if(r.exists()){let a=r.data().userIds,c=a.includes(t);if(c){let i=await (0,j.r7)(n,{count:(0,j.nP)(-1),userIds:a.filter(e=>e!==t)});return i}let l=await (0,j.r7)(n,{count:(0,j.nP)(1),userIds:[...a,t]});return l}let s=await (0,j.pl)((0,j.JU)(z.db,"likes",e.replace("/","")),{count:1,userIds:[t]});return s}var P=n(9361),S=n.n(P);let D=(0,A.j)(S()["like-button"],{variants:{liked:{true:S()["like-button--liked"]}}});function G(e){let{slug:t}=e,{t:n,i18n:a}=(0,m.$G)("article"),c=a.resolvedLanguage,[i,l]=(0,s.useState)(void 0),[o,u]=(0,s.useState)([]),{openModal:d}=(0,f.ol)(),{currentUser:_}=(0,v.aC)(),h=null==i?void 0:i.userIds.includes(null==_?void 0:_.uid);return(0,s.useEffect)(()=>{async function e(){let e=(0,j.IO)((0,j.hJ)(z.db,"comments"),(0,j.ar)("slug","==",t),(0,j.Xo)("date","desc")),n=(0,j.cf)(e,e=>{let t=e.docs.map(e=>({id:e.id,...e.data()}));u(t)});return()=>n()}(function(e,t){let n=(0,j.JU)(z.db,"likes",e.replace("/",""));(0,j.cf)(n,t)})(t,e=>{l(e.data())}),e()},[t]),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("section",{className:S().feedback__actions,children:[(0,r.jsxs)(f.zx,{className:D({liked:h}),onClick:function(){_?I(t,_.uid):d(T.xC)},children:[(0,r.jsx)(E,{"aria-hidden":!0})," ",n("like",{count:(null==i?void 0:i.count)||0})]}),(0,r.jsxs)("div",{className:S().feedback__actions__comments,children:[(0,r.jsx)(N,{})," ",n("comment",{count:o.length||0})]})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:S()["feedback__comment-title"],children:n("comments-title")}),o.length?o.map(e=>{let{id:t,userName:a,date:i,message:l,uid:s}=e;return(0,r.jsxs)("div",{className:S().feedback__comment,children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("strong",{className:S()["feedback__comment-author"],children:a}),(0,r.jsx)("time",{className:S()["feedback__comment-date"],children:i.toDate().toLocaleDateString(c,{year:"numeric",month:"long",day:"numeric"})}),(0,r.jsx)("p",{className:S()["feedback__comment-message"],children:l})]}),s===(null==_?void 0:_.uid)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.zx,{className:S()["feedback__delete-comment"],variant:"icon",size:"small",title:n("delete-comment-aria-label"),onClick:()=>d("".concat(T.VI,"-").concat(t)),children:(0,r.jsx)(C.Z,{"aria-hidden":!0})}),(0,r.jsx)(f.DB,{commentId:t,message:l})]})]},t)}):(0,r.jsx)("p",{children:n("no-comments")}),_&&(0,r.jsx)(x,{slug:t})]})]})}var B=n(3036),L=n.n(B);function H(e){let{post:t}=e,{t:n}=(0,m.$G)("article"),a=_(t.body.code),c=Math.ceil(t.readingTime.minutes);return(0,r.jsxs)("div",{className:L().article,children:[(0,r.jsxs)("div",{className:L().article__header,children:[(0,r.jsx)("h1",{className:L().article__title,children:t.title}),(0,r.jsx)("small",{className:L()["article__reading-time"],children:(0,r.jsxs)("abbr",{title:n("estimated-time-to-read",{count:c}),children:[c," min"]})})]}),(0,r.jsx)("div",{className:L()["article__cover-wrapper"],children:(0,r.jsx)(l(),{className:L().article__cover,src:"/articles/".concat(t.slug,"/").concat(t.cover),alt:t.altCover,fill:!0})}),(0,r.jsx)("article",{children:(0,r.jsx)(a,{})}),(0,r.jsx)(G,{slug:t.slug})]})}var M=n(9102),U=n.n(M);function F(e){let{children:t}=e;return(0,r.jsx)("div",{className:U().article,children:t})}var J=n(3424),W=!0;function Y(e){let{article:t}=e,n="".concat(c.Bt,"/blog/").concat(t.slug),i="".concat(c.Bt,"/public/articles/").concat(t.cover);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.PB,{title:t.title,description:t.description,canonical:n,openGraph:{url:n,title:t.title,description:t.description,type:"article",images:[{url:i,width:800,height:600,alt:t.title,type:"image/jpeg"}],article:{publishedTime:t.publishedAt,authors:["https://twitter.com/_allyssonsantos"],tags:t.tags}}}),(0,r.jsx)(a.dX,{type:"Article",url:n,title:t.title,images:["".concat(c.Bt,"/").concat(t.cover)],datePublished:t.publishedAt,authorName:"Allysson Santos",description:t.description}),(0,r.jsx)(H,{post:t})]})}Y.getLayout=function(e){return(0,r.jsx)(J.I,{children:(0,r.jsx)(F,{children:e})})}},3036:function(e){e.exports={article:"article_article__8HA5l",article__header:"article_article__header__IjUEF",article__title:"article_article__title__k2gnn","article__reading-time":"article_article__reading-time__yq_ig","article__cover-wrapper":"article_article__cover-wrapper__RWEOC",article__cover:"article_article__cover__6kOuP"}},9526:function(e){e.exports={comment__button:"add-comment_comment__button__j_XoR",comment__alert:"add-comment_comment__alert__yOGtg"}},9361:function(e){e.exports={feedback__actions:"feedback_feedback__actions__lYetj","feedback__comment-title":"feedback_feedback__comment-title__0RYuJ",feedback__actions__comments:"feedback_feedback__actions__comments__nd6nx","like-button":"feedback_like-button__2hmW2","like-button--liked":"feedback_like-button--liked__cCx4p",feedback__comment:"feedback_feedback__comment__Ahhke","feedback__comment-author":"feedback_feedback__comment-author__Yn084","feedback__comment-date":"feedback_feedback__comment-date__xNHwh","feedback__comment-message":"feedback_feedback__comment-message__eczNB"}},9102:function(e){e.exports={article:"article_article__eCTnp"}},1220:function(e,t,n){let r=n(5893);e.exports.i=r}}]);