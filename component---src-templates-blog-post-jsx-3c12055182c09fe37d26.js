(self.webpackChunkallysson_me=self.webpackChunkallysson_me||[]).push([[390],{69100:function(e,t,n){var r=n(99489),o=n(57067);function c(t,n,a){return o()?(e.exports=c=Reflect.construct,e.exports.default=e.exports,e.exports.__esModule=!0):(e.exports=c=function(e,t,n){var o=[null];o.push.apply(o,t);var c=new(Function.bind.apply(e,o));return n&&r(c,n.prototype),c},e.exports.default=e.exports,e.exports.__esModule=!0),c.apply(null,arguments)}e.exports=c,e.exports.default=e.exports,e.exports.__esModule=!0},57067:function(e){e.exports=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}},e.exports.default=e.exports,e.exports.__esModule=!0},21274:function(e,t,n){var r=n(41048);e.exports={MDXRenderer:r}},41048:function(e,t,n){var r=n(69100),o=n(319),c=n(59713),a=n(37316),u=["scope","children"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=n(67294),p=n(63497).mdx,m=n(93191).useMDXScope;e.exports=function(e){var t=e.scope,n=e.children,c=a(e,u),s=m(t),f=l.useMemo((function(){if(!n)return null;var e=i({React:l,mdx:p},s),t=Object.keys(e),c=t.map((function(t){return e[t]}));return r(Function,["_fn"].concat(o(t),[""+n])).apply(void 0,[{}].concat(o(c)))}),[n,t]);return l.createElement(f,i({},c))}},3340:function(e,t,n){"use strict";n.d(t,{o:function(){return F},V:function(){return r.V8}});var r=n(25723),o=n(15861),c=n(4942),a=n(87757),u=n.n(a),s=n(67294),i=n(9925),l=n(71656),p=n(50245),m=n(13306),f=n(29359),d=n(47412),y=n(56247),h=n(92553),g=n(16531),v=n(97224),b=n(63636);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,c.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var w=i.default.h2.withConfig({displayName:"Comments__Title",componentId:"sc-yjpho-0"})(["margin-top:40px;"]),j=i.default.form.withConfig({displayName:"Comments__Form",componentId:"sc-yjpho-1"})(["margin-top:24px;"]),x=i.default.article.withConfig({displayName:"Comments__Comment",componentId:"sc-yjpho-2"})(["display:flex;justify-content:space-between;& + &{margin-top:22px;}"]),_=i.default.button.withConfig({displayName:"Comments__DeleteComment",componentId:"sc-yjpho-3"})((function(e){var t=e.theme;return(0,i.css)(["width:24px;height:24px;margin:0;padding:0;cursor:pointer;border:none;background-color:transparent;svg{stroke:",";}"],t.colors.neutral[900])})),C=(0,i.default)(y.u_).withConfig({displayName:"Comments__StyledModal",componentId:"sc-yjpho-4"})(["section{min-height:unset;border:none;}button svg{stroke:",";}"],(function(e){return e.theme.colors.neutral[900]})),D=(0,i.default)(C).withConfig({displayName:"Comments___StyledStyledModal",componentId:"sc-yjpho-5"})(["animation:",";"],(function(e){return e.$_css})),P=i.default.div.withConfig({displayName:"Comments__Author",componentId:"sc-yjpho-6"})(["display:flex;align-items:center;"]),k=i.default.strong.withConfig({displayName:"Comments__Name",componentId:"sc-yjpho-7"})(["font-size:",";"],(0,g.Z)(16)),I=i.default.time.withConfig({displayName:"Comments__Datetime",componentId:"sc-yjpho-8"})(["margin-left:4px;&::before{display:inline-block;margin-right:4px;content:'·';}"]),S=i.default.p.withConfig({displayName:"Comments__Message",componentId:"sc-yjpho-9"})(["margin:0;white-space:pre-line;"]);function N(e){var t=e.name,n=e.date.toDate();return s.createElement(P,null,s.createElement(k,null,t)," ",s.createElement(I,null,n.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"})))}function R(e,t){switch(t.type){case"IDLE":return O(O({},e),{},{status:"IDLE"});case"WRITTING":return O(O({},e),{},{status:"writting",value:t.value});case"CREATED":return O(O({},e),{},{status:"created"});case"FAILED":return O(O({},e),{},{status:"rejected",action:t.action});case"SELECTED":return O(O({},e),{},{selected:t.selected});case"RESET":return O(O({},e),{},{selected:null,value:""});default:throw new Error("Unhandled action type: "+t.type)}}function Z(e){return T.apply(this,arguments)}function T(){return T=(0,o.Z)(u().mark((function e(t){var n;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.IO)((0,l.hJ)(v.db,"comments"),(0,l.ar)((0,l.Jm)(),"==",t)),e.next=3,(0,l.PL)(n);case 3:e.sent.forEach(function(){var e=(0,o.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.oe)(t.ref);case 3:return e.abrupt("return",!0);case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}());case 5:case"end":return e.stop()}}),e)}))),T.apply(this,arguments)}function M(e,t,n){return L.apply(this,arguments)}function L(){return(L=(0,o.Z)(u().mark((function e(t,n,r){var o;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,l.ET)((0,l.hJ)(v.db,"comments"),{uid:t.uid,message:n,userName:t.displayName,date:new Date,timestamp:(0,l.Bt)(),slug:r});case 3:return o=e.sent,e.abrupt("return",o);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",Promise.reject(e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function A(e){var t=e.comments,n=e.slug,r=(0,b.aC)().currentUser,c=(0,s.useRef)(null),a=(0,d.Z)({startOnRender:!1}),i=a[0],l=i.animation,y=i.state,g=a[1],v=(0,s.useReducer)(R,{status:null,action:null,selected:null,value:""}),E=v[0],O=v[1],C=E.status,P=E.action,k=E.selected,I=E.value,T=function(){var e=(0,o.Z)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),I){e.next=3;break}return e.abrupt("return");case 3:return e.prev=3,e.next=6,M(r,I,n);case 6:O({type:"CREATED"}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),O({type:"FAILED",action:"criar"});case 12:O({type:"RESET"});case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),L=function(e){return function(){g(!0),O({type:"SELECTED",selected:e})}};return s.createElement("section",null,s.createElement(w,null,"Comentários"),t.length?t.map((function(e){var t=e.id,n=e.userName,o=e.date,c=e.message,a=e.uid;return s.createElement(x,{key:t},s.createElement("div",null,s.createElement(N,{name:n,date:o}),s.createElement(S,null,c)),a===(null==r?void 0:r.uid)&&s.createElement("div",null,s.createElement(_,{title:"Deletar comentário",onClick:L(t)},s.createElement(p.Z,{width:16,height:16}))))})):"Não há comentários nesse post.",r&&s.createElement(j,{onSubmit:T,"aria-live":"polite"},"created"===C?s.createElement(m.Z,{show:!0,type:"success"},"Seu comentário foi adicionado!"):s.createElement(h.gx,{onChange:function(e){O({type:"WRITTING",value:e.target.value}),c.current.style.height=c.current.scrollHeight+"px"},placeholder:"Deixe um comentário",value:I,ref:c})),s.createElement(m.Z,{show:"rejected"===C,closable:!0,onClose:function(){return O({type:"IDLE"})},type:"danger"},"Ocorreu algum erro inexperado ao ",P," seu comentário. Tente novamente daqui a pouco."),y&&s.createElement(D,{onClose:function(){return g(!1)},$_css:l},s.createElement("p",null,"Você tem certeza que deseja deletar esse comentário?"),s.createElement(f.Z,{onClick:function(){return g(!1)},style:{marginRight:12}},"Cancelar"),s.createElement(f.Z,{skin:"danger",onClick:(0,o.Z)(u().mark((function e(){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z(k),g(!1);case 2:case"end":return e.stop()}}),e)})))},"Deletar")))}A.defaultProps={comments:[]};var F=A},20111:function(e,t,n){"use strict";n.r(t);var r=n(4942),o=n(15861),c=n(9925),a=n(87757),u=n.n(a),s=n(67294),i=n(21274),l=n(71656),p=n(92009),m=n(92553),f=n(56247),d=n(3340),y=n(97224);function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=e.data.mdx,n=e.transitionStatus,r=(0,s.useState)([]),c=r[0],a=r[1];(0,s.useEffect)((function(){var e=function(){var e=(0,o.Z)(u().mark((function e(){var n,r;return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,l.IO)((0,l.hJ)(y.db,"comments"),(0,l.ar)("slug","==",t.slug),(0,l.Xo)("date","desc")),r=(0,l.cf)(n,(function(e){var t=e.docs.map((function(e){return g({id:e.id},e.data())}));a(t)})),e.abrupt("return",(function(){return r()}));case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[t.slug]);var h=(0,p.Z)(n);return s.createElement(b,{$_css:h},s.createElement(f.HJ,{title:t.frontmatter.title,description:t.excerpt}),s.createElement(m.Dx,null,t.frontmatter.title),s.createElement(m.dk,null,t.frontmatter.description),s.createElement("time",null,"Publicado em ",t.frontmatter.date),t.frontmatter.img&&s.createElement(m.Ei,{src:"/"+t.frontmatter.img}),s.createElement(f.o5,{headings:t.headings}),s.createElement(i.MDXRenderer,null,t.body),s.createElement(m.Hr,{style:{marginTop:40}}),s.createElement(d.o,{slug:t.slug,comments:c}))}t.default=v;v.defaultProps={transitionStatus:void 0};var b=(0,c.default)("div").withConfig({displayName:"blog-post___StyledDiv",componentId:"sc-94awsv-0"})(["animation:",";"],(function(e){return e.$_css}))}}]);
//# sourceMappingURL=component---src-templates-blog-post-jsx-3c12055182c09fe37d26.js.map