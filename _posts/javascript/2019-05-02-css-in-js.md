---
layout: post
title: A evolu√ß√£o na escrita do CSS.
category: Javascript
meta: Veremos como a forma de escrever css evoluiu, desde a forma b√°sica, metodologias css, pr√©-processadores at√© CSS-in-JS .
excerpt: Veremos o caminho que a escrita do CSS percorreu at√© os dias de hoje, metodologias de escrita, css-in-js, pr√©-processadores, etc.
preview-img: css-in-js.png
comments: true
author: Allysson dos Santos
---

## O caminho do CSS

O CSS √© uma linguagem para descrever como ser√° apresentado um documento escrito em HTML ou XML, acho que voc√™ conhece, n√©? üôÉ

A forma mais b√°sica de se escrever _CSS_ √© abrir uma tag `<style>` e jogar o css l√° dentro.

{% highlight css linenos %}

<style>
  div {
    border: 1px solid #ccc;
  }

  div p {
    text-indent: 1ch;
  }
</style>

{% endhighlight %}

Definir os estilos "livremente" pode ser suficiente se voc√™ est√° desenvolvendo alguma aplica√ß√£o simples, apenas para aprender ou testar algumas coisas, por√©m, para aplica√ß√µes mais robustas e complexas √© importante tomar alguns cuidados. Para manter a sanidade mental e conseguir dar manuten√ß√£o mais tranquilamente, √© necess√°rio tomar alguns cuidados na hora de estruturar seus arquivos, escrever CSS sem seguir alguma forma padronizada pode acarretar em alguns problemas conforme seu codebase vai evoluindo crescendo algumas tretas v√£o aparecendo, por exemplo, estilos que afetam lugares indesej√°veis, estilos n√£o utilizados sendo baixados pelo browser, problemas com especifidades (regras sobrepondo regras), c√≥digo duplicado, etc.

Podemos demonstrar alguns problemas de se escrever CSS atrav√©s de um exemplo do nosso dia a dia, imagine que voc√™ vai dar manuten√ß√£o em um projeto existente e precisa alterar alguma coisa no layout do bot√£o, por exemplo:

{% highlight css linenos %}

<style>
  .btn {
    display: inline-block;
    font-weight: 400;
    text-align: center;
    white-space: nowrap;
    vertical-align: middle;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
    border: 1px solid transparent;
    padding: .375rem .75rem;
    font-size: 1rem;
    line-height: 1.5;
    border-radius: .25rem;
    transition: color .15s ease-in-out,
      background-color .15s ease-in-out,
      border-color .15s ease-in-out,
      box-shadow .15s ease-in-out;
  }

  .btn.btn-primary {
    color: #fff;
    background-color: #0062cc;
    border-color: #005cbf;
  }

  .btn-primary:hover,
  .btn-primary.active {
    color: #fff;
    background-color: #0069d9;
    border-color: #0062cc;
  }
</style>

{% endhighlight %}

Batendo o olho nisso algumas perguntas podem surgir:

- Onde esse estilo est√° sendo usado, ser√° que s√£o s√≥ em bot√µes mesmo?
- Posso apagar?
- Se eu editar, vai zoar tudo?
- De onde vieram essas cores?

Pra tentar organizar um pouco as coisas surgiram as metodologias CSS.

## Metodologias de escrita de CSS

Para solucionar alguns dos problemas acima, surgiram algumas conven√ß√µes de estrutura√ß√£o do CSS, como por exemplo:

- [BEM](http://getbem.com/introduction/ 'Metodologia BEM')
- [OOCS](http://oocss.org/ 'Metodologia OOCS')
- [SMACSS](http://smacss.com/ 'Metodologia SMACSS')
- [ITCSS](https://itcss.io/ 'Metodologia ITCSS')

Ambas ditam a forma de estruturar ou escrever seus arquivos CSS.

### BEM

No BEM temos o conceito de **Blocos**, **Elementos** e **Modificadores**.

<span style="color: #76b24f;">Blocos</span> | <span style="color: #4f91b2;">Elementos</span> | <span style="color: #d5635d;">Modificadores</span>
------ | --------- | -------------
Entidade autossuficiente e autoexplicativa. Exemplo: `header`, `container`, `menu`, `checkbox`, `input` | Parte de um bloco que n√£o tem significado quando usado sozinho, est√° atrelado ao bloco. Exemplo: `menu item`, `list item`, `header title` | Uma flag em um elemento ou bloco, Usado para alterar a apar√™ncia ou um comportamento.

No pr√≥prio site da metodologia _BEM_ existe um exemplo utilizando o site do github como exemplo:

![Exemplo do BEM sendo aplicado no site do GitHub](/assets/images/github_captions.jpg)

Um outro exemplo, temos um bot√£o padr√£o `.button`, precisamos de um bot√£o com o estado de _danger_, o BEM nos indica que a classe desse elemento deve seguir o padr√£o `block--modifier-value`, ent√£o, temos que aplicar a classe `.button--state-danger`.

{% highlight css linenos %}

<style>
  .button { /* ... */ }
  .button--state-danger { /* ... */ }
</style>

{% endhighlight %}

{% highlight html linenos %}
<button class="button">Normal Button</button>
<button class="button button--state-danger">Danger Button</button>
{% endhighlight %}

#### Benef√≠cios

Modularidade, **blocos** nunca dependem de outros elementos na p√°gina, com isso n√£o teriamos o problema de estilos de outros blocos influenciando em outros.

Compartilhamento de c√≥digo, compor blocos de maneiras diferentes e reus√°-los com intelig√™ncia reduz a quantidade de CSS que voc√™ tem que manter.

Estrutura, a metodologia BEM d√° ao seu CSS uma estrutura s√≥lida de f√°cil leitura e manuten√ß√£o.

### SMACSS

J√° o SMACSS n√£o determina a forma que voc√™ escreve suas classes, mas sim a estrutura de diret√≥rios, com ele, voc√™ √© orientado a criar as seguintes pastas:

- \_\_base - arquivos bases (reset e plugins);
- \_\_ layout - parte da estrutura do projeto, ex: header, footer;
- \_\_ module - componentes menores como, formul√°rios bot√µes, tipografia, cores, etc;
- \_\_ state - estados como: hover, disabled, active, etc;
- \_\_ theme - reservado para cria√ß√£o de temas.

A ideia das metodologias √© deixar seu CSS mais leg√≠vel, f√°cil de dar manuten√ß√£o, bem estruturado e organizado. Ao inv√©s de sair adicionando CSS em qualquer lugar e estilizando atrav√©s de ids, aumentando a especifidade para conseguir estilizar o elemento desejado, agora voc√™ segue alguns padr√µes estabelecidos pela comunidade e todos os desenvolvedores conseguem falar a mesma lingua!

### Benef√≠cios

Al√©m de ter uma estrutura com a nomenclatura das suas classes CSS, agora voc√™ tem uma estrutura de arquivos bem definida, com isso, novos desenvolvedores conseguem se localizar mais rapidamente dentro do codebase, se seguido corretamente.

Se combinados, BEM e SMACSS podem deixar muito mais claro e f√°cil a manuten√ß√£o dos estilos de seu sistema.

Voc√™ pode conferir mais detalhadamente a proposta de cada metodologia nos links acima.

## Pr√©-processadores

O que s√£o pr√©-processadores CSS? Basicamente, voc√™ escreve o CSS numa sintaxe diferente da padr√£o, essa sintaxe adiciona novos comportamentos e funcionalidades, por fim, essa sintaxe √© transpilada e gera o CSS "comum" que o browser entende.

Temos alguns pr√©-processadores no mercado, como por exemplo:

- [Sass](https://sass-lang.com/ 'Sass')
- [LESS](http://lesscss.org/ 'LESS')
- [Stylus](http://stylus-lang.com/ 'Stylus')

Os pr√©-processadores possuem uma proposta de facilitar a centraliza√ß√£o, compartilhamento e reaproveitamento de c√≥digo por meio de:

- [Cria√ß√£o de vari√°veis](https://sass-lang.com/documentation/variables 'Cria√ß√£o de vari√°veis')\*
- [Nesting](https://sass-lang.com/documentation/style-rules#nesting 'Nesting')
- [Condicionais](https://sass-lang.com/documentation/at-rules/control 'Condicionais')
- [Loops](https://sass-lang.com/documentation/at-rules/control/for 'Loops')
- [Imports](https://sass-lang.com/documentation/at-rules/import 'Imports')
- [Fun√ß√µes](https://sass-lang.com/documentation/at-rules/function 'Fun√ß√µes')
- [_mixins_](https://sass-lang.com/documentation/at-rules/mixin 'mixins')
- [_extends_](https://sass-lang.com/documentation/at-rules/extend 'extends')

\*J√° dispon√≠vel nativamente: [Using CSS custom properties](https://developer.mozilla.org/en-US/docs/Web/CSS/Using_CSS_custom_properties 'Using CSS custom properties')

Seguem alguns exemplos da sintaxe e features de alguns pr√©-processadores:

**Sass**:
{% highlight linenos %}

<style>
  $spacing: 5px; // vari√°veis
  $primary: blue;

  .header {
    padding: $spacing;

    .title { // nesting
      color: $primary;
      font-size: 2rem;
    }
  }

  .main {
    padding: $spacing;
  }
</style>

{% endhighlight %}

**LESS**:
{% highlight linenos %}

<style>
  @spacing: 5px;
  @primary: blue;

  .header {
    padding: @spacing;

    .title {
      color: @primary;
      font-size: 2rem;
    }
  }

  .main {
    padding: @spacing;
  }
</style>

{% endhighlight %}

**Stylus**

Stylus tamb√©m remove a necessidade de se utilizar `{}` e `;`, por√©m, √© necess√°rio que a identa√ß√£o seja seguida corretamente.

{% highlight linenos %}

<style>
  spacing = 5px
  primary = blue

  .header
    padding: spacing

    .title
      color: primary
      font-size: 2rem

  .main
    padding: spacing
</style>

{% endhighlight %}

Para mais informa√ß√µes e exemplos de uso, voc√™ pode seguir os links de cada pr√©-processador acima.

### PostCSS

Outro cara que a comunidade desenvolveu foi o **PostCSS**, uma ferramenta para transformar o CSS atrav√©s do JavaScript, ele √© baseado em plugins e necessita de algum task runner ou ferramenta de bundling para conseguir manipular o seu CSS, como por exemplo: [Gulp](https://gulpjs.com/ "Gulp"), [Grunt](https://gruntjs.com/ "Grunt"), [Webpack](https://webpack.js.org/ "Webpack"), [Rollup](https://rollupjs.org/guide/en "Rollup").

Com ele √© poss√≠vel instalar alguns plugins como o _autoprefixer_ que adiciona prefixos como `-webkit-` `-moz-` e `-ms-` ao seus estilos automaticamente.

## CSS-in-JS

Com o surgimento das bibliotecas para constru√ß√£o de interfaces, como [React](https://reactjs.org/ "React"), [Angular](https://angular.io/ "Angular"), [Vue.js](https://vuejs.org/ "Vue.js"), etc, come√ßamos a quebrar o desenvolvimento de interfaces em componentes, pensamos primeiro em componentes isolados, como bot√µes, tooltips, cards, inputs para depois em como compor em um bloco maior, como forms, modal e assim formar uma p√°gina completa.

BEM, SMACSS, SASS, LESS, Stylus, tudo isso tamb√©m √© poss√≠vel ser aplicado com React, Angular ou Vue.

### De onde surgiu o conceito CSS-in-JS?

Provavelmente a primeira vez que o termo CSS-in-JS surgiu foi atrav√©s de uma palestra de um engenheiro que trabalha no Facebook, [React: CSS in your JS by Christopher Chedeau](https://vimeo.com/116209150 'React: CSS in your JS by Christopher Chedeau') com o intuito de resolver alguns problemas:

- Escopo Global
- Depend√™ncias
- Dead Code Elimination (C√≥digo n√£o utilizado)
- Minifica√ß√£o

Entre outros...

### Escopo global

N√≥s sabemos que o CSS possui v√°riaveis globais, por exemplo, uma classe pode ser adicionada √† qualquer elemento, um selector de tag pode selecionar qualquer tag no documento, o CSS foi inicialmente criado para estilizar documentos, n√£o foi levado em conta componentes, a p√°gina inteira √© estilizada em um grande bloco de c√≥digo, e usualmente n√£o envolvia um grande grupo de pessoas trabalhando paralelamente.

Sites modernos s√£o complexos, necessitam de v√°rios desenvolvedores trabalhando simultaneamente em partes diferentes do sistema, com isso, o escopo global do CSS pode ser um problema, estilos destinados a certos componentes podem influenciar em outros, esse foi um dos motivos para as metodologias css que vimos acima serem criadas.

CSS-in-JS resolve esse problema gerando um hash √∫nico para cada componente, um estilo nunca influenciar√° outro, podemos ver um exemplo disso com o _styled-components_.

{% highlight jsx linenos %}
const Button = styled.button`
  background-color: blue;
  padding: 10px;
`;

// ...

render() {
  return <Button>Hello</Button>
}
{% endhighlight %}

Este exemplo renderizar√° uma classe aleat√≥ria baseada no conte√∫do css que foi escrito dentro das `template strings` e adicionar√° a classe ao elemento do DOM:

{% highlight html linenos %}

<style>
  .sc-bwzfXH jmtBes {
    background-color: blue;
    padding: 10px;
  }
</style>

<button class="sc-bwzfXH jmtBes">Hello</button>

{% endhighlight %}
